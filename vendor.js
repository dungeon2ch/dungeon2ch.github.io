(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["vendors~main"],{

/***/ "./node_modules/base64-js/index.js":
/*!*****************************************!*\
  !*** ./node_modules/base64-js/index.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.byteLength = byteLength
exports.toByteArray = toByteArray
exports.fromByteArray = fromByteArray

var lookup = []
var revLookup = []
var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array

var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
for (var i = 0, len = code.length; i < len; ++i) {
  lookup[i] = code[i]
  revLookup[code.charCodeAt(i)] = i
}

// Support decoding URL-safe base64 strings, as Node.js does.
// See: https://en.wikipedia.org/wiki/Base64#URL_applications
revLookup['-'.charCodeAt(0)] = 62
revLookup['_'.charCodeAt(0)] = 63

function getLens (b64) {
  var len = b64.length

  if (len % 4 > 0) {
    throw new Error('Invalid string. Length must be a multiple of 4')
  }

  // Trim off extra bytes after placeholder bytes are found
  // See: https://github.com/beatgammit/base64-js/issues/42
  var validLen = b64.indexOf('=')
  if (validLen === -1) validLen = len

  var placeHoldersLen = validLen === len
    ? 0
    : 4 - (validLen % 4)

  return [validLen, placeHoldersLen]
}

// base64 is 4/3 + up to two characters of the original data
function byteLength (b64) {
  var lens = getLens(b64)
  var validLen = lens[0]
  var placeHoldersLen = lens[1]
  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen
}

function _byteLength (b64, validLen, placeHoldersLen) {
  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen
}

function toByteArray (b64) {
  var tmp
  var lens = getLens(b64)
  var validLen = lens[0]
  var placeHoldersLen = lens[1]

  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))

  var curByte = 0

  // if there are placeholders, only get up to the last complete 4 chars
  var len = placeHoldersLen > 0
    ? validLen - 4
    : validLen

  for (var i = 0; i < len; i += 4) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 18) |
      (revLookup[b64.charCodeAt(i + 1)] << 12) |
      (revLookup[b64.charCodeAt(i + 2)] << 6) |
      revLookup[b64.charCodeAt(i + 3)]
    arr[curByte++] = (tmp >> 16) & 0xFF
    arr[curByte++] = (tmp >> 8) & 0xFF
    arr[curByte++] = tmp & 0xFF
  }

  if (placeHoldersLen === 2) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 2) |
      (revLookup[b64.charCodeAt(i + 1)] >> 4)
    arr[curByte++] = tmp & 0xFF
  }

  if (placeHoldersLen === 1) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 10) |
      (revLookup[b64.charCodeAt(i + 1)] << 4) |
      (revLookup[b64.charCodeAt(i + 2)] >> 2)
    arr[curByte++] = (tmp >> 8) & 0xFF
    arr[curByte++] = tmp & 0xFF
  }

  return arr
}

function tripletToBase64 (num) {
  return lookup[num >> 18 & 0x3F] +
    lookup[num >> 12 & 0x3F] +
    lookup[num >> 6 & 0x3F] +
    lookup[num & 0x3F]
}

function encodeChunk (uint8, start, end) {
  var tmp
  var output = []
  for (var i = start; i < end; i += 3) {
    tmp =
      ((uint8[i] << 16) & 0xFF0000) +
      ((uint8[i + 1] << 8) & 0xFF00) +
      (uint8[i + 2] & 0xFF)
    output.push(tripletToBase64(tmp))
  }
  return output.join('')
}

function fromByteArray (uint8) {
  var tmp
  var len = uint8.length
  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes
  var parts = []
  var maxChunkLength = 16383 // must be multiple of 3

  // go through the array every three bytes, we'll deal with trailing stuff later
  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {
    parts.push(encodeChunk(
      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)
    ))
  }

  // pad the end with zeros, but make sure to not forget the extra bytes
  if (extraBytes === 1) {
    tmp = uint8[len - 1]
    parts.push(
      lookup[tmp >> 2] +
      lookup[(tmp << 4) & 0x3F] +
      '=='
    )
  } else if (extraBytes === 2) {
    tmp = (uint8[len - 2] << 8) + uint8[len - 1]
    parts.push(
      lookup[tmp >> 10] +
      lookup[(tmp >> 4) & 0x3F] +
      lookup[(tmp << 2) & 0x3F] +
      '='
    )
  }

  return parts.join('')
}


/***/ }),

/***/ "./node_modules/buffer/index.js":
/*!**************************************!*\
  !*** ./node_modules/buffer/index.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
/* eslint-disable no-proto */



var base64 = __webpack_require__(/*! base64-js */ "./node_modules/base64-js/index.js")
var ieee754 = __webpack_require__(/*! ieee754 */ "./node_modules/ieee754/index.js")
var isArray = __webpack_require__(/*! isarray */ "./node_modules/isarray/index.js")

exports.Buffer = Buffer
exports.SlowBuffer = SlowBuffer
exports.INSPECT_MAX_BYTES = 50

/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Use Object implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * Due to various browser bugs, sometimes the Object implementation will be used even
 * when the browser supports typed arrays.
 *
 * Note:
 *
 *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,
 *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.
 *
 *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.
 *
 *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of
 *     incorrect length in some situations.

 * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they
 * get the Object implementation, which is slower but behaves correctly.
 */
Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined
  ? global.TYPED_ARRAY_SUPPORT
  : typedArraySupport()

/*
 * Export kMaxLength after typed array support is determined.
 */
exports.kMaxLength = kMaxLength()

function typedArraySupport () {
  try {
    var arr = new Uint8Array(1)
    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}
    return arr.foo() === 42 && // typed array instances can be augmented
        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`
        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`
  } catch (e) {
    return false
  }
}

function kMaxLength () {
  return Buffer.TYPED_ARRAY_SUPPORT
    ? 0x7fffffff
    : 0x3fffffff
}

function createBuffer (that, length) {
  if (kMaxLength() < length) {
    throw new RangeError('Invalid typed array length')
  }
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = new Uint8Array(length)
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    if (that === null) {
      that = new Buffer(length)
    }
    that.length = length
  }

  return that
}

/**
 * The Buffer constructor returns instances of `Uint8Array` that have their
 * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of
 * `Uint8Array`, so the returned instances will have all the node `Buffer` methods
 * and the `Uint8Array` methods. Square bracket notation works as expected -- it
 * returns a single octet.
 *
 * The `Uint8Array` prototype remains unmodified.
 */

function Buffer (arg, encodingOrOffset, length) {
  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {
    return new Buffer(arg, encodingOrOffset, length)
  }

  // Common case.
  if (typeof arg === 'number') {
    if (typeof encodingOrOffset === 'string') {
      throw new Error(
        'If encoding is specified then the first argument must be a string'
      )
    }
    return allocUnsafe(this, arg)
  }
  return from(this, arg, encodingOrOffset, length)
}

Buffer.poolSize = 8192 // not used by this implementation

// TODO: Legacy, not needed anymore. Remove in next major version.
Buffer._augment = function (arr) {
  arr.__proto__ = Buffer.prototype
  return arr
}

function from (that, value, encodingOrOffset, length) {
  if (typeof value === 'number') {
    throw new TypeError('"value" argument must not be a number')
  }

  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {
    return fromArrayBuffer(that, value, encodingOrOffset, length)
  }

  if (typeof value === 'string') {
    return fromString(that, value, encodingOrOffset)
  }

  return fromObject(that, value)
}

/**
 * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError
 * if value is a number.
 * Buffer.from(str[, encoding])
 * Buffer.from(array)
 * Buffer.from(buffer)
 * Buffer.from(arrayBuffer[, byteOffset[, length]])
 **/
Buffer.from = function (value, encodingOrOffset, length) {
  return from(null, value, encodingOrOffset, length)
}

if (Buffer.TYPED_ARRAY_SUPPORT) {
  Buffer.prototype.__proto__ = Uint8Array.prototype
  Buffer.__proto__ = Uint8Array
  if (typeof Symbol !== 'undefined' && Symbol.species &&
      Buffer[Symbol.species] === Buffer) {
    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97
    Object.defineProperty(Buffer, Symbol.species, {
      value: null,
      configurable: true
    })
  }
}

function assertSize (size) {
  if (typeof size !== 'number') {
    throw new TypeError('"size" argument must be a number')
  } else if (size < 0) {
    throw new RangeError('"size" argument must not be negative')
  }
}

function alloc (that, size, fill, encoding) {
  assertSize(size)
  if (size <= 0) {
    return createBuffer(that, size)
  }
  if (fill !== undefined) {
    // Only pay attention to encoding if it's a string. This
    // prevents accidentally sending in a number that would
    // be interpretted as a start offset.
    return typeof encoding === 'string'
      ? createBuffer(that, size).fill(fill, encoding)
      : createBuffer(that, size).fill(fill)
  }
  return createBuffer(that, size)
}

/**
 * Creates a new filled Buffer instance.
 * alloc(size[, fill[, encoding]])
 **/
Buffer.alloc = function (size, fill, encoding) {
  return alloc(null, size, fill, encoding)
}

function allocUnsafe (that, size) {
  assertSize(size)
  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) {
    for (var i = 0; i < size; ++i) {
      that[i] = 0
    }
  }
  return that
}

/**
 * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.
 * */
Buffer.allocUnsafe = function (size) {
  return allocUnsafe(null, size)
}
/**
 * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.
 */
Buffer.allocUnsafeSlow = function (size) {
  return allocUnsafe(null, size)
}

function fromString (that, string, encoding) {
  if (typeof encoding !== 'string' || encoding === '') {
    encoding = 'utf8'
  }

  if (!Buffer.isEncoding(encoding)) {
    throw new TypeError('"encoding" must be a valid string encoding')
  }

  var length = byteLength(string, encoding) | 0
  that = createBuffer(that, length)

  var actual = that.write(string, encoding)

  if (actual !== length) {
    // Writing a hex string, for example, that contains invalid characters will
    // cause everything after the first invalid character to be ignored. (e.g.
    // 'abxxcd' will be treated as 'ab')
    that = that.slice(0, actual)
  }

  return that
}

function fromArrayLike (that, array) {
  var length = array.length < 0 ? 0 : checked(array.length) | 0
  that = createBuffer(that, length)
  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

function fromArrayBuffer (that, array, byteOffset, length) {
  array.byteLength // this throws if `array` is not a valid ArrayBuffer

  if (byteOffset < 0 || array.byteLength < byteOffset) {
    throw new RangeError('\'offset\' is out of bounds')
  }

  if (array.byteLength < byteOffset + (length || 0)) {
    throw new RangeError('\'length\' is out of bounds')
  }

  if (byteOffset === undefined && length === undefined) {
    array = new Uint8Array(array)
  } else if (length === undefined) {
    array = new Uint8Array(array, byteOffset)
  } else {
    array = new Uint8Array(array, byteOffset, length)
  }

  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = array
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    that = fromArrayLike(that, array)
  }
  return that
}

function fromObject (that, obj) {
  if (Buffer.isBuffer(obj)) {
    var len = checked(obj.length) | 0
    that = createBuffer(that, len)

    if (that.length === 0) {
      return that
    }

    obj.copy(that, 0, 0, len)
    return that
  }

  if (obj) {
    if ((typeof ArrayBuffer !== 'undefined' &&
        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {
      if (typeof obj.length !== 'number' || isnan(obj.length)) {
        return createBuffer(that, 0)
      }
      return fromArrayLike(that, obj)
    }

    if (obj.type === 'Buffer' && isArray(obj.data)) {
      return fromArrayLike(that, obj.data)
    }
  }

  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')
}

function checked (length) {
  // Note: cannot use `length < kMaxLength()` here because that fails when
  // length is NaN (which is otherwise coerced to zero.)
  if (length >= kMaxLength()) {
    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +
                         'size: 0x' + kMaxLength().toString(16) + ' bytes')
  }
  return length | 0
}

function SlowBuffer (length) {
  if (+length != length) { // eslint-disable-line eqeqeq
    length = 0
  }
  return Buffer.alloc(+length)
}

Buffer.isBuffer = function isBuffer (b) {
  return !!(b != null && b._isBuffer)
}

Buffer.compare = function compare (a, b) {
  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {
    throw new TypeError('Arguments must be Buffers')
  }

  if (a === b) return 0

  var x = a.length
  var y = b.length

  for (var i = 0, len = Math.min(x, y); i < len; ++i) {
    if (a[i] !== b[i]) {
      x = a[i]
      y = b[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

Buffer.isEncoding = function isEncoding (encoding) {
  switch (String(encoding).toLowerCase()) {
    case 'hex':
    case 'utf8':
    case 'utf-8':
    case 'ascii':
    case 'latin1':
    case 'binary':
    case 'base64':
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      return true
    default:
      return false
  }
}

Buffer.concat = function concat (list, length) {
  if (!isArray(list)) {
    throw new TypeError('"list" argument must be an Array of Buffers')
  }

  if (list.length === 0) {
    return Buffer.alloc(0)
  }

  var i
  if (length === undefined) {
    length = 0
    for (i = 0; i < list.length; ++i) {
      length += list[i].length
    }
  }

  var buffer = Buffer.allocUnsafe(length)
  var pos = 0
  for (i = 0; i < list.length; ++i) {
    var buf = list[i]
    if (!Buffer.isBuffer(buf)) {
      throw new TypeError('"list" argument must be an Array of Buffers')
    }
    buf.copy(buffer, pos)
    pos += buf.length
  }
  return buffer
}

function byteLength (string, encoding) {
  if (Buffer.isBuffer(string)) {
    return string.length
  }
  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&
      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {
    return string.byteLength
  }
  if (typeof string !== 'string') {
    string = '' + string
  }

  var len = string.length
  if (len === 0) return 0

  // Use a for loop to avoid recursion
  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'ascii':
      case 'latin1':
      case 'binary':
        return len
      case 'utf8':
      case 'utf-8':
      case undefined:
        return utf8ToBytes(string).length
      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return len * 2
      case 'hex':
        return len >>> 1
      case 'base64':
        return base64ToBytes(string).length
      default:
        if (loweredCase) return utf8ToBytes(string).length // assume utf8
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}
Buffer.byteLength = byteLength

function slowToString (encoding, start, end) {
  var loweredCase = false

  // No need to verify that "this.length <= MAX_UINT32" since it's a read-only
  // property of a typed array.

  // This behaves neither like String nor Uint8Array in that we set start/end
  // to their upper/lower bounds if the value passed is out of range.
  // undefined is handled specially as per ECMA-262 6th Edition,
  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.
  if (start === undefined || start < 0) {
    start = 0
  }
  // Return early if start > this.length. Done here to prevent potential uint32
  // coercion fail below.
  if (start > this.length) {
    return ''
  }

  if (end === undefined || end > this.length) {
    end = this.length
  }

  if (end <= 0) {
    return ''
  }

  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.
  end >>>= 0
  start >>>= 0

  if (end <= start) {
    return ''
  }

  if (!encoding) encoding = 'utf8'

  while (true) {
    switch (encoding) {
      case 'hex':
        return hexSlice(this, start, end)

      case 'utf8':
      case 'utf-8':
        return utf8Slice(this, start, end)

      case 'ascii':
        return asciiSlice(this, start, end)

      case 'latin1':
      case 'binary':
        return latin1Slice(this, start, end)

      case 'base64':
        return base64Slice(this, start, end)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return utf16leSlice(this, start, end)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = (encoding + '').toLowerCase()
        loweredCase = true
    }
  }
}

// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect
// Buffer instances.
Buffer.prototype._isBuffer = true

function swap (b, n, m) {
  var i = b[n]
  b[n] = b[m]
  b[m] = i
}

Buffer.prototype.swap16 = function swap16 () {
  var len = this.length
  if (len % 2 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 16-bits')
  }
  for (var i = 0; i < len; i += 2) {
    swap(this, i, i + 1)
  }
  return this
}

Buffer.prototype.swap32 = function swap32 () {
  var len = this.length
  if (len % 4 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 32-bits')
  }
  for (var i = 0; i < len; i += 4) {
    swap(this, i, i + 3)
    swap(this, i + 1, i + 2)
  }
  return this
}

Buffer.prototype.swap64 = function swap64 () {
  var len = this.length
  if (len % 8 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 64-bits')
  }
  for (var i = 0; i < len; i += 8) {
    swap(this, i, i + 7)
    swap(this, i + 1, i + 6)
    swap(this, i + 2, i + 5)
    swap(this, i + 3, i + 4)
  }
  return this
}

Buffer.prototype.toString = function toString () {
  var length = this.length | 0
  if (length === 0) return ''
  if (arguments.length === 0) return utf8Slice(this, 0, length)
  return slowToString.apply(this, arguments)
}

Buffer.prototype.equals = function equals (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  if (this === b) return true
  return Buffer.compare(this, b) === 0
}

Buffer.prototype.inspect = function inspect () {
  var str = ''
  var max = exports.INSPECT_MAX_BYTES
  if (this.length > 0) {
    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')
    if (this.length > max) str += ' ... '
  }
  return '<Buffer ' + str + '>'
}

Buffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {
  if (!Buffer.isBuffer(target)) {
    throw new TypeError('Argument must be a Buffer')
  }

  if (start === undefined) {
    start = 0
  }
  if (end === undefined) {
    end = target ? target.length : 0
  }
  if (thisStart === undefined) {
    thisStart = 0
  }
  if (thisEnd === undefined) {
    thisEnd = this.length
  }

  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {
    throw new RangeError('out of range index')
  }

  if (thisStart >= thisEnd && start >= end) {
    return 0
  }
  if (thisStart >= thisEnd) {
    return -1
  }
  if (start >= end) {
    return 1
  }

  start >>>= 0
  end >>>= 0
  thisStart >>>= 0
  thisEnd >>>= 0

  if (this === target) return 0

  var x = thisEnd - thisStart
  var y = end - start
  var len = Math.min(x, y)

  var thisCopy = this.slice(thisStart, thisEnd)
  var targetCopy = target.slice(start, end)

  for (var i = 0; i < len; ++i) {
    if (thisCopy[i] !== targetCopy[i]) {
      x = thisCopy[i]
      y = targetCopy[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,
// OR the last index of `val` in `buffer` at offset <= `byteOffset`.
//
// Arguments:
// - buffer - a Buffer to search
// - val - a string, Buffer, or number
// - byteOffset - an index into `buffer`; will be clamped to an int32
// - encoding - an optional encoding, relevant is val is a string
// - dir - true for indexOf, false for lastIndexOf
function bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {
  // Empty buffer means no match
  if (buffer.length === 0) return -1

  // Normalize byteOffset
  if (typeof byteOffset === 'string') {
    encoding = byteOffset
    byteOffset = 0
  } else if (byteOffset > 0x7fffffff) {
    byteOffset = 0x7fffffff
  } else if (byteOffset < -0x80000000) {
    byteOffset = -0x80000000
  }
  byteOffset = +byteOffset  // Coerce to Number.
  if (isNaN(byteOffset)) {
    // byteOffset: it it's undefined, null, NaN, "foo", etc, search whole buffer
    byteOffset = dir ? 0 : (buffer.length - 1)
  }

  // Normalize byteOffset: negative offsets start from the end of the buffer
  if (byteOffset < 0) byteOffset = buffer.length + byteOffset
  if (byteOffset >= buffer.length) {
    if (dir) return -1
    else byteOffset = buffer.length - 1
  } else if (byteOffset < 0) {
    if (dir) byteOffset = 0
    else return -1
  }

  // Normalize val
  if (typeof val === 'string') {
    val = Buffer.from(val, encoding)
  }

  // Finally, search either indexOf (if dir is true) or lastIndexOf
  if (Buffer.isBuffer(val)) {
    // Special case: looking for empty string/buffer always fails
    if (val.length === 0) {
      return -1
    }
    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)
  } else if (typeof val === 'number') {
    val = val & 0xFF // Search for a byte value [0-255]
    if (Buffer.TYPED_ARRAY_SUPPORT &&
        typeof Uint8Array.prototype.indexOf === 'function') {
      if (dir) {
        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)
      } else {
        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)
      }
    }
    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)
  }

  throw new TypeError('val must be string, number or Buffer')
}

function arrayIndexOf (arr, val, byteOffset, encoding, dir) {
  var indexSize = 1
  var arrLength = arr.length
  var valLength = val.length

  if (encoding !== undefined) {
    encoding = String(encoding).toLowerCase()
    if (encoding === 'ucs2' || encoding === 'ucs-2' ||
        encoding === 'utf16le' || encoding === 'utf-16le') {
      if (arr.length < 2 || val.length < 2) {
        return -1
      }
      indexSize = 2
      arrLength /= 2
      valLength /= 2
      byteOffset /= 2
    }
  }

  function read (buf, i) {
    if (indexSize === 1) {
      return buf[i]
    } else {
      return buf.readUInt16BE(i * indexSize)
    }
  }

  var i
  if (dir) {
    var foundIndex = -1
    for (i = byteOffset; i < arrLength; i++) {
      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {
        if (foundIndex === -1) foundIndex = i
        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize
      } else {
        if (foundIndex !== -1) i -= i - foundIndex
        foundIndex = -1
      }
    }
  } else {
    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength
    for (i = byteOffset; i >= 0; i--) {
      var found = true
      for (var j = 0; j < valLength; j++) {
        if (read(arr, i + j) !== read(val, j)) {
          found = false
          break
        }
      }
      if (found) return i
    }
  }

  return -1
}

Buffer.prototype.includes = function includes (val, byteOffset, encoding) {
  return this.indexOf(val, byteOffset, encoding) !== -1
}

Buffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)
}

Buffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)
}

function hexWrite (buf, string, offset, length) {
  offset = Number(offset) || 0
  var remaining = buf.length - offset
  if (!length) {
    length = remaining
  } else {
    length = Number(length)
    if (length > remaining) {
      length = remaining
    }
  }

  // must be an even number of digits
  var strLen = string.length
  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')

  if (length > strLen / 2) {
    length = strLen / 2
  }
  for (var i = 0; i < length; ++i) {
    var parsed = parseInt(string.substr(i * 2, 2), 16)
    if (isNaN(parsed)) return i
    buf[offset + i] = parsed
  }
  return i
}

function utf8Write (buf, string, offset, length) {
  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)
}

function asciiWrite (buf, string, offset, length) {
  return blitBuffer(asciiToBytes(string), buf, offset, length)
}

function latin1Write (buf, string, offset, length) {
  return asciiWrite(buf, string, offset, length)
}

function base64Write (buf, string, offset, length) {
  return blitBuffer(base64ToBytes(string), buf, offset, length)
}

function ucs2Write (buf, string, offset, length) {
  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)
}

Buffer.prototype.write = function write (string, offset, length, encoding) {
  // Buffer#write(string)
  if (offset === undefined) {
    encoding = 'utf8'
    length = this.length
    offset = 0
  // Buffer#write(string, encoding)
  } else if (length === undefined && typeof offset === 'string') {
    encoding = offset
    length = this.length
    offset = 0
  // Buffer#write(string, offset[, length][, encoding])
  } else if (isFinite(offset)) {
    offset = offset | 0
    if (isFinite(length)) {
      length = length | 0
      if (encoding === undefined) encoding = 'utf8'
    } else {
      encoding = length
      length = undefined
    }
  // legacy write(string, encoding, offset, length) - remove in v0.13
  } else {
    throw new Error(
      'Buffer.write(string, encoding, offset[, length]) is no longer supported'
    )
  }

  var remaining = this.length - offset
  if (length === undefined || length > remaining) length = remaining

  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {
    throw new RangeError('Attempt to write outside buffer bounds')
  }

  if (!encoding) encoding = 'utf8'

  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'hex':
        return hexWrite(this, string, offset, length)

      case 'utf8':
      case 'utf-8':
        return utf8Write(this, string, offset, length)

      case 'ascii':
        return asciiWrite(this, string, offset, length)

      case 'latin1':
      case 'binary':
        return latin1Write(this, string, offset, length)

      case 'base64':
        // Warning: maxLength not taken into account in base64Write
        return base64Write(this, string, offset, length)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return ucs2Write(this, string, offset, length)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}

Buffer.prototype.toJSON = function toJSON () {
  return {
    type: 'Buffer',
    data: Array.prototype.slice.call(this._arr || this, 0)
  }
}

function base64Slice (buf, start, end) {
  if (start === 0 && end === buf.length) {
    return base64.fromByteArray(buf)
  } else {
    return base64.fromByteArray(buf.slice(start, end))
  }
}

function utf8Slice (buf, start, end) {
  end = Math.min(buf.length, end)
  var res = []

  var i = start
  while (i < end) {
    var firstByte = buf[i]
    var codePoint = null
    var bytesPerSequence = (firstByte > 0xEF) ? 4
      : (firstByte > 0xDF) ? 3
      : (firstByte > 0xBF) ? 2
      : 1

    if (i + bytesPerSequence <= end) {
      var secondByte, thirdByte, fourthByte, tempCodePoint

      switch (bytesPerSequence) {
        case 1:
          if (firstByte < 0x80) {
            codePoint = firstByte
          }
          break
        case 2:
          secondByte = buf[i + 1]
          if ((secondByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)
            if (tempCodePoint > 0x7F) {
              codePoint = tempCodePoint
            }
          }
          break
        case 3:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)
            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {
              codePoint = tempCodePoint
            }
          }
          break
        case 4:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          fourthByte = buf[i + 3]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)
            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {
              codePoint = tempCodePoint
            }
          }
      }
    }

    if (codePoint === null) {
      // we did not generate a valid codePoint so insert a
      // replacement char (U+FFFD) and advance only 1 byte
      codePoint = 0xFFFD
      bytesPerSequence = 1
    } else if (codePoint > 0xFFFF) {
      // encode to utf16 (surrogate pair dance)
      codePoint -= 0x10000
      res.push(codePoint >>> 10 & 0x3FF | 0xD800)
      codePoint = 0xDC00 | codePoint & 0x3FF
    }

    res.push(codePoint)
    i += bytesPerSequence
  }

  return decodeCodePointsArray(res)
}

// Based on http://stackoverflow.com/a/22747272/680742, the browser with
// the lowest limit is Chrome, with 0x10000 args.
// We go 1 magnitude less, for safety
var MAX_ARGUMENTS_LENGTH = 0x1000

function decodeCodePointsArray (codePoints) {
  var len = codePoints.length
  if (len <= MAX_ARGUMENTS_LENGTH) {
    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()
  }

  // Decode in chunks to avoid "call stack size exceeded".
  var res = ''
  var i = 0
  while (i < len) {
    res += String.fromCharCode.apply(
      String,
      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)
    )
  }
  return res
}

function asciiSlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i] & 0x7F)
  }
  return ret
}

function latin1Slice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i])
  }
  return ret
}

function hexSlice (buf, start, end) {
  var len = buf.length

  if (!start || start < 0) start = 0
  if (!end || end < 0 || end > len) end = len

  var out = ''
  for (var i = start; i < end; ++i) {
    out += toHex(buf[i])
  }
  return out
}

function utf16leSlice (buf, start, end) {
  var bytes = buf.slice(start, end)
  var res = ''
  for (var i = 0; i < bytes.length; i += 2) {
    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)
  }
  return res
}

Buffer.prototype.slice = function slice (start, end) {
  var len = this.length
  start = ~~start
  end = end === undefined ? len : ~~end

  if (start < 0) {
    start += len
    if (start < 0) start = 0
  } else if (start > len) {
    start = len
  }

  if (end < 0) {
    end += len
    if (end < 0) end = 0
  } else if (end > len) {
    end = len
  }

  if (end < start) end = start

  var newBuf
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    newBuf = this.subarray(start, end)
    newBuf.__proto__ = Buffer.prototype
  } else {
    var sliceLen = end - start
    newBuf = new Buffer(sliceLen, undefined)
    for (var i = 0; i < sliceLen; ++i) {
      newBuf[i] = this[i + start]
    }
  }

  return newBuf
}

/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */
function checkOffset (offset, ext, length) {
  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')
  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')
}

Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }

  return val
}

Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    checkOffset(offset, byteLength, this.length)
  }

  var val = this[offset + --byteLength]
  var mul = 1
  while (byteLength > 0 && (mul *= 0x100)) {
    val += this[offset + --byteLength] * mul
  }

  return val
}

Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  return this[offset]
}

Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return this[offset] | (this[offset + 1] << 8)
}

Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return (this[offset] << 8) | this[offset + 1]
}

Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return ((this[offset]) |
      (this[offset + 1] << 8) |
      (this[offset + 2] << 16)) +
      (this[offset + 3] * 0x1000000)
}

Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] * 0x1000000) +
    ((this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    this[offset + 3])
}

Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var i = byteLength
  var mul = 1
  var val = this[offset + --i]
  while (i > 0 && (mul *= 0x100)) {
    val += this[offset + --i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  if (!(this[offset] & 0x80)) return (this[offset])
  return ((0xff - this[offset] + 1) * -1)
}

Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset] | (this[offset + 1] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset + 1] | (this[offset] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset]) |
    (this[offset + 1] << 8) |
    (this[offset + 2] << 16) |
    (this[offset + 3] << 24)
}

Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] << 24) |
    (this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    (this[offset + 3])
}

Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, true, 23, 4)
}

Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, false, 23, 4)
}

Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, true, 52, 8)
}

Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, false, 52, 8)
}

function checkInt (buf, value, offset, ext, max, min) {
  if (!Buffer.isBuffer(buf)) throw new TypeError('"buffer" argument must be a Buffer instance')
  if (value > max || value < min) throw new RangeError('"value" argument is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
}

Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var mul = 1
  var i = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var i = byteLength - 1
  var mul = 1
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  this[offset] = (value & 0xff)
  return offset + 1
}

function objectWriteUInt16 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {
    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>
      (littleEndian ? i : 1 - i) * 8
  }
}

Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

function objectWriteUInt32 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffffffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {
    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff
  }
}

Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset + 3] = (value >>> 24)
    this[offset + 2] = (value >>> 16)
    this[offset + 1] = (value >>> 8)
    this[offset] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = 0
  var mul = 1
  var sub = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = byteLength - 1
  var mul = 1
  var sub = 0
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  if (value < 0) value = 0xff + value + 1
  this[offset] = (value & 0xff)
  return offset + 1
}

Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
    this[offset + 2] = (value >>> 16)
    this[offset + 3] = (value >>> 24)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (value < 0) value = 0xffffffff + value + 1
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

function checkIEEE754 (buf, value, offset, ext, max, min) {
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
  if (offset < 0) throw new RangeError('Index out of range')
}

function writeFloat (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)
  }
  ieee754.write(buf, value, offset, littleEndian, 23, 4)
  return offset + 4
}

Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {
  return writeFloat(this, value, offset, true, noAssert)
}

Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {
  return writeFloat(this, value, offset, false, noAssert)
}

function writeDouble (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)
  }
  ieee754.write(buf, value, offset, littleEndian, 52, 8)
  return offset + 8
}

Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {
  return writeDouble(this, value, offset, true, noAssert)
}

Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {
  return writeDouble(this, value, offset, false, noAssert)
}

// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
Buffer.prototype.copy = function copy (target, targetStart, start, end) {
  if (!start) start = 0
  if (!end && end !== 0) end = this.length
  if (targetStart >= target.length) targetStart = target.length
  if (!targetStart) targetStart = 0
  if (end > 0 && end < start) end = start

  // Copy 0 bytes; we're done
  if (end === start) return 0
  if (target.length === 0 || this.length === 0) return 0

  // Fatal error conditions
  if (targetStart < 0) {
    throw new RangeError('targetStart out of bounds')
  }
  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')
  if (end < 0) throw new RangeError('sourceEnd out of bounds')

  // Are we oob?
  if (end > this.length) end = this.length
  if (target.length - targetStart < end - start) {
    end = target.length - targetStart + start
  }

  var len = end - start
  var i

  if (this === target && start < targetStart && targetStart < end) {
    // descending copy from end
    for (i = len - 1; i >= 0; --i) {
      target[i + targetStart] = this[i + start]
    }
  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {
    // ascending copy from start
    for (i = 0; i < len; ++i) {
      target[i + targetStart] = this[i + start]
    }
  } else {
    Uint8Array.prototype.set.call(
      target,
      this.subarray(start, start + len),
      targetStart
    )
  }

  return len
}

// Usage:
//    buffer.fill(number[, offset[, end]])
//    buffer.fill(buffer[, offset[, end]])
//    buffer.fill(string[, offset[, end]][, encoding])
Buffer.prototype.fill = function fill (val, start, end, encoding) {
  // Handle string cases:
  if (typeof val === 'string') {
    if (typeof start === 'string') {
      encoding = start
      start = 0
      end = this.length
    } else if (typeof end === 'string') {
      encoding = end
      end = this.length
    }
    if (val.length === 1) {
      var code = val.charCodeAt(0)
      if (code < 256) {
        val = code
      }
    }
    if (encoding !== undefined && typeof encoding !== 'string') {
      throw new TypeError('encoding must be a string')
    }
    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {
      throw new TypeError('Unknown encoding: ' + encoding)
    }
  } else if (typeof val === 'number') {
    val = val & 255
  }

  // Invalid ranges are not set to a default, so can range check early.
  if (start < 0 || this.length < start || this.length < end) {
    throw new RangeError('Out of range index')
  }

  if (end <= start) {
    return this
  }

  start = start >>> 0
  end = end === undefined ? this.length : end >>> 0

  if (!val) val = 0

  var i
  if (typeof val === 'number') {
    for (i = start; i < end; ++i) {
      this[i] = val
    }
  } else {
    var bytes = Buffer.isBuffer(val)
      ? val
      : utf8ToBytes(new Buffer(val, encoding).toString())
    var len = bytes.length
    for (i = 0; i < end - start; ++i) {
      this[i + start] = bytes[i % len]
    }
  }

  return this
}

// HELPER FUNCTIONS
// ================

var INVALID_BASE64_RE = /[^+\/0-9A-Za-z-_]/g

function base64clean (str) {
  // Node strips out invalid characters like \n and \t from the string, base64-js does not
  str = stringtrim(str).replace(INVALID_BASE64_RE, '')
  // Node converts strings with length < 2 to ''
  if (str.length < 2) return ''
  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
  while (str.length % 4 !== 0) {
    str = str + '='
  }
  return str
}

function stringtrim (str) {
  if (str.trim) return str.trim()
  return str.replace(/^\s+|\s+$/g, '')
}

function toHex (n) {
  if (n < 16) return '0' + n.toString(16)
  return n.toString(16)
}

function utf8ToBytes (string, units) {
  units = units || Infinity
  var codePoint
  var length = string.length
  var leadSurrogate = null
  var bytes = []

  for (var i = 0; i < length; ++i) {
    codePoint = string.charCodeAt(i)

    // is surrogate component
    if (codePoint > 0xD7FF && codePoint < 0xE000) {
      // last char was a lead
      if (!leadSurrogate) {
        // no lead yet
        if (codePoint > 0xDBFF) {
          // unexpected trail
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        } else if (i + 1 === length) {
          // unpaired lead
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // valid lead
        leadSurrogate = codePoint

        continue
      }

      // 2 leads in a row
      if (codePoint < 0xDC00) {
        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
        leadSurrogate = codePoint
        continue
      }

      // valid surrogate pair
      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000
    } else if (leadSurrogate) {
      // valid bmp char, but last char was a lead
      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
    }

    leadSurrogate = null

    // encode utf8
    if (codePoint < 0x80) {
      if ((units -= 1) < 0) break
      bytes.push(codePoint)
    } else if (codePoint < 0x800) {
      if ((units -= 2) < 0) break
      bytes.push(
        codePoint >> 0x6 | 0xC0,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x10000) {
      if ((units -= 3) < 0) break
      bytes.push(
        codePoint >> 0xC | 0xE0,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x110000) {
      if ((units -= 4) < 0) break
      bytes.push(
        codePoint >> 0x12 | 0xF0,
        codePoint >> 0xC & 0x3F | 0x80,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else {
      throw new Error('Invalid code point')
    }
  }

  return bytes
}

function asciiToBytes (str) {
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    // Node's code seems to be doing this and not & 0x7F..
    byteArray.push(str.charCodeAt(i) & 0xFF)
  }
  return byteArray
}

function utf16leToBytes (str, units) {
  var c, hi, lo
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    if ((units -= 2) < 0) break

    c = str.charCodeAt(i)
    hi = c >> 8
    lo = c % 256
    byteArray.push(lo)
    byteArray.push(hi)
  }

  return byteArray
}

function base64ToBytes (str) {
  return base64.toByteArray(base64clean(str))
}

function blitBuffer (src, dst, offset, length) {
  for (var i = 0; i < length; ++i) {
    if ((i + offset >= dst.length) || (i >= src.length)) break
    dst[i + offset] = src[i]
  }
  return i
}

function isnan (val) {
  return val !== val // eslint-disable-line no-self-compare
}

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/core-util-is/lib/util.js":
/*!***********************************************!*\
  !*** ./node_modules/core-util-is/lib/util.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(Buffer) {// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// NOTE: These type checking functions intentionally don't use `instanceof`
// because it is fragile and can be easily faked with `Object.create()`.

function isArray(arg) {
  if (Array.isArray) {
    return Array.isArray(arg);
  }
  return objectToString(arg) === '[object Array]';
}
exports.isArray = isArray;

function isBoolean(arg) {
  return typeof arg === 'boolean';
}
exports.isBoolean = isBoolean;

function isNull(arg) {
  return arg === null;
}
exports.isNull = isNull;

function isNullOrUndefined(arg) {
  return arg == null;
}
exports.isNullOrUndefined = isNullOrUndefined;

function isNumber(arg) {
  return typeof arg === 'number';
}
exports.isNumber = isNumber;

function isString(arg) {
  return typeof arg === 'string';
}
exports.isString = isString;

function isSymbol(arg) {
  return typeof arg === 'symbol';
}
exports.isSymbol = isSymbol;

function isUndefined(arg) {
  return arg === void 0;
}
exports.isUndefined = isUndefined;

function isRegExp(re) {
  return objectToString(re) === '[object RegExp]';
}
exports.isRegExp = isRegExp;

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}
exports.isObject = isObject;

function isDate(d) {
  return objectToString(d) === '[object Date]';
}
exports.isDate = isDate;

function isError(e) {
  return (objectToString(e) === '[object Error]' || e instanceof Error);
}
exports.isError = isError;

function isFunction(arg) {
  return typeof arg === 'function';
}
exports.isFunction = isFunction;

function isPrimitive(arg) {
  return arg === null ||
         typeof arg === 'boolean' ||
         typeof arg === 'number' ||
         typeof arg === 'string' ||
         typeof arg === 'symbol' ||  // ES6 symbol
         typeof arg === 'undefined';
}
exports.isPrimitive = isPrimitive;

exports.isBuffer = Buffer.isBuffer;

function objectToString(o) {
  return Object.prototype.toString.call(o);
}

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../buffer/index.js */ "./node_modules/buffer/index.js").Buffer))

/***/ }),

/***/ "./node_modules/debug/src/browser.js":
/*!*******************************************!*\
  !*** ./node_modules/debug/src/browser.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(process) {/**
 * This is the web browser implementation of `debug()`.
 *
 * Expose `debug()` as the module.
 */

exports = module.exports = __webpack_require__(/*! ./debug */ "./node_modules/debug/src/debug.js");
exports.log = log;
exports.formatArgs = formatArgs;
exports.save = save;
exports.load = load;
exports.useColors = useColors;
exports.storage = 'undefined' != typeof chrome
               && 'undefined' != typeof chrome.storage
                  ? chrome.storage.local
                  : localstorage();

/**
 * Colors.
 */

exports.colors = [
  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',
  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',
  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',
  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',
  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',
  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',
  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',
  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',
  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',
  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',
  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'
];

/**
 * Currently only WebKit-based Web Inspectors, Firefox >= v31,
 * and the Firebug extension (any Firefox version) are known
 * to support "%c" CSS customizations.
 *
 * TODO: add a `localStorage` variable to explicitly enable/disable colors
 */

function useColors() {
  // NB: In an Electron preload script, document will be defined but not fully
  // initialized. Since we know we're in Chrome, we'll just detect this case
  // explicitly
  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {
    return true;
  }

  // Internet Explorer and Edge do not support colors.
  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) {
    return false;
  }

  // is webkit? http://stackoverflow.com/a/16459606/376773
  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632
  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||
    // is firebug? http://stackoverflow.com/a/398120/376773
    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||
    // is firefox >= v31?
    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||
    // double check webkit in userAgent just in case we are in a worker
    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/));
}

/**
 * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.
 */

exports.formatters.j = function(v) {
  try {
    return JSON.stringify(v);
  } catch (err) {
    return '[UnexpectedJSONParseError]: ' + err.message;
  }
};


/**
 * Colorize log arguments if enabled.
 *
 * @api public
 */

function formatArgs(args) {
  var useColors = this.useColors;

  args[0] = (useColors ? '%c' : '')
    + this.namespace
    + (useColors ? ' %c' : ' ')
    + args[0]
    + (useColors ? '%c ' : ' ')
    + '+' + exports.humanize(this.diff);

  if (!useColors) return;

  var c = 'color: ' + this.color;
  args.splice(1, 0, c, 'color: inherit')

  // the final "%c" is somewhat tricky, because there could be other
  // arguments passed either before or after the %c, so we need to
  // figure out the correct index to insert the CSS into
  var index = 0;
  var lastC = 0;
  args[0].replace(/%[a-zA-Z%]/g, function(match) {
    if ('%%' === match) return;
    index++;
    if ('%c' === match) {
      // we only are interested in the *last* %c
      // (the user may have provided their own)
      lastC = index;
    }
  });

  args.splice(lastC, 0, c);
}

/**
 * Invokes `console.log()` when available.
 * No-op when `console.log` is not a "function".
 *
 * @api public
 */

function log() {
  // this hackery is required for IE8/9, where
  // the `console.log` function doesn't have 'apply'
  return 'object' === typeof console
    && console.log
    && Function.prototype.apply.call(console.log, console, arguments);
}

/**
 * Save `namespaces`.
 *
 * @param {String} namespaces
 * @api private
 */

function save(namespaces) {
  try {
    if (null == namespaces) {
      exports.storage.removeItem('debug');
    } else {
      exports.storage.debug = namespaces;
    }
  } catch(e) {}
}

/**
 * Load `namespaces`.
 *
 * @return {String} returns the previously persisted debug modes
 * @api private
 */

function load() {
  var r;
  try {
    r = exports.storage.debug;
  } catch(e) {}

  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG
  if (!r && typeof process !== 'undefined' && 'env' in process) {
    r = process.env.DEBUG;
  }

  return r;
}

/**
 * Enable namespaces listed in `localStorage.debug` initially.
 */

exports.enable(load());

/**
 * Localstorage attempts to return the localstorage.
 *
 * This is necessary because safari throws
 * when a user disables cookies/localstorage
 * and you attempt to access it.
 *
 * @return {LocalStorage}
 * @api private
 */

function localstorage() {
  try {
    return window.localStorage;
  } catch (e) {}
}

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./node_modules/debug/src/debug.js":
/*!*****************************************!*\
  !*** ./node_modules/debug/src/debug.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {


/**
 * This is the common logic for both the Node.js and web browser
 * implementations of `debug()`.
 *
 * Expose `debug()` as the module.
 */

exports = module.exports = createDebug.debug = createDebug['default'] = createDebug;
exports.coerce = coerce;
exports.disable = disable;
exports.enable = enable;
exports.enabled = enabled;
exports.humanize = __webpack_require__(/*! ms */ "./node_modules/ms/index.js");

/**
 * Active `debug` instances.
 */
exports.instances = [];

/**
 * The currently active debug mode names, and names to skip.
 */

exports.names = [];
exports.skips = [];

/**
 * Map of special "%n" handling functions, for the debug "format" argument.
 *
 * Valid key names are a single, lower or upper-case letter, i.e. "n" and "N".
 */

exports.formatters = {};

/**
 * Select a color.
 * @param {String} namespace
 * @return {Number}
 * @api private
 */

function selectColor(namespace) {
  var hash = 0, i;

  for (i in namespace) {
    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);
    hash |= 0; // Convert to 32bit integer
  }

  return exports.colors[Math.abs(hash) % exports.colors.length];
}

/**
 * Create a debugger with the given `namespace`.
 *
 * @param {String} namespace
 * @return {Function}
 * @api public
 */

function createDebug(namespace) {

  var prevTime;

  function debug() {
    // disabled?
    if (!debug.enabled) return;

    var self = debug;

    // set `diff` timestamp
    var curr = +new Date();
    var ms = curr - (prevTime || curr);
    self.diff = ms;
    self.prev = prevTime;
    self.curr = curr;
    prevTime = curr;

    // turn the `arguments` into a proper Array
    var args = new Array(arguments.length);
    for (var i = 0; i < args.length; i++) {
      args[i] = arguments[i];
    }

    args[0] = exports.coerce(args[0]);

    if ('string' !== typeof args[0]) {
      // anything else let's inspect with %O
      args.unshift('%O');
    }

    // apply any `formatters` transformations
    var index = 0;
    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {
      // if we encounter an escaped % then don't increase the array index
      if (match === '%%') return match;
      index++;
      var formatter = exports.formatters[format];
      if ('function' === typeof formatter) {
        var val = args[index];
        match = formatter.call(self, val);

        // now we need to remove `args[index]` since it's inlined in the `format`
        args.splice(index, 1);
        index--;
      }
      return match;
    });

    // apply env-specific formatting (colors, etc.)
    exports.formatArgs.call(self, args);

    var logFn = debug.log || exports.log || console.log.bind(console);
    logFn.apply(self, args);
  }

  debug.namespace = namespace;
  debug.enabled = exports.enabled(namespace);
  debug.useColors = exports.useColors();
  debug.color = selectColor(namespace);
  debug.destroy = destroy;

  // env-specific initialization logic for debug instances
  if ('function' === typeof exports.init) {
    exports.init(debug);
  }

  exports.instances.push(debug);

  return debug;
}

function destroy () {
  var index = exports.instances.indexOf(this);
  if (index !== -1) {
    exports.instances.splice(index, 1);
    return true;
  } else {
    return false;
  }
}

/**
 * Enables a debug mode by namespaces. This can include modes
 * separated by a colon and wildcards.
 *
 * @param {String} namespaces
 * @api public
 */

function enable(namespaces) {
  exports.save(namespaces);

  exports.names = [];
  exports.skips = [];

  var i;
  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\s,]+/);
  var len = split.length;

  for (i = 0; i < len; i++) {
    if (!split[i]) continue; // ignore empty strings
    namespaces = split[i].replace(/\*/g, '.*?');
    if (namespaces[0] === '-') {
      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));
    } else {
      exports.names.push(new RegExp('^' + namespaces + '$'));
    }
  }

  for (i = 0; i < exports.instances.length; i++) {
    var instance = exports.instances[i];
    instance.enabled = exports.enabled(instance.namespace);
  }
}

/**
 * Disable debug output.
 *
 * @api public
 */

function disable() {
  exports.enable('');
}

/**
 * Returns true if the given mode name is enabled, false otherwise.
 *
 * @param {String} name
 * @return {Boolean}
 * @api public
 */

function enabled(name) {
  if (name[name.length - 1] === '*') {
    return true;
  }
  var i, len;
  for (i = 0, len = exports.skips.length; i < len; i++) {
    if (exports.skips[i].test(name)) {
      return false;
    }
  }
  for (i = 0, len = exports.names.length; i < len; i++) {
    if (exports.names[i].test(name)) {
      return true;
    }
  }
  return false;
}

/**
 * Coerce `val`.
 *
 * @param {Mixed} val
 * @return {Mixed}
 * @api private
 */

function coerce(val) {
  if (val instanceof Error) return val.stack || val.message;
  return val;
}


/***/ }),

/***/ "./node_modules/events/events.js":
/*!***************************************!*\
  !*** ./node_modules/events/events.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

function EventEmitter() {
  this._events = this._events || {};
  this._maxListeners = this._maxListeners || undefined;
}
module.exports = EventEmitter;

// Backwards-compat with node 0.10.x
EventEmitter.EventEmitter = EventEmitter;

EventEmitter.prototype._events = undefined;
EventEmitter.prototype._maxListeners = undefined;

// By default EventEmitters will print a warning if more than 10 listeners are
// added to it. This is a useful default which helps finding memory leaks.
EventEmitter.defaultMaxListeners = 10;

// Obviously not all Emitters should be limited to 10. This function allows
// that to be increased. Set to zero for unlimited.
EventEmitter.prototype.setMaxListeners = function(n) {
  if (!isNumber(n) || n < 0 || isNaN(n))
    throw TypeError('n must be a positive number');
  this._maxListeners = n;
  return this;
};

EventEmitter.prototype.emit = function(type) {
  var er, handler, len, args, i, listeners;

  if (!this._events)
    this._events = {};

  // If there is no 'error' event listener then throw.
  if (type === 'error') {
    if (!this._events.error ||
        (isObject(this._events.error) && !this._events.error.length)) {
      er = arguments[1];
      if (er instanceof Error) {
        throw er; // Unhandled 'error' event
      } else {
        // At least give some kind of context to the user
        var err = new Error('Uncaught, unspecified "error" event. (' + er + ')');
        err.context = er;
        throw err;
      }
    }
  }

  handler = this._events[type];

  if (isUndefined(handler))
    return false;

  if (isFunction(handler)) {
    switch (arguments.length) {
      // fast cases
      case 1:
        handler.call(this);
        break;
      case 2:
        handler.call(this, arguments[1]);
        break;
      case 3:
        handler.call(this, arguments[1], arguments[2]);
        break;
      // slower
      default:
        args = Array.prototype.slice.call(arguments, 1);
        handler.apply(this, args);
    }
  } else if (isObject(handler)) {
    args = Array.prototype.slice.call(arguments, 1);
    listeners = handler.slice();
    len = listeners.length;
    for (i = 0; i < len; i++)
      listeners[i].apply(this, args);
  }

  return true;
};

EventEmitter.prototype.addListener = function(type, listener) {
  var m;

  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  if (!this._events)
    this._events = {};

  // To avoid recursion in the case that type === "newListener"! Before
  // adding it to the listeners, first emit "newListener".
  if (this._events.newListener)
    this.emit('newListener', type,
              isFunction(listener.listener) ?
              listener.listener : listener);

  if (!this._events[type])
    // Optimize the case of one listener. Don't need the extra array object.
    this._events[type] = listener;
  else if (isObject(this._events[type]))
    // If we've already got an array, just append.
    this._events[type].push(listener);
  else
    // Adding the second element, need to change to array.
    this._events[type] = [this._events[type], listener];

  // Check for listener leak
  if (isObject(this._events[type]) && !this._events[type].warned) {
    if (!isUndefined(this._maxListeners)) {
      m = this._maxListeners;
    } else {
      m = EventEmitter.defaultMaxListeners;
    }

    if (m && m > 0 && this._events[type].length > m) {
      this._events[type].warned = true;
      console.error('(node) warning: possible EventEmitter memory ' +
                    'leak detected. %d listeners added. ' +
                    'Use emitter.setMaxListeners() to increase limit.',
                    this._events[type].length);
      if (typeof console.trace === 'function') {
        // not supported in IE 10
        console.trace();
      }
    }
  }

  return this;
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener;

EventEmitter.prototype.once = function(type, listener) {
  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  var fired = false;

  function g() {
    this.removeListener(type, g);

    if (!fired) {
      fired = true;
      listener.apply(this, arguments);
    }
  }

  g.listener = listener;
  this.on(type, g);

  return this;
};

// emits a 'removeListener' event iff the listener was removed
EventEmitter.prototype.removeListener = function(type, listener) {
  var list, position, length, i;

  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  if (!this._events || !this._events[type])
    return this;

  list = this._events[type];
  length = list.length;
  position = -1;

  if (list === listener ||
      (isFunction(list.listener) && list.listener === listener)) {
    delete this._events[type];
    if (this._events.removeListener)
      this.emit('removeListener', type, listener);

  } else if (isObject(list)) {
    for (i = length; i-- > 0;) {
      if (list[i] === listener ||
          (list[i].listener && list[i].listener === listener)) {
        position = i;
        break;
      }
    }

    if (position < 0)
      return this;

    if (list.length === 1) {
      list.length = 0;
      delete this._events[type];
    } else {
      list.splice(position, 1);
    }

    if (this._events.removeListener)
      this.emit('removeListener', type, listener);
  }

  return this;
};

EventEmitter.prototype.removeAllListeners = function(type) {
  var key, listeners;

  if (!this._events)
    return this;

  // not listening for removeListener, no need to emit
  if (!this._events.removeListener) {
    if (arguments.length === 0)
      this._events = {};
    else if (this._events[type])
      delete this._events[type];
    return this;
  }

  // emit removeListener for all listeners on all events
  if (arguments.length === 0) {
    for (key in this._events) {
      if (key === 'removeListener') continue;
      this.removeAllListeners(key);
    }
    this.removeAllListeners('removeListener');
    this._events = {};
    return this;
  }

  listeners = this._events[type];

  if (isFunction(listeners)) {
    this.removeListener(type, listeners);
  } else if (listeners) {
    // LIFO order
    while (listeners.length)
      this.removeListener(type, listeners[listeners.length - 1]);
  }
  delete this._events[type];

  return this;
};

EventEmitter.prototype.listeners = function(type) {
  var ret;
  if (!this._events || !this._events[type])
    ret = [];
  else if (isFunction(this._events[type]))
    ret = [this._events[type]];
  else
    ret = this._events[type].slice();
  return ret;
};

EventEmitter.prototype.listenerCount = function(type) {
  if (this._events) {
    var evlistener = this._events[type];

    if (isFunction(evlistener))
      return 1;
    else if (evlistener)
      return evlistener.length;
  }
  return 0;
};

EventEmitter.listenerCount = function(emitter, type) {
  return emitter.listenerCount(type);
};

function isFunction(arg) {
  return typeof arg === 'function';
}

function isNumber(arg) {
  return typeof arg === 'number';
}

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}

function isUndefined(arg) {
  return arg === void 0;
}


/***/ }),

/***/ "./node_modules/get-browser-rtc/index.js":
/*!***********************************************!*\
  !*** ./node_modules/get-browser-rtc/index.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// originally pulled out of simple-peer

module.exports = function getBrowserRTC () {
  if (typeof window === 'undefined') return null
  var wrtc = {
    RTCPeerConnection: window.RTCPeerConnection || window.mozRTCPeerConnection ||
      window.webkitRTCPeerConnection,
    RTCSessionDescription: window.RTCSessionDescription ||
      window.mozRTCSessionDescription || window.webkitRTCSessionDescription,
    RTCIceCandidate: window.RTCIceCandidate || window.mozRTCIceCandidate ||
      window.webkitRTCIceCandidate
  }
  if (!wrtc.RTCPeerConnection) return null
  return wrtc
}


/***/ }),

/***/ "./node_modules/ieee754/index.js":
/*!***************************************!*\
  !*** ./node_modules/ieee754/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

exports.read = function (buffer, offset, isLE, mLen, nBytes) {
  var e, m
  var eLen = (nBytes * 8) - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var nBits = -7
  var i = isLE ? (nBytes - 1) : 0
  var d = isLE ? -1 : 1
  var s = buffer[offset + i]

  i += d

  e = s & ((1 << (-nBits)) - 1)
  s >>= (-nBits)
  nBits += eLen
  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}

  m = e & ((1 << (-nBits)) - 1)
  e >>= (-nBits)
  nBits += mLen
  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}

  if (e === 0) {
    e = 1 - eBias
  } else if (e === eMax) {
    return m ? NaN : ((s ? -1 : 1) * Infinity)
  } else {
    m = m + Math.pow(2, mLen)
    e = e - eBias
  }
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)
}

exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {
  var e, m, c
  var eLen = (nBytes * 8) - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)
  var i = isLE ? 0 : (nBytes - 1)
  var d = isLE ? 1 : -1
  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0

  value = Math.abs(value)

  if (isNaN(value) || value === Infinity) {
    m = isNaN(value) ? 1 : 0
    e = eMax
  } else {
    e = Math.floor(Math.log(value) / Math.LN2)
    if (value * (c = Math.pow(2, -e)) < 1) {
      e--
      c *= 2
    }
    if (e + eBias >= 1) {
      value += rt / c
    } else {
      value += rt * Math.pow(2, 1 - eBias)
    }
    if (value * c >= 2) {
      e++
      c /= 2
    }

    if (e + eBias >= eMax) {
      m = 0
      e = eMax
    } else if (e + eBias >= 1) {
      m = ((value * c) - 1) * Math.pow(2, mLen)
      e = e + eBias
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)
      e = 0
    }
  }

  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}

  e = (e << mLen) | m
  eLen += mLen
  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}

  buffer[offset + i - d] |= s * 128
}


/***/ }),

/***/ "./node_modules/inherits/inherits_browser.js":
/*!***************************************************!*\
  !*** ./node_modules/inherits/inherits_browser.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

if (typeof Object.create === 'function') {
  // implementation from standard node.js 'util' module
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    ctor.prototype = Object.create(superCtor.prototype, {
      constructor: {
        value: ctor,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
  };
} else {
  // old school shim for old browsers
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    var TempCtor = function () {}
    TempCtor.prototype = superCtor.prototype
    ctor.prototype = new TempCtor()
    ctor.prototype.constructor = ctor
  }
}


/***/ }),

/***/ "./node_modules/isarray/index.js":
/*!***************************************!*\
  !*** ./node_modules/isarray/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var toString = {}.toString;

module.exports = Array.isArray || function (arr) {
  return toString.call(arr) == '[object Array]';
};


/***/ }),

/***/ "./node_modules/ms/index.js":
/*!**********************************!*\
  !*** ./node_modules/ms/index.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * Helpers.
 */

var s = 1000;
var m = s * 60;
var h = m * 60;
var d = h * 24;
var y = d * 365.25;

/**
 * Parse or format the given `val`.
 *
 * Options:
 *
 *  - `long` verbose formatting [false]
 *
 * @param {String|Number} val
 * @param {Object} [options]
 * @throws {Error} throw an error if val is not a non-empty string or a number
 * @return {String|Number}
 * @api public
 */

module.exports = function(val, options) {
  options = options || {};
  var type = typeof val;
  if (type === 'string' && val.length > 0) {
    return parse(val);
  } else if (type === 'number' && isNaN(val) === false) {
    return options.long ? fmtLong(val) : fmtShort(val);
  }
  throw new Error(
    'val is not a non-empty string or a valid number. val=' +
      JSON.stringify(val)
  );
};

/**
 * Parse the given `str` and return milliseconds.
 *
 * @param {String} str
 * @return {Number}
 * @api private
 */

function parse(str) {
  str = String(str);
  if (str.length > 100) {
    return;
  }
  var match = /^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(
    str
  );
  if (!match) {
    return;
  }
  var n = parseFloat(match[1]);
  var type = (match[2] || 'ms').toLowerCase();
  switch (type) {
    case 'years':
    case 'year':
    case 'yrs':
    case 'yr':
    case 'y':
      return n * y;
    case 'days':
    case 'day':
    case 'd':
      return n * d;
    case 'hours':
    case 'hour':
    case 'hrs':
    case 'hr':
    case 'h':
      return n * h;
    case 'minutes':
    case 'minute':
    case 'mins':
    case 'min':
    case 'm':
      return n * m;
    case 'seconds':
    case 'second':
    case 'secs':
    case 'sec':
    case 's':
      return n * s;
    case 'milliseconds':
    case 'millisecond':
    case 'msecs':
    case 'msec':
    case 'ms':
      return n;
    default:
      return undefined;
  }
}

/**
 * Short format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */

function fmtShort(ms) {
  if (ms >= d) {
    return Math.round(ms / d) + 'd';
  }
  if (ms >= h) {
    return Math.round(ms / h) + 'h';
  }
  if (ms >= m) {
    return Math.round(ms / m) + 'm';
  }
  if (ms >= s) {
    return Math.round(ms / s) + 's';
  }
  return ms + 'ms';
}

/**
 * Long format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */

function fmtLong(ms) {
  return plural(ms, d, 'day') ||
    plural(ms, h, 'hour') ||
    plural(ms, m, 'minute') ||
    plural(ms, s, 'second') ||
    ms + ' ms';
}

/**
 * Pluralization helper.
 */

function plural(ms, n, name) {
  if (ms < n) {
    return;
  }
  if (ms < n * 1.5) {
    return Math.floor(ms / n) + ' ' + name;
  }
  return Math.ceil(ms / n) + ' ' + name + 's';
}


/***/ }),

/***/ "./node_modules/pixi.js/dist/pixi.min.js":
/*!***********************************************!*\
  !*** ./node_modules/pixi.js/dist/pixi.min.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var require;var require;/*!
 * pixi.js - v4.8.9
 * Compiled Thu, 16 Jan 2020 21:39:45 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
!function(t){if(true)module.exports=t();else { var e; }}(function(){var t;return function(){function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return require(s,!0);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var l=r[s]={exports:{}};e[s][0].call(l.exports,function(t){var r=e[s][1][t];return i(r||t)},l,l.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}return t}()({1:[function(t,e,r){"use strict";"use restrict";function n(t){var e=32;return t&=-t,t&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}r.INT_BITS=32,r.INT_MAX=2147483647,r.INT_MIN=-1<<31,r.sign=function(t){return(t>0)-(t<0)},r.abs=function(t){var e=t>>31;return(t^e)-e},r.min=function(t,e){return e^(t^e)&-(t<e)},r.max=function(t,e){return t^(t^e)&-(t<e)},r.isPow2=function(t){return!(t&t-1||!t)},r.log2=function(t){var e,r;return e=(t>65535)<<4,t>>>=e,r=(t>255)<<3,t>>>=r,e|=r,r=(t>15)<<2,t>>>=r,e|=r,r=(t>3)<<1,t>>>=r,(e|=r)|t>>1},r.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},r.popCount=function(t){return t-=t>>>1&1431655765,16843009*((t=(858993459&t)+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},r.countTrailingZeros=n,r.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},r.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},r.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var i=new Array(256);!function(t){for(var e=0;e<256;++e){var r=e,n=e,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;t[e]=n<<i&255}}(i),r.reverse=function(t){return i[255&t]<<24|i[t>>>8&255]<<16|i[t>>>16&255]<<8|i[t>>>24&255]},r.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},r.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),(t=65535&(t|t>>>16))<<16>>16},r.interleave3=function(t,e,r){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),t|r<<2},r.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),(t=1023&(t|t>>>16))<<22>>22},r.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},{}],2:[function(t,e,r){"use strict";function n(t,e,r){r=r||2;var n=e&&e.length,o=n?e[0]*r:t.length,a=i(t,0,o,r,!0),u=[];if(!a||a.next===a.prev)return u;var h,l,d,f,p,v,g;if(n&&(a=c(t,e,a,r)),t.length>80*r){h=d=t[0],l=f=t[1];for(var y=r;y<o;y+=r)p=t[y],v=t[y+1],p<h&&(h=p),v<l&&(l=v),p>d&&(d=p),v>f&&(f=v);g=Math.max(d-h,f-l),g=0!==g?1/g:0}return s(a,u,r,h,l,g),u}function i(t,e,r,n,i){var o,s;if(i===A(t,e,r,n)>0)for(o=e;o<r;o+=n)s=P(o,t[o],t[o+1],s);else for(o=r-n;o>=e;o-=n)s=P(o,t[o],t[o+1],s);return s&&T(s,s.next)&&(C(s),s=s.next),s}function o(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!T(n,n.next)&&0!==x(n.prev,n,n.next))n=n.next;else{if(C(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function s(t,e,r,n,i,c,d){if(t){!d&&c&&v(t,n,i,c);for(var f,p,g=t;t.prev!==t.next;)if(f=t.prev,p=t.next,c?u(t,n,i,c):a(t))e.push(f.i/r),e.push(t.i/r),e.push(p.i/r),C(t),t=p.next,g=p.next;else if((t=p)===g){d?1===d?(t=h(t,e,r),s(t,e,r,n,i,c,2)):2===d&&l(t,e,r,n,i,c):s(o(t),e,r,n,i,c,1);break}}}function a(t){var e=t.prev,r=t,n=t.next;if(x(e,r,n)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(_(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&x(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(t,e,r,n){var i=t.prev,o=t,s=t.next;if(x(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,h=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,l=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,c=y(a,u,e,r,n),d=y(h,l,e,r,n),f=t.prevZ,p=t.nextZ;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&_(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&x(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&_(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&x(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&_(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&x(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&_(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&x(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function h(t,e,r){var n=t;do{var i=n.prev,o=n.next.next;!T(i,o)&&w(i,n,n.next,o)&&S(i,o)&&S(o,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(o.i/r),C(n),C(n.next),n=t=o),n=n.next}while(n!==t);return n}function l(t,e,r,n,i,a){var u=t;do{for(var h=u.next.next;h!==u.prev;){if(u.i!==h.i&&b(u,h)){var l=M(u,h);return u=o(u,u.next),l=o(l,l.next),s(u,e,r,n,i,a),void s(l,e,r,n,i,a)}h=h.next}u=u.next}while(u!==t)}function c(t,e,r,n){var s,a,u,h,l,c=[];for(s=0,a=e.length;s<a;s++)u=e[s]*n,h=s<a-1?e[s+1]*n:t.length,l=i(t,u,h,n,!1),l===l.next&&(l.steiner=!0),c.push(m(l));for(c.sort(d),s=0;s<c.length;s++)f(c[s],r),r=o(r,r.next);return r}function d(t,e){return t.x-e.x}function f(t,e){if(e=p(t,e)){var r=M(e,t);o(r,r.next)}}function p(t,e){var r,n=e,i=t.x,o=t.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>s){if(s=a,a===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===s)return r.prev;var u,h=r,l=r.x,c=r.y,d=1/0;for(n=r.next;n!==h;)i>=n.x&&n.x>=l&&i!==n.x&&_(o<c?i:s,o,l,c,o<c?s:i,o,n.x,n.y)&&((u=Math.abs(o-n.y)/(i-n.x))<d||u===d&&n.x>r.x)&&S(n,t)&&(r=n,d=u),n=n.next;return r}function v(t,e,r,n){var i=t;do{null===i.z&&(i.z=y(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,g(i)}function g(t){var e,r,n,i,o,s,a,u,h=1;do{for(r=t,t=null,o=null,s=0;r;){for(s++,n=r,a=0,e=0;e<h&&(a++,n=n.nextZ);e++);for(u=h;a>0||u>0&&n;)0!==a&&(0===u||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,h*=2}while(s>1);return t}function y(t,e,r,n,i){return t=32767*(t-r)*i,e=32767*(e-n)*i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function m(t){var e=t,r=t;do{e.x<r.x&&(r=e),e=e.next}while(e!==t);return r}function _(t,e,r,n,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(n-a)-(r-s)*(e-a)>=0&&(r-s)*(o-a)-(i-s)*(n-a)>=0}function b(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!E(t,e)&&S(t,e)&&S(e,t)&&O(t,e)}function x(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function T(t,e){return t.x===e.x&&t.y===e.y}function w(t,e,r,n){return!!(T(t,e)&&T(r,n)||T(t,n)&&T(r,e))||x(t,e,r)>0!=x(t,e,n)>0&&x(r,n,t)>0!=x(r,n,e)>0}function E(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&w(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function S(t,e){return x(t.prev,t,t.next)<0?x(t,e,t.next)>=0&&x(t,t.prev,e)>=0:x(t,e,t.prev)<0||x(t,t.next,e)<0}function O(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}function M(t,e){var r=new R(t.i,t.x,t.y),n=new R(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function P(t,e,r,n){var i=new R(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function C(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function R(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,n){for(var i=0,o=e,s=r-n;o<r;o+=n)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}e.exports=n,e.exports.default=n,n.deviation=function(t,e,r,n){var i=e&&e.length,o=i?e[0]*r:t.length,s=Math.abs(A(t,0,o,r));if(i)for(var a=0,u=e.length;a<u;a++){var h=e[a]*r,l=a<u-1?e[a+1]*r:t.length;s-=Math.abs(A(t,h,l,r))}var c=0;for(a=0;a<n.length;a+=3){var d=n[a]*r,f=n[a+1]*r,p=n[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},n.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[i][o][s]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r}},{}],3:[function(t,e,r){"use strict";function n(){}function i(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function o(){this._events=new n,this._eventsCount=0}var s=Object.prototype.hasOwnProperty,a="~";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(a=!1)),o.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)s.call(t,e)&&r.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},o.prototype.listeners=function(t,e){var r=a?a+t:t,n=this._events[r];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s},o.prototype.emit=function(t,e,r,n,i,o){var s=a?a+t:t;if(!this._events[s])return!1;var u,h,l=this._events[s],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,n),!0;case 5:return l.fn.call(l.context,e,r,n,i),!0;case 6:return l.fn.call(l.context,e,r,n,i,o),!0}for(h=1,u=new Array(c-1);h<c;h++)u[h-1]=arguments[h];l.fn.apply(l.context,u)}else{var d,f=l.length;for(h=0;h<f;h++)switch(l[h].once&&this.removeListener(t,l[h].fn,void 0,!0),c){case 1:l[h].fn.call(l[h].context);break;case 2:l[h].fn.call(l[h].context,e);break;case 3:l[h].fn.call(l[h].context,e,r);break;case 4:l[h].fn.call(l[h].context,e,r,n);break;default:if(!u)for(d=1,u=new Array(c-1);d<c;d++)u[d-1]=arguments[d];l[h].fn.apply(l[h].context,u)}}return!0},o.prototype.on=function(t,e,r){var n=new i(e,r||this),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},o.prototype.once=function(t,e,r){var n=new i(e,r||this,!0),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},o.prototype.removeListener=function(t,e,r,i){var o=a?a+t:t;if(!this._events[o])return this;if(!e)return 0==--this._eventsCount?this._events=new n:delete this._events[o],this;var s=this._events[o];if(s.fn)s.fn!==e||i&&!s.once||r&&s.context!==r||(0==--this._eventsCount?this._events=new n:delete this._events[o]);else{for(var u=0,h=[],l=s.length;u<l;u++)(s[u].fn!==e||i&&!s[u].once||r&&s[u].context!==r)&&h.push(s[u]);h.length?this._events[o]=1===h.length?h[0]:h:0==--this._eventsCount?this._events=new n:delete this._events[o]}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=a?a+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new n:delete this._events[e])):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=a,o.EventEmitter=o,void 0!==e&&(e.exports=o)},{}],4:[function(e,r,n){!function(e){function n(t,e){return t.test(e)}function i(t){var e=t||("undefined"!=typeof navigator?navigator.userAgent:""),r=e.split("[FBAN");void 0!==r[1]&&(e=r[0]),void 0!==(r=e.split("Twitter"))[1]&&(e=r[0]);var i={apple:{phone:n(o,e)&&!n(d,e),ipod:n(s,e),tablet:!n(o,e)&&n(a,e)&&!n(d,e),device:(n(o,e)||n(s,e)||n(a,e))&&!n(d,e)},amazon:{phone:n(l,e),tablet:!n(l,e)&&n(c,e),device:n(l,e)||n(c,e)},android:{phone:!n(d,e)&&n(l,e)||!n(d,e)&&n(u,e),tablet:!n(d,e)&&!n(l,e)&&!n(u,e)&&(n(c,e)||n(h,e)),device:!n(d,e)&&(n(l,e)||n(c,e)||n(u,e)||n(h,e))},windows:{phone:n(d,e),tablet:n(f,e),device:n(d,e)||n(f,e)},other:{blackberry:n(p,e),blackberry10:n(v,e),opera:n(g,e),firefox:n(m,e),chrome:n(y,e),device:n(p,e)||n(v,e)||n(g,e)||n(m,e)||n(y,e)}};return i.any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}var o=/iPhone/i,s=/iPod/i,a=/iPad/i,u=/\bAndroid(?:.+)Mobile\b/i,h=/Android/i,l=/\bAndroid(?:.+)SD4930UR\b/i,c=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,d=/Windows Phone/i,f=/\bWindows(?:.+)ARM\b/i,p=/BlackBerry/i,v=/BB10/i,g=/Opera Mini/i,y=/\b(CriOS|Chrome)(?:.+)Mobile/i,m=/\Mobile(?:.+)Firefox\b/i;void 0!==r&&r.exports&&"undefined"==typeof window?r.exports=i:void 0!==r&&r.exports&&"undefined"!=typeof window?r.exports=i():"function"==typeof t&&t.amd?t([],e.isMobile=i()):e.isMobile=i()}(this)},{}],5:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=function(){function t(e,r,i){void 0===r&&(r=!1),n(this,t),this._fn=e,this._once=r,this._thisArg=i,this._next=this._prev=this._owner=null}return o(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}(),a=function(){function t(){n(this,t),this._head=this._tail=void 0}return o(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var r=[];e;)r.push(e),e=e._next;return r}},{key:"has",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return i(this,new s(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return i(this,new s(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();a.MiniSignalBinding=s,r.default=a,e.exports=r.default},{}],6:[function(t,e,r){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,a,u=n(t),h=1;h<arguments.length;h++){r=Object(arguments[h]);for(var l in r)o.call(r,l)&&(u[l]=r[l]);if(i){a=i(r);for(var c=0;c<a.length;c++)s.call(r,a[c])&&(u[a[c]]=r[a[c]])}}return u}},{}],7:[function(t,e,r){"use strict";e.exports=function(t,e){e=e||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=r.parser[e.strictMode?"strict":"loose"].exec(t),i={},o=14;o--;)i[r.key[o]]=n[o]||"";return i[r.q.name]={},i[r.key[12]].replace(r.q.parser,function(t,e,n){e&&(i[r.q.name][e]=n)}),i}},{}],8:[function(t,e,r){(function(t){function e(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};r.resolve=function(){for(var r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(r=s+"/"+r,i="/"===s.charAt(0))}return r=e(n(r.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+r||"."},r.normalize=function(t){var i=r.isAbsolute(t),o="/"===s(t,-1);return t=e(n(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},r.isAbsolute=function(t){return"/"===t.charAt(0)},r.join=function(){var t=Array.prototype.slice.call(arguments,0);return r.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},r.relative=function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=r.resolve(t).substr(1),e=r.resolve(e).substr(1);for(var i=n(t.split("/")),o=n(e.split("/")),s=Math.min(i.length,o.length),a=s,u=0;u<s;u++)if(i[u]!==o[u]){a=u;break}for(var h=[],u=a;u<i.length;u++)h.push("..");return h=h.concat(o.slice(a)),h.join("/")},r.sep="/",r.delimiter=":",r.dirname=function(t){var e=o(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},r.basename=function(t,e){var r=o(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},r.extname=function(t){return o(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,t("_process"))},{_process:26}],9:[function(t,e,r){var n=new ArrayBuffer(0),i=function(t,e,r,i){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=i||t.STATIC_DRAW,this.data=n,r&&this.upload(r),this._updateID=0};i.prototype.upload=function(t,e,r){r||this.bind();var n=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?n.bufferSubData(this.type,e,t):n.bufferData(this.type,t,this.drawType),this.data=t},i.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},i.createVertexBuffer=function(t,e,r){return new i(t,t.ARRAY_BUFFER,e,r)},i.createIndexBuffer=function(t,e,r){return new i(t,t.ELEMENT_ARRAY_BUFFER,e,r)},i.create=function(t,e,r,n){return new i(t,e,r,n)},i.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},e.exports=i},{}],10:[function(t,e,r){var n=t("./GLTexture"),i=function(t,e,r){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=r||100};i.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new n(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},i.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},i.prototype.clear=function(t,e,r,n){this.bind();var i=this.gl;i.clearColor(t,e,r,n),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)},i.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},i.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},i.prototype.resize=function(t,e){var r=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,this.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t,e))},i.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},i.createRGBA=function(t,e,r,o){var s=n.fromData(t,null,e,r);s.enableNearestScaling(),s.enableWrapClamp();var a=new i(t,e,r);return a.enableTexture(s),a.unbind(),a},i.createFloat32=function(t,e,r,o){var s=new n.fromData(t,o,e,r);s.enableNearestScaling(),s.enableWrapClamp();var a=new i(t,e,r);return a.enableTexture(s),a.unbind(),a},e.exports=i},{"./GLTexture":12}],11:[function(t,e,r){var n=t("./shader/compileProgram"),i=t("./shader/extractAttributes"),o=t("./shader/extractUniforms"),s=t("./shader/setPrecision"),a=t("./shader/generateUniformAccessObject"),u=function(t,e,r,u,h){this.gl=t,u&&(e=s(e,u),r=s(r,u)),this.program=n(t,e,r,h),this.attributes=i(t,this.program),this.uniformData=o(t,this.program),this.uniforms=a(t,this.uniformData)};u.prototype.bind=function(){return this.gl.useProgram(this.program),this},u.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},e.exports=u},{"./shader/compileProgram":17,"./shader/extractAttributes":19,"./shader/extractUniforms":20,"./shader/generateUniformAccessObject":21,"./shader/setPrecision":25}],12:[function(t,e,r){var n=function(t,e,r,n,i){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=r||-1,this.format=n||t.RGBA,this.type=i||t.UNSIGNED_BYTE};n.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var r=t.videoWidth||t.width,n=t.videoHeight||t.height;n!==this.height||r!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=r,this.height=n};var i=!1;n.prototype.uploadData=function(t,e,r){this.bind();var n=this.gl;if(t instanceof Float32Array){if(!i){if(!n.getExtension("OES_texture_float"))throw new Error("floating point textures not available");i=!0}this.type=n.FLOAT}else this.type=this.type||n.UNSIGNED_BYTE;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||r!==this.height?n.texImage2D(n.TEXTURE_2D,0,this.format,e,r,0,this.format,this.type,t||null):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e,r,this.format,this.type,t||null),this.width=e,this.height=r},n.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},n.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},n.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},n.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},n.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},n.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},n.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},n.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},n.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},n.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},n.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},n.fromSource=function(t,e,r){var i=new n(t);return i.premultiplyAlpha=r||!1,i.upload(e),i},n.fromData=function(t,e,r,i){var o=new n(t);return o.uploadData(e,r,i),o},e.exports=n},{}],13:[function(t,e,r){function n(t,e){if(this.nativeVaoExtension=null,n.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var r=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(r),attribState:new Array(r)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var i=t("./setVertexAttribArrays");n.prototype.constructor=n,e.exports=n,n.FORCE_NATIVE=!1,n.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},n.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},n.prototype.activate=function(){for(var t=this.gl,e=null,r=0;r<this.attributes.length;r++){var n=this.attributes[r];e!==n.buffer&&(n.buffer.bind(),e=n.buffer),t.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||t.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return i(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},n.prototype.addAttribute=function(t,e,r,n,i,o){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:r||this.gl.FLOAT,normalized:n||!1,stride:i||0,start:o||0}),this.dirty=!0,this},n.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},n.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},n.prototype.draw=function(t,e,r){var n=this.gl;return this.indexBuffer?n.drawElements(t,e||this.indexBuffer.data.length,n.UNSIGNED_SHORT,2*(r||0)):n.drawArrays(t,r,e||this.getSize()),this},n.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},n.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},{"./setVertexAttribArrays":16}],14:[function(t,e,r){var n=function(t,e){var r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!r)throw new Error("This browser does not support webGL. Try using the canvas renderer");return r};e.exports=n},{}],15:[function(t,e,r){var n={createContext:t("./createContext"),setVertexAttribArrays:t("./setVertexAttribArrays"),GLBuffer:t("./GLBuffer"),GLFramebuffer:t("./GLFramebuffer"),GLShader:t("./GLShader"),GLTexture:t("./GLTexture"),VertexArrayObject:t("./VertexArrayObject"),shader:t("./shader")};void 0!==e&&e.exports&&(e.exports=n),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=n)},{"./GLBuffer":9,"./GLFramebuffer":10,"./GLShader":11,"./GLTexture":12,"./VertexArrayObject":13,"./createContext":14,"./setVertexAttribArrays":16,"./shader":22}],16:[function(t,e,r){var n=function(t,e,r){var n;if(r){var i=r.tempAttribState,o=r.attribState;for(n=0;n<i.length;n++)i[n]=!1;for(n=0;n<e.length;n++)i[e[n].attribute.location]=!0;for(n=0;n<o.length;n++)o[n]!==i[n]&&(o[n]=i[n],r.attribState[n]?t.enableVertexAttribArray(n):t.disableVertexAttribArray(n))}else for(n=0;n<e.length;n++){var s=e[n];t.enableVertexAttribArray(s.attribute.location)}};e.exports=n},{}],17:[function(t,e,r){var n=function(t,e,r,n){var o=i(t,t.VERTEX_SHADER,e),s=i(t,t.FRAGMENT_SHADER,r),a=t.createProgram();if(t.attachShader(a,o),t.attachShader(a,s),n)for(var u in n)t.bindAttribLocation(a,n[u],u);return t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(a,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(a)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(a)),t.deleteProgram(a),a=null),t.deleteShader(o),t.deleteShader(s),a},i=function(t,e,r){var n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.log(t.getShaderInfoLog(n)),null)};e.exports=n},{}],18:[function(t,e,r){var n=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return i(2*e);case"bvec3":return i(3*e);case"bvec4":return i(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},i=function(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e};e.exports=n},{}],19:[function(t,e,r){var n=t("./mapType"),i=t("./mapSize"),o=function(t,e){for(var r={},o=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<o;a++){var u=t.getActiveAttrib(e,a),h=n(t,u.type);r[u.name]={type:h,size:i(h),location:t.getAttribLocation(e,u.name),pointer:s}}return r},s=function(t,e,r,n){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,r||0,n||0)};e.exports=o},{"./mapSize":23,"./mapType":24}],20:[function(t,e,r){var n=t("./mapType"),i=t("./defaultValue"),o=function(t,e){for(var r={},o=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),s=0;s<o;s++){var a=t.getActiveUniform(e,s),u=a.name.replace(/\[.*?\]/,""),h=n(t,a.type);r[u]={type:h,size:a.size,location:t.getUniformLocation(e,u),value:i(h,a.size)}}return r};e.exports=o},{"./defaultValue":18,"./mapType":24}],21:[function(t,e,r){function n(t,e){return function(r){this.data[t].value=r;var n=this.data[t].location;1===e.size?a[e.type](this.gl,n,r):u[e.type](this.gl,n,r)}}function i(t,e){for(var r=e,n=0;n<t.length-1;n++){var i=r[t[n]]||{data:{}};r[t[n]]=i,r=i}return r}var o=function(t,e){var r={data:{}};r.gl=t
;for(var o=Object.keys(e),a=0;a<o.length;a++){var u=o[a],h=u.split("."),l=h[h.length-1],c=i(h,r),d=e[u];c.data[l]=d,c.gl=t,Object.defineProperty(c,l,{get:s(l),set:n(l,d)})}return r},s=function(t){return function(){return this.data[t].value}},a={float:function(t,e,r){t.uniform1f(e,r)},vec2:function(t,e,r){t.uniform2f(e,r[0],r[1])},vec3:function(t,e,r){t.uniform3f(e,r[0],r[1],r[2])},vec4:function(t,e,r){t.uniform4f(e,r[0],r[1],r[2],r[3])},int:function(t,e,r){t.uniform1i(e,r)},ivec2:function(t,e,r){t.uniform2i(e,r[0],r[1])},ivec3:function(t,e,r){t.uniform3i(e,r[0],r[1],r[2])},ivec4:function(t,e,r){t.uniform4i(e,r[0],r[1],r[2],r[3])},bool:function(t,e,r){t.uniform1i(e,r)},bvec2:function(t,e,r){t.uniform2i(e,r[0],r[1])},bvec3:function(t,e,r){t.uniform3i(e,r[0],r[1],r[2])},bvec4:function(t,e,r){t.uniform4i(e,r[0],r[1],r[2],r[3])},mat2:function(t,e,r){t.uniformMatrix2fv(e,!1,r)},mat3:function(t,e,r){t.uniformMatrix3fv(e,!1,r)},mat4:function(t,e,r){t.uniformMatrix4fv(e,!1,r)},sampler2D:function(t,e,r){t.uniform1i(e,r)}},u={float:function(t,e,r){t.uniform1fv(e,r)},vec2:function(t,e,r){t.uniform2fv(e,r)},vec3:function(t,e,r){t.uniform3fv(e,r)},vec4:function(t,e,r){t.uniform4fv(e,r)},int:function(t,e,r){t.uniform1iv(e,r)},ivec2:function(t,e,r){t.uniform2iv(e,r)},ivec3:function(t,e,r){t.uniform3iv(e,r)},ivec4:function(t,e,r){t.uniform4iv(e,r)},bool:function(t,e,r){t.uniform1iv(e,r)},bvec2:function(t,e,r){t.uniform2iv(e,r)},bvec3:function(t,e,r){t.uniform3iv(e,r)},bvec4:function(t,e,r){t.uniform4iv(e,r)},sampler2D:function(t,e,r){t.uniform1iv(e,r)}};e.exports=o},{}],22:[function(t,e,r){e.exports={compileProgram:t("./compileProgram"),defaultValue:t("./defaultValue"),extractAttributes:t("./extractAttributes"),extractUniforms:t("./extractUniforms"),generateUniformAccessObject:t("./generateUniformAccessObject"),setPrecision:t("./setPrecision"),mapSize:t("./mapSize"),mapType:t("./mapType")}},{"./compileProgram":17,"./defaultValue":18,"./extractAttributes":19,"./extractUniforms":20,"./generateUniformAccessObject":21,"./mapSize":23,"./mapType":24,"./setPrecision":25}],23:[function(t,e,r){var n=function(t){return i[t]},i={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};e.exports=n},{}],24:[function(t,e,r){var n=function(t,e){if(!i){var r=Object.keys(o);i={};for(var n=0;n<r.length;++n){var s=r[n];i[t[s]]=o[s]}}return i[e]},i=null,o={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};e.exports=n},{}],25:[function(t,e,r){var n=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t};e.exports=n},{}],26:[function(t,e,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function s(t){if(d===clearTimeout)return clearTimeout(t);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(t);try{return d(t)}catch(e){try{return d.call(null,t)}catch(e){return d.call(this,t)}}}function a(){g&&p&&(g=!1,p.length?v=p.concat(v):y=-1,v.length&&u())}function u(){if(!g){var t=o(a);g=!0;for(var e=v.length;e;){for(p=v,v=[];++y<e;)p&&p[y].run();y=-1,e=v.length}p=null,g=!1,s(t)}}function h(t,e){this.fun=t,this.array=e}function l(){}var c,d,f=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(t){d=i}}();var p,v=[],g=!1,y=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];v.push(new h(t,e)),1!==v.length||g||o(u)},h.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.prependListener=l,f.prependOnceListener=l,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],27:[function(e,r,n){(function(e){!function(i){function o(t){throw new RangeError(L[t])}function s(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function a(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(D,"."),n+s(t.split("."),e).join(".")}function u(t){for(var e,r,n=[],i=0,o=t.length;i<o;)e=t.charCodeAt(i++),e>=55296&&e<=56319&&i<o?(r=t.charCodeAt(i++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--)):n.push(e);return n}function h(t){return s(t,function(t){var e="";return t>65535&&(t-=65536,e+=k(t>>>10&1023|55296),t=56320|1023&t),e+=k(t)}).join("")}function l(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:w}function c(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function d(t,e,r){var n=0;for(t=r?B(t/M):t>>1,t+=B(t/e);t>N*S>>1;n+=w)t=B(t/N);return B(n+(N+1)*t/(t+O))}function f(t){var e,r,n,i,s,a,u,c,f,p,v=[],g=t.length,y=0,m=C,_=P;for(r=t.lastIndexOf(R),r<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&o("not-basic"),v.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<g;){for(s=y,a=1,u=w;i>=g&&o("invalid-input"),c=l(t.charCodeAt(i++)),(c>=w||c>B((T-y)/a))&&o("overflow"),y+=c*a,f=u<=_?E:u>=_+S?S:u-_,!(c<f);u+=w)p=w-f,a>B(T/p)&&o("overflow"),a*=p;e=v.length+1,_=d(y-s,e,0==s),B(y/e)>T-m&&o("overflow"),m+=B(y/e),y%=e,v.splice(y++,0,m)}return h(v)}function p(t){var e,r,n,i,s,a,h,l,f,p,v,g,y,m,_,b=[];for(t=u(t),g=t.length,e=C,r=0,s=P,a=0;a<g;++a)(v=t[a])<128&&b.push(k(v));for(n=i=b.length,i&&b.push(R);n<g;){for(h=T,a=0;a<g;++a)(v=t[a])>=e&&v<h&&(h=v);for(y=n+1,h-e>B((T-r)/y)&&o("overflow"),r+=(h-e)*y,e=h,a=0;a<g;++a)if(v=t[a],v<e&&++r>T&&o("overflow"),v==e){for(l=r,f=w;p=f<=s?E:f>=s+S?S:f-s,!(l<p);f+=w)_=l-p,m=w-p,b.push(k(c(p+_%m,0))),l=B(_/m);b.push(k(c(l,0))),s=d(r,y,n==i),r=0,++n}++r,++e}return b.join("")}function v(t){return a(t,function(t){return A.test(t)?f(t.slice(4).toLowerCase()):t})}function g(t){return a(t,function(t){return I.test(t)?"xn--"+p(t):t})}var y="object"==typeof n&&n&&!n.nodeType&&n,m="object"==typeof r&&r&&!r.nodeType&&r,_="object"==typeof e&&e;_.global!==_&&_.window!==_&&_.self!==_||(i=_);var b,x,T=2147483647,w=36,E=1,S=26,O=38,M=700,P=72,C=128,R="-",A=/^xn--/,I=/[^\x20-\x7E]/,D=/[\x2E\u3002\uFF0E\uFF61]/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=w-E,B=Math.floor,k=String.fromCharCode;if(b={version:"1.4.1",ucs2:{decode:u,encode:h},decode:f,encode:p,toASCII:g,toUnicode:v},"function"==typeof t&&"object"==typeof t.amd&&t.amd)t("punycode",function(){return b});else if(y&&m)if(r.exports==y)m.exports=b;else for(x in b)b.hasOwnProperty(x)&&(y[x]=b[x]);else i.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],28:[function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,r,o){e=e||"&",r=r||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var h=t.length;u>0&&h>u&&(h=u);for(var l=0;l<h;++l){var c,d,f,p,v=t[l].replace(a,"%20"),g=v.indexOf(r);g>=0?(c=v.substr(0,g),d=v.substr(g+1)):(c=v,d=""),f=decodeURIComponent(c),p=decodeURIComponent(d),n(s,f)?i(s[f])?s[f].push(p):s[f]=[s[f],p]:s[f]=p}return s};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],29:[function(t,e,r){"use strict";function n(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,r,a){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?n(s(t),function(s){var a=encodeURIComponent(i(s))+r;return o(t[s])?n(t[s],function(t){return a+encodeURIComponent(i(t))}).join(e):a+encodeURIComponent(i(t[s]))}).join(e):a?encodeURIComponent(i(a))+r+encodeURIComponent(i(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},{}],30:[function(t,e,r){"use strict";r.decode=r.parse=t("./decode"),r.encode=r.stringify=t("./encode")},{"./decode":28,"./encode":29}],31:[function(t,e,r){"use strict";e.exports=function(t,e,r){var n,i=t.length;if(!(e>=i||0===r)){r=e+r>i?i-e:r;var o=i-r;for(n=e;n<o;++n)t[n]=t[n+r];t.length=o}}},{}],32:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0,r.Loader=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("mini-signals"),u=n(a),h=t("parse-uri"),l=n(h),c=t("./async"),d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(c),f=t("./Resource"),p=/(#[\w-]+)?$/,v=r.Loader=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;i(this,t),this.baseUrl=r,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,r){return e._loadResource(t,r)},this._queue=d.queue(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new u.default,this.onError=new u.default,this.onLoad=new u.default,this.onStart=new u.default,this.onComplete=new u.default;for(var o=0;o<t._defaultBeforeMiddleware.length;++o)this.pre(t._defaultBeforeMiddleware[o]);for(var s=0;s<t._defaultAfterMiddleware.length;++s)this.use(t._defaultAfterMiddleware[s])}return t.prototype.add=function(t,e,r,n){if(Array.isArray(t)){for(var i=0;i<t.length;++i)this.add(t[i]);return this}if("object"===(void 0===t?"undefined":o(t))&&(n=e||t.callback||t.onComplete,r=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=r,r=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof r&&(n=r,r=null),this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new f.Resource(t,e,r),"function"==typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var s=r.parentResource,a=[],u=0;u<s.children.length;++u)s.children[u].isComplete||a.push(s.children[u]);var h=s.progressChunk*(a.length+1),l=h/(a.length+2);s.children.push(this.resources[t]),s.progressChunk=l;for(var c=0;c<a.length;++c)a[c].progressChunk=l;this.resources[t].progressChunk=l}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var t in this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=this._queue._tasks.length,r=100/e,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=r;this._onStart(),this._queue.resume()}return this},t.prototype._prepareUrl=function(t){var e=(0,l.default)(t,{strictMode:!0}),r=void 0;if(r=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var n=p.exec(r)[0];r=r.substr(0,r.length-n.length),-1!==r.indexOf("?")?r+="&"+this.defaultQueryString:r+="?"+this.defaultQueryString,r+=n}return r},t.prototype._loadResource=function(t,e){var r=this;t._dequeue=e,d.eachSeries(this._beforeMiddleware,function(e,n){e.call(r,t,function(){n(t.isComplete?{}:null)})},function(){t.isComplete?r._onLoad(t):(t._onLoadBinding=t.onComplete.once(r._onLoad,r),t.load())},!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),d.eachSeries(this._afterMiddleware,function(r,n){r.call(e,t,n)},function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()},!0)},s(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();v._defaultBeforeMiddleware=[],v._defaultAfterMiddleware=[],v.pre=function(t){return v._defaultBeforeMiddleware.push(t),v},v.use=function(t){return v._defaultAfterMiddleware.push(t),v}},{"./Resource":33,"./async":34,"mini-signals":5,"parse-uri":7}],33:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){}function s(t,e,r){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=r)}function a(t){return t.toString().replace("object ","")}r.__esModule=!0,r.Resource=void 0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("parse-uri"),l=n(h),c=t("mini-signals"),d=n(c),f=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),p=null,v=r.Resource=function(){function t(e,r,n){if(i(this,t),"string"!=typeof e||"string"!=typeof r)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===r.indexOf("data:")),this.name=e,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===n.crossOrigin?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=o,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new d.default,this.onProgress=new d.default,this.onComplete=new d.default,this.onAfterMiddleware=new d.default}return t.setExtensionLoadType=function(e,r){s(t._loadTypeMap,e,r)},t.setExtensionXhrType=function(e,r){s(t._xhrTypeMap,e,r)},t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var r=this;if(!this.isLoading){if(this.isComplete)return void(e&&setTimeout(function(){return e(r)},1));switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:f&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},t.prototype._hasFlag=function(t){return 0!=(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null===this.data)return void this.abort("Unsupported element: "+t);if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(t,this.url[r],Array.isArray(e)?e[r]:e));else{var n=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(n)?n[0]:n))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t.prototype._createSource=function(t,e,r){r||(r=t+"/"+this._getExtension(e));var n=document.createElement("source");return n.src=e,n.type=r,n},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(a(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(a(t)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(a(t)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,r="",n=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(r=e.responseText),0===n&&(r.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2!=(n/100|0))return void this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var i=new DOMParser;this.data=i.parseFromString(r,"text/xml")}else{var o=document.createElement("div");o.innerHTML=r,this.data=o}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||r;this.complete()},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,p||(p=document.createElement("a")),p.href=t,t=(0,l.default)(p.href,{strictMode:!0});var r=!t.port&&""===e.port||t.port===e.port,n=t.protocol?t.protocol+":":"";return t.host===e.hostname&&r&&n===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var r=t.indexOf("/");e=t.substring(r+1,t.indexOf(";",r))}else{var n=t.indexOf("?"),i=t.indexOf("#"),o=Math.min(n>-1?n:t.length,i>-1?i:t.length);t=t.substring(0,o),e=t.substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},u(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();v.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},v.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},v.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},v.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},v._loadTypeMap={gif:v.LOAD_TYPE.IMAGE,png:v.LOAD_TYPE.IMAGE,bmp:v.LOAD_TYPE.IMAGE,jpg:v.LOAD_TYPE.IMAGE,jpeg:v.LOAD_TYPE.IMAGE,tif:v.LOAD_TYPE.IMAGE,tiff:v.LOAD_TYPE.IMAGE,webp:v.LOAD_TYPE.IMAGE,tga:v.LOAD_TYPE.IMAGE,svg:v.LOAD_TYPE.IMAGE,"svg+xml":v.LOAD_TYPE.IMAGE,mp3:v.LOAD_TYPE.AUDIO,ogg:v.LOAD_TYPE.AUDIO,wav:v.LOAD_TYPE.AUDIO,mp4:v.LOAD_TYPE.VIDEO,webm:v.LOAD_TYPE.VIDEO},v._xhrTypeMap={xhtml:v.XHR_RESPONSE_TYPE.DOCUMENT,html:v.XHR_RESPONSE_TYPE.DOCUMENT,htm:v.XHR_RESPONSE_TYPE.DOCUMENT,xml:v.XHR_RESPONSE_TYPE.DOCUMENT,tmx:v.XHR_RESPONSE_TYPE.DOCUMENT,svg:v.XHR_RESPONSE_TYPE.DOCUMENT,tsx:v.XHR_RESPONSE_TYPE.DOCUMENT,gif:v.XHR_RESPONSE_TYPE.BLOB,png:v.XHR_RESPONSE_TYPE.BLOB,bmp:v.XHR_RESPONSE_TYPE.BLOB,jpg:v.XHR_RESPONSE_TYPE.BLOB,jpeg:v.XHR_RESPONSE_TYPE.BLOB,tif:v.XHR_RESPONSE_TYPE.BLOB,tiff:v.XHR_RESPONSE_TYPE.BLOB,webp:v.XHR_RESPONSE_TYPE.BLOB,tga:v.XHR_RESPONSE_TYPE.BLOB,json:v.XHR_RESPONSE_TYPE.JSON,text:v.XHR_RESPONSE_TYPE.TEXT,txt:v.XHR_RESPONSE_TYPE.TEXT,ttf:v.XHR_RESPONSE_TYPE.BUFFER,otf:v.XHR_RESPONSE_TYPE.BUFFER},v.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",void 0!==e&&(e.exports.default=v)},{"mini-signals":5,"parse-uri":7}],34:[function(t,e,r){"use strict";function n(){}function i(t,e,r,n){var i=0,o=t.length;!function s(a){if(a||i===o)return void(r&&r(a));n?setTimeout(function(){e(t[i++],s)},1):e(t[i++],s)}()}function o(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function s(t,e){function r(t,e,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(a.started=!0,null==t&&a.idle())return void setTimeout(function(){return a.drain()},1);var i={data:t,callback:"function"==typeof r?r:n};e?a._tasks.unshift(i):a._tasks.push(i),setTimeout(function(){return a.process()},1)}function i(t){return function(){s-=1,t.callback.apply(t,arguments),null!=arguments[0]&&a.error(arguments[0],t.data),s<=a.concurrency-a.buffer&&a.unsaturated(),a.idle()&&a.drain(),a.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var s=0,a={_tasks:[],concurrency:e,saturated:n,unsaturated:n,buffer:e/4,empty:n,drain:n,error:n,started:!1,paused:!1,push:function(t,e){r(t,!1,e)},kill:function(){s=0,a.drain=n,a.started=!1,a._tasks=[]},unshift:function(t,e){r(t,!0,e)},process:function(){for(;!a.paused&&s<a.concurrency&&a._tasks.length;){var e=a._tasks.shift();0===a._tasks.length&&a.empty(),s+=1,s===a.concurrency&&a.saturated(),t(e.data,o(i(e)))}},length:function(){return a._tasks.length},running:function(){return s},idle:function(){return a._tasks.length+s===0},pause:function(){!0!==a.paused&&(a.paused=!0)},resume:function(){if(!1!==a.paused){a.paused=!1;for(var t=1;t<=a.concurrency;t++)a.process()}}};return a}r.__esModule=!0,r.eachSeries=i,r.queue=s},{}],35:[function(t,e,r){"use strict";function n(t){for(var e="",r=0;r<t.length;){for(var n=[0,0,0],o=[0,0,0,0],s=0;s<n.length;++s)r<t.length?n[s]=255&t.charCodeAt(r++):n[s]=0;o[0]=n[0]>>2,o[1]=(3&n[0])<<4|n[1]>>4,o[2]=(15&n[1])<<2|n[2]>>6,o[3]=63&n[2];switch(r-(t.length-1)){case 2:o[3]=64,o[2]=64;break;case 1:o[3]=64}for(var a=0;a<o.length;++a)e+=i.charAt(o[a])}return e}r.__esModule=!0,r.encodeBinary=n;var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";void 0!==e&&(e.exports.default=n)},{}],36:[function(t,e,r){"use strict";var n=t("./Loader").Loader,i=t("./Resource").Resource,o=t("./async"),s=t("./b64");n.Resource=i,n.async=o,n.encodeBinary=s,n.base64=s,e.exports=n,e.exports.Loader=n,e.exports.default=n},{"./Loader":32,"./Resource":33,"./async":34,"./b64":35}],37:[function(t,e,r){"use strict";function n(){return function(t,e){if(!t.data)return void e();if(t.xhr&&t.xhrType===i.Resource.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var r=s.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=r,t.type=i.Resource.TYPE.IMAGE,void(t.data.onload=function(){s.revokeObjectURL(r),t.data.onload=null,e()})}}else{var n=t.xhr.getResponseHeader("content-type");if(n&&0===n.indexOf("image"))return t.data=new Image,t.data.src="data:"+n+";base64,"+(0,o.encodeBinary)(t.xhr.responseText),t.type=i.Resource.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}}r.__esModule=!0,r.blobMiddlewareFactory=n;var i=t("../../Resource"),o=t("../../b64"),s=window.URL||window.webkitURL},{"../../Resource":33,"../../b64":35}],38:[function(t,e,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,r){if(t&&h.isObject(t)&&t instanceof n)return t;var i=new n;return i.parse(t,e,r),i}function o(t){return h.isString(t)&&(t=i(t)),t instanceof n?t.format():n.prototype.format.call(t)}function s(t,e){return i(t,!1,!0).resolve(e)}function a(t,e){return t?i(t,!1,!0).resolveObject(e):e}var u=t("punycode"),h=t("./util");r.parse=i,r.resolve=s,r.resolveObject=a,r.format=o,r.Url=n;var l=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,d=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["<",">",'"',"`"," ","\r","\n","\t"],p=["{","}","|","\\","^","`"].concat(f),v=["'"].concat(p),g=["%","/","?",";","#"].concat(v),y=["/","?","#"],m=/^[+a-z0-9A-Z_-]{0,63}$/,_=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,b={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},T={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},w=t("querystring");n.prototype.parse=function(t,e,r){if(!h.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),i=-1!==n&&n<t.indexOf("#")?"?":"#",o=t.split(i),s=/\\/g;o[0]=o[0].replace(s,"/"),t=o.join(i);var a=t;if(a=a.trim(),!r&&1===t.split("#").length){var c=d.exec(a);if(c)return this.path=a,this.href=a,this.pathname=c[1],c[2]?(this.search=c[2],this.query=e?w.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var f=l.exec(a);if(f){f=f[0];var p=f.toLowerCase();this.protocol=p,a=a.substr(f.length)}if(r||f||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===a.substr(0,2);!E||f&&x[f]||(a=a.substr(2),this.slashes=!0)}if(!x[f]&&(E||f&&!T[f])){for(var S=-1,O=0;O<y.length;O++){var M=a.indexOf(y[O]);-1!==M&&(-1===S||M<S)&&(S=M)}var P,C;C=-1===S?a.lastIndexOf("@"):a.lastIndexOf("@",S),-1!==C&&(P=a.slice(0,C),a=a.slice(C+1),this.auth=decodeURIComponent(P)),S=-1;for(var O=0;O<g.length;O++){var M=a.indexOf(g[O]);-1!==M&&(-1===S||M<S)&&(S=M)}-1===S&&(S=a.length),this.host=a.slice(0,S),a=a.slice(S),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var A=this.hostname.split(/\./),O=0,I=A.length;O<I;O++){var D=A[O];if(D&&!D.match(m)){for(var L="",N=0,B=D.length;N<B;N++)D.charCodeAt(N)>127?L+="x":L+=D[N];if(!L.match(m)){var k=A.slice(0,O),F=A.slice(O+1),j=D.match(_);j&&(k.push(j[1]),F.unshift(j[2])),F.length&&(a="/"+F.join(".")+a),this.hostname=k.join(".");break}}}
this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=u.toASCII(this.hostname));var U=this.port?":"+this.port:"",X=this.hostname||"";this.host=X+U,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!b[p])for(var O=0,I=v.length;O<I;O++){var G=v[O];if(-1!==a.indexOf(G)){var W=encodeURIComponent(G);W===G&&(W=escape(G)),a=a.split(G).join(W)}}var H=a.indexOf("#");-1!==H&&(this.hash=a.substr(H),a=a.slice(0,H));var Y=a.indexOf("?");if(-1!==Y?(this.search=a.substr(Y),this.query=a.substr(Y+1),e&&(this.query=w.parse(this.query)),a=a.slice(0,Y)):e&&(this.search="",this.query={}),a&&(this.pathname=a),T[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",V=this.search||"";this.path=U+V}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&h.isObject(this.query)&&Object.keys(this.query).length&&(o=w.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||T[e])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+i+r+s+n},n.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(h.isString(t)){var e=new n;e.parse(t,!1,!0),t=e}for(var r=new n,i=Object.keys(this),o=0;o<i.length;o++){var s=i[o];r[s]=this[s]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),u=0;u<a.length;u++){var l=a[u];"protocol"!==l&&(r[l]=t[l])}return T[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!T[t.protocol]){for(var c=Object.keys(t),d=0;d<c.length;d++){var f=c[d];r[f]=t[f]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||x[t.protocol])r.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var v=r.pathname||"",g=r.search||"";r.path=v+g}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var y=r.pathname&&"/"===r.pathname.charAt(0),m=t.host||t.pathname&&"/"===t.pathname.charAt(0),_=m||y||r.host&&t.pathname,b=_,w=r.pathname&&r.pathname.split("/")||[],p=t.pathname&&t.pathname.split("/")||[],E=r.protocol&&!T[r.protocol];if(E&&(r.hostname="",r.port=null,r.host&&(""===w[0]?w[0]=r.host:w.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),_=_&&(""===p[0]||""===w[0])),m)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,w=p;else if(p.length)w||(w=[]),w.pop(),w=w.concat(p),r.search=t.search,r.query=t.query;else if(!h.isNullOrUndefined(t.search)){if(E){r.hostname=r.host=w.shift();var S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");S&&(r.auth=S.shift(),r.host=r.hostname=S.shift())}return r.search=t.search,r.query=t.query,h.isNull(r.pathname)&&h.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!w.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var O=w.slice(-1)[0],M=(r.host||t.host||w.length>1)&&("."===O||".."===O)||""===O,P=0,C=w.length;C>=0;C--)O=w[C],"."===O?w.splice(C,1):".."===O?(w.splice(C,1),P++):P&&(w.splice(C,1),P--);if(!_&&!b)for(;P--;P)w.unshift("..");!_||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),M&&"/"!==w.join("/").substr(-1)&&w.push("");var R=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(E){r.hostname=r.host=R?"":w.length?w.shift():"";var S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");S&&(r.auth=S.shift(),r.host=r.hostname=S.shift())}return _=_||r.host&&w.length,_&&!R&&w.unshift(""),w.length?r.pathname=w.join("/"):(r.pathname=null,r.path=null),h.isNull(r.pathname)&&h.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var t=this.host,e=c.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":39,punycode:27,querystring:30}],39:[function(t,e,r){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],40:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=t("../core"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(o),a=t("ismobilejs"),u=n(a),h=t("./accessibleTarget"),l=n(h);s.utils.mixins.delayMixin(s.DisplayObject.prototype,l.default);var c=100,d=0,f=0,p=2,v=function(){function t(e){i(this,t),!u.default.tablet&&!u.default.phone||navigator.isCocoonJS||this.createTouchHook();var r=document.createElement("div");r.style.width=c+"px",r.style.height=c+"px",r.style.position="absolute",r.style.top=d+"px",r.style.left=f+"px",r.style.zIndex=p,this.div=r,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",function(){t.isMobileAccessabillity=!0,t.activate(),document.body.removeChild(e)}),document.body.appendChild(e)},t.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,r=0;r<e.length;r++)this.updateAccessibleObjects(e[r])}},t.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,r=t.height/this.renderer.height,n=this.div;n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var i=0;i<this.children.length;i++){var o=this.children[i];if(o.renderId!==this.renderId)o._accessibleActive=!1,s.utils.removeItems(this.children,i,1),this.div.removeChild(o._accessibleDiv),this.pool.push(o._accessibleDiv),o._accessibleDiv=null,i--,0===this.children.length&&this.deactivate();else{n=o._accessibleDiv;var a=o.hitArea,u=o.worldTransform;o.hitArea?(n.style.left=(u.tx+a.x*u.a)*e+"px",n.style.top=(u.ty+a.y*u.d)*r+"px",n.style.width=a.width*u.a*e+"px",n.style.height=a.height*u.d*r+"px"):(a=o.getBounds(),this.capHitArea(a),n.style.left=a.x*e+"px",n.style.top=a.y*r+"px",n.style.width=a.width*e+"px",n.style.height=a.height*r+"px",n.title!==o.accessibleTitle&&null!==o.accessibleTitle&&(n.title=o.accessibleTitle),n.getAttribute("aria-label")!==o.accessibleHint&&null!==o.accessibleHint&&n.setAttribute("aria-label",o.accessibleHint))}}this.renderId++}},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=c+"px",e.style.height=c+"px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=p,e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}();r.default=v,s.WebGLRenderer.registerPlugin("accessibility",v),s.CanvasRenderer.registerPlugin("accessibility",v)},{"../core":65,"./accessibleTarget":41,ismobilejs:4}],41:[function(t,e,r){"use strict";r.__esModule=!0,r.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],42:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./accessibleTarget");Object.defineProperty(r,"accessibleTarget",{enumerable:!0,get:function(){return n(i).default}});var o=t("./AccessibilityManager");Object.defineProperty(r,"AccessibilityManager",{enumerable:!0,get:function(){return n(o).default}})},{"./AccessibilityManager":40,"./accessibleTarget":41}],43:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=t("./autoDetectRenderer"),a=t("./display/Container"),u=n(a),h=t("./ticker"),l=t("./settings"),c=n(l),d=t("./const"),f=function(){function t(e,r,n,o,a){i(this,t),"number"==typeof e&&(e=Object.assign({width:e,height:r||c.default.RENDER_OPTIONS.height,forceCanvas:!!o,sharedTicker:!!a},n)),this._options=e=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},e),this.renderer=(0,s.autoDetectRenderer)(e),this.stage=new u.default,this._ticker=null,this.ticker=e.sharedTicker?h.shared:new h.Ticker,e.autoStart&&this.start()}return t.prototype.render=function(){this.renderer.render(this.stage)},t.prototype.stop=function(){this._ticker.stop()},t.prototype.start=function(){this._ticker.start()},t.prototype.destroy=function(t,e){if(this._ticker){var r=this._ticker;this.ticker=null,r.destroy()}this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},o(t,[{key:"ticker",set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,d.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),t}();r.default=f},{"./autoDetectRenderer":45,"./const":46,"./display/Container":48,"./settings":101,"./ticker":121}],44:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(t instanceof Array){if("precision"!==t[0].substring(0,9)){var r=t.slice(0);return r.unshift("precision "+e+" float;"),r}}else if("precision"!==t.trim().substring(0,9))return"precision "+e+" float;\n"+t;return t}r.__esModule=!0;var a=t("pixi-gl-core"),u=t("./settings"),h=function(t){return t&&t.__esModule?t:{default:t}}(u),l=function(t){function e(r,o,a,u,l){return n(this,e),i(this,t.call(this,r,s(o,l||h.default.PRECISION_VERTEX),s(a,l||h.default.PRECISION_FRAGMENT),void 0,u))}return o(e,t),e}(a.GLShader);r.default=l},{"./settings":101,"pixi-gl-core":15}],45:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e,r,n){var i=t&&t.forceCanvas;return void 0!==n&&(i=n),!i&&s.isWebGLSupported()?new l.default(t,e,r):new u.default(t,e,r)}r.__esModule=!0,r.autoDetectRenderer=i;var o=t("./utils"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(o),a=t("./renderers/canvas/CanvasRenderer"),u=n(a),h=t("./renderers/webgl/WebGLRenderer"),l=n(h)},{"./renderers/canvas/CanvasRenderer":77,"./renderers/webgl/WebGLRenderer":84,"./utils":125}],46:[function(t,e,r){"use strict";r.__esModule=!0;r.VERSION="4.8.9",r.PI_2=2*Math.PI,r.RAD_TO_DEG=180/Math.PI,r.DEG_TO_RAD=Math.PI/180,r.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},r.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},r.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},r.SCALE_MODES={LINEAR:0,NEAREST:1},r.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},r.GC_MODES={AUTO:0,MANUAL:1},r.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,r.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,r.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,r.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},r.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},r.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},r.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},r.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],47:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t("../math"),o=function(){function t(){n(this,t),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?i.Rectangle.EMPTY:(t=t||new i.Rectangle(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,r=this.minY,n=this.maxX,i=this.maxY,o=t[0],s=t[1];e=o<e?o:e,r=s<r?s:r,n=o>n?o:n,i=s>i?s:i,o=t[2],s=t[3],e=o<e?o:e,r=s<r?s:r,n=o>n?o:n,i=s>i?s:i,o=t[4],s=t[5],e=o<e?o:e,r=s<r?s:r,n=o>n?o:n,i=s>i?s:i,o=t[6],s=t[7],e=o<e?o:e,r=s<r?s:r,n=o>n?o:n,i=s>i?s:i,this.minX=e,this.minY=r,this.maxX=n,this.maxY=i},t.prototype.addFrame=function(t,e,r,n,i){var o=t.worldTransform,s=o.a,a=o.b,u=o.c,h=o.d,l=o.tx,c=o.ty,d=this.minX,f=this.minY,p=this.maxX,v=this.maxY,g=s*e+u*r+l,y=a*e+h*r+c;d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,v=y>v?y:v,g=s*n+u*r+l,y=a*n+h*r+c,d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,v=y>v?y:v,g=s*e+u*i+l,y=a*e+h*i+c,d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,v=y>v?y:v,g=s*n+u*i+l,y=a*n+h*i+c,d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,v=y>v?y:v,this.minX=d,this.minY=f,this.maxX=p,this.maxY=v},t.prototype.addVertices=function(t,e,r,n){for(var i=t.worldTransform,o=i.a,s=i.b,a=i.c,u=i.d,h=i.tx,l=i.ty,c=this.minX,d=this.minY,f=this.maxX,p=this.maxY,v=r;v<n;v+=2){var g=e[v],y=e[v+1],m=o*g+a*y+h,_=u*y+s*g+l;c=m<c?m:c,d=_<d?_:d,f=m>f?m:f,p=_>p?_:p}this.minX=c,this.minY=d,this.maxX=f,this.maxY=p},t.prototype.addBounds=function(t){var e=this.minX,r=this.minY,n=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>i?t.maxY:i},t.prototype.addBoundsMask=function(t,e){var r=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,i=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(r<=i&&n<=o){var s=this.minX,a=this.minY,u=this.maxX,h=this.maxY;this.minX=r<s?r:s,this.minY=n<a?n:a,this.maxX=i>u?i:u,this.maxY=o>h?o:h}},t.prototype.addBoundsArea=function(t,e){var r=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,i=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(r<=i&&n<=o){var s=this.minX,a=this.minY,u=this.maxX,h=this.maxY;this.minX=r<s?r:s,this.minY=n<a?n:a,this.maxX=i>u?i:u,this.maxY=o>h?o:h}},t}();r.default=o},{"../math":70}],48:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("../utils"),u=t("./DisplayObject"),h=function(t){return t&&t.__esModule?t:{default:t}}(u),l=function(t){function e(){n(this,e);var r=i(this,t.call(this));return r.children=[],r}return o(e,t),e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var r=0;r<e;r++)this.addChild(arguments[r]);else t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),t},e.prototype.swapChildren=function(t,e){if(t!==e){var r=this.getChildIndex(t),n=this.getChildIndex(e);this.children[r]=e,this.children[n]=t,this.onChildrenChange(r<n?r:n)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);(0,a.removeItems)(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var r=0;r<e;r++)this.removeChild(arguments[r]);else{var n=this.children.indexOf(t);if(-1===n)return null;t.parent=null,t.transform._parentID=-1,(0,a.removeItems)(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,a.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),e},e.prototype.removeChildren=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],r=t,n="number"==typeof e?e:this.children.length,i=n-r,o=void 0;if(i>0&&i<=n){o=this.children.splice(r,i);for(var s=0;s<o.length;++s)o[s].parent=null,o[s].transform&&(o[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var a=0;a<o.length;++a)o[a].emit("removed",this);return o}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.flush();var e=this._filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}r&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t);for(var i=0,o=this.children.length;i<o;i++)this.children[i].renderWebGL(t);t.flush(),r&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype._renderWebGL=function(t){},e.prototype._renderCanvas=function(t){},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e.prototype.destroy=function(e){t.prototype.destroy.call(this);var r="boolean"==typeof e?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(r)for(var i=0;i<n.length;++i)n[i].destroy(e)},s(e,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}]),e}(h.default);r.default=l,l.prototype.containerUpdateTransform=l.prototype.updateTransform},{"../utils":125,"./DisplayObject":49}],49:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("eventemitter3"),h=n(u),l=t("../const"),c=t("../settings"),d=n(c),f=t("./TransformStatic"),p=n(f),v=t("./Transform"),g=n(v),y=t("./Bounds"),m=n(y),_=t("../math"),b=function(t){function e(){i(this,e);var r=o(this,t.call(this)),n=d.default.TRANSFORM_MODE===l.TRANSFORM_MODE.STATIC?p.default:g.default;return r.tempDisplayObjectParent=null,r.transform=new n,r.alpha=1,r.visible=!0,r.renderable=!0,r.parent=null,r.worldAlpha=1,r.filterArea=null,r._filters=null,r._enabledFilters=null,r._bounds=new m.default,r._boundsID=0,r._lastBoundsID=-1,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._destroyed=!1,r}return s(e,t),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new _.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new _.Rectangle),t=this._localBoundsRect);var n=this.getBounds(!1,t);return this.parent=r,this.transform=e,n},e.prototype.toGlobal=function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,r,n){return e&&(t=e.toGlobal(t,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=r||1,this.scale.y=n||1,this.rotation=i,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=u,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},a(e,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(h.default);r.default=b,b.prototype.displayObjectUpdateTransform=b.prototype.updateTransform},{"../const":46,"../math":70,"../settings":101,"./Bounds":47,"./Transform":50,"./TransformStatic":52,eventemitter3:3}],50:[function(t,e,r){"use strict";function n(t,e){
if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("../math"),u=t("./TransformBase"),h=function(t){return t&&t.__esModule?t:{default:t}}(u),l=function(t){function e(){n(this,e);var r=i(this,t.call(this));return r.position=new a.Point(0,0),r.scale=new a.Point(1,1),r.skew=new a.ObservablePoint(r.updateSkew,r,0,0),r.pivot=new a.Point(0,0),r._rotation=0,r._cx=1,r._sx=0,r._cy=0,r._sy=1,r}return o(e,t),e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},s(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(h.default);r.default=l},{"../math":70,"./TransformBase":51}],51:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t("../math"),o=function(){function t(){n(this,t),this.worldTransform=new i.Matrix,this.localTransform=new i.Matrix,this._worldID=0,this._parentID=0}return t.prototype.updateLocalTransform=function(){},t.prototype.updateTransform=function(t){var e=t.worldTransform,r=this.worldTransform,n=this.localTransform;r.a=n.a*e.a+n.b*e.c,r.b=n.a*e.b+n.b*e.d,r.c=n.c*e.a+n.d*e.c,r.d=n.c*e.b+n.d*e.d,r.tx=n.tx*e.a+n.ty*e.c+e.tx,r.ty=n.tx*e.b+n.ty*e.d+e.ty,this._worldID++},t}();r.default=o,o.prototype.updateWorldTransform=o.prototype.updateTransform,o.IDENTITY=new o},{"../math":70}],52:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("../math"),u=t("./TransformBase"),h=function(t){return t&&t.__esModule?t:{default:t}}(u),l=function(t){function e(){n(this,e);var r=i(this,t.call(this));return r.position=new a.ObservablePoint(r.onChange,r,0,0),r.scale=new a.ObservablePoint(r.onChange,r,1,1),r.pivot=new a.ObservablePoint(r.onChange,r,0,0),r.skew=new a.ObservablePoint(r.updateSkew,r,0,0),r._rotation=0,r._cx=1,r._sx=0,r._cy=0,r._sy=1,r._localID=0,r._currentLocalID=0,r}return o(e,t),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},s(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}}]),e}(h.default);r.default=l},{"../math":70,"./TransformBase":51}],53:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../display/Container"),u=n(a),h=t("../textures/RenderTexture"),l=n(h),c=t("../textures/Texture"),d=n(c),f=t("./GraphicsData"),p=n(f),v=t("../sprites/Sprite"),g=n(v),y=t("../math"),m=t("../utils"),_=t("../const"),b=t("../display/Bounds"),x=n(b),T=t("./utils/bezierCurveTo"),w=n(T),E=t("../renderers/canvas/CanvasRenderer"),S=n(E),O=void 0,M=new y.Matrix,P=new y.Point,C=new Float32Array(4),R=new Float32Array(4),A=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i(this,e);var n=o(this,t.call(this));return n.fillAlpha=1,n.lineWidth=0,n.nativeLines=r,n.lineColor=0,n.lineAlignment=.5,n.graphicsData=[],n.tint=16777215,n._prevTint=16777215,n.blendMode=_.BLEND_MODES.NORMAL,n.currentPath=null,n._webGL={},n.isMask=!1,n.boundsPadding=0,n._localBounds=new x.default,n.dirty=0,n.fastRectDirty=-1,n.clearDirty=0,n.boundsDirty=-1,n.cachedSpriteDirty=!1,n._spriteRect=null,n._fastRect=!1,n._prevRectTint=null,n._prevRectFillColor=null,n}return s(e,t),e.prototype.clone=function(){var t=new e;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.lineAlignment=this.lineAlignment,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var r=0;r<this.graphicsData.length;++r)t.graphicsData.push(this.graphicsData[r].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},e.prototype._quadraticCurveLength=function(t,e,r,n,i,o){var s=t-2*r+i,a=e-2*n+o,u=2*r-2*t,h=2*n-2*e,l=4*(s*s+a*a),c=4*(s*u+a*h),d=u*u+h*h,f=2*Math.sqrt(l+c+d),p=Math.sqrt(l),v=2*l*p,g=2*Math.sqrt(d),y=c/p;return(v*f+p*c*(f-g)+(4*d*l-c*c)*Math.log((2*p+y+f)/(y+g)))/(4*v)},e.prototype._bezierCurveLength=function(t,e,r,n,i,o,s,a){for(var u=0,h=0,l=0,c=0,d=0,f=0,p=0,v=0,g=0,y=0,m=0,_=t,b=e,x=1;x<=10;++x)h=x/10,l=h*h,c=l*h,d=1-h,f=d*d,p=f*d,v=p*t+3*f*h*r+3*d*l*i+c*s,g=p*e+3*f*h*n+3*d*l*o+c*a,y=_-v,m=b-g,_=v,b=g,u+=Math.sqrt(y*y+m*m);return u},e.prototype._segmentsCount=function(t){var r=Math.ceil(t/e.CURVES.maxLength);return r<e.CURVES.minSegments?r=e.CURVES.minSegments:r>e.CURVES.maxSegments&&(r=e.CURVES.maxSegments),r},e.prototype.lineStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=r,this.lineAlignment=n,this.currentPath)if(this.currentPath.shape.points.length){var i=new y.Polygon(this.currentPath.shape.points.slice(-2));i.closed=!1,this.drawShape(i)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha,this.currentPath.lineAlignment=this.lineAlignment;return this},e.prototype.moveTo=function(t,e){var r=new y.Polygon([t,e]);return r.closed=!1,this.drawShape(r),this},e.prototype.lineTo=function(t,e){var r=this.currentPath.shape.points,n=r[r.length-2],i=r[r.length-1];return n===t&&i===e||(r.push(t,e),this.dirty++),this},e.prototype.quadraticCurveTo=function(t,r,n,i){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var o=this.currentPath.shape.points,s=0,a=0;0===o.length&&this.moveTo(0,0);for(var u=o[o.length-2],h=o[o.length-1],l=e.CURVES.adaptive?this._segmentsCount(this._quadraticCurveLength(u,h,t,r,n,i)):20,c=1;c<=l;++c){var d=c/l;s=u+(t-u)*d,a=h+(r-h)*d,o.push(s+(t+(n-t)*d-s)*d,a+(r+(i-r)*d-a)*d)}return this.dirty++,this},e.prototype.bezierCurveTo=function(t,r,n,i,o,s){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var a=this.currentPath.shape.points,u=a[a.length-2],h=a[a.length-1];a.length-=2;var l=e.CURVES.adaptive?this._segmentsCount(this._bezierCurveLength(u,h,t,r,n,i,o,s)):20;return(0,w.default)(u,h,t,r,n,i,o,s,l,a),this.dirty++,this},e.prototype.arcTo=function(t,e,r,n,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1],u=a-e,h=s-t,l=n-e,c=r-t,d=Math.abs(u*c-h*l);if(d<1e-8||0===i)o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e);else{var f=u*u+h*h,p=l*l+c*c,v=u*l+h*c,g=i*Math.sqrt(f)/d,y=i*Math.sqrt(p)/d,m=g*v/f,_=y*v/p,b=g*c+y*h,x=g*l+y*u,T=h*(y+m),w=u*(y+m),E=c*(g+_),S=l*(g+_),O=Math.atan2(w-x,T-b),M=Math.atan2(S-x,E-b);this.arc(b+t,x+e,i,O,M,h*l>c*u)}return this.dirty++,this},e.prototype.arc=function(t,r,n,i,o){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(i===o)return this;!s&&o<=i?o+=_.PI_2:s&&i<=o&&(i+=_.PI_2);var a=o-i,u=e.CURVES.adaptive?this._segmentsCount(Math.abs(a)*n):40*Math.ceil(Math.abs(a)/_.PI_2);if(0===a)return this;var h=t+Math.cos(i)*n,l=r+Math.sin(i)*n,c=this.currentPath?this.currentPath.shape.points:null;if(c){var d=Math.abs(c[c.length-2]-h),f=Math.abs(c[c.length-1]-l);d<.001&&f<.001||c.push(h,l)}else this.moveTo(h,l),c=this.currentPath.shape.points;for(var p=a/(2*u),v=2*p,g=Math.cos(p),y=Math.sin(p),m=u-1,b=m%1/m,x=0;x<=m;++x){var T=x+b*x,w=p+i+v*T,E=Math.cos(w),S=-Math.sin(w);c.push((g*E+y*S)*n+t,(g*-S+y*E)*n+r)}return this.dirty++,this},e.prototype.beginFill=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(t,e,r,n){return this.drawShape(new y.Rectangle(t,e,r,n)),this},e.prototype.drawRoundedRect=function(t,e,r,n,i){return this.drawShape(new y.RoundedRectangle(t,e,r,n,i)),this},e.prototype.drawCircle=function(t,e,r){return this.drawShape(new y.Circle(t,e,r)),this},e.prototype.drawEllipse=function(t,e,r,n){return this.drawShape(new y.Ellipse(t,e,r,n)),this},e.prototype.drawPolygon=function(t){var e=t,r=!0;if(e instanceof y.Polygon&&(r=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var n=0;n<e.length;++n)e[n]=arguments[n]}var i=new y.Polygon(e);return i.closed=r,this.drawShape(i),this},e.prototype.drawStar=function(t,e,r,n,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;i=i||n/2;for(var s=-1*Math.PI/2+o,a=2*r,u=_.PI_2/a,h=[],l=0;l<a;l++){var c=l%2?i:n,d=l*u+s;h.push(t+c*Math.cos(d),e+c*Math.sin(d))}return this.drawPolygon(h)},e.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.lineAlignment=.5,this.filling=!1,this.boundsDirty=-1,this.canvasTintDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},e.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===_.SHAPES.RECT&&!this.graphicsData[0].lineWidth},e.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new g.default(new d.default(d.default.WHITE)));var r=this._spriteRect,n=this.graphicsData[0].fillColor;if(16777215===this.tint)r.tint=n;else if(this.tint!==this._prevRectTint||n!==this._prevRectFillColor){var i=C,o=R;(0,m.hex2rgb)(n,i),(0,m.hex2rgb)(this.tint,o),i[0]*=o[0],i[1]*=o[1],i[2]*=o[2],r.tint=(0,m.rgb2hex)(i),this._prevRectTint=this.tint,this._prevRectFillColor=n}r.alpha=this.graphicsData[0].fillAlpha,r.worldAlpha=this.worldAlpha*r.alpha,r.blendMode=this.blendMode,r._texture._frame.width=e.width,r._texture._frame.height=e.height,r.transform.worldTransform=this.transform.worldTransform,r.anchor.set(-e.x/e.width,-e.y/e.height),r._onAnchorUpdate(),r._renderWebGL(t)},e.prototype._renderCanvas=function(t){!0!==this.isMask&&t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,P);for(var e=this.graphicsData,r=0;r<e.length;++r){var n=e[r];if(n.fill&&(n.shape&&n.shape.contains(P.x,P.y))){var i=!1;if(n.holes)for(var o=0;o<n.holes.length;o++){var s=n.holes[o];if(s.contains(P.x,P.y)){i=!0;break}}if(!i)return!0}}return!1},e.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,r=1/0,n=-1/0;if(this.graphicsData.length)for(var i=0,o=0,s=0,a=0,u=0,h=0;h<this.graphicsData.length;h++){var l=this.graphicsData[h],c=l.type,d=l.lineWidth,f=l.lineAlignment,p=d*f;if(i=l.shape,c===_.SHAPES.RECT||c===_.SHAPES.RREC)o=i.x-p,s=i.y-p,a=i.width+2*p,u=i.height+2*p,t=o<t?o:t,e=o+a>e?o+a:e,r=s<r?s:r,n=s+u>n?s+u:n;else if(c===_.SHAPES.CIRC)o=i.x,s=i.y,a=i.radius+p,u=i.radius+p,t=o-a<t?o-a:t,e=o+a>e?o+a:e,r=s-u<r?s-u:r,n=s+u>n?s+u:n;else if(c===_.SHAPES.ELIP)o=i.x,s=i.y,a=i.width+p,u=i.height+p,t=o-a<t?o-a:t,e=o+a>e?o+a:e,r=s-u<r?s-u:r,n=s+u>n?s+u:n;else for(var v=i.points,g=0,y=0,m=0,b=0,x=0,T=0,w=0,E=0,S=0;S+2<v.length;S+=2)o=v[S],s=v[S+1],g=v[S+2],y=v[S+3],m=Math.abs(g-o),b=Math.abs(y-s),u=2*p,(a=Math.sqrt(m*m+b*b))<1e-9||(x=(u/a*b+m)/2,T=(u/a*m+b)/2,w=(g+o)/2,E=(y+s)/2,t=w-x<t?w-x:t,e=w+x>e?w+x:e,r=E-T<r?E-T:r,n=E+T>n?E+T:n)}else t=0,e=0,r=0,n=0;var O=this.boundsPadding;this._localBounds.minX=t-O,this._localBounds.maxX=e+O,this._localBounds.minY=r-O,this._localBounds.maxY=n+O},e.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new p.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t,this.lineAlignment);return this.graphicsData.push(e),e.type===_.SHAPES.POLY&&(e.shape.closed=e.shape.closed,this.currentPath=e),this.dirty++,e},e.prototype.generateCanvasTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.getLocalBounds(),n=l.default.create(r.width,r.height,t,e);O||(O=new S.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(M),M.invert(),M.tx-=r.x,M.ty-=r.y,O.render(this,n,!0,M);var i=d.default.fromCanvas(n.baseTexture._canvasRenderTarget.canvas,t,"graphics");return i.baseTexture.resolution=e,i.baseTexture.update(),i},e.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},e.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();for(var n in this._webGL)for(var i=0;i<this._webGL[n].data.length;++i)this._webGL[n].data[i].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webGL=null,this._localBounds=null},e}(u.default);r.default=A,A._SPRITE_TEXTURE=null,A.CURVES={adaptive:!1,maxLength:10,minSegments:8,maxSegments:2048}},{"../const":46,"../display/Bounds":47,"../display/Container":48,"../math":70,"../renderers/canvas/CanvasRenderer":77,"../sprites/Sprite":102,"../textures/RenderTexture":113,"../textures/Texture":115,"../utils":125,"./GraphicsData":54,"./utils/bezierCurveTo":56}],54:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(e,r,i,o,s,a,u,h,l){n(this,t),this.lineWidth=e,this.lineAlignment=l,this.nativeLines=u,this.lineColor=r,this.lineAlpha=i,this._lineTint=r,this.fillColor=o,this.fillAlpha=s,this._fillTint=o,this.fill=a,this.holes=[],this.shape=h,this.type=h.type}return t.prototype.clone=function(){return new t(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape,this.lineAlignment)},t.prototype.addHole=function(t){this.holes.push(t)},t.prototype.destroy=function(){this.shape=null,this.holes=null},t}();r.default=i},{}],55:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t("../../renderers/canvas/CanvasRenderer"),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s=t("../../const"),a=function(){function t(e){n(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,r=e.context,n=t.worldAlpha,i=t.transform.worldTransform,o=e.resolution;r.setTransform(i.a*o,i.b*o,i.c*o,i.d*o,i.tx*o,i.ty*o),t.canvasTintDirty===t.dirty&&t._prevTint===t.tint||this.updateGraphicsTint(t),e.setBlendMode(t.blendMode);for(var a=0;a<t.graphicsData.length;a++){var u=t.graphicsData[a],h=u.shape,l=u._fillTint,c=u._lineTint;if(r.lineWidth=u.lineWidth,u.type===s.SHAPES.POLY){r.beginPath();var d=h.points,f=u.holes,p=void 0,v=void 0,g=void 0,y=void 0;r.moveTo(d[0],d[1]);for(var m=2;m<d.length;m+=2)r.lineTo(d[m],d[m+1]);if(h.closed&&r.closePath(),f.length>0){p=0,g=d[0],y=d[1];for(var _=2;_+2<d.length;_+=2)p+=(d[_]-g)*(d[_+3]-y)-(d[_+2]-g)*(d[_+1]-y);for(var b=0;b<f.length;b++)if(d=f[b].points){v=0,g=d[0],y=d[1];for(var x=2;x+2<d.length;x+=2)v+=(d[x]-g)*(d[x+3]-y)-(d[x+2]-g)*(d[x+1]-y);if(v*p<0){r.moveTo(d[0],d[1]);for(var T=2;T<d.length;T+=2)r.lineTo(d[T],d[T+1])}else{r.moveTo(d[d.length-2],d[d.length-1]);for(var w=d.length-4;w>=0;w-=2)r.lineTo(d[w],d[w+1])}f[b].close&&r.closePath()}}u.fill&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke())}else if(u.type===s.SHAPES.RECT)(u.fillColor||0===u.fillColor)&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),r.fillRect(h.x,h.y,h.width,h.height)),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.strokeRect(h.x,h.y,h.width,h.height));else if(u.type===s.SHAPES.CIRC)r.beginPath(),r.arc(h.x,h.y,h.radius,0,2*Math.PI),r.closePath(),u.fill&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke());else if(u.type===s.SHAPES.ELIP){var E=2*h.width,S=2*h.height,O=h.x-E/2,M=h.y-S/2;r.beginPath();var P=E/2*.5522848,C=S/2*.5522848,R=O+E,A=M+S,I=O+E/2,D=M+S/2;r.moveTo(O,D),r.bezierCurveTo(O,D-C,I-P,M,I,M),r.bezierCurveTo(I+P,M,R,D-C,R,D),r.bezierCurveTo(R,D+C,I+P,A,I,A),r.bezierCurveTo(I-P,A,O,D+C,O,D),r.closePath(),u.fill&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke())}else if(u.type===s.SHAPES.RREC){var L=h.x,N=h.y,B=h.width,k=h.height,F=h.radius,j=Math.min(B,k)/2|0;F=F>j?j:F,r.beginPath(),r.moveTo(L,N+F),r.lineTo(L,N+k-F),r.quadraticCurveTo(L,N+k,L+F,N+k),r.lineTo(L+B-F,N+k),r.quadraticCurveTo(L+B,N+k,L+B,N+k-F),r.lineTo(L+B,N+F),r.quadraticCurveTo(L+B,N,L+B-F,N),r.lineTo(L+F,N),r.quadraticCurveTo(L,N,L,N+F),r.closePath(),(u.fillColor||0===u.fillColor)&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke())}}},t.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint,t.canvasTintDirty=t.dirty;for(var e=(t.tint>>16&255)/255,r=(t.tint>>8&255)/255,n=(255&t.tint)/255,i=0;i<t.graphicsData.length;++i){var o=t.graphicsData[i],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*r*255<<8)+(255&s)/255*n*255,o._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*r*255<<8)+(255&a)/255*n*255}},t.prototype.renderPolygon=function(t,e,r){r.moveTo(t[0],t[1]);for(var n=1;n<t.length/2;++n)r.lineTo(t[2*n],t[2*n+1]);e&&r.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();r.default=a,o.default.registerPlugin("graphics",a)},{"../../const":46,"../../renderers/canvas/CanvasRenderer":77}],56:[function(t,e,r){"use strict";function n(t,e,r,n,i,o,s,a,u){var h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[],l=0,c=0,d=0,f=0,p=0;h.push(t,e);for(var v=1,g=0;v<=u;++v)g=v/u,l=1-g,c=l*l,d=c*l,f=g*g,p=f*g,h.push(d*t+3*c*g*r+3*l*f*i+p*s,d*e+3*c*g*n+3*l*f*o+p*a);return h}r.__esModule=!0,r.default=n},{}],57:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../../utils"),u=t("../../const"),h=t("../../renderers/webgl/utils/ObjectRenderer"),l=n(h),c=t("../../renderers/webgl/WebGLRenderer"),d=n(c),f=t("./WebGLGraphicsData"),p=n(f),v=t("./shaders/PrimitiveShader"),g=n(v),y=t("./utils/buildPoly"),m=n(y),_=t("./utils/buildRectangle"),b=n(_),x=t("./utils/buildRoundedRectangle"),T=n(x),w=t("./utils/buildCircle"),E=n(w),S=function(t){function e(r){i(this,e);var n=o(this,t.call(this,r));return n.graphicsDataPool=[],n.primitiveShader=null,n.gl=r.gl,n.CONTEXT_UID=0,n}return s(e,t),e.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new g.default(this.gl)},e.prototype.destroy=function(){l.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},e.prototype.render=function(t){var e=this.renderer,r=e.gl,n=void 0,i=t._webGL[this.CONTEXT_UID];i&&t.dirty===i.dirty||(this.updateGraphics(t),i=t._webGL[this.CONTEXT_UID]);var o=this.primitiveShader;e.bindShader(o),e.state.setBlendMode(t.blendMode);for(var s=0,u=i.data.length;s<u;s++){n=i.data[s];var h=n.shader;e.bindShader(h),h.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),h.uniforms.tint=(0,a.hex2rgb)(t.tint),h.uniforms.alpha=t.worldAlpha,e.bindVao(n.vao),n.nativeLines?r.drawArrays(r.LINES,0,n.points.length/6):n.vao.draw(r.TRIANGLE_STRIP,n.indices.length)}},e.prototype.updateGraphics=function(t){var e=this.renderer.gl,r=t._webGL[this.CONTEXT_UID];if(r||(r=t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1}),r.dirty=t.dirty,t.clearDirty!==r.clearDirty){r.clearDirty=t.clearDirty;for(var n=0;n<r.data.length;n++)this.graphicsDataPool.push(r.data[n]);r.data.length=0,r.lastIndex=0}for(var i=void 0,o=void 0,s=r.lastIndex;s<t.graphicsData.length;s++){var a=t.graphicsData[s];i=this.getWebGLData(r,0),a.nativeLines&&a.lineWidth&&(o=this.getWebGLData(r,0,!0),r.lastIndex++),a.type===u.SHAPES.POLY&&(0,m.default)(a,i,o),a.type===u.SHAPES.RECT?(0,b.default)(a,i,o):a.type===u.SHAPES.CIRC||a.type===u.SHAPES.ELIP?(0,E.default)(a,i,o):a.type===u.SHAPES.RREC&&(0,T.default)(a,i,o),r.lastIndex++}this.renderer.bindVao(null);for(var h=0;h<r.data.length;h++)i=r.data[h],i.dirty&&i.upload()},e.prototype.getWebGLData=function(t,e,r){var n=t.data[t.data.length-1];return(!n||n.nativeLines!==r||n.points.length>32e4)&&(n=this.graphicsDataPool.pop()||new p.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),n.nativeLines=r,n.reset(e),t.data.push(n)),n.dirty=!0,n},e}(l.default);r.default=S,d.default.registerPlugin("graphics",S)},{"../../const":46,"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../utils":125,"./WebGLGraphicsData":58,"./shaders/PrimitiveShader":59,"./utils/buildCircle":60,"./utils/buildPoly":62,"./utils/buildRectangle":63,"./utils/buildRoundedRectangle":64}],58:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t("pixi-gl-core"),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s=function(){function t(e,r,i){n(this,t),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=o.default.GLBuffer.createVertexBuffer(e),this.indexBuffer=o.default.GLBuffer.createIndexBuffer(e),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=r,this.vao=new o.default.VertexArrayObject(e,i).addIndex(this.indexBuffer).addAttribute(this.buffer,r.attributes.aVertexPosition,e.FLOAT,!1,24,0).addAttribute(this.buffer,r.attributes.aColor,e.FLOAT,!1,24,8)}return t.prototype.reset=function(){this.points.length=0,this.indices.length=0},t.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},t.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},t}();r.default=s},{"pixi-gl-core":15}],59:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../../../Shader"),a=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(r){return n(this,e),i(this,t.call(this,r,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return o(e,t),e}(a.default);r.default=u},{"../../../Shader":44}],60:[function(t,e,r){"use strict";function n(t,e,r){var n=t.shape,i=n.x,u=n.y,h=void 0,l=void 0;if(t.type===s.SHAPES.CIRC?(h=n.radius,l=n.radius):(h=n.width,l=n.height),0!==h&&0!==l){var c=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(n.width+n.height)),d=2*Math.PI/c;if(t.fill){var f=(0,a.hex2rgb)(t.fillColor),p=t.fillAlpha,v=f[0]*p,g=f[1]*p,y=f[2]*p,m=e.points,_=e.indices,b=m.length/6;_.push(b);for(var x=0;x<c+1;x++)m.push(i,u,v,g,y,p),m.push(i+Math.sin(d*x)*h,u+Math.cos(d*x)*l,v,g,y,p),_.push(b++,b++);_.push(b-1)}if(t.lineWidth){var T=t.points;t.points=[];for(var w=0;w<c;w++)t.points.push(i+Math.sin(d*-w)*h,u+Math.cos(d*-w)*l);t.points.push(t.points[0],t.points[1]),(0,o.default)(t,e,r),t.points=T}}}r.__esModule=!0,r.default=n;var i=t("./buildLine"),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s=t("../../../const"),a=t("../../../utils")},{"../../../const":46,"../../../utils":125,"./buildLine":61}],61:[function(t,e,r){"use strict";function n(t,e){var r=t.points;if(0!==r.length){var n=new o.Point(r[0],r[1]),i=new o.Point(r[r.length-2],r[r.length-1]);if(n.x===i.x&&n.y===i.y){r=r.slice(),r.pop(),r.pop(),i=new o.Point(r[r.length-2],r[r.length-1]);var a=i.x+.5*(n.x-i.x),u=i.y+.5*(n.y-i.y);r.unshift(a,u),r.push(a,u)}var h=e.points,l=e.indices,c=r.length/2,d=r.length,f=h.length/6,p=t.lineWidth/2,v=(0,s.hex2rgb)(t.lineColor),g=t.lineAlpha,y=v[0]*g,m=v[1]*g,_=v[2]*g,b=r[0],x=r[1],T=r[2],w=r[3],E=0,S=0,O=-(x-w),M=b-T,P=0,C=0,R=0,A=0,I=Math.sqrt(O*O+M*M);O/=I,M/=I,O*=p,M*=p;var D=t.lineAlignment,L=2*(1-D),N=2*D;h.push(b-O*L,x-M*L,y,m,_,g),h.push(b+O*N,x+M*N,y,m,_,g);for(var B=1;B<c-1;++B){b=r[2*(B-1)],x=r[2*(B-1)+1],T=r[2*B],w=r[2*B+1],E=r[2*(B+1)],S=r[2*(B+1)+1],O=-(x-w),M=b-T,I=Math.sqrt(O*O+M*M),O/=I,M/=I,O*=p,M*=p,P=-(w-S),C=T-E,I=Math.sqrt(P*P+C*C),P/=I,C/=I,P*=p,C*=p;var k=-M+x-(-M+w),F=-O+T-(-O+b),j=(-O+b)*(-M+w)-(-O+T)*(-M+x),U=-C+S-(-C+w),X=-P+T-(-P+E),G=(-P+E)*(-C+w)-(-P+T)*(-C+S),W=k*X-U*F;if(Math.abs(W)<.1)W+=10.1,h.push(T-O*L,w-M*L,y,m,_,g),
h.push(T+O*N,w+M*N,y,m,_,g);else{var H=(F*G-X*j)/W,Y=(U*j-k*G)/W;(H-T)*(H-T)+(Y-w)*(Y-w)>196*p*p?(R=O-P,A=M-C,I=Math.sqrt(R*R+A*A),R/=I,A/=I,R*=p,A*=p,h.push(T-R*L,w-A*L),h.push(y,m,_,g),h.push(T+R*N,w+A*N),h.push(y,m,_,g),h.push(T-R*N*L,w-A*L),h.push(y,m,_,g),d++):(h.push(T+(H-T)*L,w+(Y-w)*L),h.push(y,m,_,g),h.push(T-(H-T)*N,w-(Y-w)*N),h.push(y,m,_,g))}}b=r[2*(c-2)],x=r[2*(c-2)+1],T=r[2*(c-1)],w=r[2*(c-1)+1],O=-(x-w),M=b-T,I=Math.sqrt(O*O+M*M),O/=I,M/=I,O*=p,M*=p,h.push(T-O*L,w-M*L),h.push(y,m,_,g),h.push(T+O*N,w+M*N),h.push(y,m,_,g),l.push(f);for(var V=0;V<d;++V)l.push(f++);l.push(f-1)}}function i(t,e){var r=0,n=t.points;if(0!==n.length){var i=e.points,o=n.length/2,a=(0,s.hex2rgb)(t.lineColor),u=t.lineAlpha,h=a[0]*u,l=a[1]*u,c=a[2]*u;for(r=1;r<o;r++){var d=n[2*(r-1)],f=n[2*(r-1)+1],p=n[2*r],v=n[2*r+1];i.push(d,f),i.push(h,l,c,u),i.push(p,v),i.push(h,l,c,u)}}}r.__esModule=!0,r.default=function(t,e,r){t.nativeLines?i(t,r):n(t,e)};var o=t("../../../math"),s=t("../../../utils")},{"../../../math":70,"../../../utils":125}],62:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e,r){t.points=t.shape.points.slice();var n=t.points;if(t.fill&&n.length>=6){for(var i=[],o=t.holes,u=0;u<o.length;u++){var l=o[u];i.push(n.length/2),n=n.concat(l.points)}var c=e.points,d=e.indices,f=n.length/2,p=(0,a.hex2rgb)(t.fillColor),v=t.fillAlpha,g=p[0]*v,y=p[1]*v,m=p[2]*v,_=(0,h.default)(n,i,2);if(!_)return;for(var b=c.length/6,x=0;x<_.length;x+=3)d.push(_[x]+b),d.push(_[x]+b),d.push(_[x+1]+b),d.push(_[x+2]+b),d.push(_[x+2]+b);for(var T=0;T<f;T++)c.push(n[2*T],n[2*T+1],g,y,m,v)}t.lineWidth>0&&(0,s.default)(t,e,r)}r.__esModule=!0,r.default=i;var o=t("./buildLine"),s=n(o),a=t("../../../utils"),u=t("earcut"),h=n(u)},{"../../../utils":125,"./buildLine":61,earcut:2}],63:[function(t,e,r){"use strict";function n(t,e,r){var n=t.shape,i=n.x,a=n.y,u=n.width,h=n.height;if(t.fill){var l=(0,s.hex2rgb)(t.fillColor),c=t.fillAlpha,d=l[0]*c,f=l[1]*c,p=l[2]*c,v=e.points,g=e.indices,y=v.length/6;v.push(i,a),v.push(d,f,p,c),v.push(i+u,a),v.push(d,f,p,c),v.push(i,a+h),v.push(d,f,p,c),v.push(i+u,a+h),v.push(d,f,p,c),g.push(y,y,y+1,y+2,y+3,y+3)}if(t.lineWidth){var m=t.points;t.points=[i,a,i+u,a,i+u,a+h,i,a+h,i,a],(0,o.default)(t,e,r),t.points=m}}r.__esModule=!0,r.default=n;var i=t("./buildLine"),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s=t("../../../utils")},{"../../../utils":125,"./buildLine":61}],64:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e,r){var n=t.shape,i=n.x,o=n.y,a=n.width,h=n.height,d=n.radius,f=[];if(f.push(i+d,o),s(i+a-d,o,i+a,o,i+a,o+d,f),s(i+a,o+h-d,i+a,o+h,i+a-d,o+h,f),s(i+d,o+h,i,o+h,i,o+h-d,f),s(i,o+d,i,o,i+d+1e-10,o,f),t.fill){for(var p=(0,c.hex2rgb)(t.fillColor),v=t.fillAlpha,g=p[0]*v,y=p[1]*v,m=p[2]*v,_=e.points,b=e.indices,x=_.length/6,T=(0,u.default)(f,null,2),w=0,E=T.length;w<E;w+=3)b.push(T[w]+x),b.push(T[w]+x),b.push(T[w+1]+x),b.push(T[w+2]+x),b.push(T[w+2]+x);for(var S=0,O=f.length;S<O;S++)_.push(f[S],f[++S],g,y,m,v)}if(t.lineWidth){var M=t.points;t.points=f,(0,l.default)(t,e,r),t.points=M}}function o(t,e,r){return t+(e-t)*r}function s(t,e,r,n,i,s){for(var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],u=a,h=0,l=0,c=0,d=0,f=0,p=0,v=0,g=0;v<=20;++v)g=v/20,h=o(t,r,g),l=o(e,n,g),c=o(r,i,g),d=o(n,s,g),f=o(h,c,g),p=o(l,d,g),u.push(f,p);return u}r.__esModule=!0,r.default=i;var a=t("earcut"),u=n(a),h=t("./buildLine"),l=n(h),c=t("../../../utils")},{"../../../utils":125,"./buildLine":61,earcut:2}],65:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.autoDetectRenderer=r.Application=r.Filter=r.SpriteMaskFilter=r.Quad=r.RenderTarget=r.ObjectRenderer=r.WebGLManager=r.Shader=r.CanvasRenderTarget=r.TextureUvs=r.VideoBaseTexture=r.BaseRenderTexture=r.RenderTexture=r.BaseTexture=r.TextureMatrix=r.Texture=r.Spritesheet=r.CanvasGraphicsRenderer=r.GraphicsRenderer=r.GraphicsData=r.Graphics=r.TextMetrics=r.TextStyle=r.Text=r.SpriteRenderer=r.CanvasTinter=r.CanvasSpriteRenderer=r.Sprite=r.TransformBase=r.TransformStatic=r.Transform=r.Container=r.DisplayObject=r.Bounds=r.glCore=r.WebGLRenderer=r.CanvasRenderer=r.ticker=r.utils=r.settings=void 0;var o=t("./const");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return o[t]}})});var s=t("./math");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return s[t]}})});var a=t("pixi-gl-core");Object.defineProperty(r,"glCore",{enumerable:!0,get:function(){return i(a).default}});var u=t("./display/Bounds");Object.defineProperty(r,"Bounds",{enumerable:!0,get:function(){return i(u).default}});var h=t("./display/DisplayObject");Object.defineProperty(r,"DisplayObject",{enumerable:!0,get:function(){return i(h).default}});var l=t("./display/Container");Object.defineProperty(r,"Container",{enumerable:!0,get:function(){return i(l).default}});var c=t("./display/Transform");Object.defineProperty(r,"Transform",{enumerable:!0,get:function(){return i(c).default}});var d=t("./display/TransformStatic");Object.defineProperty(r,"TransformStatic",{enumerable:!0,get:function(){return i(d).default}});var f=t("./display/TransformBase");Object.defineProperty(r,"TransformBase",{enumerable:!0,get:function(){return i(f).default}});var p=t("./sprites/Sprite");Object.defineProperty(r,"Sprite",{enumerable:!0,get:function(){return i(p).default}});var v=t("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(r,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return i(v).default}});var g=t("./sprites/canvas/CanvasTinter");Object.defineProperty(r,"CanvasTinter",{enumerable:!0,get:function(){return i(g).default}});var y=t("./sprites/webgl/SpriteRenderer");Object.defineProperty(r,"SpriteRenderer",{enumerable:!0,get:function(){return i(y).default}});var m=t("./text/Text");Object.defineProperty(r,"Text",{enumerable:!0,get:function(){return i(m).default}});var _=t("./text/TextStyle");Object.defineProperty(r,"TextStyle",{enumerable:!0,get:function(){return i(_).default}});var b=t("./text/TextMetrics");Object.defineProperty(r,"TextMetrics",{enumerable:!0,get:function(){return i(b).default}});var x=t("./graphics/Graphics");Object.defineProperty(r,"Graphics",{enumerable:!0,get:function(){return i(x).default}});var T=t("./graphics/GraphicsData");Object.defineProperty(r,"GraphicsData",{enumerable:!0,get:function(){return i(T).default}});var w=t("./graphics/webgl/GraphicsRenderer");Object.defineProperty(r,"GraphicsRenderer",{enumerable:!0,get:function(){return i(w).default}});var E=t("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(r,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return i(E).default}});var S=t("./textures/Spritesheet");Object.defineProperty(r,"Spritesheet",{enumerable:!0,get:function(){return i(S).default}});var O=t("./textures/Texture");Object.defineProperty(r,"Texture",{enumerable:!0,get:function(){return i(O).default}});var M=t("./textures/TextureMatrix");Object.defineProperty(r,"TextureMatrix",{enumerable:!0,get:function(){return i(M).default}});var P=t("./textures/BaseTexture");Object.defineProperty(r,"BaseTexture",{enumerable:!0,get:function(){return i(P).default}});var C=t("./textures/RenderTexture");Object.defineProperty(r,"RenderTexture",{enumerable:!0,get:function(){return i(C).default}});var R=t("./textures/BaseRenderTexture");Object.defineProperty(r,"BaseRenderTexture",{enumerable:!0,get:function(){return i(R).default}});var A=t("./textures/VideoBaseTexture");Object.defineProperty(r,"VideoBaseTexture",{enumerable:!0,get:function(){return i(A).default}});var I=t("./textures/TextureUvs");Object.defineProperty(r,"TextureUvs",{enumerable:!0,get:function(){return i(I).default}});var D=t("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(r,"CanvasRenderTarget",{enumerable:!0,get:function(){return i(D).default}});var L=t("./Shader");Object.defineProperty(r,"Shader",{enumerable:!0,get:function(){return i(L).default}});var N=t("./renderers/webgl/managers/WebGLManager");Object.defineProperty(r,"WebGLManager",{enumerable:!0,get:function(){return i(N).default}});var B=t("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(r,"ObjectRenderer",{enumerable:!0,get:function(){return i(B).default}});var k=t("./renderers/webgl/utils/RenderTarget");Object.defineProperty(r,"RenderTarget",{enumerable:!0,get:function(){return i(k).default}});var F=t("./renderers/webgl/utils/Quad");Object.defineProperty(r,"Quad",{enumerable:!0,get:function(){return i(F).default}});var j=t("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(r,"SpriteMaskFilter",{enumerable:!0,get:function(){return i(j).default}});var U=t("./renderers/webgl/filters/Filter");Object.defineProperty(r,"Filter",{enumerable:!0,get:function(){return i(U).default}});var X=t("./Application");Object.defineProperty(r,"Application",{enumerable:!0,get:function(){return i(X).default}});var G=t("./autoDetectRenderer");Object.defineProperty(r,"autoDetectRenderer",{enumerable:!0,get:function(){return G.autoDetectRenderer}});var W=t("./utils"),H=n(W),Y=t("./ticker"),V=n(Y),z=t("./settings"),q=i(z),K=t("./renderers/canvas/CanvasRenderer"),Z=i(K),J=t("./renderers/webgl/WebGLRenderer"),Q=i(J);r.settings=q.default,r.utils=H,r.ticker=V,r.CanvasRenderer=Z.default,r.WebGLRenderer=Q.default},{"./Application":43,"./Shader":44,"./autoDetectRenderer":45,"./const":46,"./display/Bounds":47,"./display/Container":48,"./display/DisplayObject":49,"./display/Transform":50,"./display/TransformBase":51,"./display/TransformStatic":52,"./graphics/Graphics":53,"./graphics/GraphicsData":54,"./graphics/canvas/CanvasGraphicsRenderer":55,"./graphics/webgl/GraphicsRenderer":57,"./math":70,"./renderers/canvas/CanvasRenderer":77,"./renderers/canvas/utils/CanvasRenderTarget":79,"./renderers/webgl/WebGLRenderer":84,"./renderers/webgl/filters/Filter":86,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":89,"./renderers/webgl/managers/WebGLManager":93,"./renderers/webgl/utils/ObjectRenderer":94,"./renderers/webgl/utils/Quad":95,"./renderers/webgl/utils/RenderTarget":96,"./settings":101,"./sprites/Sprite":102,"./sprites/canvas/CanvasSpriteRenderer":103,"./sprites/canvas/CanvasTinter":104,"./sprites/webgl/SpriteRenderer":106,"./text/Text":108,"./text/TextMetrics":109,"./text/TextStyle":110,"./textures/BaseRenderTexture":111,"./textures/BaseTexture":112,"./textures/RenderTexture":113,"./textures/Spritesheet":114,"./textures/Texture":115,"./textures/TextureMatrix":116,"./textures/TextureUvs":117,"./textures/VideoBaseTexture":118,"./ticker":121,"./utils":125,"pixi-gl-core":15}],66:[function(t,e,r){"use strict";function n(t){return t<0?-1:t>0?1:0}r.__esModule=!0;var i=t("./Matrix"),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],a=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],u=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],h=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],l=[],c=[];!function(){for(var t=0;t<16;t++){var e=[];c.push(e);for(var r=0;r<16;r++)for(var i=n(s[t]*s[r]+u[t]*a[r]),d=n(a[t]*s[r]+h[t]*a[r]),f=n(s[t]*u[r]+u[t]*h[r]),p=n(a[t]*u[r]+h[t]*h[r]),v=0;v<16;v++)if(s[v]===i&&a[v]===d&&u[v]===f&&h[v]===p){e.push(v);break}}for(var g=0;g<16;g++){var y=new o.default;y.set(s[g],a[g],u[g],h[g],0,0),l.push(y)}}();var d={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return s[t]},uY:function(t){return a[t]},vX:function(t){return u[t]},vY:function(t){return h[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return c[t][e]},sub:function(t,e){return c[t][d.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?d.S:d.N:2*Math.abs(e)<=Math.abs(t)?t>0?d.E:d.W:e>0?t>0?d.SE:d.SW:t>0?d.NE:d.NW},matrixAppendRotationInv:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=l[d.inv(e)];i.tx=r,i.ty=n,t.append(i)}};r.default=d},{"./Matrix":67}],67:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("./Point"),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=t("../const"),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;n(this,t),this.a=e,this.b=r,this.c=i,this.d=o,this.tx=s,this.ty=a,this.array=null}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,r,n,i,o){return this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},t.prototype.apply=function(t,e){e=e||new s.default;var r=t.x,n=t.y;return e.x=this.a*r+this.c*n+this.tx,e.y=this.b*r+this.d*n+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new s.default;var r=1/(this.a*this.d+this.c*-this.b),n=t.x,i=t.y;return e.x=this.d*r*n+-this.c*r*i+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*i+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),n=this.a,i=this.c,o=this.tx;return this.a=n*e-this.b*r,this.b=n*r+this.b*e,this.c=i*e-this.d*r,this.d=i*r+this.d*e,this.tx=o*e-this.ty*r,this.ty=o*r+this.ty*e,this},t.prototype.append=function(t){var e=this.a,r=this.b,n=this.c,i=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*r+t.b*i,this.c=t.c*e+t.d*n,this.d=t.c*r+t.d*i,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*i+this.ty,this},t.prototype.setTransform=function(t,e,r,n,i,o,s,a,u){return this.a=Math.cos(s+u)*i,this.b=Math.sin(s+u)*i,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=t-(r*this.a+n*this.c),this.ty=e-(r*this.b+n*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var r=this.a,n=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,r=this.b,n=this.c,i=this.d,o=-Math.atan2(-n,i),s=Math.atan2(r,e),u=Math.abs(o+s);return u<1e-5||Math.abs(a.PI_2-u)<1e-5?(t.rotation=s,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=s),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(n*n+i*i),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,n=this.d,i=this.tx,o=t*n-e*r;return this.a=n/o,this.b=-e/o,this.c=-r/o,this.d=t/o,this.tx=(r*this.ty-n*i)/o,this.ty=-(t*this.ty-e*i)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},i(t,null,[{key:"IDENTITY",get:function(){return new t}},{key:"TEMP_MATRIX",get:function(){return new t}}]),t}();r.default=u},{"../const":46,"./Point":69}],68:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this._x=i,this._y=o,this.cb=e,this.scope=r}return t.prototype.clone=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new t(e||this.cb,r||this.scope,this._x,this._y)},t.prototype.set=function(t,e){var r=t||0,n=e||(0!==e?r:0);this._x===r&&this._y===n||(this._x=r,this._y=n,this.cb.call(this.scope))},t.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},i(t,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}();r.default=o},{}],69:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,t),this.x=e,this.y=r}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},t}();r.default=i},{}],70:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./Point");Object.defineProperty(r,"Point",{enumerable:!0,get:function(){return n(i).default}});var o=t("./ObservablePoint");Object.defineProperty(r,"ObservablePoint",{enumerable:!0,get:function(){return n(o).default}});var s=t("./Matrix");Object.defineProperty(r,"Matrix",{enumerable:!0,get:function(){return n(s).default}});var a=t("./GroupD8");Object.defineProperty(r,"GroupD8",{enumerable:!0,get:function(){return n(a).default}});var u=t("./shapes/Circle");Object.defineProperty(r,"Circle",{enumerable:!0,get:function(){return n(u).default}});var h=t("./shapes/Ellipse");Object.defineProperty(r,"Ellipse",{enumerable:!0,get:function(){return n(h).default}});var l=t("./shapes/Polygon");Object.defineProperty(r,"Polygon",{enumerable:!0,get:function(){return n(l).default}});var c=t("./shapes/Rectangle");Object.defineProperty(r,"Rectangle",{enumerable:!0,get:function(){return n(c).default}});var d=t("./shapes/RoundedRectangle");Object.defineProperty(r,"RoundedRectangle",{enumerable:!0,get:function(){return n(d).default}})},{"./GroupD8":66,"./Matrix":67,"./ObservablePoint":68,"./Point":69,"./shapes/Circle":71,"./shapes/Ellipse":72,"./shapes/Polygon":73,"./shapes/Rectangle":74,"./shapes/RoundedRectangle":75}],71:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t("./Rectangle"),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s=t("../../const"),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n(this,t),this.x=e,this.y=r,this.radius=i,this.type=s.SHAPES.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,n=this.x-t,i=this.y-e;return n*=n,i*=i,n+i<=r},t.prototype.getBounds=function(){return new o.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();r.default=a},{"../../const":46,"./Rectangle":74}],72:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t("./Rectangle"),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s=t("../../const"),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this.x=e,this.y=r,this.width=i,this.height=o,this.type=s.SHAPES.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,n=(e-this.y)/this.height;return r*=r,n*=n,r+n<=1},t.prototype.getBounds=function(){return new o.default(this.x-this.width,this.y-this.height,this.width,this.height)},t}();r.default=a},{"../../const":46,"./Rectangle":74}],73:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t("../Point"),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s=t("../../const"),a=function(){function t(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];if(n(this,t),Array.isArray(r[0])&&(r=r[0]),r[0]instanceof o.default){for(var a=[],u=0,h=r.length;u<h;u++)a.push(r[u].x,r[u].y);r=a}this.closed=!0,this.points=r,this.type=s.SHAPES.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.contains=function(t,e){for(var r=!1,n=this.points.length/2,i=0,o=n-1;i<n;o=i++){var s=this.points[2*i],a=this.points[2*i+1],u=this.points[2*o],h=this.points[2*o+1];a>e!=h>e&&t<(e-a)/(h-a)*(u-s)+s&&(r=!r)}return r},t}();r.default=a},{"../../const":46,"../Point":69}],74:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("../../const"),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this.x=Number(e),this.y=Number(r),this.width=Number(i),this.height=Number(s),this.type=o.SHAPES.RECT}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),i=Math.min(this.y+this.height,t.y+t.height);this.x=e,this.width=Math.max(r-e,0),this.y=n,this.height=Math.max(i-n,0)},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=r-e,this.y=n,this.height=i-n},t.prototype.ceil=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.001,r=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=n-this.y},i(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new t(0,0,0,0)}}]),t}();r.default=s},{"../../const":46}],75:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t("../../const"),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;n(this,t),this.x=e,this.y=r,this.width=o,this.height=s,this.radius=a,this.type=i.SHAPES.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),n=e-(this.y+this.radius),i=this.radius*this.radius;if(r*r+n*n<=i)return!0;if((r=t-(this.x+this.width-this.radius))*r+n*n<=i)return!0;if(n=e-(this.y+this.height-this.radius),r*r+n*n<=i)return!0;if((r=t-(this.x+this.radius))*r+n*n<=i)return!0}return!1},t}();r.default=o},{"../../const":46}],76:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("../utils"),h=t("../math"),l=t("../const"),c=t("../settings"),d=n(c),f=t("../display/Container"),p=n(f),v=t("../textures/RenderTexture"),g=n(v),y=t("eventemitter3"),m=n(y),_=new h.Matrix,b=function(t){function e(r,n,s,a){i(this,e);var c=o(this,t.call(this));return(0,u.sayHello)(r),"number"==typeof n&&(n=Object.assign({width:n,height:s||d.default.RENDER_OPTIONS.height},a)),n=Object.assign({},d.default.RENDER_OPTIONS,n),c.options=n,c.type=l.RENDERER_TYPE.UNKNOWN,c.screen=new h.Rectangle(0,0,n.width,n.height),c.view=n.view||document.createElement("canvas"),c.resolution=n.resolution||d.default.RESOLUTION,c.transparent=n.transparent,c.autoResize=n.autoResize||!1,c.blendModes=null,c.preserveDrawingBuffer=n.preserveDrawingBuffer,c.clearBeforeRender=n.clearBeforeRender,c.roundPixels=n.roundPixels,c._backgroundColor=0,c._backgroundColorRgba=[0,0,0,0],c._backgroundColorString="#000000",c.backgroundColor=n.backgroundColor||c._backgroundColor,c._tempDisplayObjectParent=new p.default,c._lastObjectRendered=c._tempDisplayObjectParent,c}return s(e,t),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoResize&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,r,n){n=n||t.getLocalBounds();var i=g.default.create(0|n.width,0|n.height,e,r);return _.tx=-n.x,_.ty=-n.y,this.render(t,i,!1,_,!!t.parent),i},e.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=l.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},a(e,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,u.hex2string)(t),(0,u.hex2rgb)(t,this._backgroundColorRgba)}}]),e}(m.default);r.default=b},{"../const":46,"../display/Container":48,"../math":70,"../settings":101,"../textures/RenderTexture":113,"../utils":125,eventemitter3:3}],77:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../SystemRenderer"),u=n(a),h=t("./utils/CanvasMaskManager"),l=n(h),c=t("./utils/CanvasRenderTarget"),d=n(c),f=t("./utils/mapCanvasBlendModesToPixi"),p=n(f),v=t("../../utils"),g=t("../../const"),y=t("../../settings"),m=n(y),_=function(t){function e(r,n,s){i(this,e);var a=o(this,t.call(this,"Canvas",r,n,s));return a.type=g.RENDERER_TYPE.CANVAS,a.rootContext=a.view.getContext("2d",{alpha:a.transparent}),a.context=a.rootContext,a.refresh=!0,a.maskManager=new l.default(a),a.smoothProperty="imageSmoothingEnabled",a.rootContext.imageSmoothingEnabled||(a.rootContext.webkitImageSmoothingEnabled?a.smoothProperty="webkitImageSmoothingEnabled":a.rootContext.mozImageSmoothingEnabled?a.smoothProperty="mozImageSmoothingEnabled":a.rootContext.oImageSmoothingEnabled?a.smoothProperty="oImageSmoothingEnabled":a.rootContext.msImageSmoothingEnabled&&(a.smoothProperty="msImageSmoothingEnabled")),a.initPlugins(),a.blendModes=(0,p.default)(),a._activeBlendMode=null,a.renderingToScreen=!1,a.resize(a.options.width,a.options.height),a}return s(e,t),e.prototype.render=function(t,e,r,n,i){if(this.view){this.renderingToScreen=!e,this.emit("prerender");var o=this.resolution;e?(e=e.baseTexture||e,e._canvasRenderTarget||(e._canvasRenderTarget=new d.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var s=this.context;if(e||(this._lastObjectRendered=t),!i){var a=t.parent,u=this._tempDisplayObjectParent.transform.worldTransform;n?(n.copy(u),this._tempDisplayObjectParent.transform._worldID=-1):u.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=a}s.save(),s.setTransform(1,0,0,1,0,0),s.globalAlpha=1,this._activeBlendMode=g.BLEND_MODES.NORMAL,
s.globalCompositeOperation=this.blendModes[g.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(s.fillStyle="black",s.clear()),(void 0!==r?r:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?s.clearRect(0,0,this.width,this.height):(s.fillStyle=this._backgroundColorString,s.fillRect(0,0,this.width,this.height)));var h=this.context;this.context=s,t.renderCanvas(this),this.context=h,s.restore(),this.resolution=o,this.emit("postrender")}},e.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},e.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){this.destroyPlugins(),t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,r){t.prototype.resize.call(this,e,r),this.smoothProperty&&(this.rootContext[this.smoothProperty]=m.default.SCALE_MODE===g.SCALE_MODES.LINEAR)},e.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},e}(u.default);r.default=_,v.pluginTarget.mixin(_)},{"../../const":46,"../../settings":101,"../../utils":125,"../SystemRenderer":76,"./utils/CanvasMaskManager":78,"./utils/CanvasRenderTarget":79,"./utils/mapCanvasBlendModesToPixi":81}],78:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t("../../../const"),o=function(){function t(e){n(this,t),this.renderer=e}return t.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var r=t.alpha,n=t.transform.worldTransform,i=e.resolution;e.context.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=r},t.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,r=t.graphicsData.length;if(0!==r){e.beginPath();for(var n=0;n<r;n++){var o=t.graphicsData[n],s=o.shape;if(o.type===i.SHAPES.POLY){var a=s.points,u=o.holes,h=void 0,l=void 0;e.moveTo(a[0],a[1]);for(var c=2;c<a.length;c+=2)e.lineTo(a[c],a[c+1]);if(a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath(),u.length>0){h=0;for(var d=0;d<a.length;d+=2)h+=a[d]*a[d+3]-a[d+1]*a[d+2];for(var f=0;f<u.length;f++){a=u[f].points,l=0;for(var p=0;p<a.length;p+=2)l+=a[p]*a[p+3]-a[p+1]*a[p+2];if(e.moveTo(a[0],a[1]),l*h<0)for(var v=2;v<a.length;v+=2)e.lineTo(a[v],a[v+1]);else for(var g=a.length-2;g>=2;g-=2)e.lineTo(a[g],a[g+1])}}}else if(o.type===i.SHAPES.RECT)e.rect(s.x,s.y,s.width,s.height),e.closePath();else if(o.type===i.SHAPES.CIRC)e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath();else if(o.type===i.SHAPES.ELIP){var y=2*s.width,m=2*s.height,_=s.x-y/2,b=s.y-m/2,x=y/2*.5522848,T=m/2*.5522848,w=_+y,E=b+m,S=_+y/2,O=b+m/2;e.moveTo(_,O),e.bezierCurveTo(_,O-T,S-x,b,S,b),e.bezierCurveTo(S+x,b,w,O-T,w,O),e.bezierCurveTo(w,O+T,S+x,E,S,E),e.bezierCurveTo(S-x,E,_,O+T,_,O),e.closePath()}else if(o.type===i.SHAPES.RREC){var M=s.x,P=s.y,C=s.width,R=s.height,A=s.radius,I=Math.min(C,R)/2|0;A=A>I?I:A,e.moveTo(M,P+A),e.lineTo(M,P+R-A),e.quadraticCurveTo(M,P+R,M+A,P+R),e.lineTo(M+C-A,P+R),e.quadraticCurveTo(M+C,P+R,M+C,P+R-A),e.lineTo(M+C,P+A),e.quadraticCurveTo(M+C,P,M+C-A,P),e.lineTo(M+A,P),e.quadraticCurveTo(M,P,M,P+A),e.closePath()}}}},t.prototype.popMask=function(t){t.context.restore(),t.invalidateBlendMode()},t.prototype.destroy=function(){},t}();r.default=o},{"../../../const":46}],79:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("../../../settings"),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=function(){function t(e,r,i){n(this,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||s.default.RESOLUTION,this.resize(e,r)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},i(t,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}();r.default=a},{"../../../settings":101}],80:[function(t,e,r){"use strict";function n(t){var e=document.createElement("canvas");e.width=6,e.height=1;var r=e.getContext("2d");return r.fillStyle=t,r.fillRect(0,0,6,1),e}function i(){if("undefined"==typeof document)return!1;var t=n("#ff00ff"),e=n("#ffff00"),r=document.createElement("canvas");r.width=6,r.height=1;var i=r.getContext("2d");i.globalCompositeOperation="multiply",i.drawImage(t,0,0),i.drawImage(e,2,0);var o=i.getImageData(2,0,1,1);if(!o)return!1;var s=o.data;return 255===s[0]&&0===s[1]&&0===s[2]}r.__esModule=!0,r.default=i},{}],81:[function(t,e,r){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,s.default)()?(t[i.BLEND_MODES.NORMAL]="source-over",t[i.BLEND_MODES.ADD]="lighter",t[i.BLEND_MODES.MULTIPLY]="multiply",t[i.BLEND_MODES.SCREEN]="screen",t[i.BLEND_MODES.OVERLAY]="overlay",t[i.BLEND_MODES.DARKEN]="darken",t[i.BLEND_MODES.LIGHTEN]="lighten",t[i.BLEND_MODES.COLOR_DODGE]="color-dodge",t[i.BLEND_MODES.COLOR_BURN]="color-burn",t[i.BLEND_MODES.HARD_LIGHT]="hard-light",t[i.BLEND_MODES.SOFT_LIGHT]="soft-light",t[i.BLEND_MODES.DIFFERENCE]="difference",t[i.BLEND_MODES.EXCLUSION]="exclusion",t[i.BLEND_MODES.HUE]="hue",t[i.BLEND_MODES.SATURATION]="saturate",t[i.BLEND_MODES.COLOR]="color",t[i.BLEND_MODES.LUMINOSITY]="luminosity"):(t[i.BLEND_MODES.NORMAL]="source-over",t[i.BLEND_MODES.ADD]="lighter",t[i.BLEND_MODES.MULTIPLY]="source-over",t[i.BLEND_MODES.SCREEN]="source-over",t[i.BLEND_MODES.OVERLAY]="source-over",t[i.BLEND_MODES.DARKEN]="source-over",t[i.BLEND_MODES.LIGHTEN]="source-over",t[i.BLEND_MODES.COLOR_DODGE]="source-over",t[i.BLEND_MODES.COLOR_BURN]="source-over",t[i.BLEND_MODES.HARD_LIGHT]="source-over",t[i.BLEND_MODES.SOFT_LIGHT]="source-over",t[i.BLEND_MODES.DIFFERENCE]="source-over",t[i.BLEND_MODES.EXCLUSION]="source-over",t[i.BLEND_MODES.HUE]="source-over",t[i.BLEND_MODES.SATURATION]="source-over",t[i.BLEND_MODES.COLOR]="source-over",t[i.BLEND_MODES.LUMINOSITY]="source-over"),t[i.BLEND_MODES.NORMAL_NPM]=t[i.BLEND_MODES.NORMAL],t[i.BLEND_MODES.ADD_NPM]=t[i.BLEND_MODES.ADD],t[i.BLEND_MODES.SCREEN_NPM]=t[i.BLEND_MODES.SCREEN],t}r.__esModule=!0,r.default=n;var i=t("../../../const"),o=t("./canUseNewCanvasBlendModes"),s=function(t){return t&&t.__esModule?t:{default:t}}(o)},{"../../../const":46,"./canUseNewCanvasBlendModes":80}],82:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t("../../const"),o=t("../../settings"),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=function(){function t(e){n(this,t),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=s.default.GC_MAX_IDLE,this.checkCountMax=s.default.GC_MAX_CHECK_COUNT,this.mode=s.default.GC_MODE}return t.prototype.update=function(){this.count++,this.mode!==i.GC_MODES.MANUAL&&++this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())},t.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,r=!1,n=0;n<e.length;n++){var i=e[n];!i._glRenderTargets&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[n]=null,r=!0)}if(r){for(var o=0,s=0;s<e.length;s++)null!==e[s]&&(e[o++]=e[s]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var r=t.children.length-1;r>=0;r--)this.unload(t.children[r])},t}();r.default=a},{"../../const":46,"../../settings":101}],83:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t("pixi-gl-core"),o=t("../../const"),s=t("./utils/RenderTarget"),a=function(t){return t&&t.__esModule?t:{default:t}}(s),u=t("../../utils"),h=function(){function t(e){n(this,t),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return t.prototype.bindTexture=function(){},t.prototype.getTexture=function(){},t.prototype.updateTexture=function(t,e){var r=this.gl,n=!!t._glRenderTargets;if(!t.hasLoaded)return null;var s=this.renderer.boundTextures;if(void 0===e){e=0;for(var u=0;u<s.length;++u)if(s[u]===t){e=u;break}}s[e]=t,r.activeTexture(r.TEXTURE0+e);var h=t._glTextures[this.renderer.CONTEXT_UID];if(h)n?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):h.upload(t.source);else{if(n){var l=new a.default(this.gl,t.width,t.height,t.scaleMode,t.resolution);l.resize(t.width,t.height),t._glRenderTargets[this.renderer.CONTEXT_UID]=l,h=l.texture,this.renderer._activeRenderTarget.root||this.renderer._activeRenderTarget.frameBuffer.bind()}else h=new i.GLTexture(this.gl,null,null,null,null),h.bind(e),h.premultiplyAlpha=!0,h.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=h,t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&h.enableMipmap(),t.wrapMode===o.WRAP_MODES.CLAMP?h.enableWrapClamp():t.wrapMode===o.WRAP_MODES.REPEAT?h.enableWrapRepeat():h.enableWrapMirrorRepeat()):h.enableWrapClamp(),t.scaleMode===o.SCALE_MODES.NEAREST?h.enableNearestScaling():h.enableLinearScaling()}return h},t.prototype.destroyTexture=function(t,e){if(t=t.baseTexture||t,t.hasLoaded){var r=this.renderer,n=r.CONTEXT_UID,i=t._glTextures,o=t._glRenderTargets;if(i[n]&&(r.unbindTexture(t),i[n].destroy(),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this),delete i[n],!e)){var s=this._managedTextures.indexOf(t);-1!==s&&(0,u.removeItems)(this._managedTextures,s,1)}o&&o[n]&&(r._activeRenderTarget===o[n]&&r.bindRenderTarget(r.rootRenderTarget),o[n].destroy(),delete o[n])}},t.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},t.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this)}this._managedTextures=null},t}();r.default=h},{"../../const":46,"../../utils":125,"./utils/RenderTarget":96,"pixi-gl-core":15}],84:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../SystemRenderer"),u=n(a),h=t("./managers/MaskManager"),l=n(h),c=t("./managers/StencilManager"),d=n(c),f=t("./managers/FilterManager"),p=n(f),v=t("./utils/RenderTarget"),g=n(v),y=t("./utils/ObjectRenderer"),m=n(y),_=t("./TextureManager"),b=n(_),x=t("../../textures/BaseTexture"),T=n(x),w=t("./TextureGarbageCollector"),E=n(w),S=t("./WebGLState"),O=n(S),M=t("./utils/mapWebGLDrawModesToPixi"),P=n(M),C=t("./utils/validateContext"),R=n(C),A=t("../../utils"),I=t("pixi-gl-core"),D=n(I),L=t("../../const"),N=0,B=function(t){function e(r,n,s){i(this,e);var a=o(this,t.call(this,"WebGL",r,n,s));return a.legacy=a.options.legacy,a.legacy&&(D.default.VertexArrayObject.FORCE_NATIVE=!0),a.type=L.RENDERER_TYPE.WEBGL,a.handleContextLost=a.handleContextLost.bind(a),a.handleContextRestored=a.handleContextRestored.bind(a),a.view.addEventListener("webglcontextlost",a.handleContextLost,!1),a.view.addEventListener("webglcontextrestored",a.handleContextRestored,!1),a._contextOptions={alpha:a.transparent,antialias:a.options.antialias,premultipliedAlpha:a.transparent&&"notMultiplied"!==a.transparent,stencil:!0,preserveDrawingBuffer:a.options.preserveDrawingBuffer,powerPreference:a.options.powerPreference},a._backgroundColorRgba[3]=a.transparent?0:1,a.maskManager=new l.default(a),a.stencilManager=new d.default(a),a.emptyRenderer=new m.default(a),a.currentRenderer=a.emptyRenderer,a.textureManager=null,a.filterManager=null,a.initPlugins(),a.options.context&&(0,R.default)(a.options.context),a.gl=a.options.context||D.default.createContext(a.view,a._contextOptions),a.CONTEXT_UID=N++,a.state=new O.default(a.gl),a.renderingToScreen=!0,a.boundTextures=null,a._activeShader=null,a._activeVao=null,a._activeRenderTarget=null,a._initContext(),a.drawModes=(0,P.default)(a.gl),a._nextTextureLocation=0,a.setBlendMode(0),a}return s(e,t),e.prototype._initContext=function(){var t=this.gl;t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext();var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(e),this.emptyTextures=new Array(e),this._unknownBoundTextures=!1,this.textureManager=new b.default(this),this.filterManager=new p.default(this),this.textureGC=new E.default(this),this.state.resetToDefault(),this.rootRenderTarget=new g.default(t,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var r=new D.default.GLTexture.fromData(t,null,1,1),n={_glTextures:{}};n._glTextures[this.CONTEXT_UID]={};for(var i=0;i<e;i++){var o=new T.default;o._glTextures[this.CONTEXT_UID]=r,this.boundTextures[i]=n,this.emptyTextures[i]=o,this.bindTexture(null,i)}this.emit("context",t),this.resize(this.screen.width,this.screen.height)},e.prototype.render=function(t,e,r,n,i){if(this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,e||(this._lastObjectRendered=t),!i){var o=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=o}this.bindRenderTexture(e,n),this.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.resize=function(t,e){u.default.prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},e.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},e.prototype.clear=function(t){this._activeRenderTarget.clear(t)},e.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},e.prototype.clearRenderTexture=function(t,e){var r=t.baseTexture,n=r._glRenderTargets[this.CONTEXT_UID];return n&&n.clear(e),this},e.prototype.bindRenderTexture=function(t,e){var r=void 0;if(t){var n=t.baseTexture;n._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(n,0),this.unbindTexture(n),r=n._glRenderTargets[this.CONTEXT_UID],r.setFrame(t.frame)}else r=this.rootRenderTarget;return r.transform=e,this.bindRenderTarget(r),this},e.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&(this._activeRenderTarget=t,t.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},e.prototype.bindShader=function(t,e){return this._activeShader!==t&&(this._activeShader=t,t.bind(),!1!==e&&(t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},e.prototype.bindTexture=function(t,e,r){if(t=t||this.emptyTextures[e],t=t.baseTexture||t,t.touched=this.textureGC.count,r)e=e||0;else{for(var n=0;n<this.boundTextures.length;n++)if(this.boundTextures[n]===t)return n;void 0===e&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,e=this.boundTextures.length-this._nextTextureLocation-1)}var i=this.gl,o=t._glTextures[this.CONTEXT_UID];return o?(this.boundTextures[e]=t,i.activeTexture(i.TEXTURE0+e),i.bindTexture(i.TEXTURE_2D,o.texture)):this.textureManager.updateTexture(t,e),e},e.prototype.unbindTexture=function(t){var e=this.gl;if(t=t.baseTexture||t,this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]===this.emptyTextures[r]&&(e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[r]._glTextures[this.CONTEXT_UID].texture))}for(var n=0;n<this.boundTextures.length;n++)this.boundTextures[n]===t&&(this.boundTextures[n]=this.emptyTextures[n],e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[n]._glTextures[this.CONTEXT_UID].texture));return this},e.prototype.createVao=function(){return new D.default.VertexArrayObject(this.gl,this.state.attribState)},e.prototype.bindVao=function(t){return this._activeVao===t?this:(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t,this)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this._unknownBoundTextures=!0;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.emptyTextures[t];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},e.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),t.prototype.destroy.call(this,e),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},e}(u.default);r.default=B,A.pluginTarget.mixin(B)},{"../../const":46,"../../textures/BaseTexture":112,"../../utils":125,"../SystemRenderer":76,"./TextureGarbageCollector":82,"./TextureManager":83,"./WebGLState":85,"./managers/FilterManager":90,"./managers/MaskManager":91,"./managers/StencilManager":92,"./utils/ObjectRenderer":94,"./utils/RenderTarget":96,"./utils/mapWebGLDrawModesToPixi":99,"./utils/validateContext":100,"pixi-gl-core":15}],85:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t("./utils/mapWebGLBlendModesToPixi"),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s=function(){function t(e){n(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,o.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return t.prototype.push=function(){var t=this.stack[this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},t.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},t.prototype.setState=function(t){this.setBlend(t[0]),this.setDepthTest(t[1]),this.setFrontFace(t[2]),this.setCullFace(t[3]),this.setBlendMode(t[4])},t.prototype.setBlend=function(t){t=t?1:0,this.activeState[0]!==t&&(this.activeState[0]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},t.prototype.setBlendMode=function(t){if(t!==this.activeState[4]){this.activeState[4]=t;var e=this.blendModes[t];2===e.length?this.gl.blendFunc(e[0],e[1]):this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3])}},t.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[1]!==t&&(this.activeState[1]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(t){t=t?1:0,this.activeState[3]!==t&&(this.activeState[3]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[2]!==t&&(this.activeState[2]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},t.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var r=1;r<this.maxAttribs;r++)this.gl.disableVertexAttribArray(r)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t}();r.default=s},{"./utils/mapWebGLBlendModesToPixi":98}],86:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=t("./extractUniformsFromSrc"),a=n(s),u=t("../../../utils"),h=t("../../../const"),l=t("../../../settings"),c=n(l),d={},f=function(){function t(e,r,n){i(this,t),this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=r||t.defaultFragmentSrc,this._blendMode=h.BLEND_MODES.NORMAL,this.uniformData=n||(0,a.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var o in this.uniformData)this.uniforms[o]=this.uniformData[o].value,this.uniformData[o].type&&(this.uniformData[o].type=this.uniformData[o].type.toLowerCase());this.glShaders={},d[this.vertexSrc+this.fragmentSrc]||(d[this.vertexSrc+this.fragmentSrc]=(0,u.uid)()),this.glShaderKey=d[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=c.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}return t.prototype.apply=function(t,e,r,n,i){t.applyFilter(this,e,r,n)},o(t,[{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode=t}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),t}();r.default=f},{"../../../const":46,"../../../settings":101,"../../../utils":125,"./extractUniformsFromSrc":87}],87:[function(t,e,r){"use strict";function n(t,e,r){var n=i(t),o=i(e);return Object.assign(n,o)}function i(t){for(var e=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),r={},n=void 0,i=t.replace(/\s+/g," ").split(/\s*;\s*/),o=0;o<i.length;o++){var s=i[o].trim();if(s.indexOf("uniform")>-1){var u=s.split(" "),h=u[1],l=u[2],c=1;l.indexOf("[")>-1&&(n=l.split(/\[|]/),l=n[0],c*=Number(n[1])),l.match(e)||(r[l]={value:a(h,c),name:l,type:h})}}return r}r.__esModule=!0,r.default=n;var o=t("pixi-gl-core"),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=s.default.shader.defaultValue},{"pixi-gl-core":15}],88:[function(t,e,r){"use strict";function n(t,e,r){var n=t.identity();return n.translate(e.x/r.width,e.y/r.height),n.scale(r.width,r.height),n}function i(t,e,r){var n=t.identity();n.translate(e.x/r.width,e.y/r.height);var i=r.width/e.width,o=r.height/e.height;return n.scale(i,o),n}function o(t,e,r,n){var i=n._texture.orig,o=t.set(r.width,0,0,r.height,e.x,e.y),a=n.worldTransform.copy(s.Matrix.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/i.width,1/i.height),o.translate(n.anchor.x,n.anchor.y),o}r.__esModule=!0,r.calculateScreenSpaceMatrix=n,r.calculateNormalizedScreenSpaceMatrix=i,r.calculateSpriteMatrix=o;var s=t("../../../math")},{"../../../math":70}],89:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../Filter"),u=n(a),h=t("../../../../math"),l=(t("path"),t("../../../../textures/TextureMatrix")),c=n(l),d=function(t){function e(r){i(this,e);var n=new h.Matrix,s=o(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return r.renderable=!1,s.maskSprite=r,s.maskMatrix=n,s}return s(e,t),e.prototype.apply=function(t,e,r,n){var i=this.maskSprite,o=this.maskSprite.texture;o.valid&&(o.transform||(o.transform=new c.default(o,0)),o.transform.update(),this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.transform.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.transform.uClampFrame,t.applyFilter(this,e,r,n))},e}(u.default);r.default=d},{"../../../../math":70,"../../../../textures/TextureMatrix":116,"../Filter":86,path:8}],90:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var a=t("./WebGLManager"),u=n(a),h=t("../utils/RenderTarget"),l=n(h),c=t("../utils/Quad"),d=n(c),f=t("../../../math"),p=t("../../../Shader"),v=n(p),g=t("../filters/filterTransforms"),y=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(g),m=t("bit-twiddle"),_=n(m),b=function(){function t(){s(this,t),this.renderTarget=null,this.target=null,this.resolution=1,this.sourceFrame=new f.Rectangle,this.destinationFrame=new f.Rectangle,this.filters=[]}return t.prototype.clear=function(){this.filters=null,this.target=null,this.renderTarget=null},t}(),x=function(t){function e(r){s(this,e);var n=i(this,t.call(this,r));return n.gl=n.renderer.gl,n.quad=new d.default(n.gl,r.state.attribState),n.shaderCache={},n.pool={},n.filterData=null,n.managedFilters=[],n.renderer.on("prerender",n.onPrerender,n),n._screenWidth=r.view.width,n._screenHeight=r.view.height,n}return o(e,t),e.prototype.pushFilter=function(t,e){var r=this.renderer,n=this.filterData;if(!n){n=this.renderer._activeRenderTarget.filterStack;var i=new b;i.sourceFrame=i.destinationFrame=this.renderer._activeRenderTarget.size,i.renderTarget=r._activeRenderTarget,this.renderer._activeRenderTarget.filterData=n={index:0,stack:[i]},this.filterData=n}var o=n.stack[++n.index],s=n.stack[0].destinationFrame;o||(o=n.stack[n.index]=new b);var a=t.filterArea&&0===t.filterArea.x&&0===t.filterArea.y&&t.filterArea.width===r.screen.width&&t.filterArea.height===r.screen.height,u=e[0].resolution,h=0|e[0].padding,l=a?r.screen:t.filterArea||t.getBounds(!0),c=o.sourceFrame,d=o.destinationFrame;c.x=(l.x*u|0)/u,c.y=(l.y*u|0)/u,c.width=(l.width*u|0)/u,c.height=(l.height*u|0)/u,a||(n.stack[0].renderTarget.transform||e[0].autoFit&&c.fit(s),c.pad(h)),d.width=c.width,d.height=c.height;var f=this.getPotRenderTarget(r.gl,c.width,c.height,u);o.target=t,o.filters=e,o.resolution=u,o.renderTarget=f,f.setFrame(d,c),r.bindRenderTarget(f),f.clear()},e.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],r=t.stack[t.index];this.quad.map(r.renderTarget.size,r.sourceFrame).upload();var n=r.filters;if(1===n.length)n[0].apply(this,r.renderTarget,e.renderTarget,!1,r),this.freePotRenderTarget(r.renderTarget);else{var i=r.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,r.resolution);o.setFrame(r.destinationFrame,r.sourceFrame),o.clear();var s=0;for(s=0;s<n.length-1;++s){n[s].apply(this,i,o,!0,r);var a=i;i=o,o=a}n[s].apply(this,i,e.renderTarget,!1,r),
this.freePotRenderTarget(i),this.freePotRenderTarget(o)}r.clear(),0===--t.index&&(this.filterData=null)},e.prototype.applyFilter=function(t,e,r,n){var i=this.renderer,o=i.gl,s=t.glShaders[i.CONTEXT_UID];s||(t.glShaderKey?(s=this.shaderCache[t.glShaderKey])||(s=new v.default(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[i.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=s,this.managedFilters.push(t)):(s=t.glShaders[i.CONTEXT_UID]=new v.default(this.gl,t.vertexSrc,t.fragmentSrc),this.managedFilters.push(t)),i.bindVao(null),this.quad.initVao(s)),i.bindVao(this.quad.vao),i.bindRenderTarget(r),n&&(o.disable(o.SCISSOR_TEST),i.clear(),o.enable(o.SCISSOR_TEST)),r===i.maskManager.scissorRenderTarget&&i.maskManager.pushScissorMask(null,i.maskManager.scissorData),i.bindShader(s);var a=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=a,this.syncUniforms(s,t),i.state.setBlendMode(t.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)},e.prototype.syncUniforms=function(t,e){var r=e.uniformData,n=e.uniforms,i=1,o=void 0;if(t.uniforms.filterArea){o=this.filterData.stack[this.filterData.index];var s=t.uniforms.filterArea;s[0]=o.renderTarget.size.width,s[1]=o.renderTarget.size.height,s[2]=o.sourceFrame.x,s[3]=o.sourceFrame.y,t.uniforms.filterArea=s}if(t.uniforms.filterClamp){o=o||this.filterData.stack[this.filterData.index];var a=t.uniforms.filterClamp;a[0]=0,a[1]=0,a[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,a[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,t.uniforms.filterClamp=a}for(var u in r)if(t.uniforms.data[u]){var h=r[u].type;if("sampler2d"===h&&0!==n[u]){if(n[u].baseTexture)t.uniforms[u]=this.renderer.bindTexture(n[u].baseTexture,i);else{t.uniforms[u]=i;var l=this.renderer.gl;this.renderer.boundTextures[i]=this.renderer.emptyTextures[i],l.activeTexture(l.TEXTURE0+i),n[u].texture.bind()}i++}else if("mat3"===h)void 0!==n[u].a?t.uniforms[u]=n[u].toArray(!0):t.uniforms[u]=n[u];else if("vec2"===h)if(void 0!==n[u].x){var c=t.uniforms[u]||new Float32Array(2);c[0]=n[u].x,c[1]=n[u].y,t.uniforms[u]=c}else t.uniforms[u]=n[u];else"float"===h?t.uniforms.data[u].value!==r[u]&&(t.uniforms[u]=n[u]):t.uniforms[u]=n[u]}},e.prototype.getRenderTarget=function(t,e){var r=this.filterData.stack[this.filterData.index],n=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,e||r.resolution);return n.setFrame(r.destinationFrame,r.sourceFrame),n},e.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},e.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return y.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},e.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return y.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},e.prototype.calculateSpriteMatrix=function(t,e){var r=this.filterData.stack[this.filterData.index];return y.calculateSpriteMatrix(t,r.sourceFrame,r.renderTarget.size,e)},e.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.renderer,r=this.managedFilters;e.off("prerender",this.onPrerender,this);for(var n=0;n<r.length;n++)t||r[n].glShaders[e.CONTEXT_UID].destroy(),delete r[n].glShaders[e.CONTEXT_UID];this.shaderCache={},t?this.pool={}:this.emptyPool()},e.prototype.getPotRenderTarget=function(t,e,r,n){var i="screen";e*=n,r*=n,e===this._screenWidth&&r===this._screenHeight||(e=_.default.nextPow2(e),r=_.default.nextPow2(r),i=(65535&e)<<16|65535&r),this.pool[i]||(this.pool[i]=[]);var o=this.pool[i].pop();if(!o){var s=this.renderer.boundTextures[0];t.activeTexture(t.TEXTURE0),o=new l.default(t,e,r,null,1),t.bindTexture(t.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)}return o.resolution=n,o.defaultFrame.width=o.size.width=e/n,o.defaultFrame.height=o.size.height=r/n,o.filterPoolKey=i,o},e.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var r=0;r<e.length;r++)e[r].destroy(!0)}this.pool={}},e.prototype.freePotRenderTarget=function(t){this.pool[t.filterPoolKey].push(t)},e.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var t=this.pool.screen;if(t)for(var e=0;e<t.length;e++)t[e].destroy(!0);this.pool.screen=[]}},e}(u.default);r.default=x},{"../../../Shader":44,"../../../math":70,"../filters/filterTransforms":88,"../utils/Quad":95,"../utils/RenderTarget":96,"./WebGLManager":93,"bit-twiddle":1}],91:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("./WebGLManager"),u=n(a),h=t("../filters/spriteMask/SpriteMaskFilter"),l=n(h),c=function(t){function e(r){i(this,e);var n=o(this,t.call(this,r));return n.scissor=!1,n.scissorData=null,n.scissorRenderTarget=null,n.enableScissor=!0,n.alphaMaskPool=[],n.alphaMaskIndex=0,n}return s(e,t),e.prototype.pushMask=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var r=e.worldTransform,n=Math.atan2(r.b,r.a);n=Math.round(n*(180/Math.PI)),n%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},e.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},e.prototype.pushSpriteMask=function(t,e){var r=this.alphaMaskPool[this.alphaMaskIndex];r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new l.default(e)]),r[0].resolution=this.renderer.resolution,r[0].maskSprite=e;var n=t.filterArea;t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,r),t.filterArea=n,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},e.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},e.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},e.prototype.pushScissorMask=function(t,e){e.renderable=!0;var r=this.renderer._activeRenderTarget,n=e.getBounds();n.fit(r.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var i=this.renderer.resolution;this.renderer.gl.scissor(n.x*i,(r.root?r.size.height-n.y-n.height:n.y)*i,n.width*i,n.height*i),this.scissorRenderTarget=r,this.scissorData=e,this.scissor=!0},e.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},e}(u.default);r.default=c},{"../filters/spriteMask/SpriteMaskFilter":89,"./WebGLManager":93}],92:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("./WebGLManager"),a=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(r){n(this,e);var o=i(this,t.call(this,r));return o.stencilMaskStack=null,o}return o(e,t),e.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},e.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,r=this.stencilMaskStack.length;0===r&&e.enable(e.STENCIL_TEST),this.stencilMaskStack.push(t),e.colorMask(!1,!1,!1,!1),e.stencilFunc(e.EQUAL,r,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),this._useCurrent()},e.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0)):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(e),this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},e.prototype.destroy=function(){a.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},e}(a.default);r.default=u},{"./WebGLManager":93}],93:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(e){n(this,t),this.renderer=e,this.renderer.on("context",this.onContextChange,this)}return t.prototype.onContextChange=function(){},t.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},t}();r.default=i},{}],94:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../managers/WebGLManager"),a=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(){return n(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(t){},e}(a.default);r.default=u},{"../managers/WebGLManager":93}],95:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=t("pixi-gl-core"),s=n(o),a=t("../../../utils/createIndicesForQuads"),u=n(a),h=function(){function t(e,r){i(this,t),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var n=0;n<4;n++)this.interleaved[4*n]=this.vertices[2*n],this.interleaved[4*n+1]=this.vertices[2*n+1],this.interleaved[4*n+2]=this.uvs[2*n],this.interleaved[4*n+3]=this.uvs[2*n+1];this.indices=(0,u.default)(1),this.vertexBuffer=s.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=s.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new s.default.VertexArrayObject(e,r)}return t.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},t.prototype.map=function(t,e){var r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+e.width/t.width,this.uvs[3]=n,this.uvs[4]=r+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=r,this.uvs[7]=n+e.height/t.height,r=e.x,n=e.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+e.width,this.vertices[3]=n,this.vertices[4]=r+e.width,this.vertices[5]=n+e.height,this.vertices[6]=r,this.vertices[7]=n+e.height,this},t.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},t.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t}();r.default=h},{"../../../utils/createIndicesForQuads":123,"pixi-gl-core":15}],96:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t("../../../math"),o=t("../../../const"),s=t("../../../settings"),a=function(t){return t&&t.__esModule?t:{default:t}}(s),u=t("pixi-gl-core"),h=function(){function t(e,r,s,h,l,c){n(this,t),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new i.Rectangle(0,0,1,1),this.resolution=l||a.default.RESOLUTION,this.projectionMatrix=new i.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new i.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.filterPoolKey="",this.scaleMode=void 0!==h?h:a.default.SCALE_MODE,this.root=c||!1,this.root?(this.frameBuffer=new u.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=u.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===o.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(r,s)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||this.destinationFrame},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},t.prototype.calculateProjection=function(t,e){var r=this.projectionMatrix;e=e||t,r.identity(),this.root?(r.a=1/t.width*2,r.d=-1/t.height*2,r.tx=-1-e.x*r.a,r.ty=1-e.y*r.d):(r.a=1/t.width*2,r.d=1/t.height*2,r.tx=-1-e.x*r.a,r.ty=-1-e.y*r.d)},t.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var r=this.frame||this.size;this.calculateProjection(r)}},t.prototype.destroy=function(){this.frameBuffer.stencil&&this.gl.deleteRenderbuffer(this.frameBuffer.stencil),this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},t}();r.default=h},{"../../../const":46,"../../../math":70,"../../../settings":101,"pixi-gl-core":15}],97:[function(t,e,r){"use strict";function n(t,e){var r=!e;if(r){var n=document.createElement("canvas");n.width=1,n.height=1,e=s.default.createContext(n)}for(var o=e.createShader(e.FRAGMENT_SHADER);;){var u=a.replace(/%forloop%/gi,i(t));if(e.shaderSource(o,u),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS))break;t=t/2|0}return r&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext(),t}function i(t){for(var e="",r=0;r<t;++r)r>0&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}r.__esModule=!0,r.default=n;var o=t("pixi-gl-core"),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},{"pixi-gl-core":15}],98:[function(t,e,r){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[i.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.ADD]=[t.ONE,t.ONE],e[i.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[i.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e}r.__esModule=!0,r.default=n;var i=t("../../../const")},{"../../../const":46}],99:[function(t,e,r){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[i.DRAW_MODES.POINTS]=t.POINTS,e[i.DRAW_MODES.LINES]=t.LINES,e[i.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[i.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[i.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[i.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[i.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN,e}r.__esModule=!0,r.default=n;var i=t("../../../const")},{"../../../const":46}],100:[function(t,e,r){"use strict";function n(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}r.__esModule=!0,r.default=n},{}],101:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./utils/maxRecommendedTextures"),o=n(i),s=t("./utils/canUploadSameBuffer"),a=n(s);r.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,o.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,a.default)(),MESH_CANVAS_PADDING:0}},{"./utils/canUploadSameBuffer":122,"./utils/maxRecommendedTextures":127}],102:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("../math"),h=t("../utils"),l=t("../const"),c=t("../textures/Texture"),d=n(c),f=t("../display/Container"),p=n(f),v=new u.Point,g=function(t){function e(r){i(this,e);var n=o(this,t.call(this));return n._anchor=new u.ObservablePoint(n._onAnchorUpdate,n,r?r.defaultAnchor.x:0,r?r.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=l.BLEND_MODES.NORMAL,n.shader=null,n.cachedTint=16777215,n.texture=r||d.default.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.pluginName="sprite",n}return s(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,h.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,h.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,r=e.a,n=e.b,i=e.c,o=e.d,s=e.tx,a=e.ty,u=this.vertexData,h=t.trim,l=t.orig,c=this._anchor,d=0,f=0,p=0,v=0;h?(f=h.x-c._x*l.width,d=f+h.width,v=h.y-c._y*l.height,p=v+h.height):(f=-c._x*l.width,d=f+l.width,v=-c._y*l.height,p=v+l.height),u[0]=r*f+i*v+s,u[1]=o*v+n*f+a,u[2]=r*d+i*v+s,u[3]=o*v+n*d+a,u[4]=r*d+i*p+s,u[5]=o*p+n*d+a,u[6]=r*f+i*p+s,u[7]=o*p+n*f+a}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,r=t.orig,n=this._anchor,i=this.transform.worldTransform,o=i.a,s=i.b,a=i.c,u=i.d,h=i.tx,l=i.ty,c=-n._x*r.width,d=c+r.width,f=-n._y*r.height,p=f+r.height;e[0]=o*c+a*f+h,e[1]=u*f+s*c+l,e[2]=o*d+a*f+h,e[3]=u*f+s*d+l,e[4]=o*d+a*p+h,e[5]=u*p+s*d+l,e[6]=o*c+a*p+h,e[7]=u*p+s*c+l},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new u.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,v);var e=this._texture.orig.width,r=this._texture.orig.height,n=-e*this.anchor.x,i=0;return v.x>=n&&v.x<n+e&&(i=-r*this.anchor.y,v.y>=i&&v.y<i+r)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var r="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!r)}this._texture=null,this.shader=null},e.from=function(t){return new e(d.default.from(t))},e.fromFrame=function(t){var r=h.TextureCache[t];if(!r)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new e(r)},e.fromImage=function(t,r,n){return new e(d.default.fromImage(t,r,n))},a(e,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,h.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,h.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t||d.default.EMPTY,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),e}(p.default);r.default=g},{"../const":46,"../display/Container":48,"../math":70,"../textures/Texture":115,"../utils":125}],103:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=t("../../renderers/canvas/CanvasRenderer"),s=n(o),a=t("../../const"),u=t("../../math"),h=t("./CanvasTinter"),l=n(h),c=new u.Matrix,d=function(){function t(e){i(this,t),this.renderer=e}return t.prototype.render=function(t){var e=t._texture,r=this.renderer,n=e._frame.width,i=e._frame.height,o=t.transform.worldTransform,s=0,h=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&(r.setBlendMode(t.blendMode),e.valid)){r.context.globalAlpha=t.worldAlpha;var d=e.baseTexture.scaleMode===a.SCALE_MODES.LINEAR;r.smoothProperty&&r.context[r.smoothProperty]!==d&&(r.context[r.smoothProperty]=d),e.trim?(s=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,h=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(s=(.5-t.anchor.x)*e.orig.width,h=(.5-t.anchor.y)*e.orig.height),e.rotate&&(o.copy(c),o=c,u.GroupD8.matrixAppendRotationInv(o,e.rotate,s,h),s=0,h=0),s-=n/2,h-=i/2,r.roundPixels?(r.context.setTransform(o.a,o.b,o.c,o.d,o.tx*r.resolution|0,o.ty*r.resolution|0),s|=0,h|=0):r.context.setTransform(o.a,o.b,o.c,o.d,o.tx*r.resolution,o.ty*r.resolution);var f=e.baseTexture.resolution;16777215!==t.tint?(t.cachedTint===t.tint&&t.tintedTexture.tintId===t._texture._updateID||(t.cachedTint=t.tint,t.tintedTexture=l.default.getTintedTexture(t,t.tint)),r.context.drawImage(t.tintedTexture,0,0,n*f,i*f,s*r.resolution,h*r.resolution,n*r.resolution,i*r.resolution)):r.context.drawImage(e.baseTexture.source,e._frame.x*f,e._frame.y*f,n*f,i*f,s*r.resolution,h*r.resolution,n*r.resolution,i*r.resolution)}},t.prototype.destroy=function(){this.renderer=null},t}();r.default=d,s.default.registerPlugin("sprite",d)},{"../../const":46,"../../math":70,"../../renderers/canvas/CanvasRenderer":77,"./CanvasTinter":104}],104:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("../../utils"),i=t("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s={getTintedTexture:function(t,e){var r=t._texture;e=s.roundColor(e);var n="#"+("00000"+(0|e).toString(16)).substr(-6);r.tintCache=r.tintCache||{};var i=r.tintCache[n],o=void 0;if(i){if(i.tintId===r._updateID)return r.tintCache[n];o=r.tintCache[n]}else o=s.canvas||document.createElement("canvas");if(s.tintMethod(r,e,o),o.tintId=r._updateID,s.convertTintToImage){var a=new Image;a.src=o.toDataURL(),r.tintCache[n]=a}else r.tintCache[n]=o,s.canvas=null;return o},tintWithMultiply:function(t,e,r){var n=r.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,r.width=Math.ceil(i.width),r.height=Math.ceil(i.height),n.save(),n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="multiply",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.restore()},tintWithOverlay:function(t,e,r){var n=r.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,r.width=Math.ceil(i.width),r.height=Math.ceil(i.height),n.save(),n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.restore()},tintWithPerPixel:function(t,e,r){var i=r.getContext("2d"),o=t._frame.clone(),s=t.baseTexture.resolution;o.x*=s,o.y*=s,o.width*=s,o.height*=s,r.width=Math.ceil(o.width),r.height=Math.ceil(o.height),i.save(),i.globalCompositeOperation="copy",i.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height),i.restore();for(var a=(0,n.hex2rgb)(e),u=a[0],h=a[1],l=a[2],c=i.getImageData(0,0,o.width,o.height),d=c.data,f=0;f<d.length;f+=4)d[f+0]*=u,d[f+1]*=h,d[f+2]*=l;i.putImageData(c,0,0)},roundColor:function(t){var e=s.cacheStepsPerColorChannel,r=(0,n.hex2rgb)(t);return r[0]=Math.min(255,r[0]/e*e),r[1]=Math.min(255,r[1]/e*e),r[2]=Math.min(255,r[2]/e*e),(0,n.rgb2hex)(r)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,o.default)(),tintMethod:0};s.tintMethod=s.canUseMultiply?s.tintWithMultiply:s.tintWithPerPixel,r.default=s},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":80,"../../utils":125}],105:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(e){n(this,t),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();r.default=i},{}],106:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0
;var a=t("../../renderers/webgl/utils/ObjectRenderer"),u=n(a),h=t("../../renderers/webgl/WebGLRenderer"),l=n(h),c=t("../../utils/createIndicesForQuads"),d=n(c),f=t("./generateMultiTextureShader"),p=n(f),v=t("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),g=n(v),y=t("./BatchBuffer"),m=n(y),_=t("../../settings"),b=n(_),x=t("../../utils"),T=t("pixi-gl-core"),w=n(T),E=t("bit-twiddle"),S=n(E),O=0,M=0,P=function(t){function e(r){i(this,e);var n=o(this,t.call(this,r));n.vertSize=5,n.vertByteSize=4*n.vertSize,n.size=b.default.SPRITE_BATCH_SIZE,n.buffers=[];for(var s=1;s<=S.default.nextPow2(n.size);s*=2)n.buffers.push(new m.default(4*s*n.vertByteSize));n.indices=(0,d.default)(n.size),n.shader=null,n.currentIndex=0,n.groups=[];for(var a=0;a<n.size;a++)n.groups[a]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return n.sprites=[],n.vertexBuffers=[],n.vaos=[],n.vaoMax=2,n.vertexCount=0,n.renderer.on("prerender",n.onPrerender,n),n}return s(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),b.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,g.default)(this.MAX_TEXTURES,t)),this.shader=(0,p.default)(t,this.MAX_TEXTURES),this.indexBuffer=w.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null);for(var e=this.shader.attributes,r=0;r<this.vaoMax;r++){var n=this.vertexBuffers[r]=w.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),i=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(n,e.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(n,e.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(n,e.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);e.aTextureId&&i.addAttribute(n,e.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[r]=i}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},e.prototype.onPrerender=function(){this.vertexCount=0},e.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},e.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer.gl,e=this.MAX_TEXTURES,r=S.default.nextPow2(this.currentIndex),n=S.default.log2(r),i=this.buffers[n],o=this.sprites,s=this.groups,a=i.float32View,u=i.uint32View,h=this.boundTextures,l=this.renderer.boundTextures,c=this.renderer.textureGC.count,d=0,f=void 0,p=void 0,v=1,g=0,y=s[0],m=void 0,_=void 0,T=x.premultiplyBlendMode[o[0]._texture.baseTexture.premultipliedAlpha?1:0][o[0].blendMode];y.textureCount=0,y.start=0,y.blend=T,O++;var E=void 0;for(E=0;E<e;++E){var P=l[E];P._enabled!==O?(h[E]=P,P._virtalBoundId=E,P._enabled=O):h[E]=this.renderer.emptyTextures[E]}for(O++,E=0;E<this.currentIndex;++E){var C=o[E];o[E]=null,f=C._texture.baseTexture;var R=x.premultiplyBlendMode[Number(f.premultipliedAlpha)][C.blendMode];if(T!==R&&(T=R,p=null,g=e,O++),p!==f&&(p=f,f._enabled!==O)){if(g===e&&(O++,y.size=E-y.start,g=0,y=s[v++],y.blend=T,y.textureCount=0,y.start=E),f.touched=c,-1===f._virtalBoundId)for(var A=0;A<e;++A){var I=(A+M)%e,D=h[I];if(D._enabled!==O){M++,D._virtalBoundId=-1,f._virtalBoundId=I,h[I]=f;break}}f._enabled=O,y.textureCount++,y.ids[g]=f._virtalBoundId,y.textures[g++]=f}if(m=C.vertexData,_=C._texture._uvs.uvsUint32,this.renderer.roundPixels){var L=this.renderer.resolution;a[d]=(m[0]*L|0)/L,a[d+1]=(m[1]*L|0)/L,a[d+5]=(m[2]*L|0)/L,a[d+6]=(m[3]*L|0)/L,a[d+10]=(m[4]*L|0)/L,a[d+11]=(m[5]*L|0)/L,a[d+15]=(m[6]*L|0)/L,a[d+16]=(m[7]*L|0)/L}else a[d]=m[0],a[d+1]=m[1],a[d+5]=m[2],a[d+6]=m[3],a[d+10]=m[4],a[d+11]=m[5],a[d+15]=m[6],a[d+16]=m[7];u[d+2]=_[0],u[d+7]=_[1],u[d+12]=_[2],u[d+17]=_[3];var N=Math.min(C.worldAlpha,1),B=N<1&&f.premultipliedAlpha?(0,x.premultiplyTint)(C._tintRGB,N):C._tintRGB+(255*N<<24);u[d+3]=u[d+8]=u[d+13]=u[d+18]=B,a[d+4]=a[d+9]=a[d+14]=a[d+19]=f._virtalBoundId,d+=20}if(y.size=E-y.start,b.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var k=this.shader.attributes,F=this.vertexBuffers[this.vertexCount]=w.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),j=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(F,k.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(F,k.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(F,k.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);k.aTextureId&&j.addAttribute(F,k.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=j}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!1),this.vertexCount++}for(E=0;E<e;++E)l[E]._virtalBoundId=-1;for(E=0;E<v;++E){for(var U=s[E],X=U.textureCount,G=0;G<X;G++)p=U.textures[G],l[U.ids[G]]!==p&&this.renderer.bindTexture(p,U.ids[G],!0),p._virtalBoundId=-1;this.renderer.state.setBlendMode(U.blend),t.drawElements(t.TRIANGLES,6*U.size,t.UNSIGNED_SHORT,6*U.start*2)}this.currentIndex=0}},e.prototype.start=function(){this.renderer.bindShader(this.shader),b.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e]&&this.vertexBuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var r=0;r<this.buffers.length;++r)this.buffers[r].destroy()},e}(u.default);r.default=P,l.default.registerPlugin("sprite",P)},{"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":97,"../../settings":101,"../../utils":125,"../../utils/createIndicesForQuads":123,"./BatchBuffer":105,"./generateMultiTextureShader":107,"bit-twiddle":1,"pixi-gl-core":15}],107:[function(t,e,r){"use strict";function n(t,e){var r=a;r=r.replace(/%count%/gi,e),r=r.replace(/%forloop%/gi,i(e));for(var n=new s.default(t,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",r),o=[],u=0;u<e;u++)o[u]=u;return n.bind(),n.uniforms.uSamplers=o,n}function i(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)r>0&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"}r.__esModule=!0,r.default=n;var o=t("../../Shader"),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=(t("path"),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},{"../../Shader":44,path:8}],108:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("../sprites/Sprite"),h=n(u),l=t("../textures/Texture"),c=n(l),d=t("../math"),f=t("../utils"),p=t("../const"),v=t("../settings"),g=n(v),y=t("./TextStyle"),m=n(y),_=t("./TextMetrics"),b=n(_),x=t("../utils/trimCanvas"),T=n(x),w={texture:!0,children:!1,baseTexture:!0},E=function(t){function e(r,n,s){i(this,e),s=s||document.createElement("canvas"),s.width=3,s.height=3;var a=c.default.fromCanvas(s,g.default.SCALE_MODE,"text");a.orig=new d.Rectangle,a.trim=new d.Rectangle;var u=o(this,t.call(this,a));return c.default.addToCache(u._texture,u._texture.baseTexture.textureCacheIds[0]),u.canvas=s,u.context=u.canvas.getContext("2d"),u.resolution=g.default.RESOLUTION,u._text=null,u._style=null,u._styleListener=null,u._font="",u.text=r,u.style=n,u.localStyleID=-1,u}return s(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var r=this.context,n=b.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),i=n.width,o=n.height,s=n.lines,a=n.lineHeight,u=n.lineWidths,h=n.maxLineWidth,l=n.fontProperties;this.canvas.width=Math.ceil((Math.max(1,i)+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((Math.max(1,o)+2*e.padding)*this.resolution),r.scale(this.resolution,this.resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.strokeStyle=e.stroke,r.lineWidth=e.strokeThickness,r.textBaseline=e.textBaseline,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit;var c=void 0,d=void 0;if(e.dropShadow){r.fillStyle=e.dropShadowColor,r.globalAlpha=e.dropShadowAlpha,r.shadowBlur=e.dropShadowBlur,e.dropShadowBlur>0&&(r.shadowColor=e.dropShadowColor);for(var f=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,p=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,v=0;v<s.length;v++)c=e.strokeThickness/2,d=e.strokeThickness/2+v*a+l.ascent,"right"===e.align?c+=h-u[v]:"center"===e.align&&(c+=(h-u[v])/2),e.fill&&(this.drawLetterSpacing(s[v],c+f+e.padding,d+p+e.padding),e.stroke&&e.strokeThickness&&(r.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(s[v],c+f+e.padding,d+p+e.padding,!0),r.strokeStyle=e.stroke))}r.shadowBlur=0,r.globalAlpha=1,r.fillStyle=this._generateFillStyle(e,s);for(var g=0;g<s.length;g++)c=e.strokeThickness/2,d=e.strokeThickness/2+g*a+l.ascent,"right"===e.align?c+=h-u[g]:"center"===e.align&&(c+=(h-u[g])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(s[g],c+e.padding,d+e.padding,!0),e.fill&&this.drawLetterSpacing(s[g],c+e.padding,d+e.padding);this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this._style,o=i.letterSpacing;if(0===o)return void(n?this.context.strokeText(t,e,r):this.context.fillText(t,e,r));for(var s=String.prototype.split.call(t,""),a=e,u=0,h="",l=this.context.measureText(t).width,c=0;u<t.length;)h=s[u++],n?this.context.strokeText(h,a,r):this.context.fillText(h,a,r),c=this.context.measureText(t.substring(u)).width,a+=l-c+o,l=c},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=(0,T.default)(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var r=this._texture,n=this._style,i=n.trim?0:n.padding,o=r.baseTexture;o.hasLoaded=!0,o.resolution=this.resolution,o.realWidth=t.width,o.realHeight=t.height,o.width=t.width/this.resolution,o.height=t.height/this.resolution,r.trim.width=r._frame.width=t.width/this.resolution,r.trim.height=r._frame.height=t.height/this.resolution,r.trim.x=-i,r.trim.y=-i,r.orig.width=r._frame.width-2*i,r.orig.height=r._frame.height-2*i,this._onTextureUpdate(),o.emit("update",o),this.dirty=!1},e.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype.renderWebGL.call(this,e)},e.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._renderCanvas.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var r=void 0,n=void 0,i=void 0,o=void 0,s=this.canvas.width/this.resolution,a=this.canvas.height/this.resolution,u=t.fill.slice(),h=t.fillGradientStops.slice();if(!h.length)for(var l=u.length+1,c=1;c<l;++c)h.push(c/l);if(u.unshift(t.fill[0]),h.unshift(0),u.push(t.fill[t.fill.length-1]),h.push(1),t.fillGradientType===p.TEXT_GRADIENT.LINEAR_VERTICAL){r=this.context.createLinearGradient(s/2,0,s/2,a),n=(u.length+1)*e.length,i=0;for(var d=0;d<e.length;d++){i+=1;for(var f=0;f<u.length;f++)o="number"==typeof h[f]?h[f]/e.length+d/e.length:i/n,r.addColorStop(o,u[f]),i++}}else{r=this.context.createLinearGradient(0,a/2,s,a/2),n=u.length+1,i=1;for(var v=0;v<u.length;v++)o="number"==typeof h[v]?h[v]:i/n,r.addColorStop(o,u[v]),i++}return r},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},w,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},a(e,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,f.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,f.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){t=t||{},t instanceof m.default?this._style=t:this._style=new m.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null===t||void 0===t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(h.default);r.default=E},{"../const":46,"../math":70,"../settings":101,"../sprites/Sprite":102,"../textures/Texture":115,"../utils":125,"../utils/trimCanvas":130,"./TextMetrics":109,"./TextStyle":110}],109:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(e,r,i,o,s,a,u,h,l){n(this,t),this.text=e,this.style=r,this.width=i,this.height=o,this.lines=s,this.lineWidths=a,this.lineHeight=u,this.maxLineWidth=h,this.fontProperties=l}return t.measureText=function(e,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t._canvas;n=void 0===n||null===n?r.wordWrap:n;var o=r.toFontString(),s=t.measureFont(o),a=i.getContext("2d");a.font=o;for(var u=n?t.wordWrap(e,r,i):e,h=u.split(/(?:\r\n|\r|\n)/),l=new Array(h.length),c=0,d=0;d<h.length;d++){var f=a.measureText(h[d]).width+(h[d].length-1)*r.letterSpacing;l[d]=f,c=Math.max(c,f)}var p=c+r.strokeThickness;r.dropShadow&&(p+=r.dropShadowDistance);var v=r.lineHeight||s.fontSize+r.strokeThickness,g=Math.max(v,s.fontSize+r.strokeThickness)+(h.length-1)*(v+r.leading);return r.dropShadow&&(g+=r.dropShadowDistance),new t(e,r,p,g,h,l,v+r.leading,c,s)},t.wordWrap=function(e,r){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t._canvas,i=n.getContext("2d"),o=0,s="",a="",u={},h=r.letterSpacing,l=r.whiteSpace,c=t.collapseSpaces(l),d=t.collapseNewlines(l),f=!c,p=r.wordWrapWidth+h,v=t.tokenize(e),g=0;g<v.length;g++){var y=v[g];if(t.isNewline(y)){if(!d){a+=t.addLine(s),f=!c,s="",o=0;continue}y=" "}if(c){var m=t.isBreakingSpace(y),_=t.isBreakingSpace(s[s.length-1]);if(m&&_)continue}var b=t.getFromCache(y,h,u,i);if(b>p)if(""!==s&&(a+=t.addLine(s),s="",o=0),t.canBreakWords(y,r.breakWords))for(var x=y.split(""),T=0;T<x.length;T++){for(var w=x[T],E=1;x[T+E];){var S=x[T+E],O=w[w.length-1];if(t.canBreakChars(O,S,y,T,r.breakWords))break;w+=S,E++}T+=w.length-1;var M=t.getFromCache(w,h,u,i);M+o>p&&(a+=t.addLine(s),f=!1,s="",o=0),s+=w,o+=M}else{s.length>0&&(a+=t.addLine(s),s="",o=0);var P=g===v.length-1;a+=t.addLine(y,!P),f=!1,s="",o=0}else b+o>p&&(f=!1,a+=t.addLine(s),s="",o=0),(s.length>0||!t.isBreakingSpace(y)||f)&&(s+=y,o+=b)}return a+=t.addLine(s,!1)},t.addLine=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e=t.trimRight(e),e=r?e+"\n":e},t.getFromCache=function(t,e,r,n){var i=r[t];if(void 0===i){var o=t.length*e;i=n.measureText(t).width+o,r[t]=i}return i},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var r=e.length-1;r>=0;r--){var n=e[r];if(!t.isBreakingSpace(n))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var r=[],n="";if("string"!=typeof e)return r;for(var i=0;i<e.length;i++){var o=e[i];t.isBreakingSpace(o)||t.isNewline(o)?(""!==n&&(r.push(n),n=""),r.push(o)):n+=o}return""!==n&&r.push(n),r},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,r,n,i){return!0},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var r={},n=t._canvas,i=t._context;i.font=e;var o=t.METRICS_STRING+t.BASELINE_SYMBOL,s=Math.ceil(i.measureText(o).width),a=Math.ceil(i.measureText(t.BASELINE_SYMBOL).width),u=2*a;a=a*t.BASELINE_MULTIPLIER|0,n.width=s,n.height=u,i.fillStyle="#f00",i.fillRect(0,0,s,u),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,a);var h=i.getImageData(0,0,s,u).data,l=h.length,c=4*s,d=0,f=0,p=!1;for(d=0;d<a;++d){for(var v=0;v<c;v+=4)if(255!==h[f+v]){p=!0;break}if(p)break;f+=c}for(r.ascent=a-d,f=l-c,p=!1,d=u;d>a;--d){for(var g=0;g<c;g+=4)if(255!==h[f+g]){p=!0;break}if(p)break;f-=c}return r.descent=d-a,r.fontSize=r.ascent+r.descent,t._fonts[e]=r,r},t.clearMetrics=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?delete t._fonts[e]:t._fonts={}},t}();r.default=i;var o=document.createElement("canvas");o.width=o.height=10,i._canvas=o,i._context=o.getContext("2d"),i._fonts={},i.METRICS_STRING="|Éq",i.BASELINE_SYMBOL="M",i.BASELINE_MULTIPLIER=1.4,i._newlines=[10,13],i._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},{}],110:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return"number"==typeof t?(0,l.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function o(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=i(t[e]);return t}return i(t)}function s(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}function a(t,e,r){for(var n in r)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("../const"),l=t("../utils"),c={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:h.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},d=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],f=function(){function t(e){n(this,t),this.styleID=0,this.reset(),a(this,e,e)}return t.prototype.clone=function(){var e={};return a(e,this,c),new t(e)},t.prototype.reset=function(){a(this,c,c)},t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var r=e.length-1;r>=0;r--){var n=e[r].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&d.indexOf(n)<0&&(n='"'+n+'"'),e[r]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},u(t,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=o(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=o(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){s(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=o(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),t}();r.default=f},{"../const":46,"../utils":125}],111:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("./BaseTexture"),u=n(a),h=t("../settings"),l=n(h),c=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=arguments[2],a=arguments[3];i(this,e);var u=o(this,t.call(this,null,s));return u.resolution=a||l.default.RESOLUTION,u.width=Math.ceil(r),u.height=Math.ceil(n),u.realWidth=u.width*u.resolution,u.realHeight=u.height*u.resolution,u.scaleMode=void 0!==s?s:l.default.SCALE_MODE,u.hasLoaded=!0,u._glRenderTargets={},u._canvasRenderTarget=null,u.valid=!1,u}return s(e,t),e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.renderer=null},e}(u.default);r.default=c},{"../settings":101,"./BaseTexture":112}],112:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../utils"),u=t("../settings"),h=n(u),l=t("eventemitter3"),c=n(l),d=t("../utils/determineCrossOrigin"),f=n(d),p=t("bit-twiddle"),v=n(p),g=function(t){function e(r,n,s){i(this,e);var u=o(this,t.call(this));return u.uid=(0,a.uid)(),u.touched=0,u.resolution=s||h.default.RESOLUTION,u.width=100,u.height=100,u.realWidth=100,u.realHeight=100,u.scaleMode=void 0!==n?n:h.default.SCALE_MODE,u.hasLoaded=!1,u.isLoading=!1,u.source=null,u.origSource=null,u.imageType=null,u.sourceScale=1,u.premultipliedAlpha=!0,u.imageUrl=null,u.isPowerOfTwo=!1,u.mipmap=h.default.MIPMAP_TEXTURES,u.wrapMode=h.default.WRAP_MODE,u._glTextures={},u._enabled=0,u._virtalBoundId=-1,u._destroyed=!1,u.textureCacheIds=[],r&&u.loadSource(r),u}return s(e,t),e.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},e.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=v.default.isPow2(this.realWidth)&&v.default.isPow2(this.realHeight)},e.prototype.loadSource=function(t){var e=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null);var r=!this.source;if(this.source=t,(t.src&&t.complete||t.getContext)&&t.width&&t.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),r&&this.emit("loaded",this);else if(!t.getContext){this.isLoading=!0;var n=this;if(t.onload=function(){if(n._updateImageType(),t.onload=null,t.onerror=null,n.isLoading){if(n.isLoading=!1,n._sourceLoaded(),"svg"===n.imageType)return void n._loadSvgSource();n.emit("loaded",n)}},t.onerror=function(){t.onload=null,t.onerror=null,n.isLoading&&(n.isLoading=!1,n.emit("error",n))},t.complete&&t.src){if(t.onload=null,t.onerror=null,"svg"===n.imageType)return void n._loadSvgSource();this.isLoading=!1,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this)}}},e.prototype._updateImageType=function(){if(this.imageUrl){var t=(0,a.decomposeDataUri)(this.imageUrl),e=void 0;if(t&&"image"===t.mediaType){var r=t.subType.split("+")[0];if(!(e=(0,a.getUrlFileExtension)("."+r)))throw new Error("Invalid image type in data URI.")}else(e=(0,a.getUrlFileExtension)(this.imageUrl))||(e="png");this.imageType=e}},e.prototype._loadSvgSource=function(){if("svg"===this.imageType){var t=(0,a.decomposeDataUri)(this.imageUrl);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()}},e.prototype._loadSvgSourceUsingDataUri=function(t){var e=void 0;if("base64"===t.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");e=atob(t.data)}else e=t.data;this._loadSvgSourceUsingString(e)},e.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("GET",this.imageUrl,!0),e.send()},e.prototype._loadSvgSourceUsingString=function(t){var r=(0,a.getSvgSize)(t),n=r.width,i=r.height;if(!n||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(n*this.sourceScale),this.realHeight=Math.round(i*this.sourceScale),this._updateDimensions();var o=document.createElement("canvas");o.width=this.realWidth,o.height=this.realHeight,o._pixiId="canvas_"+(0,a.uid)(),o.getContext("2d").drawImage(this.source,0,0,n,i,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=o,e.addToCache(this,o._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},e.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},e.prototype.destroy=function(){this.imageUrl&&(delete a.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},e.fromImage=function(t,r,n,i){var o=a.BaseTextureCache[t];if(!o){var s=new Image;void 0===r&&0!==t.indexOf("data:")?s.crossOrigin=(0,f.default)(t):r&&(s.crossOrigin="string"==typeof r?r:"anonymous"),o=new e(s,n),
o.imageUrl=t,i&&(o.sourceScale=i),o.resolution=(0,a.getResolutionOfUrl)(t),s.src=t,e.addToCache(o,t)}return o},e.fromCanvas=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";t._pixiId||(t._pixiId=n+"_"+(0,a.uid)());var i=a.BaseTextureCache[t._pixiId];return i||(i=new e(t,r),e.addToCache(i,t._pixiId)),i},e.from=function(t,r,n){if("string"==typeof t)return e.fromImage(t,void 0,r,n);if(t instanceof HTMLImageElement){var i=t.src,o=a.BaseTextureCache[i];return o||(o=new e(t,r),o.imageUrl=i,n&&(o.sourceScale=n),o.resolution=(0,a.getResolutionOfUrl)(i),e.addToCache(o,i)),o}return t instanceof HTMLCanvasElement?e.fromCanvas(t,r):t},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),a.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=a.BaseTextureCache[t];if(e){var r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete a.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete a.BaseTextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},e}(c.default);r.default=g},{"../settings":101,"../utils":125,"../utils/determineCrossOrigin":124,"bit-twiddle":1,eventemitter3:3}],113:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("./BaseRenderTexture"),u=n(a),h=t("./Texture"),l=n(h),c=function(t){function e(r,n){i(this,e);var s=null;if(!(r instanceof u.default)){var a=arguments[1],h=arguments[2],l=arguments[3],c=arguments[4];console.warn("Please use RenderTexture.create("+a+", "+h+") instead of the ctor directly."),s=arguments[0],n=null,r=new u.default(a,h,l,c)}var d=o(this,t.call(this,r,n));return d.legacyRenderer=s,d.valid=!0,d._updateUvs(),d}return s(e,t),e.prototype.resize=function(t,e,r){t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r||this.baseTexture.resize(t,e),this._updateUvs()},e.create=function(t,r,n,i){return new e(new u.default(t,r,n,i))},e}(l.default);r.default=c},{"./BaseRenderTexture":111,"./Texture":115}],114:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("../"),s=t("../utils"),a=function(){function t(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n(this,t),this.baseTexture=e,this.textures={},this.animations={},this.data=r,this.resolution=this._updateResolution(i||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return i(t,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),t.prototype._updateResolution=function(t){var e=this.data.meta.scale,r=(0,s.getResolutionOfUrl)(t,null);return null===r&&(r=void 0!==e?parseFloat(e):1),1!==r&&(this.baseTexture.resolution=r,this.baseTexture.update()),r},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var r=e,n=t.BATCH_SIZE,i=this.baseTexture.sourceScale;r-e<n&&r<this._frameKeys.length;){var s=this._frameKeys[r],a=this._frames[s],u=a.frame;if(u){var h=null,l=null,c=!1!==a.trimmed&&a.sourceSize?a.sourceSize:a.frame,d=new o.Rectangle(0,0,Math.floor(c.w*i)/this.resolution,Math.floor(c.h*i)/this.resolution);h=a.rotated?new o.Rectangle(Math.floor(u.x*i)/this.resolution,Math.floor(u.y*i)/this.resolution,Math.floor(u.h*i)/this.resolution,Math.floor(u.w*i)/this.resolution):new o.Rectangle(Math.floor(u.x*i)/this.resolution,Math.floor(u.y*i)/this.resolution,Math.floor(u.w*i)/this.resolution,Math.floor(u.h*i)/this.resolution),!1!==a.trimmed&&a.spriteSourceSize&&(l=new o.Rectangle(Math.floor(a.spriteSourceSize.x*i)/this.resolution,Math.floor(a.spriteSourceSize.y*i)/this.resolution,Math.floor(u.w*i)/this.resolution,Math.floor(u.h*i)/this.resolution)),this.textures[s]=new o.Texture(this.baseTexture,h,d,l,a.rotated?2:0,a.anchor),o.Texture.addToCache(this.textures[s],s)}r++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var r=t[e],n=Array.isArray(r),i=0,r=n?r:r[Symbol.iterator]();;){var o;if(n){if(i>=r.length)break;o=r[i++]}else{if(i=r.next(),i.done)break;o=i.value}var s=o;this.animations[e].push(this.textures[s])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},t}();r.default=a},{"../":65,"../utils":125}],115:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("./BaseTexture"),l=n(h),c=t("./VideoBaseTexture"),d=n(c),f=t("./TextureUvs"),p=n(f),v=t("eventemitter3"),g=n(v),y=t("../math"),m=t("../utils"),_=t("../settings"),b=n(_),x=function(t){function e(r,n,s,a,u,h){i(this,e);var l=o(this,t.call(this));if(l.noFrame=!1,n||(l.noFrame=!0,n=new y.Rectangle(0,0,1,1)),r instanceof e&&(r=r.baseTexture),l.baseTexture=r,l._frame=n,l.trim=a,l.valid=!1,l.requiresUpdate=!1,l._uvs=null,l.orig=s||n,l._rotate=Number(u||0),!0===u)l._rotate=2;else if(l._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return r.hasLoaded?(l.noFrame&&(n=new y.Rectangle(0,0,r.width,r.height),r.on("update",l.onBaseTextureUpdated,l)),l.frame=n):r.once("loaded",l.onBaseTextureLoaded,l),l.defaultAnchor=h?new y.Point(h.x,h.y):new y.Point(0,0),l._updateID=0,l.transform=null,l.textureCacheIds=[],l}return s(e,t),e.prototype.update=function(){this.baseTexture.update()},e.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.noFrame?this.frame=new y.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},e.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},e.prototype.destroy=function(t){this.baseTexture&&(t&&(m.TextureCache[this.baseTexture.imageUrl]&&e.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},e.prototype._updateUvs=function(){this._uvs||(this._uvs=new p.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.fromImage=function(t,r,n,i){var o=m.TextureCache[t];return o||(o=new e(l.default.fromImage(t,r,n,i)),e.addToCache(o,t)),o},e.fromFrame=function(t){var e=m.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},e.fromCanvas=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new e(l.default.fromCanvas(t,r,n))},e.fromVideo=function(t,r,n,i){return"string"==typeof t?e.fromVideoUrl(t,r,n,i):new e(d.default.fromVideo(t,r,i))},e.fromVideoUrl=function(t,r,n,i){return new e(d.default.fromUrl(t,r,n,i))},e.from=function(t){if("string"==typeof t){var r=m.TextureCache[t];if(!r){return null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?e.fromVideoUrl(t):e.fromImage(t)}return r}return t instanceof HTMLImageElement?new e(l.default.from(t)):t instanceof HTMLCanvasElement?e.fromCanvas(t,b.default.SCALE_MODE,"HTMLCanvasElement"):t instanceof HTMLVideoElement?e.fromVideo(t):t instanceof l.default?new e(t):t},e.fromLoader=function(t,r,n){var i=new l.default(t,void 0,(0,m.getResolutionOfUrl)(r)),o=new e(i);return i.imageUrl=r,n||(n=r),l.default.addToCache(o.baseTexture,n),e.addToCache(o,n),n!==r&&(l.default.addToCache(o.baseTexture,r),e.addToCache(o,r)),o},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),m.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=m.TextureCache[t];if(e){var r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete m.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)m.TextureCache[t.textureCacheIds[n]]===t&&delete m.TextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},u(e,[{key:"frame",get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,n=t.width,i=t.height,o=e+n>this.baseTexture.width,s=r+i>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",u="X: "+e+" + "+n+" = "+(e+n)+" > "+this.baseTexture.width,h="Y: "+r+" + "+i+" = "+(r+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+u+" "+a+" "+h)}this.valid=n&&i&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),e}(g.default);r.default=x,x.EMPTY=new x(new l.default),a(x.EMPTY),a(x.EMPTY.baseTexture),x.WHITE=function(){var t=document.createElement("canvas");t.width=10,t.height=10;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,10,10),new x(new l.default(t))}(),a(x.WHITE),a(x.WHITE.baseTexture)},{"../math":70,"../settings":101,"../utils":125,"./BaseTexture":112,"./TextureUvs":117,"./VideoBaseTexture":118,eventemitter3:3}],116:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("../math/Matrix"),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=new s.default,u=function(){function t(e,r){n(this,t),this._texture=e,this.mapCoord=new s.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===r?.5:r}return t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,n=0;n<t.length;n+=2){var i=t[n],o=t[n+1];e[n]=i*r.a+o*r.c+r.tx,e[n+1]=i*r.b+o*r.d+r.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var n=e.orig,i=e.trim;i&&(a.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(a));var o=e.baseTexture,s=this.uClampFrame,u=this.clampMargin/o.resolution,h=this.clampOffset;return s[0]=(e._frame.x+u+h)/o.width,s[1]=(e._frame.y+u+h)/o.height,s[2]=(e._frame.x+e._frame.width-u+h)/o.width,s[3]=(e._frame.y+e._frame.height-u+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight,!0},i(t,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),t}();r.default=u},{"../math/Matrix":67}],117:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t("../math/GroupD8"),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s=function(){function t(){n(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,e,r){var n=e.width,i=e.height;if(r){var s=t.width/2/n,a=t.height/2/i,u=t.x/n+s,h=t.y/i+a;r=o.default.add(r,o.default.NW),this.x0=u+s*o.default.uX(r),this.y0=h+a*o.default.uY(r),r=o.default.add(r,2),this.x1=u+s*o.default.uX(r),this.y1=h+a*o.default.uY(r),r=o.default.add(r,2),this.x2=u+s*o.default.uX(r),this.y2=h+a*o.default.uY(r),r=o.default.add(r,2),this.x3=u+s*o.default.uX(r),this.y3=h+a*o.default.uY(r)}else this.x0=t.x/n,this.y0=t.y/i,this.x1=(t.x+t.width)/n,this.y1=t.y/i,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/i,this.x3=t.x/n,this.y3=(t.y+t.height)/i;this.uvsUint32[0]=(65535&Math.round(65535*this.y0))<<16|65535&Math.round(65535*this.x0),this.uvsUint32[1]=(65535&Math.round(65535*this.y1))<<16|65535&Math.round(65535*this.x1),this.uvsUint32[2]=(65535&Math.round(65535*this.y2))<<16|65535&Math.round(65535*this.x2),this.uvsUint32[3]=(65535&Math.round(65535*this.y3))<<16|65535&Math.round(65535*this.x3)},t}();r.default=s},{"../math/GroupD8":66}],118:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!e){var r=t.split("?").shift().toLowerCase();e="video/"+r.substr(r.lastIndexOf(".")+1)}var n=document.createElement("source");return n.src=t,n.type=e,n}r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("./BaseTexture"),l=n(h),c=t("../utils"),d=t("../ticker"),f=t("../const"),p=t("../utils/determineCrossOrigin"),v=n(p),g=function(t){function e(r,n){var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(i(this,e),!r)throw new Error("No video source element specified.");(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0);var a=o(this,t.call(this,r,n));return a.width=r.videoWidth,a.height=r.videoHeight,a._autoUpdate=!0,a._isAutoUpdating=!1,a.autoPlay=s,a.update=a.update.bind(a),a._onCanPlay=a._onCanPlay.bind(a),r.addEventListener("play",a._onPlayStart.bind(a)),r.addEventListener("pause",a._onPlayStop.bind(a)),a.hasLoaded=!1,a.__loaded=!1,a._isSourceReady()?a._onCanPlay():(r.addEventListener("canplay",a._onCanPlay),r.addEventListener("canplaythrough",a._onCanPlay)),a}return s(e,t),e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(d.shared.add(this.update,this,f.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(d.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},e.prototype.destroy=function(){this._isAutoUpdating&&d.shared.remove(this.update,this),this.source&&this.source._pixiId&&(l.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),t.prototype.destroy.call(this)},e.fromVideo=function(t,r,n){t._pixiId||(t._pixiId="video_"+(0,c.uid)());var i=c.BaseTextureCache[t._pixiId];return i||(i=new e(t,r,n),l.default.addToCache(i,t._pixiId)),i},e.fromUrl=function(t,r,n,i){var o=document.createElement("video");o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline","");var s=Array.isArray(t)?t[0].src||t[0]:t.src||t;if(void 0===n&&0!==s.indexOf("data:")?o.crossOrigin=(0,v.default)(s):n&&(o.crossOrigin="string"==typeof n?n:"anonymous"),Array.isArray(t))for(var u=0;u<t.length;++u)o.appendChild(a(t[u].src||t[u],t[u].mime));else o.appendChild(a(s,t.mime));return o.load(),e.fromVideo(o,r,i)},u(e,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(d.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(d.shared.add(this.update,this,f.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),e}(l.default);r.default=g,g.fromUrls=g.fromUrl},{"../const":46,"../ticker":121,"../utils":125,"../utils/determineCrossOrigin":124,"./BaseTexture":112}],119:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=t("../settings"),a=n(s),u=t("../const"),h=t("./TickerListener"),l=n(h),c=function(){function t(){var e=this;i(this,t),this._head=new l.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/a.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.UPDATE_PRIORITY.NORMAL;return this._addListener(new l.default(t,e,r))},t.prototype.addOnce=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.UPDATE_PRIORITY.NORMAL;return this._addListener(new l.default(t,e,r,!0))},t.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null},t.prototype.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),e=void 0;if(t>this.lastTime){e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*a.default.TARGET_FPMS*this.speed;for(var r=this._head,n=r.next;n;)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=t},o(t,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,a.default.TARGET_FPMS);this._maxElapsedMS=1/e}}]),t}();r.default=c},{"../const":46,"../settings":101,"./TickerListener":120}],120:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n(this,t),this.fn=e,this.context=r,this.priority=i,this.once=o,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}();r.default=i},{}],121:[function(t,e,r){"use strict";r.__esModule=!0,r.Ticker=r.shared=void 0;var n=t("./Ticker"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=new i.default;o.autoStart=!0,o.destroy=function(){},r.shared=o,r.Ticker=i.default},{"./Ticker":119}],122:[function(t,e,r){"use strict";function n(){return!(!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}r.__esModule=!0,r.default=n},{}],123:[function(t,e,r){"use strict";function n(t){for(var e=6*t,r=new Uint16Array(e),n=0,i=0;n<e;n+=6,i+=4)r[n+0]=i+0,r[n+1]=i+1,r[n+2]=i+2,r[n+3]=i+0,r[n+4]=i+2,r[n+5]=i+3;return r}r.__esModule=!0,r.default=n},{}],124:[function(t,e,r){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===t.indexOf("data:"))return"";e=e||window.location,s||(s=document.createElement("a")),s.href=t,t=o.default.parse(s.href);var r=!t.port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&r&&t.protocol===e.protocol?"":"anonymous"}r.__esModule=!0,r.default=n;var i=t("url"),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s=void 0},{url:38}],125:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(){return++U}function s(t,e){return e=e||[],e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function a(t){return t=t.toString(16),"#"+(t="000000".substr(0,6-t.length)+t)}function u(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}function h(t,e){var r=S.default.RETINA_PREFIX.exec(t);return r?parseFloat(r[1]):void 0!==e?e:1}function l(t){var e=w.DATA_URI.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function c(t){var e=w.URL_FILE_EXTENSION.exec(t);if(e)return e[1].toLowerCase()}function d(t){var e=w.SVG_SIZE.exec(t),r={};return e&&(r[e[1]]=Math.round(parseFloat(e[3])),r[e[5]]=Math.round(parseFloat(e[7]))),r}function f(){X=!0}function p(t){if(!X){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c PixiJS "+w.VERSION+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("PixiJS "+w.VERSION+" - "+t+" - http://www.pixijs.com/");X=!0}}function v(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!r||!r.getContextAttributes().stencil);if(r){var i=r.getExtension("WEBGL_lose_context");i&&i.loseContext()}return r=null,n}catch(t){return!1}}function g(t){return 0===t?0:t<0?-1:1}function y(){var t=void 0;for(t in G)G[t].destroy();for(t in W)W[t].destroy()}function m(){var t=void 0;for(t in G)delete G[t];for(t in W)delete W[t]}function _(t,e){return H[e?1:0][t]}function b(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var r=t>>16&255,n=t>>8&255,i=255&t;return r=r*e+.5|0,n=n*e+.5|0,i=i*e+.5|0,(255*e<<24)+(r<<16)+(n<<8)+i}function x(t,e,r,n){return r=r||new Float32Array(4),n||void 0===n?(r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e):(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=e,r}function T(t,e,r,n){return r=r||new Float32Array(4),r[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(255&t)/255,(n||void 0===n)&&(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r}r.__esModule=!0,r.premultiplyBlendMode=r.BaseTextureCache=r.TextureCache=r.earcut=r.mixins=r.pluginTarget=r.EventEmitter=r.removeItems=r.isMobile=void 0,r.uid=o,r.hex2rgb=s,r.hex2string=a,r.rgb2hex=u,r.getResolutionOfUrl=h,r.decomposeDataUri=l,r.getUrlFileExtension=c,r.getSvgSize=d,r.skipHello=f,r.sayHello=p,r.isWebGLSupported=v,r.sign=g,r.destroyTextureCache=y,r.clearTextureCache=m,r.correctBlendMode=_,r.premultiplyTint=b,r.premultiplyRgba=x,r.premultiplyTintToRgba=T;var w=t("../const"),E=t("../settings"),S=i(E),O=t("eventemitter3"),M=i(O),P=t("./pluginTarget"),C=i(P),R=t("./mixin"),A=n(R),I=t("ismobilejs"),D=n(I),L=t("remove-array-items"),N=i(L),B=t("./mapPremultipliedBlendModes"),k=i(B),F=t("earcut"),j=i(F),U=0,X=!1;r.isMobile=D,r.removeItems=N.default,r.EventEmitter=M.default,r.pluginTarget=C.default,r.mixins=A,r.earcut=j.default;var G=r.TextureCache=Object.create(null),W=r.BaseTextureCache=Object.create(null),H=r.premultiplyBlendMode=(0,k.default)()},{"../const":46,"../settings":101,"./mapPremultipliedBlendModes":126,"./mixin":128,"./pluginTarget":129,earcut:2,eventemitter3:3,ismobilejs:4,"remove-array-items":31}],126:[function(t,e,r){"use strict";function n(){for(var t=[],e=[],r=0;r<32;r++)t[r]=r,e[r]=r;t[i.BLEND_MODES.NORMAL_NPM]=i.BLEND_MODES.NORMAL,t[i.BLEND_MODES.ADD_NPM]=i.BLEND_MODES.ADD,t[i.BLEND_MODES.SCREEN_NPM]=i.BLEND_MODES.SCREEN,e[i.BLEND_MODES.NORMAL]=i.BLEND_MODES.NORMAL_NPM,e[i.BLEND_MODES.ADD]=i.BLEND_MODES.ADD_NPM,e[i.BLEND_MODES.SCREEN]=i.BLEND_MODES.SCREEN_NPM;var n=[];return n.push(e),n.push(t),n}r.__esModule=!0,r.default=n;var i=t("../const")},{"../const":46}],127:[function(t,e,r){"use strict";function n(t){return o.default.tablet||o.default.phone?4:t}r.__esModule=!0,r.default=n;var i=t("ismobilejs"),o=function(t){return t&&t.__esModule?t:{default:t}}(i)},{ismobilejs:4}],128:[function(t,e,r){"use strict";function n(t,e){if(t&&e)for(var r=Object.keys(e),n=0;n<r.length;++n){var i=r[n];Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}}function i(t,e){s.push(t,e)}function o(){for(var t=0;t<s.length;t+=2)n(s[t],s[t+1]);s.length=0}r.__esModule=!0,r.mixin=n,r.delayMixin=i,r.performMixins=o;var s=[]},{}],129:[function(t,e,r){"use strict";function n(t){t.__plugins={},t.registerPlugin=function(e,r){t.__plugins[e]=r},t.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var e in t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}r.__esModule=!0,r.default={mixin:function(t){n(t)}}},{}],130:[function(t,e,r){"use strict";function n(t){var e=t.width,r=t.height,n=t.getContext("2d"),i=n.getImageData(0,0,e,r),o=i.data,s=o.length,a={top:null,left:null,right:null,bottom:null},u=null,h=void 0,l=void 0,c=void 0;for(h=0;h<s;h+=4)0!==o[h+3]&&(l=h/4%e,c=~~(h/4/e),null===a.top&&(a.top=c),null===a.left?a.left=l:l<a.left&&(a.left=l),null===a.right?a.right=l+1:a.right<l&&(a.right=l+1),null===a.bottom?a.bottom=c:a.bottom<c&&(a.bottom=c));return null!==a.top&&(e=a.right-a.left,r=a.bottom-a.top+1,u=n.getImageData(a.left,a.top,e,r)),{height:r,width:e,data:u}}r.__esModule=!0,r.default=n},{}],131:[function(t,e,r){"use strict";function n(t){if(!o[t]){var e=(new Error).stack;void 0===e?console.warn("Deprecation Warning: ",t):(e=e.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t),console.warn(e),console.groupEnd()):(console.warn("Deprecation Warning: ",t),console.warn(e))),o[t]=!0}}function i(t){var e=t.mesh,r=t.particles,i=t.extras,o=t.filters,s=t.prepare,a=t.loaders,u=t.interaction;Object.defineProperties(t,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return n("You do not need to use a PIXI Stage any more, you can simply render any container."),t.Container}},DisplayObjectContainer:{get:function(){return n("DisplayObjectContainer has been shortened to Container, please use Container from now on."),t.Container}},Strip:{get:function(){
return n("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),e.Mesh}},Rope:{get:function(){return n("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),e.Rope}},ParticleContainer:{get:function(){return n("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),r.ParticleContainer}},MovieClip:{get:function(){return n("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),i.AnimatedSprite}},TilingSprite:{get:function(){return n("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),i.TilingSprite}},BitmapText:{get:function(){return n("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),i.BitmapText}},blendModes:{get:function(){return n("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),t.BLEND_MODES}},scaleModes:{get:function(){return n("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),t.SCALE_MODES}},BaseTextureCache:{get:function(){return n("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),t.utils.BaseTextureCache}},TextureCache:{get:function(){return n("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),t.utils.TextureCache}},math:{get:function(){return n("The math namespace is deprecated, please access members already accessible on PIXI."),t}},AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.Filter}},TransformManual:{get:function(){return n("TransformManual has been renamed to TransformBase, please update your pixi-spine"),t.TransformBase}},TARGET_FPMS:{get:function(){return n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS},set:function(e){n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS=e}},FILTER_RESOLUTION:{get:function(){return n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION},set:function(e){n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION=e}},RESOLUTION:{get:function(){return n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION},set:function(e){n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION=e}},MIPMAP_TEXTURES:{get:function(){return n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES},set:function(e){n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES=e}},SPRITE_BATCH_SIZE:{get:function(){return n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE},set:function(e){n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE=e}},SPRITE_MAX_TEXTURES:{get:function(){return n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES},set:function(e){n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES=e}},RETINA_PREFIX:{get:function(){return n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX},set:function(e){n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX=e}},DEFAULT_RENDER_OPTIONS:{get:function(){return n("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),t.settings.RENDER_OPTIONS}}});for(var h=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],l=0;l<h.length;l++)!function(e){var r=h[e];Object.defineProperty(t[r.parent],"DEFAULT",{get:function(){return n("PIXI."+r.parent+".DEFAULT has been deprecated, please use PIXI.settings."+r.target),t.settings[r.target]},set:function(e){n("PIXI."+r.parent+".DEFAULT has been deprecated, please use PIXI.settings."+r.target),t.settings[r.target]=e}})}(l);Object.defineProperties(t.settings,{PRECISION:{get:function(){return n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT},set:function(e){n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT=e}}}),i.AnimatedSprite&&Object.defineProperties(i,{MovieClip:{get:function(){return n("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),i.AnimatedSprite}}}),i&&Object.defineProperties(i,{TextureTransform:{get:function(){return n("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),t.TextureMatrix}}}),t.DisplayObject.prototype.generateTexture=function(t,e,r){return n("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),t.generateTexture(this,e,r)},t.Graphics.prototype.generateTexture=function(t,e){return n("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(t,e)},t.GroupD8.isSwapWidthHeight=function(e){return n("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),t.GroupD8.isVertical(e)},t.RenderTexture.prototype.render=function(t,e,r,i){this.legacyRenderer.render(t,this,r,e,!i),n("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},t.RenderTexture.prototype.getImage=function(t){return n("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(t)},t.RenderTexture.prototype.getBase64=function(t){return n("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(t)},t.RenderTexture.prototype.getCanvas=function(t){return n("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(t)},t.RenderTexture.prototype.getPixels=function(t){return n("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(t)},t.Sprite.prototype.setTexture=function(t){this.texture=t,n("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},i.BitmapText&&(i.BitmapText.prototype.setText=function(t){this.text=t,n("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),t.Text.prototype.setText=function(t){this.text=t,n("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},t.Text.calculateFontProperties=function(e){return n("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),t.TextMetrics.measureFont(e)},Object.defineProperties(t.Text,{fontPropertiesCache:{get:function(){return n("Text.fontPropertiesCache is deprecated"),t.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return n("Text.fontPropertiesCanvas is deprecated"),t.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return n("Text.fontPropertiesContext is deprecated"),t.TextMetrics._context}}}),t.Text.prototype.setStyle=function(t){this.style=t,n("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},t.Text.prototype.determineFontProperties=function(e){return n("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),t.TextMetrics.measureFont(e)},t.Text.getFontStyle=function(e){return n("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),e=e||{},e instanceof t.TextStyle||(e=new t.TextStyle(e)),e.toFontString()},Object.defineProperties(t.TextStyle.prototype,{font:{get:function(){n("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var t="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+t+" "+this._fontFamily},set:function(t){n("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),t.indexOf("italic")>1?this._fontStyle="italic":t.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",t.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var e=t.split(" "),r=-1;this._fontSize=26;for(var i=0;i<e.length;++i)if(e[i].match(/(px|pt|em|%)/)){r=i,this._fontSize=e[i];break}this._fontWeight="normal";for(var o=0;o<r;++o)if(e[o].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=e[o];break}if(r>-1&&r<e.length-1){this._fontFamily="";for(var s=r+1;s<e.length;++s)this._fontFamily+=e[s]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),t.Texture.prototype.setFrame=function(t){this.frame=t,n("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},t.Texture.addTextureToCache=function(e,r){t.Texture.addToCache(e,r),n("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},t.Texture.removeTextureFromCache=function(e){return n("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),t.BaseTexture.removeFromCache(e),t.Texture.removeFromCache(e)},Object.defineProperties(o,{AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.AbstractFilter}},SpriteMaskFilter:{get:function(){return n("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),t.SpriteMaskFilter}},VoidFilter:{get:function(){return n("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),o.AlphaFilter}}}),t.utils.uuid=function(){return n("utils.uuid() is deprecated, please use utils.uid() from now on."),t.utils.uid()},t.utils.canUseNewCanvasBlendModes=function(){return n("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),t.CanvasTinter.canUseMultiply};var c=!0;if(Object.defineProperty(t.utils,"_saidHello",{set:function(t){t&&(n("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),c=t},get:function(){return c}}),s.BasePrepare&&(s.BasePrepare.prototype.register=function(t,e){return n("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),t&&this.registerFindHook(t),e&&this.registerUploadHook(e),this}),s.canvas&&Object.defineProperty(s.canvas,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),s.webgl&&Object.defineProperty(s.webgl,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),a.Loader){var d=a.Resource,f=a.Loader;Object.defineProperties(d.prototype,{isJson:{get:function(){return n("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===d.TYPE.JSON}},isXml:{get:function(){return n("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===d.TYPE.XML}},isImage:{get:function(){return n("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===d.TYPE.IMAGE}},isAudio:{get:function(){return n("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===d.TYPE.AUDIO}},isVideo:{get:function(){return n("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===d.TYPE.VIDEO}}}),Object.defineProperties(f.prototype,{before:{get:function(){return n("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return n("The after() method is deprecated, please use use()."),this.use}}})}u.interactiveTarget&&Object.defineProperty(u.interactiveTarget,"defaultCursor",{set:function(t){n("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=t},get:function(){return n("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),u.InteractionManager&&(Object.defineProperty(u.InteractionManager,"defaultCursorStyle",{set:function(t){n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=t},get:function(){return n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(u.InteractionManager,"currentCursorStyle",{set:function(t){n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=t},get:function(){return n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}r.__esModule=!0,r.default=i;var o={}},{}],132:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t("../../core"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),s=new o.Rectangle,a=function(){function t(e){n(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,r=void 0,n=void 0,i=void 0,a=void 0;t&&(a=t instanceof o.RenderTexture?t:e.generateTexture(t)),a?(r=a.baseTexture._canvasRenderTarget.context,n=a.baseTexture._canvasRenderTarget.resolution,i=a.frame):(r=e.rootContext,n=e.resolution,i=s,i.width=this.renderer.width,i.height=this.renderer.height);var u=Math.floor(i.width*n+1e-4),h=Math.floor(i.height*n+1e-4),l=new o.CanvasRenderTarget(u,h,1),c=r.getImageData(i.x*n,i.y*n,u,h);return l.context.putImageData(c,0,0),l.canvas},t.prototype.pixels=function(t){var e=this.renderer,r=void 0,n=void 0,i=void 0,a=void 0;return t&&(a=t instanceof o.RenderTexture?t:e.generateTexture(t)),a?(r=a.baseTexture._canvasRenderTarget.context,n=a.baseTexture._canvasRenderTarget.resolution,i=a.frame):(r=e.rootContext,i=s,i.width=e.width,i.height=e.height),r.getImageData(0,0,i.width*n,i.height*n).data},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();r.default=a,o.CanvasRenderer.registerPlugin("extract",a)},{"../../core":65}],133:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./webgl/WebGLExtract");Object.defineProperty(r,"webgl",{enumerable:!0,get:function(){return n(i).default}});var o=t("./canvas/CanvasExtract");Object.defineProperty(r,"canvas",{enumerable:!0,get:function(){return n(o).default}})},{"./canvas/CanvasExtract":132,"./webgl/WebGLExtract":134}],134:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t("../../core"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),s=new o.Rectangle,a=function(){function t(e){n(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,r=void 0,n=void 0,i=void 0,a=!1,u=void 0,h=!1;t&&(t instanceof o.RenderTexture?u=t:(u=this.renderer.generateTexture(t),h=!0)),u?(r=u.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=r.resolution,i=u.frame,a=!1):(r=this.renderer.rootRenderTarget,n=r.resolution,a=!0,i=s,i.width=r.size.width,i.height=r.size.height);var l=Math.floor(i.width*n+1e-4),c=Math.floor(i.height*n+1e-4),d=new o.CanvasRenderTarget(l,c,1);if(r){e.bindRenderTarget(r);var f=new Uint8Array(4*l*c),p=e.gl;p.readPixels(i.x*n,i.y*n,l,c,p.RGBA,p.UNSIGNED_BYTE,f);var v=d.context.getImageData(0,0,l,c);v.data.set(f),d.context.putImageData(v,0,0),a&&(d.context.scale(1,-1),d.context.drawImage(d.canvas,0,-c))}return h&&u.destroy(!0),d.canvas},t.prototype.pixels=function(t){var e=this.renderer,r=void 0,n=void 0,i=void 0,a=void 0,u=!1;t&&(t instanceof o.RenderTexture?a=t:(a=this.renderer.generateTexture(t),u=!0)),a?(r=a.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=r.resolution,i=a.frame):(r=this.renderer.rootRenderTarget,n=r.resolution,i=s,i.width=r.size.width,i.height=r.size.height);var h=i.width*n,l=i.height*n,c=new Uint8Array(4*h*l);if(r){e.bindRenderTarget(r);var d=e.gl;d.readPixels(i.x*n,i.y*n,h,l,d.RGBA,d.UNSIGNED_BYTE,c)}return u&&a.destroy(!0),c},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();r.default=a,o.WebGLRenderer.registerPlugin("extract",a)},{"../../core":65}],135:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("../core"),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(a),h=function(t){function e(r,o){n(this,e);var s=i(this,t.call(this,r[0]instanceof u.Texture?r[0]:r[0].texture));return s._textures=null,s._durations=null,s.textures=r,s._autoUpdate=!1!==o,s.animationSpeed=1,s.loop=!0,s.updateAnchor=!1,s.onComplete=null,s.onFrameChange=null,s.onLoop=null,s._currentTime=0,s.playing=!1,s}return o(e,t),e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&u.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&u.ticker.shared.add(this.update,this,u.UPDATE_PRIORITY.HIGH))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,r=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r?this.onLoop():this.animationSpeed<0&&this.currentFrame>r&&this.onLoop()),this.updateTexture())},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.updateAnchor&&this._anchor.copy(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e)},e.fromFrames=function(t){for(var r=[],n=0;n<t.length;++n)r.push(u.Texture.fromFrame(t[n]));return new e(r)},e.fromImages=function(t){for(var r=[],n=0;n<t.length;++n)r.push(u.Texture.fromImage(t[n]));return new e(r)},s(e,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof u.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),e}(u.Sprite);r.default=h},{"../core":65}],136:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("../core"),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(u),l=t("../core/math/ObservablePoint"),c=n(l),d=t("../core/utils"),f=t("../core/settings"),p=n(f),v=function(t){function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e);var s=o(this,t.call(this));return s._textWidth=0,s._textHeight=0,s._glyphs=[],s._font={tint:void 0!==n.tint?n.tint:16777215,align:n.align||"left",name:null,size:0},s.font=n.font,s._text=r,s._maxWidth=0,s._maxLineHeight=0,s._letterSpacing=0,s._anchor=new c.default(function(){s.dirty=!0},s,0,0),s.dirty=!1,s.updateText(),s}return s(e,t),e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],r=this._font.size/t.size,n=new h.Point,i=[],o=[],s=this.text.replace(/(?:\r\n|\r)/g,"\n"),a=s.length,u=this._maxWidth*t.size/this._font.size,l=null,c=0,d=0,f=0,p=-1,v=0,g=0,y=0,m=0;m<a;m++){var _=s.charCodeAt(m),b=s.charAt(m);if(/(?:\s)/.test(b)&&(p=m,v=c),"\r"!==b&&"\n"!==b){var x=t.chars[_];x&&(l&&x.kerning[l]&&(n.x+=x.kerning[l]),i.push({texture:x.texture,line:f,charCode:_,position:new h.Point(n.x+x.xOffset+this._letterSpacing/2,n.y+x.yOffset)}),n.x+=x.xAdvance+this._letterSpacing,c=n.x,y=Math.max(y,x.yOffset+x.texture.height),l=_,-1!==p&&u>0&&n.x>u&&(++g,h.utils.removeItems(i,1+p-g,1+m-p),m=p,p=-1,o.push(v),d=Math.max(d,v),f++,n.x=0,n.y+=t.lineHeight,l=null))}else o.push(c),d=Math.max(d,c),++f,++g,n.x=0,n.y+=t.lineHeight,l=null}var T=s.charAt(s.length-1);"\r"!==T&&"\n"!==T&&(/(?:\s)/.test(T)&&(c=v),o.push(c),d=Math.max(d,c));for(var w=[],E=0;E<=f;E++){var S=0;"right"===this._font.align?S=d-o[E]:"center"===this._font.align&&(S=(d-o[E])/2),w.push(S)}for(var O=i.length,M=this.tint,P=0;P<O;P++){var C=this._glyphs[P];C?C.texture=i[P].texture:(C=new h.Sprite(i[P].texture),this._glyphs.push(C)),C.position.x=(i[P].position.x+w[i[P].line])*r,C.position.y=i[P].position.y*r,C.scale.x=C.scale.y=r,C.tint=M,C.parent||this.addChild(C)}for(var R=O;R<this._glyphs.length;++R)this.removeChild(this._glyphs[R]);if(this._textWidth=d*r,this._textHeight=(n.y+t.lineHeight)*r,0!==this.anchor.x||0!==this.anchor.y)for(var A=0;A<O;A++)this._glyphs[A].x-=this._textWidth*this.anchor.x,this._glyphs[A].y-=this._textHeight*this.anchor.y;this._maxLineHeight=y*r},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},e.registerFont=function(t,r){var n={},i=t.getElementsByTagName("info")[0],o=t.getElementsByTagName("common")[0],s=t.getElementsByTagName("page"),a=(0,d.getResolutionOfUrl)(s[0].getAttribute("file"),p.default.RESOLUTION),u={};n.font=i.getAttribute("face"),n.size=parseInt(i.getAttribute("size"),10),n.lineHeight=parseInt(o.getAttribute("lineHeight"),10)/a,n.chars={},r instanceof h.Texture&&(r=[r]);for(var l=0;l<s.length;l++){var c=s[l].getAttribute("id"),f=s[l].getAttribute("file");u[c]=r instanceof Array?r[l]:r[f]}for(var v=t.getElementsByTagName("char"),g=0;g<v.length;g++){var y=v[g],m=parseInt(y.getAttribute("id"),10),_=y.getAttribute("page")||0,b=new h.Rectangle(parseInt(y.getAttribute("x"),10)/a+u[_].frame.x/a,parseInt(y.getAttribute("y"),10)/a+u[_].frame.y/a,parseInt(y.getAttribute("width"),10)/a,parseInt(y.getAttribute("height"),10)/a);n.chars[m]={xOffset:parseInt(y.getAttribute("xoffset"),10)/a,yOffset:parseInt(y.getAttribute("yoffset"),10)/a,xAdvance:parseInt(y.getAttribute("xadvance"),10)/a,kerning:{},texture:new h.Texture(u[_].baseTexture,b),page:_}}for(var x=t.getElementsByTagName("kerning"),T=0;T<x.length;T++){var w=x[T],E=parseInt(w.getAttribute("first"),10)/a,S=parseInt(w.getAttribute("second"),10)/a,O=parseInt(w.getAttribute("amount"),10)/a;n.chars[S]&&(n.chars[S].kerning[E]=O)}return e.fonts[n.font]=n,n},a(e,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),e}(h.Container);r.default=v,v.fonts={}},{"../core":65,"../core/math/ObservablePoint":68,"../core/settings":101,"../core/utils":125}],137:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("../core"),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(a),h=t("../core/sprites/canvas/CanvasTinter"),l=function(t){return t&&t.__esModule?t:{default:t}}(h),c=new u.Point,d=function(t){function e(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;n(this,e);var a=i(this,t.call(this,r));return a.tileTransform=new u.TransformStatic,a._width=o,a._height=s,a._canvasPattern=null,a.uvTransform=r.transform||new u.TextureMatrix(r),a.pluginName="tilingSprite",a.uvRespectAnchor=!1,a}return o(e,t),e.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},e.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var r=t.context,n=this.worldTransform,i=t.resolution,o=2===e.rotate,s=e.baseTexture,a=s.resolution,h=this.tilePosition.x/this.tileScale.x%e.orig.width*a,c=this.tilePosition.y/this.tileScale.y%e.orig.height*a;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var d=new u.CanvasRenderTarget(e.orig.width,e.orig.height,a);if(16777215!==this.tint)this.tintedTexture=l.default.getTintedTexture(this,this.tint),d.context.drawImage(this.tintedTexture,0,0);else{var f=e._frame.x*a,p=e._frame.y*a,v=e._frame.width*a,g=e._frame.height*a,y=(e.trim?e.trim.width:e.orig.width)*a,m=(e.trim?e.trim.height:e.orig.height)*a,_=(e.trim?e.trim.x:0)*a,b=(e.trim?e.trim.y:0)*a;o?(d.context.rotate(-Math.PI/2),d.context.translate(-m,0),d.context.drawImage(s.source,f,p,v,g,-b,_,m,y)):d.context.drawImage(s.source,f,p,v,g,_,b,y,m)}this.cachedTint=this.tint,this._canvasPattern=d.context.createPattern(d.canvas,"repeat")}r.globalAlpha=this.worldAlpha,r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),t.setBlendMode(this.blendMode),r.fillStyle=this._canvasPattern,r.scale(this.tileScale.x/a,this.tileScale.y/a);var x=this.anchor.x*-this._width*a,T=this.anchor.y*-this._height*a;this.uvRespectAnchor?(r.translate(h,c),
r.fillRect(-h+x,-c+T,this._width/this.tileScale.x*a,this._height/this.tileScale.y*a)):(r.translate(h+x,c+T),r.fillRect(-h,-c,this._width/this.tileScale.x*a,this._height/this.tileScale.y*a))}},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,r,n)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new u.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,c);var e=this._width,r=this._height,n=-e*this.anchor._x;if(c.x>=n&&c.x<n+e){var i=-r*this.anchor._y;if(c.y>=i&&c.y<i+r)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvTransform=null},e.from=function(t,r,n){return new e(u.Texture.from(t),r,n)},e.fromFrame=function(t,r,n){var i=u.utils.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(i,r,n)},e.fromImage=function(t,r,n,i,o){return new e(u.Texture.fromImage(t,i,o),r,n)},s(e,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),e}(u.Sprite);r.default=d},{"../core":65,"../core/sprites/canvas/CanvasTinter":104}],138:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=t("../core"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(o),a=t("../core/textures/Texture"),u=n(a),h=t("../core/textures/BaseTexture"),l=n(h),c=t("../core/utils"),d=s.DisplayObject,f=new s.Matrix;d.prototype._cacheAsBitmap=!1,d.prototype._cacheData=!1;var p=function t(){i(this,t),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(d.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e=void 0;t?(this._cacheData||(this._cacheData=new p),e=this._cacheData,e.originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),d.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},d.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var r=this.getLocalBounds().clone();if(this._filters&&this._filters.length){var n=this._filters[0].padding;r.pad(n)}r.ceil(s.settings.RESOLUTION);var i=t._activeRenderTarget,o=t.filterManager.filterStack,a=s.RenderTexture.create(r.width,r.height),h="cacheAsBitmap_"+(0,c.uid)();this._cacheData.textureCacheId=h,l.default.addToCache(a.baseTexture,h),u.default.addToCache(a,h);var d=f;d.tx=-r.x,d.ty=-r.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,a,!0,d,!0),t.bindRenderTarget(i),t.filterManager.filterStack=o,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var p=new s.Sprite(a);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-r.x/r.width,p.anchor.y=-r.y/r.height,p.alpha=e,p._bounds=this._bounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=p.containsPoint.bind(p)}},d.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},d.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),r=this.alpha;this.alpha=1;var n=t.context;e.ceil(s.settings.RESOLUTION);var i=s.RenderTexture.create(e.width,e.height),o="cacheAsBitmap_"+(0,c.uid)();this._cacheData.textureCacheId=o,l.default.addToCache(i.baseTexture,o),u.default.addToCache(i,o);var a=f;this.transform.localTransform.copy(a),a.invert(),a.tx-=e.x,a.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,i,!0,a,!1),t.context=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var h=new s.Sprite(i);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-e.x/e.width,h.anchor.y=-e.y/e.height,h.alpha=r,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)}},d.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._lastBoundsID=this._boundsID},d.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},d.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,l.default.removeFromCache(this._cacheData.textureCacheId),u.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},d.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}},{"../core":65,"../core/textures/BaseTexture":112,"../core/textures/Texture":115,"../core/utils":125}],139:[function(t,e,r){"use strict";var n=t("../core"),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(n);i.DisplayObject.prototype.name=null,i.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},{"../core":65}],140:[function(t,e,r){"use strict";var n=t("../core"),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(n);i.DisplayObject.prototype.getGlobalPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new i.Point,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},{"../core":65}],141:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.BitmapText=r.TilingSpriteRenderer=r.TilingSprite=r.AnimatedSprite=void 0;var i=t("./AnimatedSprite");Object.defineProperty(r,"AnimatedSprite",{enumerable:!0,get:function(){return n(i).default}});var o=t("./TilingSprite");Object.defineProperty(r,"TilingSprite",{enumerable:!0,get:function(){return n(o).default}});var s=t("./webgl/TilingSpriteRenderer");Object.defineProperty(r,"TilingSpriteRenderer",{enumerable:!0,get:function(){return n(s).default}});var a=t("./BitmapText");Object.defineProperty(r,"BitmapText",{enumerable:!0,get:function(){return n(a).default}}),t("./cacheAsBitmap"),t("./getChildByName"),t("./getGlobalPosition")},{"./AnimatedSprite":135,"./BitmapText":136,"./TilingSprite":137,"./cacheAsBitmap":138,"./getChildByName":139,"./getGlobalPosition":140,"./webgl/TilingSpriteRenderer":142}],142:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../../core"),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(s),u=t("../../core/const"),h=(t("path"),new a.Matrix),l=function(t){function e(r){n(this,e);var o=i(this,t.call(this,r));return o.shader=null,o.simpleShader=null,o.quad=null,o}return o(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new a.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new a.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new a.Quad(t,this.renderer.state.attribState),this.quad.initVao(this.shader)},e.prototype.render=function(t){var e=this.renderer,r=this.quad;e.bindVao(r.vao);var n=r.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&(n=r.uvs,n[0]=n[6]=-t.anchor.x,n[1]=n[3]=-t.anchor.y,n[2]=n[4]=1-t.anchor.x,n[5]=n[7]=1-t.anchor.y),r.upload();var i=t._texture,o=i.baseTexture,s=t.tileTransform.localTransform,l=t.uvTransform,c=o.isPowerOfTwo&&i.frame.width===o.width&&i.frame.height===o.height;c&&(o._glTextures[e.CONTEXT_UID]?c=o.wrapMode!==u.WRAP_MODES.CLAMP:o.wrapMode===u.WRAP_MODES.CLAMP&&(o.wrapMode=u.WRAP_MODES.REPEAT));var d=c?this.simpleShader:this.shader;e.bindShader(d);var f=i.width,p=i.height,v=t._width,g=t._height;h.set(s.a*f/v,s.b*f/g,s.c*p/v,s.d*p/g,s.tx/v,s.ty/g),h.invert(),c?h.prepend(l.mapCoord):(d.uniforms.uMapCoord=l.mapCoord.toArray(!0),d.uniforms.uClampFrame=l.uClampFrame,d.uniforms.uClampOffset=l.uClampOffset),d.uniforms.uTransform=h.toArray(!0),d.uniforms.uColor=a.utils.premultiplyTintToRgba(t.tint,t.worldAlpha,d.uniforms.uColor,o.premultipliedAlpha),d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.uSampler=e.bindTexture(i),e.setBlendMode(a.utils.correctBlendMode(t.blendMode,o.premultipliedAlpha)),r.vao.draw(this.renderer.gl.TRIANGLES,6,0)},e}(a.ObjectRenderer);r.default=l,a.WebGLRenderer.registerPlugin("tilingSprite",l)},{"../../core":65,"../../core/const":46,path:8}],143:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("../../core"),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(a),h=(t("path"),function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;n(this,e);var o=i(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));return o.alpha=r,o.glShaderKey="alpha",o}return o(e,t),s(e,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(u.Filter));r.default=h},{"../../core":65,path:8}],144:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("../../core"),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(u),l=t("./BlurXFilter"),c=n(l),d=t("./BlurYFilter"),f=n(d),p=function(t){function e(r,n,s,a){i(this,e);var u=o(this,t.call(this));return u.blurXFilter=new c.default(r,n,s,a),u.blurYFilter=new f.default(r,n,s,a),u.padding=0,u.resolution=s||h.settings.RESOLUTION,u.quality=n||4,u.blur=r||8,u}return s(e,t),e.prototype.apply=function(t,e,r){var n=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,n,!0),this.blurYFilter.apply(t,n,r,!1),t.returnRenderTarget(n)},a(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(t){this.blurYFilter._blendMode=t}}]),e}(h.Filter);r.default=p},{"../../core":65,"./BlurXFilter":145,"./BlurYFilter":146}],145:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("../../core"),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(u),l=t("./generateBlurVertSource"),c=n(l),d=t("./generateBlurFragSource"),f=n(d),p=t("./getMaxBlurKernelSize"),v=n(p),g=function(t){function e(r,n,s,a){i(this,e),a=a||5;var u=(0,c.default)(a,!0),l=(0,f.default)(a),d=o(this,t.call(this,u,l));return d.resolution=s||h.settings.RESOLUTION,d._quality=0,d.quality=n||4,d.strength=r||8,d.firstRun=!0,d}return s(e,t),e.prototype.apply=function(t,e,r,n){if(this.firstRun){var i=t.renderer.gl,o=(0,v.default)(i);this.vertexSrc=(0,c.default)(o,!0),this.fragmentSrc=(0,f.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/r.size.width*(r.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,n);else{for(var s=t.getRenderTarget(!0),a=e,u=s,h=0;h<this.passes-1;h++){t.applyFilter(this,a,u,!0);var l=u;u=a,a=l}t.applyFilter(this,a,r,n),t.returnRenderTarget(s)}},a(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(h.Filter);r.default=g},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],146:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("../../core"),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(u),l=t("./generateBlurVertSource"),c=n(l),d=t("./generateBlurFragSource"),f=n(d),p=t("./getMaxBlurKernelSize"),v=n(p),g=function(t){function e(r,n,s,a){i(this,e),a=a||5;var u=(0,c.default)(a,!1),l=(0,f.default)(a),d=o(this,t.call(this,u,l));return d.resolution=s||h.settings.RESOLUTION,d._quality=0,d.quality=n||4,d.strength=r||8,d.firstRun=!0,d}return s(e,t),e.prototype.apply=function(t,e,r,n){if(this.firstRun){var i=t.renderer.gl,o=(0,v.default)(i);this.vertexSrc=(0,c.default)(o,!1),this.fragmentSrc=(0,f.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/r.size.height*(r.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,n);else{for(var s=t.getRenderTarget(!0),a=e,u=s,h=0;h<this.passes-1;h++){t.applyFilter(this,a,u,!0);var l=u;u=a,a=l}t.applyFilter(this,a,r,n),t.returnRenderTarget(s)}},a(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(h.Filter);r.default=g},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],147:[function(t,e,r){"use strict";function n(t){for(var e=i[t],r=e.length,n=o,s="",a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",u=void 0,h=0;h<t;h++){var l=a.replace("%index%",h);u=h,h>=r&&(u=t-h-1),l=l.replace("%value%",e[u]),s+=l,s+="\n"}return n=n.replace("%blur%",s),n=n.replace("%size%",t)}r.__esModule=!0,r.default=n;var i={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},o=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},{}],148:[function(t,e,r){"use strict";function n(t,e){var r=Math.ceil(t/2),n=i,o="",s=void 0;s=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<t;a++){var u=s.replace("%index%",a);u=u.replace("%sampleIndex%",a-(r-1)+".0"),o+=u,o+="\n"}return n=n.replace("%blur%",o),n=n.replace("%size%",t)}r.__esModule=!0,r.default=n;var i=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},{}],149:[function(t,e,r){"use strict";function n(t){for(var e=t.getParameter(t.MAX_VARYING_VECTORS),r=15;r>e;)r-=2;return r}r.__esModule=!0,r.default=n},{}],150:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("../../core"),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(a),h=(t("path"),function(t){function e(){n(this,e);var r=i(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return r.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],r.alpha=1,r}return o(e,t),e.prototype._loadMatrix=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t;e&&(this._multiply(r,this.uniforms.m,t),r=this._colorMatrix(r)),this.uniforms.m=r},e.prototype._multiply=function(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19]+e[4],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19]+e[9],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19]+e[14],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.greyscale=function(t,e){var r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.blackAndWhite=function(t){var e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var r=Math.cos(t),n=Math.sin(t),i=Math.sqrt,o=1/3,s=i(o),a=r+(1-r)*o,u=o*(1-r)-s*n,h=o*(1-r)+s*n,l=o*(1-r)+s*n,c=r+o*(1-r),d=o*(1-r)-s*n,f=o*(1-r)-s*n,p=o*(1-r)+s*n,v=r+o*(1-r),g=[a,u,h,0,0,l,c,d,0,0,f,p,v,0,0,0,0,0,1,0];this._loadMatrix(g,e)},e.prototype.contrast=function(t,e){var r=(t||0)+1,n=-.5*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.saturate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],r=2*t/3+1,n=-.5*(r-1),i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){var e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.sepia=function(t){var e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.technicolor=function(t){var e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.polaroid=function(t){var e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.toBGR=function(t){var e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.kodachrome=function(t){var e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.browni=function(t){var e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.vintage=function(t){var e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.colorTone=function(t,e,r,n,i){t=t||.2,e=e||.15,r=r||16770432,n=n||3375104;var o=(r>>16&255)/255,s=(r>>8&255)/255,a=(255&r)/255,u=(n>>16&255)/255,h=(n>>8&255)/255,l=(255&n)/255,c=[.3,.59,.11,0,0,o,s,a,t,0,u,h,l,e,0,o-u,s-h,a-l,0,0];this._loadMatrix(c,i)},e.prototype.night=function(t,e){t=t||.1;var r=[-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.predator=function(t,e){
var r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.lsd=function(t){var e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},s(e,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(u.Filter));r.default=h,h.prototype.grayscale=h.prototype.greyscale},{"../../core":65,path:8}],151:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("../../core"),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(a),h=(t("path"),function(t){function e(r,o){n(this,e);var s=new u.Matrix;r.renderable=!1;var a=i(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return a.maskSprite=r,a.maskMatrix=s,a.uniforms.mapSampler=r._texture,a.uniforms.filterMatrix=s,a.uniforms.scale={x:1,y:1},null!==o&&void 0!==o||(o=20),a.scale=new u.Point(o,o),a}return o(e,t),e.prototype.apply=function(t,e,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,t.applyFilter(this,e,r)},s(e,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),e}(u.Filter));r.default=h},{"../../core":65,path:8}],152:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../../core"),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(s),u=(t("path"),function(t){function e(){return n(this,e),i(this,t.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return o(e,t),e}(a.Filter));r.default=u},{"../../core":65,path:8}],153:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./fxaa/FXAAFilter");Object.defineProperty(r,"FXAAFilter",{enumerable:!0,get:function(){return n(i).default}});var o=t("./noise/NoiseFilter");Object.defineProperty(r,"NoiseFilter",{enumerable:!0,get:function(){return n(o).default}});var s=t("./displacement/DisplacementFilter");Object.defineProperty(r,"DisplacementFilter",{enumerable:!0,get:function(){return n(s).default}});var a=t("./blur/BlurFilter");Object.defineProperty(r,"BlurFilter",{enumerable:!0,get:function(){return n(a).default}});var u=t("./blur/BlurXFilter");Object.defineProperty(r,"BlurXFilter",{enumerable:!0,get:function(){return n(u).default}});var h=t("./blur/BlurYFilter");Object.defineProperty(r,"BlurYFilter",{enumerable:!0,get:function(){return n(h).default}});var l=t("./colormatrix/ColorMatrixFilter");Object.defineProperty(r,"ColorMatrixFilter",{enumerable:!0,get:function(){return n(l).default}});var c=t("./alpha/AlphaFilter");Object.defineProperty(r,"AlphaFilter",{enumerable:!0,get:function(){return n(c).default}})},{"./alpha/AlphaFilter":143,"./blur/BlurFilter":144,"./blur/BlurXFilter":145,"./blur/BlurYFilter":146,"./colormatrix/ColorMatrixFilter":150,"./displacement/DisplacementFilter":151,"./fxaa/FXAAFilter":152,"./noise/NoiseFilter":154}],154:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("../../core"),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(a),h=(t("path"),function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();n(this,e);var s=i(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return s.noise=r,s.seed=o,s}return o(e,t),s(e,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t}}]),e}(u.Filter));r.default=h},{"../../core":65,path:8}],155:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("../core"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(o),a=function(){function t(){n(this,t),this.global=new s.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return t.prototype.getLocalPosition=function(t,e,r){return t.worldTransform.applyInverse(r||this.global,e)},t.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},i(t,[{key:"pointerId",get:function(){return this.identifier}}]),t}();r.default=a},{"../core":65}],156:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(){n(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0},t.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},t}();r.default=i},{}],157:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=t("../core"),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(u),l=t("./InteractionData"),c=n(l),d=t("./InteractionEvent"),f=n(d),p=t("./InteractionTrackingData"),v=n(p),g=t("eventemitter3"),y=n(g),m=t("./interactiveTarget"),_=n(m);h.utils.mixins.delayMixin(h.DisplayObject.prototype,_.default);var b=1,x={target:null,data:{global:null}},T=function(t){function e(r,n){i(this,e);var s=o(this,t.call(this));return n=n||{},s.renderer=r,s.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,s.interactionFrequency=n.interactionFrequency||10,s.mouse=new c.default,s.mouse.identifier=b,s.mouse.global.set(-999999),s.activeInteractionData={},s.activeInteractionData[b]=s.mouse,s.interactionDataPool=[],s.eventData=new f.default,s.interactionDOMElement=null,s.moveWhenInside=!1,s.eventsAdded=!1,s.mouseOverRenderer=!1,s.supportsTouchEvents="ontouchstart"in window,s.supportsPointerEvents=!!window.PointerEvent,s.onPointerUp=s.onPointerUp.bind(s),s.processPointerUp=s.processPointerUp.bind(s),s.onPointerCancel=s.onPointerCancel.bind(s),s.processPointerCancel=s.processPointerCancel.bind(s),s.onPointerDown=s.onPointerDown.bind(s),s.processPointerDown=s.processPointerDown.bind(s),s.onPointerMove=s.onPointerMove.bind(s),s.processPointerMove=s.processPointerMove.bind(s),s.onPointerOut=s.onPointerOut.bind(s),s.processPointerOverOut=s.processPointerOverOut.bind(s),s.onPointerOver=s.onPointerOver.bind(s),s.cursorStyles={default:"inherit",pointer:"pointer"},s.currentCursorMode=null,s.cursor=null,s._tempPoint=new h.Point,s.resolution=1,s.setTargetElement(s.renderer.view,s.renderer.resolution),s}return s(e,t),e.prototype.hitTest=function(t,e){return x.target=null,x.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(x,e,null,!0),x.target},e.prototype.setTargetElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(h.ticker.shared.add(this.update,this,h.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(h.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor=null;for(var e in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var r=this.activeInteractionData[e];if(r.originalEvent&&"touch"!==r.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,r.originalEvent,r);this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(void 0===e?"undefined":a(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,r){r.stopped||(r.currentTarget=t,r.type=e,t.emit(e,r),t[e]&&t[e](r))},e.prototype.mapPositionToPoint=function(t,e,r){var n=void 0;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var i=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)*i,t.y=(r-n.top)*(this.interactionDOMElement.height/n.height)*i},e.prototype.processInteractive=function(t,e,r,n,i){if(!e||!e.visible)return!1;var o=t.data.global;i=e.interactive||i;var s=!1,a=i,u=!0;if(e.hitArea?(n&&(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(n=!1,u=!1)),a=!1):e._mask&&n&&(e._mask.containsPoint(o)||(n=!1,u=!1)),u&&e.interactiveChildren&&e.children)for(var h=e.children,l=h.length-1;l>=0;l--){var c=h[l],d=this.processInteractive(t,c,r,n,a);if(d){if(!c.parent)continue;a=!1,d&&(t.target&&(n=!1),s=!0)}}return i&&(n&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(o)&&(s=!0),e.interactive&&(s&&!t.target&&(t.target=e),r&&r(t,e,!!s))),s},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault();for(var r=e.length,n=0;n<r;n++){var i=e[n],o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);if(s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===i.pointerType)this.emit("touchstart",s);else if("mouse"===i.pointerType||"pen"===i.pointerType){var a=2===i.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,r){var n=t.data,i=t.data.identifier;if(r)if(e.trackedPointers[i]||(e.trackedPointers[i]=new v.default(i)),this.dispatchEvent(e,"pointerdown",t),"touch"===n.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===n.pointerType||"pen"===n.pointerType){var o=2===n.button;o?e.trackedPointers[i].rightDown=!0:e.trackedPointers[i].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,r){for(var n=this.normalizeToPointerData(t),i=n.length,o=t.target!==this.interactionDOMElement?"outside":"",s=0;s<i;s++){var a=n[s],u=this.getInteractionDataForPointerId(a),h=this.configureInteractionEventForDOMEvent(this.eventData,a,u);if(h.data.originalEvent=t,this.processInteractive(h,this.renderer._lastObjectRendered,r,e||!o),this.emit(e?"pointercancel":"pointerup"+o,h),"mouse"===a.pointerType||"pen"===a.pointerType){var l=2===a.button;this.emit(l?"rightup"+o:"mouseup"+o,h)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,h),this.releaseInteractionDataForPointerId(a.pointerId,u))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var r=t.data,n=t.data.identifier;void 0!==e.trackedPointers[n]&&(delete e.trackedPointers[n],this.dispatchEvent(e,"pointercancel",t),"touch"===r.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,r){var n=t.data,i=t.data.identifier,o=e.trackedPointers[i],s="touch"===n.pointerType,a="mouse"===n.pointerType||"pen"===n.pointerType,u=!1;if(a){var h=2===n.button,l=v.default.FLAGS,c=h?l.RIGHT_DOWN:l.LEFT_DOWN,d=void 0!==o&&o.flags&c;r?(this.dispatchEvent(e,h?"rightup":"mouseup",t),d&&(this.dispatchEvent(e,h?"rightclick":"click",t),u=!0)):d&&this.dispatchEvent(e,h?"rightupoutside":"mouseupoutside",t),o&&(h?o.rightDown=!1:o.leftDown=!1)}r?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(a&&!u||this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[i]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this.didMove=!0,this.cursor=null);for(var r=e.length,n=0;n<r;n++){var i=e[n],o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);s.data.originalEvent=t;var a="touch"!==i.pointerType||this.moveWhenInside;this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,a),this.emit("pointermove",s),"touch"===i.pointerType&&this.emit("touchmove",s),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,r){var n=t.data,i="touch"===n.pointerType,o="mouse"===n.pointerType||"pen"===n.pointerType;o&&this.processPointerOverOut(t,e,r),this.moveWhenInside&&!r||(this.dispatchEvent(e,"pointermove",t),i&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t),r=e[0];"mouse"===r.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(r),i=this.configureInteractionEventForDOMEvent(this.eventData,r,n);i.data.originalEvent=r,this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",i),"mouse"===r.pointerType||"pen"===r.pointerType?this.emit("mouseout",i):this.releaseInteractionDataForPointerId(n.identifier)}},e.prototype.processPointerOverOut=function(t,e,r){var n=t.data,i=t.data.identifier,o="mouse"===n.pointerType||"pen"===n.pointerType,s=e.trackedPointers[i];r&&!s&&(s=e.trackedPointers[i]=new v.default(i)),void 0!==s&&(r&&this.mouseOverRenderer?(s.over||(s.over=!0,this.dispatchEvent(e,"pointerover",t),o&&this.dispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[i]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t),r=e[0],n=this.getInteractionDataForPointerId(r),i=this.configureInteractionEventForDOMEvent(this.eventData,r,n);i.data.originalEvent=r,"mouse"===r.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",i),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mouseover",i)},e.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId,r=void 0;return e===b||"mouse"===t.pointerType?r=this.mouse:this.activeInteractionData[e]?r=this.activeInteractionData[e]:(r=this.interactionDataPool.pop()||new c.default,r.identifier=e,this.activeInteractionData[e]=r),r.copyEvent(t),r},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,r){return t.data=r,this.mapPositionToPoint(r.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(r.global.x=r.global.x/this.resolution,r.global.y=r.global.y/this.resolution),"touch"===e.pointerType&&(e.globalX=r.global.x,e.globalY=r.global.y),r.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var r=0,n=t.changedTouches.length;r<n;r++){var i=t.changedTouches[r];void 0===i.button&&(i.button=t.touches.length?1:0),void 0===i.buttons&&(i.buttons=t.touches.length?1:0),void 0===i.isPrimary&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===i.width&&(i.width=i.radiusX||1),void 0===i.height&&(i.height=i.radiusY||1),void 0===i.tiltX&&(i.tiltX=0),void 0===i.tiltY&&(i.tiltY=0),void 0===i.pointerType&&(i.pointerType="touch"),void 0===i.pointerId&&(i.pointerId=i.identifier||0),void 0===i.pressure&&(i.pressure=i.force||.5),void 0===i.twist&&(i.twist=0),void 0===i.tangentialPressure&&(i.tangentialPressure=0),void 0===i.layerX&&(i.layerX=i.offsetX=i.clientX),void 0===i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,e.push(i)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent?e.push(t):(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),
void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=b),void 0===t.pressure&&(t.pressure=.5),void 0===t.twist&&(t.twist=0),void 0===t.tangentialPressure&&(t.tangentialPressure=0),t.isNormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},e}(y.default);r.default=T,h.WebGLRenderer.registerPlugin("interaction",T),h.CanvasRenderer.registerPlugin("interaction",T)},{"../core":65,"./InteractionData":155,"./InteractionEvent":156,"./InteractionTrackingData":158,"./interactiveTarget":160,eventemitter3:3}],158:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(e){n(this,t),this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},i(t,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),t}();r.default=o,o.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],159:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./InteractionData");Object.defineProperty(r,"InteractionData",{enumerable:!0,get:function(){return n(i).default}});var o=t("./InteractionManager");Object.defineProperty(r,"InteractionManager",{enumerable:!0,get:function(){return n(o).default}});var s=t("./interactiveTarget");Object.defineProperty(r,"interactiveTarget",{enumerable:!0,get:function(){return n(s).default}});var a=t("./InteractionTrackingData");Object.defineProperty(r,"InteractionTrackingData",{enumerable:!0,get:function(){return n(a).default}});var u=t("./InteractionEvent");Object.defineProperty(r,"InteractionEvent",{enumerable:!0,get:function(){return n(u).default}})},{"./InteractionData":155,"./InteractionEvent":156,"./InteractionManager":157,"./InteractionTrackingData":158,"./interactiveTarget":160}],160:[function(t,e,r){"use strict";r.__esModule=!0,r.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},{}],161:[function(t,e,r){"use strict";function n(t,e){t.bitmapFont=a.BitmapText.registerFont(t.data,e)}r.__esModule=!0,r.parse=n,r.default=function(){return function(t,e){if(!t.data||t.type!==s.Resource.TYPE.XML)return void e();if(0===t.data.getElementsByTagName("page").length||0===t.data.getElementsByTagName("info").length||null===t.data.getElementsByTagName("info")[0].getAttribute("face"))return void e();var r=t.isDataUrl?"":o.dirname(t.url);t.isDataUrl&&("."===r&&(r=""),this.baseUrl&&r&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(r+="/")),(r=r.replace(this.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/");for(var i=t.data.getElementsByTagName("page"),a={},u=function(r){a[r.metadata.pageFile]=r.texture,Object.keys(a).length===i.length&&(n(t,a),e())},h=0;h<i.length;++h){var l=i[h].getAttribute("file"),c=r+l,d=!1;for(var f in this.resources){var p=this.resources[f];if(p.url===c){p.metadata.pageFile=l,p.texture?u(p):p.onAfterMiddleware.add(u),d=!0;break}}if(!d){var v={crossOrigin:t.crossOrigin,loadType:s.Resource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},t.metadata.imageMetadata),parentResource:t};this.add(c,v,u)}}}};var i=t("path"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),s=t("resource-loader"),a=t("../extras")},{"../extras":141,path:8,"resource-loader":36}],162:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.shared=r.Resource=r.textureParser=r.getResourcePath=r.spritesheetParser=r.parseBitmapFontData=r.bitmapFontParser=r.Loader=void 0;var i=t("./bitmapFontParser");Object.defineProperty(r,"bitmapFontParser",{enumerable:!0,get:function(){return n(i).default}}),Object.defineProperty(r,"parseBitmapFontData",{enumerable:!0,get:function(){return i.parse}});var o=t("./spritesheetParser");Object.defineProperty(r,"spritesheetParser",{enumerable:!0,get:function(){return n(o).default}}),Object.defineProperty(r,"getResourcePath",{enumerable:!0,get:function(){return o.getResourcePath}});var s=t("./textureParser");Object.defineProperty(r,"textureParser",{enumerable:!0,get:function(){return n(s).default}});var a=t("resource-loader");Object.defineProperty(r,"Resource",{enumerable:!0,get:function(){return a.Resource}});var u=t("../core/Application"),h=n(u),l=t("./loader"),c=n(l);r.Loader=c.default;var d=new c.default;d.destroy=function(){},r.shared=d;var f=h.default.prototype;f._loader=null,Object.defineProperty(f,"loader",{get:function(){if(!this._loader){var t=this._options.sharedLoader;this._loader=t?d:new c.default}return this._loader}}),f._parentDestroy=f.destroy,f.destroy=function(t,e){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(t,e)}},{"../core/Application":43,"./bitmapFontParser":161,"./loader":163,"./spritesheetParser":164,"./textureParser":165,"resource-loader":36}],163:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("resource-loader"),u=n(a),h=t("resource-loader/lib/middlewares/parsing/blob"),l=t("eventemitter3"),c=n(l),d=t("./textureParser"),f=n(d),p=t("./spritesheetParser"),v=n(p),g=t("./bitmapFontParser"),y=n(g),m=function(t){function e(r,n){i(this,e);var s=o(this,t.call(this,r,n));c.default.call(s);for(var a=0;a<e._pixiMiddleware.length;++a)s.use(e._pixiMiddleware[a]());return s.onStart.add(function(t){return s.emit("start",t)}),s.onProgress.add(function(t,e){return s.emit("progress",t,e)}),s.onError.add(function(t,e,r){return s.emit("error",t,e,r)}),s.onLoad.add(function(t,e){return s.emit("load",t,e)}),s.onComplete.add(function(t,e){return s.emit("complete",t,e)}),s}return s(e,t),e.addPixiMiddleware=function(t){e._pixiMiddleware.push(t)},e.prototype.destroy=function(){this.removeAllListeners(),this.reset()},e}(u.default);r.default=m;for(var _ in c.default.prototype)m.prototype[_]=c.default.prototype[_];m._pixiMiddleware=[h.blobMiddlewareFactory,f.default,v.default,y.default];var b=u.default.Resource;b.setExtensionXhrType("fnt",b.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":161,"./spritesheetParser":164,"./textureParser":165,eventemitter3:3,"resource-loader":36,"resource-loader/lib/middlewares/parsing/blob":37}],164:[function(t,e,r){"use strict";function n(t,e){return t.isDataUrl?t.data.meta.image:s.default.resolve(t.url.replace(e,""),t.data.meta.image)}r.__esModule=!0,r.default=function(){return function(t,e){var r=t.name+"_image";if(!t.data||t.type!==i.Resource.TYPE.JSON||!t.data.frames||this.resources[r])return void e();var o={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},s=n(t,this.baseUrl);this.add(r,s,o,function(r){if(r.error)return void e(r.error);var n=new a.Spritesheet(r.texture.baseTexture,t.data,t.url);n.parse(function(){t.spritesheet=n,t.textures=n.textures,e()})})}},r.getResourcePath=n;var i=t("resource-loader"),o=t("url"),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=t("../core")},{"../core":65,"resource-loader":36,url:38}],165:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(){return function(t,e){t.data&&t.type===n.Resource.TYPE.IMAGE&&(t.texture=o.default.fromLoader(t.data,t.url,t.name)),e()}};var n=t("resource-loader"),i=t("../core/textures/Texture"),o=function(t){return t&&t.__esModule?t:{default:t}}(i)},{"../core/textures/Texture":115,"resource-loader":36}],166:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("../core"),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(a),h=t("../core/textures/Texture"),l=function(t){return t&&t.__esModule?t:{default:t}}(h),c=new u.Point,d=new u.Polygon,f=function(t){function e(r,o,s,a,h){n(this,e);var c=i(this,t.call(this));return c._texture=r||l.default.EMPTY,c.uvs=s||new Float32Array([0,0,1,0,1,1,0,1]),c.vertices=o||new Float32Array([0,0,100,0,100,100,0,100]),c.indices=a||new Uint16Array([0,1,3,2]),c.dirty=0,c.indexDirty=0,c.vertexDirty=0,c.autoUpdate=!0,c.blendMode=u.BLEND_MODES.NORMAL,c.canvasPadding=u.settings.MESH_CANVAS_PADDING,c.drawMode=h||e.DRAW_MODES.TRIANGLE_MESH,c.shader=null,c.tintRgb=new Float32Array([1,1,1]),c._glDatas={},c._uvTransform=new u.TextureMatrix(c._texture),c.uploadUvTransform=!1,c.pluginName="mesh",c}return o(e,t),e.prototype._renderWebGL=function(t){this.refresh(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){this.refresh(),t.plugins[this.pluginName].render(this)},e.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},e.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},e.prototype.refresh=function(t){this.autoUpdate&&this.vertexDirty++,this._uvTransform.update(t)&&this._refresh()},e.prototype._refresh=function(){},e.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,c);for(var r=this.vertices,n=d.points,i=this.indices,o=this.indices.length,s=this.drawMode===e.DRAW_MODES.TRIANGLES?3:1,a=0;a+2<o;a+=s){var u=2*i[a],h=2*i[a+1],l=2*i[a+2];if(n[0]=r[u],n[1]=r[u+1],n[2]=r[h],n[3]=r[h+1],n[4]=r[l],n[5]=r[l+1],d.contains(c.x,c.y))return!0}return!1},e.prototype.destroy=function(e){for(var r in this._glDatas){var n=this._glDatas[r];n.destroy?n.destroy():(n.vertexBuffer&&(n.vertexBuffer.destroy(),n.vertexBuffer=null),n.indexBuffer&&(n.indexBuffer.destroy(),n.indexBuffer=null),n.uvBuffer&&(n.uvBuffer.destroy(),n.uvBuffer=null),n.vao&&(n.vao.destroy(),n.vao=null))}this._glDatas=null,t.prototype.destroy.call(this,e)},s(e,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return u.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=u.utils.hex2rgb(t,this.tintRgb)}}]),e}(u.Container);r.default=f,f.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":65,"../core/textures/Texture":115}],167:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("./Plane"),h=n(u),l=t("../core/sprites/canvas/CanvasTinter"),c=n(l),d=10,f=function(t){function e(r,n,s,a,u){i(this,e);var h=o(this,t.call(this,r,4,4));return h._origWidth=r.orig.width,h._origHeight=r.orig.height,h._width=h._origWidth,h._height=h._origHeight,h._leftWidth=void 0!==n?n:d,h._rightWidth=void 0!==a?a:d,h._topHeight=void 0!==s?s:d,h._bottomHeight=void 0!==u?u:d,h._cachedTint=16777215,h._tintedTexture=null,h._canvasUvs=null,h.refresh(!0),h}return s(e,t),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._topHeight+this._bottomHeight,r=this._height>e?1:this._height/e;t[9]=t[11]=t[13]=t[15]=this._topHeight*r,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*r,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._leftWidth+this._rightWidth,r=this._width>e?1:this._width/e;t[2]=t[10]=t[18]=t[26]=this._leftWidth*r,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*r,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._renderCanvas=function(t){var e=t.context,r=this.worldTransform,n=t.resolution,i=16777215!==this.tint,o=this._texture;i&&this._cachedTint!==this.tint&&(this._cachedTint=this.tint,this._tintedTexture=c.default.getTintedTexture(this,this.tint));var s=i?this._tintedTexture:o.baseTexture.source;this._canvasUvs||(this._canvasUvs=[0,0,0,0,0,0,0,0]);var a=this.vertices,u=this._canvasUvs,h=i?0:o.frame.x,l=i?0:o.frame.y,d=h+o.frame.width,f=l+o.frame.height;u[0]=h,u[1]=h+this._leftWidth,u[2]=d-this._rightWidth,u[3]=d,u[4]=l,u[5]=l+this._topHeight,u[6]=f-this._bottomHeight,u[7]=f;for(var p=0;p<8;p++)u[p]*=o.baseTexture.resolution;e.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode),t.roundPixels?e.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n|0,r.ty*n|0):e.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n);for(var v=0;v<3;v++)for(var g=0;g<3;g++){var y=2*g+8*v,m=Math.max(1,u[g+1]-u[g]),_=Math.max(1,u[v+5]-u[v+4]),b=Math.max(1,a[y+10]-a[y]),x=Math.max(1,a[y+11]-a[y+1]);e.drawImage(s,u[g],u[v+4],m,_,a[y],a[y+1],b,x)}},e.prototype._refresh=function(){t.prototype._refresh.call(this);var e=this.uvs,r=this._texture;this._origWidth=r.orig.width,this._origHeight=r.orig.height;var n=1/this._origWidth,i=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=n*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-n*this._rightWidth,e[9]=e[11]=e[13]=e[15]=i*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},a(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._refresh()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()}}]),e}(h.default);r.default=f},{"../core/sprites/canvas/CanvasTinter":104,"./Plane":168}],168:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("./Mesh"),a=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(r,o,s){n(this,e);var u=i(this,t.call(this,r));return u._ready=!0,u.verticesX=o||10,u.verticesY=s||10,u.drawMode=a.default.DRAW_MODES.TRIANGLES,u.refresh(),u}return o(e,t),e.prototype._refresh=function(){for(var t=this._texture,e=this.verticesX*this.verticesY,r=[],n=[],i=[],o=[],s=this.verticesX-1,a=this.verticesY-1,u=t.width/s,h=t.height/a,l=0;l<e;l++){var c=l%this.verticesX,d=l/this.verticesX|0;r.push(c*u,d*h),i.push(c/s,d/a)}for(var f=s*a,p=0;p<f;p++){var v=p%s,g=p/s|0,y=g*this.verticesX+v,m=g*this.verticesX+v+1,_=(g+1)*this.verticesX+v,b=(g+1)*this.verticesX+v+1;o.push(y,m,_),o.push(m,b,_)}this.vertices=new Float32Array(r),this.uvs=new Float32Array(i),this.colors=new Float32Array(n),this.indices=new Uint16Array(o),this.dirty++,this.indexDirty++,this.multiplyUvs()},e.prototype._onTextureUpdate=function(){a.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},e}(a.default);r.default=u},{"./Mesh":166}],169:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("./Mesh"),a=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(r,o){n(this,e);var s=i(this,t.call(this,r));return s.points=o,s.vertices=new Float32Array(4*o.length),s.uvs=new Float32Array(4*o.length),s.colors=new Float32Array(2*o.length),s.indices=new Uint16Array(2*o.length),s.autoUpdate=!0,s.refresh(),s}return o(e,t),e.prototype._refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){this.vertices.length/4!==t.length&&(this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length));var e=this.uvs,r=this.indices,n=this.colors;e[0]=0,e[1]=0,e[2]=0,e[3]=1,n[0]=1,n[1]=1,r[0]=0,r[1]=1;for(var i=t.length,o=1;o<i;o++){var s=4*o,a=o/(i-1);e[s]=a,e[s+1]=0,e[s+2]=a,e[s+3]=1,s=2*o,n[s]=1,n[s+1]=1,s=2*o,r[s]=s,r[s+1]=s+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},e.prototype.refreshVertices=function(){var t=this.points;if(!(t.length<1))for(var e=t[0],r=void 0,n=0,i=0,o=this.vertices,s=t.length,a=0;a<s;a++){var u=t[a],h=4*a;r=a<t.length-1?t[a+1]:u,i=-(r.x-e.x),n=r.y-e.y;var l=10*(1-a/(s-1));l>1&&(l=1);var c=Math.sqrt(n*n+i*i),d=this._texture.height/2;n/=c,i/=c,n*=d,i*=d,o[h]=u.x+n,o[h+1]=u.y+i,o[h+2]=u.x-n,o[h+3]=u.y-i,e=u}},e.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},e}(a.default);r.default=u},{"./Mesh":166}],170:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t("../../core"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),s=t("../Mesh"),a=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(){function t(e){n(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,r=e.context,n=t.worldTransform,i=e.resolution;e.roundPixels?r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i|0,n.ty*i|0):r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),e.context.globalAlpha=t.worldAlpha,e.setBlendMode(t.blendMode),t.drawMode===a.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.vertices.length/2,r=0;r<e-2;r++){var n=2*r;this._renderDrawTriangle(t,n,n+2,n+4)}},t.prototype._renderTriangles=function(t){for(var e=t.indices,r=e.length,n=0;n<r;n+=3){var i=2*e[n],o=2*e[n+1],s=2*e[n+2];this._renderDrawTriangle(t,i,o,s)}},t.prototype._renderDrawTriangle=function(t,e,r,n){var i=this.renderer.context,o=t.uvs,s=t.vertices,a=t._texture;if(a.valid){var u=a.baseTexture,h=u.source,l=u.width,c=u.height,d=void 0,f=void 0,p=void 0,v=void 0,g=void 0,y=void 0;if(t.uploadUvTransform){var m=t._uvTransform.mapCoord;d=(o[e]*m.a+o[e+1]*m.c+m.tx)*u.width,f=(o[r]*m.a+o[r+1]*m.c+m.tx)*u.width,p=(o[n]*m.a+o[n+1]*m.c+m.tx)*u.width,v=(o[e]*m.b+o[e+1]*m.d+m.ty)*u.height,g=(o[r]*m.b+o[r+1]*m.d+m.ty)*u.height,y=(o[n]*m.b+o[n+1]*m.d+m.ty)*u.height}else d=o[e]*u.width,f=o[r]*u.width,p=o[n]*u.width,v=o[e+1]*u.height,g=o[r+1]*u.height,y=o[n+1]*u.height;var _=s[e],b=s[r],x=s[n],T=s[e+1],w=s[r+1],E=s[n+1],S=t.canvasPadding/this.renderer.resolution;if(S>0){var O=S/Math.abs(t.worldTransform.a),M=S/Math.abs(t.worldTransform.d),P=(_+b+x)/3,C=(T+w+E)/3,R=_-P,A=T-C,I=Math.sqrt(R*R+A*A);_=P+R/I*(I+O),T=C+A/I*(I+M),R=b-P,A=w-C,I=Math.sqrt(R*R+A*A),b=P+R/I*(I+O),w=C+A/I*(I+M),R=x-P,A=E-C,I=Math.sqrt(R*R+A*A),x=P+R/I*(I+O),E=C+A/I*(I+M)}i.save(),i.beginPath(),i.moveTo(_,T),i.lineTo(b,w),i.lineTo(x,E),i.closePath(),i.clip();var D=d*g+v*p+f*y-g*p-v*f-d*y,L=_*g+v*x+b*y-g*x-v*b-_*y,N=d*b+_*p+f*x-b*p-_*f-d*x,B=d*g*x+v*b*p+_*f*y-_*g*p-v*f*x-d*b*y,k=T*g+v*E+w*y-g*E-v*w-T*y,F=d*w+T*p+f*E-w*p-T*f-d*E,j=d*g*E+v*w*p+T*f*y-T*g*p-v*f*E-d*w*y;i.transform(L/D,k/D,N/D,F/D,B/D,j/D),i.drawImage(h,0,0,l*u.resolution,c*u.resolution,0,0,l,c),i.restore(),this.renderer.invalidateBlendMode()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,r=t.vertices,n=r.length/2;e.beginPath();for(var i=1;i<n-2;++i){var o=2*i,s=r[o],a=r[o+1],u=r[o+2],h=r[o+3],l=r[o+4],c=r[o+5];e.moveTo(s,a),e.lineTo(u,h),e.lineTo(l,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();r.default=u,o.CanvasRenderer.registerPlugin("mesh",u)},{"../../core":65,"../Mesh":166}],171:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./Mesh");Object.defineProperty(r,"Mesh",{enumerable:!0,get:function(){return n(i).default}});var o=t("./webgl/MeshRenderer");Object.defineProperty(r,"MeshRenderer",{enumerable:!0,get:function(){return n(o).default}});var s=t("./canvas/CanvasMeshRenderer");Object.defineProperty(r,"CanvasMeshRenderer",{enumerable:!0,get:function(){return n(s).default}});var a=t("./Plane");Object.defineProperty(r,"Plane",{enumerable:!0,get:function(){return n(a).default}});var u=t("./NineSlicePlane");Object.defineProperty(r,"NineSlicePlane",{enumerable:!0,get:function(){return n(u).default}});var h=t("./Rope");Object.defineProperty(r,"Rope",{enumerable:!0,get:function(){return n(h).default}})},{"./Mesh":166,"./NineSlicePlane":167,"./Plane":168,"./Rope":169,"./canvas/CanvasMeshRenderer":170,"./webgl/MeshRenderer":172}],172:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../../core"),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(a),h=t("pixi-gl-core"),l=n(h),c=t("../Mesh"),d=n(c),f=(t("path"),u.Matrix.IDENTITY),p=function(t){function e(r){i(this,e);var n=o(this,t.call(this,r));return n.shader=null,n}return s(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new u.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},e.prototype.render=function(t){var e=this.renderer,r=e.gl,n=t._texture;if(n.valid){var i=t._glDatas[e.CONTEXT_UID];i||(e.bindVao(null),i={shader:this.shader,vertexBuffer:l.default.GLBuffer.createVertexBuffer(r,t.vertices,r.STREAM_DRAW),uvBuffer:l.default.GLBuffer.createVertexBuffer(r,t.uvs,r.STREAM_DRAW),indexBuffer:l.default.GLBuffer.createIndexBuffer(r,t.indices,r.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty,vertexDirty:t.vertexDirty},i.vao=new l.default.VertexArrayObject(r).addIndex(i.indexBuffer).addAttribute(i.vertexBuffer,i.shader.attributes.aVertexPosition,r.FLOAT,!1,8,0).addAttribute(i.uvBuffer,i.shader.attributes.aTextureCoord,r.FLOAT,!1,8,0),t._glDatas[e.CONTEXT_UID]=i),e.bindVao(i.vao),t.dirty!==i.dirty&&(i.dirty=t.dirty,i.uvBuffer.upload(t.uvs)),t.indexDirty!==i.indexDirty&&(i.indexDirty=t.indexDirty,i.indexBuffer.upload(t.indices)),t.vertexDirty!==i.vertexDirty&&(i.vertexDirty=t.vertexDirty,i.vertexBuffer.upload(t.vertices)),e.bindShader(i.shader),i.shader.uniforms.uSampler=e.bindTexture(n),e.state.setBlendMode(u.utils.correctBlendMode(t.blendMode,n.baseTexture.premultipliedAlpha)),i.shader.uniforms.uTransform&&(t.uploadUvTransform?i.shader.uniforms.uTransform=t._uvTransform.mapCoord.toArray(!0):i.shader.uniforms.uTransform=f.toArray(!0)),i.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),i.shader.uniforms.uColor=u.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,i.shader.uniforms.uColor,n.baseTexture.premultipliedAlpha);var o=t.drawMode===d.default.DRAW_MODES.TRIANGLE_MESH?r.TRIANGLE_STRIP:r.TRIANGLES;i.vao.draw(o,t.indices.length,0)}},e}(u.ObjectRenderer);r.default=p,u.WebGLRenderer.registerPlugin("mesh",p)},{"../../core":65,"../Mesh":166,path:8,"pixi-gl-core":15}],173:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("../core"),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(a),h=t("../core/utils"),l=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,o=arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n(this,e);var h=i(this,t.call(this));return s>16384&&(s=16384),s>r&&(s=r),h._properties=[!1,!0,!1,!1,!1],h._maxSize=r,h._batchSize=s,h._glBuffers={},h._bufferUpdateIDs=[],h._updateID=0,h.interactiveChildren=!1,h.blendMode=u.BLEND_MODES.NORMAL,h.autoResize=a,h.roundPixels=!0,h.baseTexture=null,h.setProperties(o),h._tint=0,h.tintRgb=new Float32Array(4),h.tint=16777215,h}return o(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.prototype.renderWebGL=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,r=this.worldTransform,n=!0,i=0,o=0,s=0,a=0;t.setBlendMode(this.blendMode),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var u=0;u<this.children.length;++u){var h=this.children[u];if(h.visible){var l=h._texture.frame;if(e.globalAlpha=this.worldAlpha*h.alpha,h.rotation%(2*Math.PI)==0)n&&(e.setTransform(r.a,r.b,r.c,r.d,r.tx*t.resolution,r.ty*t.resolution),n=!1),i=h.anchor.x*(-l.width*h.scale.x)+h.position.x+.5,
o=h.anchor.y*(-l.height*h.scale.y)+h.position.y+.5,s=l.width*h.scale.x,a=l.height*h.scale.y;else{n||(n=!0),h.displayObjectUpdateTransform();var c=h.worldTransform;t.roundPixels?e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution|0,c.ty*t.resolution|0):e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution,c.ty*t.resolution),i=h.anchor.x*-l.width+.5,o=h.anchor.y*-l.height+.5,s=l.width,a=l.height}var d=h._texture.baseTexture.resolution;e.drawImage(h._texture.baseTexture.source,l.x*d,l.y*d,l.width*d,l.height*d,i*t.resolution,o*t.resolution,s*t.resolution,a*t.resolution)}}}},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._buffers)for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},s(e,[{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,(0,h.hex2rgb)(t,this.tintRgb)}}]),e}(u.Container);r.default=l},{"../core":65,"../core/utils":125}],174:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./ParticleContainer");Object.defineProperty(r,"ParticleContainer",{enumerable:!0,get:function(){return n(i).default}});var o=t("./webgl/ParticleRenderer");Object.defineProperty(r,"ParticleRenderer",{enumerable:!0,get:function(){return n(o).default}})},{"./ParticleContainer":173,"./webgl/ParticleRenderer":176}],175:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=t("pixi-gl-core"),s=n(o),a=t("../../core/utils/createIndicesForQuads"),u=n(a),h=function(){function t(e,r,n,o){i(this,t),this.gl=e,this.size=o,this.dynamicProperties=[],this.staticProperties=[];for(var s=0;s<r.length;++s){var a=r[s];a={attribute:a.attribute,size:a.size,uploadFunction:a.uploadFunction,unsignedByte:a.unsignedByte,offset:a.offset},n[s]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.gl,e=0;this.indices=(0,u.default)(this.size),this.indexBuffer=s.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r){var n=this.dynamicProperties[r];n.offset=e,e+=n.size,this.dynamicStride+=n.size}var i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=s.default.GLBuffer.createVertexBuffer(t,i,t.STREAM_DRAW);var o=0;this.staticStride=0;for(var a=0;a<this.staticProperties.length;++a){var h=this.staticProperties[a];h.offset=o,o+=h.size,this.staticStride+=h.size}var l=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(l),this.staticDataUint32=new Uint32Array(l),this.staticBuffer=s.default.GLBuffer.createVertexBuffer(t,l,t.STATIC_DRAW),this.vao=new s.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var c=0;c<this.dynamicProperties.length;++c){var d=this.dynamicProperties[c];d.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,d.attribute,t.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*d.offset):this.vao.addAttribute(this.dynamicBuffer,d.attribute,t.FLOAT,!1,4*this.dynamicStride,4*d.offset)}for(var f=0;f<this.staticProperties.length;++f){var p=this.staticProperties[f];p.unsignedByte?this.vao.addAttribute(this.staticBuffer,p.attribute,t.UNSIGNED_BYTE,!0,4*this.staticStride,4*p.offset):this.vao.addAttribute(this.staticBuffer,p.attribute,t.FLOAT,!1,4*this.staticStride,4*p.offset)}},t.prototype.uploadDynamic=function(t,e,r){for(var n=0;n<this.dynamicProperties.length;n++){var i=this.dynamicProperties[n];i.uploadFunction(t,e,r,i.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer.upload()},t.prototype.uploadStatic=function(t,e,r){for(var n=0;n<this.staticProperties.length;n++){var i=this.staticProperties[n];i.uploadFunction(t,e,r,i.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer.upload()},t.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},t}();r.default=h},{"../../core/utils/createIndicesForQuads":123,"pixi-gl-core":15}],176:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../../core"),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(a),h=t("./ParticleShader"),l=n(h),c=t("./ParticleBuffer"),d=n(c),f=t("../../core/utils"),p=function(t){function e(r){i(this,e);var n=o(this,t.call(this,r));return n.shader=null,n.indexBuffer=null,n.properties=null,n.tempMatrix=new u.Matrix,n.CONTEXT_UID=0,n}return s(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new l.default(t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},e.prototype.start=function(){this.renderer.bindShader(this.shader)},e.prototype.render=function(t){var e=t.children,r=t._maxSize,n=t._batchSize,i=this.renderer,o=e.length;if(0!==o){o>r&&(o=r);var s=t._glBuffers[i.CONTEXT_UID];s||(s=t._glBuffers[i.CONTEXT_UID]=this.generateBuffers(t));var a=e[0]._texture.baseTexture;this.renderer.setBlendMode(u.utils.correctBlendMode(t.blendMode,a.premultipliedAlpha));var h=i.gl,l=t.worldTransform.copy(this.tempMatrix);l.prepend(i._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=l.toArray(!0),this.shader.uniforms.uColor=u.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,a.premultipliedAlpha),this.shader.uniforms.uSampler=i.bindTexture(a);for(var c=!1,d=0,f=0;d<o;d+=n,f+=1){var p=o-d;if(p>n&&(p=n),f>=s.length){if(!t.autoResize)break;s.push(this._generateOneMoreBuffer(t))}var v=s[f];v.uploadDynamic(e,d,p);var g=t._bufferUpdateIDs[f]||0;c=c||v._updateID<g,c&&(v._updateID=t._updateID,v.uploadStatic(e,d,p)),i.bindVao(v.vao),v.vao.draw(h.TRIANGLES,6*p)}}},e.prototype.generateBuffers=function(t){for(var e=this.renderer.gl,r=[],n=t._maxSize,i=t._batchSize,o=t._properties,s=0;s<n;s+=i)r.push(new d.default(e,this.properties,o,i));return r},e.prototype._generateOneMoreBuffer=function(t){var e=this.renderer.gl,r=t._batchSize,n=t._properties;return new d.default(e,this.properties,n,r)},e.prototype.uploadVertices=function(t,e,r,n,i,o){for(var s=0,a=0,u=0,h=0,l=0;l<r;++l){var c=t[e+l],d=c._texture,f=c.scale.x,p=c.scale.y,v=d.trim,g=d.orig;v?(a=v.x-c.anchor.x*g.width,s=a+v.width,h=v.y-c.anchor.y*g.height,u=h+v.height):(s=g.width*(1-c.anchor.x),a=g.width*-c.anchor.x,u=g.height*(1-c.anchor.y),h=g.height*-c.anchor.y),n[o]=a*f,n[o+1]=h*p,n[o+i]=s*f,n[o+i+1]=h*p,n[o+2*i]=s*f,n[o+2*i+1]=u*p,n[o+3*i]=a*f,n[o+3*i+1]=u*p,o+=4*i}},e.prototype.uploadPosition=function(t,e,r,n,i,o){for(var s=0;s<r;s++){var a=t[e+s].position;n[o]=a.x,n[o+1]=a.y,n[o+i]=a.x,n[o+i+1]=a.y,n[o+2*i]=a.x,n[o+2*i+1]=a.y,n[o+3*i]=a.x,n[o+3*i+1]=a.y,o+=4*i}},e.prototype.uploadRotation=function(t,e,r,n,i,o){for(var s=0;s<r;s++){var a=t[e+s].rotation;n[o]=a,n[o+i]=a,n[o+2*i]=a,n[o+3*i]=a,o+=4*i}},e.prototype.uploadUvs=function(t,e,r,n,i,o){for(var s=0;s<r;++s){var a=t[e+s]._texture._uvs;a?(n[o]=a.x0,n[o+1]=a.y0,n[o+i]=a.x1,n[o+i+1]=a.y1,n[o+2*i]=a.x2,n[o+2*i+1]=a.y2,n[o+3*i]=a.x3,n[o+3*i+1]=a.y3,o+=4*i):(n[o]=0,n[o+1]=0,n[o+i]=0,n[o+i+1]=0,n[o+2*i]=0,n[o+2*i+1]=0,n[o+3*i]=0,n[o+3*i+1]=0,o+=4*i)}},e.prototype.uploadTint=function(t,e,r,n,i,o){for(var s=0;s<r;++s){var a=t[e+s],u=a._texture.baseTexture.premultipliedAlpha,h=a.alpha,l=h<1&&u?(0,f.premultiplyTint)(a._tintRGB,h):a._tintRGB+(255*h<<24);n[o]=l,n[o+i]=l,n[o+2*i]=l,n[o+3*i]=l,o+=4*i}},e.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),t.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},e}(u.ObjectRenderer);r.default=p,u.WebGLRenderer.registerPlugin("particle",p)},{"../../core":65,"../../core/utils":125,"./ParticleBuffer":175,"./ParticleShader":177}],177:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../../core/Shader"),a=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(r){return n(this,e),i(this,t.call(this,r,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join("\n")))}return o(e,t),e}(a.default);r.default=u},{"../../core/Shader":44}],178:[function(t,e,r){"use strict";Math.sign||(Math.sign=function(t){return t=Number(t),0===t||isNaN(t)?t:t>0?1:-1})},{}],179:[function(t,e,r){"use strict";Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t})},{}],180:[function(t,e,r){"use strict";var n=t("object-assign"),i=function(t){return t&&t.__esModule?t:{default:t}}(n);Object.assign||(Object.assign=i.default)},{"object-assign":6}],181:[function(t,e,r){"use strict";t("./Object.assign"),t("./requestAnimationFrame"),t("./Math.sign"),t("./Number.isInteger"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":178,"./Number.isInteger":179,"./Object.assign":180,"./requestAnimationFrame":182}],182:[function(t,e,r){(function(t){"use strict";if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var r=Date.now(),n=["ms","moz","webkit","o"],i=0;i<n.length&&!t.requestAnimationFrame;++i){var o=n[i];t.requestAnimationFrame=t[o+"RequestAnimationFrame"],t.cancelAnimationFrame=t[o+"CancelAnimationFrame"]||t[o+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+r-e;return n<0&&(n=0),r=e,setTimeout(function(){r=Date.now(),t(performance.now())},n)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],183:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){var r=!1;if(t&&t._textures&&t._textures.length)for(var n=0;n<t._textures.length;n++)if(t._textures[n]instanceof d.Texture){var i=t._textures[n].baseTexture;-1===e.indexOf(i)&&(e.push(i),r=!0)}return r}function o(t,e){return t instanceof d.BaseTexture&&(-1===e.indexOf(t)&&e.push(t),!0)}function s(t,e){if(t._texture&&t._texture instanceof d.Texture){var r=t._texture.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function a(t,e){return e instanceof d.Text&&(e.updateText(!0),!0)}function u(t,e){if(e instanceof d.TextStyle){var r=e.toFontString();return d.TextMetrics.measureFont(r),!0}return!1}function h(t,e){if(t instanceof d.Text){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var r=t._texture.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function l(t,e){return t instanceof d.TextStyle&&(-1===e.indexOf(t)&&e.push(t),!0)}r.__esModule=!0;var c=t("../core"),d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(c),f=t("./limiters/CountLimiter"),p=function(t){return t&&t.__esModule?t:{default:t}}(f),v=d.ticker.shared;d.settings.UPLOADS_PER_FRAME=4;var g=function(){function t(e){var r=this;n(this,t),this.limiter=new p.default(d.settings.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){r.queue&&r.prepareItems()},this.registerFindHook(h),this.registerFindHook(l),this.registerFindHook(i),this.registerFindHook(o),this.registerFindHook(s),this.registerUploadHook(a),this.registerUploadHook(u)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,v.addOnce(this.tick,this,d.UPDATE_PRIORITY.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)v.addOnce(this.tick,this,d.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var i=this.completes.slice(0);this.completes.length=0;for(var o=0,s=i.length;o<s;o++)i[o]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,r=this.addHooks.length;e<r&&!this.addHooks[e](t,this.queue);e++);if(t instanceof d.Container)for(var n=t.children.length-1;n>=0;n--)this.add(t.children[n]);return this},t.prototype.destroy=function(){this.ticking&&v.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();r.default=g},{"../core":65,"./limiters/CountLimiter":186}],184:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(e instanceof u.BaseTexture){var r=e.source,n=0===r.width?t.canvas.width:Math.min(t.canvas.width,r.width),i=0===r.height?t.canvas.height:Math.min(t.canvas.height,r.height);return t.ctx.drawImage(r,0,0,n,i,0,0,t.canvas.width,t.canvas.height),!0}return!1}r.__esModule=!0;var a=t("../../core"),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(a),h=t("../BasePrepare"),l=function(t){return t&&t.__esModule?t:{default:t}}(h),c=16,d=function(t){function e(r){n(this,e);var o=i(this,t.call(this,r));return o.uploadHookHelper=o,o.canvas=document.createElement("canvas"),o.canvas.width=c,o.canvas.height=c,o.ctx=o.canvas.getContext("2d"),o.registerUploadHook(s),o}return o(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(l.default);r.default=d,u.CanvasRenderer.registerPlugin("prepare",d)},{"../../core":65,"../BasePrepare":183}],185:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./webgl/WebGLPrepare");Object.defineProperty(r,"webgl",{enumerable:!0,get:function(){return n(i).default}});var o=t("./canvas/CanvasPrepare");Object.defineProperty(r,"canvas",{enumerable:!0,get:function(){return n(o).default}});var s=t("./BasePrepare");Object.defineProperty(r,"BasePrepare",{enumerable:!0,get:function(){return n(s).default}});var a=t("./limiters/CountLimiter");Object.defineProperty(r,"CountLimiter",{enumerable:!0,get:function(){return n(a).default}});var u=t("./limiters/TimeLimiter");Object.defineProperty(r,"TimeLimiter",{enumerable:!0,get:function(){return n(u).default}})},{"./BasePrepare":183,"./canvas/CanvasPrepare":184,"./limiters/CountLimiter":186,"./limiters/TimeLimiter":187,"./webgl/WebGLPrepare":188}],186:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(e){n(this,t),this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();r.default=i},{}],187:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(e){n(this,t),this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();r.default=i},{}],188:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){return e instanceof l.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.textureManager.updateTexture(e),!0)}function a(t,e){return e instanceof l.Graphics&&((e.dirty||e.clearDirty||!e._webGL[t.plugins.graphics.CONTEXT_UID])&&t.plugins.graphics.updateGraphics(e),!0)}function u(t,e){return t instanceof l.Graphics&&(e.push(t),!0)}r.__esModule=!0;var h=t("../../core"),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(h),c=t("../BasePrepare"),d=function(t){return t&&t.__esModule?t:{default:t}}(c),f=function(t){function e(r){n(this,e);var o=i(this,t.call(this,r));return o.uploadHookHelper=o.renderer,o.registerFindHook(u),o.registerUploadHook(s),o.registerUploadHook(a),o}return o(e,t),e}(d.default);r.default=f,l.WebGLRenderer.registerPlugin("prepare",f)},{"../../core":65,"../BasePrepare":183}],189:[function(t,e,r){(function(e){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}r.__esModule=!0,r.loader=r.prepare=r.particles=r.mesh=r.loaders=r.interaction=r.filters=r.extras=r.extract=r.accessibility=void 0;var i=t("./polyfill");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return i[t]}})});var o=t("./core");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return o[t]}})});var s=t("./deprecation"),a=function(t){return t&&t.__esModule?t:{default:t}}(s),u=t("./accessibility"),h=n(u),l=t("./extract"),c=n(l),d=t("./extras"),f=n(d),p=t("./filters"),v=n(p),g=t("./interaction"),y=n(g),m=t("./loaders"),_=n(m),b=t("./mesh"),x=n(b),T=t("./particles"),w=n(T),E=t("./prepare"),S=n(E);o.utils.mixins.performMixins();var O=_.shared||null;r.accessibility=h,r.extract=c,r.extras=f,r.filters=v,r.interaction=y,r.loaders=_,r.mesh=x,r.particles=w,r.prepare=S,r.loader=O,"function"==typeof a.default&&(0,a.default)(r),e.PIXI=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":42,"./core":65,"./deprecation":131,"./extract":133,"./extras":141,"./filters":153,"./interaction":159,"./loaders":162,"./mesh":171,"./particles":174,"./polyfill":181,"./prepare":185}]},{},[189])(189)});
//# sourceMappingURL=pixi.min.js.map

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/process-nextick-args/index.js":
/*!****************************************************!*\
  !*** ./node_modules/process-nextick-args/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(process) {

if (!process.version ||
    process.version.indexOf('v0.') === 0 ||
    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {
  module.exports = { nextTick: nextTick };
} else {
  module.exports = process
}

function nextTick(fn, arg1, arg2, arg3) {
  if (typeof fn !== 'function') {
    throw new TypeError('"callback" argument must be a function');
  }
  var len = arguments.length;
  var args, i;
  switch (len) {
  case 0:
  case 1:
    return process.nextTick(fn);
  case 2:
    return process.nextTick(function afterTickOne() {
      fn.call(null, arg1);
    });
  case 3:
    return process.nextTick(function afterTickTwo() {
      fn.call(null, arg1, arg2);
    });
  case 4:
    return process.nextTick(function afterTickThree() {
      fn.call(null, arg1, arg2, arg3);
    });
  default:
    args = new Array(len - 1);
    i = 0;
    while (i < args.length) {
      args[i++] = arguments[i];
    }
    return process.nextTick(function afterTick() {
      fn.apply(null, args);
    });
  }
}


/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };


/***/ }),

/***/ "./node_modules/randombytes/browser.js":
/*!*********************************************!*\
  !*** ./node_modules/randombytes/browser.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global, process) {

function oldBrowser () {
  throw new Error('Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11')
}

var Buffer = __webpack_require__(/*! safe-buffer */ "./node_modules/safe-buffer/index.js").Buffer
var crypto = global.crypto || global.msCrypto

if (crypto && crypto.getRandomValues) {
  module.exports = randomBytes
} else {
  module.exports = oldBrowser
}

function randomBytes (size, cb) {
  // phantomjs needs to throw
  if (size > 65536) throw new Error('requested too many random bytes')
  // in case browserify  isn't using the Uint8Array version
  var rawBytes = new global.Uint8Array(size)

  // This will not work in older browsers.
  // See https://developer.mozilla.org/en-US/docs/Web/API/window.crypto.getRandomValues
  if (size > 0) {  // getRandomValues fails on IE if size == 0
    crypto.getRandomValues(rawBytes)
  }

  // XXX: phantomjs doesn't like a buffer being passed here
  var bytes = Buffer.from(rawBytes.buffer)

  if (typeof cb === 'function') {
    return process.nextTick(function () {
      cb(null, bytes)
    })
  }

  return bytes
}

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js"), __webpack_require__(/*! ./../process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./node_modules/readable-stream/lib/_stream_duplex.js":
/*!************************************************************!*\
  !*** ./node_modules/readable-stream/lib/_stream_duplex.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// a duplex stream is just a stream that is both readable and writable.
// Since JS doesn't have multiple prototypal inheritance, this class
// prototypally inherits from Readable, and then parasitically from
// Writable.



/*<replacement>*/

var pna = __webpack_require__(/*! process-nextick-args */ "./node_modules/process-nextick-args/index.js");
/*</replacement>*/

/*<replacement>*/
var objectKeys = Object.keys || function (obj) {
  var keys = [];
  for (var key in obj) {
    keys.push(key);
  }return keys;
};
/*</replacement>*/

module.exports = Duplex;

/*<replacement>*/
var util = __webpack_require__(/*! core-util-is */ "./node_modules/core-util-is/lib/util.js");
util.inherits = __webpack_require__(/*! inherits */ "./node_modules/inherits/inherits_browser.js");
/*</replacement>*/

var Readable = __webpack_require__(/*! ./_stream_readable */ "./node_modules/readable-stream/lib/_stream_readable.js");
var Writable = __webpack_require__(/*! ./_stream_writable */ "./node_modules/readable-stream/lib/_stream_writable.js");

util.inherits(Duplex, Readable);

{
  // avoid scope creep, the keys array can then be collected
  var keys = objectKeys(Writable.prototype);
  for (var v = 0; v < keys.length; v++) {
    var method = keys[v];
    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];
  }
}

function Duplex(options) {
  if (!(this instanceof Duplex)) return new Duplex(options);

  Readable.call(this, options);
  Writable.call(this, options);

  if (options && options.readable === false) this.readable = false;

  if (options && options.writable === false) this.writable = false;

  this.allowHalfOpen = true;
  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;

  this.once('end', onend);
}

Object.defineProperty(Duplex.prototype, 'writableHighWaterMark', {
  // making it explicit this property is not enumerable
  // because otherwise some prototype manipulation in
  // userland will fail
  enumerable: false,
  get: function () {
    return this._writableState.highWaterMark;
  }
});

// the no-half-open enforcer
function onend() {
  // if we allow half-open state, or if the writable side ended,
  // then we're ok.
  if (this.allowHalfOpen || this._writableState.ended) return;

  // no more data can be written.
  // But allow more writes to happen in this tick.
  pna.nextTick(onEndNT, this);
}

function onEndNT(self) {
  self.end();
}

Object.defineProperty(Duplex.prototype, 'destroyed', {
  get: function () {
    if (this._readableState === undefined || this._writableState === undefined) {
      return false;
    }
    return this._readableState.destroyed && this._writableState.destroyed;
  },
  set: function (value) {
    // we ignore the value if the stream
    // has not been initialized yet
    if (this._readableState === undefined || this._writableState === undefined) {
      return;
    }

    // backward compatibility, the user is explicitly
    // managing destroyed
    this._readableState.destroyed = value;
    this._writableState.destroyed = value;
  }
});

Duplex.prototype._destroy = function (err, cb) {
  this.push(null);
  this.end();

  pna.nextTick(cb, err);
};

/***/ }),

/***/ "./node_modules/readable-stream/lib/_stream_passthrough.js":
/*!*****************************************************************!*\
  !*** ./node_modules/readable-stream/lib/_stream_passthrough.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// a passthrough stream.
// basically just the most minimal sort of Transform stream.
// Every written chunk gets output as-is.



module.exports = PassThrough;

var Transform = __webpack_require__(/*! ./_stream_transform */ "./node_modules/readable-stream/lib/_stream_transform.js");

/*<replacement>*/
var util = __webpack_require__(/*! core-util-is */ "./node_modules/core-util-is/lib/util.js");
util.inherits = __webpack_require__(/*! inherits */ "./node_modules/inherits/inherits_browser.js");
/*</replacement>*/

util.inherits(PassThrough, Transform);

function PassThrough(options) {
  if (!(this instanceof PassThrough)) return new PassThrough(options);

  Transform.call(this, options);
}

PassThrough.prototype._transform = function (chunk, encoding, cb) {
  cb(null, chunk);
};

/***/ }),

/***/ "./node_modules/readable-stream/lib/_stream_readable.js":
/*!**************************************************************!*\
  !*** ./node_modules/readable-stream/lib/_stream_readable.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global, process) {// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



/*<replacement>*/

var pna = __webpack_require__(/*! process-nextick-args */ "./node_modules/process-nextick-args/index.js");
/*</replacement>*/

module.exports = Readable;

/*<replacement>*/
var isArray = __webpack_require__(/*! isarray */ "./node_modules/isarray/index.js");
/*</replacement>*/

/*<replacement>*/
var Duplex;
/*</replacement>*/

Readable.ReadableState = ReadableState;

/*<replacement>*/
var EE = __webpack_require__(/*! events */ "./node_modules/events/events.js").EventEmitter;

var EElistenerCount = function (emitter, type) {
  return emitter.listeners(type).length;
};
/*</replacement>*/

/*<replacement>*/
var Stream = __webpack_require__(/*! ./internal/streams/stream */ "./node_modules/readable-stream/lib/internal/streams/stream-browser.js");
/*</replacement>*/

/*<replacement>*/

var Buffer = __webpack_require__(/*! safe-buffer */ "./node_modules/safe-buffer/index.js").Buffer;
var OurUint8Array = global.Uint8Array || function () {};
function _uint8ArrayToBuffer(chunk) {
  return Buffer.from(chunk);
}
function _isUint8Array(obj) {
  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;
}

/*</replacement>*/

/*<replacement>*/
var util = __webpack_require__(/*! core-util-is */ "./node_modules/core-util-is/lib/util.js");
util.inherits = __webpack_require__(/*! inherits */ "./node_modules/inherits/inherits_browser.js");
/*</replacement>*/

/*<replacement>*/
var debugUtil = __webpack_require__(/*! util */ 0);
var debug = void 0;
if (debugUtil && debugUtil.debuglog) {
  debug = debugUtil.debuglog('stream');
} else {
  debug = function () {};
}
/*</replacement>*/

var BufferList = __webpack_require__(/*! ./internal/streams/BufferList */ "./node_modules/readable-stream/lib/internal/streams/BufferList.js");
var destroyImpl = __webpack_require__(/*! ./internal/streams/destroy */ "./node_modules/readable-stream/lib/internal/streams/destroy.js");
var StringDecoder;

util.inherits(Readable, Stream);

var kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];

function prependListener(emitter, event, fn) {
  // Sadly this is not cacheable as some libraries bundle their own
  // event emitter implementation with them.
  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);

  // This is a hack to make sure that our error handler is attached before any
  // userland ones.  NEVER DO THIS. This is here only because this code needs
  // to continue to work with older versions of Node.js that do not include
  // the prependListener() method. The goal is to eventually remove this hack.
  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];
}

function ReadableState(options, stream) {
  Duplex = Duplex || __webpack_require__(/*! ./_stream_duplex */ "./node_modules/readable-stream/lib/_stream_duplex.js");

  options = options || {};

  // Duplex streams are both readable and writable, but share
  // the same options object.
  // However, some cases require setting options to different
  // values for the readable and the writable sides of the duplex stream.
  // These options can be provided separately as readableXXX and writableXXX.
  var isDuplex = stream instanceof Duplex;

  // object stream flag. Used to make read(n) ignore n and to
  // make all the buffer merging and length checks go away
  this.objectMode = !!options.objectMode;

  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;

  // the point at which it stops calling _read() to fill the buffer
  // Note: 0 is a valid value, means "don't call _read preemptively ever"
  var hwm = options.highWaterMark;
  var readableHwm = options.readableHighWaterMark;
  var defaultHwm = this.objectMode ? 16 : 16 * 1024;

  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (readableHwm || readableHwm === 0)) this.highWaterMark = readableHwm;else this.highWaterMark = defaultHwm;

  // cast to ints.
  this.highWaterMark = Math.floor(this.highWaterMark);

  // A linked list is used to store data chunks instead of an array because the
  // linked list can remove elements from the beginning faster than
  // array.shift()
  this.buffer = new BufferList();
  this.length = 0;
  this.pipes = null;
  this.pipesCount = 0;
  this.flowing = null;
  this.ended = false;
  this.endEmitted = false;
  this.reading = false;

  // a flag to be able to tell if the event 'readable'/'data' is emitted
  // immediately, or on a later tick.  We set this to true at first, because
  // any actions that shouldn't happen until "later" should generally also
  // not happen before the first read call.
  this.sync = true;

  // whenever we return null, then we set a flag to say
  // that we're awaiting a 'readable' event emission.
  this.needReadable = false;
  this.emittedReadable = false;
  this.readableListening = false;
  this.resumeScheduled = false;

  // has it been destroyed
  this.destroyed = false;

  // Crypto is kind of old and crusty.  Historically, its default string
  // encoding is 'binary' so we have to make this configurable.
  // Everything else in the universe uses 'utf8', though.
  this.defaultEncoding = options.defaultEncoding || 'utf8';

  // the number of writers that are awaiting a drain event in .pipe()s
  this.awaitDrain = 0;

  // if true, a maybeReadMore has been scheduled
  this.readingMore = false;

  this.decoder = null;
  this.encoding = null;
  if (options.encoding) {
    if (!StringDecoder) StringDecoder = __webpack_require__(/*! string_decoder/ */ "./node_modules/string_decoder/lib/string_decoder.js").StringDecoder;
    this.decoder = new StringDecoder(options.encoding);
    this.encoding = options.encoding;
  }
}

function Readable(options) {
  Duplex = Duplex || __webpack_require__(/*! ./_stream_duplex */ "./node_modules/readable-stream/lib/_stream_duplex.js");

  if (!(this instanceof Readable)) return new Readable(options);

  this._readableState = new ReadableState(options, this);

  // legacy
  this.readable = true;

  if (options) {
    if (typeof options.read === 'function') this._read = options.read;

    if (typeof options.destroy === 'function') this._destroy = options.destroy;
  }

  Stream.call(this);
}

Object.defineProperty(Readable.prototype, 'destroyed', {
  get: function () {
    if (this._readableState === undefined) {
      return false;
    }
    return this._readableState.destroyed;
  },
  set: function (value) {
    // we ignore the value if the stream
    // has not been initialized yet
    if (!this._readableState) {
      return;
    }

    // backward compatibility, the user is explicitly
    // managing destroyed
    this._readableState.destroyed = value;
  }
});

Readable.prototype.destroy = destroyImpl.destroy;
Readable.prototype._undestroy = destroyImpl.undestroy;
Readable.prototype._destroy = function (err, cb) {
  this.push(null);
  cb(err);
};

// Manually shove something into the read() buffer.
// This returns true if the highWaterMark has not been hit yet,
// similar to how Writable.write() returns true if you should
// write() some more.
Readable.prototype.push = function (chunk, encoding) {
  var state = this._readableState;
  var skipChunkCheck;

  if (!state.objectMode) {
    if (typeof chunk === 'string') {
      encoding = encoding || state.defaultEncoding;
      if (encoding !== state.encoding) {
        chunk = Buffer.from(chunk, encoding);
        encoding = '';
      }
      skipChunkCheck = true;
    }
  } else {
    skipChunkCheck = true;
  }

  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);
};

// Unshift should *always* be something directly out of read()
Readable.prototype.unshift = function (chunk) {
  return readableAddChunk(this, chunk, null, true, false);
};

function readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {
  var state = stream._readableState;
  if (chunk === null) {
    state.reading = false;
    onEofChunk(stream, state);
  } else {
    var er;
    if (!skipChunkCheck) er = chunkInvalid(state, chunk);
    if (er) {
      stream.emit('error', er);
    } else if (state.objectMode || chunk && chunk.length > 0) {
      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {
        chunk = _uint8ArrayToBuffer(chunk);
      }

      if (addToFront) {
        if (state.endEmitted) stream.emit('error', new Error('stream.unshift() after end event'));else addChunk(stream, state, chunk, true);
      } else if (state.ended) {
        stream.emit('error', new Error('stream.push() after EOF'));
      } else {
        state.reading = false;
        if (state.decoder && !encoding) {
          chunk = state.decoder.write(chunk);
          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);
        } else {
          addChunk(stream, state, chunk, false);
        }
      }
    } else if (!addToFront) {
      state.reading = false;
    }
  }

  return needMoreData(state);
}

function addChunk(stream, state, chunk, addToFront) {
  if (state.flowing && state.length === 0 && !state.sync) {
    stream.emit('data', chunk);
    stream.read(0);
  } else {
    // update the buffer info.
    state.length += state.objectMode ? 1 : chunk.length;
    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);

    if (state.needReadable) emitReadable(stream);
  }
  maybeReadMore(stream, state);
}

function chunkInvalid(state, chunk) {
  var er;
  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {
    er = new TypeError('Invalid non-string/buffer chunk');
  }
  return er;
}

// if it's past the high water mark, we can push in some more.
// Also, if we have no data yet, we can stand some
// more bytes.  This is to work around cases where hwm=0,
// such as the repl.  Also, if the push() triggered a
// readable event, and the user called read(largeNumber) such that
// needReadable was set, then we ought to push more, so that another
// 'readable' event will be triggered.
function needMoreData(state) {
  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);
}

Readable.prototype.isPaused = function () {
  return this._readableState.flowing === false;
};

// backwards compatibility.
Readable.prototype.setEncoding = function (enc) {
  if (!StringDecoder) StringDecoder = __webpack_require__(/*! string_decoder/ */ "./node_modules/string_decoder/lib/string_decoder.js").StringDecoder;
  this._readableState.decoder = new StringDecoder(enc);
  this._readableState.encoding = enc;
  return this;
};

// Don't raise the hwm > 8MB
var MAX_HWM = 0x800000;
function computeNewHighWaterMark(n) {
  if (n >= MAX_HWM) {
    n = MAX_HWM;
  } else {
    // Get the next highest power of 2 to prevent increasing hwm excessively in
    // tiny amounts
    n--;
    n |= n >>> 1;
    n |= n >>> 2;
    n |= n >>> 4;
    n |= n >>> 8;
    n |= n >>> 16;
    n++;
  }
  return n;
}

// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function howMuchToRead(n, state) {
  if (n <= 0 || state.length === 0 && state.ended) return 0;
  if (state.objectMode) return 1;
  if (n !== n) {
    // Only flow one buffer at a time
    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;
  }
  // If we're asking for more than the current hwm, then raise the hwm.
  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);
  if (n <= state.length) return n;
  // Don't have enough
  if (!state.ended) {
    state.needReadable = true;
    return 0;
  }
  return state.length;
}

// you can override either this method, or the async _read(n) below.
Readable.prototype.read = function (n) {
  debug('read', n);
  n = parseInt(n, 10);
  var state = this._readableState;
  var nOrig = n;

  if (n !== 0) state.emittedReadable = false;

  // if we're doing read(0) to trigger a readable event, but we
  // already have a bunch of data in the buffer, then just trigger
  // the 'readable' event and move on.
  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {
    debug('read: emitReadable', state.length, state.ended);
    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);
    return null;
  }

  n = howMuchToRead(n, state);

  // if we've ended, and we're now clear, then finish it up.
  if (n === 0 && state.ended) {
    if (state.length === 0) endReadable(this);
    return null;
  }

  // All the actual chunk generation logic needs to be
  // *below* the call to _read.  The reason is that in certain
  // synthetic stream cases, such as passthrough streams, _read
  // may be a completely synchronous operation which may change
  // the state of the read buffer, providing enough data when
  // before there was *not* enough.
  //
  // So, the steps are:
  // 1. Figure out what the state of things will be after we do
  // a read from the buffer.
  //
  // 2. If that resulting state will trigger a _read, then call _read.
  // Note that this may be asynchronous, or synchronous.  Yes, it is
  // deeply ugly to write APIs this way, but that still doesn't mean
  // that the Readable class should behave improperly, as streams are
  // designed to be sync/async agnostic.
  // Take note if the _read call is sync or async (ie, if the read call
  // has returned yet), so that we know whether or not it's safe to emit
  // 'readable' etc.
  //
  // 3. Actually pull the requested chunks out of the buffer and return.

  // if we need a readable event, then we need to do some reading.
  var doRead = state.needReadable;
  debug('need readable', doRead);

  // if we currently have less than the highWaterMark, then also read some
  if (state.length === 0 || state.length - n < state.highWaterMark) {
    doRead = true;
    debug('length less than watermark', doRead);
  }

  // however, if we've ended, then there's no point, and if we're already
  // reading, then it's unnecessary.
  if (state.ended || state.reading) {
    doRead = false;
    debug('reading or ended', doRead);
  } else if (doRead) {
    debug('do read');
    state.reading = true;
    state.sync = true;
    // if the length is currently zero, then we *need* a readable event.
    if (state.length === 0) state.needReadable = true;
    // call internal read method
    this._read(state.highWaterMark);
    state.sync = false;
    // If _read pushed data synchronously, then `reading` will be false,
    // and we need to re-evaluate how much data we can return to the user.
    if (!state.reading) n = howMuchToRead(nOrig, state);
  }

  var ret;
  if (n > 0) ret = fromList(n, state);else ret = null;

  if (ret === null) {
    state.needReadable = true;
    n = 0;
  } else {
    state.length -= n;
  }

  if (state.length === 0) {
    // If we have nothing in the buffer, then we want to know
    // as soon as we *do* get something into the buffer.
    if (!state.ended) state.needReadable = true;

    // If we tried to read() past the EOF, then emit end on the next tick.
    if (nOrig !== n && state.ended) endReadable(this);
  }

  if (ret !== null) this.emit('data', ret);

  return ret;
};

function onEofChunk(stream, state) {
  if (state.ended) return;
  if (state.decoder) {
    var chunk = state.decoder.end();
    if (chunk && chunk.length) {
      state.buffer.push(chunk);
      state.length += state.objectMode ? 1 : chunk.length;
    }
  }
  state.ended = true;

  // emit 'readable' now to make sure it gets picked up.
  emitReadable(stream);
}

// Don't emit readable right away in sync mode, because this can trigger
// another read() call => stack overflow.  This way, it might trigger
// a nextTick recursion warning, but that's not so bad.
function emitReadable(stream) {
  var state = stream._readableState;
  state.needReadable = false;
  if (!state.emittedReadable) {
    debug('emitReadable', state.flowing);
    state.emittedReadable = true;
    if (state.sync) pna.nextTick(emitReadable_, stream);else emitReadable_(stream);
  }
}

function emitReadable_(stream) {
  debug('emit readable');
  stream.emit('readable');
  flow(stream);
}

// at this point, the user has presumably seen the 'readable' event,
// and called read() to consume some data.  that may have triggered
// in turn another _read(n) call, in which case reading = true if
// it's in progress.
// However, if we're not ended, or reading, and the length < hwm,
// then go ahead and try to read some more preemptively.
function maybeReadMore(stream, state) {
  if (!state.readingMore) {
    state.readingMore = true;
    pna.nextTick(maybeReadMore_, stream, state);
  }
}

function maybeReadMore_(stream, state) {
  var len = state.length;
  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {
    debug('maybeReadMore read 0');
    stream.read(0);
    if (len === state.length)
      // didn't get any data, stop spinning.
      break;else len = state.length;
  }
  state.readingMore = false;
}

// abstract method.  to be overridden in specific implementation classes.
// call cb(er, data) where data is <= n in length.
// for virtual (non-string, non-buffer) streams, "length" is somewhat
// arbitrary, and perhaps not very meaningful.
Readable.prototype._read = function (n) {
  this.emit('error', new Error('_read() is not implemented'));
};

Readable.prototype.pipe = function (dest, pipeOpts) {
  var src = this;
  var state = this._readableState;

  switch (state.pipesCount) {
    case 0:
      state.pipes = dest;
      break;
    case 1:
      state.pipes = [state.pipes, dest];
      break;
    default:
      state.pipes.push(dest);
      break;
  }
  state.pipesCount += 1;
  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);

  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;

  var endFn = doEnd ? onend : unpipe;
  if (state.endEmitted) pna.nextTick(endFn);else src.once('end', endFn);

  dest.on('unpipe', onunpipe);
  function onunpipe(readable, unpipeInfo) {
    debug('onunpipe');
    if (readable === src) {
      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {
        unpipeInfo.hasUnpiped = true;
        cleanup();
      }
    }
  }

  function onend() {
    debug('onend');
    dest.end();
  }

  // when the dest drains, it reduces the awaitDrain counter
  // on the source.  This would be more elegant with a .once()
  // handler in flow(), but adding and removing repeatedly is
  // too slow.
  var ondrain = pipeOnDrain(src);
  dest.on('drain', ondrain);

  var cleanedUp = false;
  function cleanup() {
    debug('cleanup');
    // cleanup event handlers once the pipe is broken
    dest.removeListener('close', onclose);
    dest.removeListener('finish', onfinish);
    dest.removeListener('drain', ondrain);
    dest.removeListener('error', onerror);
    dest.removeListener('unpipe', onunpipe);
    src.removeListener('end', onend);
    src.removeListener('end', unpipe);
    src.removeListener('data', ondata);

    cleanedUp = true;

    // if the reader is waiting for a drain event from this
    // specific writer, then it would cause it to never start
    // flowing again.
    // So, if this is awaiting a drain, then we just call it now.
    // If we don't know, then assume that we are waiting for one.
    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();
  }

  // If the user pushes more data while we're writing to dest then we'll end up
  // in ondata again. However, we only want to increase awaitDrain once because
  // dest will only emit one 'drain' event for the multiple writes.
  // => Introduce a guard on increasing awaitDrain.
  var increasedAwaitDrain = false;
  src.on('data', ondata);
  function ondata(chunk) {
    debug('ondata');
    increasedAwaitDrain = false;
    var ret = dest.write(chunk);
    if (false === ret && !increasedAwaitDrain) {
      // If the user unpiped during `dest.write()`, it is possible
      // to get stuck in a permanently paused state if that write
      // also returned false.
      // => Check whether `dest` is still a piping destination.
      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {
        debug('false write response, pause', src._readableState.awaitDrain);
        src._readableState.awaitDrain++;
        increasedAwaitDrain = true;
      }
      src.pause();
    }
  }

  // if the dest has an error, then stop piping into it.
  // however, don't suppress the throwing behavior for this.
  function onerror(er) {
    debug('onerror', er);
    unpipe();
    dest.removeListener('error', onerror);
    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);
  }

  // Make sure our error handler is attached before userland ones.
  prependListener(dest, 'error', onerror);

  // Both close and finish should trigger unpipe, but only once.
  function onclose() {
    dest.removeListener('finish', onfinish);
    unpipe();
  }
  dest.once('close', onclose);
  function onfinish() {
    debug('onfinish');
    dest.removeListener('close', onclose);
    unpipe();
  }
  dest.once('finish', onfinish);

  function unpipe() {
    debug('unpipe');
    src.unpipe(dest);
  }

  // tell the dest that it's being piped to
  dest.emit('pipe', src);

  // start the flow if it hasn't been started already.
  if (!state.flowing) {
    debug('pipe resume');
    src.resume();
  }

  return dest;
};

function pipeOnDrain(src) {
  return function () {
    var state = src._readableState;
    debug('pipeOnDrain', state.awaitDrain);
    if (state.awaitDrain) state.awaitDrain--;
    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {
      state.flowing = true;
      flow(src);
    }
  };
}

Readable.prototype.unpipe = function (dest) {
  var state = this._readableState;
  var unpipeInfo = { hasUnpiped: false };

  // if we're not piping anywhere, then do nothing.
  if (state.pipesCount === 0) return this;

  // just one destination.  most common case.
  if (state.pipesCount === 1) {
    // passed in one, but it's not the right one.
    if (dest && dest !== state.pipes) return this;

    if (!dest) dest = state.pipes;

    // got a match.
    state.pipes = null;
    state.pipesCount = 0;
    state.flowing = false;
    if (dest) dest.emit('unpipe', this, unpipeInfo);
    return this;
  }

  // slow case. multiple pipe destinations.

  if (!dest) {
    // remove all.
    var dests = state.pipes;
    var len = state.pipesCount;
    state.pipes = null;
    state.pipesCount = 0;
    state.flowing = false;

    for (var i = 0; i < len; i++) {
      dests[i].emit('unpipe', this, unpipeInfo);
    }return this;
  }

  // try to find the right one.
  var index = indexOf(state.pipes, dest);
  if (index === -1) return this;

  state.pipes.splice(index, 1);
  state.pipesCount -= 1;
  if (state.pipesCount === 1) state.pipes = state.pipes[0];

  dest.emit('unpipe', this, unpipeInfo);

  return this;
};

// set up data events if they are asked for
// Ensure readable listeners eventually get something
Readable.prototype.on = function (ev, fn) {
  var res = Stream.prototype.on.call(this, ev, fn);

  if (ev === 'data') {
    // Start flowing on next tick if stream isn't explicitly paused
    if (this._readableState.flowing !== false) this.resume();
  } else if (ev === 'readable') {
    var state = this._readableState;
    if (!state.endEmitted && !state.readableListening) {
      state.readableListening = state.needReadable = true;
      state.emittedReadable = false;
      if (!state.reading) {
        pna.nextTick(nReadingNextTick, this);
      } else if (state.length) {
        emitReadable(this);
      }
    }
  }

  return res;
};
Readable.prototype.addListener = Readable.prototype.on;

function nReadingNextTick(self) {
  debug('readable nexttick read 0');
  self.read(0);
}

// pause() and resume() are remnants of the legacy readable stream API
// If the user uses them, then switch into old mode.
Readable.prototype.resume = function () {
  var state = this._readableState;
  if (!state.flowing) {
    debug('resume');
    state.flowing = true;
    resume(this, state);
  }
  return this;
};

function resume(stream, state) {
  if (!state.resumeScheduled) {
    state.resumeScheduled = true;
    pna.nextTick(resume_, stream, state);
  }
}

function resume_(stream, state) {
  if (!state.reading) {
    debug('resume read 0');
    stream.read(0);
  }

  state.resumeScheduled = false;
  state.awaitDrain = 0;
  stream.emit('resume');
  flow(stream);
  if (state.flowing && !state.reading) stream.read(0);
}

Readable.prototype.pause = function () {
  debug('call pause flowing=%j', this._readableState.flowing);
  if (false !== this._readableState.flowing) {
    debug('pause');
    this._readableState.flowing = false;
    this.emit('pause');
  }
  return this;
};

function flow(stream) {
  var state = stream._readableState;
  debug('flow', state.flowing);
  while (state.flowing && stream.read() !== null) {}
}

// wrap an old-style stream as the async data source.
// This is *not* part of the readable stream interface.
// It is an ugly unfortunate mess of history.
Readable.prototype.wrap = function (stream) {
  var _this = this;

  var state = this._readableState;
  var paused = false;

  stream.on('end', function () {
    debug('wrapped end');
    if (state.decoder && !state.ended) {
      var chunk = state.decoder.end();
      if (chunk && chunk.length) _this.push(chunk);
    }

    _this.push(null);
  });

  stream.on('data', function (chunk) {
    debug('wrapped data');
    if (state.decoder) chunk = state.decoder.write(chunk);

    // don't skip over falsy values in objectMode
    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;

    var ret = _this.push(chunk);
    if (!ret) {
      paused = true;
      stream.pause();
    }
  });

  // proxy all the other methods.
  // important when wrapping filters and duplexes.
  for (var i in stream) {
    if (this[i] === undefined && typeof stream[i] === 'function') {
      this[i] = function (method) {
        return function () {
          return stream[method].apply(stream, arguments);
        };
      }(i);
    }
  }

  // proxy certain important events.
  for (var n = 0; n < kProxyEvents.length; n++) {
    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));
  }

  // when we try to consume some more bytes, simply unpause the
  // underlying stream.
  this._read = function (n) {
    debug('wrapped _read', n);
    if (paused) {
      paused = false;
      stream.resume();
    }
  };

  return this;
};

Object.defineProperty(Readable.prototype, 'readableHighWaterMark', {
  // making it explicit this property is not enumerable
  // because otherwise some prototype manipulation in
  // userland will fail
  enumerable: false,
  get: function () {
    return this._readableState.highWaterMark;
  }
});

// exposed for testing purposes only.
Readable._fromList = fromList;

// Pluck off n bytes from an array of buffers.
// Length is the combined lengths of all the buffers in the list.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function fromList(n, state) {
  // nothing buffered
  if (state.length === 0) return null;

  var ret;
  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {
    // read it all, truncate the list
    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);
    state.buffer.clear();
  } else {
    // read part of list
    ret = fromListPartial(n, state.buffer, state.decoder);
  }

  return ret;
}

// Extracts only enough buffered data to satisfy the amount requested.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function fromListPartial(n, list, hasStrings) {
  var ret;
  if (n < list.head.data.length) {
    // slice is the same for buffers and strings
    ret = list.head.data.slice(0, n);
    list.head.data = list.head.data.slice(n);
  } else if (n === list.head.data.length) {
    // first chunk is a perfect match
    ret = list.shift();
  } else {
    // result spans more than one buffer
    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);
  }
  return ret;
}

// Copies a specified amount of characters from the list of buffered data
// chunks.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function copyFromBufferString(n, list) {
  var p = list.head;
  var c = 1;
  var ret = p.data;
  n -= ret.length;
  while (p = p.next) {
    var str = p.data;
    var nb = n > str.length ? str.length : n;
    if (nb === str.length) ret += str;else ret += str.slice(0, n);
    n -= nb;
    if (n === 0) {
      if (nb === str.length) {
        ++c;
        if (p.next) list.head = p.next;else list.head = list.tail = null;
      } else {
        list.head = p;
        p.data = str.slice(nb);
      }
      break;
    }
    ++c;
  }
  list.length -= c;
  return ret;
}

// Copies a specified amount of bytes from the list of buffered data chunks.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function copyFromBuffer(n, list) {
  var ret = Buffer.allocUnsafe(n);
  var p = list.head;
  var c = 1;
  p.data.copy(ret);
  n -= p.data.length;
  while (p = p.next) {
    var buf = p.data;
    var nb = n > buf.length ? buf.length : n;
    buf.copy(ret, ret.length - n, 0, nb);
    n -= nb;
    if (n === 0) {
      if (nb === buf.length) {
        ++c;
        if (p.next) list.head = p.next;else list.head = list.tail = null;
      } else {
        list.head = p;
        p.data = buf.slice(nb);
      }
      break;
    }
    ++c;
  }
  list.length -= c;
  return ret;
}

function endReadable(stream) {
  var state = stream._readableState;

  // If we get here before consuming all the bytes, then that is a
  // bug in node.  Should never happen.
  if (state.length > 0) throw new Error('"endReadable()" called on non-empty stream');

  if (!state.endEmitted) {
    state.ended = true;
    pna.nextTick(endReadableNT, state, stream);
  }
}

function endReadableNT(state, stream) {
  // Check that we didn't get one last unshift.
  if (!state.endEmitted && state.length === 0) {
    state.endEmitted = true;
    stream.readable = false;
    stream.emit('end');
  }
}

function indexOf(xs, x) {
  for (var i = 0, l = xs.length; i < l; i++) {
    if (xs[i] === x) return i;
  }
  return -1;
}
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js"), __webpack_require__(/*! ./../../process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./node_modules/readable-stream/lib/_stream_transform.js":
/*!***************************************************************!*\
  !*** ./node_modules/readable-stream/lib/_stream_transform.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// a transform stream is a readable/writable stream where you do
// something with the data.  Sometimes it's called a "filter",
// but that's not a great name for it, since that implies a thing where
// some bits pass through, and others are simply ignored.  (That would
// be a valid example of a transform, of course.)
//
// While the output is causally related to the input, it's not a
// necessarily symmetric or synchronous transformation.  For example,
// a zlib stream might take multiple plain-text writes(), and then
// emit a single compressed chunk some time in the future.
//
// Here's how this works:
//
// The Transform stream has all the aspects of the readable and writable
// stream classes.  When you write(chunk), that calls _write(chunk,cb)
// internally, and returns false if there's a lot of pending writes
// buffered up.  When you call read(), that calls _read(n) until
// there's enough pending readable data buffered up.
//
// In a transform stream, the written data is placed in a buffer.  When
// _read(n) is called, it transforms the queued up data, calling the
// buffered _write cb's as it consumes chunks.  If consuming a single
// written chunk would result in multiple output chunks, then the first
// outputted bit calls the readcb, and subsequent chunks just go into
// the read buffer, and will cause it to emit 'readable' if necessary.
//
// This way, back-pressure is actually determined by the reading side,
// since _read has to be called to start processing a new chunk.  However,
// a pathological inflate type of transform can cause excessive buffering
// here.  For example, imagine a stream where every byte of input is
// interpreted as an integer from 0-255, and then results in that many
// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in
// 1kb of data being output.  In this case, you could write a very small
// amount of input, and end up with a very large amount of output.  In
// such a pathological inflating mechanism, there'd be no way to tell
// the system to stop doing the transform.  A single 4MB write could
// cause the system to run out of memory.
//
// However, even in such a pathological case, only a single written chunk
// would be consumed, and then the rest would wait (un-transformed) until
// the results of the previous transformed chunk were consumed.



module.exports = Transform;

var Duplex = __webpack_require__(/*! ./_stream_duplex */ "./node_modules/readable-stream/lib/_stream_duplex.js");

/*<replacement>*/
var util = __webpack_require__(/*! core-util-is */ "./node_modules/core-util-is/lib/util.js");
util.inherits = __webpack_require__(/*! inherits */ "./node_modules/inherits/inherits_browser.js");
/*</replacement>*/

util.inherits(Transform, Duplex);

function afterTransform(er, data) {
  var ts = this._transformState;
  ts.transforming = false;

  var cb = ts.writecb;

  if (!cb) {
    return this.emit('error', new Error('write callback called multiple times'));
  }

  ts.writechunk = null;
  ts.writecb = null;

  if (data != null) // single equals check for both `null` and `undefined`
    this.push(data);

  cb(er);

  var rs = this._readableState;
  rs.reading = false;
  if (rs.needReadable || rs.length < rs.highWaterMark) {
    this._read(rs.highWaterMark);
  }
}

function Transform(options) {
  if (!(this instanceof Transform)) return new Transform(options);

  Duplex.call(this, options);

  this._transformState = {
    afterTransform: afterTransform.bind(this),
    needTransform: false,
    transforming: false,
    writecb: null,
    writechunk: null,
    writeencoding: null
  };

  // start out asking for a readable event once data is transformed.
  this._readableState.needReadable = true;

  // we have implemented the _read method, and done the other things
  // that Readable wants before the first _read call, so unset the
  // sync guard flag.
  this._readableState.sync = false;

  if (options) {
    if (typeof options.transform === 'function') this._transform = options.transform;

    if (typeof options.flush === 'function') this._flush = options.flush;
  }

  // When the writable side finishes, then flush out anything remaining.
  this.on('prefinish', prefinish);
}

function prefinish() {
  var _this = this;

  if (typeof this._flush === 'function') {
    this._flush(function (er, data) {
      done(_this, er, data);
    });
  } else {
    done(this, null, null);
  }
}

Transform.prototype.push = function (chunk, encoding) {
  this._transformState.needTransform = false;
  return Duplex.prototype.push.call(this, chunk, encoding);
};

// This is the part where you do stuff!
// override this function in implementation classes.
// 'chunk' is an input chunk.
//
// Call `push(newChunk)` to pass along transformed output
// to the readable side.  You may call 'push' zero or more times.
//
// Call `cb(err)` when you are done with this chunk.  If you pass
// an error, then that'll put the hurt on the whole operation.  If you
// never call cb(), then you'll never get another chunk.
Transform.prototype._transform = function (chunk, encoding, cb) {
  throw new Error('_transform() is not implemented');
};

Transform.prototype._write = function (chunk, encoding, cb) {
  var ts = this._transformState;
  ts.writecb = cb;
  ts.writechunk = chunk;
  ts.writeencoding = encoding;
  if (!ts.transforming) {
    var rs = this._readableState;
    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);
  }
};

// Doesn't matter what the args are here.
// _transform does all the work.
// That we got here means that the readable side wants more data.
Transform.prototype._read = function (n) {
  var ts = this._transformState;

  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {
    ts.transforming = true;
    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);
  } else {
    // mark that we need a transform, so that any data that comes in
    // will get processed, now that we've asked for it.
    ts.needTransform = true;
  }
};

Transform.prototype._destroy = function (err, cb) {
  var _this2 = this;

  Duplex.prototype._destroy.call(this, err, function (err2) {
    cb(err2);
    _this2.emit('close');
  });
};

function done(stream, er, data) {
  if (er) return stream.emit('error', er);

  if (data != null) // single equals check for both `null` and `undefined`
    stream.push(data);

  // if there's nothing in the write buffer, then that means
  // that nothing more will ever be provided
  if (stream._writableState.length) throw new Error('Calling transform done when ws.length != 0');

  if (stream._transformState.transforming) throw new Error('Calling transform done when still transforming');

  return stream.push(null);
}

/***/ }),

/***/ "./node_modules/readable-stream/lib/_stream_writable.js":
/*!**************************************************************!*\
  !*** ./node_modules/readable-stream/lib/_stream_writable.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(process, setImmediate, global) {// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// A bit simpler than readable streams.
// Implement an async ._write(chunk, encoding, cb), and it'll handle all
// the drain event emission and buffering.



/*<replacement>*/

var pna = __webpack_require__(/*! process-nextick-args */ "./node_modules/process-nextick-args/index.js");
/*</replacement>*/

module.exports = Writable;

/* <replacement> */
function WriteReq(chunk, encoding, cb) {
  this.chunk = chunk;
  this.encoding = encoding;
  this.callback = cb;
  this.next = null;
}

// It seems a linked list but it is not
// there will be only 2 of these for each stream
function CorkedRequest(state) {
  var _this = this;

  this.next = null;
  this.entry = null;
  this.finish = function () {
    onCorkedFinish(_this, state);
  };
}
/* </replacement> */

/*<replacement>*/
var asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : pna.nextTick;
/*</replacement>*/

/*<replacement>*/
var Duplex;
/*</replacement>*/

Writable.WritableState = WritableState;

/*<replacement>*/
var util = __webpack_require__(/*! core-util-is */ "./node_modules/core-util-is/lib/util.js");
util.inherits = __webpack_require__(/*! inherits */ "./node_modules/inherits/inherits_browser.js");
/*</replacement>*/

/*<replacement>*/
var internalUtil = {
  deprecate: __webpack_require__(/*! util-deprecate */ "./node_modules/util-deprecate/browser.js")
};
/*</replacement>*/

/*<replacement>*/
var Stream = __webpack_require__(/*! ./internal/streams/stream */ "./node_modules/readable-stream/lib/internal/streams/stream-browser.js");
/*</replacement>*/

/*<replacement>*/

var Buffer = __webpack_require__(/*! safe-buffer */ "./node_modules/safe-buffer/index.js").Buffer;
var OurUint8Array = global.Uint8Array || function () {};
function _uint8ArrayToBuffer(chunk) {
  return Buffer.from(chunk);
}
function _isUint8Array(obj) {
  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;
}

/*</replacement>*/

var destroyImpl = __webpack_require__(/*! ./internal/streams/destroy */ "./node_modules/readable-stream/lib/internal/streams/destroy.js");

util.inherits(Writable, Stream);

function nop() {}

function WritableState(options, stream) {
  Duplex = Duplex || __webpack_require__(/*! ./_stream_duplex */ "./node_modules/readable-stream/lib/_stream_duplex.js");

  options = options || {};

  // Duplex streams are both readable and writable, but share
  // the same options object.
  // However, some cases require setting options to different
  // values for the readable and the writable sides of the duplex stream.
  // These options can be provided separately as readableXXX and writableXXX.
  var isDuplex = stream instanceof Duplex;

  // object stream flag to indicate whether or not this stream
  // contains buffers or objects.
  this.objectMode = !!options.objectMode;

  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;

  // the point at which write() starts returning false
  // Note: 0 is a valid value, means that we always return false if
  // the entire buffer is not flushed immediately on write()
  var hwm = options.highWaterMark;
  var writableHwm = options.writableHighWaterMark;
  var defaultHwm = this.objectMode ? 16 : 16 * 1024;

  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (writableHwm || writableHwm === 0)) this.highWaterMark = writableHwm;else this.highWaterMark = defaultHwm;

  // cast to ints.
  this.highWaterMark = Math.floor(this.highWaterMark);

  // if _final has been called
  this.finalCalled = false;

  // drain event flag.
  this.needDrain = false;
  // at the start of calling end()
  this.ending = false;
  // when end() has been called, and returned
  this.ended = false;
  // when 'finish' is emitted
  this.finished = false;

  // has it been destroyed
  this.destroyed = false;

  // should we decode strings into buffers before passing to _write?
  // this is here so that some node-core streams can optimize string
  // handling at a lower level.
  var noDecode = options.decodeStrings === false;
  this.decodeStrings = !noDecode;

  // Crypto is kind of old and crusty.  Historically, its default string
  // encoding is 'binary' so we have to make this configurable.
  // Everything else in the universe uses 'utf8', though.
  this.defaultEncoding = options.defaultEncoding || 'utf8';

  // not an actual buffer we keep track of, but a measurement
  // of how much we're waiting to get pushed to some underlying
  // socket or file.
  this.length = 0;

  // a flag to see when we're in the middle of a write.
  this.writing = false;

  // when true all writes will be buffered until .uncork() call
  this.corked = 0;

  // a flag to be able to tell if the onwrite cb is called immediately,
  // or on a later tick.  We set this to true at first, because any
  // actions that shouldn't happen until "later" should generally also
  // not happen before the first write call.
  this.sync = true;

  // a flag to know if we're processing previously buffered items, which
  // may call the _write() callback in the same tick, so that we don't
  // end up in an overlapped onwrite situation.
  this.bufferProcessing = false;

  // the callback that's passed to _write(chunk,cb)
  this.onwrite = function (er) {
    onwrite(stream, er);
  };

  // the callback that the user supplies to write(chunk,encoding,cb)
  this.writecb = null;

  // the amount that is being written when _write is called.
  this.writelen = 0;

  this.bufferedRequest = null;
  this.lastBufferedRequest = null;

  // number of pending user-supplied write callbacks
  // this must be 0 before 'finish' can be emitted
  this.pendingcb = 0;

  // emit prefinish if the only thing we're waiting for is _write cbs
  // This is relevant for synchronous Transform streams
  this.prefinished = false;

  // True if the error was already emitted and should not be thrown again
  this.errorEmitted = false;

  // count buffered requests
  this.bufferedRequestCount = 0;

  // allocate the first CorkedRequest, there is always
  // one allocated and free to use, and we maintain at most two
  this.corkedRequestsFree = new CorkedRequest(this);
}

WritableState.prototype.getBuffer = function getBuffer() {
  var current = this.bufferedRequest;
  var out = [];
  while (current) {
    out.push(current);
    current = current.next;
  }
  return out;
};

(function () {
  try {
    Object.defineProperty(WritableState.prototype, 'buffer', {
      get: internalUtil.deprecate(function () {
        return this.getBuffer();
      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')
    });
  } catch (_) {}
})();

// Test _writableState for inheritance to account for Duplex streams,
// whose prototype chain only points to Readable.
var realHasInstance;
if (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {
  realHasInstance = Function.prototype[Symbol.hasInstance];
  Object.defineProperty(Writable, Symbol.hasInstance, {
    value: function (object) {
      if (realHasInstance.call(this, object)) return true;
      if (this !== Writable) return false;

      return object && object._writableState instanceof WritableState;
    }
  });
} else {
  realHasInstance = function (object) {
    return object instanceof this;
  };
}

function Writable(options) {
  Duplex = Duplex || __webpack_require__(/*! ./_stream_duplex */ "./node_modules/readable-stream/lib/_stream_duplex.js");

  // Writable ctor is applied to Duplexes, too.
  // `realHasInstance` is necessary because using plain `instanceof`
  // would return false, as no `_writableState` property is attached.

  // Trying to use the custom `instanceof` for Writable here will also break the
  // Node.js LazyTransform implementation, which has a non-trivial getter for
  // `_writableState` that would lead to infinite recursion.
  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {
    return new Writable(options);
  }

  this._writableState = new WritableState(options, this);

  // legacy.
  this.writable = true;

  if (options) {
    if (typeof options.write === 'function') this._write = options.write;

    if (typeof options.writev === 'function') this._writev = options.writev;

    if (typeof options.destroy === 'function') this._destroy = options.destroy;

    if (typeof options.final === 'function') this._final = options.final;
  }

  Stream.call(this);
}

// Otherwise people can pipe Writable streams, which is just wrong.
Writable.prototype.pipe = function () {
  this.emit('error', new Error('Cannot pipe, not readable'));
};

function writeAfterEnd(stream, cb) {
  var er = new Error('write after end');
  // TODO: defer error events consistently everywhere, not just the cb
  stream.emit('error', er);
  pna.nextTick(cb, er);
}

// Checks that a user-supplied chunk is valid, especially for the particular
// mode the stream is in. Currently this means that `null` is never accepted
// and undefined/non-string values are only allowed in object mode.
function validChunk(stream, state, chunk, cb) {
  var valid = true;
  var er = false;

  if (chunk === null) {
    er = new TypeError('May not write null values to stream');
  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {
    er = new TypeError('Invalid non-string/buffer chunk');
  }
  if (er) {
    stream.emit('error', er);
    pna.nextTick(cb, er);
    valid = false;
  }
  return valid;
}

Writable.prototype.write = function (chunk, encoding, cb) {
  var state = this._writableState;
  var ret = false;
  var isBuf = !state.objectMode && _isUint8Array(chunk);

  if (isBuf && !Buffer.isBuffer(chunk)) {
    chunk = _uint8ArrayToBuffer(chunk);
  }

  if (typeof encoding === 'function') {
    cb = encoding;
    encoding = null;
  }

  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;

  if (typeof cb !== 'function') cb = nop;

  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {
    state.pendingcb++;
    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);
  }

  return ret;
};

Writable.prototype.cork = function () {
  var state = this._writableState;

  state.corked++;
};

Writable.prototype.uncork = function () {
  var state = this._writableState;

  if (state.corked) {
    state.corked--;

    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);
  }
};

Writable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {
  // node::ParseEncoding() requires lower case.
  if (typeof encoding === 'string') encoding = encoding.toLowerCase();
  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);
  this._writableState.defaultEncoding = encoding;
  return this;
};

function decodeChunk(state, chunk, encoding) {
  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {
    chunk = Buffer.from(chunk, encoding);
  }
  return chunk;
}

Object.defineProperty(Writable.prototype, 'writableHighWaterMark', {
  // making it explicit this property is not enumerable
  // because otherwise some prototype manipulation in
  // userland will fail
  enumerable: false,
  get: function () {
    return this._writableState.highWaterMark;
  }
});

// if we're already writing something, then just put this
// in the queue, and wait our turn.  Otherwise, call _write
// If we return false, then we need a drain event, so set that flag.
function writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {
  if (!isBuf) {
    var newChunk = decodeChunk(state, chunk, encoding);
    if (chunk !== newChunk) {
      isBuf = true;
      encoding = 'buffer';
      chunk = newChunk;
    }
  }
  var len = state.objectMode ? 1 : chunk.length;

  state.length += len;

  var ret = state.length < state.highWaterMark;
  // we must ensure that previous needDrain will not be reset to false.
  if (!ret) state.needDrain = true;

  if (state.writing || state.corked) {
    var last = state.lastBufferedRequest;
    state.lastBufferedRequest = {
      chunk: chunk,
      encoding: encoding,
      isBuf: isBuf,
      callback: cb,
      next: null
    };
    if (last) {
      last.next = state.lastBufferedRequest;
    } else {
      state.bufferedRequest = state.lastBufferedRequest;
    }
    state.bufferedRequestCount += 1;
  } else {
    doWrite(stream, state, false, len, chunk, encoding, cb);
  }

  return ret;
}

function doWrite(stream, state, writev, len, chunk, encoding, cb) {
  state.writelen = len;
  state.writecb = cb;
  state.writing = true;
  state.sync = true;
  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);
  state.sync = false;
}

function onwriteError(stream, state, sync, er, cb) {
  --state.pendingcb;

  if (sync) {
    // defer the callback if we are being called synchronously
    // to avoid piling up things on the stack
    pna.nextTick(cb, er);
    // this can emit finish, and it will always happen
    // after error
    pna.nextTick(finishMaybe, stream, state);
    stream._writableState.errorEmitted = true;
    stream.emit('error', er);
  } else {
    // the caller expect this to happen before if
    // it is async
    cb(er);
    stream._writableState.errorEmitted = true;
    stream.emit('error', er);
    // this can emit finish, but finish must
    // always follow error
    finishMaybe(stream, state);
  }
}

function onwriteStateUpdate(state) {
  state.writing = false;
  state.writecb = null;
  state.length -= state.writelen;
  state.writelen = 0;
}

function onwrite(stream, er) {
  var state = stream._writableState;
  var sync = state.sync;
  var cb = state.writecb;

  onwriteStateUpdate(state);

  if (er) onwriteError(stream, state, sync, er, cb);else {
    // Check if we're actually ready to finish, but don't emit yet
    var finished = needFinish(state);

    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {
      clearBuffer(stream, state);
    }

    if (sync) {
      /*<replacement>*/
      asyncWrite(afterWrite, stream, state, finished, cb);
      /*</replacement>*/
    } else {
      afterWrite(stream, state, finished, cb);
    }
  }
}

function afterWrite(stream, state, finished, cb) {
  if (!finished) onwriteDrain(stream, state);
  state.pendingcb--;
  cb();
  finishMaybe(stream, state);
}

// Must force callback to be called on nextTick, so that we don't
// emit 'drain' before the write() consumer gets the 'false' return
// value, and has a chance to attach a 'drain' listener.
function onwriteDrain(stream, state) {
  if (state.length === 0 && state.needDrain) {
    state.needDrain = false;
    stream.emit('drain');
  }
}

// if there's something in the buffer waiting, then process it
function clearBuffer(stream, state) {
  state.bufferProcessing = true;
  var entry = state.bufferedRequest;

  if (stream._writev && entry && entry.next) {
    // Fast case, write everything using _writev()
    var l = state.bufferedRequestCount;
    var buffer = new Array(l);
    var holder = state.corkedRequestsFree;
    holder.entry = entry;

    var count = 0;
    var allBuffers = true;
    while (entry) {
      buffer[count] = entry;
      if (!entry.isBuf) allBuffers = false;
      entry = entry.next;
      count += 1;
    }
    buffer.allBuffers = allBuffers;

    doWrite(stream, state, true, state.length, buffer, '', holder.finish);

    // doWrite is almost always async, defer these to save a bit of time
    // as the hot path ends with doWrite
    state.pendingcb++;
    state.lastBufferedRequest = null;
    if (holder.next) {
      state.corkedRequestsFree = holder.next;
      holder.next = null;
    } else {
      state.corkedRequestsFree = new CorkedRequest(state);
    }
    state.bufferedRequestCount = 0;
  } else {
    // Slow case, write chunks one-by-one
    while (entry) {
      var chunk = entry.chunk;
      var encoding = entry.encoding;
      var cb = entry.callback;
      var len = state.objectMode ? 1 : chunk.length;

      doWrite(stream, state, false, len, chunk, encoding, cb);
      entry = entry.next;
      state.bufferedRequestCount--;
      // if we didn't call the onwrite immediately, then
      // it means that we need to wait until it does.
      // also, that means that the chunk and cb are currently
      // being processed, so move the buffer counter past them.
      if (state.writing) {
        break;
      }
    }

    if (entry === null) state.lastBufferedRequest = null;
  }

  state.bufferedRequest = entry;
  state.bufferProcessing = false;
}

Writable.prototype._write = function (chunk, encoding, cb) {
  cb(new Error('_write() is not implemented'));
};

Writable.prototype._writev = null;

Writable.prototype.end = function (chunk, encoding, cb) {
  var state = this._writableState;

  if (typeof chunk === 'function') {
    cb = chunk;
    chunk = null;
    encoding = null;
  } else if (typeof encoding === 'function') {
    cb = encoding;
    encoding = null;
  }

  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);

  // .end() fully uncorks
  if (state.corked) {
    state.corked = 1;
    this.uncork();
  }

  // ignore unnecessary end() calls.
  if (!state.ending && !state.finished) endWritable(this, state, cb);
};

function needFinish(state) {
  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;
}
function callFinal(stream, state) {
  stream._final(function (err) {
    state.pendingcb--;
    if (err) {
      stream.emit('error', err);
    }
    state.prefinished = true;
    stream.emit('prefinish');
    finishMaybe(stream, state);
  });
}
function prefinish(stream, state) {
  if (!state.prefinished && !state.finalCalled) {
    if (typeof stream._final === 'function') {
      state.pendingcb++;
      state.finalCalled = true;
      pna.nextTick(callFinal, stream, state);
    } else {
      state.prefinished = true;
      stream.emit('prefinish');
    }
  }
}

function finishMaybe(stream, state) {
  var need = needFinish(state);
  if (need) {
    prefinish(stream, state);
    if (state.pendingcb === 0) {
      state.finished = true;
      stream.emit('finish');
    }
  }
  return need;
}

function endWritable(stream, state, cb) {
  state.ending = true;
  finishMaybe(stream, state);
  if (cb) {
    if (state.finished) pna.nextTick(cb);else stream.once('finish', cb);
  }
  state.ended = true;
  stream.writable = false;
}

function onCorkedFinish(corkReq, state, err) {
  var entry = corkReq.entry;
  corkReq.entry = null;
  while (entry) {
    var cb = entry.callback;
    state.pendingcb--;
    cb(err);
    entry = entry.next;
  }
  if (state.corkedRequestsFree) {
    state.corkedRequestsFree.next = corkReq;
  } else {
    state.corkedRequestsFree = corkReq;
  }
}

Object.defineProperty(Writable.prototype, 'destroyed', {
  get: function () {
    if (this._writableState === undefined) {
      return false;
    }
    return this._writableState.destroyed;
  },
  set: function (value) {
    // we ignore the value if the stream
    // has not been initialized yet
    if (!this._writableState) {
      return;
    }

    // backward compatibility, the user is explicitly
    // managing destroyed
    this._writableState.destroyed = value;
  }
});

Writable.prototype.destroy = destroyImpl.destroy;
Writable.prototype._undestroy = destroyImpl.undestroy;
Writable.prototype._destroy = function (err, cb) {
  this.end();
  cb(err);
};
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../process/browser.js */ "./node_modules/process/browser.js"), __webpack_require__(/*! ./../../timers-browserify/main.js */ "./node_modules/timers-browserify/main.js").setImmediate, __webpack_require__(/*! ./../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/readable-stream/lib/internal/streams/BufferList.js":
/*!*************************************************************************!*\
  !*** ./node_modules/readable-stream/lib/internal/streams/BufferList.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Buffer = __webpack_require__(/*! safe-buffer */ "./node_modules/safe-buffer/index.js").Buffer;
var util = __webpack_require__(/*! util */ 1);

function copyBuffer(src, target, offset) {
  src.copy(target, offset);
}

module.exports = function () {
  function BufferList() {
    _classCallCheck(this, BufferList);

    this.head = null;
    this.tail = null;
    this.length = 0;
  }

  BufferList.prototype.push = function push(v) {
    var entry = { data: v, next: null };
    if (this.length > 0) this.tail.next = entry;else this.head = entry;
    this.tail = entry;
    ++this.length;
  };

  BufferList.prototype.unshift = function unshift(v) {
    var entry = { data: v, next: this.head };
    if (this.length === 0) this.tail = entry;
    this.head = entry;
    ++this.length;
  };

  BufferList.prototype.shift = function shift() {
    if (this.length === 0) return;
    var ret = this.head.data;
    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;
    --this.length;
    return ret;
  };

  BufferList.prototype.clear = function clear() {
    this.head = this.tail = null;
    this.length = 0;
  };

  BufferList.prototype.join = function join(s) {
    if (this.length === 0) return '';
    var p = this.head;
    var ret = '' + p.data;
    while (p = p.next) {
      ret += s + p.data;
    }return ret;
  };

  BufferList.prototype.concat = function concat(n) {
    if (this.length === 0) return Buffer.alloc(0);
    if (this.length === 1) return this.head.data;
    var ret = Buffer.allocUnsafe(n >>> 0);
    var p = this.head;
    var i = 0;
    while (p) {
      copyBuffer(p.data, ret, i);
      i += p.data.length;
      p = p.next;
    }
    return ret;
  };

  return BufferList;
}();

if (util && util.inspect && util.inspect.custom) {
  module.exports.prototype[util.inspect.custom] = function () {
    var obj = util.inspect({ length: this.length });
    return this.constructor.name + ' ' + obj;
  };
}

/***/ }),

/***/ "./node_modules/readable-stream/lib/internal/streams/destroy.js":
/*!**********************************************************************!*\
  !*** ./node_modules/readable-stream/lib/internal/streams/destroy.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*<replacement>*/

var pna = __webpack_require__(/*! process-nextick-args */ "./node_modules/process-nextick-args/index.js");
/*</replacement>*/

// undocumented cb() API, needed for core, not for public API
function destroy(err, cb) {
  var _this = this;

  var readableDestroyed = this._readableState && this._readableState.destroyed;
  var writableDestroyed = this._writableState && this._writableState.destroyed;

  if (readableDestroyed || writableDestroyed) {
    if (cb) {
      cb(err);
    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {
      pna.nextTick(emitErrorNT, this, err);
    }
    return this;
  }

  // we set destroyed to true before firing error callbacks in order
  // to make it re-entrance safe in case destroy() is called within callbacks

  if (this._readableState) {
    this._readableState.destroyed = true;
  }

  // if this is a duplex stream mark the writable part as destroyed as well
  if (this._writableState) {
    this._writableState.destroyed = true;
  }

  this._destroy(err || null, function (err) {
    if (!cb && err) {
      pna.nextTick(emitErrorNT, _this, err);
      if (_this._writableState) {
        _this._writableState.errorEmitted = true;
      }
    } else if (cb) {
      cb(err);
    }
  });

  return this;
}

function undestroy() {
  if (this._readableState) {
    this._readableState.destroyed = false;
    this._readableState.reading = false;
    this._readableState.ended = false;
    this._readableState.endEmitted = false;
  }

  if (this._writableState) {
    this._writableState.destroyed = false;
    this._writableState.ended = false;
    this._writableState.ending = false;
    this._writableState.finished = false;
    this._writableState.errorEmitted = false;
  }
}

function emitErrorNT(self, err) {
  self.emit('error', err);
}

module.exports = {
  destroy: destroy,
  undestroy: undestroy
};

/***/ }),

/***/ "./node_modules/readable-stream/lib/internal/streams/stream-browser.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/readable-stream/lib/internal/streams/stream-browser.js ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! events */ "./node_modules/events/events.js").EventEmitter;


/***/ }),

/***/ "./node_modules/readable-stream/readable-browser.js":
/*!**********************************************************!*\
  !*** ./node_modules/readable-stream/readable-browser.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ./lib/_stream_readable.js */ "./node_modules/readable-stream/lib/_stream_readable.js");
exports.Stream = exports;
exports.Readable = exports;
exports.Writable = __webpack_require__(/*! ./lib/_stream_writable.js */ "./node_modules/readable-stream/lib/_stream_writable.js");
exports.Duplex = __webpack_require__(/*! ./lib/_stream_duplex.js */ "./node_modules/readable-stream/lib/_stream_duplex.js");
exports.Transform = __webpack_require__(/*! ./lib/_stream_transform.js */ "./node_modules/readable-stream/lib/_stream_transform.js");
exports.PassThrough = __webpack_require__(/*! ./lib/_stream_passthrough.js */ "./node_modules/readable-stream/lib/_stream_passthrough.js");


/***/ }),

/***/ "./node_modules/rot-js/dist/rot.js":
/*!*****************************************!*\
  !*** ./node_modules/rot-js/dist/rot.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(process) {function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }

(function (global, factory) {
   true ? factory(exports) : undefined;
})(this, function (exports) {
  'use strict';
  /**
   * This code is an implementation of Alea algorithm; (C) 2010 Johannes Baagøe.
   * Alea is licensed according to the http://en.wikipedia.org/wiki/MIT_License.
   */

  var FRAC = 2.3283064365386963e-10;
  /* 2^-32 */

  var RNG = /*#__PURE__*/function () {
    function RNG() {
      this._seed = 0;
      this._s0 = 0;
      this._s1 = 0;
      this._s2 = 0;
      this._c = 0;
    }

    var _proto = RNG.prototype;

    _proto.getSeed = function getSeed() {
      return this._seed;
    }
    /**
     * Seed the number generator
     */
    ;

    _proto.setSeed = function setSeed(seed) {
      seed = seed < 1 ? 1 / seed : seed;
      this._seed = seed;
      this._s0 = (seed >>> 0) * FRAC;
      seed = seed * 69069 + 1 >>> 0;
      this._s1 = seed * FRAC;
      seed = seed * 69069 + 1 >>> 0;
      this._s2 = seed * FRAC;
      this._c = 1;
      return this;
    }
    /**
     * @returns Pseudorandom value [0,1), uniformly distributed
     */
    ;

    _proto.getUniform = function getUniform() {
      var t = 2091639 * this._s0 + this._c * FRAC;
      this._s0 = this._s1;
      this._s1 = this._s2;
      this._c = t | 0;
      this._s2 = t - this._c;
      return this._s2;
    }
    /**
     * @param lowerBound The lower end of the range to return a value from, inclusive
     * @param upperBound The upper end of the range to return a value from, inclusive
     * @returns Pseudorandom value [lowerBound, upperBound], using ROT.RNG.getUniform() to distribute the value
     */
    ;

    _proto.getUniformInt = function getUniformInt(lowerBound, upperBound) {
      var max = Math.max(lowerBound, upperBound);
      var min = Math.min(lowerBound, upperBound);
      return Math.floor(this.getUniform() * (max - min + 1)) + min;
    }
    /**
     * @param mean Mean value
     * @param stddev Standard deviation. ~95% of the absolute values will be lower than 2*stddev.
     * @returns A normally distributed pseudorandom value
     */
    ;

    _proto.getNormal = function getNormal(mean, stddev) {
      if (mean === void 0) {
        mean = 0;
      }

      if (stddev === void 0) {
        stddev = 1;
      }

      var u, v, r;

      do {
        u = 2 * this.getUniform() - 1;
        v = 2 * this.getUniform() - 1;
        r = u * u + v * v;
      } while (r > 1 || r == 0);

      var gauss = u * Math.sqrt(-2 * Math.log(r) / r);
      return mean + gauss * stddev;
    }
    /**
     * @returns Pseudorandom value [1,100] inclusive, uniformly distributed
     */
    ;

    _proto.getPercentage = function getPercentage() {
      return 1 + Math.floor(this.getUniform() * 100);
    }
    /**
     * @returns Randomly picked item, null when length=0
     */
    ;

    _proto.getItem = function getItem(array) {
      if (!array.length) {
        return null;
      }

      return array[Math.floor(this.getUniform() * array.length)];
    }
    /**
     * @returns New array with randomized items
     */
    ;

    _proto.shuffle = function shuffle(array) {
      var result = [];
      var clone = array.slice();

      while (clone.length) {
        var _index = clone.indexOf(this.getItem(clone));

        result.push(clone.splice(_index, 1)[0]);
      }

      return result;
    }
    /**
     * @param data key=whatever, value=weight (relative probability)
     * @returns whatever
     */
    ;

    _proto.getWeightedValue = function getWeightedValue(data) {
      var total = 0;

      for (var _id in data) {
        total += data[_id];
      }

      var random = this.getUniform() * total;
      var id,
          part = 0;

      for (id in data) {
        part += data[id];

        if (random < part) {
          return id;
        }
      } // If by some floating-point annoyance we have
      // random >= total, just return the last id.


      return id;
    }
    /**
     * Get RNG state. Useful for storing the state and re-setting it via setState.
     * @returns Internal state
     */
    ;

    _proto.getState = function getState() {
      return [this._s0, this._s1, this._s2, this._c];
    }
    /**
     * Set a previously retrieved state.
     */
    ;

    _proto.setState = function setState(state) {
      this._s0 = state[0];
      this._s1 = state[1];
      this._s2 = state[2];
      this._c = state[3];
      return this;
    }
    /**
     * Returns a cloned RNG
     */
    ;

    _proto.clone = function clone() {
      var clone = new RNG();
      return clone.setState(this.getState());
    };

    return RNG;
  }();

  var RNG$1 = new RNG().setSeed(Date.now());
  /**
   * @class Abstract display backend module
   * @private
   */

  var Backend = /*#__PURE__*/function () {
    function Backend() {}

    var _proto2 = Backend.prototype;

    _proto2.getContainer = function getContainer() {
      return null;
    };

    _proto2.setOptions = function setOptions(options) {
      this._options = options;
    };

    return Backend;
  }();

  var Canvas = /*#__PURE__*/function (_Backend) {
    _inheritsLoose(Canvas, _Backend);

    function Canvas() {
      var _this;

      _this = _Backend.call(this) || this;
      _this._ctx = document.createElement("canvas").getContext("2d");
      return _this;
    }

    var _proto3 = Canvas.prototype;

    _proto3.schedule = function schedule(cb) {
      requestAnimationFrame(cb);
    };

    _proto3.getContainer = function getContainer() {
      return this._ctx.canvas;
    };

    _proto3.setOptions = function setOptions(opts) {
      _Backend.prototype.setOptions.call(this, opts);

      var style = opts.fontStyle ? opts.fontStyle + " " : "";
      var font = style + " " + opts.fontSize + "px " + opts.fontFamily;
      this._ctx.font = font;

      this._updateSize();

      this._ctx.font = font;
      this._ctx.textAlign = "center";
      this._ctx.textBaseline = "middle";
    };

    _proto3.clear = function clear() {
      this._ctx.fillStyle = this._options.bg;

      this._ctx.fillRect(0, 0, this._ctx.canvas.width, this._ctx.canvas.height);
    };

    _proto3.eventToPosition = function eventToPosition(x, y) {
      var canvas = this._ctx.canvas;
      var rect = canvas.getBoundingClientRect();
      x -= rect.left;
      y -= rect.top;
      x *= canvas.width / rect.width;
      y *= canvas.height / rect.height;

      if (x < 0 || y < 0 || x >= canvas.width || y >= canvas.height) {
        return [-1, -1];
      }

      return this._normalizedEventToPosition(x, y);
    };

    return Canvas;
  }(Backend);
  /**
   * Always positive modulus
   * @param x Operand
   * @param n Modulus
   * @returns x modulo n
   */


  function mod(x, n) {
    return (x % n + n) % n;
  }

  function clamp(val, min, max) {
    if (min === void 0) {
      min = 0;
    }

    if (max === void 0) {
      max = 1;
    }

    if (val < min) return min;
    if (val > max) return max;
    return val;
  }

  function capitalize(string) {
    return string.charAt(0).toUpperCase() + string.substring(1);
  }
  /**
   * Format a string in a flexible way. Scans for %s strings and replaces them with arguments. List of patterns is modifiable via String.format.map.
   * @param {string} template
   * @param {any} [argv]
   */


  function format(template) {
    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }

    var map = format.map;

    var replacer = function replacer(match, group1, group2, index) {
      if (template.charAt(index - 1) == "%") {
        return match.substring(1);
      }

      if (!args.length) {
        return match;
      }

      var obj = args[0];
      var group = group1 || group2;
      var parts = group.split(",");
      var name = parts.shift() || "";
      var method = map[name.toLowerCase()];

      if (!method) {
        return match;
      }

      obj = args.shift();
      var replaced = obj[method].apply(obj, parts);
      var first = name.charAt(0);

      if (first != first.toLowerCase()) {
        replaced = capitalize(replaced);
      }

      return replaced;
    };

    return template.replace(/%(?:([a-z]+)|(?:{([^}]+)}))/gi, replacer);
  }

  format.map = {
    "s": "toString"
  };
  var util = /*#__PURE__*/Object.freeze({
    mod: mod,
    clamp: clamp,
    capitalize: capitalize,
    format: format
  });
  /**
   * @class Hexagonal backend
   * @private
   */

  var Hex = /*#__PURE__*/function (_Canvas) {
    _inheritsLoose(Hex, _Canvas);

    function Hex() {
      var _this2;

      _this2 = _Canvas.call(this) || this;
      _this2._spacingX = 0;
      _this2._spacingY = 0;
      _this2._hexSize = 0;
      return _this2;
    }

    var _proto4 = Hex.prototype;

    _proto4.draw = function draw(data, clearBefore) {
      var x = data[0],
          y = data[1],
          ch = data[2],
          fg = data[3],
          bg = data[4];
      var px = [(x + 1) * this._spacingX, y * this._spacingY + this._hexSize];

      if (this._options.transpose) {
        px.reverse();
      }

      if (clearBefore) {
        this._ctx.fillStyle = bg;

        this._fill(px[0], px[1]);
      }

      if (!ch) {
        return;
      }

      this._ctx.fillStyle = fg;
      var chars = [].concat(ch);

      for (var i = 0; i < chars.length; i++) {
        this._ctx.fillText(chars[i], px[0], Math.ceil(px[1]));
      }
    };

    _proto4.computeSize = function computeSize(availWidth, availHeight) {
      if (this._options.transpose) {
        availWidth += availHeight;
        availHeight = availWidth - availHeight;
        availWidth -= availHeight;
      }

      var width = Math.floor(availWidth / this._spacingX) - 1;
      var height = Math.floor((availHeight - 2 * this._hexSize) / this._spacingY + 1);
      return [width, height];
    };

    _proto4.computeFontSize = function computeFontSize(availWidth, availHeight) {
      if (this._options.transpose) {
        availWidth += availHeight;
        availHeight = availWidth - availHeight;
        availWidth -= availHeight;
      }

      var hexSizeWidth = 2 * availWidth / ((this._options.width + 1) * Math.sqrt(3)) - 1;
      var hexSizeHeight = availHeight / (2 + 1.5 * (this._options.height - 1));
      var hexSize = Math.min(hexSizeWidth, hexSizeHeight); // compute char ratio

      var oldFont = this._ctx.font;
      this._ctx.font = "100px " + this._options.fontFamily;
      var width = Math.ceil(this._ctx.measureText("W").width);
      this._ctx.font = oldFont;
      var ratio = width / 100;
      hexSize = Math.floor(hexSize) + 1; // closest larger hexSize
      // FIXME char size computation does not respect transposed hexes

      var fontSize = 2 * hexSize / (this._options.spacing * (1 + ratio / Math.sqrt(3))); // closest smaller fontSize

      return Math.ceil(fontSize) - 1;
    };

    _proto4._normalizedEventToPosition = function _normalizedEventToPosition(x, y) {
      var nodeSize;

      if (this._options.transpose) {
        x += y;
        y = x - y;
        x -= y;
        nodeSize = this._ctx.canvas.width;
      } else {
        nodeSize = this._ctx.canvas.height;
      }

      var size = nodeSize / this._options.height;
      y = Math.floor(y / size);

      if (mod(y, 2)) {
        /* odd row */
        x -= this._spacingX;
        x = 1 + 2 * Math.floor(x / (2 * this._spacingX));
      } else {
        x = 2 * Math.floor(x / (2 * this._spacingX));
      }

      return [x, y];
    }
    /**
     * Arguments are pixel values. If "transposed" mode is enabled, then these two are already swapped.
     */
    ;

    _proto4._fill = function _fill(cx, cy) {
      var a = this._hexSize;
      var b = this._options.border;
      var ctx = this._ctx;
      ctx.beginPath();

      if (this._options.transpose) {
        ctx.moveTo(cx - a + b, cy);
        ctx.lineTo(cx - a / 2 + b, cy + this._spacingX - b);
        ctx.lineTo(cx + a / 2 - b, cy + this._spacingX - b);
        ctx.lineTo(cx + a - b, cy);
        ctx.lineTo(cx + a / 2 - b, cy - this._spacingX + b);
        ctx.lineTo(cx - a / 2 + b, cy - this._spacingX + b);
        ctx.lineTo(cx - a + b, cy);
      } else {
        ctx.moveTo(cx, cy - a + b);
        ctx.lineTo(cx + this._spacingX - b, cy - a / 2 + b);
        ctx.lineTo(cx + this._spacingX - b, cy + a / 2 - b);
        ctx.lineTo(cx, cy + a - b);
        ctx.lineTo(cx - this._spacingX + b, cy + a / 2 - b);
        ctx.lineTo(cx - this._spacingX + b, cy - a / 2 + b);
        ctx.lineTo(cx, cy - a + b);
      }

      ctx.fill();
    };

    _proto4._updateSize = function _updateSize() {
      var opts = this._options;
      var charWidth = Math.ceil(this._ctx.measureText("W").width);
      this._hexSize = Math.floor(opts.spacing * (opts.fontSize + charWidth / Math.sqrt(3)) / 2);
      this._spacingX = this._hexSize * Math.sqrt(3) / 2;
      this._spacingY = this._hexSize * 1.5;
      var xprop;
      var yprop;

      if (opts.transpose) {
        xprop = "height";
        yprop = "width";
      } else {
        xprop = "width";
        yprop = "height";
      }

      this._ctx.canvas[xprop] = Math.ceil((opts.width + 1) * this._spacingX);
      this._ctx.canvas[yprop] = Math.ceil((opts.height - 1) * this._spacingY + 2 * this._hexSize);
    };

    return Hex;
  }(Canvas);
  /**
   * @class Rectangular backend
   * @private
   */


  var Rect =
  /** @class */
  function () {
    var Rect = /*#__PURE__*/function (_Canvas2) {
      _inheritsLoose(Rect, _Canvas2);

      function Rect() {
        var _this3;

        _this3 = _Canvas2.call(this) || this;
        _this3._spacingX = 0;
        _this3._spacingY = 0;
        _this3._canvasCache = {};
        return _this3;
      }

      var _proto5 = Rect.prototype;

      _proto5.setOptions = function setOptions(options) {
        _Canvas2.prototype.setOptions.call(this, options);

        this._canvasCache = {};
      };

      _proto5.draw = function draw(data, clearBefore) {
        if (Rect.cache) {
          this._drawWithCache(data);
        } else {
          this._drawNoCache(data, clearBefore);
        }
      };

      _proto5._drawWithCache = function _drawWithCache(data) {
        var x = data[0],
            y = data[1],
            ch = data[2],
            fg = data[3],
            bg = data[4];
        var hash = "" + ch + fg + bg;
        var canvas;

        if (hash in this._canvasCache) {
          canvas = this._canvasCache[hash];
        } else {
          var b = this._options.border;
          canvas = document.createElement("canvas");
          var ctx = canvas.getContext("2d");
          canvas.width = this._spacingX;
          canvas.height = this._spacingY;
          ctx.fillStyle = bg;
          ctx.fillRect(b, b, canvas.width - b, canvas.height - b);

          if (ch) {
            ctx.fillStyle = fg;
            ctx.font = this._ctx.font;
            ctx.textAlign = "center";
            ctx.textBaseline = "middle";
            var chars = [].concat(ch);

            for (var i = 0; i < chars.length; i++) {
              ctx.fillText(chars[i], this._spacingX / 2, Math.ceil(this._spacingY / 2));
            }
          }

          this._canvasCache[hash] = canvas;
        }

        this._ctx.drawImage(canvas, x * this._spacingX, y * this._spacingY);
      };

      _proto5._drawNoCache = function _drawNoCache(data, clearBefore) {
        var x = data[0],
            y = data[1],
            ch = data[2],
            fg = data[3],
            bg = data[4];

        if (clearBefore) {
          var b = this._options.border;
          this._ctx.fillStyle = bg;

          this._ctx.fillRect(x * this._spacingX + b, y * this._spacingY + b, this._spacingX - b, this._spacingY - b);
        }

        if (!ch) {
          return;
        }

        this._ctx.fillStyle = fg;
        var chars = [].concat(ch);

        for (var i = 0; i < chars.length; i++) {
          this._ctx.fillText(chars[i], (x + 0.5) * this._spacingX, Math.ceil((y + 0.5) * this._spacingY));
        }
      };

      _proto5.computeSize = function computeSize(availWidth, availHeight) {
        var width = Math.floor(availWidth / this._spacingX);
        var height = Math.floor(availHeight / this._spacingY);
        return [width, height];
      };

      _proto5.computeFontSize = function computeFontSize(availWidth, availHeight) {
        var boxWidth = Math.floor(availWidth / this._options.width);
        var boxHeight = Math.floor(availHeight / this._options.height);
        /* compute char ratio */

        var oldFont = this._ctx.font;
        this._ctx.font = "100px " + this._options.fontFamily;
        var width = Math.ceil(this._ctx.measureText("W").width);
        this._ctx.font = oldFont;
        var ratio = width / 100;
        var widthFraction = ratio * boxHeight / boxWidth;

        if (widthFraction > 1) {
          /* too wide with current aspect ratio */
          boxHeight = Math.floor(boxHeight / widthFraction);
        }

        return Math.floor(boxHeight / this._options.spacing);
      };

      _proto5._normalizedEventToPosition = function _normalizedEventToPosition(x, y) {
        return [Math.floor(x / this._spacingX), Math.floor(y / this._spacingY)];
      };

      _proto5._updateSize = function _updateSize() {
        var opts = this._options;
        var charWidth = Math.ceil(this._ctx.measureText("W").width);
        this._spacingX = Math.ceil(opts.spacing * charWidth);
        this._spacingY = Math.ceil(opts.spacing * opts.fontSize);

        if (opts.forceSquareRatio) {
          this._spacingX = this._spacingY = Math.max(this._spacingX, this._spacingY);
        }

        this._ctx.canvas.width = opts.width * this._spacingX;
        this._ctx.canvas.height = opts.height * this._spacingY;
      };

      return Rect;
    }(Canvas);

    Rect.cache = false;
    return Rect;
  }();
  /**
   * @class Tile backend
   * @private
   */


  var Tile = /*#__PURE__*/function (_Canvas3) {
    _inheritsLoose(Tile, _Canvas3);

    function Tile() {
      var _this4;

      _this4 = _Canvas3.call(this) || this;
      _this4._colorCanvas = document.createElement("canvas");
      return _this4;
    }

    var _proto6 = Tile.prototype;

    _proto6.draw = function draw(data, clearBefore) {
      var x = data[0],
          y = data[1],
          ch = data[2],
          fg = data[3],
          bg = data[4];
      var tileWidth = this._options.tileWidth;
      var tileHeight = this._options.tileHeight;

      if (clearBefore) {
        if (this._options.tileColorize) {
          this._ctx.clearRect(x * tileWidth, y * tileHeight, tileWidth, tileHeight);
        } else {
          this._ctx.fillStyle = bg;

          this._ctx.fillRect(x * tileWidth, y * tileHeight, tileWidth, tileHeight);
        }
      }

      if (!ch) {
        return;
      }

      var chars = [].concat(ch);
      var fgs = [].concat(fg);
      var bgs = [].concat(bg);

      for (var i = 0; i < chars.length; i++) {
        var tile = this._options.tileMap[chars[i]];

        if (!tile) {
          throw new Error("Char \"" + chars[i] + "\" not found in tileMap");
        }

        if (this._options.tileColorize) {
          // apply colorization
          var canvas = this._colorCanvas;
          var context = canvas.getContext("2d");
          context.globalCompositeOperation = "source-over";
          context.clearRect(0, 0, tileWidth, tileHeight);
          var _fg = fgs[i];
          var _bg = bgs[i];
          context.drawImage(this._options.tileSet, tile[0], tile[1], tileWidth, tileHeight, 0, 0, tileWidth, tileHeight);

          if (_fg != "transparent") {
            context.fillStyle = _fg;
            context.globalCompositeOperation = "source-atop";
            context.fillRect(0, 0, tileWidth, tileHeight);
          }

          if (_bg != "transparent") {
            context.fillStyle = _bg;
            context.globalCompositeOperation = "destination-over";
            context.fillRect(0, 0, tileWidth, tileHeight);
          }

          this._ctx.drawImage(canvas, x * tileWidth, y * tileHeight, tileWidth, tileHeight);
        } else {
          // no colorizing, easy
          this._ctx.drawImage(this._options.tileSet, tile[0], tile[1], tileWidth, tileHeight, x * tileWidth, y * tileHeight, tileWidth, tileHeight);
        }
      }
    };

    _proto6.computeSize = function computeSize(availWidth, availHeight) {
      var width = Math.floor(availWidth / this._options.tileWidth);
      var height = Math.floor(availHeight / this._options.tileHeight);
      return [width, height];
    };

    _proto6.computeFontSize = function computeFontSize() {
      throw new Error("Tile backend does not understand font size");
    };

    _proto6._normalizedEventToPosition = function _normalizedEventToPosition(x, y) {
      return [Math.floor(x / this._options.tileWidth), Math.floor(y / this._options.tileHeight)];
    };

    _proto6._updateSize = function _updateSize() {
      var opts = this._options;
      this._ctx.canvas.width = opts.width * opts.tileWidth;
      this._ctx.canvas.height = opts.height * opts.tileHeight;
      this._colorCanvas.width = opts.tileWidth;
      this._colorCanvas.height = opts.tileHeight;
    };

    return Tile;
  }(Canvas);

  function fromString(str) {
    var cached, r;

    if (str in CACHE) {
      cached = CACHE[str];
    } else {
      if (str.charAt(0) == "#") {
        // hex rgb
        var matched = str.match(/[0-9a-f]/gi) || [];
        var values = matched.map(function (x) {
          return parseInt(x, 16);
        });

        if (values.length == 3) {
          cached = values.map(function (x) {
            return x * 17;
          });
        } else {
          for (var i = 0; i < 3; i++) {
            values[i + 1] += 16 * values[i];
            values.splice(i, 1);
          }

          cached = values;
        }
      } else if (r = str.match(/rgb\(([0-9, ]+)\)/i)) {
        // decimal rgb
        cached = r[1].split(/\s*,\s*/).map(function (x) {
          return parseInt(x);
        });
      } else {
        // html name
        cached = [0, 0, 0];
      }

      CACHE[str] = cached;
    }

    return cached.slice();
  }
  /**
   * Add two or more colors
   */


  function add(color1) {
    var result = color1.slice();

    for (var _len2 = arguments.length, colors = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
      colors[_key2 - 1] = arguments[_key2];
    }

    for (var i = 0; i < 3; i++) {
      for (var j = 0; j < colors.length; j++) {
        result[i] += colors[j][i];
      }
    }

    return result;
  }
  /**
   * Add two or more colors, MODIFIES FIRST ARGUMENT
   */


  function add_(color1) {
    for (var _len3 = arguments.length, colors = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
      colors[_key3 - 1] = arguments[_key3];
    }

    for (var i = 0; i < 3; i++) {
      for (var j = 0; j < colors.length; j++) {
        color1[i] += colors[j][i];
      }
    }

    return color1;
  }
  /**
   * Multiply (mix) two or more colors
   */


  function multiply(color1) {
    var result = color1.slice();

    for (var _len4 = arguments.length, colors = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {
      colors[_key4 - 1] = arguments[_key4];
    }

    for (var i = 0; i < 3; i++) {
      for (var j = 0; j < colors.length; j++) {
        result[i] *= colors[j][i] / 255;
      }

      result[i] = Math.round(result[i]);
    }

    return result;
  }
  /**
   * Multiply (mix) two or more colors, MODIFIES FIRST ARGUMENT
   */


  function multiply_(color1) {
    for (var _len5 = arguments.length, colors = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {
      colors[_key5 - 1] = arguments[_key5];
    }

    for (var i = 0; i < 3; i++) {
      for (var j = 0; j < colors.length; j++) {
        color1[i] *= colors[j][i] / 255;
      }

      color1[i] = Math.round(color1[i]);
    }

    return color1;
  }
  /**
   * Interpolate (blend) two colors with a given factor
   */


  function interpolate(color1, color2, factor) {
    if (factor === void 0) {
      factor = 0.5;
    }

    var result = color1.slice();

    for (var i = 0; i < 3; i++) {
      result[i] = Math.round(result[i] + factor * (color2[i] - color1[i]));
    }

    return result;
  }

  var lerp = interpolate;
  /**
   * Interpolate (blend) two colors with a given factor in HSL mode
   */

  function interpolateHSL(color1, color2, factor) {
    if (factor === void 0) {
      factor = 0.5;
    }

    var hsl1 = rgb2hsl(color1);
    var hsl2 = rgb2hsl(color2);

    for (var i = 0; i < 3; i++) {
      hsl1[i] += factor * (hsl2[i] - hsl1[i]);
    }

    return hsl2rgb(hsl1);
  }

  var lerpHSL = interpolateHSL;
  /**
   * Create a new random color based on this one
   * @param color
   * @param diff Set of standard deviations
   */

  function randomize(color, diff) {
    if (!(diff instanceof Array)) {
      diff = Math.round(RNG$1.getNormal(0, diff));
    }

    var result = color.slice();

    for (var i = 0; i < 3; i++) {
      result[i] += diff instanceof Array ? Math.round(RNG$1.getNormal(0, diff[i])) : diff;
    }

    return result;
  }
  /**
   * Converts an RGB color value to HSL. Expects 0..255 inputs, produces 0..1 outputs.
   */


  function rgb2hsl(color) {
    var r = color[0] / 255;
    var g = color[1] / 255;
    var b = color[2] / 255;
    var max = Math.max(r, g, b),
        min = Math.min(r, g, b);
    var h = 0,
        s,
        l = (max + min) / 2;

    if (max == min) {
      s = 0; // achromatic
    } else {
      var d = max - min;
      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);

      switch (max) {
        case r:
          h = (g - b) / d + (g < b ? 6 : 0);
          break;

        case g:
          h = (b - r) / d + 2;
          break;

        case b:
          h = (r - g) / d + 4;
          break;
      }

      h /= 6;
    }

    return [h, s, l];
  }

  function hue2rgb(p, q, t) {
    if (t < 0) t += 1;
    if (t > 1) t -= 1;
    if (t < 1 / 6) return p + (q - p) * 6 * t;
    if (t < 1 / 2) return q;
    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;
    return p;
  }
  /**
   * Converts an HSL color value to RGB. Expects 0..1 inputs, produces 0..255 outputs.
   */


  function hsl2rgb(color) {
    var l = color[2];

    if (color[1] == 0) {
      l = Math.round(l * 255);
      return [l, l, l];
    } else {
      var s = color[1];
      var q = l < 0.5 ? l * (1 + s) : l + s - l * s;
      var p = 2 * l - q;
      var r = hue2rgb(p, q, color[0] + 1 / 3);
      var g = hue2rgb(p, q, color[0]);
      var b = hue2rgb(p, q, color[0] - 1 / 3);
      return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];
    }
  }

  function toRGB(color) {
    var clamped = color.map(function (x) {
      return clamp(x, 0, 255);
    });
    return "rgb(" + clamped.join(",") + ")";
  }

  function toHex(color) {
    var clamped = color.map(function (x) {
      return clamp(x, 0, 255).toString(16).padStart(2, "0");
    });
    return "#" + clamped.join("");
  }

  var CACHE = {
    "black": [0, 0, 0],
    "navy": [0, 0, 128],
    "darkblue": [0, 0, 139],
    "mediumblue": [0, 0, 205],
    "blue": [0, 0, 255],
    "darkgreen": [0, 100, 0],
    "green": [0, 128, 0],
    "teal": [0, 128, 128],
    "darkcyan": [0, 139, 139],
    "deepskyblue": [0, 191, 255],
    "darkturquoise": [0, 206, 209],
    "mediumspringgreen": [0, 250, 154],
    "lime": [0, 255, 0],
    "springgreen": [0, 255, 127],
    "aqua": [0, 255, 255],
    "cyan": [0, 255, 255],
    "midnightblue": [25, 25, 112],
    "dodgerblue": [30, 144, 255],
    "forestgreen": [34, 139, 34],
    "seagreen": [46, 139, 87],
    "darkslategray": [47, 79, 79],
    "darkslategrey": [47, 79, 79],
    "limegreen": [50, 205, 50],
    "mediumseagreen": [60, 179, 113],
    "turquoise": [64, 224, 208],
    "royalblue": [65, 105, 225],
    "steelblue": [70, 130, 180],
    "darkslateblue": [72, 61, 139],
    "mediumturquoise": [72, 209, 204],
    "indigo": [75, 0, 130],
    "darkolivegreen": [85, 107, 47],
    "cadetblue": [95, 158, 160],
    "cornflowerblue": [100, 149, 237],
    "mediumaquamarine": [102, 205, 170],
    "dimgray": [105, 105, 105],
    "dimgrey": [105, 105, 105],
    "slateblue": [106, 90, 205],
    "olivedrab": [107, 142, 35],
    "slategray": [112, 128, 144],
    "slategrey": [112, 128, 144],
    "lightslategray": [119, 136, 153],
    "lightslategrey": [119, 136, 153],
    "mediumslateblue": [123, 104, 238],
    "lawngreen": [124, 252, 0],
    "chartreuse": [127, 255, 0],
    "aquamarine": [127, 255, 212],
    "maroon": [128, 0, 0],
    "purple": [128, 0, 128],
    "olive": [128, 128, 0],
    "gray": [128, 128, 128],
    "grey": [128, 128, 128],
    "skyblue": [135, 206, 235],
    "lightskyblue": [135, 206, 250],
    "blueviolet": [138, 43, 226],
    "darkred": [139, 0, 0],
    "darkmagenta": [139, 0, 139],
    "saddlebrown": [139, 69, 19],
    "darkseagreen": [143, 188, 143],
    "lightgreen": [144, 238, 144],
    "mediumpurple": [147, 112, 216],
    "darkviolet": [148, 0, 211],
    "palegreen": [152, 251, 152],
    "darkorchid": [153, 50, 204],
    "yellowgreen": [154, 205, 50],
    "sienna": [160, 82, 45],
    "brown": [165, 42, 42],
    "darkgray": [169, 169, 169],
    "darkgrey": [169, 169, 169],
    "lightblue": [173, 216, 230],
    "greenyellow": [173, 255, 47],
    "paleturquoise": [175, 238, 238],
    "lightsteelblue": [176, 196, 222],
    "powderblue": [176, 224, 230],
    "firebrick": [178, 34, 34],
    "darkgoldenrod": [184, 134, 11],
    "mediumorchid": [186, 85, 211],
    "rosybrown": [188, 143, 143],
    "darkkhaki": [189, 183, 107],
    "silver": [192, 192, 192],
    "mediumvioletred": [199, 21, 133],
    "indianred": [205, 92, 92],
    "peru": [205, 133, 63],
    "chocolate": [210, 105, 30],
    "tan": [210, 180, 140],
    "lightgray": [211, 211, 211],
    "lightgrey": [211, 211, 211],
    "palevioletred": [216, 112, 147],
    "thistle": [216, 191, 216],
    "orchid": [218, 112, 214],
    "goldenrod": [218, 165, 32],
    "crimson": [220, 20, 60],
    "gainsboro": [220, 220, 220],
    "plum": [221, 160, 221],
    "burlywood": [222, 184, 135],
    "lightcyan": [224, 255, 255],
    "lavender": [230, 230, 250],
    "darksalmon": [233, 150, 122],
    "violet": [238, 130, 238],
    "palegoldenrod": [238, 232, 170],
    "lightcoral": [240, 128, 128],
    "khaki": [240, 230, 140],
    "aliceblue": [240, 248, 255],
    "honeydew": [240, 255, 240],
    "azure": [240, 255, 255],
    "sandybrown": [244, 164, 96],
    "wheat": [245, 222, 179],
    "beige": [245, 245, 220],
    "whitesmoke": [245, 245, 245],
    "mintcream": [245, 255, 250],
    "ghostwhite": [248, 248, 255],
    "salmon": [250, 128, 114],
    "antiquewhite": [250, 235, 215],
    "linen": [250, 240, 230],
    "lightgoldenrodyellow": [250, 250, 210],
    "oldlace": [253, 245, 230],
    "red": [255, 0, 0],
    "fuchsia": [255, 0, 255],
    "magenta": [255, 0, 255],
    "deeppink": [255, 20, 147],
    "orangered": [255, 69, 0],
    "tomato": [255, 99, 71],
    "hotpink": [255, 105, 180],
    "coral": [255, 127, 80],
    "darkorange": [255, 140, 0],
    "lightsalmon": [255, 160, 122],
    "orange": [255, 165, 0],
    "lightpink": [255, 182, 193],
    "pink": [255, 192, 203],
    "gold": [255, 215, 0],
    "peachpuff": [255, 218, 185],
    "navajowhite": [255, 222, 173],
    "moccasin": [255, 228, 181],
    "bisque": [255, 228, 196],
    "mistyrose": [255, 228, 225],
    "blanchedalmond": [255, 235, 205],
    "papayawhip": [255, 239, 213],
    "lavenderblush": [255, 240, 245],
    "seashell": [255, 245, 238],
    "cornsilk": [255, 248, 220],
    "lemonchiffon": [255, 250, 205],
    "floralwhite": [255, 250, 240],
    "snow": [255, 250, 250],
    "yellow": [255, 255, 0],
    "lightyellow": [255, 255, 224],
    "ivory": [255, 255, 240],
    "white": [255, 255, 255]
  };
  var color = /*#__PURE__*/Object.freeze({
    fromString: fromString,
    add: add,
    add_: add_,
    multiply: multiply,
    multiply_: multiply_,
    interpolate: interpolate,
    lerp: lerp,
    interpolateHSL: interpolateHSL,
    lerpHSL: lerpHSL,
    randomize: randomize,
    rgb2hsl: rgb2hsl,
    hsl2rgb: hsl2rgb,
    toRGB: toRGB,
    toHex: toHex
  });
  /**
   * @class Tile backend
   * @private
   */

  var TileGL = /*#__PURE__*/function (_Backend2) {
    _inheritsLoose(TileGL, _Backend2);

    function TileGL() {
      var _this5;

      _this5 = _Backend2.call(this) || this;
      _this5._uniforms = {};

      try {
        _this5._gl = _this5._initWebGL();
      } catch (e) {
        alert(e.message);
      }

      return _this5;
    }

    TileGL.isSupported = function isSupported() {
      return !!document.createElement("canvas").getContext("webgl2", {
        preserveDrawingBuffer: true
      });
    };

    var _proto7 = TileGL.prototype;

    _proto7.schedule = function schedule(cb) {
      requestAnimationFrame(cb);
    };

    _proto7.getContainer = function getContainer() {
      return this._gl.canvas;
    };

    _proto7.setOptions = function setOptions(opts) {
      var _this6 = this;

      _Backend2.prototype.setOptions.call(this, opts);

      this._updateSize();

      var tileSet = this._options.tileSet;

      if (tileSet && "complete" in tileSet && !tileSet.complete) {
        tileSet.addEventListener("load", function () {
          return _this6._updateTexture(tileSet);
        });
      } else {
        this._updateTexture(tileSet);
      }
    };

    _proto7.draw = function draw(data, clearBefore) {
      var gl = this._gl;
      var opts = this._options;
      var x = data[0],
          y = data[1],
          ch = data[2],
          fg = data[3],
          bg = data[4];
      var scissorY = gl.canvas.height - (y + 1) * opts.tileHeight;
      gl.scissor(x * opts.tileWidth, scissorY, opts.tileWidth, opts.tileHeight);

      if (clearBefore) {
        if (opts.tileColorize) {
          gl.clearColor(0, 0, 0, 0);
        } else {
          gl.clearColor.apply(gl, parseColor(bg));
        }

        gl.clear(gl.COLOR_BUFFER_BIT);
      }

      if (!ch) {
        return;
      }

      var chars = [].concat(ch);
      var bgs = [].concat(bg);
      var fgs = [].concat(fg);
      gl.uniform2fv(this._uniforms["targetPosRel"], [x, y]);

      for (var i = 0; i < chars.length; i++) {
        var tile = this._options.tileMap[chars[i]];

        if (!tile) {
          throw new Error("Char \"" + chars[i] + "\" not found in tileMap");
        }

        gl.uniform1f(this._uniforms["colorize"], opts.tileColorize ? 1 : 0);
        gl.uniform2fv(this._uniforms["tilesetPosAbs"], tile);

        if (opts.tileColorize) {
          gl.uniform4fv(this._uniforms["tint"], parseColor(fgs[i]));
          gl.uniform4fv(this._uniforms["bg"], parseColor(bgs[i]));
        }

        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
      }
      /*
      
      
              for (let i=0;i<chars.length;i++) {
      
                  if (this._options.tileColorize) { // apply colorization
                      let canvas = this._colorCanvas;
                      let context = canvas.getContext("2d") as CanvasRenderingContext2D;
                      context.globalCompositeOperation = "source-over";
                      context.clearRect(0, 0, tileWidth, tileHeight);
      
                      let fg = fgs[i];
                      let bg = bgs[i];
      
                      context.drawImage(
                          this._options.tileSet!,
                          tile[0], tile[1], tileWidth, tileHeight,
                          0, 0, tileWidth, tileHeight
                      );
      
                      if (fg != "transparent") {
                          context.fillStyle = fg;
                          context.globalCompositeOperation = "source-atop";
                          context.fillRect(0, 0, tileWidth, tileHeight);
                      }
      
                      if (bg != "transparent") {
                          context.fillStyle = bg;
                          context.globalCompositeOperation = "destination-over";
                          context.fillRect(0, 0, tileWidth, tileHeight);
                      }
      
                      this._ctx.drawImage(canvas, x*tileWidth, y*tileHeight, tileWidth, tileHeight);
                  } else { // no colorizing, easy
                      this._ctx.drawImage(
                          this._options.tileSet!,
                          tile[0], tile[1], tileWidth, tileHeight,
                          x*tileWidth, y*tileHeight, tileWidth, tileHeight
                      );
                  }
              }
      
      */

    };

    _proto7.clear = function clear() {
      var gl = this._gl;
      gl.clearColor.apply(gl, parseColor(this._options.bg));
      gl.scissor(0, 0, gl.canvas.width, gl.canvas.height);
      gl.clear(gl.COLOR_BUFFER_BIT);
    };

    _proto7.computeSize = function computeSize(availWidth, availHeight) {
      var width = Math.floor(availWidth / this._options.tileWidth);
      var height = Math.floor(availHeight / this._options.tileHeight);
      return [width, height];
    };

    _proto7.computeFontSize = function computeFontSize() {
      throw new Error("Tile backend does not understand font size");
    };

    _proto7.eventToPosition = function eventToPosition(x, y) {
      var canvas = this._gl.canvas;
      var rect = canvas.getBoundingClientRect();
      x -= rect.left;
      y -= rect.top;
      x *= canvas.width / rect.width;
      y *= canvas.height / rect.height;

      if (x < 0 || y < 0 || x >= canvas.width || y >= canvas.height) {
        return [-1, -1];
      }

      return this._normalizedEventToPosition(x, y);
    };

    _proto7._initWebGL = function _initWebGL() {
      var _this7 = this;

      var gl = document.createElement("canvas").getContext("webgl2", {
        preserveDrawingBuffer: true
      });
      window.gl = gl;
      var program = createProgram(gl, VS, FS);
      gl.useProgram(program);
      createQuad(gl);
      UNIFORMS.forEach(function (name) {
        return _this7._uniforms[name] = gl.getUniformLocation(program, name);
      });
      this._program = program;
      gl.enable(gl.BLEND);
      gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);
      gl.enable(gl.SCISSOR_TEST);
      return gl;
    };

    _proto7._normalizedEventToPosition = function _normalizedEventToPosition(x, y) {
      return [Math.floor(x / this._options.tileWidth), Math.floor(y / this._options.tileHeight)];
    };

    _proto7._updateSize = function _updateSize() {
      var gl = this._gl;
      var opts = this._options;
      var canvasSize = [opts.width * opts.tileWidth, opts.height * opts.tileHeight];
      gl.canvas.width = canvasSize[0];
      gl.canvas.height = canvasSize[1];
      gl.viewport(0, 0, canvasSize[0], canvasSize[1]);
      gl.uniform2fv(this._uniforms["tileSize"], [opts.tileWidth, opts.tileHeight]);
      gl.uniform2fv(this._uniforms["targetSize"], canvasSize);
    };

    _proto7._updateTexture = function _updateTexture(tileSet) {
      createTexture(this._gl, tileSet);
    };

    return TileGL;
  }(Backend);

  var UNIFORMS = ["targetPosRel", "tilesetPosAbs", "tileSize", "targetSize", "colorize", "bg", "tint"];
  var VS = "\n#version 300 es\n\nin vec2 tilePosRel;\nout vec2 tilesetPosPx;\n\nuniform vec2 tilesetPosAbs;\nuniform vec2 tileSize;\nuniform vec2 targetSize;\nuniform vec2 targetPosRel;\n\nvoid main() {\n\tvec2 targetPosPx = (targetPosRel + tilePosRel) * tileSize;\n\tvec2 targetPosNdc = ((targetPosPx / targetSize)-0.5)*2.0;\n\ttargetPosNdc.y *= -1.0;\n\n\tgl_Position = vec4(targetPosNdc, 0.0, 1.0);\n\ttilesetPosPx = tilesetPosAbs + tilePosRel * tileSize;\n}".trim();
  var FS = "\n#version 300 es\nprecision highp float;\n\nin vec2 tilesetPosPx;\nout vec4 fragColor;\nuniform sampler2D image;\nuniform bool colorize;\nuniform vec4 bg;\nuniform vec4 tint;\n\nvoid main() {\n\tfragColor = vec4(0, 0, 0, 1);\n\n\tvec4 texel = texelFetch(image, ivec2(tilesetPosPx), 0);\n\n\tif (colorize) {\n\t\ttexel.rgb = tint.a * tint.rgb + (1.0-tint.a) * texel.rgb;\n\t\tfragColor.rgb = texel.a*texel.rgb + (1.0-texel.a)*bg.rgb;\n\t\tfragColor.a = texel.a + (1.0-texel.a)*bg.a;\n\t} else {\n\t\tfragColor = texel;\n\t}\n}".trim();

  function createProgram(gl, vss, fss) {
    var vs = gl.createShader(gl.VERTEX_SHADER);
    gl.shaderSource(vs, vss);
    gl.compileShader(vs);

    if (!gl.getShaderParameter(vs, gl.COMPILE_STATUS)) {
      throw new Error(gl.getShaderInfoLog(vs) || "");
    }

    var fs = gl.createShader(gl.FRAGMENT_SHADER);
    gl.shaderSource(fs, fss);
    gl.compileShader(fs);

    if (!gl.getShaderParameter(fs, gl.COMPILE_STATUS)) {
      throw new Error(gl.getShaderInfoLog(fs) || "");
    }

    var p = gl.createProgram();
    gl.attachShader(p, vs);
    gl.attachShader(p, fs);
    gl.linkProgram(p);

    if (!gl.getProgramParameter(p, gl.LINK_STATUS)) {
      throw new Error(gl.getProgramInfoLog(p) || "");
    }

    return p;
  }

  function createQuad(gl) {
    var pos = new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]);
    var buf = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, buf);
    gl.bufferData(gl.ARRAY_BUFFER, pos, gl.STATIC_DRAW);
    gl.enableVertexAttribArray(0);
    gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0);
  }

  function createTexture(gl, data) {
    var t = gl.createTexture();
    gl.bindTexture(gl.TEXTURE_2D, t);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);
    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 0);
    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, data);
    return t;
  }

  var colorCache = {};

  function parseColor(color) {
    if (!(color in colorCache)) {
      var parsed;

      if (color == "transparent") {
        parsed = [0, 0, 0, 0];
      } else if (color.indexOf("rgba") > -1) {
        parsed = (color.match(/[\d.]+/g) || []).map(Number);

        for (var i = 0; i < 3; i++) {
          parsed[i] = parsed[i] / 255;
        }
      } else {
        parsed = fromString(color).map(function ($) {
          return $ / 255;
        });
        parsed.push(1);
      }

      colorCache[color] = parsed;
    }

    return colorCache[color];
  }

  function clearToAnsi(bg) {
    return "\x1B[0;48;5;" + termcolor(bg) + "m\x1B[2J";
  }

  function colorToAnsi(fg, bg) {
    return "\x1B[0;38;5;" + termcolor(fg) + ";48;5;" + termcolor(bg) + "m";
  }

  function positionToAnsi(x, y) {
    return "\x1B[" + (y + 1) + ";" + (x + 1) + "H";
  }

  function termcolor(color) {
    var SRC_COLORS = 256.0;
    var DST_COLORS = 6.0;
    var COLOR_RATIO = DST_COLORS / SRC_COLORS;
    var rgb = fromString(color);
    var r = Math.floor(rgb[0] * COLOR_RATIO);
    var g = Math.floor(rgb[1] * COLOR_RATIO);
    var b = Math.floor(rgb[2] * COLOR_RATIO);
    return r * 36 + g * 6 + b * 1 + 16;
  }

  var Term = /*#__PURE__*/function (_Backend3) {
    _inheritsLoose(Term, _Backend3);

    function Term() {
      var _this8;

      _this8 = _Backend3.call(this) || this;
      _this8._offset = [0, 0];
      _this8._cursor = [-1, -1];
      _this8._lastColor = "";
      return _this8;
    }

    var _proto8 = Term.prototype;

    _proto8.schedule = function schedule(cb) {
      setTimeout(cb, 1000 / 60);
    };

    _proto8.setOptions = function setOptions(options) {
      _Backend3.prototype.setOptions.call(this, options);

      var size = [options.width, options.height];
      var avail = this.computeSize();
      this._offset = avail.map(function (val, index) {
        return Math.floor((val - size[index]) / 2);
      });
    };

    _proto8.clear = function clear() {
      process.stdout.write(clearToAnsi(this._options.bg));
    };

    _proto8.draw = function draw(data, clearBefore) {
      // determine where to draw what with what colors
      var x = data[0],
          y = data[1],
          ch = data[2],
          fg = data[3],
          bg = data[4]; // determine if we need to move the terminal cursor

      var dx = this._offset[0] + x;
      var dy = this._offset[1] + y;
      var size = this.computeSize();

      if (dx < 0 || dx >= size[0]) {
        return;
      }

      if (dy < 0 || dy >= size[1]) {
        return;
      }

      if (dx !== this._cursor[0] || dy !== this._cursor[1]) {
        process.stdout.write(positionToAnsi(dx, dy));
        this._cursor[0] = dx;
        this._cursor[1] = dy;
      } // terminals automatically clear, but if we're clearing when we're
      // not otherwise provided with a character, just use a space instead


      if (clearBefore) {
        if (!ch) {
          ch = " ";
        }
      } // if we're not clearing and not provided with a character, do nothing


      if (!ch) {
        return;
      } // determine if we need to change colors


      var newColor = colorToAnsi(fg, bg);

      if (newColor !== this._lastColor) {
        process.stdout.write(newColor);
        this._lastColor = newColor;
      }

      if (ch != '\t') {
        // write the provided symbol to the display
        var chars = [].concat(ch);
        process.stdout.write(chars[0]);
      } // update our position, given that we wrote a character


      this._cursor[0]++;

      if (this._cursor[0] >= size[0]) {
        this._cursor[0] = 0;
        this._cursor[1]++;
      }
    };

    _proto8.computeFontSize = function computeFontSize() {
      throw new Error("Terminal backend has no notion of font size");
    };

    _proto8.eventToPosition = function eventToPosition(x, y) {
      return [x, y];
    };

    _proto8.computeSize = function computeSize() {
      return [process.stdout.columns, process.stdout.rows];
    };

    return Term;
  }(Backend);
  /**
   * @namespace
   * Contains text tokenization and breaking routines
   */


  var RE_COLORS = /%([bc]){([^}]*)}/g; // token types

  var TYPE_TEXT = 0;
  var TYPE_NEWLINE = 1;
  var TYPE_FG = 2;
  var TYPE_BG = 3;
  /**
   * Measure size of a resulting text block
   */

  function measure(str, maxWidth) {
    var result = {
      width: 0,
      height: 1
    };
    var tokens = tokenize(str, maxWidth);
    var lineWidth = 0;

    for (var i = 0; i < tokens.length; i++) {
      var token = tokens[i];

      switch (token.type) {
        case TYPE_TEXT:
          lineWidth += token.value.length;
          break;

        case TYPE_NEWLINE:
          result.height++;
          result.width = Math.max(result.width, lineWidth);
          lineWidth = 0;
          break;
      }
    }

    result.width = Math.max(result.width, lineWidth);
    return result;
  }
  /**
   * Convert string to a series of a formatting commands
   */


  function tokenize(str, maxWidth) {
    var result = [];
    /* first tokenization pass - split texts and color formatting commands */

    var offset = 0;
    str.replace(RE_COLORS, function (match, type, name, index) {
      /* string before */
      var part = str.substring(offset, index);

      if (part.length) {
        result.push({
          type: TYPE_TEXT,
          value: part
        });
      }
      /* color command */


      result.push({
        type: type == "c" ? TYPE_FG : TYPE_BG,
        value: name.trim()
      });
      offset = index + match.length;
      return "";
    });
    /* last remaining part */

    var part = str.substring(offset);

    if (part.length) {
      result.push({
        type: TYPE_TEXT,
        value: part
      });
    }

    return breakLines(result, maxWidth);
  }
  /* insert line breaks into first-pass tokenized data */


  function breakLines(tokens, maxWidth) {
    if (!maxWidth) {
      maxWidth = Infinity;
    }

    var i = 0;
    var lineLength = 0;
    var lastTokenWithSpace = -1;

    while (i < tokens.length) {
      /* take all text tokens, remove space, apply linebreaks */
      var token = tokens[i];

      if (token.type == TYPE_NEWLINE) {
        /* reset */
        lineLength = 0;
        lastTokenWithSpace = -1;
      }

      if (token.type != TYPE_TEXT) {
        /* skip non-text tokens */
        i++;
        continue;
      }
      /* remove spaces at the beginning of line */


      while (lineLength == 0 && token.value.charAt(0) == " ") {
        token.value = token.value.substring(1);
      }
      /* forced newline? insert two new tokens after this one */


      var _index2 = token.value.indexOf("\n");

      if (_index2 != -1) {
        token.value = breakInsideToken(tokens, i, _index2, true);
        /* if there are spaces at the end, we must remove them (we do not want the line too long) */

        var arr = token.value.split("");

        while (arr.length && arr[arr.length - 1] == " ") {
          arr.pop();
        }

        token.value = arr.join("");
      }
      /* token degenerated? */


      if (!token.value.length) {
        tokens.splice(i, 1);
        continue;
      }

      if (lineLength + token.value.length > maxWidth) {
        /* line too long, find a suitable breaking spot */

        /* is it possible to break within this token? */
        var _index3 = -1;

        while (1) {
          var nextIndex = token.value.indexOf(" ", _index3 + 1);

          if (nextIndex == -1) {
            break;
          }

          if (lineLength + nextIndex > maxWidth) {
            break;
          }

          _index3 = nextIndex;
        }

        if (_index3 != -1) {
          /* break at space within this one */
          token.value = breakInsideToken(tokens, i, _index3, true);
        } else if (lastTokenWithSpace != -1) {
          /* is there a previous token where a break can occur? */
          var _token = tokens[lastTokenWithSpace];

          var breakIndex = _token.value.lastIndexOf(" ");

          _token.value = breakInsideToken(tokens, lastTokenWithSpace, breakIndex, true);
          i = lastTokenWithSpace;
        } else {
          /* force break in this token */
          token.value = breakInsideToken(tokens, i, maxWidth - lineLength, false);
        }
      } else {
        /* line not long, continue */
        lineLength += token.value.length;

        if (token.value.indexOf(" ") != -1) {
          lastTokenWithSpace = i;
        }
      }

      i++;
      /* advance to next token */
    }

    tokens.push({
      type: TYPE_NEWLINE
    });
    /* insert fake newline to fix the last text line */

    /* remove trailing space from text tokens before newlines */

    var lastTextToken = null;

    for (var _i = 0; _i < tokens.length; _i++) {
      var _token2 = tokens[_i];

      switch (_token2.type) {
        case TYPE_TEXT:
          lastTextToken = _token2;
          break;

        case TYPE_NEWLINE:
          if (lastTextToken) {
            /* remove trailing space */
            var _arr = lastTextToken.value.split("");

            while (_arr.length && _arr[_arr.length - 1] == " ") {
              _arr.pop();
            }

            lastTextToken.value = _arr.join("");
          }

          lastTextToken = null;
          break;
      }
    }

    tokens.pop();
    /* remove fake token */

    return tokens;
  }
  /**
   * Create new tokens and insert them into the stream
   * @param {object[]} tokens
   * @param {int} tokenIndex Token being processed
   * @param {int} breakIndex Index within current token's value
   * @param {bool} removeBreakChar Do we want to remove the breaking character?
   * @returns {string} remaining unbroken token value
   */


  function breakInsideToken(tokens, tokenIndex, breakIndex, removeBreakChar) {
    var newBreakToken = {
      type: TYPE_NEWLINE
    };
    var newTextToken = {
      type: TYPE_TEXT,
      value: tokens[tokenIndex].value.substring(breakIndex + (removeBreakChar ? 1 : 0))
    };
    tokens.splice(tokenIndex + 1, 0, newBreakToken, newTextToken);
    return tokens[tokenIndex].value.substring(0, breakIndex);
  }

  var text = /*#__PURE__*/Object.freeze({
    TYPE_TEXT: TYPE_TEXT,
    TYPE_NEWLINE: TYPE_NEWLINE,
    TYPE_FG: TYPE_FG,
    TYPE_BG: TYPE_BG,
    measure: measure,
    tokenize: tokenize
  });
  /** Default with for display and map generators */

  var DEFAULT_WIDTH = 80;
  /** Default height for display and map generators */

  var DEFAULT_HEIGHT = 25;
  var DIRS = {
    4: [[0, -1], [1, 0], [0, 1], [-1, 0]],
    8: [[0, -1], [1, -1], [1, 0], [1, 1], [0, 1], [-1, 1], [-1, 0], [-1, -1]],
    6: [[-1, -1], [1, -1], [2, 0], [1, 1], [-1, 1], [-2, 0]]
  };
  var KEYS = {
    /** Cancel key. */
    VK_CANCEL: 3,

    /** Help key. */
    VK_HELP: 6,

    /** Backspace key. */
    VK_BACK_SPACE: 8,

    /** Tab key. */
    VK_TAB: 9,

    /** 5 key on Numpad when NumLock is unlocked. Or on Mac, clear key which is positioned at NumLock key. */
    VK_CLEAR: 12,

    /** Return/enter key on the main keyboard. */
    VK_RETURN: 13,

    /** Reserved, but not used. */
    VK_ENTER: 14,

    /** Shift key. */
    VK_SHIFT: 16,

    /** Control key. */
    VK_CONTROL: 17,

    /** Alt (Option on Mac) key. */
    VK_ALT: 18,

    /** Pause key. */
    VK_PAUSE: 19,

    /** Caps lock. */
    VK_CAPS_LOCK: 20,

    /** Escape key. */
    VK_ESCAPE: 27,

    /** Space bar. */
    VK_SPACE: 32,

    /** Page Up key. */
    VK_PAGE_UP: 33,

    /** Page Down key. */
    VK_PAGE_DOWN: 34,

    /** End key. */
    VK_END: 35,

    /** Home key. */
    VK_HOME: 36,

    /** Left arrow. */
    VK_LEFT: 37,

    /** Up arrow. */
    VK_UP: 38,

    /** Right arrow. */
    VK_RIGHT: 39,

    /** Down arrow. */
    VK_DOWN: 40,

    /** Print Screen key. */
    VK_PRINTSCREEN: 44,

    /** Ins(ert) key. */
    VK_INSERT: 45,

    /** Del(ete) key. */
    VK_DELETE: 46,

    /***/
    VK_0: 48,

    /***/
    VK_1: 49,

    /***/
    VK_2: 50,

    /***/
    VK_3: 51,

    /***/
    VK_4: 52,

    /***/
    VK_5: 53,

    /***/
    VK_6: 54,

    /***/
    VK_7: 55,

    /***/
    VK_8: 56,

    /***/
    VK_9: 57,

    /** Colon (:) key. Requires Gecko 15.0 */
    VK_COLON: 58,

    /** Semicolon (;) key. */
    VK_SEMICOLON: 59,

    /** Less-than (<) key. Requires Gecko 15.0 */
    VK_LESS_THAN: 60,

    /** Equals (=) key. */
    VK_EQUALS: 61,

    /** Greater-than (>) key. Requires Gecko 15.0 */
    VK_GREATER_THAN: 62,

    /** Question mark (?) key. Requires Gecko 15.0 */
    VK_QUESTION_MARK: 63,

    /** Atmark (@) key. Requires Gecko 15.0 */
    VK_AT: 64,

    /***/
    VK_A: 65,

    /***/
    VK_B: 66,

    /***/
    VK_C: 67,

    /***/
    VK_D: 68,

    /***/
    VK_E: 69,

    /***/
    VK_F: 70,

    /***/
    VK_G: 71,

    /***/
    VK_H: 72,

    /***/
    VK_I: 73,

    /***/
    VK_J: 74,

    /***/
    VK_K: 75,

    /***/
    VK_L: 76,

    /***/
    VK_M: 77,

    /***/
    VK_N: 78,

    /***/
    VK_O: 79,

    /***/
    VK_P: 80,

    /***/
    VK_Q: 81,

    /***/
    VK_R: 82,

    /***/
    VK_S: 83,

    /***/
    VK_T: 84,

    /***/
    VK_U: 85,

    /***/
    VK_V: 86,

    /***/
    VK_W: 87,

    /***/
    VK_X: 88,

    /***/
    VK_Y: 89,

    /***/
    VK_Z: 90,

    /***/
    VK_CONTEXT_MENU: 93,

    /** 0 on the numeric keypad. */
    VK_NUMPAD0: 96,

    /** 1 on the numeric keypad. */
    VK_NUMPAD1: 97,

    /** 2 on the numeric keypad. */
    VK_NUMPAD2: 98,

    /** 3 on the numeric keypad. */
    VK_NUMPAD3: 99,

    /** 4 on the numeric keypad. */
    VK_NUMPAD4: 100,

    /** 5 on the numeric keypad. */
    VK_NUMPAD5: 101,

    /** 6 on the numeric keypad. */
    VK_NUMPAD6: 102,

    /** 7 on the numeric keypad. */
    VK_NUMPAD7: 103,

    /** 8 on the numeric keypad. */
    VK_NUMPAD8: 104,

    /** 9 on the numeric keypad. */
    VK_NUMPAD9: 105,

    /** * on the numeric keypad. */
    VK_MULTIPLY: 106,

    /** + on the numeric keypad. */
    VK_ADD: 107,

    /***/
    VK_SEPARATOR: 108,

    /** - on the numeric keypad. */
    VK_SUBTRACT: 109,

    /** Decimal point on the numeric keypad. */
    VK_DECIMAL: 110,

    /** / on the numeric keypad. */
    VK_DIVIDE: 111,

    /** F1 key. */
    VK_F1: 112,

    /** F2 key. */
    VK_F2: 113,

    /** F3 key. */
    VK_F3: 114,

    /** F4 key. */
    VK_F4: 115,

    /** F5 key. */
    VK_F5: 116,

    /** F6 key. */
    VK_F6: 117,

    /** F7 key. */
    VK_F7: 118,

    /** F8 key. */
    VK_F8: 119,

    /** F9 key. */
    VK_F9: 120,

    /** F10 key. */
    VK_F10: 121,

    /** F11 key. */
    VK_F11: 122,

    /** F12 key. */
    VK_F12: 123,

    /** F13 key. */
    VK_F13: 124,

    /** F14 key. */
    VK_F14: 125,

    /** F15 key. */
    VK_F15: 126,

    /** F16 key. */
    VK_F16: 127,

    /** F17 key. */
    VK_F17: 128,

    /** F18 key. */
    VK_F18: 129,

    /** F19 key. */
    VK_F19: 130,

    /** F20 key. */
    VK_F20: 131,

    /** F21 key. */
    VK_F21: 132,

    /** F22 key. */
    VK_F22: 133,

    /** F23 key. */
    VK_F23: 134,

    /** F24 key. */
    VK_F24: 135,

    /** Num Lock key. */
    VK_NUM_LOCK: 144,

    /** Scroll Lock key. */
    VK_SCROLL_LOCK: 145,

    /** Circumflex (^) key. Requires Gecko 15.0 */
    VK_CIRCUMFLEX: 160,

    /** Exclamation (!) key. Requires Gecko 15.0 */
    VK_EXCLAMATION: 161,

    /** Double quote () key. Requires Gecko 15.0 */
    VK_DOUBLE_QUOTE: 162,

    /** Hash (#) key. Requires Gecko 15.0 */
    VK_HASH: 163,

    /** Dollar sign ($) key. Requires Gecko 15.0 */
    VK_DOLLAR: 164,

    /** Percent (%) key. Requires Gecko 15.0 */
    VK_PERCENT: 165,

    /** Ampersand (&) key. Requires Gecko 15.0 */
    VK_AMPERSAND: 166,

    /** Underscore (_) key. Requires Gecko 15.0 */
    VK_UNDERSCORE: 167,

    /** Open parenthesis (() key. Requires Gecko 15.0 */
    VK_OPEN_PAREN: 168,

    /** Close parenthesis ()) key. Requires Gecko 15.0 */
    VK_CLOSE_PAREN: 169,

    /* Asterisk (*) key. Requires Gecko 15.0 */
    VK_ASTERISK: 170,

    /** Plus (+) key. Requires Gecko 15.0 */
    VK_PLUS: 171,

    /** Pipe (|) key. Requires Gecko 15.0 */
    VK_PIPE: 172,

    /** Hyphen-US/docs/Minus (-) key. Requires Gecko 15.0 */
    VK_HYPHEN_MINUS: 173,

    /** Open curly bracket ({) key. Requires Gecko 15.0 */
    VK_OPEN_CURLY_BRACKET: 174,

    /** Close curly bracket (}) key. Requires Gecko 15.0 */
    VK_CLOSE_CURLY_BRACKET: 175,

    /** Tilde (~) key. Requires Gecko 15.0 */
    VK_TILDE: 176,

    /** Comma (,) key. */
    VK_COMMA: 188,

    /** Period (.) key. */
    VK_PERIOD: 190,

    /** Slash (/) key. */
    VK_SLASH: 191,

    /** Back tick (`) key. */
    VK_BACK_QUOTE: 192,

    /** Open square bracket ([) key. */
    VK_OPEN_BRACKET: 219,

    /** Back slash (\) key. */
    VK_BACK_SLASH: 220,

    /** Close square bracket (]) key. */
    VK_CLOSE_BRACKET: 221,

    /** Quote (''') key. */
    VK_QUOTE: 222,

    /** Meta key on Linux, Command key on Mac. */
    VK_META: 224,

    /** AltGr key on Linux. Requires Gecko 15.0 */
    VK_ALTGR: 225,

    /** Windows logo key on Windows. Or Super or Hyper key on Linux. Requires Gecko 15.0 */
    VK_WIN: 91,

    /** Linux support for this keycode was added in Gecko 4.0. */
    VK_KANA: 21,

    /** Linux support for this keycode was added in Gecko 4.0. */
    VK_HANGUL: 21,

    /** 英数 key on Japanese Mac keyboard. Requires Gecko 15.0 */
    VK_EISU: 22,

    /** Linux support for this keycode was added in Gecko 4.0. */
    VK_JUNJA: 23,

    /** Linux support for this keycode was added in Gecko 4.0. */
    VK_FINAL: 24,

    /** Linux support for this keycode was added in Gecko 4.0. */
    VK_HANJA: 25,

    /** Linux support for this keycode was added in Gecko 4.0. */
    VK_KANJI: 25,

    /** Linux support for this keycode was added in Gecko 4.0. */
    VK_CONVERT: 28,

    /** Linux support for this keycode was added in Gecko 4.0. */
    VK_NONCONVERT: 29,

    /** Linux support for this keycode was added in Gecko 4.0. */
    VK_ACCEPT: 30,

    /** Linux support for this keycode was added in Gecko 4.0. */
    VK_MODECHANGE: 31,

    /** Linux support for this keycode was added in Gecko 4.0. */
    VK_SELECT: 41,

    /** Linux support for this keycode was added in Gecko 4.0. */
    VK_PRINT: 42,

    /** Linux support for this keycode was added in Gecko 4.0. */
    VK_EXECUTE: 43,

    /** Linux support for this keycode was added in Gecko 4.0.	 */
    VK_SLEEP: 95
  };
  var BACKENDS = {
    "hex": Hex,
    "rect": Rect,
    "tile": Tile,
    "tile-gl": TileGL,
    "term": Term
  };
  var DEFAULT_OPTIONS = {
    width: DEFAULT_WIDTH,
    height: DEFAULT_HEIGHT,
    transpose: false,
    layout: "rect",
    fontSize: 15,
    spacing: 1,
    border: 0,
    forceSquareRatio: false,
    fontFamily: "monospace",
    fontStyle: "",
    fg: "#ccc",
    bg: "#000",
    tileWidth: 32,
    tileHeight: 32,
    tileMap: {},
    tileSet: null,
    tileColorize: false
  };
  /**
   * @class Visual map display
   */

  var Display =
  /** @class */
  function () {
    var Display = /*#__PURE__*/function () {
      function Display(options) {
        if (options === void 0) {
          options = {};
        }

        this._data = {};
        this._dirty = false; // false = nothing, true = all, object = dirty cells

        this._options = {};
        options = Object.assign({}, DEFAULT_OPTIONS, options);
        this.setOptions(options);
        this.DEBUG = this.DEBUG.bind(this);
        this._tick = this._tick.bind(this);

        this._backend.schedule(this._tick);
      }
      /**
       * Debug helper, ideal as a map generator callback. Always bound to this.
       * @param {int} x
       * @param {int} y
       * @param {int} what
       */


      var _proto9 = Display.prototype;

      _proto9.DEBUG = function DEBUG(x, y, what) {
        var colors = [this._options.bg, this._options.fg];
        this.draw(x, y, null, null, colors[what % colors.length]);
      }
      /**
       * Clear the whole display (cover it with background color)
       */
      ;

      _proto9.clear = function clear() {
        this._data = {};
        this._dirty = true;
      }
      /**
       * @see ROT.Display
       */
      ;

      _proto9.setOptions = function setOptions(options) {
        Object.assign(this._options, options);

        if (options.width || options.height || options.fontSize || options.fontFamily || options.spacing || options.layout) {
          if (options.layout) {
            var ctor = BACKENDS[options.layout];
            this._backend = new ctor();
          }

          this._backend.setOptions(this._options);

          this._dirty = true;
        }

        return this;
      }
      /**
       * Returns currently set options
       */
      ;

      _proto9.getOptions = function getOptions() {
        return this._options;
      }
      /**
       * Returns the DOM node of this display
       */
      ;

      _proto9.getContainer = function getContainer() {
        return this._backend.getContainer();
      }
      /**
       * Compute the maximum width/height to fit into a set of given constraints
       * @param {int} availWidth Maximum allowed pixel width
       * @param {int} availHeight Maximum allowed pixel height
       * @returns {int[2]} cellWidth,cellHeight
       */
      ;

      _proto9.computeSize = function computeSize(availWidth, availHeight) {
        return this._backend.computeSize(availWidth, availHeight);
      }
      /**
       * Compute the maximum font size to fit into a set of given constraints
       * @param {int} availWidth Maximum allowed pixel width
       * @param {int} availHeight Maximum allowed pixel height
       * @returns {int} fontSize
       */
      ;

      _proto9.computeFontSize = function computeFontSize(availWidth, availHeight) {
        return this._backend.computeFontSize(availWidth, availHeight);
      };

      _proto9.computeTileSize = function computeTileSize(availWidth, availHeight) {
        var width = Math.floor(availWidth / this._options.width);
        var height = Math.floor(availHeight / this._options.height);
        return [width, height];
      }
      /**
       * Convert a DOM event (mouse or touch) to map coordinates. Uses first touch for multi-touch.
       * @param {Event} e event
       * @returns {int[2]} -1 for values outside of the canvas
       */
      ;

      _proto9.eventToPosition = function eventToPosition(e) {
        var x, y;

        if ("touches" in e) {
          x = e.touches[0].clientX;
          y = e.touches[0].clientY;
        } else {
          x = e.clientX;
          y = e.clientY;
        }

        return this._backend.eventToPosition(x, y);
      }
      /**
       * @param {int} x
       * @param {int} y
       * @param {string || string[]} ch One or more chars (will be overlapping themselves)
       * @param {string} [fg] foreground color
       * @param {string} [bg] background color
       */
      ;

      _proto9.draw = function draw(x, y, ch, fg, bg) {
        if (!fg) {
          fg = this._options.fg;
        }

        if (!bg) {
          bg = this._options.bg;
        }

        var key = x + "," + y;
        this._data[key] = [x, y, ch, fg, bg];

        if (this._dirty === true) {
          return;
        } // will already redraw everything 


        if (!this._dirty) {
          this._dirty = {};
        } // first!


        this._dirty[key] = true;
      }
      /**
       * Draws a text at given position. Optionally wraps at a maximum length. Currently does not work with hex layout.
       * @param {int} x
       * @param {int} y
       * @param {string} text May contain color/background format specifiers, %c{name}/%b{name}, both optional. %c{}/%b{} resets to default.
       * @param {int} [maxWidth] wrap at what width?
       * @returns {int} lines drawn
       */
      ;

      _proto9.drawText = function drawText(x, y, text, maxWidth) {
        var fg = null;
        var bg = null;
        var cx = x;
        var cy = y;
        var lines = 1;

        if (!maxWidth) {
          maxWidth = this._options.width - x;
        }

        var tokens = tokenize(text, maxWidth);

        while (tokens.length) {
          // interpret tokenized opcode stream
          var token = tokens.shift();

          switch (token.type) {
            case TYPE_TEXT:
              var isSpace = false,
                  isPrevSpace = false,
                  isFullWidth = false,
                  isPrevFullWidth = false;

              for (var i = 0; i < token.value.length; i++) {
                var cc = token.value.charCodeAt(i);
                var c = token.value.charAt(i);

                if (this._options.layout === "term") {
                  var cch = cc >> 8;
                  var isCJK = cch === 0x11 || cch >= 0x2e && cch <= 0x9f || cch >= 0xac && cch <= 0xd7 || cc >= 0xA960 && cc <= 0xA97F;

                  if (isCJK) {
                    this.draw(cx + 0, cy, c, fg, bg);
                    this.draw(cx + 1, cy, "\t", fg, bg);
                    cx += 2;
                    continue;
                  }
                } // Assign to `true` when the current char is full-width.


                isFullWidth = cc > 0xff00 && cc < 0xff61 || cc > 0xffdc && cc < 0xffe8 || cc > 0xffee; // Current char is space, whatever full-width or half-width both are OK.

                isSpace = c.charCodeAt(0) == 0x20 || c.charCodeAt(0) == 0x3000; // The previous char is full-width and
                // current char is nether half-width nor a space.

                if (isPrevFullWidth && !isFullWidth && !isSpace) {
                  cx++;
                } // add an extra position
                // The current char is full-width and
                // the previous char is not a space.


                if (isFullWidth && !isPrevSpace) {
                  cx++;
                } // add an extra position


                this.draw(cx++, cy, c, fg, bg);
                isPrevSpace = isSpace;
                isPrevFullWidth = isFullWidth;
              }

              break;

            case TYPE_FG:
              fg = token.value || null;
              break;

            case TYPE_BG:
              bg = token.value || null;
              break;

            case TYPE_NEWLINE:
              cx = x;
              cy++;
              lines++;
              break;
          }
        }

        return lines;
      }
      /**
       * Timer tick: update dirty parts
       */
      ;

      _proto9._tick = function _tick() {
        this._backend.schedule(this._tick);

        if (!this._dirty) {
          return;
        }

        if (this._dirty === true) {
          // draw all
          this._backend.clear();

          for (var id in this._data) {
            this._draw(id, false);
          } // redraw cached data 

        } else {
          // draw only dirty 
          for (var key in this._dirty) {
            this._draw(key, true);
          }
        }

        this._dirty = false;
      }
      /**
       * @param {string} key What to draw
       * @param {bool} clearBefore Is it necessary to clean before?
       */
      ;

      _proto9._draw = function _draw(key, clearBefore) {
        var data = this._data[key];

        if (data[4] != this._options.bg) {
          clearBefore = true;
        }

        this._backend.draw(data, clearBefore);
      };

      return Display;
    }();

    Display.Rect = Rect;
    Display.Hex = Hex;
    Display.Tile = Tile;
    Display.TileGL = TileGL;
    Display.Term = Term;
    return Display;
  }();
  /**
   * @class (Markov process)-based string generator.
   * Copied from a <a href="http://www.roguebasin.roguelikedevelopment.org/index.php?title=Names_from_a_high_order_Markov_Process_and_a_simplified_Katz_back-off_scheme">RogueBasin article</a>.
   * Offers configurable order and prior.
   */


  var StringGenerator = /*#__PURE__*/function () {
    function StringGenerator(options) {
      this._options = {
        words: false,
        order: 3,
        prior: 0.001
      };
      Object.assign(this._options, options);
      this._boundary = String.fromCharCode(0);
      this._suffix = this._boundary;
      this._prefix = [];

      for (var i = 0; i < this._options.order; i++) {
        this._prefix.push(this._boundary);
      }

      this._priorValues = {};
      this._priorValues[this._boundary] = this._options.prior;
      this._data = {};
    }
    /**
     * Remove all learning data
     */


    var _proto10 = StringGenerator.prototype;

    _proto10.clear = function clear() {
      this._data = {};
      this._priorValues = {};
    }
    /**
     * @returns {string} Generated string
     */
    ;

    _proto10.generate = function generate() {
      var result = [this._sample(this._prefix)];

      while (result[result.length - 1] != this._boundary) {
        result.push(this._sample(result));
      }

      return this._join(result.slice(0, -1));
    }
    /**
     * Observe (learn) a string from a training set
     */
    ;

    _proto10.observe = function observe(string) {
      var tokens = this._split(string);

      for (var i = 0; i < tokens.length; i++) {
        this._priorValues[tokens[i]] = this._options.prior;
      }

      tokens = this._prefix.concat(tokens).concat(this._suffix);
      /* add boundary symbols */

      for (var _i2 = this._options.order; _i2 < tokens.length; _i2++) {
        var context = tokens.slice(_i2 - this._options.order, _i2);
        var event = tokens[_i2];

        for (var j = 0; j < context.length; j++) {
          var subcontext = context.slice(j);

          this._observeEvent(subcontext, event);
        }
      }
    };

    _proto10.getStats = function getStats() {
      var parts = [];
      var priorCount = Object.keys(this._priorValues).length;
      priorCount--; // boundary

      parts.push("distinct samples: " + priorCount);
      var dataCount = Object.keys(this._data).length;
      var eventCount = 0;

      for (var p in this._data) {
        eventCount += Object.keys(this._data[p]).length;
      }

      parts.push("dictionary size (contexts): " + dataCount);
      parts.push("dictionary size (events): " + eventCount);
      return parts.join(", ");
    }
    /**
     * @param {string}
     * @returns {string[]}
     */
    ;

    _proto10._split = function _split(str) {
      return str.split(this._options.words ? /\s+/ : "");
    }
    /**
     * @param {string[]}
     * @returns {string}
     */
    ;

    _proto10._join = function _join(arr) {
      return arr.join(this._options.words ? " " : "");
    }
    /**
     * @param {string[]} context
     * @param {string} event
     */
    ;

    _proto10._observeEvent = function _observeEvent(context, event) {
      var key = this._join(context);

      if (!(key in this._data)) {
        this._data[key] = {};
      }

      var data = this._data[key];

      if (!(event in data)) {
        data[event] = 0;
      }

      data[event]++;
    }
    /**
     * @param {string[]}
     * @returns {string}
     */
    ;

    _proto10._sample = function _sample(context) {
      context = this._backoff(context);

      var key = this._join(context);

      var data = this._data[key];
      var available = {};

      if (this._options.prior) {
        for (var event in this._priorValues) {
          available[event] = this._priorValues[event];
        }

        for (var _event in data) {
          available[_event] += data[_event];
        }
      } else {
        available = data;
      }

      return RNG$1.getWeightedValue(available);
    }
    /**
     * @param {string[]}
     * @returns {string[]}
     */
    ;

    _proto10._backoff = function _backoff(context) {
      if (context.length > this._options.order) {
        context = context.slice(-this._options.order);
      } else if (context.length < this._options.order) {
        context = this._prefix.slice(0, this._options.order - context.length).concat(context);
      }

      while (!(this._join(context) in this._data) && context.length > 0) {
        context = context.slice(1);
      }

      return context;
    };

    return StringGenerator;
  }();

  var MinHeap = /*#__PURE__*/function () {
    function MinHeap() {
      this.heap = [];
      this.timestamp = 0;
    }

    var _proto11 = MinHeap.prototype;

    _proto11.lessThan = function lessThan(a, b) {
      return a.key == b.key ? a.timestamp < b.timestamp : a.key < b.key;
    };

    _proto11.shift = function shift(v) {
      this.heap = this.heap.map(function (_ref) {
        var key = _ref.key,
            value = _ref.value,
            timestamp = _ref.timestamp;
        return {
          key: key + v,
          value: value,
          timestamp: timestamp
        };
      });
    };

    _proto11.len = function len() {
      return this.heap.length;
    };

    _proto11.push = function push(value, key) {
      this.timestamp += 1;
      var loc = this.len();
      this.heap.push({
        value: value,
        timestamp: this.timestamp,
        key: key
      });
      this.updateUp(loc);
    };

    _proto11.pop = function pop() {
      if (this.len() == 0) {
        throw new Error("no element to pop");
      }

      var top = this.heap[0];

      if (this.len() > 1) {
        this.heap[0] = this.heap.pop();
        this.updateDown(0);
      } else {
        this.heap.pop();
      }

      return top;
    };

    _proto11.find = function find(v) {
      for (var i = 0; i < this.len(); i++) {
        if (v == this.heap[i].value) {
          return this.heap[i];
        }
      }

      return null;
    };

    _proto11.remove = function remove(v) {
      var index = null;

      for (var i = 0; i < this.len(); i++) {
        if (v == this.heap[i].value) {
          index = i;
        }
      }

      if (index === null) {
        return false;
      }

      if (this.len() > 1) {
        var last = this.heap.pop();

        if (last.value != v) {
          // if the last one is being removed, do nothing
          this.heap[index] = last;
          this.updateDown(index);
        }

        return true;
      } else {
        this.heap.pop();
      }

      return true;
    };

    _proto11.parentNode = function parentNode(x) {
      return Math.floor((x - 1) / 2);
    };

    _proto11.leftChildNode = function leftChildNode(x) {
      return 2 * x + 1;
    };

    _proto11.rightChildNode = function rightChildNode(x) {
      return 2 * x + 2;
    };

    _proto11.existNode = function existNode(x) {
      return x >= 0 && x < this.heap.length;
    };

    _proto11.swap = function swap(x, y) {
      var t = this.heap[x];
      this.heap[x] = this.heap[y];
      this.heap[y] = t;
    };

    _proto11.minNode = function minNode(numbers) {
      var validnumbers = numbers.filter(this.existNode.bind(this));
      var minimal = validnumbers[0];

      for (var _iterator = _createForOfIteratorHelperLoose(validnumbers), _step; !(_step = _iterator()).done;) {
        var i = _step.value;

        if (this.lessThan(this.heap[i], this.heap[minimal])) {
          minimal = i;
        }
      }

      return minimal;
    };

    _proto11.updateUp = function updateUp(x) {
      if (x == 0) {
        return;
      }

      var parent = this.parentNode(x);

      if (this.existNode(parent) && this.lessThan(this.heap[x], this.heap[parent])) {
        this.swap(x, parent);
        this.updateUp(parent);
      }
    };

    _proto11.updateDown = function updateDown(x) {
      var leftChild = this.leftChildNode(x);
      var rightChild = this.rightChildNode(x);

      if (!this.existNode(leftChild)) {
        return;
      }

      var m = this.minNode([x, leftChild, rightChild]);

      if (m != x) {
        this.swap(x, m);
        this.updateDown(m);
      }
    };

    _proto11.debugPrint = function debugPrint() {
      console.log(this.heap);
    };

    return MinHeap;
  }();

  var EventQueue = /*#__PURE__*/function () {
    /**
     * @class Generic event queue: stores events and retrieves them based on their time
     */
    function EventQueue() {
      this._time = 0;
      this._events = new MinHeap();
    }
    /**
     * @returns {number} Elapsed time
     */


    var _proto12 = EventQueue.prototype;

    _proto12.getTime = function getTime() {
      return this._time;
    }
    /**
     * Clear all scheduled events
     */
    ;

    _proto12.clear = function clear() {
      this._events = new MinHeap();
      return this;
    }
    /**
     * @param {?} event
     * @param {number} time
     */
    ;

    _proto12.add = function add(event, time) {
      this._events.push(event, time);
    }
    /**
     * Locates the nearest event, advances time if necessary. Returns that event and removes it from the queue.
     * @returns {? || null} The event previously added by addEvent, null if no event available
     */
    ;

    _proto12.get = function get() {
      if (!this._events.len()) {
        return null;
      }

      var _this$_events$pop = this._events.pop(),
          time = _this$_events$pop.key,
          event = _this$_events$pop.value;

      if (time > 0) {
        /* advance */
        this._time += time;

        this._events.shift(-time);
      }

      return event;
    }
    /**
     * Get the time associated with the given event
     * @param {?} event
     * @returns {number} time
     */
    ;

    _proto12.getEventTime = function getEventTime(event) {
      var r = this._events.find(event);

      if (r) {
        var key = r.key;
        return key;
      }

      return undefined;
    }
    /**
     * Remove an event from the queue
     * @param {?} event
     * @returns {bool} success?
     */
    ;

    _proto12.remove = function remove(event) {
      return this._events.remove(event);
    };

    return EventQueue;
  }();

  var Scheduler = /*#__PURE__*/function () {
    /**
     * @class Abstract scheduler
     */
    function Scheduler() {
      this._queue = new EventQueue();
      this._repeat = [];
      this._current = null;
    }
    /**
     * @see ROT.EventQueue#getTime
     */


    var _proto13 = Scheduler.prototype;

    _proto13.getTime = function getTime() {
      return this._queue.getTime();
    }
    /**
     * @param {?} item
     * @param {bool} repeat
     */
    ;

    _proto13.add = function add(item, repeat) {
      if (repeat) {
        this._repeat.push(item);
      }

      return this;
    }
    /**
     * Get the time the given item is scheduled for
     * @param {?} item
     * @returns {number} time
     */
    ;

    _proto13.getTimeOf = function getTimeOf(item) {
      return this._queue.getEventTime(item);
    }
    /**
     * Clear all items
     */
    ;

    _proto13.clear = function clear() {
      this._queue.clear();

      this._repeat = [];
      this._current = null;
      return this;
    }
    /**
     * Remove a previously added item
     * @param {?} item
     * @returns {bool} successful?
     */
    ;

    _proto13.remove = function remove(item) {
      var result = this._queue.remove(item);

      var index = this._repeat.indexOf(item);

      if (index != -1) {
        this._repeat.splice(index, 1);
      }

      if (this._current == item) {
        this._current = null;
      }

      return result;
    }
    /**
     * Schedule next item
     * @returns {?}
     */
    ;

    _proto13.next = function next() {
      this._current = this._queue.get();
      return this._current;
    };

    return Scheduler;
  }();
  /**
   * @class Simple fair scheduler (round-robin style)
   */


  var Simple = /*#__PURE__*/function (_Scheduler) {
    _inheritsLoose(Simple, _Scheduler);

    function Simple() {
      return _Scheduler.apply(this, arguments) || this;
    }

    var _proto14 = Simple.prototype;

    _proto14.add = function add(item, repeat) {
      this._queue.add(item, 0);

      return _Scheduler.prototype.add.call(this, item, repeat);
    };

    _proto14.next = function next() {
      if (this._current !== null && this._repeat.indexOf(this._current) != -1) {
        this._queue.add(this._current, 0);
      }

      return _Scheduler.prototype.next.call(this);
    };

    return Simple;
  }(Scheduler);
  /**
   * @class Speed-based scheduler
   */


  var Speed = /*#__PURE__*/function (_Scheduler2) {
    _inheritsLoose(Speed, _Scheduler2);

    function Speed() {
      return _Scheduler2.apply(this, arguments) || this;
    }

    var _proto15 = Speed.prototype;

    /**
     * @param {object} item anything with "getSpeed" method
     * @param {bool} repeat
     * @param {number} [time=1/item.getSpeed()]
     * @see ROT.Scheduler#add
     */
    _proto15.add = function add(item, repeat, time) {
      this._queue.add(item, time !== undefined ? time : 1 / item.getSpeed());

      return _Scheduler2.prototype.add.call(this, item, repeat);
    }
    /**
     * @see ROT.Scheduler#next
     */
    ;

    _proto15.next = function next() {
      if (this._current && this._repeat.indexOf(this._current) != -1) {
        this._queue.add(this._current, 1 / this._current.getSpeed());
      }

      return _Scheduler2.prototype.next.call(this);
    };

    return Speed;
  }(Scheduler);
  /**
   * @class Action-based scheduler
   * @augments ROT.Scheduler
   */


  var Action = /*#__PURE__*/function (_Scheduler3) {
    _inheritsLoose(Action, _Scheduler3);

    function Action() {
      var _this9;

      _this9 = _Scheduler3.call(this) || this;
      _this9._defaultDuration = 1;
      /* for newly added */

      _this9._duration = _this9._defaultDuration;
      /* for this._current */

      return _this9;
    }
    /**
     * @param {object} item
     * @param {bool} repeat
     * @param {number} [time=1]
     * @see ROT.Scheduler#add
     */


    var _proto16 = Action.prototype;

    _proto16.add = function add(item, repeat, time) {
      this._queue.add(item, time || this._defaultDuration);

      return _Scheduler3.prototype.add.call(this, item, repeat);
    };

    _proto16.clear = function clear() {
      this._duration = this._defaultDuration;
      return _Scheduler3.prototype.clear.call(this);
    };

    _proto16.remove = function remove(item) {
      if (item == this._current) {
        this._duration = this._defaultDuration;
      }

      return _Scheduler3.prototype.remove.call(this, item);
    }
    /**
     * @see ROT.Scheduler#next
     */
    ;

    _proto16.next = function next() {
      if (this._current !== null && this._repeat.indexOf(this._current) != -1) {
        this._queue.add(this._current, this._duration || this._defaultDuration);

        this._duration = this._defaultDuration;
      }

      return _Scheduler3.prototype.next.call(this);
    }
    /**
     * Set duration for the active item
     */
    ;

    _proto16.setDuration = function setDuration(time) {
      if (this._current) {
        this._duration = time;
      }

      return this;
    };

    return Action;
  }(Scheduler);

  var index = {
    Simple: Simple,
    Speed: Speed,
    Action: Action
  };

  var FOV = /*#__PURE__*/function () {
    /**
     * @class Abstract FOV algorithm
     * @param {function} lightPassesCallback Does the light pass through x,y?
     * @param {object} [options]
     * @param {int} [options.topology=8] 4/6/8
     */
    function FOV(lightPassesCallback, options) {
      if (options === void 0) {
        options = {};
      }

      this._lightPasses = lightPassesCallback;
      this._options = Object.assign({
        topology: 8
      }, options);
    }
    /**
     * Return all neighbors in a concentric ring
     * @param {int} cx center-x
     * @param {int} cy center-y
     * @param {int} r range
     */


    var _proto17 = FOV.prototype;

    _proto17._getCircle = function _getCircle(cx, cy, r) {
      var result = [];
      var dirs, countFactor, startOffset;

      switch (this._options.topology) {
        case 4:
          countFactor = 1;
          startOffset = [0, 1];
          dirs = [DIRS[8][7], DIRS[8][1], DIRS[8][3], DIRS[8][5]];
          break;

        case 6:
          dirs = DIRS[6];
          countFactor = 1;
          startOffset = [-1, 1];
          break;

        case 8:
          dirs = DIRS[4];
          countFactor = 2;
          startOffset = [-1, 1];
          break;

        default:
          throw new Error("Incorrect topology for FOV computation");
          break;
      }
      /* starting neighbor */


      var x = cx + startOffset[0] * r;
      var y = cy + startOffset[1] * r;
      /* circle */

      for (var i = 0; i < dirs.length; i++) {
        for (var j = 0; j < r * countFactor; j++) {
          result.push([x, y]);
          x += dirs[i][0];
          y += dirs[i][1];
        }
      }

      return result;
    };

    return FOV;
  }();
  /**
   * @class Discrete shadowcasting algorithm. Obsoleted by Precise shadowcasting.
   * @augments ROT.FOV
   */


  var DiscreteShadowcasting = /*#__PURE__*/function (_FOV) {
    _inheritsLoose(DiscreteShadowcasting, _FOV);

    function DiscreteShadowcasting() {
      return _FOV.apply(this, arguments) || this;
    }

    var _proto18 = DiscreteShadowcasting.prototype;

    _proto18.compute = function compute(x, y, R, callback) {
      /* this place is always visible */
      callback(x, y, 0, 1);
      /* standing in a dark place. FIXME is this a good idea?  */

      if (!this._lightPasses(x, y)) {
        return;
      }
      /* start and end angles */


      var DATA = [];
      var A, B, cx, cy, blocks;
      /* analyze surrounding cells in concentric rings, starting from the center */

      for (var r = 1; r <= R; r++) {
        var neighbors = this._getCircle(x, y, r);

        var angle = 360 / neighbors.length;

        for (var i = 0; i < neighbors.length; i++) {
          cx = neighbors[i][0];
          cy = neighbors[i][1];
          A = angle * (i - 0.5);
          B = A + angle;
          blocks = !this._lightPasses(cx, cy);

          if (this._visibleCoords(Math.floor(A), Math.ceil(B), blocks, DATA)) {
            callback(cx, cy, r, 1);
          }

          if (DATA.length == 2 && DATA[0] == 0 && DATA[1] == 360) {
            return;
          }
          /* cutoff? */

        }
        /* for all cells in this ring */

      }
      /* for all rings */

    }
    /**
     * @param {int} A start angle
     * @param {int} B end angle
     * @param {bool} blocks Does current cell block visibility?
     * @param {int[][]} DATA shadowed angle pairs
     */
    ;

    _proto18._visibleCoords = function _visibleCoords(A, B, blocks, DATA) {
      if (A < 0) {
        var v1 = this._visibleCoords(0, B, blocks, DATA);

        var v2 = this._visibleCoords(360 + A, 360, blocks, DATA);

        return v1 || v2;
      }

      var index = 0;

      while (index < DATA.length && DATA[index] < A) {
        index++;
      }

      if (index == DATA.length) {
        /* completely new shadow */
        if (blocks) {
          DATA.push(A, B);
        }

        return true;
      }

      var count = 0;

      if (index % 2) {
        /* this shadow starts in an existing shadow, or within its ending boundary */
        while (index < DATA.length && DATA[index] < B) {
          index++;
          count++;
        }

        if (count == 0) {
          return false;
        }

        if (blocks) {
          if (count % 2) {
            DATA.splice(index - count, count, B);
          } else {
            DATA.splice(index - count, count);
          }
        }

        return true;
      } else {
        /* this shadow starts outside an existing shadow, or within a starting boundary */
        while (index < DATA.length && DATA[index] < B) {
          index++;
          count++;
        }
        /* visible when outside an existing shadow, or when overlapping */


        if (A == DATA[index - count] && count == 1) {
          return false;
        }

        if (blocks) {
          if (count % 2) {
            DATA.splice(index - count, count, A);
          } else {
            DATA.splice(index - count, count, A, B);
          }
        }

        return true;
      }
    };

    return DiscreteShadowcasting;
  }(FOV);
  /**
   * @class Precise shadowcasting algorithm
   * @augments ROT.FOV
   */


  var PreciseShadowcasting = /*#__PURE__*/function (_FOV2) {
    _inheritsLoose(PreciseShadowcasting, _FOV2);

    function PreciseShadowcasting() {
      return _FOV2.apply(this, arguments) || this;
    }

    var _proto19 = PreciseShadowcasting.prototype;

    _proto19.compute = function compute(x, y, R, callback) {
      /* this place is always visible */
      callback(x, y, 0, 1);
      /* standing in a dark place. FIXME is this a good idea?  */

      if (!this._lightPasses(x, y)) {
        return;
      }
      /* list of all shadows */


      var SHADOWS = [];
      var cx, cy, blocks, A1, A2, visibility;
      /* analyze surrounding cells in concentric rings, starting from the center */

      for (var r = 1; r <= R; r++) {
        var neighbors = this._getCircle(x, y, r);

        var neighborCount = neighbors.length;

        for (var i = 0; i < neighborCount; i++) {
          cx = neighbors[i][0];
          cy = neighbors[i][1];
          /* shift half-an-angle backwards to maintain consistency of 0-th cells */

          A1 = [i ? 2 * i - 1 : 2 * neighborCount - 1, 2 * neighborCount];
          A2 = [2 * i + 1, 2 * neighborCount];
          blocks = !this._lightPasses(cx, cy);
          visibility = this._checkVisibility(A1, A2, blocks, SHADOWS);

          if (visibility) {
            //callback(cx, cy, r, visibility);
			if (callback(cx, cy, r, visibility)) return true;
          }

          if (SHADOWS.length == 2 && SHADOWS[0][0] == 0 && SHADOWS[1][0] == SHADOWS[1][1]) {
            return;
          }
          /* cutoff? */

        }
        /* for all cells in this ring */

      }
      /* for all rings */

    }
    /**
     * @param {int[2]} A1 arc start
     * @param {int[2]} A2 arc end
     * @param {bool} blocks Does current arc block visibility?
     * @param {int[][]} SHADOWS list of active shadows
     */
    ;

    _proto19._checkVisibility = function _checkVisibility(A1, A2, blocks, SHADOWS) {
      if (A1[0] > A2[0]) {
        /* split into two sub-arcs */
        var v1 = this._checkVisibility(A1, [A1[1], A1[1]], blocks, SHADOWS);

        var v2 = this._checkVisibility([0, 1], A2, blocks, SHADOWS);

        return (v1 + v2) / 2;
      }
      /* index1: first shadow >= A1 */


      var index1 = 0,
          edge1 = false;

      while (index1 < SHADOWS.length) {
        var old = SHADOWS[index1];
        var diff = old[0] * A1[1] - A1[0] * old[1];

        if (diff >= 0) {
          /* old >= A1 */
          if (diff == 0 && !(index1 % 2)) {
            edge1 = true;
          }

          break;
        }

        index1++;
      }
      /* index2: last shadow <= A2 */


      var index2 = SHADOWS.length,
          edge2 = false;

      while (index2--) {
        var _old = SHADOWS[index2];

        var _diff = A2[0] * _old[1] - _old[0] * A2[1];

        if (_diff >= 0) {
          /* old <= A2 */
          if (_diff == 0 && index2 % 2) {
            edge2 = true;
          }

          break;
        }
      }

      var visible = true;

      if (index1 == index2 && (edge1 || edge2)) {
        /* subset of existing shadow, one of the edges match */
        visible = false;
      } else if (edge1 && edge2 && index1 + 1 == index2 && index2 % 2) {
        /* completely equivalent with existing shadow */
        visible = false;
      } else if (index1 > index2 && index1 % 2) {
        /* subset of existing shadow, not touching */
        visible = false;
      }

      if (!visible) {
        return 0;
      }
      /* fast case: not visible */


      var visibleLength;
      /* compute the length of visible arc, adjust list of shadows (if blocking) */

      var remove = index2 - index1 + 1;

      if (remove % 2) {
        if (index1 % 2) {
          /* first edge within existing shadow, second outside */
          var P = SHADOWS[index1];
          visibleLength = (A2[0] * P[1] - P[0] * A2[1]) / (P[1] * A2[1]);

          if (blocks) {
            SHADOWS.splice(index1, remove, A2);
          }
        } else {
          /* second edge within existing shadow, first outside */
          var _P = SHADOWS[index2];
          visibleLength = (_P[0] * A1[1] - A1[0] * _P[1]) / (A1[1] * _P[1]);

          if (blocks) {
            SHADOWS.splice(index1, remove, A1);
          }
        }
      } else {
        if (index1 % 2) {
          /* both edges within existing shadows */
          var P1 = SHADOWS[index1];
          var P2 = SHADOWS[index2];
          visibleLength = (P2[0] * P1[1] - P1[0] * P2[1]) / (P1[1] * P2[1]);

          if (blocks) {
            SHADOWS.splice(index1, remove);
          }
        } else {
          /* both edges outside existing shadows */
          if (blocks) {
            SHADOWS.splice(index1, remove, A1, A2);
          }

          return 1;
          /* whole arc visible! */
        }
      }

      var arcLength = (A2[0] * A1[1] - A1[0] * A2[1]) / (A1[1] * A2[1]);
      return visibleLength / arcLength;
    };

    return PreciseShadowcasting;
  }(FOV);
  /** Octants used for translating recursive shadowcasting offsets */


  var OCTANTS = [[-1, 0, 0, 1], [0, -1, 1, 0], [0, -1, -1, 0], [-1, 0, 0, -1], [1, 0, 0, -1], [0, 1, -1, 0], [0, 1, 1, 0], [1, 0, 0, 1]];
  /**
   * @class Recursive shadowcasting algorithm
   * Currently only supports 4/8 topologies, not hexagonal.
   * Based on Peter Harkins' implementation of Björn Bergström's algorithm described here: http://www.roguebasin.com/index.php?title=FOV_using_recursive_shadowcasting
   * @augments ROT.FOV
   */

  var RecursiveShadowcasting = /*#__PURE__*/function (_FOV3) {
    _inheritsLoose(RecursiveShadowcasting, _FOV3);

    function RecursiveShadowcasting() {
      return _FOV3.apply(this, arguments) || this;
    }

    var _proto20 = RecursiveShadowcasting.prototype;

    /**
     * Compute visibility for a 360-degree circle
     * @param {int} x
     * @param {int} y
     * @param {int} R Maximum visibility radius
     * @param {function} callback
     */
    _proto20.compute = function compute(x, y, R, callback) {
      //You can always see your own tile
      callback(x, y, 0, 1);

      for (var i = 0; i < OCTANTS.length; i++) {
        this._renderOctant(x, y, OCTANTS[i], R, callback);
      }
    }
    /**
     * Compute visibility for a 180-degree arc
     * @param {int} x
     * @param {int} y
     * @param {int} R Maximum visibility radius
     * @param {int} dir Direction to look in (expressed in a ROT.DIRS value);
     * @param {function} callback
     */
    ;

    _proto20.compute180 = function compute180(x, y, R, dir, callback) {
      //You can always see your own tile
      callback(x, y, 0, 1);
      var previousOctant = (dir - 1 + 8) % 8; //Need to retrieve the previous octant to render a full 180 degrees

      var nextPreviousOctant = (dir - 2 + 8) % 8; //Need to retrieve the previous two octants to render a full 180 degrees

      var nextOctant = (dir + 1 + 8) % 8; //Need to grab to next octant to render a full 180 degrees

      this._renderOctant(x, y, OCTANTS[nextPreviousOctant], R, callback);

      this._renderOctant(x, y, OCTANTS[previousOctant], R, callback);

      this._renderOctant(x, y, OCTANTS[dir], R, callback);

      this._renderOctant(x, y, OCTANTS[nextOctant], R, callback);
    };

    /**
     * Compute visibility for a 90-degree arc
     * @param {int} x
     * @param {int} y
     * @param {int} R Maximum visibility radius
     * @param {int} dir Direction to look in (expressed in a ROT.DIRS value);
     * @param {function} callback
     */
    _proto20.compute90 = function compute90(x, y, R, dir, callback) {
      //You can always see your own tile
      callback(x, y, 0, 1);
      var previousOctant = (dir - 1 + 8) % 8; //Need to retrieve the previous octant to render a full 90 degrees

      this._renderOctant(x, y, OCTANTS[dir], R, callback);

      this._renderOctant(x, y, OCTANTS[previousOctant], R, callback);
    }
    /**
     * Render one octant (45-degree arc) of the viewshed
     * @param {int} x
     * @param {int} y
     * @param {int} octant Octant to be rendered
     * @param {int} R Maximum visibility radius
     * @param {function} callback
     */
    ;

    _proto20._renderOctant = function _renderOctant(x, y, octant, R, callback) {
      //Radius incremented by 1 to provide same coverage area as other shadowcasting radiuses
      this._castVisibility(x, y, 1, 1.0, 0.0, R + 1, octant[0], octant[1], octant[2], octant[3], callback);
    }
    /**
     * Actually calculates the visibility
     * @param {int} startX The starting X coordinate
     * @param {int} startY The starting Y coordinate
     * @param {int} row The row to render
     * @param {float} visSlopeStart The slope to start at
     * @param {float} visSlopeEnd The slope to end at
     * @param {int} radius The radius to reach out to
     * @param {int} xx
     * @param {int} xy
     * @param {int} yx
     * @param {int} yy
     * @param {function} callback The callback to use when we hit a block that is visible
     */
    ;

    _proto20._castVisibility = function _castVisibility(startX, startY, row, visSlopeStart, visSlopeEnd, radius, xx, xy, yx, yy, callback) {
      if (visSlopeStart < visSlopeEnd) {
        return;
      }

      for (var i = row; i <= radius; i++) {
        var dx = -i - 1;
        var dy = -i;
        var blocked = false;
        var newStart = 0; //'Row' could be column, names here assume octant 0 and would be flipped for half the octants

        while (dx <= 0) {
          dx += 1; //Translate from relative coordinates to map coordinates

          var mapX = startX + dx * xx + dy * xy;
          var mapY = startY + dx * yx + dy * yy; //Range of the row

          var slopeStart = (dx - 0.5) / (dy + 0.5);
          var slopeEnd = (dx + 0.5) / (dy - 0.5); //Ignore if not yet at left edge of Octant

          if (slopeEnd > visSlopeStart) {
            continue;
          } //Done if past right edge


          if (slopeStart < visSlopeEnd) {
            break;
          } //If it's in range, it's visible


          if (dx * dx + dy * dy < radius * radius) {
            callback(mapX, mapY, i, 1);
          }

          if (!blocked) {
            //If tile is a blocking tile, cast around it
            if (!this._lightPasses(mapX, mapY) && i < radius) {
              blocked = true;

              this._castVisibility(startX, startY, i + 1, visSlopeStart, slopeStart, radius, xx, xy, yx, yy, callback);

              newStart = slopeEnd;
            }
          } else {
            //Keep narrowing if scanning across a block
            if (!this._lightPasses(mapX, mapY)) {
              newStart = slopeEnd;
              continue;
            } //Block has ended


            blocked = false;
            visSlopeStart = newStart;
          }
        }

        if (blocked) {
          break;
        }
      }
    };

    return RecursiveShadowcasting;
  }(FOV);

  var index$1 = {
    DiscreteShadowcasting: DiscreteShadowcasting,
    PreciseShadowcasting: PreciseShadowcasting,
    RecursiveShadowcasting: RecursiveShadowcasting
  };

  var Map = /*#__PURE__*/function () {
    /**
     * @class Base map generator
     * @param {int} [width=ROT.DEFAULT_WIDTH]
     * @param {int} [height=ROT.DEFAULT_HEIGHT]
     */
    function Map(width, height) {
      if (width === void 0) {
        width = DEFAULT_WIDTH;
      }

      if (height === void 0) {
        height = DEFAULT_HEIGHT;
      }

      this._width = width;
      this._height = height;
    }

    var _proto21 = Map.prototype;

    _proto21._fillMap = function _fillMap(value) {
      var map = [];

      for (var i = 0; i < this._width; i++) {
        map.push([]);

        for (var j = 0; j < this._height; j++) {
          map[i].push(value);
        }
      }

      return map;
    };

    return Map;
  }();
  /**
   * @class Simple empty rectangular room
   * @augments ROT.Map
   */


  var Arena = /*#__PURE__*/function (_Map) {
    _inheritsLoose(Arena, _Map);

    function Arena() {
      return _Map.apply(this, arguments) || this;
    }

    var _proto22 = Arena.prototype;

    _proto22.create = function create(callback) {
      var w = this._width - 1;
      var h = this._height - 1;

      for (var i = 0; i <= w; i++) {
        for (var j = 0; j <= h; j++) {
          var empty = i && j && i < w && j < h;
          callback(i, j, empty ? 0 : 1);
        }
      }

      return this;
    };

    return Arena;
  }(Map);
  /**
   * @class Dungeon map: has rooms and corridors
   * @augments ROT.Map
   */


  var Dungeon = /*#__PURE__*/function (_Map2) {
    _inheritsLoose(Dungeon, _Map2);

    function Dungeon(width, height) {
      var _this10;

      _this10 = _Map2.call(this, width, height) || this;
      _this10._rooms = [];
      _this10._corridors = [];
      return _this10;
    }
    /**
     * Get all generated rooms
     * @returns {ROT.Map.Feature.Room[]}
     */


    var _proto23 = Dungeon.prototype;

    _proto23.getRooms = function getRooms() {
      return this._rooms;
    }
    /**
     * Get all generated corridors
     * @returns {ROT.Map.Feature.Corridor[]}
     */
    ;

    _proto23.getCorridors = function getCorridors() {
      return this._corridors;
    };

    return Dungeon;
  }(Map);
  /**
   * @class Dungeon feature; has own .create() method
   */


  var Feature = function Feature() {};
  /**
   * @class Room
   * @augments ROT.Map.Feature
   * @param {int} x1
   * @param {int} y1
   * @param {int} x2
   * @param {int} y2
   * @param {int} [doorX]
   * @param {int} [doorY]
   */


  var Room = /*#__PURE__*/function (_Feature) {
    _inheritsLoose(Room, _Feature);

    function Room(x1, y1, x2, y2, doorX, doorY) {
      var _this11;

      _this11 = _Feature.call(this) || this;
      _this11._x1 = x1;
      _this11._y1 = y1;
      _this11._x2 = x2;
      _this11._y2 = y2;
      _this11._doors = {};

      if (doorX !== undefined && doorY !== undefined) {
        _this11.addDoor(doorX, doorY);
      }

      return _this11;
    }

    /**
     * Room of random size, with a given doors and direction
     */
    Room.createRandomAt = function createRandomAt(x, y, dx, dy, options) {
      var min = options.roomWidth[0];
      var max = options.roomWidth[1];
      var width = RNG$1.getUniformInt(min, max);
      min = options.roomHeight[0];
      max = options.roomHeight[1];
      var height = RNG$1.getUniformInt(min, max);

      if (dx == 1) {
        /* to the right */
        var y2 = y - Math.floor(RNG$1.getUniform() * height);
        return new this(x + 1, y2, x + width, y2 + height - 1, x, y);
      }

      if (dx == -1) {
        /* to the left */
        var _y = y - Math.floor(RNG$1.getUniform() * height);

        return new this(x - width, _y, x - 1, _y + height - 1, x, y);
      }

      if (dy == 1) {
        /* to the bottom */
        var x2 = x - Math.floor(RNG$1.getUniform() * width);
        return new this(x2, y + 1, x2 + width - 1, y + height, x, y);
      }

      if (dy == -1) {
        /* to the top */
        var _x = x - Math.floor(RNG$1.getUniform() * width);

        return new this(_x, y - height, _x + width - 1, y - 1, x, y);
      }

      throw new Error("dx or dy must be 1 or -1");
    }
    /**
     * Room of random size, positioned around center coords
     */
    ;

    Room.createRandomCenter = function createRandomCenter(cx, cy, options) {
      var min = options.roomWidth[0];
      var max = options.roomWidth[1];
      var width = RNG$1.getUniformInt(min, max);
      min = options.roomHeight[0];
      max = options.roomHeight[1];
      var height = RNG$1.getUniformInt(min, max);
      var x1 = cx - Math.floor(RNG$1.getUniform() * width);
      var y1 = cy - Math.floor(RNG$1.getUniform() * height);
      var x2 = x1 + width - 1;
      var y2 = y1 + height - 1;
      return new this(x1, y1, x2, y2);
    }
    /**
     * Room of random size within a given dimensions
     */
    ;

    Room.createRandom = function createRandom(availWidth, availHeight, options) {
      var min = options.roomWidth[0];
      var max = options.roomWidth[1];
      var width = RNG$1.getUniformInt(min, max);
      min = options.roomHeight[0];
      max = options.roomHeight[1];
      var height = RNG$1.getUniformInt(min, max);
      var left = availWidth - width - 1;
      var top = availHeight - height - 1;
      var x1 = 1 + Math.floor(RNG$1.getUniform() * left);
      var y1 = 1 + Math.floor(RNG$1.getUniform() * top);
      var x2 = x1 + width - 1;
      var y2 = y1 + height - 1;
      return new this(x1, y1, x2, y2);
    };

    var _proto24 = Room.prototype;

    _proto24.addDoor = function addDoor(x, y) {
      this._doors[x + "," + y] = 1;
      return this;
    }
    /**
     * @param {function}
     */
    ;

    _proto24.getDoors = function getDoors(cb) {
      for (var key in this._doors) {
        var parts = key.split(",");
        cb(parseInt(parts[0]), parseInt(parts[1]));
      }

      return this;
    };

    _proto24.clearDoors = function clearDoors() {
      this._doors = {};
      return this;
    };

    _proto24.addDoors = function addDoors(isWallCallback) {
      var left = this._x1 - 1;
      var right = this._x2 + 1;
      var top = this._y1 - 1;
      var bottom = this._y2 + 1;

      for (var x = left; x <= right; x++) {
        for (var y = top; y <= bottom; y++) {
          if (x != left && x != right && y != top && y != bottom) {
            continue;
          }

          if (isWallCallback(x, y)) {
            continue;
          }

          this.addDoor(x, y);
        }
      }

      return this;
    };

    _proto24.debug = function debug() {
      console.log("room", this._x1, this._y1, this._x2, this._y2);
    };

    _proto24.isValid = function isValid(isWallCallback, canBeDugCallback) {
      var left = this._x1 - 1;
      var right = this._x2 + 1;
      var top = this._y1 - 1;
      var bottom = this._y2 + 1;

      for (var x = left; x <= right; x++) {
        for (var y = top; y <= bottom; y++) {
          if (x == left || x == right || y == top || y == bottom) {
            if (!isWallCallback(x, y)) {
              return false;
            }
          } else {
            if (!canBeDugCallback(x, y)) {
              return false;
            }
          }
        }
      }

      return true;
    }
    /**
     * @param {function} digCallback Dig callback with a signature (x, y, value). Values: 0 = empty, 1 = wall, 2 = door. Multiple doors are allowed.
     */
    ;

    _proto24.create = function create(digCallback) {
      var left = this._x1 - 1;
      var right = this._x2 + 1;
      var top = this._y1 - 1;
      var bottom = this._y2 + 1;
      var value = 0;

      for (var x = left; x <= right; x++) {
        for (var y = top; y <= bottom; y++) {
          if (x + "," + y in this._doors) {
            value = 2;
          } else if (x == left || x == right || y == top || y == bottom) {
            value = 1;
          } else {
            value = 0;
          }

          digCallback(x, y, value);
        }
      }
    };

    _proto24.getCenter = function getCenter() {
      return [Math.round((this._x1 + this._x2) / 2), Math.round((this._y1 + this._y2) / 2)];
    };

    _proto24.getLeft = function getLeft() {
      return this._x1;
    };

    _proto24.getRight = function getRight() {
      return this._x2;
    };

    _proto24.getTop = function getTop() {
      return this._y1;
    };

    _proto24.getBottom = function getBottom() {
      return this._y2;
    };

    return Room;
  }(Feature);
  /**
   * @class Corridor
   * @augments ROT.Map.Feature
   * @param {int} startX
   * @param {int} startY
   * @param {int} endX
   * @param {int} endY
   */


  var Corridor = /*#__PURE__*/function (_Feature2) {
    _inheritsLoose(Corridor, _Feature2);

    function Corridor(startX, startY, endX, endY) {
      var _this12;

      _this12 = _Feature2.call(this) || this;
      _this12._startX = startX;
      _this12._startY = startY;
      _this12._endX = endX;
      _this12._endY = endY;
      _this12._endsWithAWall = true;
      return _this12;
    }

    Corridor.createRandomAt = function createRandomAt(x, y, dx, dy, options) {
      var min = options.corridorLength[0];
      var max = options.corridorLength[1];
      var length = RNG$1.getUniformInt(min, max);
      return new this(x, y, x + dx * length, y + dy * length);
    };

    var _proto25 = Corridor.prototype;

    _proto25.debug = function debug() {
      console.log("corridor", this._startX, this._startY, this._endX, this._endY);
    };

    _proto25.isValid = function isValid(isWallCallback, canBeDugCallback) {
      var sx = this._startX;
      var sy = this._startY;
      var dx = this._endX - sx;
      var dy = this._endY - sy;
      var length = 1 + Math.max(Math.abs(dx), Math.abs(dy));

      if (dx) {
        dx = dx / Math.abs(dx);
      }

      if (dy) {
        dy = dy / Math.abs(dy);
      }

      var nx = dy;
      var ny = -dx;
      var ok = true;

      for (var i = 0; i < length; i++) {
        var x = sx + i * dx;
        var y = sy + i * dy;

        if (!canBeDugCallback(x, y)) {
          ok = false;
        }

        if (!isWallCallback(x + nx, y + ny)) {
          ok = false;
        }

        if (!isWallCallback(x - nx, y - ny)) {
          ok = false;
        }

        if (!ok) {
          length = i;
          this._endX = x - dx;
          this._endY = y - dy;
          break;
        }
      }
      /**
       * If the length degenerated, this corridor might be invalid
       */

      /* not supported */


      if (length == 0) {
        return false;
      }
      /* length 1 allowed only if the next space is empty */


      if (length == 1 && isWallCallback(this._endX + dx, this._endY + dy)) {
        return false;
      }
      /**
       * We do not want the corridor to crash into a corner of a room;
       * if any of the ending corners is empty, the N+1th cell of this corridor must be empty too.
       *
       * Situation:
       * #######1
       * .......?
       * #######2
       *
       * The corridor was dug from left to right.
       * 1, 2 - problematic corners, ? = N+1th cell (not dug)
       */


      var firstCornerBad = !isWallCallback(this._endX + dx + nx, this._endY + dy + ny);
      var secondCornerBad = !isWallCallback(this._endX + dx - nx, this._endY + dy - ny);
      this._endsWithAWall = isWallCallback(this._endX + dx, this._endY + dy);

      if ((firstCornerBad || secondCornerBad) && this._endsWithAWall) {
        return false;
      }

      return true;
    }
    /**
     * @param {function} digCallback Dig callback with a signature (x, y, value). Values: 0 = empty.
     */
    ;

    _proto25.create = function create(digCallback) {
      var sx = this._startX;
      var sy = this._startY;
      var dx = this._endX - sx;
      var dy = this._endY - sy;
      var length = 1 + Math.max(Math.abs(dx), Math.abs(dy));

      if (dx) {
        dx = dx / Math.abs(dx);
      }

      if (dy) {
        dy = dy / Math.abs(dy);
      }

      for (var i = 0; i < length; i++) {
        var x = sx + i * dx;
        var y = sy + i * dy;
        digCallback(x, y, 0);
      }

      return true;
    };

    _proto25.createPriorityWalls = function createPriorityWalls(priorityWallCallback) {
      if (!this._endsWithAWall) {
        return;
      }

      var sx = this._startX;
      var sy = this._startY;
      var dx = this._endX - sx;
      var dy = this._endY - sy;

      if (dx) {
        dx = dx / Math.abs(dx);
      }

      if (dy) {
        dy = dy / Math.abs(dy);
      }

      var nx = dy;
      var ny = -dx;
      priorityWallCallback(this._endX + dx, this._endY + dy);
      priorityWallCallback(this._endX + nx, this._endY + ny);
      priorityWallCallback(this._endX - nx, this._endY - ny);
    };

    return Corridor;
  }(Feature);
  /**
   * @class Dungeon generator which tries to fill the space evenly. Generates independent rooms and tries to connect them.
   * @augments ROT.Map.Dungeon
   */


  var Uniform = /*#__PURE__*/function (_Dungeon) {
    _inheritsLoose(Uniform, _Dungeon);

    function Uniform(width, height, options) {
      var _this13;

      _this13 = _Dungeon.call(this, width, height) || this;
      _this13._options = {
        roomWidth: [3, 9],
        roomHeight: [3, 5],
        roomDugPercentage: 0.1,
        timeLimit: 1000
        /* we stop after this much time has passed (msec) */

      };
      Object.assign(_this13._options, options);
      _this13._map = [];
      _this13._dug = 0;
      _this13._roomAttempts = 20;
      /* new room is created N-times until is considered as impossible to generate */

      _this13._corridorAttempts = 20;
      /* corridors are tried N-times until the level is considered as impossible to connect */

      _this13._connected = [];
      /* list of already connected rooms */

      _this13._unconnected = [];
      /* list of remaining unconnected rooms */

      _this13._digCallback = _this13._digCallback.bind(_assertThisInitialized(_this13));
      _this13._canBeDugCallback = _this13._canBeDugCallback.bind(_assertThisInitialized(_this13));
      _this13._isWallCallback = _this13._isWallCallback.bind(_assertThisInitialized(_this13));
      return _this13;
    }
    /**
     * Create a map. If the time limit has been hit, returns null.
     * @see ROT.Map#create
     */


    var _proto26 = Uniform.prototype;

    _proto26.create = function create(callback) {
      var t1 = Date.now();

      while (1) {
        var t2 = Date.now();

        if (t2 - t1 > this._options.timeLimit) {
          return null;
        }
        /* time limit! */


        this._map = this._fillMap(1);
        this._dug = 0;
        this._rooms = [];
        this._unconnected = [];

        this._generateRooms();

        if (this._rooms.length < 2) {
          continue;
        }

        if (this._generateCorridors()) {
          break;
        }
      }

      if (callback) {
        for (var i = 0; i < this._width; i++) {
          for (var j = 0; j < this._height; j++) {
            callback(i, j, this._map[i][j]);
          }
        }
      }

      return this;
    }
    /**
     * Generates a suitable amount of rooms
     */
    ;

    _proto26._generateRooms = function _generateRooms() {
      var w = this._width - 2;
      var h = this._height - 2;
      var room;

      do {
        room = this._generateRoom();

        if (this._dug / (w * h) > this._options.roomDugPercentage) {
          break;
        }
        /* achieved requested amount of free space */

      } while (room);
      /* either enough rooms, or not able to generate more of them :) */

    }
    /**
     * Try to generate one room
     */
    ;

    _proto26._generateRoom = function _generateRoom() {
      var count = 0;

      while (count < this._roomAttempts) {
        count++;
        var room = Room.createRandom(this._width, this._height, this._options);

        if (!room.isValid(this._isWallCallback, this._canBeDugCallback)) {
          continue;
        }

        room.create(this._digCallback);

        this._rooms.push(room);

        return room;
      }
      /* no room was generated in a given number of attempts */


      return null;
    }
    /**
     * Generates connectors beween rooms
     * @returns {bool} success Was this attempt successfull?
     */
    ;

    _proto26._generateCorridors = function _generateCorridors() {
      var cnt = 0;

      while (cnt < this._corridorAttempts) {
        cnt++;
        this._corridors = [];
        /* dig rooms into a clear map */

        this._map = this._fillMap(1);

        for (var i = 0; i < this._rooms.length; i++) {
          var room = this._rooms[i];
          room.clearDoors();
          room.create(this._digCallback);
        }

        this._unconnected = RNG$1.shuffle(this._rooms.slice());
        this._connected = [];

        if (this._unconnected.length) {
          this._connected.push(this._unconnected.pop());
        }
        /* first one is always connected */


        while (1) {
          /* 1. pick random connected room */
          var connected = RNG$1.getItem(this._connected);

          if (!connected) {
            break;
          }
          /* 2. find closest unconnected */


          var room1 = this._closestRoom(this._unconnected, connected);

          if (!room1) {
            break;
          }
          /* 3. connect it to closest connected */


          var room2 = this._closestRoom(this._connected, room1);

          if (!room2) {
            break;
          }

          var ok = this._connectRooms(room1, room2);

          if (!ok) {
            break;
          }
          /* stop connecting, re-shuffle */


          if (!this._unconnected.length) {
            return true;
          }
          /* done; no rooms remain */

        }
      }

      return false;
    };

    /**
     * For a given room, find the closest one from the list
     */
    _proto26._closestRoom = function _closestRoom(rooms, room) {
      var dist = Infinity;
      var center = room.getCenter();
      var result = null;

      for (var i = 0; i < rooms.length; i++) {
        var r = rooms[i];
        var c = r.getCenter();
        var dx = c[0] - center[0];
        var dy = c[1] - center[1];
        var d = dx * dx + dy * dy;

        if (d < dist) {
          dist = d;
          result = r;
        }
      }

      return result;
    };

    _proto26._connectRooms = function _connectRooms(room1, room2) {
      /*
          room1.debug();
          room2.debug();
      */
      var center1 = room1.getCenter();
      var center2 = room2.getCenter();
      var diffX = center2[0] - center1[0];
      var diffY = center2[1] - center1[1];
      var start;
      var end;
      var dirIndex1, dirIndex2, min, max, index;

      if (Math.abs(diffX) < Math.abs(diffY)) {
        /* first try connecting north-south walls */
        dirIndex1 = diffY > 0 ? 2 : 0;
        dirIndex2 = (dirIndex1 + 2) % 4;
        min = room2.getLeft();
        max = room2.getRight();
        index = 0;
      } else {
        /* first try connecting east-west walls */
        dirIndex1 = diffX > 0 ? 1 : 3;
        dirIndex2 = (dirIndex1 + 2) % 4;
        min = room2.getTop();
        max = room2.getBottom();
        index = 1;
      }

      start = this._placeInWall(room1, dirIndex1);
      /* corridor will start here */

      if (!start) {
        return false;
      }

      if (start[index] >= min && start[index] <= max) {
        /* possible to connect with straight line (I-like) */
        end = start.slice();
        var value = 0;

        switch (dirIndex2) {
          case 0:
            value = room2.getTop() - 1;
            break;

          case 1:
            value = room2.getRight() + 1;
            break;

          case 2:
            value = room2.getBottom() + 1;
            break;

          case 3:
            value = room2.getLeft() - 1;
            break;
        }

        end[(index + 1) % 2] = value;

        this._digLine([start, end]);
      } else if (start[index] < min - 1 || start[index] > max + 1) {
        /* need to switch target wall (L-like) */
        var diff = start[index] - center2[index];
        var rotation = 0;

        switch (dirIndex2) {
          case 0:
          case 1:
            rotation = diff < 0 ? 3 : 1;
            break;

          case 2:
          case 3:
            rotation = diff < 0 ? 1 : 3;
            break;
        }

        dirIndex2 = (dirIndex2 + rotation) % 4;
        end = this._placeInWall(room2, dirIndex2);

        if (!end) {
          return false;
        }

        var mid = [0, 0];
        mid[index] = start[index];
        var index2 = (index + 1) % 2;
        mid[index2] = end[index2];

        this._digLine([start, mid, end]);
      } else {
        /* use current wall pair, but adjust the line in the middle (S-like) */
        var _index4 = (index + 1) % 2;

        end = this._placeInWall(room2, dirIndex2);

        if (!end) {
          return false;
        }

        var _mid = Math.round((end[_index4] + start[_index4]) / 2);

        var mid1 = [0, 0];
        var mid2 = [0, 0];
        mid1[index] = start[index];
        mid1[_index4] = _mid;
        mid2[index] = end[index];
        mid2[_index4] = _mid;

        this._digLine([start, mid1, mid2, end]);
      }

      room1.addDoor(start[0], start[1]);
      room2.addDoor(end[0], end[1]);
      index = this._unconnected.indexOf(room1);

      if (index != -1) {
        this._unconnected.splice(index, 1);

        this._connected.push(room1);
      }

      index = this._unconnected.indexOf(room2);

      if (index != -1) {
        this._unconnected.splice(index, 1);

        this._connected.push(room2);
      }

      return true;
    };

    _proto26._placeInWall = function _placeInWall(room, dirIndex) {
      var start = [0, 0];
      var dir = [0, 0];
      var length = 0;

      switch (dirIndex) {
        case 0:
          dir = [1, 0];
          start = [room.getLeft(), room.getTop() - 1];
          length = room.getRight() - room.getLeft() + 1;
          break;

        case 1:
          dir = [0, 1];
          start = [room.getRight() + 1, room.getTop()];
          length = room.getBottom() - room.getTop() + 1;
          break;

        case 2:
          dir = [1, 0];
          start = [room.getLeft(), room.getBottom() + 1];
          length = room.getRight() - room.getLeft() + 1;
          break;

        case 3:
          dir = [0, 1];
          start = [room.getLeft() - 1, room.getTop()];
          length = room.getBottom() - room.getTop() + 1;
          break;
      }

      var avail = [];
      var lastBadIndex = -2;

      for (var i = 0; i < length; i++) {
        var x = start[0] + i * dir[0];
        var y = start[1] + i * dir[1];
        avail.push(null);
        var isWall = this._map[x][y] == 1;

        if (isWall) {
          if (lastBadIndex != i - 1) {
            avail[i] = [x, y];
          }
        } else {
          lastBadIndex = i;

          if (i) {
            avail[i - 1] = null;
          }
        }
      }

      for (var _i3 = avail.length - 1; _i3 >= 0; _i3--) {
        if (!avail[_i3]) {
          avail.splice(_i3, 1);
        }
      }

      return avail.length ? RNG$1.getItem(avail) : null;
    }
    /**
     * Dig a polyline.
     */
    ;

    _proto26._digLine = function _digLine(points) {
      for (var i = 1; i < points.length; i++) {
        var start = points[i - 1];
        var end = points[i];
        var corridor = new Corridor(start[0], start[1], end[0], end[1]);
        corridor.create(this._digCallback);

        this._corridors.push(corridor);
      }
    };

    _proto26._digCallback = function _digCallback(x, y, value) {
      this._map[x][y] = value;

      if (value == 0) {
        this._dug++;
      }
    };

    _proto26._isWallCallback = function _isWallCallback(x, y) {
      if (x < 0 || y < 0 || x >= this._width || y >= this._height) {
        return false;
      }

      return this._map[x][y] == 1;
    };

    _proto26._canBeDugCallback = function _canBeDugCallback(x, y) {
      if (x < 1 || y < 1 || x + 1 >= this._width || y + 1 >= this._height) {
        return false;
      }

      return this._map[x][y] == 1;
    };

    return Uniform;
  }(Dungeon);
  /**
   * @class Cellular automaton map generator
   * @augments ROT.Map
   * @param {int} [width=ROT.DEFAULT_WIDTH]
   * @param {int} [height=ROT.DEFAULT_HEIGHT]
   * @param {object} [options] Options
   * @param {int[]} [options.born] List of neighbor counts for a new cell to be born in empty space
   * @param {int[]} [options.survive] List of neighbor counts for an existing  cell to survive
   * @param {int} [options.topology] Topology 4 or 6 or 8
   */


  var Cellular = /*#__PURE__*/function (_Map3) {
    _inheritsLoose(Cellular, _Map3);

    function Cellular(width, height, options) {
      var _this14;

      if (options === void 0) {
        options = {};
      }

      _this14 = _Map3.call(this, width, height) || this;
      _this14._options = {
        born: [5, 6, 7, 8],
        survive: [4, 5, 6, 7, 8],
        topology: 8
      };

      _this14.setOptions(options);

      _this14._dirs = DIRS[_this14._options.topology];
      _this14._map = _this14._fillMap(0);
      return _this14;
    }
    /**
     * Fill the map with random values
     * @param {float} probability Probability for a cell to become alive; 0 = all empty, 1 = all full
     */


    var _proto27 = Cellular.prototype;

    _proto27.randomize = function randomize(probability) {
      for (var i = 0; i < this._width; i++) {
        for (var j = 0; j < this._height; j++) {
          this._map[i][j] = RNG$1.getUniform() < probability ? 1 : 0;
        }
      }

      return this;
    }
    /**
     * Change options.
     * @see ROT.Map.Cellular
     */
    ;

    _proto27.setOptions = function setOptions(options) {
      Object.assign(this._options, options);
    };

    _proto27.set = function set(x, y, value) {
      this._map[x][y] = value;
    };

    _proto27.create = function create(callback) {
      var newMap = this._fillMap(0);

      var born = this._options.born;
      var survive = this._options.survive;

      for (var j = 0; j < this._height; j++) {
        var widthStep = 1;
        var widthStart = 0;

        if (this._options.topology == 6) {
          widthStep = 2;
          widthStart = j % 2;
        }

        for (var i = widthStart; i < this._width; i += widthStep) {
          var cur = this._map[i][j];

          var ncount = this._getNeighbors(i, j);

          if (cur && survive.indexOf(ncount) != -1) {
            /* survive */
            newMap[i][j] = 1;
          } else if (!cur && born.indexOf(ncount) != -1) {
            /* born */
            newMap[i][j] = 1;
          }
        }
      }

      this._map = newMap;
      callback && this._serviceCallback(callback);
    };

    _proto27._serviceCallback = function _serviceCallback(callback) {
      for (var j = 0; j < this._height; j++) {
        var widthStep = 1;
        var widthStart = 0;

        if (this._options.topology == 6) {
          widthStep = 2;
          widthStart = j % 2;
        }

        for (var i = widthStart; i < this._width; i += widthStep) {
          callback(i, j, this._map[i][j]);
        }
      }
    }
    /**
     * Get neighbor count at [i,j] in this._map
     */
    ;

    _proto27._getNeighbors = function _getNeighbors(cx, cy) {
      var result = 0;

      for (var i = 0; i < this._dirs.length; i++) {
        var dir = this._dirs[i];
        var x = cx + dir[0];
        var y = cy + dir[1];

        if (x < 0 || x >= this._width || y < 0 || y >= this._height) {
          continue;
        }

        result += this._map[x][y] == 1 ? 1 : 0;
      }

      return result;
    }
    /**
     * Make sure every non-wall space is accessible.
     * @param {function} callback to call to display map when do
     * @param {int} value to consider empty space - defaults to 0
     * @param {function} callback to call when a new connection is made
     */
    ;

    _proto27.connect = function connect(callback, value, connectionCallback) {
      if (!value) value = 0;
      var allFreeSpace = [];
      var notConnected = {}; // find all free space

      var widthStep = 1;
      var widthStarts = [0, 0];

      if (this._options.topology == 6) {
        widthStep = 2;
        widthStarts = [0, 1];
      }

      for (var y = 0; y < this._height; y++) {
        for (var x = widthStarts[y % 2]; x < this._width; x += widthStep) {
          if (this._freeSpace(x, y, value)) {
            var p = [x, y];
            notConnected[this._pointKey(p)] = p;
            allFreeSpace.push([x, y]);
          }
        }
      }

      var start = allFreeSpace[RNG$1.getUniformInt(0, allFreeSpace.length - 1)];

      var key = this._pointKey(start);

      var connected = {};
      connected[key] = start;
      delete notConnected[key]; // find what's connected to the starting point

      this._findConnected(connected, notConnected, [start], false, value);

      while (Object.keys(notConnected).length > 0) {
        // find two points from notConnected to connected
        var _p = this._getFromTo(connected, notConnected);

        var from = _p[0]; // notConnected

        var to = _p[1]; // connected
        // find everything connected to the starting point

        var local = {};
        local[this._pointKey(from)] = from;

        this._findConnected(local, notConnected, [from], true, value); // connect to a connected cell


        var tunnelFn = this._options.topology == 6 ? this._tunnelToConnected6 : this._tunnelToConnected;
        tunnelFn.call(this, to, from, connected, notConnected, value, connectionCallback); // now all of local is connected

        for (var k in local) {
          var pp = local[k];
          this._map[pp[0]][pp[1]] = value;
          connected[k] = pp;
          delete notConnected[k];
        }
      }

      callback && this._serviceCallback(callback);
    }
    /**
     * Find random points to connect. Search for the closest point in the larger space.
     * This is to minimize the length of the passage while maintaining good performance.
     */
    ;

    _proto27._getFromTo = function _getFromTo(connected, notConnected) {
      var from = [0, 0],
          to = [0, 0],
          d;
      var connectedKeys = Object.keys(connected);
      var notConnectedKeys = Object.keys(notConnected);

      for (var i = 0; i < 5; i++) {
        if (connectedKeys.length < notConnectedKeys.length) {
          var keys = connectedKeys;
          to = connected[keys[RNG$1.getUniformInt(0, keys.length - 1)]];
          from = this._getClosest(to, notConnected);
        } else {
          var _keys = notConnectedKeys;
          from = notConnected[_keys[RNG$1.getUniformInt(0, _keys.length - 1)]];
          to = this._getClosest(from, connected);
        }

        d = (from[0] - to[0]) * (from[0] - to[0]) + (from[1] - to[1]) * (from[1] - to[1]);

        if (d < 64) {
          break;
        }
      } // console.log(">>> connected=" + to + " notConnected=" + from + " dist=" + d);


      return [from, to];
    };

    _proto27._getClosest = function _getClosest(point, space) {
      var minPoint = null;
      var minDist = null;

      for (var k in space) {
        var p = space[k];
        var d = (p[0] - point[0]) * (p[0] - point[0]) + (p[1] - point[1]) * (p[1] - point[1]);

        if (minDist == null || d < minDist) {
          minDist = d;
          minPoint = p;
        }
      }

      return minPoint;
    };

    _proto27._findConnected = function _findConnected(connected, notConnected, stack, keepNotConnected, value) {
      while (stack.length > 0) {
        var p = stack.splice(0, 1)[0];
        var tests = void 0;

        if (this._options.topology == 6) {
          tests = [[p[0] + 2, p[1]], [p[0] + 1, p[1] - 1], [p[0] - 1, p[1] - 1], [p[0] - 2, p[1]], [p[0] - 1, p[1] + 1], [p[0] + 1, p[1] + 1]];
        } else {
          tests = [[p[0] + 1, p[1]], [p[0] - 1, p[1]], [p[0], p[1] + 1], [p[0], p[1] - 1]];
        }

        for (var i = 0; i < tests.length; i++) {
          var key = this._pointKey(tests[i]);

          if (connected[key] == null && this._freeSpace(tests[i][0], tests[i][1], value)) {
            connected[key] = tests[i];

            if (!keepNotConnected) {
              delete notConnected[key];
            }

            stack.push(tests[i]);
          }
        }
      }
    };

    _proto27._tunnelToConnected = function _tunnelToConnected(to, from, connected, notConnected, value, connectionCallback) {
      var a, b;

      if (from[0] < to[0]) {
        a = from;
        b = to;
      } else {
        a = to;
        b = from;
      }

      for (var xx = a[0]; xx <= b[0]; xx++) {
        this._map[xx][a[1]] = value;
        var p = [xx, a[1]];

        var pkey = this._pointKey(p);

        connected[pkey] = p;
        delete notConnected[pkey];
      }

      if (connectionCallback && a[0] < b[0]) {
        connectionCallback(a, [b[0], a[1]]);
      } // x is now fixed


      var x = b[0];

      if (from[1] < to[1]) {
        a = from;
        b = to;
      } else {
        a = to;
        b = from;
      }

      for (var yy = a[1]; yy < b[1]; yy++) {
        this._map[x][yy] = value;
        var _p2 = [x, yy];

        var _pkey = this._pointKey(_p2);

        connected[_pkey] = _p2;
        delete notConnected[_pkey];
      }

      if (connectionCallback && a[1] < b[1]) {
        connectionCallback([b[0], a[1]], [b[0], b[1]]);
      }
    };

    _proto27._tunnelToConnected6 = function _tunnelToConnected6(to, from, connected, notConnected, value, connectionCallback) {
      var a, b;

      if (from[0] < to[0]) {
        a = from;
        b = to;
      } else {
        a = to;
        b = from;
      } // tunnel diagonally until horizontally level


      var xx = a[0];
      var yy = a[1];

      while (!(xx == b[0] && yy == b[1])) {
        var stepWidth = 2;

        if (yy < b[1]) {
          yy++;
          stepWidth = 1;
        } else if (yy > b[1]) {
          yy--;
          stepWidth = 1;
        }

        if (xx < b[0]) {
          xx += stepWidth;
        } else if (xx > b[0]) {
          xx -= stepWidth;
        } else if (b[1] % 2) {
          // Won't step outside map if destination on is map's right edge
          xx -= stepWidth;
        } else {
          // ditto for left edge
          xx += stepWidth;
        }

        this._map[xx][yy] = value;
        var p = [xx, yy];

        var pkey = this._pointKey(p);

        connected[pkey] = p;
        delete notConnected[pkey];
      }

      if (connectionCallback) {
        connectionCallback(from, to);
      }
    };

    _proto27._freeSpace = function _freeSpace(x, y, value) {
      return x >= 0 && x < this._width && y >= 0 && y < this._height && this._map[x][y] == value;
    };

    _proto27._pointKey = function _pointKey(p) {
      return p[0] + "." + p[1];
    };

    return Cellular;
  }(Map);

  var FEATURES = {
    "room": Room,
    "corridor": Corridor
  };
  /**
   * Random dungeon generator using human-like digging patterns.
   * Heavily based on Mike Anderson's ideas from the "Tyrant" algo, mentioned at
   * http://www.roguebasin.roguelikedevelopment.org/index.php?title=Dungeon-Building_Algorithm.
   */

  var Digger = /*#__PURE__*/function (_Dungeon2) {
    _inheritsLoose(Digger, _Dungeon2);

    function Digger(width, height, options) {
      var _this15;

      if (options === void 0) {
        options = {};
      }

      _this15 = _Dungeon2.call(this, width, height) || this;
      _this15._options = Object.assign({
        roomWidth: [3, 9],
        roomHeight: [3, 5],
        corridorLength: [3, 10],
        dugPercentage: 0.2,
        timeLimit: 1000
        /* we stop after this much time has passed (msec) */

      }, options);
      _this15._features = {
        "room": 4,
        "corridor": 4
      };
      _this15._map = [];
      _this15._featureAttempts = 20;
      /* how many times do we try to create a feature on a suitable wall */

      _this15._walls = {};
      /* these are available for digging */

      _this15._dug = 0;
      _this15._digCallback = _this15._digCallback.bind(_assertThisInitialized(_this15));
      _this15._canBeDugCallback = _this15._canBeDugCallback.bind(_assertThisInitialized(_this15));
      _this15._isWallCallback = _this15._isWallCallback.bind(_assertThisInitialized(_this15));
      _this15._priorityWallCallback = _this15._priorityWallCallback.bind(_assertThisInitialized(_this15));
      return _this15;
    }

    var _proto28 = Digger.prototype;

    _proto28.create = function create(callback) {
      this._rooms = [];
      this._corridors = [];
      this._map = this._fillMap(1);
      this._walls = {};
      this._dug = 0;
      var area = (this._width - 2) * (this._height - 2);

      this._firstRoom();

      var t1 = Date.now();
      var priorityWalls;

      do {
        priorityWalls = 0;
        var t2 = Date.now();

        if (t2 - t1 > this._options.timeLimit) {
          break;
        }
        /* find a good wall */


        var wall = this._findWall();

        if (!wall) {
          break;
        }
        /* no more walls */


        var parts = wall.split(",");
        var x = parseInt(parts[0]);
        var y = parseInt(parts[1]);

        var dir = this._getDiggingDirection(x, y);

        if (!dir) {
          continue;
        }
        /* this wall is not suitable */
        //		console.log("wall", x, y);

        /* try adding a feature */


        var featureAttempts = 0;

        do {
          featureAttempts++;

          if (this._tryFeature(x, y, dir[0], dir[1])) {
            /* feature added */
            //if (this._rooms.length + this._corridors.length == 2) { this._rooms[0].addDoor(x, y); } /* first room oficially has doors */
            this._removeSurroundingWalls(x, y);

            this._removeSurroundingWalls(x - dir[0], y - dir[1]);

            break;
          }
        } while (featureAttempts < this._featureAttempts);

        for (var id in this._walls) {
          if (this._walls[id] > 1) {
            priorityWalls++;
          }
        }
      } while (this._dug / area < this._options.dugPercentage || priorityWalls);
      /* fixme number of priority walls */


      this._addDoors();

      if (callback) {
        for (var i = 0; i < this._width; i++) {
          for (var j = 0; j < this._height; j++) {
            callback(i, j, this._map[i][j]);
          }
        }
      }

      this._walls = {};
      this._map = [];
      return this;
    };

    _proto28._digCallback = function _digCallback(x, y, value) {
      if (value == 0 || value == 2) {
        /* empty */
        this._map[x][y] = 0;
        this._dug++;
      } else {
        /* wall */
        this._walls[x + "," + y] = 1;
      }
    };

    _proto28._isWallCallback = function _isWallCallback(x, y) {
      if (x < 0 || y < 0 || x >= this._width || y >= this._height) {
        return false;
      }

      return this._map[x][y] == 1;
    };

    _proto28._canBeDugCallback = function _canBeDugCallback(x, y) {
      if (x < 1 || y < 1 || x + 1 >= this._width || y + 1 >= this._height) {
        return false;
      }

      return this._map[x][y] == 1;
    };

    _proto28._priorityWallCallback = function _priorityWallCallback(x, y) {
      this._walls[x + "," + y] = 2;
    };

    _proto28._firstRoom = function _firstRoom() {
      var cx = Math.floor(this._width / 2);
      var cy = Math.floor(this._height / 2);
      var room = Room.createRandomCenter(cx, cy, this._options);

      this._rooms.push(room);

      room.create(this._digCallback);
    }
    /**
     * Get a suitable wall
     */
    ;

    _proto28._findWall = function _findWall() {
      var prio1 = [];
      var prio2 = [];

      for (var _id2 in this._walls) {
        var prio = this._walls[_id2];

        if (prio == 2) {
          prio2.push(_id2);
        } else {
          prio1.push(_id2);
        }
      }

      var arr = prio2.length ? prio2 : prio1;

      if (!arr.length) {
        return null;
      }
      /* no walls :/ */


      var id = RNG$1.getItem(arr.sort()); // sort to make the order deterministic

      delete this._walls[id];
      return id;
    }
    /**
     * Tries adding a feature
     * @returns {bool} was this a successful try?
     */
    ;

    _proto28._tryFeature = function _tryFeature(x, y, dx, dy) {
      var featureName = RNG$1.getWeightedValue(this._features);
      var ctor = FEATURES[featureName];
      var feature = ctor.createRandomAt(x, y, dx, dy, this._options);

      if (!feature.isValid(this._isWallCallback, this._canBeDugCallback)) {
        //		console.log("not valid");
        //		feature.debug();
        return false;
      }

      feature.create(this._digCallback); //	feature.debug();

      if (feature instanceof Room) {
        this._rooms.push(feature);
      }

      if (feature instanceof Corridor) {
        feature.createPriorityWalls(this._priorityWallCallback);

        this._corridors.push(feature);
      }

      return true;
    };

    _proto28._removeSurroundingWalls = function _removeSurroundingWalls(cx, cy) {
      var deltas = DIRS[4];

      for (var i = 0; i < deltas.length; i++) {
        var delta = deltas[i];
        var x = cx + delta[0];
        var y = cy + delta[1];
        delete this._walls[x + "," + y];
        x = cx + 2 * delta[0];
        y = cy + 2 * delta[1];
        delete this._walls[x + "," + y];
      }
    }
    /**
     * Returns vector in "digging" direction, or false, if this does not exist (or is not unique)
     */
    ;

    _proto28._getDiggingDirection = function _getDiggingDirection(cx, cy) {
      if (cx <= 0 || cy <= 0 || cx >= this._width - 1 || cy >= this._height - 1) {
        return null;
      }

      var result = null;
      var deltas = DIRS[4];

      for (var i = 0; i < deltas.length; i++) {
        var delta = deltas[i];
        var x = cx + delta[0];
        var y = cy + delta[1];

        if (!this._map[x][y]) {
          /* there already is another empty neighbor! */
          if (result) {
            return null;
          }

          result = delta;
        }
      }
      /* no empty neighbor */


      if (!result) {
        return null;
      }

      return [-result[0], -result[1]];
    }
    /**
     * Find empty spaces surrounding rooms, and apply doors.
     */
    ;

    _proto28._addDoors = function _addDoors() {
      var data = this._map;

      function isWallCallback(x, y) {
        return data[x][y] == 1;
      }

      for (var i = 0; i < this._rooms.length; i++) {
        var room = this._rooms[i];
        room.clearDoors();
        room.addDoors(isWallCallback);
      }
    };

    return Digger;
  }(Dungeon);
  /**
   * Join lists with "i" and "i+1"
   */


  function addToList(i, L, R) {
    R[L[i + 1]] = R[i];
    L[R[i]] = L[i + 1];
    R[i] = i + 1;
    L[i + 1] = i;
  }
  /**
   * Remove "i" from its list
   */


  function removeFromList(i, L, R) {
    R[L[i]] = R[i];
    L[R[i]] = L[i];
    R[i] = i;
    L[i] = i;
  }
  /**
   * Maze generator - Eller's algorithm
   * See http://homepages.cwi.nl/~tromp/maze.html for explanation
   */


  var EllerMaze = /*#__PURE__*/function (_Map4) {
    _inheritsLoose(EllerMaze, _Map4);

    function EllerMaze() {
      return _Map4.apply(this, arguments) || this;
    }

    var _proto29 = EllerMaze.prototype;

    _proto29.create = function create(callback) {
      var map = this._fillMap(1);

      var w = Math.ceil((this._width - 2) / 2);
      var rand = 9 / 24;
      var L = [];
      var R = [];

      for (var i = 0; i < w; i++) {
        L.push(i);
        R.push(i);
      }

      L.push(w - 1);
      /* fake stop-block at the right side */

      var j;

      for (j = 1; j + 3 < this._height; j += 2) {
        /* one row */
        for (var _i4 = 0; _i4 < w; _i4++) {
          /* cell coords (will be always empty) */
          var x = 2 * _i4 + 1;
          var y = j;
          map[x][y] = 0;
          /* right connection */

          if (_i4 != L[_i4 + 1] && RNG$1.getUniform() > rand) {
            addToList(_i4, L, R);
            map[x + 1][y] = 0;
          }
          /* bottom connection */


          if (_i4 != L[_i4] && RNG$1.getUniform() > rand) {
            /* remove connection */
            removeFromList(_i4, L, R);
          } else {
            /* create connection */
            map[x][y + 1] = 0;
          }
        }
      }
      /* last row */


      for (var _i5 = 0; _i5 < w; _i5++) {
        /* cell coords (will be always empty) */
        var _x2 = 2 * _i5 + 1;

        var _y2 = j;
        map[_x2][_y2] = 0;
        /* right connection */

        if (_i5 != L[_i5 + 1] && (_i5 == L[_i5] || RNG$1.getUniform() > rand)) {
          /* dig right also if the cell is separated, so it gets connected to the rest of maze */
          addToList(_i5, L, R);
          map[_x2 + 1][_y2] = 0;
        }

        removeFromList(_i5, L, R);
      }

      for (var _i6 = 0; _i6 < this._width; _i6++) {
        for (var _j = 0; _j < this._height; _j++) {
          callback(_i6, _j, map[_i6][_j]);
        }
      }

      return this;
    };

    return EllerMaze;
  }(Map);
  /**
   * @class Recursively divided maze, http://en.wikipedia.org/wiki/Maze_generation_algorithm#Recursive_division_method
   * @augments ROT.Map
   */


  var DividedMaze = /*#__PURE__*/function (_Map5) {
    _inheritsLoose(DividedMaze, _Map5);

    function DividedMaze() {
      var _this16;

      _this16 = _Map5.apply(this, arguments) || this;
      _this16._stack = [];
      _this16._map = [];
      return _this16;
    }

    var _proto30 = DividedMaze.prototype;

    _proto30.create = function create(callback) {
      var w = this._width;
      var h = this._height;
      this._map = [];

      for (var i = 0; i < w; i++) {
        this._map.push([]);

        for (var j = 0; j < h; j++) {
          var border = i == 0 || j == 0 || i + 1 == w || j + 1 == h;

          this._map[i].push(border ? 1 : 0);
        }
      }

      this._stack = [[1, 1, w - 2, h - 2]];

      this._process();

      for (var _i7 = 0; _i7 < w; _i7++) {
        for (var _j2 = 0; _j2 < h; _j2++) {
          callback(_i7, _j2, this._map[_i7][_j2]);
        }
      }

      this._map = [];
      return this;
    };

    _proto30._process = function _process() {
      while (this._stack.length) {
        var room = this._stack.shift();
        /* [left, top, right, bottom] */


        this._partitionRoom(room);
      }
    };

    _proto30._partitionRoom = function _partitionRoom(room) {
      var availX = [];
      var availY = [];

      for (var i = room[0] + 1; i < room[2]; i++) {
        var top = this._map[i][room[1] - 1];
        var bottom = this._map[i][room[3] + 1];

        if (top && bottom && !(i % 2)) {
          availX.push(i);
        }
      }

      for (var j = room[1] + 1; j < room[3]; j++) {
        var left = this._map[room[0] - 1][j];
        var right = this._map[room[2] + 1][j];

        if (left && right && !(j % 2)) {
          availY.push(j);
        }
      }

      if (!availX.length || !availY.length) {
        return;
      }

      var x = RNG$1.getItem(availX);
      var y = RNG$1.getItem(availY);
      this._map[x][y] = 1;
      var walls = [];
      var w = [];
      walls.push(w);
      /* left part */

      for (var _i8 = room[0]; _i8 < x; _i8++) {
        this._map[_i8][y] = 1;
        if (_i8 % 2) w.push([_i8, y]);
      }

      w = [];
      walls.push(w);
      /* right part */

      for (var _i9 = x + 1; _i9 <= room[2]; _i9++) {
        this._map[_i9][y] = 1;
        if (_i9 % 2) w.push([_i9, y]);
      }

      w = [];
      walls.push(w);
      /* top part */

      for (var _j3 = room[1]; _j3 < y; _j3++) {
        this._map[x][_j3] = 1;
        if (_j3 % 2) w.push([x, _j3]);
      }

      w = [];
      walls.push(w);
      /* bottom part */

      for (var _j4 = y + 1; _j4 <= room[3]; _j4++) {
        this._map[x][_j4] = 1;
        if (_j4 % 2) w.push([x, _j4]);
      }

      var solid = RNG$1.getItem(walls);

      for (var _i10 = 0; _i10 < walls.length; _i10++) {
        var _w = walls[_i10];

        if (_w == solid) {
          continue;
        }

        var hole = RNG$1.getItem(_w);
        this._map[hole[0]][hole[1]] = 0;
      }

      this._stack.push([room[0], room[1], x - 1, y - 1]);
      /* left top */


      this._stack.push([x + 1, room[1], room[2], y - 1]);
      /* right top */


      this._stack.push([room[0], y + 1, x - 1, room[3]]);
      /* left bottom */


      this._stack.push([x + 1, y + 1, room[2], room[3]]);
      /* right bottom */

    };

    return DividedMaze;
  }(Map);
  /**
   * Icey's Maze generator
   * See http://www.roguebasin.roguelikedevelopment.org/index.php?title=Simple_maze for explanation
   */


  var IceyMaze = /*#__PURE__*/function (_Map6) {
    _inheritsLoose(IceyMaze, _Map6);

    function IceyMaze(width, height, regularity) {
      var _this17;

      if (regularity === void 0) {
        regularity = 0;
      }

      _this17 = _Map6.call(this, width, height) || this;
      _this17._regularity = regularity;
      _this17._map = [];
      return _this17;
    }

    var _proto31 = IceyMaze.prototype;

    _proto31.create = function create(callback) {
      var width = this._width;
      var height = this._height;

      var map = this._fillMap(1);

      width -= width % 2 ? 1 : 2;
      height -= height % 2 ? 1 : 2;
      var cx = 0;
      var cy = 0;
      var nx = 0;
      var ny = 0;
      var done = 0;
      var blocked = false;
      var dirs = [[0, 0], [0, 0], [0, 0], [0, 0]];

      do {
        cx = 1 + 2 * Math.floor(RNG$1.getUniform() * (width - 1) / 2);
        cy = 1 + 2 * Math.floor(RNG$1.getUniform() * (height - 1) / 2);

        if (!done) {
          map[cx][cy] = 0;
        }

        if (!map[cx][cy]) {
          this._randomize(dirs);

          do {
            if (Math.floor(RNG$1.getUniform() * (this._regularity + 1)) == 0) {
              this._randomize(dirs);
            }

            blocked = true;

            for (var i = 0; i < 4; i++) {
              nx = cx + dirs[i][0] * 2;
              ny = cy + dirs[i][1] * 2;

              if (this._isFree(map, nx, ny, width, height)) {
                map[nx][ny] = 0;
                map[cx + dirs[i][0]][cy + dirs[i][1]] = 0;
                cx = nx;
                cy = ny;
                blocked = false;
                done++;
                break;
              }
            }
          } while (!blocked);
        }
      } while (done + 1 < width * height / 4);

      for (var _i11 = 0; _i11 < this._width; _i11++) {
        for (var j = 0; j < this._height; j++) {
          callback(_i11, j, map[_i11][j]);
        }
      }

      this._map = [];
      return this;
    };

    _proto31._randomize = function _randomize(dirs) {
      for (var i = 0; i < 4; i++) {
        dirs[i][0] = 0;
        dirs[i][1] = 0;
      }

      switch (Math.floor(RNG$1.getUniform() * 4)) {
        case 0:
          dirs[0][0] = -1;
          dirs[1][0] = 1;
          dirs[2][1] = -1;
          dirs[3][1] = 1;
          break;

        case 1:
          dirs[3][0] = -1;
          dirs[2][0] = 1;
          dirs[1][1] = -1;
          dirs[0][1] = 1;
          break;

        case 2:
          dirs[2][0] = -1;
          dirs[3][0] = 1;
          dirs[0][1] = -1;
          dirs[1][1] = 1;
          break;

        case 3:
          dirs[1][0] = -1;
          dirs[0][0] = 1;
          dirs[3][1] = -1;
          dirs[2][1] = 1;
          break;
      }
    };

    _proto31._isFree = function _isFree(map, x, y, width, height) {
      if (x < 1 || y < 1 || x >= width || y >= height) {
        return false;
      }

      return map[x][y];
    };

    return IceyMaze;
  }(Map);
  /**
   * Dungeon generator which uses the "orginal" Rogue dungeon generation algorithm. See http://kuoi.com/~kamikaze/GameDesign/art07_rogue_dungeon.php
   * @author hyakugei
   */


  var Rogue = /*#__PURE__*/function (_Map7) {
    _inheritsLoose(Rogue, _Map7);

    function Rogue(width, height, options) {
      var _this18;

      _this18 = _Map7.call(this, width, height) || this;
      _this18.map = [];
      _this18.rooms = [];
      _this18.connectedCells = [];
      options = Object.assign({
        cellWidth: 3,
        cellHeight: 3 //     ie. as an array with min-max values for each direction....

      }, options);
      /*
      Set the room sizes according to the over-all width of the map,
      and the cell sizes.
      */

      if (!options.hasOwnProperty("roomWidth")) {
        options["roomWidth"] = _this18._calculateRoomSize(_this18._width, options["cellWidth"]);
      }

      if (!options.hasOwnProperty("roomHeight")) {
        options["roomHeight"] = _this18._calculateRoomSize(_this18._height, options["cellHeight"]);
      }

      _this18._options = options;
      return _this18;
    }

    var _proto32 = Rogue.prototype;

    _proto32.create = function create(callback) {
      this.map = this._fillMap(1);
      this.rooms = [];
      this.connectedCells = [];

      this._initRooms();

      this._connectRooms();

      this._connectUnconnectedRooms();

      this._createRandomRoomConnections();

      this._createRooms();

      this._createCorridors();

      if (callback) {
        for (var i = 0; i < this._width; i++) {
          for (var j = 0; j < this._height; j++) {
            callback(i, j, this.map[i][j]);
          }
        }
      }

      return this;
    };

    _proto32._calculateRoomSize = function _calculateRoomSize(size, cell) {
      var max = Math.floor(size / cell * 0.8);
      var min = Math.floor(size / cell * 0.25);

      if (min < 2) {
        min = 2;
      }

      if (max < 2) {
        max = 2;
      }

      return [min, max];
    };

    _proto32._initRooms = function _initRooms() {
      // create rooms array. This is the "grid" list from the algo.
      for (var i = 0; i < this._options.cellWidth; i++) {
        this.rooms.push([]);

        for (var j = 0; j < this._options.cellHeight; j++) {
          this.rooms[i].push({
            "x": 0,
            "y": 0,
            "width": 0,
            "height": 0,
            "connections": [],
            "cellx": i,
            "celly": j
          });
        }
      }
    };

    _proto32._connectRooms = function _connectRooms() {
      //pick random starting grid
      var cgx = RNG$1.getUniformInt(0, this._options.cellWidth - 1);
      var cgy = RNG$1.getUniformInt(0, this._options.cellHeight - 1);
      var idx;
      var ncgx;
      var ncgy;
      var found = false;
      var room;
      var otherRoom;
      var dirToCheck; // find  unconnected neighbour cells

      do {
        //dirToCheck = [0, 1, 2, 3, 4, 5, 6, 7];
        dirToCheck = [0, 2, 4, 6];
        dirToCheck = RNG$1.shuffle(dirToCheck);

        do {
          found = false;
          idx = dirToCheck.pop();
          ncgx = cgx + DIRS[8][idx][0];
          ncgy = cgy + DIRS[8][idx][1];

          if (ncgx < 0 || ncgx >= this._options.cellWidth) {
            continue;
          }

          if (ncgy < 0 || ncgy >= this._options.cellHeight) {
            continue;
          }

          room = this.rooms[cgx][cgy];

          if (room["connections"].length > 0) {
            // as long as this room doesn't already coonect to me, we are ok with it.
            if (room["connections"][0][0] == ncgx && room["connections"][0][1] == ncgy) {
              break;
            }
          }

          otherRoom = this.rooms[ncgx][ncgy];

          if (otherRoom["connections"].length == 0) {
            otherRoom["connections"].push([cgx, cgy]);
            this.connectedCells.push([ncgx, ncgy]);
            cgx = ncgx;
            cgy = ncgy;
            found = true;
          }
        } while (dirToCheck.length > 0 && found == false);
      } while (dirToCheck.length > 0);
    };

    _proto32._connectUnconnectedRooms = function _connectUnconnectedRooms() {
      //While there are unconnected rooms, try to connect them to a random connected neighbor
      //(if a room has no connected neighbors yet, just keep cycling, you'll fill out to it eventually).
      var cw = this._options.cellWidth;
      var ch = this._options.cellHeight;
      this.connectedCells = RNG$1.shuffle(this.connectedCells);
      var room;
      var otherRoom;
      var validRoom;

      for (var i = 0; i < this._options.cellWidth; i++) {
        for (var j = 0; j < this._options.cellHeight; j++) {
          room = this.rooms[i][j];

          if (room["connections"].length == 0) {
            var directions = [0, 2, 4, 6];
            directions = RNG$1.shuffle(directions);
            validRoom = false;

            do {
              var dirIdx = directions.pop();
              var newI = i + DIRS[8][dirIdx][0];
              var newJ = j + DIRS[8][dirIdx][1];

              if (newI < 0 || newI >= cw || newJ < 0 || newJ >= ch) {
                continue;
              }

              otherRoom = this.rooms[newI][newJ];
              validRoom = true;

              if (otherRoom["connections"].length == 0) {
                break;
              }

              for (var k = 0; k < otherRoom["connections"].length; k++) {
                if (otherRoom["connections"][k][0] == i && otherRoom["connections"][k][1] == j) {
                  validRoom = false;
                  break;
                }
              }

              if (validRoom) {
                break;
              }
            } while (directions.length);

            if (validRoom) {
              room["connections"].push([otherRoom["cellx"], otherRoom["celly"]]);
            } else {
              console.log("-- Unable to connect room.");
            }
          }
        }
      }
    };

    _proto32._createRandomRoomConnections = function _createRandomRoomConnections() {// Empty for now.
    };

    _proto32._createRooms = function _createRooms() {
      var w = this._width;
      var h = this._height;
      var cw = this._options.cellWidth;
      var ch = this._options.cellHeight;
      var cwp = Math.floor(this._width / cw);
      var chp = Math.floor(this._height / ch);
      var roomw;
      var roomh;
      var roomWidth = this._options["roomWidth"];
      var roomHeight = this._options["roomHeight"];
      var sx;
      var sy;
      var otherRoom;

      for (var i = 0; i < cw; i++) {
        for (var j = 0; j < ch; j++) {
          sx = cwp * i;
          sy = chp * j;

          if (sx == 0) {
            sx = 1;
          }

          if (sy == 0) {
            sy = 1;
          }

          roomw = RNG$1.getUniformInt(roomWidth[0], roomWidth[1]);
          roomh = RNG$1.getUniformInt(roomHeight[0], roomHeight[1]);

          if (j > 0) {
            otherRoom = this.rooms[i][j - 1];

            while (sy - (otherRoom["y"] + otherRoom["height"]) < 3) {
              sy++;
            }
          }

          if (i > 0) {
            otherRoom = this.rooms[i - 1][j];

            while (sx - (otherRoom["x"] + otherRoom["width"]) < 3) {
              sx++;
            }
          }

          var sxOffset = Math.round(RNG$1.getUniformInt(0, cwp - roomw) / 2);
          var syOffset = Math.round(RNG$1.getUniformInt(0, chp - roomh) / 2);

          while (sx + sxOffset + roomw >= w) {
            if (sxOffset) {
              sxOffset--;
            } else {
              roomw--;
            }
          }

          while (sy + syOffset + roomh >= h) {
            if (syOffset) {
              syOffset--;
            } else {
              roomh--;
            }
          }

          sx = sx + sxOffset;
          sy = sy + syOffset;
          this.rooms[i][j]["x"] = sx;
          this.rooms[i][j]["y"] = sy;
          this.rooms[i][j]["width"] = roomw;
          this.rooms[i][j]["height"] = roomh;

          for (var ii = sx; ii < sx + roomw; ii++) {
            for (var jj = sy; jj < sy + roomh; jj++) {
              this.map[ii][jj] = 0;
            }
          }
        }
      }
    };

    _proto32._getWallPosition = function _getWallPosition(aRoom, aDirection) {
      var rx;
      var ry;
      var door;

      if (aDirection == 1 || aDirection == 3) {
        rx = RNG$1.getUniformInt(aRoom["x"] + 1, aRoom["x"] + aRoom["width"] - 2);

        if (aDirection == 1) {
          ry = aRoom["y"] - 2;
          door = ry + 1;
        } else {
          ry = aRoom["y"] + aRoom["height"] + 1;
          door = ry - 1;
        }

        this.map[rx][door] = 0; // i'm not setting a specific 'door' tile value right now, just empty space.
      } else {
        ry = RNG$1.getUniformInt(aRoom["y"] + 1, aRoom["y"] + aRoom["height"] - 2);

        if (aDirection == 2) {
          rx = aRoom["x"] + aRoom["width"] + 1;
          door = rx - 1;
        } else {
          rx = aRoom["x"] - 2;
          door = rx + 1;
        }

        this.map[door][ry] = 0; // i'm not setting a specific 'door' tile value right now, just empty space.
      }

      return [rx, ry];
    };

    _proto32._drawCorridor = function _drawCorridor(startPosition, endPosition) {
      var xOffset = endPosition[0] - startPosition[0];
      var yOffset = endPosition[1] - startPosition[1];
      var xpos = startPosition[0];
      var ypos = startPosition[1];
      var tempDist;
      var xDir;
      var yDir;
      var move; // 2 element array, element 0 is the direction, element 1 is the total value to move.

      var moves = []; // a list of 2 element arrays

      var xAbs = Math.abs(xOffset);
      var yAbs = Math.abs(yOffset);
      var percent = RNG$1.getUniform(); // used to split the move at different places along the long axis

      var firstHalf = percent;
      var secondHalf = 1 - percent;
      xDir = xOffset > 0 ? 2 : 6;
      yDir = yOffset > 0 ? 4 : 0;

      if (xAbs < yAbs) {
        // move firstHalf of the y offset
        tempDist = Math.ceil(yAbs * firstHalf);
        moves.push([yDir, tempDist]); // move all the x offset

        moves.push([xDir, xAbs]); // move sendHalf of the  y offset

        tempDist = Math.floor(yAbs * secondHalf);
        moves.push([yDir, tempDist]);
      } else {
        //  move firstHalf of the x offset
        tempDist = Math.ceil(xAbs * firstHalf);
        moves.push([xDir, tempDist]); // move all the y offset

        moves.push([yDir, yAbs]); // move secondHalf of the x offset.

        tempDist = Math.floor(xAbs * secondHalf);
        moves.push([xDir, tempDist]);
      }

      this.map[xpos][ypos] = 0;

      while (moves.length > 0) {
        move = moves.pop();

        while (move[1] > 0) {
          xpos += DIRS[8][move[0]][0];
          ypos += DIRS[8][move[0]][1];
          this.map[xpos][ypos] = 0;
          move[1] = move[1] - 1;
        }
      }
    };

    _proto32._createCorridors = function _createCorridors() {
      // Draw Corridors between connected rooms
      var cw = this._options.cellWidth;
      var ch = this._options.cellHeight;
      var room;
      var connection;
      var otherRoom;
      var wall;
      var otherWall;

      for (var i = 0; i < cw; i++) {
        for (var j = 0; j < ch; j++) {
          room = this.rooms[i][j];

          for (var k = 0; k < room["connections"].length; k++) {
            connection = room["connections"][k];
            otherRoom = this.rooms[connection[0]][connection[1]]; // figure out what wall our corridor will start one.
            // figure out what wall our corridor will end on.

            if (otherRoom["cellx"] > room["cellx"]) {
              wall = 2;
              otherWall = 4;
            } else if (otherRoom["cellx"] < room["cellx"]) {
              wall = 4;
              otherWall = 2;
            } else if (otherRoom["celly"] > room["celly"]) {
              wall = 3;
              otherWall = 1;
            } else {
              wall = 1;
              otherWall = 3;
            }

            this._drawCorridor(this._getWallPosition(room, wall), this._getWallPosition(otherRoom, otherWall));
          }
        }
      }
    };

    return Rogue;
  }(Map);

  var index$2 = {
    Arena: Arena,
    Uniform: Uniform,
    Cellular: Cellular,
    Digger: Digger,
    EllerMaze: EllerMaze,
    DividedMaze: DividedMaze,
    IceyMaze: IceyMaze,
    Rogue: Rogue
  };
  /**
   * Base noise generator
   */

  var Noise = function Noise() {};

  var F2 = 0.5 * (Math.sqrt(3) - 1);
  var G2 = (3 - Math.sqrt(3)) / 6;
  /**
   * A simple 2d implementation of simplex noise by Ondrej Zara
   *
   * Based on a speed-improved simplex noise algorithm for 2D, 3D and 4D in Java.
   * Which is based on example code by Stefan Gustavson (stegu@itn.liu.se).
   * With Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).
   * Better rank ordering method by Stefan Gustavson in 2012.
   */

  var Simplex = /*#__PURE__*/function (_Noise) {
    _inheritsLoose(Simplex, _Noise);

    /**
     * @param gradients Random gradients
     */
    function Simplex(gradients) {
      var _this19;

      if (gradients === void 0) {
        gradients = 256;
      }

      _this19 = _Noise.call(this) || this;
      _this19._gradients = [[0, -1], [1, -1], [1, 0], [1, 1], [0, 1], [-1, 1], [-1, 0], [-1, -1]];
      var permutations = [];

      for (var i = 0; i < gradients; i++) {
        permutations.push(i);
      }

      permutations = RNG$1.shuffle(permutations);
      _this19._perms = [];
      _this19._indexes = [];

      for (var _i12 = 0; _i12 < 2 * gradients; _i12++) {
        _this19._perms.push(permutations[_i12 % gradients]);

        _this19._indexes.push(_this19._perms[_i12] % _this19._gradients.length);
      }

      return _this19;
    }

    var _proto33 = Simplex.prototype;

    _proto33.get = function get(xin, yin) {
      var perms = this._perms;
      var indexes = this._indexes;
      var count = perms.length / 2;
      var n0 = 0,
          n1 = 0,
          n2 = 0,
          gi; // Noise contributions from the three corners
      // Skew the input space to determine which simplex cell we're in

      var s = (xin + yin) * F2; // Hairy factor for 2D

      var i = Math.floor(xin + s);
      var j = Math.floor(yin + s);
      var t = (i + j) * G2;
      var X0 = i - t; // Unskew the cell origin back to (x,y) space

      var Y0 = j - t;
      var x0 = xin - X0; // The x,y distances from the cell origin

      var y0 = yin - Y0; // For the 2D case, the simplex shape is an equilateral triangle.
      // Determine which simplex we are in.

      var i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords

      if (x0 > y0) {
        i1 = 1;
        j1 = 0;
      } else {
        // lower triangle, XY order: (0,0)->(1,0)->(1,1)
        i1 = 0;
        j1 = 1;
      } // upper triangle, YX order: (0,0)->(0,1)->(1,1)
      // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and
      // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where
      // c = (3-sqrt(3))/6


      var x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords

      var y1 = y0 - j1 + G2;
      var x2 = x0 - 1 + 2 * G2; // Offsets for last corner in (x,y) unskewed coords

      var y2 = y0 - 1 + 2 * G2; // Work out the hashed gradient indices of the three simplex corners

      var ii = mod(i, count);
      var jj = mod(j, count); // Calculate the contribution from the three corners

      var t0 = 0.5 - x0 * x0 - y0 * y0;

      if (t0 >= 0) {
        t0 *= t0;
        gi = indexes[ii + perms[jj]];
        var grad = this._gradients[gi];
        n0 = t0 * t0 * (grad[0] * x0 + grad[1] * y0);
      }

      var t1 = 0.5 - x1 * x1 - y1 * y1;

      if (t1 >= 0) {
        t1 *= t1;
        gi = indexes[ii + i1 + perms[jj + j1]];
        var _grad = this._gradients[gi];
        n1 = t1 * t1 * (_grad[0] * x1 + _grad[1] * y1);
      }

      var t2 = 0.5 - x2 * x2 - y2 * y2;

      if (t2 >= 0) {
        t2 *= t2;
        gi = indexes[ii + 1 + perms[jj + 1]];
        var _grad2 = this._gradients[gi];
        n2 = t2 * t2 * (_grad2[0] * x2 + _grad2[1] * y2);
      } // Add contributions from each corner to get the final noise value.
      // The result is scaled to return values in the interval [-1,1].


      return 70 * (n0 + n1 + n2);
    };

    return Simplex;
  }(Noise);

  var index$3 = {
    Simplex: Simplex
  };
  /**
   * @class Abstract pathfinder
   * @param {int} toX Target X coord
   * @param {int} toY Target Y coord
   * @param {function} passableCallback Callback to determine map passability
   * @param {object} [options]
   * @param {int} [options.topology=8]
   */

  var Path = /*#__PURE__*/function () {
    function Path(toX, toY, passableCallback, options) {
      if (options === void 0) {
        options = {};
      }

      this._toX = toX;
      this._toY = toY;
      this._passableCallback = passableCallback;
      this._options = Object.assign({
        topology: 8
      }, options);
      this._dirs = DIRS[this._options.topology];

      if (this._options.topology == 8) {
        /* reorder dirs for more aesthetic result (vertical/horizontal first) */
        this._dirs = [this._dirs[0], this._dirs[2], this._dirs[4], this._dirs[6], this._dirs[1], this._dirs[3], this._dirs[5], this._dirs[7]];
      }
    }

    var _proto34 = Path.prototype;

    _proto34._getNeighbors = function _getNeighbors(cx, cy) {
      var result = [];

      for (var i = 0; i < this._dirs.length; i++) {
        var dir = this._dirs[i];
        var x = cx + dir[0];
        var y = cy + dir[1];

        if (!this._passableCallback(x, y)) {
          continue;
        }

        result.push([x, y]);
      }

      return result;
    };

    return Path;
  }();
  /**
   * @class Simplified Dijkstra's algorithm: all edges have a value of 1
   * @augments ROT.Path
   * @see ROT.Path
   */


  var Dijkstra = /*#__PURE__*/function (_Path) {
    _inheritsLoose(Dijkstra, _Path);

    function Dijkstra(toX, toY, passableCallback, options) {
      var _this20;

      _this20 = _Path.call(this, toX, toY, passableCallback, options) || this;
      _this20._computed = {};
      _this20._todo = [];

      _this20._add(toX, toY, null);

      return _this20;
    }
    /**
     * Compute a path from a given point
     * @see ROT.Path#compute
     */


    var _proto35 = Dijkstra.prototype;

    _proto35.compute = function compute(fromX, fromY, callback) {
      var key = fromX + "," + fromY;

      if (!(key in this._computed)) {
        this._compute(fromX, fromY);
      }

      if (!(key in this._computed)) {
        return;
      }

      var item = this._computed[key];

      while (item) {
        callback(item.x, item.y);
        item = item.prev;
      }
    }
    /**
     * Compute a non-cached value
     */
    ;

    _proto35._compute = function _compute(fromX, fromY) {
      while (this._todo.length) {
        var item = this._todo.shift();

        if (item.x == fromX && item.y == fromY) {
          return;
        }

        var neighbors = this._getNeighbors(item.x, item.y);

        for (var i = 0; i < neighbors.length; i++) {
          var neighbor = neighbors[i];
          var x = neighbor[0];
          var y = neighbor[1];
          var id = x + "," + y;

          if (id in this._computed) {
            continue;
          }
          /* already done */


          this._add(x, y, item);
        }
      }
    };

    _proto35._add = function _add(x, y, prev) {
      var obj = {
        x: x,
        y: y,
        prev: prev
      };
      this._computed[x + "," + y] = obj;

      this._todo.push(obj);
    };

    return Dijkstra;
  }(Path);
  /**
   * @class Simplified A* algorithm: all edges have a value of 1
   * @augments ROT.Path
   * @see ROT.Path
   */


  var AStar = /*#__PURE__*/function (_Path2) {
    _inheritsLoose(AStar, _Path2);

    function AStar(toX, toY, passableCallback, options) {
      var _this21;

      if (options === void 0) {
        options = {};
      }

      _this21 = _Path2.call(this, toX, toY, passableCallback, options) || this;
      _this21._todo = [];
      _this21._done = {};
      return _this21;
    }
    /**
     * Compute a path from a given point
     * @see ROT.Path#compute
     */


    var _proto36 = AStar.prototype;

    _proto36.compute = function compute(fromX, fromY, callback) {
      this._todo = [];
      this._done = {};
      this._fromX = fromX;
      this._fromY = fromY;

      this._add(this._toX, this._toY, null);

      while (this._todo.length) {
        var _item = this._todo.shift();

        var id = _item.x + "," + _item.y;

        if (id in this._done) {
          continue;
        }

        this._done[id] = _item;

        if (_item.x == fromX && _item.y == fromY) {
          break;
        }

        var neighbors = this._getNeighbors(_item.x, _item.y);

        for (var i = 0; i < neighbors.length; i++) {
          var neighbor = neighbors[i];
          var x = neighbor[0];
          var y = neighbor[1];

          var _id3 = x + "," + y;

          if (_id3 in this._done) {
            continue;
          }

          this._add(x, y, _item);
        }
      }

      var item = this._done[fromX + "," + fromY];

      if (!item) {
        return;
      }

      while (item) {
        callback(item.x, item.y);
        item = item.prev;
      }
    };

    _proto36._add = function _add(x, y, prev) {
      var h = this._distance(x, y);

      var obj = {
        x: x,
        y: y,
        prev: prev,
        g: prev ? prev.g + 1 : 0,
        h: h
      };
      /* insert into priority queue */

      var f = obj.g + obj.h;

      for (var i = 0; i < this._todo.length; i++) {
        var item = this._todo[i];
        var itemF = item.g + item.h;

        if (f < itemF || f == itemF && h < item.h) {
          this._todo.splice(i, 0, obj);

          return;
        }
      }

      this._todo.push(obj);
    };

    _proto36._distance = function _distance(x, y) {
      switch (this._options.topology) {
        case 4:
          return Math.abs(x - this._fromX) + Math.abs(y - this._fromY);
          break;

        case 6:
          var dx = Math.abs(x - this._fromX);
          var dy = Math.abs(y - this._fromY);
          return dy + Math.max(0, (dx - dy) / 2);
          break;

        case 8:
          return Math.max(Math.abs(x - this._fromX), Math.abs(y - this._fromY));
          break;
      }
    };

    return AStar;
  }(Path);

  var index$4 = {
    Dijkstra: Dijkstra,
    AStar: AStar
  };
  /**
   * @class Asynchronous main loop
   * @param {ROT.Scheduler} scheduler
   */

  var Engine = /*#__PURE__*/function () {
    function Engine(scheduler) {
      this._scheduler = scheduler;
      this._lock = 1;
    }
    /**
     * Start the main loop. When this call returns, the loop is locked.
     */


    var _proto37 = Engine.prototype;

    _proto37.start = function start() {
      return this.unlock();
    }
    /**
     * Interrupt the engine by an asynchronous action
     */
    ;

    _proto37.lock = function lock() {
      this._lock++;
      return this;
    }
    /**
     * Resume execution (paused by a previous lock)
     */
    ;

    _proto37.unlock = function unlock() {
      if (!this._lock) {
        throw new Error("Cannot unlock unlocked engine");
      }

      this._lock--;

      while (!this._lock) {
        var actor = this._scheduler.next();

        if (!actor) {
          return this.lock();
        }
        /* no actors */


        var result = actor.act();

        if (result && result.then) {
          /* actor returned a "thenable", looks like a Promise */
          this.lock();
          result.then(this.unlock.bind(this));
        }
      }

      return this;
    };

    return Engine;
  }();
  /**
   * Lighting computation, based on a traditional FOV for multiple light sources and multiple passes.
   */


  var Lighting = /*#__PURE__*/function () {
    function Lighting(reflectivityCallback, options) {
      if (options === void 0) {
        options = {};
      }

      this._reflectivityCallback = reflectivityCallback;
      this._options = {};
      options = Object.assign({
        passes: 1,
        emissionThreshold: 100,
        range: 10
      }, options);
      this._lights = {};
      this._reflectivityCache = {};
      this._fovCache = {};
      this.setOptions(options);
    }
    /**
     * Adjust options at runtime
     */


    var _proto38 = Lighting.prototype;

    _proto38.setOptions = function setOptions(options) {
      Object.assign(this._options, options);

      if (options && options.range) {
        this.reset();
      }

      return this;
    }
    /**
     * Set the used Field-Of-View algo
     */
    ;

    _proto38.setFOV = function setFOV(fov) {
      this._fov = fov;
      this._fovCache = {};
      return this;
    }
    /**
     * Set (or remove) a light source
     */
    ;

    _proto38.setLight = function setLight(x, y, color) {
      var key = x + "," + y;

      if (color) {
        this._lights[key] = typeof color == "string" ? fromString(color) : color;
      } else {
        delete this._lights[key];
      }

      return this;
    }
    /**
     * Remove all light sources
     */
    ;

    _proto38.clearLights = function clearLights() {
      this._lights = {};
    }
    /**
     * Reset the pre-computed topology values. Call whenever the underlying map changes its light-passability.
     */
    ;

    _proto38.reset = function reset() {
      this._reflectivityCache = {};
      this._fovCache = {};
      return this;
    }
    /**
     * Compute the lighting
     */
    ;

    _proto38.compute = function compute(lightingCallback) {
      var doneCells = {};
      var emittingCells = {};
      var litCells = {};

      for (var key in this._lights) {
        /* prepare emitters for first pass */
        var light = this._lights[key];
        emittingCells[key] = [0, 0, 0];
        add_(emittingCells[key], light);
      }

      for (var i = 0; i < this._options.passes; i++) {
        /* main loop */
        this._emitLight(emittingCells, litCells, doneCells);

        if (i + 1 == this._options.passes) {
          continue;
        }
        /* not for the last pass */


        emittingCells = this._computeEmitters(litCells, doneCells);
      }

      for (var litKey in litCells) {
        /* let the user know what and how is lit */
        var parts = litKey.split(",");
        var x = parseInt(parts[0]);
        var y = parseInt(parts[1]);
        lightingCallback(x, y, litCells[litKey]);
      }

      return this;
    }
    /**
     * Compute one iteration from all emitting cells
     * @param emittingCells These emit light
     * @param litCells Add projected light to these
     * @param doneCells These already emitted, forbid them from further calculations
     */
    ;

    _proto38._emitLight = function _emitLight(emittingCells, litCells, doneCells) {
      for (var key in emittingCells) {
        var parts = key.split(",");
        var x = parseInt(parts[0]);
        var y = parseInt(parts[1]);

        this._emitLightFromCell(x, y, emittingCells[key], litCells);

        doneCells[key] = 1;
      }

      return this;
    }
    /**
     * Prepare a list of emitters for next pass
     */
    ;

    _proto38._computeEmitters = function _computeEmitters(litCells, doneCells) {
      var result = {};

      for (var key in litCells) {
        if (key in doneCells) {
          continue;
        }
        /* already emitted */


        var _color = litCells[key];
        var reflectivity = void 0;

        if (key in this._reflectivityCache) {
          reflectivity = this._reflectivityCache[key];
        } else {
          var parts = key.split(",");
          var x = parseInt(parts[0]);
          var y = parseInt(parts[1]);
          reflectivity = this._reflectivityCallback(x, y);
          this._reflectivityCache[key] = reflectivity;
        }

        if (reflectivity == 0) {
          continue;
        }
        /* will not reflect at all */

        /* compute emission color */


        var emission = [0, 0, 0];
        var intensity = 0;

        for (var i = 0; i < 3; i++) {
          var part = Math.round(_color[i] * reflectivity);
          emission[i] = part;
          intensity += part;
        }

        if (intensity > this._options.emissionThreshold) {
          result[key] = emission;
        }
      }

      return result;
    }
    /**
     * Compute one iteration from one cell
     */
    ;

    _proto38._emitLightFromCell = function _emitLightFromCell(x, y, color, litCells) {
      var key = x + "," + y;
      var fov;

      if (key in this._fovCache) {
        fov = this._fovCache[key];
      } else {
        fov = this._updateFOV(x, y);
      }

      for (var fovKey in fov) {
        var formFactor = fov[fovKey];
        var result = void 0;

        if (fovKey in litCells) {
          /* already lit */
          result = litCells[fovKey];
        } else {
          /* newly lit */
          result = [0, 0, 0];
          litCells[fovKey] = result;
        }

        for (var i = 0; i < 3; i++) {
          result[i] += Math.round(color[i] * formFactor);
        }
        /* add light color */

      }

      return this;
    }
    /**
     * Compute FOV ("form factor") for a potential light source at [x,y]
     */
    ;

    _proto38._updateFOV = function _updateFOV(x, y) {
      var key1 = x + "," + y;
      var cache = {};
      this._fovCache[key1] = cache;
      var range = this._options.range;

      function cb(x, y, r, vis) {
        var key2 = x + "," + y;
        var formFactor = vis * (1 - r / range);

        if (formFactor == 0) {
          return;
        }

        cache[key2] = formFactor;
      }

      this._fov.compute(x, y, range, cb.bind(this));

      return cache;
    };

    return Lighting;
  }();

  var Util = util;
  var Color = color;
  var Text = text;
  exports.Util = Util;
  exports.Color = Color;
  exports.Text = Text;
  exports.RNG = RNG$1;
  exports.Display = Display;
  exports.StringGenerator = StringGenerator;
  exports.EventQueue = EventQueue;
  exports.Scheduler = index;
  exports.FOV = index$1;
  exports.Map = index$2;
  exports.Noise = index$3;
  exports.Path = index$4;
  exports.Engine = Engine;
  exports.Lighting = Lighting;
  exports.DEFAULT_WIDTH = DEFAULT_WIDTH;
  exports.DEFAULT_HEIGHT = DEFAULT_HEIGHT;
  exports.DIRS = DIRS;
  exports.KEYS = KEYS;
  Object.defineProperty(exports, '__esModule', {
    value: true
  });
});


/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./node_modules/safe-buffer/index.js":
/*!*******************************************!*\
  !*** ./node_modules/safe-buffer/index.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* eslint-disable node/no-deprecated-api */
var buffer = __webpack_require__(/*! buffer */ "./node_modules/buffer/index.js")
var Buffer = buffer.Buffer

// alternative to using Object.keys for old browsers
function copyProps (src, dst) {
  for (var key in src) {
    dst[key] = src[key]
  }
}
if (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {
  module.exports = buffer
} else {
  // Copy properties from require('buffer')
  copyProps(buffer, exports)
  exports.Buffer = SafeBuffer
}

function SafeBuffer (arg, encodingOrOffset, length) {
  return Buffer(arg, encodingOrOffset, length)
}

// Copy static methods from Buffer
copyProps(Buffer, SafeBuffer)

SafeBuffer.from = function (arg, encodingOrOffset, length) {
  if (typeof arg === 'number') {
    throw new TypeError('Argument must not be a number')
  }
  return Buffer(arg, encodingOrOffset, length)
}

SafeBuffer.alloc = function (size, fill, encoding) {
  if (typeof size !== 'number') {
    throw new TypeError('Argument must be a number')
  }
  var buf = Buffer(size)
  if (fill !== undefined) {
    if (typeof encoding === 'string') {
      buf.fill(fill, encoding)
    } else {
      buf.fill(fill)
    }
  } else {
    buf.fill(0)
  }
  return buf
}

SafeBuffer.allocUnsafe = function (size) {
  if (typeof size !== 'number') {
    throw new TypeError('Argument must be a number')
  }
  return Buffer(size)
}

SafeBuffer.allocUnsafeSlow = function (size) {
  if (typeof size !== 'number') {
    throw new TypeError('Argument must be a number')
  }
  return buffer.SlowBuffer(size)
}


/***/ }),

/***/ "./node_modules/setimmediate/setImmediate.js":
/*!***************************************************!*\
  !*** ./node_modules/setimmediate/setImmediate.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global, process) {(function (global, undefined) {
    "use strict";

    if (global.setImmediate) {
        return;
    }

    var nextHandle = 1; // Spec says greater than zero
    var tasksByHandle = {};
    var currentlyRunningATask = false;
    var doc = global.document;
    var registerImmediate;

    function setImmediate(callback) {
      // Callback can either be a function or a string
      if (typeof callback !== "function") {
        callback = new Function("" + callback);
      }
      // Copy function arguments
      var args = new Array(arguments.length - 1);
      for (var i = 0; i < args.length; i++) {
          args[i] = arguments[i + 1];
      }
      // Store and register the task
      var task = { callback: callback, args: args };
      tasksByHandle[nextHandle] = task;
      registerImmediate(nextHandle);
      return nextHandle++;
    }

    function clearImmediate(handle) {
        delete tasksByHandle[handle];
    }

    function run(task) {
        var callback = task.callback;
        var args = task.args;
        switch (args.length) {
        case 0:
            callback();
            break;
        case 1:
            callback(args[0]);
            break;
        case 2:
            callback(args[0], args[1]);
            break;
        case 3:
            callback(args[0], args[1], args[2]);
            break;
        default:
            callback.apply(undefined, args);
            break;
        }
    }

    function runIfPresent(handle) {
        // From the spec: "Wait until any invocations of this algorithm started before this one have completed."
        // So if we're currently running a task, we'll need to delay this invocation.
        if (currentlyRunningATask) {
            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a
            // "too much recursion" error.
            setTimeout(runIfPresent, 0, handle);
        } else {
            var task = tasksByHandle[handle];
            if (task) {
                currentlyRunningATask = true;
                try {
                    run(task);
                } finally {
                    clearImmediate(handle);
                    currentlyRunningATask = false;
                }
            }
        }
    }

    function installNextTickImplementation() {
        registerImmediate = function(handle) {
            process.nextTick(function () { runIfPresent(handle); });
        };
    }

    function canUsePostMessage() {
        // The test against `importScripts` prevents this implementation from being installed inside a web worker,
        // where `global.postMessage` means something completely different and can't be used for this purpose.
        if (global.postMessage && !global.importScripts) {
            var postMessageIsAsynchronous = true;
            var oldOnMessage = global.onmessage;
            global.onmessage = function() {
                postMessageIsAsynchronous = false;
            };
            global.postMessage("", "*");
            global.onmessage = oldOnMessage;
            return postMessageIsAsynchronous;
        }
    }

    function installPostMessageImplementation() {
        // Installs an event handler on `global` for the `message` event: see
        // * https://developer.mozilla.org/en/DOM/window.postMessage
        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages

        var messagePrefix = "setImmediate$" + Math.random() + "$";
        var onGlobalMessage = function(event) {
            if (event.source === global &&
                typeof event.data === "string" &&
                event.data.indexOf(messagePrefix) === 0) {
                runIfPresent(+event.data.slice(messagePrefix.length));
            }
        };

        if (global.addEventListener) {
            global.addEventListener("message", onGlobalMessage, false);
        } else {
            global.attachEvent("onmessage", onGlobalMessage);
        }

        registerImmediate = function(handle) {
            global.postMessage(messagePrefix + handle, "*");
        };
    }

    function installMessageChannelImplementation() {
        var channel = new MessageChannel();
        channel.port1.onmessage = function(event) {
            var handle = event.data;
            runIfPresent(handle);
        };

        registerImmediate = function(handle) {
            channel.port2.postMessage(handle);
        };
    }

    function installReadyStateChangeImplementation() {
        var html = doc.documentElement;
        registerImmediate = function(handle) {
            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted
            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.
            var script = doc.createElement("script");
            script.onreadystatechange = function () {
                runIfPresent(handle);
                script.onreadystatechange = null;
                html.removeChild(script);
                script = null;
            };
            html.appendChild(script);
        };
    }

    function installSetTimeoutImplementation() {
        registerImmediate = function(handle) {
            setTimeout(runIfPresent, 0, handle);
        };
    }

    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.
    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);
    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;

    // Don't get fooled by e.g. browserify environments.
    if ({}.toString.call(global.process) === "[object process]") {
        // For Node.js before 0.9
        installNextTickImplementation();

    } else if (canUsePostMessage()) {
        // For non-IE10 modern browsers
        installPostMessageImplementation();

    } else if (global.MessageChannel) {
        // For web workers, where supported
        installMessageChannelImplementation();

    } else if (doc && "onreadystatechange" in doc.createElement("script")) {
        // For IE 6–8
        installReadyStateChangeImplementation();

    } else {
        // For older browsers
        installSetTimeoutImplementation();
    }

    attachTo.setImmediate = setImmediate;
    attachTo.clearImmediate = clearImmediate;
}(typeof self === "undefined" ? typeof global === "undefined" ? this : global : self));

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js"), __webpack_require__(/*! ./../process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./node_modules/simple-peer/index.js":
/*!*******************************************!*\
  !*** ./node_modules/simple-peer/index.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(Buffer) {module.exports = Peer

var debug = __webpack_require__(/*! debug */ "./node_modules/debug/src/browser.js")('simple-peer')
var getBrowserRTC = __webpack_require__(/*! get-browser-rtc */ "./node_modules/get-browser-rtc/index.js")
var inherits = __webpack_require__(/*! inherits */ "./node_modules/inherits/inherits_browser.js")
var randombytes = __webpack_require__(/*! randombytes */ "./node_modules/randombytes/browser.js")
var stream = __webpack_require__(/*! readable-stream */ "./node_modules/readable-stream/readable-browser.js")

var MAX_BUFFERED_AMOUNT = 64 * 1024

inherits(Peer, stream.Duplex)

/**
 * WebRTC peer connection. Same API as node core `net.Socket`, plus a few extra methods.
 * Duplex stream.
 * @param {Object} opts
 */
function Peer (opts) {
  var self = this
  if (!(self instanceof Peer)) return new Peer(opts)

  self._id = randombytes(4).toString('hex').slice(0, 7)
  self._debug('new peer %o', opts)

  opts = Object.assign({
    allowHalfOpen: false
  }, opts)

  stream.Duplex.call(self, opts)

  self.channelName = opts.initiator
    ? opts.channelName || randombytes(20).toString('hex')
    : null

  // Needed by _transformConstraints, so set this early
  self._isChromium = typeof window !== 'undefined' && !!window.webkitRTCPeerConnection

  self.initiator = opts.initiator || false
  self.channelConfig = opts.channelConfig || Peer.channelConfig
  self.config = opts.config || Peer.config
  self.constraints = self._transformConstraints(opts.constraints || Peer.constraints)
  self.offerConstraints = self._transformConstraints(opts.offerConstraints || {})
  self.answerConstraints = self._transformConstraints(opts.answerConstraints || {})
  self.sdpTransform = opts.sdpTransform || function (sdp) { return sdp }
  self.streams = opts.streams || (opts.stream ? [opts.stream] : []) // support old "stream" option
  self.trickle = opts.trickle !== undefined ? opts.trickle : true

  self.destroyed = false
  self.connected = false

  self.remoteAddress = undefined
  self.remoteFamily = undefined
  self.remotePort = undefined
  self.localAddress = undefined
  self.localPort = undefined

  self._wrtc = (opts.wrtc && typeof opts.wrtc === 'object')
    ? opts.wrtc
    : getBrowserRTC()

  if (!self._wrtc) {
    if (typeof window === 'undefined') {
      throw makeError('No WebRTC support: Specify `opts.wrtc` option in this environment', 'ERR_WEBRTC_SUPPORT')
    } else {
      throw makeError('No WebRTC support: Not a supported browser', 'ERR_WEBRTC_SUPPORT')
    }
  }

  self._pcReady = false
  self._channelReady = false
  self._iceComplete = false // ice candidate trickle done (got null candidate)
  self._channel = null
  self._pendingCandidates = []

  self._isNegotiating = false // is this peer waiting for negotiation to complete?
  self._batchedNegotiation = false // batch synchronous negotiations
  self._queuedNegotiation = false // is there a queued negotiation request?
  self._sendersAwaitingStable = []
  self._senderMap = new WeakMap()

  self._remoteTracks = []
  self._remoteStreams = []

  self._chunk = null
  self._cb = null
  self._interval = null

  self._pc = new (self._wrtc.RTCPeerConnection)(self.config, self.constraints)

  // We prefer feature detection whenever possible, but sometimes that's not
  // possible for certain implementations.
  self._isReactNativeWebrtc = typeof self._pc._peerConnectionId === 'number'

  self._pc.oniceconnectionstatechange = function () {
    self._onIceStateChange()
  }
  self._pc.onicegatheringstatechange = function () {
    self._onIceStateChange()
  }
  self._pc.onsignalingstatechange = function () {
    self._onSignalingStateChange()
  }
  self._pc.onicecandidate = function (event) {
    self._onIceCandidate(event)
  }

  // Other spec events, unused by this implementation:
  // - onconnectionstatechange
  // - onicecandidateerror
  // - onfingerprintfailure
  // - onnegotiationneeded

  if (self.initiator) {
    self._setupData({
      channel: self._pc.createDataChannel(self.channelName, self.channelConfig)
    })
  } else {
    self._pc.ondatachannel = function (event) {
      self._setupData(event)
    }
  }

  if ('addTrack' in self._pc) {
    if (self.streams) {
      self.streams.forEach(function (stream) {
        self.addStream(stream)
      })
    }
    self._pc.ontrack = function (event) {
      self._onTrack(event)
    }
  }

  if (self.initiator) {
    self._needsNegotiation()
  }

  self._onFinishBound = function () {
    self._onFinish()
  }
  self.once('finish', self._onFinishBound)
}

Peer.WEBRTC_SUPPORT = !!getBrowserRTC()

/**
 * Expose config, constraints, and data channel config for overriding all Peer
 * instances. Otherwise, just set opts.config, opts.constraints, or opts.channelConfig
 * when constructing a Peer.
 */
Peer.config = {
  iceServers: [
    {
      urls: 'stun:stun.l.google.com:19302'
    },
    {
      urls: 'stun:global.stun.twilio.com:3478?transport=udp'
    }
  ]
}
Peer.constraints = {}
Peer.channelConfig = {}

Object.defineProperty(Peer.prototype, 'bufferSize', {
  get: function () {
    var self = this
    return (self._channel && self._channel.bufferedAmount) || 0
  }
})

Peer.prototype.address = function () {
  var self = this
  return { port: self.localPort, family: 'IPv4', address: self.localAddress }
}

Peer.prototype.signal = function (data) {
  var self = this
  if (self.destroyed) throw makeError('cannot signal after peer is destroyed', 'ERR_SIGNALING')
  if (typeof data === 'string') {
    try {
      data = JSON.parse(data)
    } catch (err) {
      data = {}
    }
  }
  self._debug('signal()')

  if (data.renegotiate) {
    self._debug('got request to renegotiate')
    self._needsNegotiation()
  }
  if (data.candidate) {
    if (self._pc.remoteDescription && self._pc.remoteDescription.type) self._addIceCandidate(data.candidate)
    else self._pendingCandidates.push(data.candidate)
  }
  if (data.sdp) {
    self._pc.setRemoteDescription(new (self._wrtc.RTCSessionDescription)(data), function () {
      if (self.destroyed) return

      self._pendingCandidates.forEach(function (candidate) {
        self._addIceCandidate(candidate)
      })
      self._pendingCandidates = []

      if (self._pc.remoteDescription.type === 'offer') self._createAnswer()
    }, function (err) { self.destroy(makeError(err, 'ERR_SET_REMOTE_DESCRIPTION')) })
  }
  if (!data.sdp && !data.candidate && !data.renegotiate) {
    self.destroy(makeError('signal() called with invalid signal data', 'ERR_SIGNALING'))
  }
}

Peer.prototype._addIceCandidate = function (candidate) {
  var self = this
  try {
    self._pc.addIceCandidate(
      new self._wrtc.RTCIceCandidate(candidate),
      noop,
      function (err) { self.destroy(makeError(err, 'ERR_ADD_ICE_CANDIDATE')) }
    )
  } catch (err) {
    self.destroy(makeError('error adding candidate: ' + err.message, 'ERR_ADD_ICE_CANDIDATE'))
  }
}

/**
 * Send text/binary data to the remote peer.
 * @param {ArrayBufferView|ArrayBuffer|Buffer|string|Blob} chunk
 */
Peer.prototype.send = function (chunk) {
  var self = this
  self._channel.send(chunk)
}

/**
 * Add a MediaStream to the connection.
 * @param {MediaStream} stream
 */
Peer.prototype.addStream = function (stream) {
  var self = this

  self._debug('addStream()')

  stream.getTracks().forEach(function (track) {
    self.addTrack(track, stream)
  })
}

/**
 * Add a MediaStreamTrack to the connection.
 * @param {MediaStreamTrack} track
 * @param {MediaStream} stream
 */
Peer.prototype.addTrack = function (track, stream) {
  var self = this

  self._debug('addTrack()')

  var sender = self._pc.addTrack(track, stream)
  var submap = self._senderMap.get(track) || new WeakMap() // nested WeakMaps map [track, stream] to sender
  submap.set(stream, sender)
  self._senderMap.set(track, submap)
  self._needsNegotiation()
}

/**
 * Remove a MediaStreamTrack from the connection.
 * @param {MediaStreamTrack} track
 * @param {MediaStream} stream
 */
Peer.prototype.removeTrack = function (track, stream) {
  var self = this

  self._debug('removeSender()')

  var submap = self._senderMap.get(track)
  var sender = submap ? submap.get(stream) : null
  if (!sender) {
    self.destroy(new Error('Cannot remove track that was never added.'))
  }
  try {
    self._pc.removeTrack(sender)
  } catch (err) {
    if (err.name === 'NS_ERROR_UNEXPECTED') {
      self._sendersAwaitingStable.push(sender) // HACK: Firefox must wait until (signalingState === stable) https://bugzilla.mozilla.org/show_bug.cgi?id=1133874
    } else {
      self.destroy(err)
    }
  }
}

/**
 * Remove a MediaStream from the connection.
 * @param {MediaStream} stream
 */
Peer.prototype.removeStream = function (stream) {
  var self = this

  self._debug('removeSenders()')

  stream.getTracks().forEach(function (track) {
    self.removeTrack(track, stream)
  })
}

Peer.prototype._needsNegotiation = function () {
  var self = this

  self._debug('_needsNegotiation')
  if (self._batchedNegotiation) return // batch synchronous renegotiations
  self._batchedNegotiation = true
  setTimeout(function () {
    self._batchedNegotiation = false
    self._debug('starting batched negotiation')
    self.negotiate()
  }, 0)
}

Peer.prototype.negotiate = function () {
  var self = this

  if (self.initiator) {
    if (self._isNegotiating) {
      self._queuedNegotiation = true
      self._debug('already negotiating, queueing')
    } else {
      self._debug('start negotiation')
      self._createOffer()
    }
  } else {
    self._debug('requesting negotiation from initiator')
    self.emit('signal', { // request initiator to renegotiate
      renegotiate: true
    })
  }
  self._isNegotiating = true
}

// TODO: Delete this method once readable-stream is updated to contain a default
// implementation of destroy() that automatically calls _destroy()
// See: https://github.com/nodejs/readable-stream/issues/283
Peer.prototype.destroy = function (err) {
  var self = this
  self._destroy(err, function () {})
}

Peer.prototype._destroy = function (err, cb) {
  var self = this
  if (self.destroyed) return

  self._debug('destroy (error: %s)', err && (err.message || err))

  self.readable = self.writable = false

  if (!self._readableState.ended) self.push(null)
  if (!self._writableState.finished) self.end()

  self.destroyed = true
  self.connected = false
  self._pcReady = false
  self._channelReady = false
  self._remoteTracks = null
  self._remoteStreams = null
  self._senderMap = null

  clearInterval(self._interval)
  self._interval = null
  self._chunk = null
  self._cb = null

  if (self._onFinishBound) self.removeListener('finish', self._onFinishBound)
  self._onFinishBound = null

  if (self._channel) {
    try {
      self._channel.close()
    } catch (err) {}

    self._channel.onmessage = null
    self._channel.onopen = null
    self._channel.onclose = null
    self._channel.onerror = null
  }
  if (self._pc) {
    try {
      self._pc.close()
    } catch (err) {}

    self._pc.oniceconnectionstatechange = null
    self._pc.onicegatheringstatechange = null
    self._pc.onsignalingstatechange = null
    self._pc.onicecandidate = null
    if ('addTrack' in self._pc) {
      self._pc.ontrack = null
    }
    self._pc.ondatachannel = null
  }
  self._pc = null
  self._channel = null

  if (err) self.emit('error', err)
  self.emit('close')
  cb()
}

Peer.prototype._setupData = function (event) {
  var self = this
  if (!event.channel) {
    // In some situations `pc.createDataChannel()` returns `undefined` (in wrtc),
    // which is invalid behavior. Handle it gracefully.
    // See: https://github.com/feross/simple-peer/issues/163
    return self.destroy(makeError('Data channel event is missing `channel` property', 'ERR_DATA_CHANNEL'))
  }

  self._channel = event.channel
  self._channel.binaryType = 'arraybuffer'

  if (typeof self._channel.bufferedAmountLowThreshold === 'number') {
    self._channel.bufferedAmountLowThreshold = MAX_BUFFERED_AMOUNT
  }

  self.channelName = self._channel.label

  self._channel.onmessage = function (event) {
    self._onChannelMessage(event)
  }
  self._channel.onbufferedamountlow = function () {
    self._onChannelBufferedAmountLow()
  }
  self._channel.onopen = function () {
    self._onChannelOpen()
  }
  self._channel.onclose = function () {
    self._onChannelClose()
  }
  self._channel.onerror = function (err) {
    self.destroy(makeError(err, 'ERR_DATA_CHANNEL'))
  }
}

Peer.prototype._read = function () {}

Peer.prototype._write = function (chunk, encoding, cb) {
  var self = this
  if (self.destroyed) return cb(makeError('cannot write after peer is destroyed', 'ERR_DATA_CHANNEL'))

  if (self.connected) {
    try {
      self.send(chunk)
    } catch (err) {
      return self.destroy(makeError(err, 'ERR_DATA_CHANNEL'))
    }
    if (self._channel.bufferedAmount > MAX_BUFFERED_AMOUNT) {
      self._debug('start backpressure: bufferedAmount %d', self._channel.bufferedAmount)
      self._cb = cb
    } else {
      cb(null)
    }
  } else {
    self._debug('write before connect')
    self._chunk = chunk
    self._cb = cb
  }
}

// When stream finishes writing, close socket. Half open connections are not
// supported.
Peer.prototype._onFinish = function () {
  var self = this
  if (self.destroyed) return

  if (self.connected) {
    destroySoon()
  } else {
    self.once('connect', destroySoon)
  }

  // Wait a bit before destroying so the socket flushes.
  // TODO: is there a more reliable way to accomplish this?
  function destroySoon () {
    setTimeout(function () {
      self.destroy()
    }, 1000)
  }
}

Peer.prototype._createOffer = function () {
  var self = this
  if (self.destroyed) return

  self._pc.createOffer(function (offer) {
    if (self.destroyed) return
    offer.sdp = self.sdpTransform(offer.sdp)
    self._pc.setLocalDescription(offer, onSuccess, onError)

    function onSuccess () {
      self._debug('createOffer success')
      if (self.destroyed) return
      if (self.trickle || self._iceComplete) sendOffer()
      else self.once('_iceComplete', sendOffer) // wait for candidates
    }

    function onError (err) {
      self.destroy(makeError(err, 'ERR_SET_LOCAL_DESCRIPTION'))
    }

    function sendOffer () {
      var signal = self._pc.localDescription || offer
      self._debug('signal')
      self.emit('signal', {
        type: signal.type,
        sdp: signal.sdp
      })
    }
  }, function (err) { self.destroy(makeError(err, 'ERR_CREATE_OFFER')) }, self.offerConstraints)
}

Peer.prototype._createAnswer = function () {
  var self = this
  if (self.destroyed) return

  self._pc.createAnswer(function (answer) {
    if (self.destroyed) return
    answer.sdp = self.sdpTransform(answer.sdp)
    self._pc.setLocalDescription(answer, onSuccess, onError)

    function onSuccess () {
      if (self.destroyed) return
      if (self.trickle || self._iceComplete) sendAnswer()
      else self.once('_iceComplete', sendAnswer)
    }

    function onError (err) {
      self.destroy(makeError(err, 'ERR_SET_LOCAL_DESCRIPTION'))
    }

    function sendAnswer () {
      var signal = self._pc.localDescription || answer
      self._debug('signal')
      self.emit('signal', {
        type: signal.type,
        sdp: signal.sdp
      })
    }
  }, function (err) { self.destroy(makeError(err, 'ERR_CREATE_ANSWER')) }, self.answerConstraints)
}

Peer.prototype._onIceStateChange = function () {
  var self = this
  if (self.destroyed) return
  var iceConnectionState = self._pc.iceConnectionState
  var iceGatheringState = self._pc.iceGatheringState

  self._debug(
    'iceStateChange (connection: %s) (gathering: %s)',
    iceConnectionState,
    iceGatheringState
  )
  self.emit('iceStateChange', iceConnectionState, iceGatheringState)

  if (iceConnectionState === 'connected' || iceConnectionState === 'completed') {
    self._pcReady = true
    self._maybeReady()
  }
  if (iceConnectionState === 'failed') {
    self.destroy(makeError('Ice connection failed.', 'ERR_ICE_CONNECTION_FAILURE'))
  }
  if (iceConnectionState === 'closed') {
    self.destroy(new Error('Ice connection closed.'))
  }
}

Peer.prototype.getStats = function (cb) {
  var self = this

  // Promise-based getStats() (standard)
  if (self._pc.getStats.length === 0) {
    self._pc.getStats().then(function (res) {
      var reports = []
      res.forEach(function (report) {
        reports.push(report)
      })
      cb(null, reports)
    }, function (err) { cb(err) })

  // Two-parameter callback-based getStats() (deprecated, former standard)
  } else if (self._isReactNativeWebrtc) {
    self._pc.getStats(null, function (res) {
      var reports = []
      res.forEach(function (report) {
        reports.push(report)
      })
      cb(null, reports)
    }, function (err) { cb(err) })

  // Single-parameter callback-based getStats() (non-standard)
  } else if (self._pc.getStats.length > 0) {
    self._pc.getStats(function (res) {
      // If we destroy connection in `connect` callback this code might happen to run when actual connection is already closed
      if (self.destroyed) return

      var reports = []
      res.result().forEach(function (result) {
        var report = {}
        result.names().forEach(function (name) {
          report[name] = result.stat(name)
        })
        report.id = result.id
        report.type = result.type
        report.timestamp = result.timestamp
        reports.push(report)
      })
      cb(null, reports)
    }, function (err) { cb(err) })

  // Unknown browser, skip getStats() since it's anyone's guess which style of
  // getStats() they implement.
  } else {
    cb(null, [])
  }
}

Peer.prototype._maybeReady = function () {
  var self = this
  self._debug('maybeReady pc %s channel %s', self._pcReady, self._channelReady)
  if (self.connected || self._connecting || !self._pcReady || !self._channelReady) return

  self._connecting = true

  // HACK: We can't rely on order here, for details see https://github.com/js-platform/node-webrtc/issues/339
  function findCandidatePair () {
    if (self.destroyed) return

    self.getStats(function (err, items) {
      if (self.destroyed) return

      // Treat getStats error as non-fatal. It's not essential.
      if (err) items = []

      var remoteCandidates = {}
      var localCandidates = {}
      var candidatePairs = {}
      var foundSelectedCandidatePair = false

      items.forEach(function (item) {
        // TODO: Once all browsers support the hyphenated stats report types, remove
        // the non-hypenated ones
        if (item.type === 'remotecandidate' || item.type === 'remote-candidate') {
          remoteCandidates[item.id] = item
        }
        if (item.type === 'localcandidate' || item.type === 'local-candidate') {
          localCandidates[item.id] = item
        }
        if (item.type === 'candidatepair' || item.type === 'candidate-pair') {
          candidatePairs[item.id] = item
        }
      })

      items.forEach(function (item) {
        // Spec-compliant
        if (item.type === 'transport' && item.selectedCandidatePairId) {
          setSelectedCandidatePair(candidatePairs[item.selectedCandidatePairId])
        }

        // Old implementations
        if (
          (item.type === 'googCandidatePair' && item.googActiveConnection === 'true') ||
          ((item.type === 'candidatepair' || item.type === 'candidate-pair') && item.selected)
        ) {
          setSelectedCandidatePair(item)
        }
      })

      function setSelectedCandidatePair (selectedCandidatePair) {
        foundSelectedCandidatePair = true

        var local = localCandidates[selectedCandidatePair.localCandidateId]

        if (local && local.ip) {
          // Spec
          self.localAddress = local.ip
          self.localPort = Number(local.port)
        } else if (local && local.ipAddress) {
          // Firefox
          self.localAddress = local.ipAddress
          self.localPort = Number(local.portNumber)
        } else if (typeof selectedCandidatePair.googLocalAddress === 'string') {
          // TODO: remove this once Chrome 58 is released
          local = selectedCandidatePair.googLocalAddress.split(':')
          self.localAddress = local[0]
          self.localPort = Number(local[1])
        }

        var remote = remoteCandidates[selectedCandidatePair.remoteCandidateId]

        if (remote && remote.ip) {
          // Spec
          self.remoteAddress = remote.ip
          self.remotePort = Number(remote.port)
        } else if (remote && remote.ipAddress) {
          // Firefox
          self.remoteAddress = remote.ipAddress
          self.remotePort = Number(remote.portNumber)
        } else if (typeof selectedCandidatePair.googRemoteAddress === 'string') {
          // TODO: remove this once Chrome 58 is released
          remote = selectedCandidatePair.googRemoteAddress.split(':')
          self.remoteAddress = remote[0]
          self.remotePort = Number(remote[1])
        }
        self.remoteFamily = 'IPv4'

        self._debug(
          'connect local: %s:%s remote: %s:%s',
          self.localAddress, self.localPort, self.remoteAddress, self.remotePort
        )
      }

      // Ignore candidate pair selection in browsers like Safari 11 that do not have any local or remote candidates
      // But wait until at least 1 candidate pair is available
      if (!foundSelectedCandidatePair && (!Object.keys(candidatePairs).length || Object.keys(localCandidates).length)) {
        setTimeout(findCandidatePair, 100)
        return
      } else {
        self._connecting = false
        self.connected = true
      }

      if (self._chunk) {
        try {
          self.send(self._chunk)
        } catch (err) {
          return self.destroy(makeError(err, 'ERR_DATA_CHANNEL'))
        }
        self._chunk = null
        self._debug('sent chunk from "write before connect"')

        var cb = self._cb
        self._cb = null
        cb(null)
      }

      // If `bufferedAmountLowThreshold` and 'onbufferedamountlow' are unsupported,
      // fallback to using setInterval to implement backpressure.
      if (typeof self._channel.bufferedAmountLowThreshold !== 'number') {
        self._interval = setInterval(function () { self._onInterval() }, 150)
        if (self._interval.unref) self._interval.unref()
      }

      self._debug('connect')
      self.emit('connect')
    })
  }
  findCandidatePair()
}

Peer.prototype._onInterval = function () {
  var self = this
  if (!self._cb || !self._channel || self._channel.bufferedAmount > MAX_BUFFERED_AMOUNT) {
    return
  }
  self._onChannelBufferedAmountLow()
}

Peer.prototype._onSignalingStateChange = function () {
  var self = this
  if (self.destroyed) return

  if (self._pc.signalingState === 'stable') {
    self._isNegotiating = false

    // HACK: Firefox doesn't yet support removing tracks when signalingState !== 'stable'
    self._debug('flushing sender queue', self._sendersAwaitingStable)
    self._sendersAwaitingStable.forEach(function (sender) {
      self.removeTrack(sender)
      self._queuedNegotiation = true
    })
    self._sendersAwaitingStable = []

    if (self._queuedNegotiation) {
      self._debug('flushing negotiation queue')
      self._queuedNegotiation = false
      self._needsNegotiation() // negotiate again
    }

    self._debug('negotiate')
    self.emit('negotiate')
  }

  self._debug('signalingStateChange %s', self._pc.signalingState)
  self.emit('signalingStateChange', self._pc.signalingState)
}

Peer.prototype._onIceCandidate = function (event) {
  var self = this
  if (self.destroyed) return
  if (event.candidate && self.trickle) {
    self.emit('signal', {
      candidate: {
        candidate: event.candidate.candidate,
        sdpMLineIndex: event.candidate.sdpMLineIndex,
        sdpMid: event.candidate.sdpMid
      }
    })
  } else if (!event.candidate) {
    self._iceComplete = true
    self.emit('_iceComplete')
  }
}

Peer.prototype._onChannelMessage = function (event) {
  var self = this
  if (self.destroyed) return
  var data = event.data
  if (data instanceof ArrayBuffer) data = Buffer.from(data)
  self.push(data)
}

Peer.prototype._onChannelBufferedAmountLow = function () {
  var self = this
  if (self.destroyed || !self._cb) return
  self._debug('ending backpressure: bufferedAmount %d', self._channel.bufferedAmount)
  var cb = self._cb
  self._cb = null
  cb(null)
}

Peer.prototype._onChannelOpen = function () {
  var self = this
  if (self.connected || self.destroyed) return
  self._debug('on channel open')
  self._channelReady = true
  self._maybeReady()
}

Peer.prototype._onChannelClose = function () {
  var self = this
  if (self.destroyed) return
  self._debug('on channel close')
  self.destroy()
}

Peer.prototype._onTrack = function (event) {
  var self = this
  if (self.destroyed) return

  event.streams.forEach(function (eventStream) {
    self._debug('on track')
    self.emit('track', event.track, eventStream)

    self._remoteTracks.push({
      track: event.track,
      stream: eventStream
    })

    if (self._remoteStreams.some(function (remoteStream) {
      return remoteStream.id === eventStream.id
    })) return // Only fire one 'stream' event, even though there may be multiple tracks per stream

    self._remoteStreams.push(eventStream)
    setTimeout(function () {
      self.emit('stream', eventStream) // ensure all tracks have been added
    }, 0)
  })
}

Peer.prototype._debug = function () {
  var self = this
  var args = [].slice.call(arguments)
  args[0] = '[' + self._id + '] ' + args[0]
  debug.apply(null, args)
}

// Transform constraints objects into the new format (unless Chromium)
// TODO: This can be removed when Chromium supports the new format
Peer.prototype._transformConstraints = function (constraints) {
  var self = this

  if (Object.keys(constraints).length === 0) {
    return constraints
  }

  if ((constraints.mandatory || constraints.optional) && !self._isChromium) {
    // convert to new format

    // Merge mandatory and optional objects, prioritizing mandatory
    var newConstraints = Object.assign({}, constraints.optional, constraints.mandatory)

    // fix casing
    if (newConstraints.OfferToReceiveVideo !== undefined) {
      newConstraints.offerToReceiveVideo = newConstraints.OfferToReceiveVideo
      delete newConstraints['OfferToReceiveVideo']
    }

    if (newConstraints.OfferToReceiveAudio !== undefined) {
      newConstraints.offerToReceiveAudio = newConstraints.OfferToReceiveAudio
      delete newConstraints['OfferToReceiveAudio']
    }

    return newConstraints
  } else if (!constraints.mandatory && !constraints.optional && self._isChromium) {
    // convert to old format

    // fix casing
    if (constraints.offerToReceiveVideo !== undefined) {
      constraints.OfferToReceiveVideo = constraints.offerToReceiveVideo
      delete constraints['offerToReceiveVideo']
    }

    if (constraints.offerToReceiveAudio !== undefined) {
      constraints.OfferToReceiveAudio = constraints.offerToReceiveAudio
      delete constraints['offerToReceiveAudio']
    }

    return {
      mandatory: constraints // NOTE: All constraints are upgraded to mandatory
    }
  }

  return constraints
}

function makeError (message, code) {
  var err = new Error(message)
  err.code = code
  return err
}

function noop () {}

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../buffer/index.js */ "./node_modules/buffer/index.js").Buffer))

/***/ }),

/***/ "./node_modules/stats-js/build/stats.min.js":
/*!**************************************************!*\
  !*** ./node_modules/stats-js/build/stats.min.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// stats.js - http://github.com/mrdoob/stats.js
var Stats=function(){var l=Date.now(),m=l,g=0,n=Infinity,o=0,h=0,p=Infinity,q=0,r=0,s=0,f=document.createElement("div");f.id="stats";f.addEventListener("mousedown",function(b){b.preventDefault();t(++s%2)},!1);f.style.cssText="width:80px;opacity:0.9;cursor:pointer";var a=document.createElement("div");a.id="fps";a.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002";f.appendChild(a);var i=document.createElement("div");i.id="fpsText";i.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";
i.innerHTML="FPS";a.appendChild(i);var c=document.createElement("div");c.id="fpsGraph";c.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff";for(a.appendChild(c);74>c.children.length;){var j=document.createElement("span");j.style.cssText="width:1px;height:30px;float:left;background-color:#113";c.appendChild(j)}var d=document.createElement("div");d.id="ms";d.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none";f.appendChild(d);var k=document.createElement("div");
k.id="msText";k.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";k.innerHTML="MS";d.appendChild(k);var e=document.createElement("div");e.id="msGraph";e.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0";for(d.appendChild(e);74>e.children.length;)j=document.createElement("span"),j.style.cssText="width:1px;height:30px;float:left;background-color:#131",e.appendChild(j);var t=function(b){s=b;switch(s){case 0:a.style.display=
"block";d.style.display="none";break;case 1:a.style.display="none",d.style.display="block"}};return{REVISION:12,domElement:f,setMode:t,begin:function(){l=Date.now()},end:function(){var b=Date.now();g=b-l;n=Math.min(n,g);o=Math.max(o,g);k.textContent=g+" MS ("+n+"-"+o+")";var a=Math.min(30,30-30*(g/200));e.appendChild(e.firstChild).style.height=a+"px";r++;b>m+1E3&&(h=Math.round(1E3*r/(b-m)),p=Math.min(p,h),q=Math.max(q,h),i.textContent=h+" FPS ("+p+"-"+q+")",a=Math.min(30,30-30*(h/100)),c.appendChild(c.firstChild).style.height=
a+"px",m=b,r=0);return b},update:function(){l=this.end()}}};"object"===typeof module&&(module.exports=Stats);


/***/ }),

/***/ "./node_modules/string_decoder/lib/string_decoder.js":
/*!***********************************************************!*\
  !*** ./node_modules/string_decoder/lib/string_decoder.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



/*<replacement>*/

var Buffer = __webpack_require__(/*! safe-buffer */ "./node_modules/safe-buffer/index.js").Buffer;
/*</replacement>*/

var isEncoding = Buffer.isEncoding || function (encoding) {
  encoding = '' + encoding;
  switch (encoding && encoding.toLowerCase()) {
    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':
      return true;
    default:
      return false;
  }
};

function _normalizeEncoding(enc) {
  if (!enc) return 'utf8';
  var retried;
  while (true) {
    switch (enc) {
      case 'utf8':
      case 'utf-8':
        return 'utf8';
      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return 'utf16le';
      case 'latin1':
      case 'binary':
        return 'latin1';
      case 'base64':
      case 'ascii':
      case 'hex':
        return enc;
      default:
        if (retried) return; // undefined
        enc = ('' + enc).toLowerCase();
        retried = true;
    }
  }
};

// Do not cache `Buffer.isEncoding` when checking encoding names as some
// modules monkey-patch it to support additional encodings
function normalizeEncoding(enc) {
  var nenc = _normalizeEncoding(enc);
  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);
  return nenc || enc;
}

// StringDecoder provides an interface for efficiently splitting a series of
// buffers into a series of JS strings without breaking apart multi-byte
// characters.
exports.StringDecoder = StringDecoder;
function StringDecoder(encoding) {
  this.encoding = normalizeEncoding(encoding);
  var nb;
  switch (this.encoding) {
    case 'utf16le':
      this.text = utf16Text;
      this.end = utf16End;
      nb = 4;
      break;
    case 'utf8':
      this.fillLast = utf8FillLast;
      nb = 4;
      break;
    case 'base64':
      this.text = base64Text;
      this.end = base64End;
      nb = 3;
      break;
    default:
      this.write = simpleWrite;
      this.end = simpleEnd;
      return;
  }
  this.lastNeed = 0;
  this.lastTotal = 0;
  this.lastChar = Buffer.allocUnsafe(nb);
}

StringDecoder.prototype.write = function (buf) {
  if (buf.length === 0) return '';
  var r;
  var i;
  if (this.lastNeed) {
    r = this.fillLast(buf);
    if (r === undefined) return '';
    i = this.lastNeed;
    this.lastNeed = 0;
  } else {
    i = 0;
  }
  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);
  return r || '';
};

StringDecoder.prototype.end = utf8End;

// Returns only complete characters in a Buffer
StringDecoder.prototype.text = utf8Text;

// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer
StringDecoder.prototype.fillLast = function (buf) {
  if (this.lastNeed <= buf.length) {
    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);
    return this.lastChar.toString(this.encoding, 0, this.lastTotal);
  }
  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);
  this.lastNeed -= buf.length;
};

// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a
// continuation byte. If an invalid byte is detected, -2 is returned.
function utf8CheckByte(byte) {
  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;
  return byte >> 6 === 0x02 ? -1 : -2;
}

// Checks at most 3 bytes at the end of a Buffer in order to detect an
// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)
// needed to complete the UTF-8 character (if applicable) are returned.
function utf8CheckIncomplete(self, buf, i) {
  var j = buf.length - 1;
  if (j < i) return 0;
  var nb = utf8CheckByte(buf[j]);
  if (nb >= 0) {
    if (nb > 0) self.lastNeed = nb - 1;
    return nb;
  }
  if (--j < i || nb === -2) return 0;
  nb = utf8CheckByte(buf[j]);
  if (nb >= 0) {
    if (nb > 0) self.lastNeed = nb - 2;
    return nb;
  }
  if (--j < i || nb === -2) return 0;
  nb = utf8CheckByte(buf[j]);
  if (nb >= 0) {
    if (nb > 0) {
      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;
    }
    return nb;
  }
  return 0;
}

// Validates as many continuation bytes for a multi-byte UTF-8 character as
// needed or are available. If we see a non-continuation byte where we expect
// one, we "replace" the validated continuation bytes we've seen so far with
// a single UTF-8 replacement character ('\ufffd'), to match v8's UTF-8 decoding
// behavior. The continuation byte check is included three times in the case
// where all of the continuation bytes for a character exist in the same buffer.
// It is also done this way as a slight performance increase instead of using a
// loop.
function utf8CheckExtraBytes(self, buf, p) {
  if ((buf[0] & 0xC0) !== 0x80) {
    self.lastNeed = 0;
    return '\ufffd';
  }
  if (self.lastNeed > 1 && buf.length > 1) {
    if ((buf[1] & 0xC0) !== 0x80) {
      self.lastNeed = 1;
      return '\ufffd';
    }
    if (self.lastNeed > 2 && buf.length > 2) {
      if ((buf[2] & 0xC0) !== 0x80) {
        self.lastNeed = 2;
        return '\ufffd';
      }
    }
  }
}

// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.
function utf8FillLast(buf) {
  var p = this.lastTotal - this.lastNeed;
  var r = utf8CheckExtraBytes(this, buf, p);
  if (r !== undefined) return r;
  if (this.lastNeed <= buf.length) {
    buf.copy(this.lastChar, p, 0, this.lastNeed);
    return this.lastChar.toString(this.encoding, 0, this.lastTotal);
  }
  buf.copy(this.lastChar, p, 0, buf.length);
  this.lastNeed -= buf.length;
}

// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a
// partial character, the character's bytes are buffered until the required
// number of bytes are available.
function utf8Text(buf, i) {
  var total = utf8CheckIncomplete(this, buf, i);
  if (!this.lastNeed) return buf.toString('utf8', i);
  this.lastTotal = total;
  var end = buf.length - (total - this.lastNeed);
  buf.copy(this.lastChar, 0, end);
  return buf.toString('utf8', i, end);
}

// For UTF-8, a replacement character is added when ending on a partial
// character.
function utf8End(buf) {
  var r = buf && buf.length ? this.write(buf) : '';
  if (this.lastNeed) return r + '\ufffd';
  return r;
}

// UTF-16LE typically needs two bytes per character, but even if we have an even
// number of bytes available, we need to check if we end on a leading/high
// surrogate. In that case, we need to wait for the next two bytes in order to
// decode the last character properly.
function utf16Text(buf, i) {
  if ((buf.length - i) % 2 === 0) {
    var r = buf.toString('utf16le', i);
    if (r) {
      var c = r.charCodeAt(r.length - 1);
      if (c >= 0xD800 && c <= 0xDBFF) {
        this.lastNeed = 2;
        this.lastTotal = 4;
        this.lastChar[0] = buf[buf.length - 2];
        this.lastChar[1] = buf[buf.length - 1];
        return r.slice(0, -1);
      }
    }
    return r;
  }
  this.lastNeed = 1;
  this.lastTotal = 2;
  this.lastChar[0] = buf[buf.length - 1];
  return buf.toString('utf16le', i, buf.length - 1);
}

// For UTF-16LE we do not explicitly append special replacement characters if we
// end on a partial character, we simply let v8 handle that.
function utf16End(buf) {
  var r = buf && buf.length ? this.write(buf) : '';
  if (this.lastNeed) {
    var end = this.lastTotal - this.lastNeed;
    return r + this.lastChar.toString('utf16le', 0, end);
  }
  return r;
}

function base64Text(buf, i) {
  var n = (buf.length - i) % 3;
  if (n === 0) return buf.toString('base64', i);
  this.lastNeed = 3 - n;
  this.lastTotal = 3;
  if (n === 1) {
    this.lastChar[0] = buf[buf.length - 1];
  } else {
    this.lastChar[0] = buf[buf.length - 2];
    this.lastChar[1] = buf[buf.length - 1];
  }
  return buf.toString('base64', i, buf.length - n);
}

function base64End(buf) {
  var r = buf && buf.length ? this.write(buf) : '';
  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);
  return r;
}

// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)
function simpleWrite(buf) {
  return buf.toString(this.encoding);
}

function simpleEnd(buf) {
  return buf && buf.length ? this.write(buf) : '';
}

/***/ }),

/***/ "./node_modules/timers-browserify/main.js":
/*!************************************************!*\
  !*** ./node_modules/timers-browserify/main.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var scope = (typeof global !== "undefined" && global) ||
            (typeof self !== "undefined" && self) ||
            window;
var apply = Function.prototype.apply;

// DOM APIs, for completeness

exports.setTimeout = function() {
  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);
};
exports.setInterval = function() {
  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);
};
exports.clearTimeout =
exports.clearInterval = function(timeout) {
  if (timeout) {
    timeout.close();
  }
};

function Timeout(id, clearFn) {
  this._id = id;
  this._clearFn = clearFn;
}
Timeout.prototype.unref = Timeout.prototype.ref = function() {};
Timeout.prototype.close = function() {
  this._clearFn.call(scope, this._id);
};

// Does not start the time, just sets up the members needed.
exports.enroll = function(item, msecs) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = msecs;
};

exports.unenroll = function(item) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = -1;
};

exports._unrefActive = exports.active = function(item) {
  clearTimeout(item._idleTimeoutId);

  var msecs = item._idleTimeout;
  if (msecs >= 0) {
    item._idleTimeoutId = setTimeout(function onTimeout() {
      if (item._onTimeout)
        item._onTimeout();
    }, msecs);
  }
};

// setimmediate attaches itself to the global object
__webpack_require__(/*! setimmediate */ "./node_modules/setimmediate/setImmediate.js");
// On some exotic environments, it's not clear which object `setimmediate` was
// able to install onto.  Search each possibility in the same order as the
// `setimmediate` library.
exports.setImmediate = (typeof self !== "undefined" && self.setImmediate) ||
                       (typeof global !== "undefined" && global.setImmediate) ||
                       (this && this.setImmediate);
exports.clearImmediate = (typeof self !== "undefined" && self.clearImmediate) ||
                         (typeof global !== "undefined" && global.clearImmediate) ||
                         (this && this.clearImmediate);

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/util-deprecate/browser.js":
/*!************************************************!*\
  !*** ./node_modules/util-deprecate/browser.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {
/**
 * Module exports.
 */

module.exports = deprecate;

/**
 * Mark that a method should not be used.
 * Returns a modified function which warns once by default.
 *
 * If `localStorage.noDeprecation = true` is set, then it is a no-op.
 *
 * If `localStorage.throwDeprecation = true` is set, then deprecated functions
 * will throw an Error when invoked.
 *
 * If `localStorage.traceDeprecation = true` is set, then deprecated functions
 * will invoke `console.trace()` instead of `console.error()`.
 *
 * @param {Function} fn - the function to deprecate
 * @param {String} msg - the string to print to the console when `fn` is invoked
 * @returns {Function} a new "deprecated" version of `fn`
 * @api public
 */

function deprecate (fn, msg) {
  if (config('noDeprecation')) {
    return fn;
  }

  var warned = false;
  function deprecated() {
    if (!warned) {
      if (config('throwDeprecation')) {
        throw new Error(msg);
      } else if (config('traceDeprecation')) {
        console.trace(msg);
      } else {
        console.warn(msg);
      }
      warned = true;
    }
    return fn.apply(this, arguments);
  }

  return deprecated;
}

/**
 * Checks `localStorage` for boolean values for the given `name`.
 *
 * @param {String} name
 * @returns {Boolean}
 * @api private
 */

function config (name) {
  // accessing global.localStorage can trigger a DOMException in sandboxed iframes
  try {
    if (!global.localStorage) return false;
  } catch (_) {
    return false;
  }
  var val = global.localStorage[name];
  if (null == val) return false;
  return String(val).toLowerCase() === 'true';
}

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || Function("return this")() || (1, eval)("this");
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYmFzZTY0LWpzL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9idWZmZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtdXRpbC1pcy9saWIvdXRpbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZGVidWcvc3JjL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2RlYnVnL3NyYy9kZWJ1Zy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZXZlbnRzL2V2ZW50cy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZ2V0LWJyb3dzZXItcnRjL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9pZWVlNzU0L2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9pbmhlcml0cy9pbmhlcml0c19icm93c2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9pc2FycmF5L2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tcy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9kaXN0L3BpeGkubWluLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wcm9jZXNzLW5leHRpY2stYXJncy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yYW5kb21ieXRlcy9icm93c2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fZHVwbGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV9yZWFkYWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3RyYW5zZm9ybS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3dyaXRhYmxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL2ludGVybmFsL3N0cmVhbXMvQnVmZmVyTGlzdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9pbnRlcm5hbC9zdHJlYW1zL2Rlc3Ryb3kuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvaW50ZXJuYWwvc3RyZWFtcy9zdHJlYW0tYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL3JlYWRhYmxlLWJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JvdC1qcy9kaXN0L3JvdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc2FmZS1idWZmZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3NldGltbWVkaWF0ZS9zZXRJbW1lZGlhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3NpbXBsZS1wZWVyL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zdGF0cy1qcy9idWlsZC9zdGF0cy5taW4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0cmluZ19kZWNvZGVyL2xpYi9zdHJpbmdfZGVjb2Rlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdGltZXJzLWJyb3dzZXJpZnkvbWFpbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdXRpbC1kZXByZWNhdGUvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0NBQWtDLFNBQVM7QUFDM0M7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsU0FBUztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDBDQUEwQyxVQUFVO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDdEpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLG1EQUFtRDtBQUN4RTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFVBQVU7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFlBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSx1Q0FBdUMsU0FBUztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGlCQUFpQjtBQUNoQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsaUJBQWlCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsU0FBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsU0FBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxFQUFFO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixlQUFlO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHdCQUF3QixRQUFRO0FBQ2hDO0FBQ0EscUJBQXFCLGVBQWU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFlBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHFCQUFxQixTQUFTO0FBQzlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxxQkFBcUIsU0FBUztBQUM5QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxxQkFBcUIsU0FBUztBQUM5QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsa0JBQWtCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxtQkFBbUIsY0FBYztBQUNqQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdURBQXVELE9BQU87QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVEQUF1RCxPQUFPO0FBQzlEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtCQUFrQjtBQUNsQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHFCQUFxQixRQUFRO0FBQzdCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUIsU0FBUztBQUM1QjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxpQkFBaUI7QUFDaEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUIsWUFBWTtBQUM3Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLGdCQUFnQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixnQkFBZ0I7QUFDakM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCLFlBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUM1dkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDMUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTs7QUFFQTtBQUNBO0FB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QUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsR0FBRztBQUNILG9CQUFvQixTQUFTO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM3U0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFD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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O0FDMUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxxQ0FBcUM7O0FBRXJDO0FBQ0E7QUFDQTs7QUFFQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLFVBQVU7Ozs7Ozs7Ozs7Ozs7dURDdkx0Qzs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixpQkFBaUI7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEU7Ozs7Ozs7Ozs7OztBQ2xJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEU7Ozs7Ozs7Ozs7OztBQzlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSw2RUFBNkU7QUFDdEo7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaURBQWlELDBGQUEwRjs7QUFFM0k7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0dBQWtHO0FBQ2xHLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSw0RkFBNEY7QUFDNUYsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsZ0RBQWdEOztBQUVoRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0RUFBNEU7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RDtBQUM3RDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0NBQXNDOztBQUV0QztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdEO0FBQ3hEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLDRDQUE0Qzs7QUFFNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9COztBQUVwQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1CQUFtQixTQUFTO0FBQzVCO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0RUFBNEU7O0FBRTVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQix5QkFBeUI7QUFDMUM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbURBQW1EO0FBQ25EO0FBQ0EsbURBQW1ELGlFQUFpRTtBQUNwSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QyxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QyxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0NBQWdDLE9BQU87QUFDdkM7QUFDQTtBQUNBO0FBQ0EsQzs7Ozs7Ozs7Ozs7OztBQzEvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxZQUFZO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLEM7Ozs7Ozs7Ozs7OztBQ3JOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlEQUFpRCwwRkFBMEY7O0FBRTNJO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlDQUFpQzs7QUFFakM7O0FBRUEsMkNBQTJDO0FBQzNDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQ7QUFDbkQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsb0RBQW9EO0FBQ3BEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FB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QTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQixhQUFhLElBQUk7QUFDakI7OztBQUdBO0FBQ0EsMEZBQTBGLGFBQWE7QUFDdkc7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLDhDQUE4QyxJQUFJLElBQUk7QUFDdEQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEscUJBQXFCLGtCQUFrQjtBQUN2QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMERBQTBEOztBQUUxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDOztBQUVBLHdGQUF3Rjs7QUFFeEY7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDJCQUEyQixrQkFBa0I7QUFDN0M7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsdUJBQXVCLGtCQUFrQjtBQUN6QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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O0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsb0JBQW9CO0FBQ3BCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsNkJBQTZCO0FBQzdCOztBQUVBLDhCQUE4QjtBQUM5Qjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEI7O0FBRTVCO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixJQUFJO0FBQ3JCLGlCQUFpQixJQUFJO0FBQ3JCLGlCQUFpQixJQUFJO0FBQ3JCOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsSUFBSTtBQUNyQixpQkFBaUIsSUFBSTtBQUNyQixtQkFBbUIsT0FBTztBQUMxQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsSUFBSTtBQUNyQixpQkFBaUIsSUFBSTtBQUNyQixtQkFBbUIsSUFBSTtBQUN2QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixNQUFNO0FBQ3ZCLG1CQUFtQixPQUFPO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixJQUFJO0FBQ3JCLGlCQUFpQixJQUFJO0FBQ3JCLGlCQUFpQixtQkFBbUI7QUFDcEMsaUJBQWlCLE9BQU87QUFDeEIsaUJBQWlCLE9BQU87QUFDeEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUzs7O0FBR1Q7QUFDQTtBQUNBLFNBQVM7OztBQUdUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLElBQUk7QUFDckIsaUJBQWlCLElBQUk7QUFDckIsaUJBQWlCLE9BQU8seURBQXlELEtBQUssSUFBSSxLQUFLLHFCQUFxQixLQUFLO0FBQ3pILGlCQUFpQixJQUFJO0FBQ3JCLG1CQUFtQixJQUFJO0FBQ3ZCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDZCQUE2Qix3QkFBd0I7QUFDckQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOzs7QUFHakIsc0dBQXNHOztBQUV0RywrRUFBK0U7QUFDL0U7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBOzs7QUFHQTtBQUNBO0FBQ0EsaUJBQWlCOzs7QUFHakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXOztBQUVYLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixPQUFPO0FBQ3hCLGlCQUFpQixLQUFLO0FBQ3RCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUJBQXFCLHlCQUF5QjtBQUM5QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxxQkFBcUIsbUJBQW1CO0FBQ3hDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSx5Q0FBeUMscUJBQXFCO0FBQzlEO0FBQ0E7O0FBRUEsdUJBQXVCLG9CQUFvQjtBQUMzQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7O0FBRW5CO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZixpQkFBaUI7QUFDakI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZixpQkFBaUI7QUFDakI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4QixlQUFlLE9BQU87QUFDdEI7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmLGlCQUFpQjtBQUNqQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2YsaUJBQWlCO0FBQ2pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxxQkFBcUIsZ0JBQWdCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxxQkFBcUIsZ0JBQWdCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxnRkFBZ0YsNkJBQTZCO0FBQzdHOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsT0FBTztBQUN4Qjs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsRUFBRTtBQUNqQixlQUFlLE9BQU87QUFDdEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFVBQVU7QUFDM0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLEVBQUU7QUFDakIsaUJBQWlCLE9BQU87QUFDeEI7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxFQUFFO0FBQ2pCLGlCQUFpQixLQUFLO0FBQ3RCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxFQUFFO0FBQ2pCLGVBQWUsS0FBSztBQUNwQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxFQUFFO0FBQ2pCLGlCQUFpQixPQUFPO0FBQ3hCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLEVBQUU7QUFDakIsaUJBQWlCLEtBQUs7QUFDdEI7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxlQUFlLE9BQU87QUFDdEIsZUFBZSxLQUFLO0FBQ3BCLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QixlQUFlLEtBQUs7QUFDcEIsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7OztBQUdBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCLGVBQWUsT0FBTztBQUN0QixlQUFlLElBQUk7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsZUFBZSxJQUFJO0FBQ25CLGVBQWUsSUFBSTtBQUNuQixlQUFlLElBQUk7QUFDbkI7OztBQUdBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQSxxQkFBcUIsaUJBQWlCO0FBQ3RDLHVCQUF1QixxQkFBcUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBLHFCQUFxQixRQUFRO0FBQzdCOztBQUVBOztBQUVBLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLElBQUk7QUFDbkIsZUFBZSxJQUFJO0FBQ25CLGVBQWUsS0FBSztBQUNwQixlQUFlLFFBQVE7QUFDdkI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQSxxQkFBcUIsUUFBUTtBQUM3Qjs7QUFFQTs7QUFFQSx1QkFBdUIsbUJBQW1CO0FBQzFDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QixlQUFlLE9BQU87QUFDdEIsZUFBZSxLQUFLO0FBQ3BCLGVBQWUsUUFBUTtBQUN2QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxJQUFJO0FBQ25CLGVBQWUsSUFBSTtBQUNuQixlQUFlLElBQUk7QUFDbkIsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFCQUFxQixvQkFBb0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsSUFBSTtBQUNuQixlQUFlLElBQUk7QUFDbkIsZUFBZSxJQUFJO0FBQ25CLGVBQWUsSUFBSTtBQUNuQixlQUFlLFNBQVM7QUFDeEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7O0FBRTdDLGlEQUFpRDs7QUFFakQseUNBQXlDOztBQUV6Qzs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLElBQUk7QUFDbkIsZUFBZSxJQUFJO0FBQ25CLGVBQWUsSUFBSTtBQUNuQixlQUFlLElBQUk7QUFDbkIsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDOztBQUU3Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsSUFBSTtBQUNuQixlQUFlLElBQUk7QUFDbkIsZUFBZSxJQUFJO0FBQ25CLGVBQWUsSUFBSTtBQUNuQixlQUFlLFNBQVM7QUFDeEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLElBQUk7QUFDbkIsZUFBZSxJQUFJO0FBQ25CLGVBQWUsSUFBSTtBQUNuQixlQUFlLE1BQU07QUFDckIsZUFBZSxNQUFNO0FBQ3JCLGVBQWUsSUFBSTtBQUNuQixlQUFlLElBQUk7QUFDbkIsZUFBZSxJQUFJO0FBQ25CLGVBQWUsSUFBSTtBQUNuQixlQUFlLElBQUk7QUFDbkIsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsdUJBQXVCLGFBQWE7QUFDcEM7QUFDQTtBQUNBO0FBQ0EseUJBQXlCOztBQUV6QjtBQUNBLGtCQUFrQjs7QUFFbEI7QUFDQSxnREFBZ0Q7O0FBRWhEO0FBQ0EsaURBQWlEOztBQUVqRDtBQUNBO0FBQ0EsV0FBVzs7O0FBR1g7QUFDQTtBQUNBLFdBQVc7OztBQUdYO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7O0FBR2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLElBQUk7QUFDbkIsZUFBZSxJQUFJO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLHFCQUFxQixpQkFBaUI7QUFDdEM7O0FBRUEsdUJBQXVCLGtCQUFrQjtBQUN6QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHFCQUFxQixRQUFRO0FBQzdCLHVCQUF1QixRQUFRO0FBQy9CO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBLDRCQUE0QjtBQUM1Qjs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLElBQUk7QUFDakIsYUFBYSxJQUFJO0FBQ2pCLGFBQWEsSUFBSTtBQUNqQixhQUFhLElBQUk7QUFDakIsYUFBYSxJQUFJO0FBQ2pCLGFBQWEsSUFBSTtBQUNqQjs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx3QkFBd0IsWUFBWTtBQUNwQyx5QkFBeUIsYUFBYTtBQUN0QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHdCQUF3QixZQUFZO0FBQ3BDLHlCQUF5QixhQUFhO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsd0JBQXdCLFlBQVk7QUFDcEMseUJBQXlCLGFBQWE7QUFDdEM7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLFdBQVc7QUFDWDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsYUFBYSxJQUFJO0FBQ2pCLGFBQWEsSUFBSTtBQUNqQixhQUFhLElBQUk7QUFDakIsYUFBYSxJQUFJO0FBQ2pCOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxxQkFBcUIsWUFBWTtBQUNqQztBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHFCQUFxQixZQUFZO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVCQUF1QixpQkFBaUI7QUFDeEMseUJBQXlCLGtCQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixLQUFLO0FBQ3RCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSx1QkFBdUIsd0JBQXdCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCOztBQUVsQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUJBQXFCLGtCQUFrQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtB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O0FBQ0E7O0FBRUEsdUJBQXVCLGtCQUFrQjtBQUN6Qzs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTs7QUFFQSx5QkFBeUIsWUFBWTtBQUNyQztBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTzs7O0FBR1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTs7QUFFQSx5QkFBeUIsV0FBVztBQUNwQztBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTzs7O0FBR1A7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7OztBQUdBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHFFQUFxRSw4QkFBOEIsRUFBRTtBQUNyRzs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOzs7QUFHQTs7QUFFQTtBQUNBLHVCQUF1QixpQkFBaUI7QUFDeEMseUJBQXlCLGtCQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQSx5Q0FBeUM7O0FBRXpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsS0FBSztBQUN0QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsd0NBQXdDOztBQUV4QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxxQkFBcUIsbUJBQW1CO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEscUJBQXFCLG1CQUFtQjtBQUN4QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxxQkFBcUIsd0JBQXdCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFCQUFxQixPQUFPO0FBQzVCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBLGlCQUFpQixzQkFBc0I7QUFDdkM7QUFDQSx5QkFBeUIsU0FBUztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBLHVCQUF1QixTQUFTO0FBQ2hDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSx1QkFBdUIsbUJBQW1CO0FBQzFDLHdCQUF3QixtQkFBbUI7QUFDM0M7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFCQUFxQixPQUFPO0FBQzVCOztBQUVBLHVCQUF1QixPQUFPO0FBQzlCOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSx1QkFBdUIsU0FBUztBQUNoQyx5QkFBeUIsU0FBUztBQUNsQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLCtCQUErQixhQUFhO0FBQzVDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsK0JBQStCLGFBQWE7QUFDNUM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkJBQTZCLFNBQVM7QUFDdEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSwyQkFBMkIsZ0JBQWdCO0FBQzNDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsNkJBQTZCLFNBQVM7QUFDdEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSwyQkFBMkIsZ0JBQWdCO0FBQzNDO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSx3QkFBd0IscUJBQXFCO0FBQzdDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTs7O0FBR0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLDJCQUEyQixPQUFPO0FBQ2xDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxPQUFPOztBQUVQLHdCQUF3QixvQkFBb0I7QUFDNUMsdUJBQXVCLGtCQUFrQjtBQUN6QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EscUJBQXFCLE9BQU87QUFDNUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0EsdUJBQXVCLGlCQUFpQjtBQUN4Qyx5QkFBeUIsa0JBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EscUJBQXFCLDZCQUE2QjtBQUNsRDs7QUFFQSx1QkFBdUIsOEJBQThCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCOztBQUVyQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUJBQXFCLDZCQUE2QjtBQUNsRCx1QkFBdUIsOEJBQThCO0FBQ3JEOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSw2QkFBNkIscUNBQXFDO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxxRkFBcUY7QUFDckY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxxQkFBcUIsUUFBUTtBQUM3Qix1QkFBdUIsUUFBUTtBQUMvQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDJCQUEyQixpQkFBaUI7QUFDNUMsNkJBQTZCLGlCQUFpQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBLCtCQUErQjtBQUMvQixPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQSwrQkFBK0I7QUFDL0I7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTs7QUFFZixxQkFBcUI7O0FBRXJCO0FBQ0E7QUFDQSx1Q0FBdUM7O0FBRXZDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQzs7QUFFckMsaUNBQWlDOztBQUVqQztBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxxQ0FBcUM7O0FBRXJDLGlDQUFpQzs7QUFFakM7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUJBQXFCLFFBQVE7QUFDN0IsdUJBQXVCLFFBQVE7QUFDL0I7O0FBRUEseUJBQXlCLGdDQUFnQztBQUN6RDtBQUNBLGlFQUFpRTtBQUNqRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxxQkFBcUIsZUFBZTtBQUNwQztBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSx3QkFBd0Isc0JBQXNCO0FBQzlDOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQSwrQkFBK0I7O0FBRS9CO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjs7QUFFckI7QUFDQSx3QkFBd0I7O0FBRXhCLHdCQUF3QjtBQUN4Qjs7QUFFQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOzs7QUFHQSw0QkFBNEI7O0FBRTVCO0FBQ0EsK0JBQStCOztBQUUvQiwrQkFBK0I7O0FBRS9CO0FBQ0EsNkJBQTZCOztBQUU3Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLElBQUk7QUFDakIsYUFBYSxJQUFJO0FBQ2pCLGFBQWEsU0FBUztBQUN0QixhQUFhLE9BQU87QUFDcEIsYUFBYSxJQUFJO0FBQ2pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEscUJBQXFCLHVCQUF1QjtBQUM1QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLHFCQUFxQix1QkFBdUI7QUFDNUM7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGNBQWM7QUFDM0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUJBQXFCLDBCQUEwQjtBQUMvQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7O0FBR0E7QUFDQTs7QUFFQSx1QkFBdUIsT0FBTztBQUM5QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHVCQUF1QixPQUFPO0FBQzlCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDOzs7Ozs7Ozs7Ozs7OztBQ3pwT0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtB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QTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQzs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUcsa0JBQWtCLG1EQUFtRDtBQUN4RTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRyxrQkFBa0Isb0RBQW9EO0FBQ3pFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLLGtCQUFrQixVQUFVOztBQUVqQztBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUssa0JBQWtCLFVBQVU7O0FBRWpDO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSyxrQkFBa0IsVUFBVTs7QUFFakM7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QscUJBQXFCO0FBQ3ZFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLHlDQUF5Qzs7QUFFekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7OztBQy81QkE7QUFDQSxxQkFBcUIsbUdBQW1HLGFBQWEsMkNBQTJDLG1CQUFtQixTQUFTLEtBQUssNEJBQTRCLFlBQVksZ0JBQWdCLG9DQUFvQyxXQUFXLHFDQUFxQyxnQkFBZ0IsdUJBQXVCLGlCQUFpQixvQ0FBb0MsZUFBZSw0QkFBNEIsdUNBQXVDLGNBQWMsaUJBQWlCO0FBQzFpQixrQkFBa0IsaUJBQWlCLG9DQUFvQyxnQkFBZ0IsbUNBQW1DLFdBQVcsWUFBWSx1QkFBdUIscUJBQXFCLHFCQUFxQixFQUFFLHFDQUFxQywyQkFBMkIsWUFBWSxXQUFXLHVCQUF1QixpQkFBaUIsb0NBQW9DLFVBQVUscUNBQXFDLGdCQUFnQixzQkFBc0IsY0FBYyxpQkFBaUI7QUFDM2UsY0FBYyw0QkFBNEIsdUNBQXVDLGNBQWMsaUJBQWlCLGtCQUFrQixpQkFBaUIsaUJBQWlCLG9DQUFvQyxlQUFlLG1DQUFtQyxXQUFXLFlBQVksdUJBQXVCLHFCQUFxQixxQkFBcUIsNkRBQTZELFlBQVksV0FBVyx3Q0FBd0Msa0JBQWtCLElBQUksVUFBVTtBQUM5ZSxRQUFRLHVCQUF1QixNQUFNLHdEQUF3RCxPQUFPLG9EQUFvRCxhQUFhLGdCQUFnQixpQkFBaUIsTUFBTSxnQkFBZ0IsZ0JBQWdCLG9DQUFvQyxpQ0FBaUMsZ0RBQWdELElBQUk7QUFDclcsZ0JBQWdCLFNBQVMsbUJBQW1CLGdCQUFnQjs7Ozs7Ozs7Ozs7OztBQ0w1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixzQ0FBc0Msc0NBQXNDO0FBQ3pHO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDOzs7Ozs7Ozs7OztBQ3ZTQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O0FDN0RBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsV0FBVyxPQUFPO0FBQ2xCLGFBQWEsU0FBUztBQUN0QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLGFBQWE7QUFDYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ2xFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDRDQUE0Qzs7QUFFNUMiLCJmaWxlIjoidmVuZG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmV4cG9ydHMuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcbmV4cG9ydHMudG9CeXRlQXJyYXkgPSB0b0J5dGVBcnJheVxuZXhwb3J0cy5mcm9tQnl0ZUFycmF5ID0gZnJvbUJ5dGVBcnJheVxuXG52YXIgbG9va3VwID0gW11cbnZhciByZXZMb29rdXAgPSBbXVxudmFyIEFyciA9IHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJyA/IFVpbnQ4QXJyYXkgOiBBcnJheVxuXG52YXIgY29kZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJ1xuZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvZGUubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgbG9va3VwW2ldID0gY29kZVtpXVxuICByZXZMb29rdXBbY29kZS5jaGFyQ29kZUF0KGkpXSA9IGlcbn1cblxuLy8gU3VwcG9ydCBkZWNvZGluZyBVUkwtc2FmZSBiYXNlNjQgc3RyaW5ncywgYXMgTm9kZS5qcyBkb2VzLlxuLy8gU2VlOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CYXNlNjQjVVJMX2FwcGxpY2F0aW9uc1xucmV2TG9va3VwWyctJy5jaGFyQ29kZUF0KDApXSA9IDYyXG5yZXZMb29rdXBbJ18nLmNoYXJDb2RlQXQoMCldID0gNjNcblxuZnVuY3Rpb24gZ2V0TGVucyAoYjY0KSB7XG4gIHZhciBsZW4gPSBiNjQubGVuZ3RoXG5cbiAgaWYgKGxlbiAlIDQgPiAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0JylcbiAgfVxuXG4gIC8vIFRyaW0gb2ZmIGV4dHJhIGJ5dGVzIGFmdGVyIHBsYWNlaG9sZGVyIGJ5dGVzIGFyZSBmb3VuZFxuICAvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9iZWF0Z2FtbWl0L2Jhc2U2NC1qcy9pc3N1ZXMvNDJcbiAgdmFyIHZhbGlkTGVuID0gYjY0LmluZGV4T2YoJz0nKVxuICBpZiAodmFsaWRMZW4gPT09IC0xKSB2YWxpZExlbiA9IGxlblxuXG4gIHZhciBwbGFjZUhvbGRlcnNMZW4gPSB2YWxpZExlbiA9PT0gbGVuXG4gICAgPyAwXG4gICAgOiA0IC0gKHZhbGlkTGVuICUgNClcblxuICByZXR1cm4gW3ZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW5dXG59XG5cbi8vIGJhc2U2NCBpcyA0LzMgKyB1cCB0byB0d28gY2hhcmFjdGVycyBvZiB0aGUgb3JpZ2luYWwgZGF0YVxuZnVuY3Rpb24gYnl0ZUxlbmd0aCAoYjY0KSB7XG4gIHZhciBsZW5zID0gZ2V0TGVucyhiNjQpXG4gIHZhciB2YWxpZExlbiA9IGxlbnNbMF1cbiAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IGxlbnNbMV1cbiAgcmV0dXJuICgodmFsaWRMZW4gKyBwbGFjZUhvbGRlcnNMZW4pICogMyAvIDQpIC0gcGxhY2VIb2xkZXJzTGVuXG59XG5cbmZ1bmN0aW9uIF9ieXRlTGVuZ3RoIChiNjQsIHZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW4pIHtcbiAgcmV0dXJuICgodmFsaWRMZW4gKyBwbGFjZUhvbGRlcnNMZW4pICogMyAvIDQpIC0gcGxhY2VIb2xkZXJzTGVuXG59XG5cbmZ1bmN0aW9uIHRvQnl0ZUFycmF5IChiNjQpIHtcbiAgdmFyIHRtcFxuICB2YXIgbGVucyA9IGdldExlbnMoYjY0KVxuICB2YXIgdmFsaWRMZW4gPSBsZW5zWzBdXG4gIHZhciBwbGFjZUhvbGRlcnNMZW4gPSBsZW5zWzFdXG5cbiAgdmFyIGFyciA9IG5ldyBBcnIoX2J5dGVMZW5ndGgoYjY0LCB2YWxpZExlbiwgcGxhY2VIb2xkZXJzTGVuKSlcblxuICB2YXIgY3VyQnl0ZSA9IDBcblxuICAvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzXG4gIHZhciBsZW4gPSBwbGFjZUhvbGRlcnNMZW4gPiAwXG4gICAgPyB2YWxpZExlbiAtIDRcbiAgICA6IHZhbGlkTGVuXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkge1xuICAgIHRtcCA9XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxOCkgfFxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDEyKSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPDwgNikgfFxuICAgICAgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAzKV1cbiAgICBhcnJbY3VyQnl0ZSsrXSA9ICh0bXAgPj4gMTYpICYgMHhGRlxuICAgIGFycltjdXJCeXRlKytdID0gKHRtcCA+PiA4KSAmIDB4RkZcbiAgICBhcnJbY3VyQnl0ZSsrXSA9IHRtcCAmIDB4RkZcbiAgfVxuXG4gIGlmIChwbGFjZUhvbGRlcnNMZW4gPT09IDIpIHtcbiAgICB0bXAgPVxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMikgfFxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldID4+IDQpXG4gICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAweEZGXG4gIH1cblxuICBpZiAocGxhY2VIb2xkZXJzTGVuID09PSAxKSB7XG4gICAgdG1wID1cbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDEwKSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgNCkgfFxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildID4+IDIpXG4gICAgYXJyW2N1ckJ5dGUrK10gPSAodG1wID4+IDgpICYgMHhGRlxuICAgIGFycltjdXJCeXRlKytdID0gdG1wICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIGFyclxufVxuXG5mdW5jdGlvbiB0cmlwbGV0VG9CYXNlNjQgKG51bSkge1xuICByZXR1cm4gbG9va3VwW251bSA+PiAxOCAmIDB4M0ZdICtcbiAgICBsb29rdXBbbnVtID4+IDEyICYgMHgzRl0gK1xuICAgIGxvb2t1cFtudW0gPj4gNiAmIDB4M0ZdICtcbiAgICBsb29rdXBbbnVtICYgMHgzRl1cbn1cblxuZnVuY3Rpb24gZW5jb2RlQ2h1bmsgKHVpbnQ4LCBzdGFydCwgZW5kKSB7XG4gIHZhciB0bXBcbiAgdmFyIG91dHB1dCA9IFtdXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSAzKSB7XG4gICAgdG1wID1cbiAgICAgICgodWludDhbaV0gPDwgMTYpICYgMHhGRjAwMDApICtcbiAgICAgICgodWludDhbaSArIDFdIDw8IDgpICYgMHhGRjAwKSArXG4gICAgICAodWludDhbaSArIDJdICYgMHhGRilcbiAgICBvdXRwdXQucHVzaCh0cmlwbGV0VG9CYXNlNjQodG1wKSlcbiAgfVxuICByZXR1cm4gb3V0cHV0LmpvaW4oJycpXG59XG5cbmZ1bmN0aW9uIGZyb21CeXRlQXJyYXkgKHVpbnQ4KSB7XG4gIHZhciB0bXBcbiAgdmFyIGxlbiA9IHVpbnQ4Lmxlbmd0aFxuICB2YXIgZXh0cmFCeXRlcyA9IGxlbiAlIDMgLy8gaWYgd2UgaGF2ZSAxIGJ5dGUgbGVmdCwgcGFkIDIgYnl0ZXNcbiAgdmFyIHBhcnRzID0gW11cbiAgdmFyIG1heENodW5rTGVuZ3RoID0gMTYzODMgLy8gbXVzdCBiZSBtdWx0aXBsZSBvZiAzXG5cbiAgLy8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlclxuICBmb3IgKHZhciBpID0gMCwgbGVuMiA9IGxlbiAtIGV4dHJhQnl0ZXM7IGkgPCBsZW4yOyBpICs9IG1heENodW5rTGVuZ3RoKSB7XG4gICAgcGFydHMucHVzaChlbmNvZGVDaHVuayhcbiAgICAgIHVpbnQ4LCBpLCAoaSArIG1heENodW5rTGVuZ3RoKSA+IGxlbjIgPyBsZW4yIDogKGkgKyBtYXhDaHVua0xlbmd0aClcbiAgICApKVxuICB9XG5cbiAgLy8gcGFkIHRoZSBlbmQgd2l0aCB6ZXJvcywgYnV0IG1ha2Ugc3VyZSB0byBub3QgZm9yZ2V0IHRoZSBleHRyYSBieXRlc1xuICBpZiAoZXh0cmFCeXRlcyA9PT0gMSkge1xuICAgIHRtcCA9IHVpbnQ4W2xlbiAtIDFdXG4gICAgcGFydHMucHVzaChcbiAgICAgIGxvb2t1cFt0bXAgPj4gMl0gK1xuICAgICAgbG9va3VwWyh0bXAgPDwgNCkgJiAweDNGXSArXG4gICAgICAnPT0nXG4gICAgKVxuICB9IGVsc2UgaWYgKGV4dHJhQnl0ZXMgPT09IDIpIHtcbiAgICB0bXAgPSAodWludDhbbGVuIC0gMl0gPDwgOCkgKyB1aW50OFtsZW4gLSAxXVxuICAgIHBhcnRzLnB1c2goXG4gICAgICBsb29rdXBbdG1wID4+IDEwXSArXG4gICAgICBsb29rdXBbKHRtcCA+PiA0KSAmIDB4M0ZdICtcbiAgICAgIGxvb2t1cFsodG1wIDw8IDIpICYgMHgzRl0gK1xuICAgICAgJz0nXG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIHBhcnRzLmpvaW4oJycpXG59XG4iLCIvKiFcbiAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxmZXJvc3NAZmVyb3NzLm9yZz4gPGh0dHA6Ly9mZXJvc3Mub3JnPlxuICogQGxpY2Vuc2UgIE1JVFxuICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xuXG4ndXNlIHN0cmljdCdcblxudmFyIGJhc2U2NCA9IHJlcXVpcmUoJ2Jhc2U2NC1qcycpXG52YXIgaWVlZTc1NCA9IHJlcXVpcmUoJ2llZWU3NTQnKVxudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdpc2FycmF5JylcblxuZXhwb3J0cy5CdWZmZXIgPSBCdWZmZXJcbmV4cG9ydHMuU2xvd0J1ZmZlciA9IFNsb3dCdWZmZXJcbmV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVMgPSA1MFxuXG4vKipcbiAqIElmIGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGA6XG4gKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KVxuICogICA9PT0gZmFsc2UgICBVc2UgT2JqZWN0IGltcGxlbWVudGF0aW9uIChtb3N0IGNvbXBhdGlibGUsIGV2ZW4gSUU2KVxuICpcbiAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKyxcbiAqIE9wZXJhIDExLjYrLCBpT1MgNC4yKy5cbiAqXG4gKiBEdWUgdG8gdmFyaW91cyBicm93c2VyIGJ1Z3MsIHNvbWV0aW1lcyB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uIHdpbGwgYmUgdXNlZCBldmVuXG4gKiB3aGVuIHRoZSBicm93c2VyIHN1cHBvcnRzIHR5cGVkIGFycmF5cy5cbiAqXG4gKiBOb3RlOlxuICpcbiAqICAgLSBGaXJlZm94IDQtMjkgbGFja3Mgc3VwcG9ydCBmb3IgYWRkaW5nIG5ldyBwcm9wZXJ0aWVzIHRvIGBVaW50OEFycmF5YCBpbnN0YW5jZXMsXG4gKiAgICAgU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02OTU0MzguXG4gKlxuICogICAtIENocm9tZSA5LTEwIGlzIG1pc3NpbmcgdGhlIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24uXG4gKlxuICogICAtIElFMTAgaGFzIGEgYnJva2VuIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhcnJheXMgb2ZcbiAqICAgICBpbmNvcnJlY3QgbGVuZ3RoIGluIHNvbWUgc2l0dWF0aW9ucy5cblxuICogV2UgZGV0ZWN0IHRoZXNlIGJ1Z2d5IGJyb3dzZXJzIGFuZCBzZXQgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYCB0byBgZmFsc2VgIHNvIHRoZXlcbiAqIGdldCB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uLCB3aGljaCBpcyBzbG93ZXIgYnV0IGJlaGF2ZXMgY29ycmVjdGx5LlxuICovXG5CdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCA9IGdsb2JhbC5UWVBFRF9BUlJBWV9TVVBQT1JUICE9PSB1bmRlZmluZWRcbiAgPyBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVFxuICA6IHR5cGVkQXJyYXlTdXBwb3J0KClcblxuLypcbiAqIEV4cG9ydCBrTWF4TGVuZ3RoIGFmdGVyIHR5cGVkIGFycmF5IHN1cHBvcnQgaXMgZGV0ZXJtaW5lZC5cbiAqL1xuZXhwb3J0cy5rTWF4TGVuZ3RoID0ga01heExlbmd0aCgpXG5cbmZ1bmN0aW9uIHR5cGVkQXJyYXlTdXBwb3J0ICgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoMSlcbiAgICBhcnIuX19wcm90b19fID0ge19fcHJvdG9fXzogVWludDhBcnJheS5wcm90b3R5cGUsIGZvbzogZnVuY3Rpb24gKCkgeyByZXR1cm4gNDIgfX1cbiAgICByZXR1cm4gYXJyLmZvbygpID09PSA0MiAmJiAvLyB0eXBlZCBhcnJheSBpbnN0YW5jZXMgY2FuIGJlIGF1Z21lbnRlZFxuICAgICAgICB0eXBlb2YgYXJyLnN1YmFycmF5ID09PSAnZnVuY3Rpb24nICYmIC8vIGNocm9tZSA5LTEwIGxhY2sgYHN1YmFycmF5YFxuICAgICAgICBhcnIuc3ViYXJyYXkoMSwgMSkuYnl0ZUxlbmd0aCA9PT0gMCAvLyBpZTEwIGhhcyBicm9rZW4gYHN1YmFycmF5YFxuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuZnVuY3Rpb24ga01heExlbmd0aCAoKSB7XG4gIHJldHVybiBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVFxuICAgID8gMHg3ZmZmZmZmZlxuICAgIDogMHgzZmZmZmZmZlxufVxuXG5mdW5jdGlvbiBjcmVhdGVCdWZmZXIgKHRoYXQsIGxlbmd0aCkge1xuICBpZiAoa01heExlbmd0aCgpIDwgbGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgdHlwZWQgYXJyYXkgbGVuZ3RoJylcbiAgfVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2VcbiAgICB0aGF0ID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKVxuICAgIHRoYXQuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICB9IGVsc2Uge1xuICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3NcbiAgICBpZiAodGhhdCA9PT0gbnVsbCkge1xuICAgICAgdGhhdCA9IG5ldyBCdWZmZXIobGVuZ3RoKVxuICAgIH1cbiAgICB0aGF0Lmxlbmd0aCA9IGxlbmd0aFxuICB9XG5cbiAgcmV0dXJuIHRoYXRcbn1cblxuLyoqXG4gKiBUaGUgQnVmZmVyIGNvbnN0cnVjdG9yIHJldHVybnMgaW5zdGFuY2VzIG9mIGBVaW50OEFycmF5YCB0aGF0IGhhdmUgdGhlaXJcbiAqIHByb3RvdHlwZSBjaGFuZ2VkIHRvIGBCdWZmZXIucHJvdG90eXBlYC4gRnVydGhlcm1vcmUsIGBCdWZmZXJgIGlzIGEgc3ViY2xhc3Mgb2ZcbiAqIGBVaW50OEFycmF5YCwgc28gdGhlIHJldHVybmVkIGluc3RhbmNlcyB3aWxsIGhhdmUgYWxsIHRoZSBub2RlIGBCdWZmZXJgIG1ldGhvZHNcbiAqIGFuZCB0aGUgYFVpbnQ4QXJyYXlgIG1ldGhvZHMuIFNxdWFyZSBicmFja2V0IG5vdGF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkIC0tIGl0XG4gKiByZXR1cm5zIGEgc2luZ2xlIG9jdGV0LlxuICpcbiAqIFRoZSBgVWludDhBcnJheWAgcHJvdG90eXBlIHJlbWFpbnMgdW5tb2RpZmllZC5cbiAqL1xuXG5mdW5jdGlvbiBCdWZmZXIgKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiYgISh0aGlzIGluc3RhbmNlb2YgQnVmZmVyKSkge1xuICAgIHJldHVybiBuZXcgQnVmZmVyKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxuICB9XG5cbiAgLy8gQ29tbW9uIGNhc2UuXG4gIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykge1xuICAgIGlmICh0eXBlb2YgZW5jb2RpbmdPck9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ0lmIGVuY29kaW5nIGlzIHNwZWNpZmllZCB0aGVuIHRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nJ1xuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gYWxsb2NVbnNhZmUodGhpcywgYXJnKVxuICB9XG4gIHJldHVybiBmcm9tKHRoaXMsIGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufVxuXG5CdWZmZXIucG9vbFNpemUgPSA4MTkyIC8vIG5vdCB1c2VkIGJ5IHRoaXMgaW1wbGVtZW50YXRpb25cblxuLy8gVE9ETzogTGVnYWN5LCBub3QgbmVlZGVkIGFueW1vcmUuIFJlbW92ZSBpbiBuZXh0IG1ham9yIHZlcnNpb24uXG5CdWZmZXIuX2F1Z21lbnQgPSBmdW5jdGlvbiAoYXJyKSB7XG4gIGFyci5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIHJldHVybiBhcnJcbn1cblxuZnVuY3Rpb24gZnJvbSAodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1widmFsdWVcIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBhIG51bWJlcicpXG4gIH1cblxuICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgcmV0dXJuIGZyb21BcnJheUJ1ZmZlcih0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxuICB9XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZnJvbVN0cmluZyh0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldClcbiAgfVxuXG4gIHJldHVybiBmcm9tT2JqZWN0KHRoYXQsIHZhbHVlKVxufVxuXG4vKipcbiAqIEZ1bmN0aW9uYWxseSBlcXVpdmFsZW50IHRvIEJ1ZmZlcihhcmcsIGVuY29kaW5nKSBidXQgdGhyb3dzIGEgVHlwZUVycm9yXG4gKiBpZiB2YWx1ZSBpcyBhIG51bWJlci5cbiAqIEJ1ZmZlci5mcm9tKHN0clssIGVuY29kaW5nXSlcbiAqIEJ1ZmZlci5mcm9tKGFycmF5KVxuICogQnVmZmVyLmZyb20oYnVmZmVyKVxuICogQnVmZmVyLmZyb20oYXJyYXlCdWZmZXJbLCBieXRlT2Zmc2V0WywgbGVuZ3RoXV0pXG4gKiovXG5CdWZmZXIuZnJvbSA9IGZ1bmN0aW9uICh2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBmcm9tKG51bGwsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG59XG5cbmlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICBCdWZmZXIucHJvdG90eXBlLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXkucHJvdG90eXBlXG4gIEJ1ZmZlci5fX3Byb3RvX18gPSBVaW50OEFycmF5XG4gIGlmICh0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wuc3BlY2llcyAmJlxuICAgICAgQnVmZmVyW1N5bWJvbC5zcGVjaWVzXSA9PT0gQnVmZmVyKSB7XG4gICAgLy8gRml4IHN1YmFycmF5KCkgaW4gRVMyMDE2LiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL3B1bGwvOTdcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyLCBTeW1ib2wuc3BlY2llcywge1xuICAgICAgdmFsdWU6IG51bGwsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KVxuICB9XG59XG5cbmZ1bmN0aW9uIGFzc2VydFNpemUgKHNpemUpIHtcbiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wic2l6ZVwiIGFyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKVxuICB9IGVsc2UgaWYgKHNpemUgPCAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1wic2l6ZVwiIGFyZ3VtZW50IG11c3Qgbm90IGJlIG5lZ2F0aXZlJylcbiAgfVxufVxuXG5mdW5jdGlvbiBhbGxvYyAodGhhdCwgc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHtcbiAgYXNzZXJ0U2l6ZShzaXplKVxuICBpZiAoc2l6ZSA8PSAwKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKVxuICB9XG4gIGlmIChmaWxsICE9PSB1bmRlZmluZWQpIHtcbiAgICAvLyBPbmx5IHBheSBhdHRlbnRpb24gdG8gZW5jb2RpbmcgaWYgaXQncyBhIHN0cmluZy4gVGhpc1xuICAgIC8vIHByZXZlbnRzIGFjY2lkZW50YWxseSBzZW5kaW5nIGluIGEgbnVtYmVyIHRoYXQgd291bGRcbiAgICAvLyBiZSBpbnRlcnByZXR0ZWQgYXMgYSBzdGFydCBvZmZzZXQuXG4gICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZydcbiAgICAgID8gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpLmZpbGwoZmlsbCwgZW5jb2RpbmcpXG4gICAgICA6IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKS5maWxsKGZpbGwpXG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqIGFsbG9jKHNpemVbLCBmaWxsWywgZW5jb2RpbmddXSlcbiAqKi9cbkJ1ZmZlci5hbGxvYyA9IGZ1bmN0aW9uIChzaXplLCBmaWxsLCBlbmNvZGluZykge1xuICByZXR1cm4gYWxsb2MobnVsbCwgc2l6ZSwgZmlsbCwgZW5jb2RpbmcpXG59XG5cbmZ1bmN0aW9uIGFsbG9jVW5zYWZlICh0aGF0LCBzaXplKSB7XG4gIGFzc2VydFNpemUoc2l6ZSlcbiAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplIDwgMCA/IDAgOiBjaGVja2VkKHNpemUpIHwgMClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgKytpKSB7XG4gICAgICB0aGF0W2ldID0gMFxuICAgIH1cbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gQnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG4gKiAqL1xuQnVmZmVyLmFsbG9jVW5zYWZlID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgcmV0dXJuIGFsbG9jVW5zYWZlKG51bGwsIHNpemUpXG59XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gU2xvd0J1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuICovXG5CdWZmZXIuYWxsb2NVbnNhZmVTbG93ID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgcmV0dXJuIGFsbG9jVW5zYWZlKG51bGwsIHNpemUpXG59XG5cbmZ1bmN0aW9uIGZyb21TdHJpbmcgKHRoYXQsIHN0cmluZywgZW5jb2RpbmcpIHtcbiAgaWYgKHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycgfHwgZW5jb2RpbmcgPT09ICcnKSB7XG4gICAgZW5jb2RpbmcgPSAndXRmOCdcbiAgfVxuXG4gIGlmICghQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJlbmNvZGluZ1wiIG11c3QgYmUgYSB2YWxpZCBzdHJpbmcgZW5jb2RpbmcnKVxuICB9XG5cbiAgdmFyIGxlbmd0aCA9IGJ5dGVMZW5ndGgoc3RyaW5nLCBlbmNvZGluZykgfCAwXG4gIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuZ3RoKVxuXG4gIHZhciBhY3R1YWwgPSB0aGF0LndyaXRlKHN0cmluZywgZW5jb2RpbmcpXG5cbiAgaWYgKGFjdHVhbCAhPT0gbGVuZ3RoKSB7XG4gICAgLy8gV3JpdGluZyBhIGhleCBzdHJpbmcsIGZvciBleGFtcGxlLCB0aGF0IGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVycyB3aWxsXG4gICAgLy8gY2F1c2UgZXZlcnl0aGluZyBhZnRlciB0aGUgZmlyc3QgaW52YWxpZCBjaGFyYWN0ZXIgdG8gYmUgaWdub3JlZC4gKGUuZy5cbiAgICAvLyAnYWJ4eGNkJyB3aWxsIGJlIHRyZWF0ZWQgYXMgJ2FiJylcbiAgICB0aGF0ID0gdGhhdC5zbGljZSgwLCBhY3R1YWwpXG4gIH1cblxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tQXJyYXlMaWtlICh0aGF0LCBhcnJheSkge1xuICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoIDwgMCA/IDAgOiBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG4gIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuZ3RoKVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5QnVmZmVyICh0aGF0LCBhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKSB7XG4gIGFycmF5LmJ5dGVMZW5ndGggLy8gdGhpcyB0aHJvd3MgaWYgYGFycmF5YCBpcyBub3QgYSB2YWxpZCBBcnJheUJ1ZmZlclxuXG4gIGlmIChieXRlT2Zmc2V0IDwgMCB8fCBhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcXCdvZmZzZXRcXCcgaXMgb3V0IG9mIGJvdW5kcycpXG4gIH1cblxuICBpZiAoYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQgKyAobGVuZ3RoIHx8IDApKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1xcJ2xlbmd0aFxcJyBpcyBvdXQgb2YgYm91bmRzJylcbiAgfVxuXG4gIGlmIChieXRlT2Zmc2V0ID09PSB1bmRlZmluZWQgJiYgbGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5KVxuICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldClcbiAgfSBlbHNlIHtcbiAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpXG4gIH1cblxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2VcbiAgICB0aGF0ID0gYXJyYXlcbiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgfSBlbHNlIHtcbiAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXG4gICAgdGhhdCA9IGZyb21BcnJheUxpa2UodGhhdCwgYXJyYXkpXG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbU9iamVjdCAodGhhdCwgb2JqKSB7XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIob2JqKSkge1xuICAgIHZhciBsZW4gPSBjaGVja2VkKG9iai5sZW5ndGgpIHwgMFxuICAgIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuKVxuXG4gICAgaWYgKHRoYXQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhhdFxuICAgIH1cblxuICAgIG9iai5jb3B5KHRoYXQsIDAsIDAsIGxlbilcbiAgICByZXR1cm4gdGhhdFxuICB9XG5cbiAgaWYgKG9iaikge1xuICAgIGlmICgodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICBvYmouYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHx8ICdsZW5ndGgnIGluIG9iaikge1xuICAgICAgaWYgKHR5cGVvZiBvYmoubGVuZ3RoICE9PSAnbnVtYmVyJyB8fCBpc25hbihvYmoubGVuZ3RoKSkge1xuICAgICAgICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIDApXG4gICAgICB9XG4gICAgICByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmopXG4gICAgfVxuXG4gICAgaWYgKG9iai50eXBlID09PSAnQnVmZmVyJyAmJiBpc0FycmF5KG9iai5kYXRhKSkge1xuICAgICAgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqLmRhdGEpXG4gICAgfVxuICB9XG5cbiAgdGhyb3cgbmV3IFR5cGVFcnJvcignRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksIG9yIGFycmF5LWxpa2Ugb2JqZWN0LicpXG59XG5cbmZ1bmN0aW9uIGNoZWNrZWQgKGxlbmd0aCkge1xuICAvLyBOb3RlOiBjYW5ub3QgdXNlIGBsZW5ndGggPCBrTWF4TGVuZ3RoKClgIGhlcmUgYmVjYXVzZSB0aGF0IGZhaWxzIHdoZW5cbiAgLy8gbGVuZ3RoIGlzIE5hTiAod2hpY2ggaXMgb3RoZXJ3aXNlIGNvZXJjZWQgdG8gemVyby4pXG4gIGlmIChsZW5ndGggPj0ga01heExlbmd0aCgpKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemU6IDB4JyArIGtNYXhMZW5ndGgoKS50b1N0cmluZygxNikgKyAnIGJ5dGVzJylcbiAgfVxuICByZXR1cm4gbGVuZ3RoIHwgMFxufVxuXG5mdW5jdGlvbiBTbG93QnVmZmVyIChsZW5ndGgpIHtcbiAgaWYgKCtsZW5ndGggIT0gbGVuZ3RoKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZXFlcWVxXG4gICAgbGVuZ3RoID0gMFxuICB9XG4gIHJldHVybiBCdWZmZXIuYWxsb2MoK2xlbmd0aClcbn1cblxuQnVmZmVyLmlzQnVmZmVyID0gZnVuY3Rpb24gaXNCdWZmZXIgKGIpIHtcbiAgcmV0dXJuICEhKGIgIT0gbnVsbCAmJiBiLl9pc0J1ZmZlcilcbn1cblxuQnVmZmVyLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlIChhLCBiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgbXVzdCBiZSBCdWZmZXJzJylcbiAgfVxuXG4gIGlmIChhID09PSBiKSByZXR1cm4gMFxuXG4gIHZhciB4ID0gYS5sZW5ndGhcbiAgdmFyIHkgPSBiLmxlbmd0aFxuXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBNYXRoLm1pbih4LCB5KTsgaSA8IGxlbjsgKytpKSB7XG4gICAgaWYgKGFbaV0gIT09IGJbaV0pIHtcbiAgICAgIHggPSBhW2ldXG4gICAgICB5ID0gYltpXVxuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBpZiAoeCA8IHkpIHJldHVybiAtMVxuICBpZiAoeSA8IHgpIHJldHVybiAxXG4gIHJldHVybiAwXG59XG5cbkJ1ZmZlci5pc0VuY29kaW5nID0gZnVuY3Rpb24gaXNFbmNvZGluZyAoZW5jb2RpbmcpIHtcbiAgc3dpdGNoIChTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCkpIHtcbiAgICBjYXNlICdoZXgnOlxuICAgIGNhc2UgJ3V0ZjgnOlxuICAgIGNhc2UgJ3V0Zi04JzpcbiAgICBjYXNlICdhc2NpaSc6XG4gICAgY2FzZSAnbGF0aW4xJzpcbiAgICBjYXNlICdiaW5hcnknOlxuICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgY2FzZSAndWNzMic6XG4gICAgY2FzZSAndWNzLTInOlxuICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgIHJldHVybiB0cnVlXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbkJ1ZmZlci5jb25jYXQgPSBmdW5jdGlvbiBjb25jYXQgKGxpc3QsIGxlbmd0aCkge1xuICBpZiAoIWlzQXJyYXkobGlzdCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKVxuICB9XG5cbiAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIEJ1ZmZlci5hbGxvYygwKVxuICB9XG5cbiAgdmFyIGlcbiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbGVuZ3RoID0gMFxuICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgICBsZW5ndGggKz0gbGlzdFtpXS5sZW5ndGhcbiAgICB9XG4gIH1cblxuICB2YXIgYnVmZmVyID0gQnVmZmVyLmFsbG9jVW5zYWZlKGxlbmd0aClcbiAgdmFyIHBvcyA9IDBcbiAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgYnVmID0gbGlzdFtpXVxuICAgIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpXG4gICAgfVxuICAgIGJ1Zi5jb3B5KGJ1ZmZlciwgcG9zKVxuICAgIHBvcyArPSBidWYubGVuZ3RoXG4gIH1cbiAgcmV0dXJuIGJ1ZmZlclxufVxuXG5mdW5jdGlvbiBieXRlTGVuZ3RoIChzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIoc3RyaW5nKSkge1xuICAgIHJldHVybiBzdHJpbmcubGVuZ3RoXG4gIH1cbiAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldyA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgKEFycmF5QnVmZmVyLmlzVmlldyhzdHJpbmcpIHx8IHN0cmluZyBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSkge1xuICAgIHJldHVybiBzdHJpbmcuYnl0ZUxlbmd0aFxuICB9XG4gIGlmICh0eXBlb2Ygc3RyaW5nICE9PSAnc3RyaW5nJykge1xuICAgIHN0cmluZyA9ICcnICsgc3RyaW5nXG4gIH1cblxuICB2YXIgbGVuID0gc3RyaW5nLmxlbmd0aFxuICBpZiAobGVuID09PSAwKSByZXR1cm4gMFxuXG4gIC8vIFVzZSBhIGZvciBsb29wIHRvIGF2b2lkIHJlY3Vyc2lvblxuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuICBmb3IgKDs7KSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgY2FzZSAnbGF0aW4xJzpcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBsZW5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgY2FzZSB1bmRlZmluZWQ6XG4gICAgICAgIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIGxlbiAqIDJcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBsZW4gPj4+IDFcbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRUb0J5dGVzKHN0cmluZykubGVuZ3RoXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aCAvLyBhc3N1bWUgdXRmOFxuICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuQnVmZmVyLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoXG5cbmZ1bmN0aW9uIHNsb3dUb1N0cmluZyAoZW5jb2RpbmcsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcblxuICAvLyBObyBuZWVkIHRvIHZlcmlmeSB0aGF0IFwidGhpcy5sZW5ndGggPD0gTUFYX1VJTlQzMlwiIHNpbmNlIGl0J3MgYSByZWFkLW9ubHlcbiAgLy8gcHJvcGVydHkgb2YgYSB0eXBlZCBhcnJheS5cblxuICAvLyBUaGlzIGJlaGF2ZXMgbmVpdGhlciBsaWtlIFN0cmluZyBub3IgVWludDhBcnJheSBpbiB0aGF0IHdlIHNldCBzdGFydC9lbmRcbiAgLy8gdG8gdGhlaXIgdXBwZXIvbG93ZXIgYm91bmRzIGlmIHRoZSB2YWx1ZSBwYXNzZWQgaXMgb3V0IG9mIHJhbmdlLlxuICAvLyB1bmRlZmluZWQgaXMgaGFuZGxlZCBzcGVjaWFsbHkgYXMgcGVyIEVDTUEtMjYyIDZ0aCBFZGl0aW9uLFxuICAvLyBTZWN0aW9uIDEzLjMuMy43IFJ1bnRpbWUgU2VtYW50aWNzOiBLZXllZEJpbmRpbmdJbml0aWFsaXphdGlvbi5cbiAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQgfHwgc3RhcnQgPCAwKSB7XG4gICAgc3RhcnQgPSAwXG4gIH1cbiAgLy8gUmV0dXJuIGVhcmx5IGlmIHN0YXJ0ID4gdGhpcy5sZW5ndGguIERvbmUgaGVyZSB0byBwcmV2ZW50IHBvdGVudGlhbCB1aW50MzJcbiAgLy8gY29lcmNpb24gZmFpbCBiZWxvdy5cbiAgaWYgKHN0YXJ0ID4gdGhpcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIGlmIChlbmQgPT09IHVuZGVmaW5lZCB8fCBlbmQgPiB0aGlzLmxlbmd0aCkge1xuICAgIGVuZCA9IHRoaXMubGVuZ3RoXG4gIH1cblxuICBpZiAoZW5kIDw9IDApIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIC8vIEZvcmNlIGNvZXJzaW9uIHRvIHVpbnQzMi4gVGhpcyB3aWxsIGFsc28gY29lcmNlIGZhbHNleS9OYU4gdmFsdWVzIHRvIDAuXG4gIGVuZCA+Pj49IDBcbiAgc3RhcnQgPj4+PSAwXG5cbiAgaWYgKGVuZCA8PSBzdGFydCkge1xuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCdcblxuICB3aGlsZSAodHJ1ZSkge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICAgIHJldHVybiBhc2NpaVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGF0aW4xU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgcmV0dXJuIGJhc2U2NFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiB1dGYxNmxlU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgICAgIGVuY29kaW5nID0gKGVuY29kaW5nICsgJycpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5cbi8vIFRoZSBwcm9wZXJ0eSBpcyB1c2VkIGJ5IGBCdWZmZXIuaXNCdWZmZXJgIGFuZCBgaXMtYnVmZmVyYCAoaW4gU2FmYXJpIDUtNykgdG8gZGV0ZWN0XG4vLyBCdWZmZXIgaW5zdGFuY2VzLlxuQnVmZmVyLnByb3RvdHlwZS5faXNCdWZmZXIgPSB0cnVlXG5cbmZ1bmN0aW9uIHN3YXAgKGIsIG4sIG0pIHtcbiAgdmFyIGkgPSBiW25dXG4gIGJbbl0gPSBiW21dXG4gIGJbbV0gPSBpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc3dhcDE2ID0gZnVuY3Rpb24gc3dhcDE2ICgpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSAyICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAxNi1iaXRzJylcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgMSlcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXAzMiA9IGZ1bmN0aW9uIHN3YXAzMiAoKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBpZiAobGVuICUgNCAhPT0gMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMzItYml0cycpXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkge1xuICAgIHN3YXAodGhpcywgaSwgaSArIDMpXG4gICAgc3dhcCh0aGlzLCBpICsgMSwgaSArIDIpXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zd2FwNjQgPSBmdW5jdGlvbiBzd2FwNjQgKCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgaWYgKGxlbiAlIDggIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDY0LWJpdHMnKVxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDgpIHtcbiAgICBzd2FwKHRoaXMsIGksIGkgKyA3KVxuICAgIHN3YXAodGhpcywgaSArIDEsIGkgKyA2KVxuICAgIHN3YXAodGhpcywgaSArIDIsIGkgKyA1KVxuICAgIHN3YXAodGhpcywgaSArIDMsIGkgKyA0KVxuICB9XG4gIHJldHVybiB0aGlzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyAoKSB7XG4gIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCB8IDBcbiAgaWYgKGxlbmd0aCA9PT0gMCkgcmV0dXJuICcnXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIDAsIGxlbmd0aClcbiAgcmV0dXJuIHNsb3dUb1N0cmluZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzIChiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJylcbiAgaWYgKHRoaXMgPT09IGIpIHJldHVybiB0cnVlXG4gIHJldHVybiBCdWZmZXIuY29tcGFyZSh0aGlzLCBiKSA9PT0gMFxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0ICgpIHtcbiAgdmFyIHN0ciA9ICcnXG4gIHZhciBtYXggPSBleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTXG4gIGlmICh0aGlzLmxlbmd0aCA+IDApIHtcbiAgICBzdHIgPSB0aGlzLnRvU3RyaW5nKCdoZXgnLCAwLCBtYXgpLm1hdGNoKC8uezJ9L2cpLmpvaW4oJyAnKVxuICAgIGlmICh0aGlzLmxlbmd0aCA+IG1heCkgc3RyICs9ICcgLi4uICdcbiAgfVxuICByZXR1cm4gJzxCdWZmZXIgJyArIHN0ciArICc+J1xufVxuXG5CdWZmZXIucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlICh0YXJnZXQsIHN0YXJ0LCBlbmQsIHRoaXNTdGFydCwgdGhpc0VuZCkge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcih0YXJnZXQpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG4gIH1cblxuICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHN0YXJ0ID0gMFxuICB9XG4gIGlmIChlbmQgPT09IHVuZGVmaW5lZCkge1xuICAgIGVuZCA9IHRhcmdldCA/IHRhcmdldC5sZW5ndGggOiAwXG4gIH1cbiAgaWYgKHRoaXNTdGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpc1N0YXJ0ID0gMFxuICB9XG4gIGlmICh0aGlzRW5kID09PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzRW5kID0gdGhpcy5sZW5ndGhcbiAgfVxuXG4gIGlmIChzdGFydCA8IDAgfHwgZW5kID4gdGFyZ2V0Lmxlbmd0aCB8fCB0aGlzU3RhcnQgPCAwIHx8IHRoaXNFbmQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdvdXQgb2YgcmFuZ2UgaW5kZXgnKVxuICB9XG5cbiAgaWYgKHRoaXNTdGFydCA+PSB0aGlzRW5kICYmIHN0YXJ0ID49IGVuZCkge1xuICAgIHJldHVybiAwXG4gIH1cbiAgaWYgKHRoaXNTdGFydCA+PSB0aGlzRW5kKSB7XG4gICAgcmV0dXJuIC0xXG4gIH1cbiAgaWYgKHN0YXJ0ID49IGVuZCkge1xuICAgIHJldHVybiAxXG4gIH1cblxuICBzdGFydCA+Pj49IDBcbiAgZW5kID4+Pj0gMFxuICB0aGlzU3RhcnQgPj4+PSAwXG4gIHRoaXNFbmQgPj4+PSAwXG5cbiAgaWYgKHRoaXMgPT09IHRhcmdldCkgcmV0dXJuIDBcblxuICB2YXIgeCA9IHRoaXNFbmQgLSB0aGlzU3RhcnRcbiAgdmFyIHkgPSBlbmQgLSBzdGFydFxuICB2YXIgbGVuID0gTWF0aC5taW4oeCwgeSlcblxuICB2YXIgdGhpc0NvcHkgPSB0aGlzLnNsaWNlKHRoaXNTdGFydCwgdGhpc0VuZClcbiAgdmFyIHRhcmdldENvcHkgPSB0YXJnZXQuc2xpY2Uoc3RhcnQsIGVuZClcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgaWYgKHRoaXNDb3B5W2ldICE9PSB0YXJnZXRDb3B5W2ldKSB7XG4gICAgICB4ID0gdGhpc0NvcHlbaV1cbiAgICAgIHkgPSB0YXJnZXRDb3B5W2ldXG4gICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIGlmICh4IDwgeSkgcmV0dXJuIC0xXG4gIGlmICh5IDwgeCkgcmV0dXJuIDFcbiAgcmV0dXJuIDBcbn1cblxuLy8gRmluZHMgZWl0aGVyIHRoZSBmaXJzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPj0gYGJ5dGVPZmZzZXRgLFxuLy8gT1IgdGhlIGxhc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0IDw9IGBieXRlT2Zmc2V0YC5cbi8vXG4vLyBBcmd1bWVudHM6XG4vLyAtIGJ1ZmZlciAtIGEgQnVmZmVyIHRvIHNlYXJjaFxuLy8gLSB2YWwgLSBhIHN0cmluZywgQnVmZmVyLCBvciBudW1iZXJcbi8vIC0gYnl0ZU9mZnNldCAtIGFuIGluZGV4IGludG8gYGJ1ZmZlcmA7IHdpbGwgYmUgY2xhbXBlZCB0byBhbiBpbnQzMlxuLy8gLSBlbmNvZGluZyAtIGFuIG9wdGlvbmFsIGVuY29kaW5nLCByZWxldmFudCBpcyB2YWwgaXMgYSBzdHJpbmdcbi8vIC0gZGlyIC0gdHJ1ZSBmb3IgaW5kZXhPZiwgZmFsc2UgZm9yIGxhc3RJbmRleE9mXG5mdW5jdGlvbiBiaWRpcmVjdGlvbmFsSW5kZXhPZiAoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcbiAgLy8gRW1wdHkgYnVmZmVyIG1lYW5zIG5vIG1hdGNoXG4gIGlmIChidWZmZXIubGVuZ3RoID09PSAwKSByZXR1cm4gLTFcblxuICAvLyBOb3JtYWxpemUgYnl0ZU9mZnNldFxuICBpZiAodHlwZW9mIGJ5dGVPZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgZW5jb2RpbmcgPSBieXRlT2Zmc2V0XG4gICAgYnl0ZU9mZnNldCA9IDBcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0ID4gMHg3ZmZmZmZmZikge1xuICAgIGJ5dGVPZmZzZXQgPSAweDdmZmZmZmZmXG4gIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA8IC0weDgwMDAwMDAwKSB7XG4gICAgYnl0ZU9mZnNldCA9IC0weDgwMDAwMDAwXG4gIH1cbiAgYnl0ZU9mZnNldCA9ICtieXRlT2Zmc2V0ICAvLyBDb2VyY2UgdG8gTnVtYmVyLlxuICBpZiAoaXNOYU4oYnl0ZU9mZnNldCkpIHtcbiAgICAvLyBieXRlT2Zmc2V0OiBpdCBpdCdzIHVuZGVmaW5lZCwgbnVsbCwgTmFOLCBcImZvb1wiLCBldGMsIHNlYXJjaCB3aG9sZSBidWZmZXJcbiAgICBieXRlT2Zmc2V0ID0gZGlyID8gMCA6IChidWZmZXIubGVuZ3RoIC0gMSlcbiAgfVxuXG4gIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0OiBuZWdhdGl2ZSBvZmZzZXRzIHN0YXJ0IGZyb20gdGhlIGVuZCBvZiB0aGUgYnVmZmVyXG4gIGlmIChieXRlT2Zmc2V0IDwgMCkgYnl0ZU9mZnNldCA9IGJ1ZmZlci5sZW5ndGggKyBieXRlT2Zmc2V0XG4gIGlmIChieXRlT2Zmc2V0ID49IGJ1ZmZlci5sZW5ndGgpIHtcbiAgICBpZiAoZGlyKSByZXR1cm4gLTFcbiAgICBlbHNlIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoIC0gMVxuICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAwKSB7XG4gICAgaWYgKGRpcikgYnl0ZU9mZnNldCA9IDBcbiAgICBlbHNlIHJldHVybiAtMVxuICB9XG5cbiAgLy8gTm9ybWFsaXplIHZhbFxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICB2YWwgPSBCdWZmZXIuZnJvbSh2YWwsIGVuY29kaW5nKVxuICB9XG5cbiAgLy8gRmluYWxseSwgc2VhcmNoIGVpdGhlciBpbmRleE9mIChpZiBkaXIgaXMgdHJ1ZSkgb3IgbGFzdEluZGV4T2ZcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcih2YWwpKSB7XG4gICAgLy8gU3BlY2lhbCBjYXNlOiBsb29raW5nIGZvciBlbXB0eSBzdHJpbmcvYnVmZmVyIGFsd2F5cyBmYWlsc1xuICAgIGlmICh2YWwubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gLTFcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5SW5kZXhPZihidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcilcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIHZhbCA9IHZhbCAmIDB4RkYgLy8gU2VhcmNoIGZvciBhIGJ5dGUgdmFsdWUgWzAtMjU1XVxuICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJlxuICAgICAgICB0eXBlb2YgVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgaWYgKGRpcikge1xuICAgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCBbIHZhbCBdLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKVxuICB9XG5cbiAgdGhyb3cgbmV3IFR5cGVFcnJvcigndmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyJylcbn1cblxuZnVuY3Rpb24gYXJyYXlJbmRleE9mIChhcnIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcikge1xuICB2YXIgaW5kZXhTaXplID0gMVxuICB2YXIgYXJyTGVuZ3RoID0gYXJyLmxlbmd0aFxuICB2YXIgdmFsTGVuZ3RoID0gdmFsLmxlbmd0aFxuXG4gIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZW5jb2RpbmcgPSBTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICBpZiAoZW5jb2RpbmcgPT09ICd1Y3MyJyB8fCBlbmNvZGluZyA9PT0gJ3Vjcy0yJyB8fFxuICAgICAgICBlbmNvZGluZyA9PT0gJ3V0ZjE2bGUnIHx8IGVuY29kaW5nID09PSAndXRmLTE2bGUnKSB7XG4gICAgICBpZiAoYXJyLmxlbmd0aCA8IDIgfHwgdmFsLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgcmV0dXJuIC0xXG4gICAgICB9XG4gICAgICBpbmRleFNpemUgPSAyXG4gICAgICBhcnJMZW5ndGggLz0gMlxuICAgICAgdmFsTGVuZ3RoIC89IDJcbiAgICAgIGJ5dGVPZmZzZXQgLz0gMlxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWQgKGJ1ZiwgaSkge1xuICAgIGlmIChpbmRleFNpemUgPT09IDEpIHtcbiAgICAgIHJldHVybiBidWZbaV1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGJ1Zi5yZWFkVUludDE2QkUoaSAqIGluZGV4U2l6ZSlcbiAgICB9XG4gIH1cblxuICB2YXIgaVxuICBpZiAoZGlyKSB7XG4gICAgdmFyIGZvdW5kSW5kZXggPSAtMVxuICAgIGZvciAoaSA9IGJ5dGVPZmZzZXQ7IGkgPCBhcnJMZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHJlYWQoYXJyLCBpKSA9PT0gcmVhZCh2YWwsIGZvdW5kSW5kZXggPT09IC0xID8gMCA6IGkgLSBmb3VuZEluZGV4KSkge1xuICAgICAgICBpZiAoZm91bmRJbmRleCA9PT0gLTEpIGZvdW5kSW5kZXggPSBpXG4gICAgICAgIGlmIChpIC0gZm91bmRJbmRleCArIDEgPT09IHZhbExlbmd0aCkgcmV0dXJuIGZvdW5kSW5kZXggKiBpbmRleFNpemVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChmb3VuZEluZGV4ICE9PSAtMSkgaSAtPSBpIC0gZm91bmRJbmRleFxuICAgICAgICBmb3VuZEluZGV4ID0gLTFcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGJ5dGVPZmZzZXQgKyB2YWxMZW5ndGggPiBhcnJMZW5ndGgpIGJ5dGVPZmZzZXQgPSBhcnJMZW5ndGggLSB2YWxMZW5ndGhcbiAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpID49IDA7IGktLSkge1xuICAgICAgdmFyIGZvdW5kID0gdHJ1ZVxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2YWxMZW5ndGg7IGorKykge1xuICAgICAgICBpZiAocmVhZChhcnIsIGkgKyBqKSAhPT0gcmVhZCh2YWwsIGopKSB7XG4gICAgICAgICAgZm91bmQgPSBmYWxzZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChmb3VuZCkgcmV0dXJuIGlcbiAgICB9XG4gIH1cblxuICByZXR1cm4gLTFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uIGluY2x1ZGVzICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiB0aGlzLmluZGV4T2YodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgIT09IC0xXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIHRydWUpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUubGFzdEluZGV4T2YgPSBmdW5jdGlvbiBsYXN0SW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuICByZXR1cm4gYmlkaXJlY3Rpb25hbEluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZmFsc2UpXG59XG5cbmZ1bmN0aW9uIGhleFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMFxuICB2YXIgcmVtYWluaW5nID0gYnVmLmxlbmd0aCAtIG9mZnNldFxuICBpZiAoIWxlbmd0aCkge1xuICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICB9IGVsc2Uge1xuICAgIGxlbmd0aCA9IE51bWJlcihsZW5ndGgpXG4gICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykge1xuICAgICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gICAgfVxuICB9XG5cbiAgLy8gbXVzdCBiZSBhbiBldmVuIG51bWJlciBvZiBkaWdpdHNcbiAgdmFyIHN0ckxlbiA9IHN0cmluZy5sZW5ndGhcbiAgaWYgKHN0ckxlbiAlIDIgIT09IDApIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgaGV4IHN0cmluZycpXG5cbiAgaWYgKGxlbmd0aCA+IHN0ckxlbiAvIDIpIHtcbiAgICBsZW5ndGggPSBzdHJMZW4gLyAyXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIHZhciBwYXJzZWQgPSBwYXJzZUludChzdHJpbmcuc3Vic3RyKGkgKiAyLCAyKSwgMTYpXG4gICAgaWYgKGlzTmFOKHBhcnNlZCkpIHJldHVybiBpXG4gICAgYnVmW29mZnNldCArIGldID0gcGFyc2VkXG4gIH1cbiAgcmV0dXJuIGlcbn1cblxuZnVuY3Rpb24gdXRmOFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmOFRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYXNjaWlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBsYXRpbjFXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBhc2NpaVdyaXRlKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYmFzZTY0V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcihiYXNlNjRUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIHVjczJXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjE2bGVUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiB3cml0ZSAoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHtcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZylcbiAgaWYgKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZW5jb2RpbmcgPSAndXRmOCdcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgZW5jb2RpbmcpXG4gIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICBlbmNvZGluZyA9IG9mZnNldFxuICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG4gICAgb2Zmc2V0ID0gMFxuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBvZmZzZXRbLCBsZW5ndGhdWywgZW5jb2RpbmddKVxuICB9IGVsc2UgaWYgKGlzRmluaXRlKG9mZnNldCkpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHtcbiAgICAgIGxlbmd0aCA9IGxlbmd0aCB8IDBcbiAgICAgIGlmIChlbmNvZGluZyA9PT0gdW5kZWZpbmVkKSBlbmNvZGluZyA9ICd1dGY4J1xuICAgIH0gZWxzZSB7XG4gICAgICBlbmNvZGluZyA9IGxlbmd0aFxuICAgICAgbGVuZ3RoID0gdW5kZWZpbmVkXG4gICAgfVxuICAvLyBsZWdhY3kgd3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0LCBsZW5ndGgpIC0gcmVtb3ZlIGluIHYwLjEzXG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ0J1ZmZlci53cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXRbLCBsZW5ndGhdKSBpcyBubyBsb25nZXIgc3VwcG9ydGVkJ1xuICAgIClcbiAgfVxuXG4gIHZhciByZW1haW5pbmcgPSB0aGlzLmxlbmd0aCAtIG9mZnNldFxuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmdcblxuICBpZiAoKHN0cmluZy5sZW5ndGggPiAwICYmIChsZW5ndGggPCAwIHx8IG9mZnNldCA8IDApKSB8fCBvZmZzZXQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpXG4gIH1cblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGxhdGluMVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIC8vIFdhcm5pbmc6IG1heExlbmd0aCBub3QgdGFrZW4gaW50byBhY2NvdW50IGluIGJhc2U2NFdyaXRlXG4gICAgICAgIHJldHVybiBiYXNlNjRXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdWNzMldyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTiAoKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ0J1ZmZlcicsXG4gICAgZGF0YTogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyIHx8IHRoaXMsIDApXG4gIH1cbn1cblxuZnVuY3Rpb24gYmFzZTY0U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICBpZiAoc3RhcnQgPT09IDAgJiYgZW5kID09PSBidWYubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1ZilcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmLnNsaWNlKHN0YXJ0LCBlbmQpKVxuICB9XG59XG5cbmZ1bmN0aW9uIHV0ZjhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcbiAgdmFyIHJlcyA9IFtdXG5cbiAgdmFyIGkgPSBzdGFydFxuICB3aGlsZSAoaSA8IGVuZCkge1xuICAgIHZhciBmaXJzdEJ5dGUgPSBidWZbaV1cbiAgICB2YXIgY29kZVBvaW50ID0gbnVsbFxuICAgIHZhciBieXRlc1BlclNlcXVlbmNlID0gKGZpcnN0Qnl0ZSA+IDB4RUYpID8gNFxuICAgICAgOiAoZmlyc3RCeXRlID4gMHhERikgPyAzXG4gICAgICA6IChmaXJzdEJ5dGUgPiAweEJGKSA/IDJcbiAgICAgIDogMVxuXG4gICAgaWYgKGkgKyBieXRlc1BlclNlcXVlbmNlIDw9IGVuZCkge1xuICAgICAgdmFyIHNlY29uZEJ5dGUsIHRoaXJkQnl0ZSwgZm91cnRoQnl0ZSwgdGVtcENvZGVQb2ludFxuXG4gICAgICBzd2l0Y2ggKGJ5dGVzUGVyU2VxdWVuY2UpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGlmIChmaXJzdEJ5dGUgPCAweDgwKSB7XG4gICAgICAgICAgICBjb2RlUG9pbnQgPSBmaXJzdEJ5dGVcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHgxRikgPDwgMHg2IHwgKHNlY29uZEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4QyB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKHRoaXJkQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0ZGICYmICh0ZW1wQ29kZVBvaW50IDwgMHhEODAwIHx8IHRlbXBDb2RlUG9pbnQgPiAweERGRkYpKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXVxuICAgICAgICAgIGZvdXJ0aEJ5dGUgPSBidWZbaSArIDNdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwICYmIChmb3VydGhCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweDEyIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweEMgfCAodGhpcmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKGZvdXJ0aEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweEZGRkYgJiYgdGVtcENvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvZGVQb2ludCA9PT0gbnVsbCkge1xuICAgICAgLy8gd2UgZGlkIG5vdCBnZW5lcmF0ZSBhIHZhbGlkIGNvZGVQb2ludCBzbyBpbnNlcnQgYVxuICAgICAgLy8gcmVwbGFjZW1lbnQgY2hhciAoVStGRkZEKSBhbmQgYWR2YW5jZSBvbmx5IDEgYnl0ZVxuICAgICAgY29kZVBvaW50ID0gMHhGRkZEXG4gICAgICBieXRlc1BlclNlcXVlbmNlID0gMVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7XG4gICAgICAvLyBlbmNvZGUgdG8gdXRmMTYgKHN1cnJvZ2F0ZSBwYWlyIGRhbmNlKVxuICAgICAgY29kZVBvaW50IC09IDB4MTAwMDBcbiAgICAgIHJlcy5wdXNoKGNvZGVQb2ludCA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMClcbiAgICAgIGNvZGVQb2ludCA9IDB4REMwMCB8IGNvZGVQb2ludCAmIDB4M0ZGXG4gICAgfVxuXG4gICAgcmVzLnB1c2goY29kZVBvaW50KVxuICAgIGkgKz0gYnl0ZXNQZXJTZXF1ZW5jZVxuICB9XG5cbiAgcmV0dXJuIGRlY29kZUNvZGVQb2ludHNBcnJheShyZXMpXG59XG5cbi8vIEJhc2VkIG9uIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIyNzQ3MjcyLzY4MDc0MiwgdGhlIGJyb3dzZXIgd2l0aFxuLy8gdGhlIGxvd2VzdCBsaW1pdCBpcyBDaHJvbWUsIHdpdGggMHgxMDAwMCBhcmdzLlxuLy8gV2UgZ28gMSBtYWduaXR1ZGUgbGVzcywgZm9yIHNhZmV0eVxudmFyIE1BWF9BUkdVTUVOVFNfTEVOR1RIID0gMHgxMDAwXG5cbmZ1bmN0aW9uIGRlY29kZUNvZGVQb2ludHNBcnJheSAoY29kZVBvaW50cykge1xuICB2YXIgbGVuID0gY29kZVBvaW50cy5sZW5ndGhcbiAgaWYgKGxlbiA8PSBNQVhfQVJHVU1FTlRTX0xFTkdUSCkge1xuICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgY29kZVBvaW50cykgLy8gYXZvaWQgZXh0cmEgc2xpY2UoKVxuICB9XG5cbiAgLy8gRGVjb2RlIGluIGNodW5rcyB0byBhdm9pZCBcImNhbGwgc3RhY2sgc2l6ZSBleGNlZWRlZFwiLlxuICB2YXIgcmVzID0gJydcbiAgdmFyIGkgPSAwXG4gIHdoaWxlIChpIDwgbGVuKSB7XG4gICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoXG4gICAgICBTdHJpbmcsXG4gICAgICBjb2RlUG9pbnRzLnNsaWNlKGksIGkgKz0gTUFYX0FSR1VNRU5UU19MRU5HVEgpXG4gICAgKVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuZnVuY3Rpb24gYXNjaWlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJ1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0gJiAweDdGKVxuICB9XG4gIHJldHVybiByZXRcbn1cblxuZnVuY3Rpb24gbGF0aW4xU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgcmV0ID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKVxuICB9XG4gIHJldHVybiByZXRcbn1cblxuZnVuY3Rpb24gaGV4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgbGVuID0gYnVmLmxlbmd0aFxuXG4gIGlmICghc3RhcnQgfHwgc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgaWYgKCFlbmQgfHwgZW5kIDwgMCB8fCBlbmQgPiBsZW4pIGVuZCA9IGxlblxuXG4gIHZhciBvdXQgPSAnJ1xuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIG91dCArPSB0b0hleChidWZbaV0pXG4gIH1cbiAgcmV0dXJuIG91dFxufVxuXG5mdW5jdGlvbiB1dGYxNmxlU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgYnl0ZXMgPSBidWYuc2xpY2Uoc3RhcnQsIGVuZClcbiAgdmFyIHJlcyA9ICcnXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXSArIGJ5dGVzW2kgKyAxXSAqIDI1NilcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbiBzbGljZSAoc3RhcnQsIGVuZCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgc3RhcnQgPSB+fnN0YXJ0XG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuIDogfn5lbmRcblxuICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgc3RhcnQgKz0gbGVuXG4gICAgaWYgKHN0YXJ0IDwgMCkgc3RhcnQgPSAwXG4gIH0gZWxzZSBpZiAoc3RhcnQgPiBsZW4pIHtcbiAgICBzdGFydCA9IGxlblxuICB9XG5cbiAgaWYgKGVuZCA8IDApIHtcbiAgICBlbmQgKz0gbGVuXG4gICAgaWYgKGVuZCA8IDApIGVuZCA9IDBcbiAgfSBlbHNlIGlmIChlbmQgPiBsZW4pIHtcbiAgICBlbmQgPSBsZW5cbiAgfVxuXG4gIGlmIChlbmQgPCBzdGFydCkgZW5kID0gc3RhcnRcblxuICB2YXIgbmV3QnVmXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIG5ld0J1ZiA9IHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZClcbiAgICBuZXdCdWYuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICB9IGVsc2Uge1xuICAgIHZhciBzbGljZUxlbiA9IGVuZCAtIHN0YXJ0XG4gICAgbmV3QnVmID0gbmV3IEJ1ZmZlcihzbGljZUxlbiwgdW5kZWZpbmVkKVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2xpY2VMZW47ICsraSkge1xuICAgICAgbmV3QnVmW2ldID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ld0J1ZlxufVxuXG4vKlxuICogTmVlZCB0byBtYWtlIHN1cmUgdGhhdCBidWZmZXIgaXNuJ3QgdHJ5aW5nIHRvIHdyaXRlIG91dCBvZiBib3VuZHMuXG4gKi9cbmZ1bmN0aW9uIGNoZWNrT2Zmc2V0IChvZmZzZXQsIGV4dCwgbGVuZ3RoKSB7XG4gIGlmICgob2Zmc2V0ICUgMSkgIT09IDAgfHwgb2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ29mZnNldCBpcyBub3QgdWludCcpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBsZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdUcnlpbmcgdG8gYWNjZXNzIGJleW9uZCBidWZmZXIgbGVuZ3RoJylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludExFID0gZnVuY3Rpb24gcmVhZFVJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF1cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcbiAgfVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludEJFID0gZnVuY3Rpb24gcmVhZFVJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcbiAgfVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF1cbiAgdmFyIG11bCA9IDFcbiAgd2hpbGUgKGJ5dGVMZW5ndGggPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXSAqIG11bFxuICB9XG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIHJlYWRVSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gdGhpc1tvZmZzZXRdXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkxFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCA4KSB8IHRoaXNbb2Zmc2V0ICsgMV1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyTEUgPSBmdW5jdGlvbiByZWFkVUludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKCh0aGlzW29mZnNldF0pIHxcbiAgICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSkgK1xuICAgICAgKHRoaXNbb2Zmc2V0ICsgM10gKiAweDEwMDAwMDApXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkJFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICh0aGlzW29mZnNldF0gKiAweDEwMDAwMDApICtcbiAgICAoKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG4gICAgdGhpc1tvZmZzZXQgKyAzXSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50TEUgPSBmdW5jdGlvbiByZWFkSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG4gIH1cbiAgbXVsICo9IDB4ODBcblxuICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50QkUgPSBmdW5jdGlvbiByZWFkSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgaSA9IGJ5dGVMZW5ndGhcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1pXVxuICB3aGlsZSAoaSA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWldICogbXVsXG4gIH1cbiAgbXVsICo9IDB4ODBcblxuICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50OCA9IGZ1bmN0aW9uIHJlYWRJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG4gIGlmICghKHRoaXNbb2Zmc2V0XSAmIDB4ODApKSByZXR1cm4gKHRoaXNbb2Zmc2V0XSlcbiAgcmV0dXJuICgoMHhmZiAtIHRoaXNbb2Zmc2V0XSArIDEpICogLTEpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2TEUgPSBmdW5jdGlvbiByZWFkSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcbiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkJFID0gZnVuY3Rpb24gcmVhZEludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgMV0gfCAodGhpc1tvZmZzZXRdIDw8IDgpXG4gIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICh0aGlzW29mZnNldF0pIHxcbiAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAzXSA8PCAyNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgMjQpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAzXSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRMRSA9IGZ1bmN0aW9uIHJlYWRGbG9hdExFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCAyMywgNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRCRSA9IGZ1bmN0aW9uIHJlYWRGbG9hdEJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUxFID0gZnVuY3Rpb24gcmVhZERvdWJsZUxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCA1MiwgOClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlQkUgPSBmdW5jdGlvbiByZWFkRG91YmxlQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCA1MiwgOClcbn1cblxuZnVuY3Rpb24gY2hlY2tJbnQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImJ1ZmZlclwiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKVxuICBpZiAodmFsdWUgPiBtYXggfHwgdmFsdWUgPCBtaW4pIHRocm93IG5ldyBSYW5nZUVycm9yKCdcInZhbHVlXCIgYXJndW1lbnQgaXMgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIG1heEJ5dGVzID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpIC0gMVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKVxuICB9XG5cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlVUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIG1heEJ5dGVzID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpIC0gMVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKVxuICB9XG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVVSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweGZmLCAwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDE2IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZiArIHZhbHVlICsgMVxuICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDIpOyBpIDwgajsgKytpKSB7XG4gICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlICYgKDB4ZmYgPDwgKDggKiAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSkpKSA+Pj5cbiAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogOFxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCA0KTsgaSA8IGo7ICsraSkge1xuICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSA+Pj4gKGxpdHRsZUVuZGlhbiA/IGkgOiAzIC0gaSkgKiA4KSAmIDB4ZmZcbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuICB9XG5cbiAgdmFyIGkgPSAwXG4gIHZhciBtdWwgPSAxXG4gIHZhciBzdWIgPSAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaSAtIDFdICE9PSAwKSB7XG4gICAgICBzdWIgPSAxXG4gICAgfVxuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuICB9XG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB2YXIgc3ViID0gMFxuICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaSArIDFdICE9PSAwKSB7XG4gICAgICBzdWIgPSAxXG4gICAgfVxuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4N2YsIC0weDgwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZiArIHZhbHVlICsgMVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5mdW5jdGlvbiBjaGVja0lFRUU3NTQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG4gIGlmIChvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuZnVuY3Rpb24gd3JpdGVGbG9hdCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA0LCAzLjQwMjgyMzQ2NjM4NTI4ODZlKzM4LCAtMy40MDI4MjM0NjYzODUyODg2ZSszOClcbiAgfVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCAyMywgNClcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0TEUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRCRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxufVxuXG5mdW5jdGlvbiB3cml0ZURvdWJsZSAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA4LCAxLjc5NzY5MzEzNDg2MjMxNTdFKzMwOCwgLTEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDUyLCA4KVxuICByZXR1cm4gb2Zmc2V0ICsgOFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlTEUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbi8vIGNvcHkodGFyZ2V0QnVmZmVyLCB0YXJnZXRTdGFydD0wLCBzb3VyY2VTdGFydD0wLCBzb3VyY2VFbmQ9YnVmZmVyLmxlbmd0aClcbkJ1ZmZlci5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKHRhcmdldCwgdGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCFzdGFydCkgc3RhcnQgPSAwXG4gIGlmICghZW5kICYmIGVuZCAhPT0gMCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldFN0YXJ0ID0gdGFyZ2V0Lmxlbmd0aFxuICBpZiAoIXRhcmdldFN0YXJ0KSB0YXJnZXRTdGFydCA9IDBcbiAgaWYgKGVuZCA+IDAgJiYgZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgLy8gQ29weSAwIGJ5dGVzOyB3ZSdyZSBkb25lXG4gIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm4gMFxuICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBGYXRhbCBlcnJvciBjb25kaXRpb25zXG4gIGlmICh0YXJnZXRTdGFydCA8IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIH1cbiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHMnKVxuICBpZiAoZW5kIDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZUVuZCBvdXQgb2YgYm91bmRzJylcblxuICAvLyBBcmUgd2Ugb29iP1xuICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmICh0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgPCBlbmQgLSBzdGFydCkge1xuICAgIGVuZCA9IHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCArIHN0YXJ0XG4gIH1cblxuICB2YXIgbGVuID0gZW5kIC0gc3RhcnRcbiAgdmFyIGlcblxuICBpZiAodGhpcyA9PT0gdGFyZ2V0ICYmIHN0YXJ0IDwgdGFyZ2V0U3RhcnQgJiYgdGFyZ2V0U3RhcnQgPCBlbmQpIHtcbiAgICAvLyBkZXNjZW5kaW5nIGNvcHkgZnJvbSBlbmRcbiAgICBmb3IgKGkgPSBsZW4gLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH0gZWxzZSBpZiAobGVuIDwgMTAwMCB8fCAhQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBhc2NlbmRpbmcgY29weSBmcm9tIHN0YXJ0XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbChcbiAgICAgIHRhcmdldCxcbiAgICAgIHRoaXMuc3ViYXJyYXkoc3RhcnQsIHN0YXJ0ICsgbGVuKSxcbiAgICAgIHRhcmdldFN0YXJ0XG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIGxlblxufVxuXG4vLyBVc2FnZTpcbi8vICAgIGJ1ZmZlci5maWxsKG51bWJlclssIG9mZnNldFssIGVuZF1dKVxuLy8gICAgYnVmZmVyLmZpbGwoYnVmZmVyWywgb2Zmc2V0WywgZW5kXV0pXG4vLyAgICBidWZmZXIuZmlsbChzdHJpbmdbLCBvZmZzZXRbLCBlbmRdXVssIGVuY29kaW5nXSlcbkJ1ZmZlci5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIGZpbGwgKHZhbCwgc3RhcnQsIGVuZCwgZW5jb2RpbmcpIHtcbiAgLy8gSGFuZGxlIHN0cmluZyBjYXNlczpcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgaWYgKHR5cGVvZiBzdGFydCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVuY29kaW5nID0gc3RhcnRcbiAgICAgIHN0YXJ0ID0gMFxuICAgICAgZW5kID0gdGhpcy5sZW5ndGhcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbmQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBlbmNvZGluZyA9IGVuZFxuICAgICAgZW5kID0gdGhpcy5sZW5ndGhcbiAgICB9XG4gICAgaWYgKHZhbC5sZW5ndGggPT09IDEpIHtcbiAgICAgIHZhciBjb2RlID0gdmFsLmNoYXJDb2RlQXQoMClcbiAgICAgIGlmIChjb2RlIDwgMjU2KSB7XG4gICAgICAgIHZhbCA9IGNvZGVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVuY29kaW5nICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZW5jb2RpbmcgbXVzdCBiZSBhIHN0cmluZycpXG4gICAgfVxuICAgIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnICYmICFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICB2YWwgPSB2YWwgJiAyNTVcbiAgfVxuXG4gIC8vIEludmFsaWQgcmFuZ2VzIGFyZSBub3Qgc2V0IHRvIGEgZGVmYXVsdCwgc28gY2FuIHJhbmdlIGNoZWNrIGVhcmx5LlxuICBpZiAoc3RhcnQgPCAwIHx8IHRoaXMubGVuZ3RoIDwgc3RhcnQgfHwgdGhpcy5sZW5ndGggPCBlbmQpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignT3V0IG9mIHJhbmdlIGluZGV4JylcbiAgfVxuXG4gIGlmIChlbmQgPD0gc3RhcnQpIHtcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgc3RhcnQgPSBzdGFydCA+Pj4gMFxuICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IHRoaXMubGVuZ3RoIDogZW5kID4+PiAwXG5cbiAgaWYgKCF2YWwpIHZhbCA9IDBcblxuICB2YXIgaVxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgICB0aGlzW2ldID0gdmFsXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBieXRlcyA9IEJ1ZmZlci5pc0J1ZmZlcih2YWwpXG4gICAgICA/IHZhbFxuICAgICAgOiB1dGY4VG9CeXRlcyhuZXcgQnVmZmVyKHZhbCwgZW5jb2RpbmcpLnRvU3RyaW5nKCkpXG4gICAgdmFyIGxlbiA9IGJ5dGVzLmxlbmd0aFxuICAgIGZvciAoaSA9IDA7IGkgPCBlbmQgLSBzdGFydDsgKytpKSB7XG4gICAgICB0aGlzW2kgKyBzdGFydF0gPSBieXRlc1tpICUgbGVuXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzXG59XG5cbi8vIEhFTFBFUiBGVU5DVElPTlNcbi8vID09PT09PT09PT09PT09PT1cblxudmFyIElOVkFMSURfQkFTRTY0X1JFID0gL1teK1xcLzAtOUEtWmEtei1fXS9nXG5cbmZ1bmN0aW9uIGJhc2U2NGNsZWFuIChzdHIpIHtcbiAgLy8gTm9kZSBzdHJpcHMgb3V0IGludmFsaWQgY2hhcmFjdGVycyBsaWtlIFxcbiBhbmQgXFx0IGZyb20gdGhlIHN0cmluZywgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHN0ciA9IHN0cmluZ3RyaW0oc3RyKS5yZXBsYWNlKElOVkFMSURfQkFTRTY0X1JFLCAnJylcbiAgLy8gTm9kZSBjb252ZXJ0cyBzdHJpbmdzIHdpdGggbGVuZ3RoIDwgMiB0byAnJ1xuICBpZiAoc3RyLmxlbmd0aCA8IDIpIHJldHVybiAnJ1xuICAvLyBOb2RlIGFsbG93cyBmb3Igbm9uLXBhZGRlZCBiYXNlNjQgc3RyaW5ncyAobWlzc2luZyB0cmFpbGluZyA9PT0pLCBiYXNlNjQtanMgZG9lcyBub3RcbiAgd2hpbGUgKHN0ci5sZW5ndGggJSA0ICE9PSAwKSB7XG4gICAgc3RyID0gc3RyICsgJz0nXG4gIH1cbiAgcmV0dXJuIHN0clxufVxuXG5mdW5jdGlvbiBzdHJpbmd0cmltIChzdHIpIHtcbiAgaWYgKHN0ci50cmltKSByZXR1cm4gc3RyLnRyaW0oKVxuICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKVxufVxuXG5mdW5jdGlvbiB0b0hleCAobikge1xuICBpZiAobiA8IDE2KSByZXR1cm4gJzAnICsgbi50b1N0cmluZygxNilcbiAgcmV0dXJuIG4udG9TdHJpbmcoMTYpXG59XG5cbmZ1bmN0aW9uIHV0ZjhUb0J5dGVzIChzdHJpbmcsIHVuaXRzKSB7XG4gIHVuaXRzID0gdW5pdHMgfHwgSW5maW5pdHlcbiAgdmFyIGNvZGVQb2ludFxuICB2YXIgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aFxuICB2YXIgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcbiAgdmFyIGJ5dGVzID0gW11cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgY29kZVBvaW50ID0gc3RyaW5nLmNoYXJDb2RlQXQoaSlcblxuICAgIC8vIGlzIHN1cnJvZ2F0ZSBjb21wb25lbnRcbiAgICBpZiAoY29kZVBvaW50ID4gMHhEN0ZGICYmIGNvZGVQb2ludCA8IDB4RTAwMCkge1xuICAgICAgLy8gbGFzdCBjaGFyIHdhcyBhIGxlYWRcbiAgICAgIGlmICghbGVhZFN1cnJvZ2F0ZSkge1xuICAgICAgICAvLyBubyBsZWFkIHlldFxuICAgICAgICBpZiAoY29kZVBvaW50ID4gMHhEQkZGKSB7XG4gICAgICAgICAgLy8gdW5leHBlY3RlZCB0cmFpbFxuICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH0gZWxzZSBpZiAoaSArIDEgPT09IGxlbmd0aCkge1xuICAgICAgICAgIC8vIHVucGFpcmVkIGxlYWRcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdmFsaWQgbGVhZFxuICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XG5cbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gMiBsZWFkcyBpbiBhIHJvd1xuICAgICAgaWYgKGNvZGVQb2ludCA8IDB4REMwMCkge1xuICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyB2YWxpZCBzdXJyb2dhdGUgcGFpclxuICAgICAgY29kZVBvaW50ID0gKGxlYWRTdXJyb2dhdGUgLSAweEQ4MDAgPDwgMTAgfCBjb2RlUG9pbnQgLSAweERDMDApICsgMHgxMDAwMFxuICAgIH0gZWxzZSBpZiAobGVhZFN1cnJvZ2F0ZSkge1xuICAgICAgLy8gdmFsaWQgYm1wIGNoYXIsIGJ1dCBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgfVxuXG4gICAgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcblxuICAgIC8vIGVuY29kZSB1dGY4XG4gICAgaWYgKGNvZGVQb2ludCA8IDB4ODApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChjb2RlUG9pbnQpXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDgwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2IHwgMHhDMCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTAwMDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMykgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4QyB8IDB4RTAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDQpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDEyIHwgMHhGMCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4QyAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2RlIHBvaW50JylcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYnl0ZXNcbn1cblxuZnVuY3Rpb24gYXNjaWlUb0J5dGVzIChzdHIpIHtcbiAgdmFyIGJ5dGVBcnJheSA9IFtdXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgLy8gTm9kZSdzIGNvZGUgc2VlbXMgdG8gYmUgZG9pbmcgdGhpcyBhbmQgbm90ICYgMHg3Ri4uXG4gICAgYnl0ZUFycmF5LnB1c2goc3RyLmNoYXJDb2RlQXQoaSkgJiAweEZGKVxuICB9XG4gIHJldHVybiBieXRlQXJyYXlcbn1cblxuZnVuY3Rpb24gdXRmMTZsZVRvQnl0ZXMgKHN0ciwgdW5pdHMpIHtcbiAgdmFyIGMsIGhpLCBsb1xuICB2YXIgYnl0ZUFycmF5ID0gW11cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcblxuICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKVxuICAgIGhpID0gYyA+PiA4XG4gICAgbG8gPSBjICUgMjU2XG4gICAgYnl0ZUFycmF5LnB1c2gobG8pXG4gICAgYnl0ZUFycmF5LnB1c2goaGkpXG4gIH1cblxuICByZXR1cm4gYnl0ZUFycmF5XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFRvQnl0ZXMgKHN0cikge1xuICByZXR1cm4gYmFzZTY0LnRvQnl0ZUFycmF5KGJhc2U2NGNsZWFuKHN0cikpXG59XG5cbmZ1bmN0aW9uIGJsaXRCdWZmZXIgKHNyYywgZHN0LCBvZmZzZXQsIGxlbmd0aCkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgaWYgKChpICsgb2Zmc2V0ID49IGRzdC5sZW5ndGgpIHx8IChpID49IHNyYy5sZW5ndGgpKSBicmVha1xuICAgIGRzdFtpICsgb2Zmc2V0XSA9IHNyY1tpXVxuICB9XG4gIHJldHVybiBpXG59XG5cbmZ1bmN0aW9uIGlzbmFuICh2YWwpIHtcbiAgcmV0dXJuIHZhbCAhPT0gdmFsIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2VsZi1jb21wYXJlXG59XG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuLy8gTk9URTogVGhlc2UgdHlwZSBjaGVja2luZyBmdW5jdGlvbnMgaW50ZW50aW9uYWxseSBkb24ndCB1c2UgYGluc3RhbmNlb2ZgXG4vLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC5cblxuZnVuY3Rpb24gaXNBcnJheShhcmcpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhcmcpO1xuICB9XG4gIHJldHVybiBvYmplY3RUb1N0cmluZyhhcmcpID09PSAnW29iamVjdCBBcnJheV0nO1xufVxuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblxuZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nO1xufVxuZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG5cbmZ1bmN0aW9uIGlzTnVsbChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNOdWxsID0gaXNOdWxsO1xuXG5mdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyO1xuXG5mdW5jdGlvbiBpc1N0cmluZyhhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnO1xufVxuZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nO1xuXG5mdW5jdGlvbiBpc1N5bWJvbChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnO1xufVxuZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sO1xuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc1JlZ0V4cChyZSkge1xuICByZXR1cm4gb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJztcbn1cbmV4cG9ydHMuaXNSZWdFeHAgPSBpc1JlZ0V4cDtcblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5leHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG5cbmZ1bmN0aW9uIGlzRGF0ZShkKSB7XG4gIHJldHVybiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuZXhwb3J0cy5pc0RhdGUgPSBpc0RhdGU7XG5cbmZ1bmN0aW9uIGlzRXJyb3IoZSkge1xuICByZXR1cm4gKG9iamVjdFRvU3RyaW5nKGUpID09PSAnW29iamVjdCBFcnJvcl0nIHx8IGUgaW5zdGFuY2VvZiBFcnJvcik7XG59XG5leHBvcnRzLmlzRXJyb3IgPSBpc0Vycm9yO1xuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcbn1cbmV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG5cbmZ1bmN0aW9uIGlzUHJpbWl0aXZlKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3RyaW5nJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCcgfHwgIC8vIEVTNiBzeW1ib2xcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICd1bmRlZmluZWQnO1xufVxuZXhwb3J0cy5pc1ByaW1pdGl2ZSA9IGlzUHJpbWl0aXZlO1xuXG5leHBvcnRzLmlzQnVmZmVyID0gQnVmZmVyLmlzQnVmZmVyO1xuXG5mdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7XG59XG4iLCIvKipcbiAqIFRoaXMgaXMgdGhlIHdlYiBicm93c2VyIGltcGxlbWVudGF0aW9uIG9mIGBkZWJ1ZygpYC5cbiAqXG4gKiBFeHBvc2UgYGRlYnVnKClgIGFzIHRoZSBtb2R1bGUuXG4gKi9cblxuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9kZWJ1ZycpO1xuZXhwb3J0cy5sb2cgPSBsb2c7XG5leHBvcnRzLmZvcm1hdEFyZ3MgPSBmb3JtYXRBcmdzO1xuZXhwb3J0cy5zYXZlID0gc2F2ZTtcbmV4cG9ydHMubG9hZCA9IGxvYWQ7XG5leHBvcnRzLnVzZUNvbG9ycyA9IHVzZUNvbG9ycztcbmV4cG9ydHMuc3RvcmFnZSA9ICd1bmRlZmluZWQnICE9IHR5cGVvZiBjaHJvbWVcbiAgICAgICAgICAgICAgICYmICd1bmRlZmluZWQnICE9IHR5cGVvZiBjaHJvbWUuc3RvcmFnZVxuICAgICAgICAgICAgICAgICAgPyBjaHJvbWUuc3RvcmFnZS5sb2NhbFxuICAgICAgICAgICAgICAgICAgOiBsb2NhbHN0b3JhZ2UoKTtcblxuLyoqXG4gKiBDb2xvcnMuXG4gKi9cblxuZXhwb3J0cy5jb2xvcnMgPSBbXG4gICcjMDAwMENDJywgJyMwMDAwRkYnLCAnIzAwMzNDQycsICcjMDAzM0ZGJywgJyMwMDY2Q0MnLCAnIzAwNjZGRicsICcjMDA5OUNDJyxcbiAgJyMwMDk5RkYnLCAnIzAwQ0MwMCcsICcjMDBDQzMzJywgJyMwMENDNjYnLCAnIzAwQ0M5OScsICcjMDBDQ0NDJywgJyMwMENDRkYnLFxuICAnIzMzMDBDQycsICcjMzMwMEZGJywgJyMzMzMzQ0MnLCAnIzMzMzNGRicsICcjMzM2NkNDJywgJyMzMzY2RkYnLCAnIzMzOTlDQycsXG4gICcjMzM5OUZGJywgJyMzM0NDMDAnLCAnIzMzQ0MzMycsICcjMzNDQzY2JywgJyMzM0NDOTknLCAnIzMzQ0NDQycsICcjMzNDQ0ZGJyxcbiAgJyM2NjAwQ0MnLCAnIzY2MDBGRicsICcjNjYzM0NDJywgJyM2NjMzRkYnLCAnIzY2Q0MwMCcsICcjNjZDQzMzJywgJyM5OTAwQ0MnLFxuICAnIzk5MDBGRicsICcjOTkzM0NDJywgJyM5OTMzRkYnLCAnIzk5Q0MwMCcsICcjOTlDQzMzJywgJyNDQzAwMDAnLCAnI0NDMDAzMycsXG4gICcjQ0MwMDY2JywgJyNDQzAwOTknLCAnI0NDMDBDQycsICcjQ0MwMEZGJywgJyNDQzMzMDAnLCAnI0NDMzMzMycsICcjQ0MzMzY2JyxcbiAgJyNDQzMzOTknLCAnI0NDMzNDQycsICcjQ0MzM0ZGJywgJyNDQzY2MDAnLCAnI0NDNjYzMycsICcjQ0M5OTAwJywgJyNDQzk5MzMnLFxuICAnI0NDQ0MwMCcsICcjQ0NDQzMzJywgJyNGRjAwMDAnLCAnI0ZGMDAzMycsICcjRkYwMDY2JywgJyNGRjAwOTknLCAnI0ZGMDBDQycsXG4gICcjRkYwMEZGJywgJyNGRjMzMDAnLCAnI0ZGMzMzMycsICcjRkYzMzY2JywgJyNGRjMzOTknLCAnI0ZGMzNDQycsICcjRkYzM0ZGJyxcbiAgJyNGRjY2MDAnLCAnI0ZGNjYzMycsICcjRkY5OTAwJywgJyNGRjk5MzMnLCAnI0ZGQ0MwMCcsICcjRkZDQzMzJ1xuXTtcblxuLyoqXG4gKiBDdXJyZW50bHkgb25seSBXZWJLaXQtYmFzZWQgV2ViIEluc3BlY3RvcnMsIEZpcmVmb3ggPj0gdjMxLFxuICogYW5kIHRoZSBGaXJlYnVnIGV4dGVuc2lvbiAoYW55IEZpcmVmb3ggdmVyc2lvbikgYXJlIGtub3duXG4gKiB0byBzdXBwb3J0IFwiJWNcIiBDU1MgY3VzdG9taXphdGlvbnMuXG4gKlxuICogVE9ETzogYWRkIGEgYGxvY2FsU3RvcmFnZWAgdmFyaWFibGUgdG8gZXhwbGljaXRseSBlbmFibGUvZGlzYWJsZSBjb2xvcnNcbiAqL1xuXG5mdW5jdGlvbiB1c2VDb2xvcnMoKSB7XG4gIC8vIE5COiBJbiBhbiBFbGVjdHJvbiBwcmVsb2FkIHNjcmlwdCwgZG9jdW1lbnQgd2lsbCBiZSBkZWZpbmVkIGJ1dCBub3QgZnVsbHlcbiAgLy8gaW5pdGlhbGl6ZWQuIFNpbmNlIHdlIGtub3cgd2UncmUgaW4gQ2hyb21lLCB3ZSdsbCBqdXN0IGRldGVjdCB0aGlzIGNhc2VcbiAgLy8gZXhwbGljaXRseVxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnByb2Nlc3MgJiYgd2luZG93LnByb2Nlc3MudHlwZSA9PT0gJ3JlbmRlcmVyJykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gSW50ZXJuZXQgRXhwbG9yZXIgYW5kIEVkZ2UgZG8gbm90IHN1cHBvcnQgY29sb3JzLlxuICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goLyhlZGdlfHRyaWRlbnQpXFwvKFxcZCspLykpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBpcyB3ZWJraXQ/IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE2NDU5NjA2LzM3Njc3M1xuICAvLyBkb2N1bWVudCBpcyB1bmRlZmluZWQgaW4gcmVhY3QtbmF0aXZlOiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QtbmF0aXZlL3B1bGwvMTYzMlxuICByZXR1cm4gKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuV2Via2l0QXBwZWFyYW5jZSkgfHxcbiAgICAvLyBpcyBmaXJlYnVnPyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zOTgxMjAvMzc2NzczXG4gICAgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5jb25zb2xlICYmICh3aW5kb3cuY29uc29sZS5maXJlYnVnIHx8ICh3aW5kb3cuY29uc29sZS5leGNlcHRpb24gJiYgd2luZG93LmNvbnNvbGUudGFibGUpKSkgfHxcbiAgICAvLyBpcyBmaXJlZm94ID49IHYzMT9cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1Rvb2xzL1dlYl9Db25zb2xlI1N0eWxpbmdfbWVzc2FnZXNcbiAgICAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL2ZpcmVmb3hcXC8oXFxkKykvKSAmJiBwYXJzZUludChSZWdFeHAuJDEsIDEwKSA+PSAzMSkgfHxcbiAgICAvLyBkb3VibGUgY2hlY2sgd2Via2l0IGluIHVzZXJBZ2VudCBqdXN0IGluIGNhc2Ugd2UgYXJlIGluIGEgd29ya2VyXG4gICAgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9hcHBsZXdlYmtpdFxcLyhcXGQrKS8pKTtcbn1cblxuLyoqXG4gKiBNYXAgJWogdG8gYEpTT04uc3RyaW5naWZ5KClgLCBzaW5jZSBubyBXZWIgSW5zcGVjdG9ycyBkbyB0aGF0IGJ5IGRlZmF1bHQuXG4gKi9cblxuZXhwb3J0cy5mb3JtYXR0ZXJzLmogPSBmdW5jdGlvbih2KSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHYpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXR1cm4gJ1tVbmV4cGVjdGVkSlNPTlBhcnNlRXJyb3JdOiAnICsgZXJyLm1lc3NhZ2U7XG4gIH1cbn07XG5cblxuLyoqXG4gKiBDb2xvcml6ZSBsb2cgYXJndW1lbnRzIGlmIGVuYWJsZWQuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRBcmdzKGFyZ3MpIHtcbiAgdmFyIHVzZUNvbG9ycyA9IHRoaXMudXNlQ29sb3JzO1xuXG4gIGFyZ3NbMF0gPSAodXNlQ29sb3JzID8gJyVjJyA6ICcnKVxuICAgICsgdGhpcy5uYW1lc3BhY2VcbiAgICArICh1c2VDb2xvcnMgPyAnICVjJyA6ICcgJylcbiAgICArIGFyZ3NbMF1cbiAgICArICh1c2VDb2xvcnMgPyAnJWMgJyA6ICcgJylcbiAgICArICcrJyArIGV4cG9ydHMuaHVtYW5pemUodGhpcy5kaWZmKTtcblxuICBpZiAoIXVzZUNvbG9ycykgcmV0dXJuO1xuXG4gIHZhciBjID0gJ2NvbG9yOiAnICsgdGhpcy5jb2xvcjtcbiAgYXJncy5zcGxpY2UoMSwgMCwgYywgJ2NvbG9yOiBpbmhlcml0JylcblxuICAvLyB0aGUgZmluYWwgXCIlY1wiIGlzIHNvbWV3aGF0IHRyaWNreSwgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvdGhlclxuICAvLyBhcmd1bWVudHMgcGFzc2VkIGVpdGhlciBiZWZvcmUgb3IgYWZ0ZXIgdGhlICVjLCBzbyB3ZSBuZWVkIHRvXG4gIC8vIGZpZ3VyZSBvdXQgdGhlIGNvcnJlY3QgaW5kZXggdG8gaW5zZXJ0IHRoZSBDU1MgaW50b1xuICB2YXIgaW5kZXggPSAwO1xuICB2YXIgbGFzdEMgPSAwO1xuICBhcmdzWzBdLnJlcGxhY2UoLyVbYS16QS1aJV0vZywgZnVuY3Rpb24obWF0Y2gpIHtcbiAgICBpZiAoJyUlJyA9PT0gbWF0Y2gpIHJldHVybjtcbiAgICBpbmRleCsrO1xuICAgIGlmICgnJWMnID09PSBtYXRjaCkge1xuICAgICAgLy8gd2Ugb25seSBhcmUgaW50ZXJlc3RlZCBpbiB0aGUgKmxhc3QqICVjXG4gICAgICAvLyAodGhlIHVzZXIgbWF5IGhhdmUgcHJvdmlkZWQgdGhlaXIgb3duKVxuICAgICAgbGFzdEMgPSBpbmRleDtcbiAgICB9XG4gIH0pO1xuXG4gIGFyZ3Muc3BsaWNlKGxhc3RDLCAwLCBjKTtcbn1cblxuLyoqXG4gKiBJbnZva2VzIGBjb25zb2xlLmxvZygpYCB3aGVuIGF2YWlsYWJsZS5cbiAqIE5vLW9wIHdoZW4gYGNvbnNvbGUubG9nYCBpcyBub3QgYSBcImZ1bmN0aW9uXCIuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBsb2coKSB7XG4gIC8vIHRoaXMgaGFja2VyeSBpcyByZXF1aXJlZCBmb3IgSUU4LzksIHdoZXJlXG4gIC8vIHRoZSBgY29uc29sZS5sb2dgIGZ1bmN0aW9uIGRvZXNuJ3QgaGF2ZSAnYXBwbHknXG4gIHJldHVybiAnb2JqZWN0JyA9PT0gdHlwZW9mIGNvbnNvbGVcbiAgICAmJiBjb25zb2xlLmxvZ1xuICAgICYmIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKGNvbnNvbGUubG9nLCBjb25zb2xlLCBhcmd1bWVudHMpO1xufVxuXG4vKipcbiAqIFNhdmUgYG5hbWVzcGFjZXNgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBzYXZlKG5hbWVzcGFjZXMpIHtcbiAgdHJ5IHtcbiAgICBpZiAobnVsbCA9PSBuYW1lc3BhY2VzKSB7XG4gICAgICBleHBvcnRzLnN0b3JhZ2UucmVtb3ZlSXRlbSgnZGVidWcnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXhwb3J0cy5zdG9yYWdlLmRlYnVnID0gbmFtZXNwYWNlcztcbiAgICB9XG4gIH0gY2F0Y2goZSkge31cbn1cblxuLyoqXG4gKiBMb2FkIGBuYW1lc3BhY2VzYC5cbiAqXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHJldHVybnMgdGhlIHByZXZpb3VzbHkgcGVyc2lzdGVkIGRlYnVnIG1vZGVzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBsb2FkKCkge1xuICB2YXIgcjtcbiAgdHJ5IHtcbiAgICByID0gZXhwb3J0cy5zdG9yYWdlLmRlYnVnO1xuICB9IGNhdGNoKGUpIHt9XG5cbiAgLy8gSWYgZGVidWcgaXNuJ3Qgc2V0IGluIExTLCBhbmQgd2UncmUgaW4gRWxlY3Ryb24sIHRyeSB0byBsb2FkICRERUJVR1xuICBpZiAoIXIgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmICdlbnYnIGluIHByb2Nlc3MpIHtcbiAgICByID0gcHJvY2Vzcy5lbnYuREVCVUc7XG4gIH1cblxuICByZXR1cm4gcjtcbn1cblxuLyoqXG4gKiBFbmFibGUgbmFtZXNwYWNlcyBsaXN0ZWQgaW4gYGxvY2FsU3RvcmFnZS5kZWJ1Z2AgaW5pdGlhbGx5LlxuICovXG5cbmV4cG9ydHMuZW5hYmxlKGxvYWQoKSk7XG5cbi8qKlxuICogTG9jYWxzdG9yYWdlIGF0dGVtcHRzIHRvIHJldHVybiB0aGUgbG9jYWxzdG9yYWdlLlxuICpcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugc2FmYXJpIHRocm93c1xuICogd2hlbiBhIHVzZXIgZGlzYWJsZXMgY29va2llcy9sb2NhbHN0b3JhZ2VcbiAqIGFuZCB5b3UgYXR0ZW1wdCB0byBhY2Nlc3MgaXQuXG4gKlxuICogQHJldHVybiB7TG9jYWxTdG9yYWdlfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gbG9jYWxzdG9yYWdlKCkge1xuICB0cnkge1xuICAgIHJldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlO1xuICB9IGNhdGNoIChlKSB7fVxufVxuIiwiXG4vKipcbiAqIFRoaXMgaXMgdGhlIGNvbW1vbiBsb2dpYyBmb3IgYm90aCB0aGUgTm9kZS5qcyBhbmQgd2ViIGJyb3dzZXJcbiAqIGltcGxlbWVudGF0aW9ucyBvZiBgZGVidWcoKWAuXG4gKlxuICogRXhwb3NlIGBkZWJ1ZygpYCBhcyB0aGUgbW9kdWxlLlxuICovXG5cbmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZURlYnVnLmRlYnVnID0gY3JlYXRlRGVidWdbJ2RlZmF1bHQnXSA9IGNyZWF0ZURlYnVnO1xuZXhwb3J0cy5jb2VyY2UgPSBjb2VyY2U7XG5leHBvcnRzLmRpc2FibGUgPSBkaXNhYmxlO1xuZXhwb3J0cy5lbmFibGUgPSBlbmFibGU7XG5leHBvcnRzLmVuYWJsZWQgPSBlbmFibGVkO1xuZXhwb3J0cy5odW1hbml6ZSA9IHJlcXVpcmUoJ21zJyk7XG5cbi8qKlxuICogQWN0aXZlIGBkZWJ1Z2AgaW5zdGFuY2VzLlxuICovXG5leHBvcnRzLmluc3RhbmNlcyA9IFtdO1xuXG4vKipcbiAqIFRoZSBjdXJyZW50bHkgYWN0aXZlIGRlYnVnIG1vZGUgbmFtZXMsIGFuZCBuYW1lcyB0byBza2lwLlxuICovXG5cbmV4cG9ydHMubmFtZXMgPSBbXTtcbmV4cG9ydHMuc2tpcHMgPSBbXTtcblxuLyoqXG4gKiBNYXAgb2Ygc3BlY2lhbCBcIiVuXCIgaGFuZGxpbmcgZnVuY3Rpb25zLCBmb3IgdGhlIGRlYnVnIFwiZm9ybWF0XCIgYXJndW1lbnQuXG4gKlxuICogVmFsaWQga2V5IG5hbWVzIGFyZSBhIHNpbmdsZSwgbG93ZXIgb3IgdXBwZXItY2FzZSBsZXR0ZXIsIGkuZS4gXCJuXCIgYW5kIFwiTlwiLlxuICovXG5cbmV4cG9ydHMuZm9ybWF0dGVycyA9IHt9O1xuXG4vKipcbiAqIFNlbGVjdCBhIGNvbG9yLlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZVxuICogQHJldHVybiB7TnVtYmVyfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gc2VsZWN0Q29sb3IobmFtZXNwYWNlKSB7XG4gIHZhciBoYXNoID0gMCwgaTtcblxuICBmb3IgKGkgaW4gbmFtZXNwYWNlKSB7XG4gICAgaGFzaCAgPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIG5hbWVzcGFjZS5jaGFyQ29kZUF0KGkpO1xuICAgIGhhc2ggfD0gMDsgLy8gQ29udmVydCB0byAzMmJpdCBpbnRlZ2VyXG4gIH1cblxuICByZXR1cm4gZXhwb3J0cy5jb2xvcnNbTWF0aC5hYnMoaGFzaCkgJSBleHBvcnRzLmNvbG9ycy5sZW5ndGhdO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIGRlYnVnZ2VyIHdpdGggdGhlIGdpdmVuIGBuYW1lc3BhY2VgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGVEZWJ1ZyhuYW1lc3BhY2UpIHtcblxuICB2YXIgcHJldlRpbWU7XG5cbiAgZnVuY3Rpb24gZGVidWcoKSB7XG4gICAgLy8gZGlzYWJsZWQ/XG4gICAgaWYgKCFkZWJ1Zy5lbmFibGVkKSByZXR1cm47XG5cbiAgICB2YXIgc2VsZiA9IGRlYnVnO1xuXG4gICAgLy8gc2V0IGBkaWZmYCB0aW1lc3RhbXBcbiAgICB2YXIgY3VyciA9ICtuZXcgRGF0ZSgpO1xuICAgIHZhciBtcyA9IGN1cnIgLSAocHJldlRpbWUgfHwgY3Vycik7XG4gICAgc2VsZi5kaWZmID0gbXM7XG4gICAgc2VsZi5wcmV2ID0gcHJldlRpbWU7XG4gICAgc2VsZi5jdXJyID0gY3VycjtcbiAgICBwcmV2VGltZSA9IGN1cnI7XG5cbiAgICAvLyB0dXJuIHRoZSBgYXJndW1lbnRzYCBpbnRvIGEgcHJvcGVyIEFycmF5XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuICAgIH1cblxuICAgIGFyZ3NbMF0gPSBleHBvcnRzLmNvZXJjZShhcmdzWzBdKTtcblxuICAgIGlmICgnc3RyaW5nJyAhPT0gdHlwZW9mIGFyZ3NbMF0pIHtcbiAgICAgIC8vIGFueXRoaW5nIGVsc2UgbGV0J3MgaW5zcGVjdCB3aXRoICVPXG4gICAgICBhcmdzLnVuc2hpZnQoJyVPJyk7XG4gICAgfVxuXG4gICAgLy8gYXBwbHkgYW55IGBmb3JtYXR0ZXJzYCB0cmFuc2Zvcm1hdGlvbnNcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIGFyZ3NbMF0gPSBhcmdzWzBdLnJlcGxhY2UoLyUoW2EtekEtWiVdKS9nLCBmdW5jdGlvbihtYXRjaCwgZm9ybWF0KSB7XG4gICAgICAvLyBpZiB3ZSBlbmNvdW50ZXIgYW4gZXNjYXBlZCAlIHRoZW4gZG9uJ3QgaW5jcmVhc2UgdGhlIGFycmF5IGluZGV4XG4gICAgICBpZiAobWF0Y2ggPT09ICclJScpIHJldHVybiBtYXRjaDtcbiAgICAgIGluZGV4Kys7XG4gICAgICB2YXIgZm9ybWF0dGVyID0gZXhwb3J0cy5mb3JtYXR0ZXJzW2Zvcm1hdF07XG4gICAgICBpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGZvcm1hdHRlcikge1xuICAgICAgICB2YXIgdmFsID0gYXJnc1tpbmRleF07XG4gICAgICAgIG1hdGNoID0gZm9ybWF0dGVyLmNhbGwoc2VsZiwgdmFsKTtcblxuICAgICAgICAvLyBub3cgd2UgbmVlZCB0byByZW1vdmUgYGFyZ3NbaW5kZXhdYCBzaW5jZSBpdCdzIGlubGluZWQgaW4gdGhlIGBmb3JtYXRgXG4gICAgICAgIGFyZ3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgaW5kZXgtLTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtYXRjaDtcbiAgICB9KTtcblxuICAgIC8vIGFwcGx5IGVudi1zcGVjaWZpYyBmb3JtYXR0aW5nIChjb2xvcnMsIGV0Yy4pXG4gICAgZXhwb3J0cy5mb3JtYXRBcmdzLmNhbGwoc2VsZiwgYXJncyk7XG5cbiAgICB2YXIgbG9nRm4gPSBkZWJ1Zy5sb2cgfHwgZXhwb3J0cy5sb2cgfHwgY29uc29sZS5sb2cuYmluZChjb25zb2xlKTtcbiAgICBsb2dGbi5hcHBseShzZWxmLCBhcmdzKTtcbiAgfVxuXG4gIGRlYnVnLm5hbWVzcGFjZSA9IG5hbWVzcGFjZTtcbiAgZGVidWcuZW5hYmxlZCA9IGV4cG9ydHMuZW5hYmxlZChuYW1lc3BhY2UpO1xuICBkZWJ1Zy51c2VDb2xvcnMgPSBleHBvcnRzLnVzZUNvbG9ycygpO1xuICBkZWJ1Zy5jb2xvciA9IHNlbGVjdENvbG9yKG5hbWVzcGFjZSk7XG4gIGRlYnVnLmRlc3Ryb3kgPSBkZXN0cm95O1xuXG4gIC8vIGVudi1zcGVjaWZpYyBpbml0aWFsaXphdGlvbiBsb2dpYyBmb3IgZGVidWcgaW5zdGFuY2VzXG4gIGlmICgnZnVuY3Rpb24nID09PSB0eXBlb2YgZXhwb3J0cy5pbml0KSB7XG4gICAgZXhwb3J0cy5pbml0KGRlYnVnKTtcbiAgfVxuXG4gIGV4cG9ydHMuaW5zdGFuY2VzLnB1c2goZGVidWcpO1xuXG4gIHJldHVybiBkZWJ1Zztcbn1cblxuZnVuY3Rpb24gZGVzdHJveSAoKSB7XG4gIHZhciBpbmRleCA9IGV4cG9ydHMuaW5zdGFuY2VzLmluZGV4T2YodGhpcyk7XG4gIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICBleHBvcnRzLmluc3RhbmNlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vKipcbiAqIEVuYWJsZXMgYSBkZWJ1ZyBtb2RlIGJ5IG5hbWVzcGFjZXMuIFRoaXMgY2FuIGluY2x1ZGUgbW9kZXNcbiAqIHNlcGFyYXRlZCBieSBhIGNvbG9uIGFuZCB3aWxkY2FyZHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZXNcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZW5hYmxlKG5hbWVzcGFjZXMpIHtcbiAgZXhwb3J0cy5zYXZlKG5hbWVzcGFjZXMpO1xuXG4gIGV4cG9ydHMubmFtZXMgPSBbXTtcbiAgZXhwb3J0cy5za2lwcyA9IFtdO1xuXG4gIHZhciBpO1xuICB2YXIgc3BsaXQgPSAodHlwZW9mIG5hbWVzcGFjZXMgPT09ICdzdHJpbmcnID8gbmFtZXNwYWNlcyA6ICcnKS5zcGxpdCgvW1xccyxdKy8pO1xuICB2YXIgbGVuID0gc3BsaXQubGVuZ3RoO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGlmICghc3BsaXRbaV0pIGNvbnRpbnVlOyAvLyBpZ25vcmUgZW1wdHkgc3RyaW5nc1xuICAgIG5hbWVzcGFjZXMgPSBzcGxpdFtpXS5yZXBsYWNlKC9cXCovZywgJy4qPycpO1xuICAgIGlmIChuYW1lc3BhY2VzWzBdID09PSAnLScpIHtcbiAgICAgIGV4cG9ydHMuc2tpcHMucHVzaChuZXcgUmVnRXhwKCdeJyArIG5hbWVzcGFjZXMuc3Vic3RyKDEpICsgJyQnKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV4cG9ydHMubmFtZXMucHVzaChuZXcgUmVnRXhwKCdeJyArIG5hbWVzcGFjZXMgKyAnJCcpKTtcbiAgICB9XG4gIH1cblxuICBmb3IgKGkgPSAwOyBpIDwgZXhwb3J0cy5pbnN0YW5jZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBleHBvcnRzLmluc3RhbmNlc1tpXTtcbiAgICBpbnN0YW5jZS5lbmFibGVkID0gZXhwb3J0cy5lbmFibGVkKGluc3RhbmNlLm5hbWVzcGFjZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBEaXNhYmxlIGRlYnVnIG91dHB1dC5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gIGV4cG9ydHMuZW5hYmxlKCcnKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIG1vZGUgbmFtZSBpcyBlbmFibGVkLCBmYWxzZSBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIGVuYWJsZWQobmFtZSkge1xuICBpZiAobmFtZVtuYW1lLmxlbmd0aCAtIDFdID09PSAnKicpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICB2YXIgaSwgbGVuO1xuICBmb3IgKGkgPSAwLCBsZW4gPSBleHBvcnRzLnNraXBzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgaWYgKGV4cG9ydHMuc2tpcHNbaV0udGVzdChuYW1lKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICBmb3IgKGkgPSAwLCBsZW4gPSBleHBvcnRzLm5hbWVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgaWYgKGV4cG9ydHMubmFtZXNbaV0udGVzdChuYW1lKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBDb2VyY2UgYHZhbGAuXG4gKlxuICogQHBhcmFtIHtNaXhlZH0gdmFsXG4gKiBAcmV0dXJuIHtNaXhlZH1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGNvZXJjZSh2YWwpIHtcbiAgaWYgKHZhbCBpbnN0YW5jZW9mIEVycm9yKSByZXR1cm4gdmFsLnN0YWNrIHx8IHZhbC5tZXNzYWdlO1xuICByZXR1cm4gdmFsO1xufVxuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgdGhpcy5fZXZlbnRzID0gdGhpcy5fZXZlbnRzIHx8IHt9O1xuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkO1xufVxubW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXG4vLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcbi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG5FdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXG4vLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3Ncbi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbihuKSB7XG4gIGlmICghaXNOdW1iZXIobikgfHwgbiA8IDAgfHwgaXNOYU4obikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCduIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciBlciwgaGFuZGxlciwgbGVuLCBhcmdzLCBpLCBsaXN0ZW5lcnM7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgdGhpcy5fZXZlbnRzID0ge307XG5cbiAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LlxuICBpZiAodHlwZSA9PT0gJ2Vycm9yJykge1xuICAgIGlmICghdGhpcy5fZXZlbnRzLmVycm9yIHx8XG4gICAgICAgIChpc09iamVjdCh0aGlzLl9ldmVudHMuZXJyb3IpICYmICF0aGlzLl9ldmVudHMuZXJyb3IubGVuZ3RoKSkge1xuICAgICAgZXIgPSBhcmd1bWVudHNbMV07XG4gICAgICBpZiAoZXIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEF0IGxlYXN0IGdpdmUgc29tZSBraW5kIG9mIGNvbnRleHQgdG8gdGhlIHVzZXJcbiAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkIFwiZXJyb3JcIiBldmVudC4gKCcgKyBlciArICcpJyk7XG4gICAgICAgIGVyci5jb250ZXh0ID0gZXI7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBoYW5kbGVyID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIGlmIChpc1VuZGVmaW5lZChoYW5kbGVyKSlcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIC8vIGZhc3QgY2FzZXNcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pO1xuICAgICAgICBicmVhaztcbiAgICAgIC8vIHNsb3dlclxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICAgIGhhbmRsZXIuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KGhhbmRsZXIpKSB7XG4gICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgbGlzdGVuZXJzID0gaGFuZGxlci5zbGljZSgpO1xuICAgIGxlbiA9IGxpc3RlbmVycy5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKVxuICAgICAgbGlzdGVuZXJzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIG07XG5cbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXG4gIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09IFwibmV3TGlzdGVuZXJcIiEgQmVmb3JlXG4gIC8vIGFkZGluZyBpdCB0byB0aGUgbGlzdGVuZXJzLCBmaXJzdCBlbWl0IFwibmV3TGlzdGVuZXJcIi5cbiAgaWYgKHRoaXMuX2V2ZW50cy5uZXdMaXN0ZW5lcilcbiAgICB0aGlzLmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSxcbiAgICAgICAgICAgICAgaXNGdW5jdGlvbihsaXN0ZW5lci5saXN0ZW5lcikgP1xuICAgICAgICAgICAgICBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjtcbiAgZWxzZSBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSlcbiAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdLnB1c2gobGlzdGVuZXIpO1xuICBlbHNlXG4gICAgLy8gQWRkaW5nIHRoZSBzZWNvbmQgZWxlbWVudCwgbmVlZCB0byBjaGFuZ2UgdG8gYXJyYXkuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gW3RoaXMuX2V2ZW50c1t0eXBlXSwgbGlzdGVuZXJdO1xuXG4gIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXG4gIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pICYmICF0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkKSB7XG4gICAgaWYgKCFpc1VuZGVmaW5lZCh0aGlzLl9tYXhMaXN0ZW5lcnMpKSB7XG4gICAgICBtID0gdGhpcy5fbWF4TGlzdGVuZXJzO1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gICAgfVxuXG4gICAgaWYgKG0gJiYgbSA+IDAgJiYgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCA+IG0pIHtcbiAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQgPSB0cnVlO1xuICAgICAgY29uc29sZS5lcnJvcignKG5vZGUpIHdhcm5pbmc6IHBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgJyArXG4gICAgICAgICAgICAgICAgICAgICdsZWFrIGRldGVjdGVkLiAlZCBsaXN0ZW5lcnMgYWRkZWQuICcgK1xuICAgICAgICAgICAgICAgICAgICAnVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQuJyxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCk7XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUudHJhY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgLy8gbm90IHN1cHBvcnRlZCBpbiBJRSAxMFxuICAgICAgICBjb25zb2xlLnRyYWNlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIHZhciBmaXJlZCA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIGcoKSB7XG4gICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBnKTtcblxuICAgIGlmICghZmlyZWQpIHtcbiAgICAgIGZpcmVkID0gdHJ1ZTtcbiAgICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG5cbiAgZy5saXN0ZW5lciA9IGxpc3RlbmVyO1xuICB0aGlzLm9uKHR5cGUsIGcpO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLy8gZW1pdHMgYSAncmVtb3ZlTGlzdGVuZXInIGV2ZW50IGlmZiB0aGUgbGlzdGVuZXIgd2FzIHJlbW92ZWRcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgbGlzdCwgcG9zaXRpb24sIGxlbmd0aCwgaTtcblxuICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICByZXR1cm4gdGhpcztcblxuICBsaXN0ID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuICBsZW5ndGggPSBsaXN0Lmxlbmd0aDtcbiAgcG9zaXRpb24gPSAtMTtcblxuICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHxcbiAgICAgIChpc0Z1bmN0aW9uKGxpc3QubGlzdGVuZXIpICYmIGxpc3QubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkge1xuICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcilcbiAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBsaXN0ZW5lcik7XG5cbiAgfSBlbHNlIGlmIChpc09iamVjdChsaXN0KSkge1xuICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tID4gMDspIHtcbiAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fFxuICAgICAgICAgIChsaXN0W2ldLmxpc3RlbmVyICYmIGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkge1xuICAgICAgICBwb3NpdGlvbiA9IGk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwb3NpdGlvbiA8IDApXG4gICAgICByZXR1cm4gdGhpcztcblxuICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgbGlzdC5sZW5ndGggPSAwO1xuICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGlzdC5zcGxpY2UocG9zaXRpb24sIDEpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIGtleSwgbGlzdGVuZXJzO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHJldHVybiB0aGlzO1xuXG4gIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcbiAgaWYgKCF0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgIGVsc2UgaWYgKHRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICBmb3IgKGtleSBpbiB0aGlzLl9ldmVudHMpIHtcbiAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xuICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcbiAgICB9XG4gICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XG4gICAgdGhpcy5fZXZlbnRzID0ge307XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgaWYgKGlzRnVuY3Rpb24obGlzdGVuZXJzKSkge1xuICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzKTtcbiAgfSBlbHNlIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAvLyBMSUZPIG9yZGVyXG4gICAgd2hpbGUgKGxpc3RlbmVycy5sZW5ndGgpXG4gICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyc1tsaXN0ZW5lcnMubGVuZ3RoIC0gMV0pO1xuICB9XG4gIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIHJldDtcbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICByZXQgPSBbXTtcbiAgZWxzZSBpZiAoaXNGdW5jdGlvbih0aGlzLl9ldmVudHNbdHlwZV0pKVxuICAgIHJldCA9IFt0aGlzLl9ldmVudHNbdHlwZV1dO1xuICBlbHNlXG4gICAgcmV0ID0gdGhpcy5fZXZlbnRzW3R5cGVdLnNsaWNlKCk7XG4gIHJldHVybiByZXQ7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbih0eXBlKSB7XG4gIGlmICh0aGlzLl9ldmVudHMpIHtcbiAgICB2YXIgZXZsaXN0ZW5lciA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICAgIGlmIChpc0Z1bmN0aW9uKGV2bGlzdGVuZXIpKVxuICAgICAgcmV0dXJuIDE7XG4gICAgZWxzZSBpZiAoZXZsaXN0ZW5lcilcbiAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDtcbiAgfVxuICByZXR1cm4gMDtcbn07XG5cbkV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpO1xufTtcblxuZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7XG59XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xufVxuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuIiwiLy8gb3JpZ2luYWxseSBwdWxsZWQgb3V0IG9mIHNpbXBsZS1wZWVyXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZ2V0QnJvd3NlclJUQyAoKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuIG51bGxcbiAgdmFyIHdydGMgPSB7XG4gICAgUlRDUGVlckNvbm5lY3Rpb246IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiB8fCB3aW5kb3cubW96UlRDUGVlckNvbm5lY3Rpb24gfHxcbiAgICAgIHdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbixcbiAgICBSVENTZXNzaW9uRGVzY3JpcHRpb246IHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb24gfHxcbiAgICAgIHdpbmRvdy5tb3pSVENTZXNzaW9uRGVzY3JpcHRpb24gfHwgd2luZG93LndlYmtpdFJUQ1Nlc3Npb25EZXNjcmlwdGlvbixcbiAgICBSVENJY2VDYW5kaWRhdGU6IHdpbmRvdy5SVENJY2VDYW5kaWRhdGUgfHwgd2luZG93Lm1velJUQ0ljZUNhbmRpZGF0ZSB8fFxuICAgICAgd2luZG93LndlYmtpdFJUQ0ljZUNhbmRpZGF0ZVxuICB9XG4gIGlmICghd3J0Yy5SVENQZWVyQ29ubmVjdGlvbikgcmV0dXJuIG51bGxcbiAgcmV0dXJuIHdydGNcbn1cbiIsImV4cG9ydHMucmVhZCA9IGZ1bmN0aW9uIChidWZmZXIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtXG4gIHZhciBlTGVuID0gKG5CeXRlcyAqIDgpIC0gbUxlbiAtIDFcbiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDFcbiAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG4gIHZhciBuQml0cyA9IC03XG4gIHZhciBpID0gaXNMRSA/IChuQnl0ZXMgLSAxKSA6IDBcbiAgdmFyIGQgPSBpc0xFID8gLTEgOiAxXG4gIHZhciBzID0gYnVmZmVyW29mZnNldCArIGldXG5cbiAgaSArPSBkXG5cbiAgZSA9IHMgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcbiAgcyA+Pj0gKC1uQml0cylcbiAgbkJpdHMgKz0gZUxlblxuICBmb3IgKDsgbkJpdHMgPiAwOyBlID0gKGUgKiAyNTYpICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgbSA9IGUgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcbiAgZSA+Pj0gKC1uQml0cylcbiAgbkJpdHMgKz0gbUxlblxuICBmb3IgKDsgbkJpdHMgPiAwOyBtID0gKG0gKiAyNTYpICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgaWYgKGUgPT09IDApIHtcbiAgICBlID0gMSAtIGVCaWFzXG4gIH0gZWxzZSBpZiAoZSA9PT0gZU1heCkge1xuICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KVxuICB9IGVsc2Uge1xuICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbilcbiAgICBlID0gZSAtIGVCaWFzXG4gIH1cbiAgcmV0dXJuIChzID8gLTEgOiAxKSAqIG0gKiBNYXRoLnBvdygyLCBlIC0gbUxlbilcbn1cblxuZXhwb3J0cy53cml0ZSA9IGZ1bmN0aW9uIChidWZmZXIsIHZhbHVlLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbSwgY1xuICB2YXIgZUxlbiA9IChuQnl0ZXMgKiA4KSAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgcnQgPSAobUxlbiA9PT0gMjMgPyBNYXRoLnBvdygyLCAtMjQpIC0gTWF0aC5wb3coMiwgLTc3KSA6IDApXG4gIHZhciBpID0gaXNMRSA/IDAgOiAobkJ5dGVzIC0gMSlcbiAgdmFyIGQgPSBpc0xFID8gMSA6IC0xXG4gIHZhciBzID0gdmFsdWUgPCAwIHx8ICh2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwKSA/IDEgOiAwXG5cbiAgdmFsdWUgPSBNYXRoLmFicyh2YWx1ZSlcblxuICBpZiAoaXNOYU4odmFsdWUpIHx8IHZhbHVlID09PSBJbmZpbml0eSkge1xuICAgIG0gPSBpc05hTih2YWx1ZSkgPyAxIDogMFxuICAgIGUgPSBlTWF4XG4gIH0gZWxzZSB7XG4gICAgZSA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjIpXG4gICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkge1xuICAgICAgZS0tXG4gICAgICBjICo9IDJcbiAgICB9XG4gICAgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICB2YWx1ZSArPSBydCAvIGNcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgKz0gcnQgKiBNYXRoLnBvdygyLCAxIC0gZUJpYXMpXG4gICAgfVxuICAgIGlmICh2YWx1ZSAqIGMgPj0gMikge1xuICAgICAgZSsrXG4gICAgICBjIC89IDJcbiAgICB9XG5cbiAgICBpZiAoZSArIGVCaWFzID49IGVNYXgpIHtcbiAgICAgIG0gPSAwXG4gICAgICBlID0gZU1heFxuICAgIH0gZWxzZSBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIG0gPSAoKHZhbHVlICogYykgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG4gICAgICBlID0gZSArIGVCaWFzXG4gICAgfSBlbHNlIHtcbiAgICAgIG0gPSB2YWx1ZSAqIE1hdGgucG93KDIsIGVCaWFzIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuICAgICAgZSA9IDBcbiAgICB9XG4gIH1cblxuICBmb3IgKDsgbUxlbiA+PSA4OyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBtICYgMHhmZiwgaSArPSBkLCBtIC89IDI1NiwgbUxlbiAtPSA4KSB7fVxuXG4gIGUgPSAoZSA8PCBtTGVuKSB8IG1cbiAgZUxlbiArPSBtTGVuXG4gIGZvciAoOyBlTGVuID4gMDsgYnVmZmVyW29mZnNldCArIGldID0gZSAmIDB4ZmYsIGkgKz0gZCwgZSAvPSAyNTYsIGVMZW4gLT0gOCkge31cblxuICBidWZmZXJbb2Zmc2V0ICsgaSAtIGRdIHw9IHMgKiAxMjhcbn1cbiIsImlmICh0eXBlb2YgT2JqZWN0LmNyZWF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAvLyBpbXBsZW1lbnRhdGlvbiBmcm9tIHN0YW5kYXJkIG5vZGUuanMgJ3V0aWwnIG1vZHVsZVxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHtcbiAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgIHZhbHVlOiBjdG9yLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICB9O1xufSBlbHNlIHtcbiAgLy8gb2xkIHNjaG9vbCBzaGltIGZvciBvbGQgYnJvd3NlcnNcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIHZhciBUZW1wQ3RvciA9IGZ1bmN0aW9uICgpIHt9XG4gICAgVGVtcEN0b3IucHJvdG90eXBlID0gc3VwZXJDdG9yLnByb3RvdHlwZVxuICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKClcbiAgICBjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGN0b3JcbiAgfVxufVxuIiwidmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7XG5cbm1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXJyKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKGFycikgPT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG4iLCIvKipcbiAqIEhlbHBlcnMuXG4gKi9cblxudmFyIHMgPSAxMDAwO1xudmFyIG0gPSBzICogNjA7XG52YXIgaCA9IG0gKiA2MDtcbnZhciBkID0gaCAqIDI0O1xudmFyIHkgPSBkICogMzY1LjI1O1xuXG4vKipcbiAqIFBhcnNlIG9yIGZvcm1hdCB0aGUgZ2l2ZW4gYHZhbGAuXG4gKlxuICogT3B0aW9uczpcbiAqXG4gKiAgLSBgbG9uZ2AgdmVyYm9zZSBmb3JtYXR0aW5nIFtmYWxzZV1cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IHZhbFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHRocm93cyB7RXJyb3J9IHRocm93IGFuIGVycm9yIGlmIHZhbCBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgbnVtYmVyXG4gKiBAcmV0dXJuIHtTdHJpbmd8TnVtYmVyfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHZhbCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsO1xuICBpZiAodHlwZSA9PT0gJ3N0cmluZycgJiYgdmFsLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gcGFyc2UodmFsKTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSAnbnVtYmVyJyAmJiBpc05hTih2YWwpID09PSBmYWxzZSkge1xuICAgIHJldHVybiBvcHRpb25zLmxvbmcgPyBmbXRMb25nKHZhbCkgOiBmbXRTaG9ydCh2YWwpO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICAndmFsIGlzIG5vdCBhIG5vbi1lbXB0eSBzdHJpbmcgb3IgYSB2YWxpZCBudW1iZXIuIHZhbD0nICtcbiAgICAgIEpTT04uc3RyaW5naWZ5KHZhbClcbiAgKTtcbn07XG5cbi8qKlxuICogUGFyc2UgdGhlIGdpdmVuIGBzdHJgIGFuZCByZXR1cm4gbWlsbGlzZWNvbmRzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlKHN0cikge1xuICBzdHIgPSBTdHJpbmcoc3RyKTtcbiAgaWYgKHN0ci5sZW5ndGggPiAxMDApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG1hdGNoID0gL14oKD86XFxkKyk/XFwuP1xcZCspICoobWlsbGlzZWNvbmRzP3xtc2Vjcz98bXN8c2Vjb25kcz98c2Vjcz98c3xtaW51dGVzP3xtaW5zP3xtfGhvdXJzP3xocnM/fGh8ZGF5cz98ZHx5ZWFycz98eXJzP3x5KT8kL2kuZXhlYyhcbiAgICBzdHJcbiAgKTtcbiAgaWYgKCFtYXRjaCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbiA9IHBhcnNlRmxvYXQobWF0Y2hbMV0pO1xuICB2YXIgdHlwZSA9IChtYXRjaFsyXSB8fCAnbXMnKS50b0xvd2VyQ2FzZSgpO1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICd5ZWFycyc6XG4gICAgY2FzZSAneWVhcic6XG4gICAgY2FzZSAneXJzJzpcbiAgICBjYXNlICd5cic6XG4gICAgY2FzZSAneSc6XG4gICAgICByZXR1cm4gbiAqIHk7XG4gICAgY2FzZSAnZGF5cyc6XG4gICAgY2FzZSAnZGF5JzpcbiAgICBjYXNlICdkJzpcbiAgICAgIHJldHVybiBuICogZDtcbiAgICBjYXNlICdob3Vycyc6XG4gICAgY2FzZSAnaG91cic6XG4gICAgY2FzZSAnaHJzJzpcbiAgICBjYXNlICdocic6XG4gICAgY2FzZSAnaCc6XG4gICAgICByZXR1cm4gbiAqIGg7XG4gICAgY2FzZSAnbWludXRlcyc6XG4gICAgY2FzZSAnbWludXRlJzpcbiAgICBjYXNlICdtaW5zJzpcbiAgICBjYXNlICdtaW4nOlxuICAgIGNhc2UgJ20nOlxuICAgICAgcmV0dXJuIG4gKiBtO1xuICAgIGNhc2UgJ3NlY29uZHMnOlxuICAgIGNhc2UgJ3NlY29uZCc6XG4gICAgY2FzZSAnc2Vjcyc6XG4gICAgY2FzZSAnc2VjJzpcbiAgICBjYXNlICdzJzpcbiAgICAgIHJldHVybiBuICogcztcbiAgICBjYXNlICdtaWxsaXNlY29uZHMnOlxuICAgIGNhc2UgJ21pbGxpc2Vjb25kJzpcbiAgICBjYXNlICdtc2Vjcyc6XG4gICAgY2FzZSAnbXNlYyc6XG4gICAgY2FzZSAnbXMnOlxuICAgICAgcmV0dXJuIG47XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBTaG9ydCBmb3JtYXQgZm9yIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBmbXRTaG9ydChtcykge1xuICBpZiAobXMgPj0gZCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gZCkgKyAnZCc7XG4gIH1cbiAgaWYgKG1zID49IGgpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIGgpICsgJ2gnO1xuICB9XG4gIGlmIChtcyA+PSBtKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBtKSArICdtJztcbiAgfVxuICBpZiAobXMgPj0gcykge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gcykgKyAncyc7XG4gIH1cbiAgcmV0dXJuIG1zICsgJ21zJztcbn1cblxuLyoqXG4gKiBMb25nIGZvcm1hdCBmb3IgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbXNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGZtdExvbmcobXMpIHtcbiAgcmV0dXJuIHBsdXJhbChtcywgZCwgJ2RheScpIHx8XG4gICAgcGx1cmFsKG1zLCBoLCAnaG91cicpIHx8XG4gICAgcGx1cmFsKG1zLCBtLCAnbWludXRlJykgfHxcbiAgICBwbHVyYWwobXMsIHMsICdzZWNvbmQnKSB8fFxuICAgIG1zICsgJyBtcyc7XG59XG5cbi8qKlxuICogUGx1cmFsaXphdGlvbiBoZWxwZXIuXG4gKi9cblxuZnVuY3Rpb24gcGx1cmFsKG1zLCBuLCBuYW1lKSB7XG4gIGlmIChtcyA8IG4pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKG1zIDwgbiAqIDEuNSkge1xuICAgIHJldHVybiBNYXRoLmZsb29yKG1zIC8gbikgKyAnICcgKyBuYW1lO1xuICB9XG4gIHJldHVybiBNYXRoLmNlaWwobXMgLyBuKSArICcgJyArIG5hbWUgKyAncyc7XG59XG4iLCIvKiFcbiAqIHBpeGkuanMgLSB2NC44LjlcbiAqIENvbXBpbGVkIFRodSwgMTYgSmFuIDIwMjAgMjE6Mzk6NDUgVVRDXG4gKlxuICogcGl4aS5qcyBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKiBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlXG4gKi9cbiFmdW5jdGlvbih0KXtpZihcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz10KCk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLHQpO2Vsc2V7dmFyIGU7ZT1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsZS5QSVhJPXQoKX19KGZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLHIsbil7ZnVuY3Rpb24gaShzLGEpe2lmKCFyW3NdKXtpZighZVtzXSl7dmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighYSYmdSlyZXR1cm4gdShzLCEwKTtpZihvKXJldHVybiBvKHMsITApO3ZhciBoPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrcytcIidcIik7dGhyb3cgaC5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGh9dmFyIGw9cltzXT17ZXhwb3J0czp7fX07ZVtzXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbih0KXt2YXIgcj1lW3NdWzFdW3RdO3JldHVybiBpKHJ8fHQpfSxsLGwuZXhwb3J0cyx0LGUscixuKX1yZXR1cm4gcltzXS5leHBvcnRzfWZvcih2YXIgbz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLHM9MDtzPG4ubGVuZ3RoO3MrKylpKG5bc10pO3JldHVybiBpfXJldHVybiB0fSgpKHsxOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7XCJ1c2UgcmVzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe3ZhciBlPTMyO3JldHVybiB0Jj0tdCx0JiZlLS0sNjU1MzUmdCYmKGUtPTE2KSwxNjcxMTkzNSZ0JiYoZS09OCksMjUyNjQ1MTM1JnQmJihlLT00KSw4NTg5OTM0NTkmdCYmKGUtPTIpLDE0MzE2NTU3NjUmdCYmKGUtPTEpLGV9ci5JTlRfQklUUz0zMixyLklOVF9NQVg9MjE0NzQ4MzY0NyxyLklOVF9NSU49LTE8PDMxLHIuc2lnbj1mdW5jdGlvbih0KXtyZXR1cm4odD4wKS0odDwwKX0sci5hYnM9ZnVuY3Rpb24odCl7dmFyIGU9dD4+MzE7cmV0dXJuKHReZSktZX0sci5taW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gZV4odF5lKSYtKHQ8ZSl9LHIubWF4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHReKHReZSkmLSh0PGUpfSxyLmlzUG93Mj1mdW5jdGlvbih0KXtyZXR1cm4hKHQmdC0xfHwhdCl9LHIubG9nMj1mdW5jdGlvbih0KXt2YXIgZSxyO3JldHVybiBlPSh0PjY1NTM1KTw8NCx0Pj4+PWUscj0odD4yNTUpPDwzLHQ+Pj49cixlfD1yLHI9KHQ+MTUpPDwyLHQ+Pj49cixlfD1yLHI9KHQ+Myk8PDEsdD4+Pj1yLChlfD1yKXx0Pj4xfSxyLmxvZzEwPWZ1bmN0aW9uKHQpe3JldHVybiB0Pj0xZTk/OTp0Pj0xZTg/ODp0Pj0xZTc/Nzp0Pj0xZTY/Njp0Pj0xZTU/NTp0Pj0xZTQ/NDp0Pj0xZTM/Mzp0Pj0xMDA/Mjp0Pj0xMD8xOjB9LHIucG9wQ291bnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQtPXQ+Pj4xJjE0MzE2NTU3NjUsMTY4NDMwMDkqKCh0PSg4NTg5OTM0NTkmdCkrKHQ+Pj4yJjg1ODk5MzQ1OSkpKyh0Pj4+NCkmMjUyNjQ1MTM1KT4+PjI0fSxyLmNvdW50VHJhaWxpbmdaZXJvcz1uLHIubmV4dFBvdzI9ZnVuY3Rpb24odCl7cmV0dXJuIHQrPTA9PT10LC0tdCx0fD10Pj4+MSx0fD10Pj4+Mix0fD10Pj4+NCx0fD10Pj4+OCwodHw9dD4+PjE2KSsxfSxyLnByZXZQb3cyPWZ1bmN0aW9uKHQpe3JldHVybiB0fD10Pj4+MSx0fD10Pj4+Mix0fD10Pj4+NCx0fD10Pj4+OCwodHw9dD4+PjE2KS0odD4+PjEpfSxyLnBhcml0eT1mdW5jdGlvbih0KXtyZXR1cm4gdF49dD4+PjE2LHRePXQ+Pj44LHRePXQ+Pj40LDI3MDMwPj4+KHQmPTE1KSYxfTt2YXIgaT1uZXcgQXJyYXkoMjU2KTshZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTwyNTY7KytlKXt2YXIgcj1lLG49ZSxpPTc7Zm9yKHI+Pj49MTtyO3I+Pj49MSluPDw9MSxufD0xJnIsLS1pO3RbZV09bjw8aSYyNTV9fShpKSxyLnJldmVyc2U9ZnVuY3Rpb24odCl7cmV0dXJuIGlbMjU1JnRdPDwyNHxpW3Q+Pj44JjI1NV08PDE2fGlbdD4+PjE2JjI1NV08PDh8aVt0Pj4+MjQmMjU1XX0sci5pbnRlcmxlYXZlMj1mdW5jdGlvbih0LGUpe3JldHVybiB0Jj02NTUzNSx0PTE2NzExOTM1Jih0fHQ8PDgpLHQ9MjUyNjQ1MTM1Jih0fHQ8PDQpLHQ9ODU4OTkzNDU5Jih0fHQ8PDIpLHQ9MTQzMTY1NTc2NSYodHx0PDwxKSxlJj02NTUzNSxlPTE2NzExOTM1JihlfGU8PDgpLGU9MjUyNjQ1MTM1JihlfGU8PDQpLGU9ODU4OTkzNDU5JihlfGU8PDIpLGU9MTQzMTY1NTc2NSYoZXxlPDwxKSx0fGU8PDF9LHIuZGVpbnRlcmxlYXZlMj1mdW5jdGlvbih0LGUpe3JldHVybiB0PXQ+Pj5lJjE0MzE2NTU3NjUsdD04NTg5OTM0NTkmKHR8dD4+PjEpLHQ9MjUyNjQ1MTM1Jih0fHQ+Pj4yKSx0PTE2NzExOTM1Jih0fHQ+Pj40KSwodD02NTUzNSYodHx0Pj4+MTYpKTw8MTY+PjE2fSxyLmludGVybGVhdmUzPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdCY9MTAyMyx0PTQyNzgxOTAzMzUmKHR8dDw8MTYpLHQ9MjUxNzE5Njk1Jih0fHQ8PDgpLHQ9MzI3MjM1NjAzNSYodHx0PDw0KSx0PTEyMjcxMzM1MTMmKHR8dDw8MiksZSY9MTAyMyxlPTQyNzgxOTAzMzUmKGV8ZTw8MTYpLGU9MjUxNzE5Njk1JihlfGU8PDgpLGU9MzI3MjM1NjAzNSYoZXxlPDw0KSxlPTEyMjcxMzM1MTMmKGV8ZTw8MiksdHw9ZTw8MSxyJj0xMDIzLHI9NDI3ODE5MDMzNSYocnxyPDwxNikscj0yNTE3MTk2OTUmKHJ8cjw8OCkscj0zMjcyMzU2MDM1JihyfHI8PDQpLHI9MTIyNzEzMzUxMyYocnxyPDwyKSx0fHI8PDJ9LHIuZGVpbnRlcmxlYXZlMz1mdW5jdGlvbih0LGUpe3JldHVybiB0PXQ+Pj5lJjEyMjcxMzM1MTMsdD0zMjcyMzU2MDM1Jih0fHQ+Pj4yKSx0PTI1MTcxOTY5NSYodHx0Pj4+NCksdD00Mjc4MTkwMzM1Jih0fHQ+Pj44KSwodD0xMDIzJih0fHQ+Pj4xNikpPDwyMj4+MjJ9LHIubmV4dENvbWJpbmF0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPXR8dC0xO3JldHVybiBlKzF8KH5lJi1+ZSktMT4+Pm4odCkrMX19LHt9XSwyOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUscil7cj1yfHwyO3ZhciBuPWUmJmUubGVuZ3RoLG89bj9lWzBdKnI6dC5sZW5ndGgsYT1pKHQsMCxvLHIsITApLHU9W107aWYoIWF8fGEubmV4dD09PWEucHJldilyZXR1cm4gdTt2YXIgaCxsLGQsZixwLHYsZztpZihuJiYoYT1jKHQsZSxhLHIpKSx0Lmxlbmd0aD44MCpyKXtoPWQ9dFswXSxsPWY9dFsxXTtmb3IodmFyIHk9cjt5PG87eSs9cilwPXRbeV0sdj10W3krMV0scDxoJiYoaD1wKSx2PGwmJihsPXYpLHA+ZCYmKGQ9cCksdj5mJiYoZj12KTtnPU1hdGgubWF4KGQtaCxmLWwpLGc9MCE9PWc/MS9nOjB9cmV0dXJuIHMoYSx1LHIsaCxsLGcpLHV9ZnVuY3Rpb24gaSh0LGUscixuLGkpe3ZhciBvLHM7aWYoaT09PUEodCxlLHIsbik+MClmb3Iobz1lO288cjtvKz1uKXM9UChvLHRbb10sdFtvKzFdLHMpO2Vsc2UgZm9yKG89ci1uO28+PWU7by09bilzPVAobyx0W29dLHRbbysxXSxzKTtyZXR1cm4gcyYmVChzLHMubmV4dCkmJihDKHMpLHM9cy5uZXh0KSxzfWZ1bmN0aW9uIG8odCxlKXtpZighdClyZXR1cm4gdDtlfHwoZT10KTt2YXIgcixuPXQ7ZG97aWYocj0hMSxuLnN0ZWluZXJ8fCFUKG4sbi5uZXh0KSYmMCE9PXgobi5wcmV2LG4sbi5uZXh0KSluPW4ubmV4dDtlbHNle2lmKEMobiksKG49ZT1uLnByZXYpPT09bi5uZXh0KWJyZWFrO3I9ITB9fXdoaWxlKHJ8fG4hPT1lKTtyZXR1cm4gZX1mdW5jdGlvbiBzKHQsZSxyLG4saSxjLGQpe2lmKHQpeyFkJiZjJiZ2KHQsbixpLGMpO2Zvcih2YXIgZixwLGc9dDt0LnByZXYhPT10Lm5leHQ7KWlmKGY9dC5wcmV2LHA9dC5uZXh0LGM/dSh0LG4saSxjKTphKHQpKWUucHVzaChmLmkvciksZS5wdXNoKHQuaS9yKSxlLnB1c2gocC5pL3IpLEModCksdD1wLm5leHQsZz1wLm5leHQ7ZWxzZSBpZigodD1wKT09PWcpe2Q/MT09PWQ/KHQ9aCh0LGUscikscyh0LGUscixuLGksYywyKSk6Mj09PWQmJmwodCxlLHIsbixpLGMpOnMobyh0KSxlLHIsbixpLGMsMSk7YnJlYWt9fX1mdW5jdGlvbiBhKHQpe3ZhciBlPXQucHJldixyPXQsbj10Lm5leHQ7aWYoeChlLHIsbik+PTApcmV0dXJuITE7Zm9yKHZhciBpPXQubmV4dC5uZXh0O2khPT10LnByZXY7KXtpZihfKGUueCxlLnksci54LHIueSxuLngsbi55LGkueCxpLnkpJiZ4KGkucHJldixpLGkubmV4dCk+PTApcmV0dXJuITE7aT1pLm5leHR9cmV0dXJuITB9ZnVuY3Rpb24gdSh0LGUscixuKXt2YXIgaT10LnByZXYsbz10LHM9dC5uZXh0O2lmKHgoaSxvLHMpPj0wKXJldHVybiExO2Zvcih2YXIgYT1pLng8by54P2kueDxzLng/aS54OnMueDpvLng8cy54P28ueDpzLngsdT1pLnk8by55P2kueTxzLnk/aS55OnMueTpvLnk8cy55P28ueTpzLnksaD1pLng+by54P2kueD5zLng/aS54OnMueDpvLng+cy54P28ueDpzLngsbD1pLnk+by55P2kueT5zLnk/aS55OnMueTpvLnk+cy55P28ueTpzLnksYz15KGEsdSxlLHIsbiksZD15KGgsbCxlLHIsbiksZj10LnByZXZaLHA9dC5uZXh0WjtmJiZmLno+PWMmJnAmJnAuejw9ZDspe2lmKGYhPT10LnByZXYmJmYhPT10Lm5leHQmJl8oaS54LGkueSxvLngsby55LHMueCxzLnksZi54LGYueSkmJngoZi5wcmV2LGYsZi5uZXh0KT49MClyZXR1cm4hMTtpZihmPWYucHJldloscCE9PXQucHJldiYmcCE9PXQubmV4dCYmXyhpLngsaS55LG8ueCxvLnkscy54LHMueSxwLngscC55KSYmeChwLnByZXYscCxwLm5leHQpPj0wKXJldHVybiExO3A9cC5uZXh0Wn1mb3IoO2YmJmYuej49Yzspe2lmKGYhPT10LnByZXYmJmYhPT10Lm5leHQmJl8oaS54LGkueSxvLngsby55LHMueCxzLnksZi54LGYueSkmJngoZi5wcmV2LGYsZi5uZXh0KT49MClyZXR1cm4hMTtmPWYucHJldlp9Zm9yKDtwJiZwLno8PWQ7KXtpZihwIT09dC5wcmV2JiZwIT09dC5uZXh0JiZfKGkueCxpLnksby54LG8ueSxzLngscy55LHAueCxwLnkpJiZ4KHAucHJldixwLHAubmV4dCk+PTApcmV0dXJuITE7cD1wLm5leHRafXJldHVybiEwfWZ1bmN0aW9uIGgodCxlLHIpe3ZhciBuPXQ7ZG97dmFyIGk9bi5wcmV2LG89bi5uZXh0Lm5leHQ7IVQoaSxvKSYmdyhpLG4sbi5uZXh0LG8pJiZTKGksbykmJlMobyxpKSYmKGUucHVzaChpLmkvciksZS5wdXNoKG4uaS9yKSxlLnB1c2goby5pL3IpLEMobiksQyhuLm5leHQpLG49dD1vKSxuPW4ubmV4dH13aGlsZShuIT09dCk7cmV0dXJuIG59ZnVuY3Rpb24gbCh0LGUscixuLGksYSl7dmFyIHU9dDtkb3tmb3IodmFyIGg9dS5uZXh0Lm5leHQ7aCE9PXUucHJldjspe2lmKHUuaSE9PWguaSYmYih1LGgpKXt2YXIgbD1NKHUsaCk7cmV0dXJuIHU9byh1LHUubmV4dCksbD1vKGwsbC5uZXh0KSxzKHUsZSxyLG4saSxhKSx2b2lkIHMobCxlLHIsbixpLGEpfWg9aC5uZXh0fXU9dS5uZXh0fXdoaWxlKHUhPT10KX1mdW5jdGlvbiBjKHQsZSxyLG4pe3ZhciBzLGEsdSxoLGwsYz1bXTtmb3Iocz0wLGE9ZS5sZW5ndGg7czxhO3MrKyl1PWVbc10qbixoPXM8YS0xP2VbcysxXSpuOnQubGVuZ3RoLGw9aSh0LHUsaCxuLCExKSxsPT09bC5uZXh0JiYobC5zdGVpbmVyPSEwKSxjLnB1c2gobShsKSk7Zm9yKGMuc29ydChkKSxzPTA7czxjLmxlbmd0aDtzKyspZihjW3NdLHIpLHI9byhyLHIubmV4dCk7cmV0dXJuIHJ9ZnVuY3Rpb24gZCh0LGUpe3JldHVybiB0LngtZS54fWZ1bmN0aW9uIGYodCxlKXtpZihlPXAodCxlKSl7dmFyIHI9TShlLHQpO28ocixyLm5leHQpfX1mdW5jdGlvbiBwKHQsZSl7dmFyIHIsbj1lLGk9dC54LG89dC55LHM9LTEvMDtkb3tpZihvPD1uLnkmJm8+PW4ubmV4dC55JiZuLm5leHQueSE9PW4ueSl7dmFyIGE9bi54KyhvLW4ueSkqKG4ubmV4dC54LW4ueCkvKG4ubmV4dC55LW4ueSk7aWYoYTw9aSYmYT5zKXtpZihzPWEsYT09PWkpe2lmKG89PT1uLnkpcmV0dXJuIG47aWYobz09PW4ubmV4dC55KXJldHVybiBuLm5leHR9cj1uLng8bi5uZXh0Lng/bjpuLm5leHR9fW49bi5uZXh0fXdoaWxlKG4hPT1lKTtpZighcilyZXR1cm4gbnVsbDtpZihpPT09cylyZXR1cm4gci5wcmV2O3ZhciB1LGg9cixsPXIueCxjPXIueSxkPTEvMDtmb3Iobj1yLm5leHQ7biE9PWg7KWk+PW4ueCYmbi54Pj1sJiZpIT09bi54JiZfKG88Yz9pOnMsbyxsLGMsbzxjP3M6aSxvLG4ueCxuLnkpJiYoKHU9TWF0aC5hYnMoby1uLnkpLyhpLW4ueCkpPGR8fHU9PT1kJiZuLng+ci54KSYmUyhuLHQpJiYocj1uLGQ9dSksbj1uLm5leHQ7cmV0dXJuIHJ9ZnVuY3Rpb24gdih0LGUscixuKXt2YXIgaT10O2Rve251bGw9PT1pLnomJihpLno9eShpLngsaS55LGUscixuKSksaS5wcmV2Wj1pLnByZXYsaS5uZXh0Wj1pLm5leHQsaT1pLm5leHR9d2hpbGUoaSE9PXQpO2kucHJldloubmV4dFo9bnVsbCxpLnByZXZaPW51bGwsZyhpKX1mdW5jdGlvbiBnKHQpe3ZhciBlLHIsbixpLG8scyxhLHUsaD0xO2Rve2ZvcihyPXQsdD1udWxsLG89bnVsbCxzPTA7cjspe2ZvcihzKyssbj1yLGE9MCxlPTA7ZTxoJiYoYSsrLG49bi5uZXh0Wik7ZSsrKTtmb3IodT1oO2E+MHx8dT4wJiZuOykwIT09YSYmKDA9PT11fHwhbnx8ci56PD1uLnopPyhpPXIscj1yLm5leHRaLGEtLSk6KGk9bixuPW4ubmV4dFosdS0tKSxvP28ubmV4dFo9aTp0PWksaS5wcmV2Wj1vLG89aTtyPW59by5uZXh0Wj1udWxsLGgqPTJ9d2hpbGUocz4xKTtyZXR1cm4gdH1mdW5jdGlvbiB5KHQsZSxyLG4saSl7cmV0dXJuIHQ9MzI3NjcqKHQtcikqaSxlPTMyNzY3KihlLW4pKmksdD0xNjcxMTkzNSYodHx0PDw4KSx0PTI1MjY0NTEzNSYodHx0PDw0KSx0PTg1ODk5MzQ1OSYodHx0PDwyKSx0PTE0MzE2NTU3NjUmKHR8dDw8MSksZT0xNjcxMTkzNSYoZXxlPDw4KSxlPTI1MjY0NTEzNSYoZXxlPDw0KSxlPTg1ODk5MzQ1OSYoZXxlPDwyKSxlPTE0MzE2NTU3NjUmKGV8ZTw8MSksdHxlPDwxfWZ1bmN0aW9uIG0odCl7dmFyIGU9dCxyPXQ7ZG97ZS54PHIueCYmKHI9ZSksZT1lLm5leHR9d2hpbGUoZSE9PXQpO3JldHVybiByfWZ1bmN0aW9uIF8odCxlLHIsbixpLG8scyxhKXtyZXR1cm4oaS1zKSooZS1hKS0odC1zKSooby1hKT49MCYmKHQtcykqKG4tYSktKHItcykqKGUtYSk+PTAmJihyLXMpKihvLWEpLShpLXMpKihuLWEpPj0wfWZ1bmN0aW9uIGIodCxlKXtyZXR1cm4gdC5uZXh0LmkhPT1lLmkmJnQucHJldi5pIT09ZS5pJiYhRSh0LGUpJiZTKHQsZSkmJlMoZSx0KSYmTyh0LGUpfWZ1bmN0aW9uIHgodCxlLHIpe3JldHVybihlLnktdC55KSooci54LWUueCktKGUueC10LngpKihyLnktZS55KX1mdW5jdGlvbiBUKHQsZSl7cmV0dXJuIHQueD09PWUueCYmdC55PT09ZS55fWZ1bmN0aW9uIHcodCxlLHIsbil7cmV0dXJuISEoVCh0LGUpJiZUKHIsbil8fFQodCxuKSYmVChyLGUpKXx8eCh0LGUscik+MCE9eCh0LGUsbik+MCYmeChyLG4sdCk+MCE9eChyLG4sZSk+MH1mdW5jdGlvbiBFKHQsZSl7dmFyIHI9dDtkb3tpZihyLmkhPT10LmkmJnIubmV4dC5pIT09dC5pJiZyLmkhPT1lLmkmJnIubmV4dC5pIT09ZS5pJiZ3KHIsci5uZXh0LHQsZSkpcmV0dXJuITA7cj1yLm5leHR9d2hpbGUociE9PXQpO3JldHVybiExfWZ1bmN0aW9uIFModCxlKXtyZXR1cm4geCh0LnByZXYsdCx0Lm5leHQpPDA/eCh0LGUsdC5uZXh0KT49MCYmeCh0LHQucHJldixlKT49MDp4KHQsZSx0LnByZXYpPDB8fHgodCx0Lm5leHQsZSk8MH1mdW5jdGlvbiBPKHQsZSl7dmFyIHI9dCxuPSExLGk9KHQueCtlLngpLzIsbz0odC55K2UueSkvMjtkb3tyLnk+byE9ci5uZXh0Lnk+byYmci5uZXh0LnkhPT1yLnkmJmk8KHIubmV4dC54LXIueCkqKG8tci55KS8oci5uZXh0Lnktci55KStyLngmJihuPSFuKSxyPXIubmV4dH13aGlsZShyIT09dCk7cmV0dXJuIG59ZnVuY3Rpb24gTSh0LGUpe3ZhciByPW5ldyBSKHQuaSx0LngsdC55KSxuPW5ldyBSKGUuaSxlLngsZS55KSxpPXQubmV4dCxvPWUucHJldjtyZXR1cm4gdC5uZXh0PWUsZS5wcmV2PXQsci5uZXh0PWksaS5wcmV2PXIsbi5uZXh0PXIsci5wcmV2PW4sby5uZXh0PW4sbi5wcmV2PW8sbn1mdW5jdGlvbiBQKHQsZSxyLG4pe3ZhciBpPW5ldyBSKHQsZSxyKTtyZXR1cm4gbj8oaS5uZXh0PW4ubmV4dCxpLnByZXY9bixuLm5leHQucHJldj1pLG4ubmV4dD1pKTooaS5wcmV2PWksaS5uZXh0PWkpLGl9ZnVuY3Rpb24gQyh0KXt0Lm5leHQucHJldj10LnByZXYsdC5wcmV2Lm5leHQ9dC5uZXh0LHQucHJldlomJih0LnByZXZaLm5leHRaPXQubmV4dFopLHQubmV4dFomJih0Lm5leHRaLnByZXZaPXQucHJldlopfWZ1bmN0aW9uIFIodCxlLHIpe3RoaXMuaT10LHRoaXMueD1lLHRoaXMueT1yLHRoaXMucHJldj1udWxsLHRoaXMubmV4dD1udWxsLHRoaXMuej1udWxsLHRoaXMucHJldlo9bnVsbCx0aGlzLm5leHRaPW51bGwsdGhpcy5zdGVpbmVyPSExfWZ1bmN0aW9uIEEodCxlLHIsbil7Zm9yKHZhciBpPTAsbz1lLHM9ci1uO288cjtvKz1uKWkrPSh0W3NdLXRbb10pKih0W28rMV0rdFtzKzFdKSxzPW87cmV0dXJuIGl9ZS5leHBvcnRzPW4sZS5leHBvcnRzLmRlZmF1bHQ9bixuLmRldmlhdGlvbj1mdW5jdGlvbih0LGUscixuKXt2YXIgaT1lJiZlLmxlbmd0aCxvPWk/ZVswXSpyOnQubGVuZ3RoLHM9TWF0aC5hYnMoQSh0LDAsbyxyKSk7aWYoaSlmb3IodmFyIGE9MCx1PWUubGVuZ3RoO2E8dTthKyspe3ZhciBoPWVbYV0qcixsPWE8dS0xP2VbYSsxXSpyOnQubGVuZ3RoO3MtPU1hdGguYWJzKEEodCxoLGwscikpfXZhciBjPTA7Zm9yKGE9MDthPG4ubGVuZ3RoO2ErPTMpe3ZhciBkPW5bYV0qcixmPW5bYSsxXSpyLHA9blthKzJdKnI7Yys9TWF0aC5hYnMoKHRbZF0tdFtwXSkqKHRbZisxXS10W2QrMV0pLSh0W2RdLXRbZl0pKih0W3ArMV0tdFtkKzFdKSl9cmV0dXJuIDA9PT1zJiYwPT09Yz8wOk1hdGguYWJzKChjLXMpL3MpfSxuLmZsYXR0ZW49ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRbMF1bMF0ubGVuZ3RoLHI9e3ZlcnRpY2VzOltdLGhvbGVzOltdLGRpbWVuc2lvbnM6ZX0sbj0wLGk9MDtpPHQubGVuZ3RoO2krKyl7Zm9yKHZhciBvPTA7bzx0W2ldLmxlbmd0aDtvKyspZm9yKHZhciBzPTA7czxlO3MrKylyLnZlcnRpY2VzLnB1c2godFtpXVtvXVtzXSk7aT4wJiYobis9dFtpLTFdLmxlbmd0aCxyLmhvbGVzLnB1c2gobikpfXJldHVybiByfX0se31dLDM6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKCl7fWZ1bmN0aW9uIGkodCxlLHIpe3RoaXMuZm49dCx0aGlzLmNvbnRleHQ9ZSx0aGlzLm9uY2U9cnx8ITF9ZnVuY3Rpb24gbygpe3RoaXMuX2V2ZW50cz1uZXcgbix0aGlzLl9ldmVudHNDb3VudD0wfXZhciBzPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksYT1cIn5cIjtPYmplY3QuY3JlYXRlJiYobi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShudWxsKSwobmV3IG4pLl9fcHJvdG9fX3x8KGE9ITEpKSxvLnByb3RvdHlwZS5ldmVudE5hbWVzPWZ1bmN0aW9uKCl7dmFyIHQsZSxyPVtdO2lmKDA9PT10aGlzLl9ldmVudHNDb3VudClyZXR1cm4gcjtmb3IoZSBpbiB0PXRoaXMuX2V2ZW50cylzLmNhbGwodCxlKSYmci5wdXNoKGE/ZS5zbGljZSgxKTplKTtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scz9yLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpKTpyfSxvLnByb3RvdHlwZS5saXN0ZW5lcnM9ZnVuY3Rpb24odCxlKXt2YXIgcj1hP2ErdDp0LG49dGhpcy5fZXZlbnRzW3JdO2lmKGUpcmV0dXJuISFuO2lmKCFuKXJldHVybltdO2lmKG4uZm4pcmV0dXJuW24uZm5dO2Zvcih2YXIgaT0wLG89bi5sZW5ndGgscz1uZXcgQXJyYXkobyk7aTxvO2krKylzW2ldPW5baV0uZm47cmV0dXJuIHN9LG8ucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24odCxlLHIsbixpLG8pe3ZhciBzPWE/YSt0OnQ7aWYoIXRoaXMuX2V2ZW50c1tzXSlyZXR1cm4hMTt2YXIgdSxoLGw9dGhpcy5fZXZlbnRzW3NdLGM9YXJndW1lbnRzLmxlbmd0aDtpZihsLmZuKXtzd2l0Y2gobC5vbmNlJiZ0aGlzLnJlbW92ZUxpc3RlbmVyKHQsbC5mbix2b2lkIDAsITApLGMpe2Nhc2UgMTpyZXR1cm4gbC5mbi5jYWxsKGwuY29udGV4dCksITA7Y2FzZSAyOnJldHVybiBsLmZuLmNhbGwobC5jb250ZXh0LGUpLCEwO2Nhc2UgMzpyZXR1cm4gbC5mbi5jYWxsKGwuY29udGV4dCxlLHIpLCEwO2Nhc2UgNDpyZXR1cm4gbC5mbi5jYWxsKGwuY29udGV4dCxlLHIsbiksITA7Y2FzZSA1OnJldHVybiBsLmZuLmNhbGwobC5jb250ZXh0LGUscixuLGkpLCEwO2Nhc2UgNjpyZXR1cm4gbC5mbi5jYWxsKGwuY29udGV4dCxlLHIsbixpLG8pLCEwfWZvcihoPTEsdT1uZXcgQXJyYXkoYy0xKTtoPGM7aCsrKXVbaC0xXT1hcmd1bWVudHNbaF07bC5mbi5hcHBseShsLmNvbnRleHQsdSl9ZWxzZXt2YXIgZCxmPWwubGVuZ3RoO2ZvcihoPTA7aDxmO2grKylzd2l0Y2gobFtoXS5vbmNlJiZ0aGlzLnJlbW92ZUxpc3RlbmVyKHQsbFtoXS5mbix2b2lkIDAsITApLGMpe2Nhc2UgMTpsW2hdLmZuLmNhbGwobFtoXS5jb250ZXh0KTticmVhaztjYXNlIDI6bFtoXS5mbi5jYWxsKGxbaF0uY29udGV4dCxlKTticmVhaztjYXNlIDM6bFtoXS5mbi5jYWxsKGxbaF0uY29udGV4dCxlLHIpO2JyZWFrO2Nhc2UgNDpsW2hdLmZuLmNhbGwobFtoXS5jb250ZXh0LGUscixuKTticmVhaztkZWZhdWx0OmlmKCF1KWZvcihkPTEsdT1uZXcgQXJyYXkoYy0xKTtkPGM7ZCsrKXVbZC0xXT1hcmd1bWVudHNbZF07bFtoXS5mbi5hcHBseShsW2hdLmNvbnRleHQsdSl9fXJldHVybiEwfSxvLnByb3RvdHlwZS5vbj1mdW5jdGlvbih0LGUscil7dmFyIG49bmV3IGkoZSxyfHx0aGlzKSxvPWE/YSt0OnQ7cmV0dXJuIHRoaXMuX2V2ZW50c1tvXT90aGlzLl9ldmVudHNbb10uZm4/dGhpcy5fZXZlbnRzW29dPVt0aGlzLl9ldmVudHNbb10sbl06dGhpcy5fZXZlbnRzW29dLnB1c2gobik6KHRoaXMuX2V2ZW50c1tvXT1uLHRoaXMuX2V2ZW50c0NvdW50KyspLHRoaXN9LG8ucHJvdG90eXBlLm9uY2U9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPW5ldyBpKGUscnx8dGhpcywhMCksbz1hP2ErdDp0O3JldHVybiB0aGlzLl9ldmVudHNbb10/dGhpcy5fZXZlbnRzW29dLmZuP3RoaXMuX2V2ZW50c1tvXT1bdGhpcy5fZXZlbnRzW29dLG5dOnRoaXMuX2V2ZW50c1tvXS5wdXNoKG4pOih0aGlzLl9ldmVudHNbb109bix0aGlzLl9ldmVudHNDb3VudCsrKSx0aGlzfSxvLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbih0LGUscixpKXt2YXIgbz1hP2ErdDp0O2lmKCF0aGlzLl9ldmVudHNbb10pcmV0dXJuIHRoaXM7aWYoIWUpcmV0dXJuIDA9PS0tdGhpcy5fZXZlbnRzQ291bnQ/dGhpcy5fZXZlbnRzPW5ldyBuOmRlbGV0ZSB0aGlzLl9ldmVudHNbb10sdGhpczt2YXIgcz10aGlzLl9ldmVudHNbb107aWYocy5mbilzLmZuIT09ZXx8aSYmIXMub25jZXx8ciYmcy5jb250ZXh0IT09cnx8KDA9PS0tdGhpcy5fZXZlbnRzQ291bnQ/dGhpcy5fZXZlbnRzPW5ldyBuOmRlbGV0ZSB0aGlzLl9ldmVudHNbb10pO2Vsc2V7Zm9yKHZhciB1PTAsaD1bXSxsPXMubGVuZ3RoO3U8bDt1KyspKHNbdV0uZm4hPT1lfHxpJiYhc1t1XS5vbmNlfHxyJiZzW3VdLmNvbnRleHQhPT1yKSYmaC5wdXNoKHNbdV0pO2gubGVuZ3RoP3RoaXMuX2V2ZW50c1tvXT0xPT09aC5sZW5ndGg/aFswXTpoOjA9PS0tdGhpcy5fZXZlbnRzQ291bnQ/dGhpcy5fZXZlbnRzPW5ldyBuOmRlbGV0ZSB0aGlzLl9ldmVudHNbb119cmV0dXJuIHRoaXN9LG8ucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycz1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4gdD8oZT1hP2ErdDp0LHRoaXMuX2V2ZW50c1tlXSYmKDA9PS0tdGhpcy5fZXZlbnRzQ291bnQ/dGhpcy5fZXZlbnRzPW5ldyBuOmRlbGV0ZSB0aGlzLl9ldmVudHNbZV0pKToodGhpcy5fZXZlbnRzPW5ldyBuLHRoaXMuX2V2ZW50c0NvdW50PTApLHRoaXN9LG8ucHJvdG90eXBlLm9mZj1vLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcixvLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1vLnByb3RvdHlwZS5vbixvLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sby5wcmVmaXhlZD1hLG8uRXZlbnRFbWl0dGVyPW8sdm9pZCAwIT09ZSYmKGUuZXhwb3J0cz1vKX0se31dLDQ6W2Z1bmN0aW9uKGUscixuKXshZnVuY3Rpb24oZSl7ZnVuY3Rpb24gbih0LGUpe3JldHVybiB0LnRlc3QoZSl9ZnVuY3Rpb24gaSh0KXt2YXIgZT10fHwoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG5hdmlnYXRvcj9uYXZpZ2F0b3IudXNlckFnZW50OlwiXCIpLHI9ZS5zcGxpdChcIltGQkFOXCIpO3ZvaWQgMCE9PXJbMV0mJihlPXJbMF0pLHZvaWQgMCE9PShyPWUuc3BsaXQoXCJUd2l0dGVyXCIpKVsxXSYmKGU9clswXSk7dmFyIGk9e2FwcGxlOntwaG9uZTpuKG8sZSkmJiFuKGQsZSksaXBvZDpuKHMsZSksdGFibGV0OiFuKG8sZSkmJm4oYSxlKSYmIW4oZCxlKSxkZXZpY2U6KG4obyxlKXx8bihzLGUpfHxuKGEsZSkpJiYhbihkLGUpfSxhbWF6b246e3Bob25lOm4obCxlKSx0YWJsZXQ6IW4obCxlKSYmbihjLGUpLGRldmljZTpuKGwsZSl8fG4oYyxlKX0sYW5kcm9pZDp7cGhvbmU6IW4oZCxlKSYmbihsLGUpfHwhbihkLGUpJiZuKHUsZSksdGFibGV0OiFuKGQsZSkmJiFuKGwsZSkmJiFuKHUsZSkmJihuKGMsZSl8fG4oaCxlKSksZGV2aWNlOiFuKGQsZSkmJihuKGwsZSl8fG4oYyxlKXx8bih1LGUpfHxuKGgsZSkpfSx3aW5kb3dzOntwaG9uZTpuKGQsZSksdGFibGV0Om4oZixlKSxkZXZpY2U6bihkLGUpfHxuKGYsZSl9LG90aGVyOntibGFja2JlcnJ5Om4ocCxlKSxibGFja2JlcnJ5MTA6bih2LGUpLG9wZXJhOm4oZyxlKSxmaXJlZm94Om4obSxlKSxjaHJvbWU6bih5LGUpLGRldmljZTpuKHAsZSl8fG4odixlKXx8bihnLGUpfHxuKG0sZSl8fG4oeSxlKX19O3JldHVybiBpLmFueT1pLmFwcGxlLmRldmljZXx8aS5hbmRyb2lkLmRldmljZXx8aS53aW5kb3dzLmRldmljZXx8aS5vdGhlci5kZXZpY2UsaS5waG9uZT1pLmFwcGxlLnBob25lfHxpLmFuZHJvaWQucGhvbmV8fGkud2luZG93cy5waG9uZSxpLnRhYmxldD1pLmFwcGxlLnRhYmxldHx8aS5hbmRyb2lkLnRhYmxldHx8aS53aW5kb3dzLnRhYmxldCxpfXZhciBvPS9pUGhvbmUvaSxzPS9pUG9kL2ksYT0vaVBhZC9pLHU9L1xcYkFuZHJvaWQoPzouKylNb2JpbGVcXGIvaSxoPS9BbmRyb2lkL2ksbD0vXFxiQW5kcm9pZCg/Oi4rKVNENDkzMFVSXFxiL2ksYz0vXFxiQW5kcm9pZCg/Oi4rKSg/OktGW0EtWl17Miw0fSlcXGIvaSxkPS9XaW5kb3dzIFBob25lL2ksZj0vXFxiV2luZG93cyg/Oi4rKUFSTVxcYi9pLHA9L0JsYWNrQmVycnkvaSx2PS9CQjEwL2ksZz0vT3BlcmEgTWluaS9pLHk9L1xcYihDcmlPU3xDaHJvbWUpKD86LispTW9iaWxlL2ksbT0vXFxNb2JpbGUoPzouKylGaXJlZm94XFxiL2k7dm9pZCAwIT09ciYmci5leHBvcnRzJiZcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93P3IuZXhwb3J0cz1pOnZvaWQgMCE9PXImJnIuZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz9yLmV4cG9ydHM9aSgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIHQmJnQuYW1kP3QoW10sZS5pc01vYmlsZT1pKCkpOmUuaXNNb2JpbGU9aSgpfSh0aGlzKX0se31dLDU6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKHQsZSl7cmV0dXJuIHQuX2hlYWQ/KHQuX3RhaWwuX25leHQ9ZSxlLl9wcmV2PXQuX3RhaWwsdC5fdGFpbD1lKToodC5faGVhZD1lLHQuX3RhaWw9ZSksZS5fb3duZXI9dCxlfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCkscz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxyLGkpe3ZvaWQgMD09PXImJihyPSExKSxuKHRoaXMsdCksdGhpcy5fZm49ZSx0aGlzLl9vbmNlPXIsdGhpcy5fdGhpc0FyZz1pLHRoaXMuX25leHQ9dGhpcy5fcHJldj10aGlzLl9vd25lcj1udWxsfXJldHVybiBvKHQsW3trZXk6XCJkZXRhY2hcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5fb3duZXImJih0aGlzLl9vd25lci5kZXRhY2godGhpcyksITApfX1dKSx0fSgpLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7bih0aGlzLHQpLHRoaXMuX2hlYWQ9dGhpcy5fdGFpbD12b2lkIDB9cmV0dXJuIG8odCxbe2tleTpcImhhbmRsZXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD0hKGFyZ3VtZW50cy5sZW5ndGg8PTB8fHZvaWQgMD09PWFyZ3VtZW50c1swXSkmJmFyZ3VtZW50c1swXSxlPXRoaXMuX2hlYWQ7aWYodClyZXR1cm4hIWU7Zm9yKHZhciByPVtdO2U7KXIucHVzaChlKSxlPWUuX25leHQ7cmV0dXJuIHJ9fSx7a2V5OlwiaGFzXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoISh0IGluc3RhbmNlb2YgcykpdGhyb3cgbmV3IEVycm9yKFwiTWluaVNpZ25hbCNoYXMoKTogRmlyc3QgYXJnIG11c3QgYmUgYSBNaW5pU2lnbmFsQmluZGluZyBvYmplY3QuXCIpO3JldHVybiB0Ll9vd25lcj09PXRoaXN9fSx7a2V5OlwiZGlzcGF0Y2hcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2hlYWQ7aWYoIXQpcmV0dXJuITE7Zm9yKDt0Oyl0Ll9vbmNlJiZ0aGlzLmRldGFjaCh0KSx0Ll9mbi5hcHBseSh0Ll90aGlzQXJnLGFyZ3VtZW50cyksdD10Ll9uZXh0O3JldHVybiEwfX0se2tleTpcImFkZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg8PTF8fHZvaWQgMD09PWFyZ3VtZW50c1sxXT9udWxsOmFyZ3VtZW50c1sxXTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBFcnJvcihcIk1pbmlTaWduYWwjYWRkKCk6IEZpcnN0IGFyZyBtdXN0IGJlIGEgRnVuY3Rpb24uXCIpO3JldHVybiBpKHRoaXMsbmV3IHModCwhMSxlKSl9fSx7a2V5Olwib25jZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg8PTF8fHZvaWQgMD09PWFyZ3VtZW50c1sxXT9udWxsOmFyZ3VtZW50c1sxXTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBFcnJvcihcIk1pbmlTaWduYWwjb25jZSgpOiBGaXJzdCBhcmcgbXVzdCBiZSBhIEZ1bmN0aW9uLlwiKTtyZXR1cm4gaSh0aGlzLG5ldyBzKHQsITAsZSkpfX0se2tleTpcImRldGFjaFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIHMpKXRocm93IG5ldyBFcnJvcihcIk1pbmlTaWduYWwjZGV0YWNoKCk6IEZpcnN0IGFyZyBtdXN0IGJlIGEgTWluaVNpZ25hbEJpbmRpbmcgb2JqZWN0LlwiKTtyZXR1cm4gdC5fb3duZXIhPT10aGlzP3RoaXM6KHQuX3ByZXYmJih0Ll9wcmV2Ll9uZXh0PXQuX25leHQpLHQuX25leHQmJih0Ll9uZXh0Ll9wcmV2PXQuX3ByZXYpLHQ9PT10aGlzLl9oZWFkPyh0aGlzLl9oZWFkPXQuX25leHQsbnVsbD09PXQuX25leHQmJih0aGlzLl90YWlsPW51bGwpKTp0PT09dGhpcy5fdGFpbCYmKHRoaXMuX3RhaWw9dC5fcHJldix0aGlzLl90YWlsLl9uZXh0PW51bGwpLHQuX293bmVyPW51bGwsdGhpcyl9fSx7a2V5OlwiZGV0YWNoQWxsXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9oZWFkO2lmKCF0KXJldHVybiB0aGlzO2Zvcih0aGlzLl9oZWFkPXRoaXMuX3RhaWw9bnVsbDt0Oyl0Ll9vd25lcj1udWxsLHQ9dC5fbmV4dDtyZXR1cm4gdGhpc319XSksdH0oKTthLk1pbmlTaWduYWxCaW5kaW5nPXMsci5kZWZhdWx0PWEsZS5leHBvcnRzPXIuZGVmYXVsdH0se31dLDY6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe2lmKG51bGw9PT10fHx2b2lkIDA9PT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3QuYXNzaWduIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCBudWxsIG9yIHVuZGVmaW5lZFwiKTtyZXR1cm4gT2JqZWN0KHQpfXZhciBpPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsbz1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LHM9T2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt0cnl7aWYoIU9iamVjdC5hc3NpZ24pcmV0dXJuITE7dmFyIHQ9bmV3IFN0cmluZyhcImFiY1wiKTtpZih0WzVdPVwiZGVcIixcIjVcIj09PU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHQpWzBdKXJldHVybiExO2Zvcih2YXIgZT17fSxyPTA7cjwxMDtyKyspZVtcIl9cIitTdHJpbmcuZnJvbUNoYXJDb2RlKHIpXT1yO2lmKFwiMDEyMzQ1Njc4OVwiIT09T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBlW3RdfSkuam9pbihcIlwiKSlyZXR1cm4hMTt2YXIgbj17fTtyZXR1cm5cImFiY2RlZmdoaWprbG1ub3BxcnN0XCIuc3BsaXQoXCJcIikuZm9yRWFjaChmdW5jdGlvbih0KXtuW3RdPXR9KSxcImFiY2RlZmdoaWprbG1ub3BxcnN0XCI9PT1PYmplY3Qua2V5cyhPYmplY3QuYXNzaWduKHt9LG4pKS5qb2luKFwiXCIpfWNhdGNoKHQpe3JldHVybiExfX0oKT9PYmplY3QuYXNzaWduOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByLGEsdT1uKHQpLGg9MTtoPGFyZ3VtZW50cy5sZW5ndGg7aCsrKXtyPU9iamVjdChhcmd1bWVudHNbaF0pO2Zvcih2YXIgbCBpbiByKW8uY2FsbChyLGwpJiYodVtsXT1yW2xdKTtpZihpKXthPWkocik7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspcy5jYWxsKHIsYVtjXSkmJih1W2FbY11dPXJbYVtjXV0pfX1yZXR1cm4gdX19LHt9XSw3OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7ZT1lfHx7fTtmb3IodmFyIHI9e2tleTpbXCJzb3VyY2VcIixcInByb3RvY29sXCIsXCJhdXRob3JpdHlcIixcInVzZXJJbmZvXCIsXCJ1c2VyXCIsXCJwYXNzd29yZFwiLFwiaG9zdFwiLFwicG9ydFwiLFwicmVsYXRpdmVcIixcInBhdGhcIixcImRpcmVjdG9yeVwiLFwiZmlsZVwiLFwicXVlcnlcIixcImFuY2hvclwiXSxxOntuYW1lOlwicXVlcnlLZXlcIixwYXJzZXI6Lyg/Ol58JikoW14mPV0qKT0/KFteJl0qKS9nfSxwYXJzZXI6e3N0cmljdDovXig/OihbXjpcXC8/I10rKTopPyg/OlxcL1xcLygoPzooKFteOkBdKikoPzo6KFteOkBdKikpPyk/QCk/KFteOlxcLz8jXSopKD86OihcXGQqKSk/KSk/KCgoKD86W14/I1xcL10qXFwvKSopKFtePyNdKikpKD86XFw/KFteI10qKSk/KD86IyguKikpPykvLGxvb3NlOi9eKD86KD8hW146QF0rOlteOkBcXC9dKkApKFteOlxcLz8jLl0rKTopPyg/OlxcL1xcLyk/KCg/OigoW146QF0qKSg/OjooW146QF0qKSk/KT9AKT8oW146XFwvPyNdKikoPzo6KFxcZCopKT8pKCgoXFwvKD86W14/I10oPyFbXj8jXFwvXSpcXC5bXj8jXFwvLl0rKD86Wz8jXXwkKSkpKlxcLz8pPyhbXj8jXFwvXSopKSg/OlxcPyhbXiNdKikpPyg/OiMoLiopKT8pL319LG49ci5wYXJzZXJbZS5zdHJpY3RNb2RlP1wic3RyaWN0XCI6XCJsb29zZVwiXS5leGVjKHQpLGk9e30sbz0xNDtvLS07KWlbci5rZXlbb11dPW5bb118fFwiXCI7cmV0dXJuIGlbci5xLm5hbWVdPXt9LGlbci5rZXlbMTJdXS5yZXBsYWNlKHIucS5wYXJzZXIsZnVuY3Rpb24odCxlLG4pe2UmJihpW3IucS5uYW1lXVtlXT1uKX0pLGl9fSx7fV0sODpbZnVuY3Rpb24odCxlLHIpeyhmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsZSl7Zm9yKHZhciByPTAsbj10Lmxlbmd0aC0xO24+PTA7bi0tKXt2YXIgaT10W25dO1wiLlwiPT09aT90LnNwbGljZShuLDEpOlwiLi5cIj09PWk/KHQuc3BsaWNlKG4sMSkscisrKTpyJiYodC5zcGxpY2UobiwxKSxyLS0pfWlmKGUpZm9yKDtyLS07cil0LnVuc2hpZnQoXCIuLlwiKTtyZXR1cm4gdH1mdW5jdGlvbiBuKHQsZSl7aWYodC5maWx0ZXIpcmV0dXJuIHQuZmlsdGVyKGUpO2Zvcih2YXIgcj1bXSxuPTA7bjx0Lmxlbmd0aDtuKyspZSh0W25dLG4sdCkmJnIucHVzaCh0W25dKTtyZXR1cm4gcn12YXIgaT0vXihcXC8/fCkoW1xcc1xcU10qPykoKD86XFwuezEsMn18W15cXC9dKz98KShcXC5bXi5cXC9dKnwpKSg/OltcXC9dKikkLyxvPWZ1bmN0aW9uKHQpe3JldHVybiBpLmV4ZWModCkuc2xpY2UoMSl9O3IucmVzb2x2ZT1mdW5jdGlvbigpe2Zvcih2YXIgcj1cIlwiLGk9ITEsbz1hcmd1bWVudHMubGVuZ3RoLTE7bz49LTEmJiFpO28tLSl7dmFyIHM9bz49MD9hcmd1bWVudHNbb106dC5jd2QoKTtpZihcInN0cmluZ1wiIT10eXBlb2Ygcyl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJndW1lbnRzIHRvIHBhdGgucmVzb2x2ZSBtdXN0IGJlIHN0cmluZ3NcIik7cyYmKHI9cytcIi9cIityLGk9XCIvXCI9PT1zLmNoYXJBdCgwKSl9cmV0dXJuIHI9ZShuKHIuc3BsaXQoXCIvXCIpLGZ1bmN0aW9uKHQpe3JldHVybiEhdH0pLCFpKS5qb2luKFwiL1wiKSwoaT9cIi9cIjpcIlwiKStyfHxcIi5cIn0sci5ub3JtYWxpemU9ZnVuY3Rpb24odCl7dmFyIGk9ci5pc0Fic29sdXRlKHQpLG89XCIvXCI9PT1zKHQsLTEpO3JldHVybiB0PWUobih0LnNwbGl0KFwiL1wiKSxmdW5jdGlvbih0KXtyZXR1cm4hIXR9KSwhaSkuam9pbihcIi9cIiksdHx8aXx8KHQ9XCIuXCIpLHQmJm8mJih0Kz1cIi9cIiksKGk/XCIvXCI6XCJcIikrdH0sci5pc0Fic29sdXRlPWZ1bmN0aW9uKHQpe3JldHVyblwiL1wiPT09dC5jaGFyQXQoMCl9LHIuam9pbj1mdW5jdGlvbigpe3ZhciB0PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTtyZXR1cm4gci5ub3JtYWxpemUobih0LGZ1bmN0aW9uKHQsZSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50cyB0byBwYXRoLmpvaW4gbXVzdCBiZSBzdHJpbmdzXCIpO3JldHVybiB0fSkuam9pbihcIi9cIikpfSxyLnJlbGF0aXZlPWZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoJiZcIlwiPT09dFtlXTtlKyspO2Zvcih2YXIgcj10Lmxlbmd0aC0xO3I+PTAmJlwiXCI9PT10W3JdO3ItLSk7cmV0dXJuIGU+cj9bXTp0LnNsaWNlKGUsci1lKzEpfXQ9ci5yZXNvbHZlKHQpLnN1YnN0cigxKSxlPXIucmVzb2x2ZShlKS5zdWJzdHIoMSk7Zm9yKHZhciBpPW4odC5zcGxpdChcIi9cIikpLG89bihlLnNwbGl0KFwiL1wiKSkscz1NYXRoLm1pbihpLmxlbmd0aCxvLmxlbmd0aCksYT1zLHU9MDt1PHM7dSsrKWlmKGlbdV0hPT1vW3VdKXthPXU7YnJlYWt9Zm9yKHZhciBoPVtdLHU9YTt1PGkubGVuZ3RoO3UrKyloLnB1c2goXCIuLlwiKTtyZXR1cm4gaD1oLmNvbmNhdChvLnNsaWNlKGEpKSxoLmpvaW4oXCIvXCIpfSxyLnNlcD1cIi9cIixyLmRlbGltaXRlcj1cIjpcIixyLmRpcm5hbWU9ZnVuY3Rpb24odCl7dmFyIGU9byh0KSxyPWVbMF0sbj1lWzFdO3JldHVybiByfHxuPyhuJiYobj1uLnN1YnN0cigwLG4ubGVuZ3RoLTEpKSxyK24pOlwiLlwifSxyLmJhc2VuYW1lPWZ1bmN0aW9uKHQsZSl7dmFyIHI9byh0KVsyXTtyZXR1cm4gZSYmci5zdWJzdHIoLTEqZS5sZW5ndGgpPT09ZSYmKHI9ci5zdWJzdHIoMCxyLmxlbmd0aC1lLmxlbmd0aCkpLHJ9LHIuZXh0bmFtZT1mdW5jdGlvbih0KXtyZXR1cm4gbyh0KVszXX07dmFyIHM9XCJiXCI9PT1cImFiXCIuc3Vic3RyKC0xKT9mdW5jdGlvbih0LGUscil7cmV0dXJuIHQuc3Vic3RyKGUscil9OmZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gZTwwJiYoZT10Lmxlbmd0aCtlKSx0LnN1YnN0cihlLHIpfX0pLmNhbGwodGhpcyx0KFwiX3Byb2Nlc3NcIikpfSx7X3Byb2Nlc3M6MjZ9XSw5OltmdW5jdGlvbih0LGUscil7dmFyIG49bmV3IEFycmF5QnVmZmVyKDApLGk9ZnVuY3Rpb24odCxlLHIsaSl7dGhpcy5nbD10LHRoaXMuYnVmZmVyPXQuY3JlYXRlQnVmZmVyKCksdGhpcy50eXBlPWV8fHQuQVJSQVlfQlVGRkVSLHRoaXMuZHJhd1R5cGU9aXx8dC5TVEFUSUNfRFJBVyx0aGlzLmRhdGE9bixyJiZ0aGlzLnVwbG9hZChyKSx0aGlzLl91cGRhdGVJRD0wfTtpLnByb3RvdHlwZS51cGxvYWQ9ZnVuY3Rpb24odCxlLHIpe3J8fHRoaXMuYmluZCgpO3ZhciBuPXRoaXMuZ2w7dD10fHx0aGlzLmRhdGEsZT1lfHwwLHRoaXMuZGF0YS5ieXRlTGVuZ3RoPj10LmJ5dGVMZW5ndGg/bi5idWZmZXJTdWJEYXRhKHRoaXMudHlwZSxlLHQpOm4uYnVmZmVyRGF0YSh0aGlzLnR5cGUsdCx0aGlzLmRyYXdUeXBlKSx0aGlzLmRhdGE9dH0saS5wcm90b3R5cGUuYmluZD1mdW5jdGlvbigpe3RoaXMuZ2wuYmluZEJ1ZmZlcih0aGlzLnR5cGUsdGhpcy5idWZmZXIpfSxpLmNyZWF0ZVZlcnRleEJ1ZmZlcj1mdW5jdGlvbih0LGUscil7cmV0dXJuIG5ldyBpKHQsdC5BUlJBWV9CVUZGRVIsZSxyKX0saS5jcmVhdGVJbmRleEJ1ZmZlcj1mdW5jdGlvbih0LGUscil7cmV0dXJuIG5ldyBpKHQsdC5FTEVNRU5UX0FSUkFZX0JVRkZFUixlLHIpfSxpLmNyZWF0ZT1mdW5jdGlvbih0LGUscixuKXtyZXR1cm4gbmV3IGkodCxlLHIsbil9LGkucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmdsLmRlbGV0ZUJ1ZmZlcih0aGlzLmJ1ZmZlcil9LGUuZXhwb3J0cz1pfSx7fV0sMTA6W2Z1bmN0aW9uKHQsZSxyKXt2YXIgbj10KFwiLi9HTFRleHR1cmVcIiksaT1mdW5jdGlvbih0LGUscil7dGhpcy5nbD10LHRoaXMuZnJhbWVidWZmZXI9dC5jcmVhdGVGcmFtZWJ1ZmZlcigpLHRoaXMuc3RlbmNpbD1udWxsLHRoaXMudGV4dHVyZT1udWxsLHRoaXMud2lkdGg9ZXx8MTAwLHRoaXMuaGVpZ2h0PXJ8fDEwMH07aS5wcm90b3R5cGUuZW5hYmxlVGV4dHVyZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdsO3RoaXMudGV4dHVyZT10fHxuZXcgbihlKSx0aGlzLnRleHR1cmUuYmluZCgpLHRoaXMuYmluZCgpLGUuZnJhbWVidWZmZXJUZXh0dXJlMkQoZS5GUkFNRUJVRkZFUixlLkNPTE9SX0FUVEFDSE1FTlQwLGUuVEVYVFVSRV8yRCx0aGlzLnRleHR1cmUudGV4dHVyZSwwKX0saS5wcm90b3R5cGUuZW5hYmxlU3RlbmNpbD1mdW5jdGlvbigpe2lmKCF0aGlzLnN0ZW5jaWwpe3ZhciB0PXRoaXMuZ2w7dGhpcy5zdGVuY2lsPXQuY3JlYXRlUmVuZGVyYnVmZmVyKCksdC5iaW5kUmVuZGVyYnVmZmVyKHQuUkVOREVSQlVGRkVSLHRoaXMuc3RlbmNpbCksdC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcih0LkZSQU1FQlVGRkVSLHQuREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5ULHQuUkVOREVSQlVGRkVSLHRoaXMuc3RlbmNpbCksdC5yZW5kZXJidWZmZXJTdG9yYWdlKHQuUkVOREVSQlVGRkVSLHQuREVQVEhfU1RFTkNJTCx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0KX19LGkucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKHQsZSxyLG4pe3RoaXMuYmluZCgpO3ZhciBpPXRoaXMuZ2w7aS5jbGVhckNvbG9yKHQsZSxyLG4pLGkuY2xlYXIoaS5DT0xPUl9CVUZGRVJfQklUfGkuREVQVEhfQlVGRkVSX0JJVCl9LGkucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdsO3QuYmluZEZyYW1lYnVmZmVyKHQuRlJBTUVCVUZGRVIsdGhpcy5mcmFtZWJ1ZmZlcil9LGkucHJvdG90eXBlLnVuYmluZD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2w7dC5iaW5kRnJhbWVidWZmZXIodC5GUkFNRUJVRkZFUixudWxsKX0saS5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcy5nbDt0aGlzLndpZHRoPXQsdGhpcy5oZWlnaHQ9ZSx0aGlzLnRleHR1cmUmJnRoaXMudGV4dHVyZS51cGxvYWREYXRhKG51bGwsdCxlKSx0aGlzLnN0ZW5jaWwmJihyLmJpbmRSZW5kZXJidWZmZXIoci5SRU5ERVJCVUZGRVIsdGhpcy5zdGVuY2lsKSxyLnJlbmRlcmJ1ZmZlclN0b3JhZ2Uoci5SRU5ERVJCVUZGRVIsci5ERVBUSF9TVEVOQ0lMLHQsZSkpfSxpLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nbDt0aGlzLnRleHR1cmUmJnRoaXMudGV4dHVyZS5kZXN0cm95KCksdC5kZWxldGVGcmFtZWJ1ZmZlcih0aGlzLmZyYW1lYnVmZmVyKSx0aGlzLmdsPW51bGwsdGhpcy5zdGVuY2lsPW51bGwsdGhpcy50ZXh0dXJlPW51bGx9LGkuY3JlYXRlUkdCQT1mdW5jdGlvbih0LGUscixvKXt2YXIgcz1uLmZyb21EYXRhKHQsbnVsbCxlLHIpO3MuZW5hYmxlTmVhcmVzdFNjYWxpbmcoKSxzLmVuYWJsZVdyYXBDbGFtcCgpO3ZhciBhPW5ldyBpKHQsZSxyKTtyZXR1cm4gYS5lbmFibGVUZXh0dXJlKHMpLGEudW5iaW5kKCksYX0saS5jcmVhdGVGbG9hdDMyPWZ1bmN0aW9uKHQsZSxyLG8pe3ZhciBzPW5ldyBuLmZyb21EYXRhKHQsbyxlLHIpO3MuZW5hYmxlTmVhcmVzdFNjYWxpbmcoKSxzLmVuYWJsZVdyYXBDbGFtcCgpO3ZhciBhPW5ldyBpKHQsZSxyKTtyZXR1cm4gYS5lbmFibGVUZXh0dXJlKHMpLGEudW5iaW5kKCksYX0sZS5leHBvcnRzPWl9LHtcIi4vR0xUZXh0dXJlXCI6MTJ9XSwxMTpbZnVuY3Rpb24odCxlLHIpe3ZhciBuPXQoXCIuL3NoYWRlci9jb21waWxlUHJvZ3JhbVwiKSxpPXQoXCIuL3NoYWRlci9leHRyYWN0QXR0cmlidXRlc1wiKSxvPXQoXCIuL3NoYWRlci9leHRyYWN0VW5pZm9ybXNcIikscz10KFwiLi9zaGFkZXIvc2V0UHJlY2lzaW9uXCIpLGE9dChcIi4vc2hhZGVyL2dlbmVyYXRlVW5pZm9ybUFjY2Vzc09iamVjdFwiKSx1PWZ1bmN0aW9uKHQsZSxyLHUsaCl7dGhpcy5nbD10LHUmJihlPXMoZSx1KSxyPXMocix1KSksdGhpcy5wcm9ncmFtPW4odCxlLHIsaCksdGhpcy5hdHRyaWJ1dGVzPWkodCx0aGlzLnByb2dyYW0pLHRoaXMudW5pZm9ybURhdGE9byh0LHRoaXMucHJvZ3JhbSksdGhpcy51bmlmb3Jtcz1hKHQsdGhpcy51bmlmb3JtRGF0YSl9O3UucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nbC51c2VQcm9ncmFtKHRoaXMucHJvZ3JhbSksdGhpc30sdS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuYXR0cmlidXRlcz1udWxsLHRoaXMudW5pZm9ybURhdGE9bnVsbCx0aGlzLnVuaWZvcm1zPW51bGwsdGhpcy5nbC5kZWxldGVQcm9ncmFtKHRoaXMucHJvZ3JhbSl9LGUuZXhwb3J0cz11fSx7XCIuL3NoYWRlci9jb21waWxlUHJvZ3JhbVwiOjE3LFwiLi9zaGFkZXIvZXh0cmFjdEF0dHJpYnV0ZXNcIjoxOSxcIi4vc2hhZGVyL2V4dHJhY3RVbmlmb3Jtc1wiOjIwLFwiLi9zaGFkZXIvZ2VuZXJhdGVVbmlmb3JtQWNjZXNzT2JqZWN0XCI6MjEsXCIuL3NoYWRlci9zZXRQcmVjaXNpb25cIjoyNX1dLDEyOltmdW5jdGlvbih0LGUscil7dmFyIG49ZnVuY3Rpb24odCxlLHIsbixpKXt0aGlzLmdsPXQsdGhpcy50ZXh0dXJlPXQuY3JlYXRlVGV4dHVyZSgpLHRoaXMubWlwbWFwPSExLHRoaXMucHJlbXVsdGlwbHlBbHBoYT0hMSx0aGlzLndpZHRoPWV8fC0xLHRoaXMuaGVpZ2h0PXJ8fC0xLHRoaXMuZm9ybWF0PW58fHQuUkdCQSx0aGlzLnR5cGU9aXx8dC5VTlNJR05FRF9CWVRFfTtuLnByb3RvdHlwZS51cGxvYWQ9ZnVuY3Rpb24odCl7dGhpcy5iaW5kKCk7dmFyIGU9dGhpcy5nbDtlLnBpeGVsU3RvcmVpKGUuVU5QQUNLX1BSRU1VTFRJUExZX0FMUEhBX1dFQkdMLHRoaXMucHJlbXVsdGlwbHlBbHBoYSk7dmFyIHI9dC52aWRlb1dpZHRofHx0LndpZHRoLG49dC52aWRlb0hlaWdodHx8dC5oZWlnaHQ7biE9PXRoaXMuaGVpZ2h0fHxyIT09dGhpcy53aWR0aD9lLnRleEltYWdlMkQoZS5URVhUVVJFXzJELDAsdGhpcy5mb3JtYXQsdGhpcy5mb3JtYXQsdGhpcy50eXBlLHQpOmUudGV4U3ViSW1hZ2UyRChlLlRFWFRVUkVfMkQsMCwwLDAsdGhpcy5mb3JtYXQsdGhpcy50eXBlLHQpLHRoaXMud2lkdGg9cix0aGlzLmhlaWdodD1ufTt2YXIgaT0hMTtuLnByb3RvdHlwZS51cGxvYWREYXRhPWZ1bmN0aW9uKHQsZSxyKXt0aGlzLmJpbmQoKTt2YXIgbj10aGlzLmdsO2lmKHQgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkpe2lmKCFpKXtpZighbi5nZXRFeHRlbnNpb24oXCJPRVNfdGV4dHVyZV9mbG9hdFwiKSl0aHJvdyBuZXcgRXJyb3IoXCJmbG9hdGluZyBwb2ludCB0ZXh0dXJlcyBub3QgYXZhaWxhYmxlXCIpO2k9ITB9dGhpcy50eXBlPW4uRkxPQVR9ZWxzZSB0aGlzLnR5cGU9dGhpcy50eXBlfHxuLlVOU0lHTkVEX0JZVEU7bi5waXhlbFN0b3JlaShuLlVOUEFDS19QUkVNVUxUSVBMWV9BTFBIQV9XRUJHTCx0aGlzLnByZW11bHRpcGx5QWxwaGEpLGUhPT10aGlzLndpZHRofHxyIT09dGhpcy5oZWlnaHQ/bi50ZXhJbWFnZTJEKG4uVEVYVFVSRV8yRCwwLHRoaXMuZm9ybWF0LGUsciwwLHRoaXMuZm9ybWF0LHRoaXMudHlwZSx0fHxudWxsKTpuLnRleFN1YkltYWdlMkQobi5URVhUVVJFXzJELDAsMCwwLGUscix0aGlzLmZvcm1hdCx0aGlzLnR5cGUsdHx8bnVsbCksdGhpcy53aWR0aD1lLHRoaXMuaGVpZ2h0PXJ9LG4ucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nbDt2b2lkIDAhPT10JiZlLmFjdGl2ZVRleHR1cmUoZS5URVhUVVJFMCt0KSxlLmJpbmRUZXh0dXJlKGUuVEVYVFVSRV8yRCx0aGlzLnRleHR1cmUpfSxuLnByb3RvdHlwZS51bmJpbmQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdsO3QuYmluZFRleHR1cmUodC5URVhUVVJFXzJELG51bGwpfSxuLnByb3RvdHlwZS5taW5GaWx0ZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nbDt0aGlzLmJpbmQoKSx0aGlzLm1pcG1hcD9lLnRleFBhcmFtZXRlcmkoZS5URVhUVVJFXzJELGUuVEVYVFVSRV9NSU5fRklMVEVSLHQ/ZS5MSU5FQVJfTUlQTUFQX0xJTkVBUjplLk5FQVJFU1RfTUlQTUFQX05FQVJFU1QpOmUudGV4UGFyYW1ldGVyaShlLlRFWFRVUkVfMkQsZS5URVhUVVJFX01JTl9GSUxURVIsdD9lLkxJTkVBUjplLk5FQVJFU1QpfSxuLnByb3RvdHlwZS5tYWdGaWx0ZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nbDt0aGlzLmJpbmQoKSxlLnRleFBhcmFtZXRlcmkoZS5URVhUVVJFXzJELGUuVEVYVFVSRV9NQUdfRklMVEVSLHQ/ZS5MSU5FQVI6ZS5ORUFSRVNUKX0sbi5wcm90b3R5cGUuZW5hYmxlTWlwbWFwPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nbDt0aGlzLmJpbmQoKSx0aGlzLm1pcG1hcD0hMCx0LmdlbmVyYXRlTWlwbWFwKHQuVEVYVFVSRV8yRCl9LG4ucHJvdG90eXBlLmVuYWJsZUxpbmVhclNjYWxpbmc9ZnVuY3Rpb24oKXt0aGlzLm1pbkZpbHRlcighMCksdGhpcy5tYWdGaWx0ZXIoITApfSxuLnByb3RvdHlwZS5lbmFibGVOZWFyZXN0U2NhbGluZz1mdW5jdGlvbigpe3RoaXMubWluRmlsdGVyKCExKSx0aGlzLm1hZ0ZpbHRlcighMSl9LG4ucHJvdG90eXBlLmVuYWJsZVdyYXBDbGFtcD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2w7dGhpcy5iaW5kKCksdC50ZXhQYXJhbWV0ZXJpKHQuVEVYVFVSRV8yRCx0LlRFWFRVUkVfV1JBUF9TLHQuQ0xBTVBfVE9fRURHRSksdC50ZXhQYXJhbWV0ZXJpKHQuVEVYVFVSRV8yRCx0LlRFWFRVUkVfV1JBUF9ULHQuQ0xBTVBfVE9fRURHRSl9LG4ucHJvdG90eXBlLmVuYWJsZVdyYXBSZXBlYXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdsO3RoaXMuYmluZCgpLHQudGV4UGFyYW1ldGVyaSh0LlRFWFRVUkVfMkQsdC5URVhUVVJFX1dSQVBfUyx0LlJFUEVBVCksdC50ZXhQYXJhbWV0ZXJpKHQuVEVYVFVSRV8yRCx0LlRFWFRVUkVfV1JBUF9ULHQuUkVQRUFUKX0sbi5wcm90b3R5cGUuZW5hYmxlV3JhcE1pcnJvclJlcGVhdD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2w7dGhpcy5iaW5kKCksdC50ZXhQYXJhbWV0ZXJpKHQuVEVYVFVSRV8yRCx0LlRFWFRVUkVfV1JBUF9TLHQuTUlSUk9SRURfUkVQRUFUKSx0LnRleFBhcmFtZXRlcmkodC5URVhUVVJFXzJELHQuVEVYVFVSRV9XUkFQX1QsdC5NSVJST1JFRF9SRVBFQVQpfSxuLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5nbC5kZWxldGVUZXh0dXJlKHRoaXMudGV4dHVyZSl9LG4uZnJvbVNvdXJjZT1mdW5jdGlvbih0LGUscil7dmFyIGk9bmV3IG4odCk7cmV0dXJuIGkucHJlbXVsdGlwbHlBbHBoYT1yfHwhMSxpLnVwbG9hZChlKSxpfSxuLmZyb21EYXRhPWZ1bmN0aW9uKHQsZSxyLGkpe3ZhciBvPW5ldyBuKHQpO3JldHVybiBvLnVwbG9hZERhdGEoZSxyLGkpLG99LGUuZXhwb3J0cz1ufSx7fV0sMTM6W2Z1bmN0aW9uKHQsZSxyKXtmdW5jdGlvbiBuKHQsZSl7aWYodGhpcy5uYXRpdmVWYW9FeHRlbnNpb249bnVsbCxuLkZPUkNFX05BVElWRXx8KHRoaXMubmF0aXZlVmFvRXh0ZW5zaW9uPXQuZ2V0RXh0ZW5zaW9uKFwiT0VTX3ZlcnRleF9hcnJheV9vYmplY3RcIil8fHQuZ2V0RXh0ZW5zaW9uKFwiTU9aX09FU192ZXJ0ZXhfYXJyYXlfb2JqZWN0XCIpfHx0LmdldEV4dGVuc2lvbihcIldFQktJVF9PRVNfdmVydGV4X2FycmF5X29iamVjdFwiKSksdGhpcy5uYXRpdmVTdGF0ZT1lLHRoaXMubmF0aXZlVmFvRXh0ZW5zaW9uKXt0aGlzLm5hdGl2ZVZhbz10aGlzLm5hdGl2ZVZhb0V4dGVuc2lvbi5jcmVhdGVWZXJ0ZXhBcnJheU9FUygpO3ZhciByPXQuZ2V0UGFyYW1ldGVyKHQuTUFYX1ZFUlRFWF9BVFRSSUJTKTt0aGlzLm5hdGl2ZVN0YXRlPXt0ZW1wQXR0cmliU3RhdGU6bmV3IEFycmF5KHIpLGF0dHJpYlN0YXRlOm5ldyBBcnJheShyKX19dGhpcy5nbD10LHRoaXMuYXR0cmlidXRlcz1bXSx0aGlzLmluZGV4QnVmZmVyPW51bGwsdGhpcy5kaXJ0eT0hMX12YXIgaT10KFwiLi9zZXRWZXJ0ZXhBdHRyaWJBcnJheXNcIik7bi5wcm90b3R5cGUuY29uc3RydWN0b3I9bixlLmV4cG9ydHM9bixuLkZPUkNFX05BVElWRT0hMSxuLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKCl7aWYodGhpcy5uYXRpdmVWYW8pe2lmKHRoaXMubmF0aXZlVmFvRXh0ZW5zaW9uLmJpbmRWZXJ0ZXhBcnJheU9FUyh0aGlzLm5hdGl2ZVZhbyksdGhpcy5kaXJ0eSlyZXR1cm4gdGhpcy5kaXJ0eT0hMSx0aGlzLmFjdGl2YXRlKCksdGhpczt0aGlzLmluZGV4QnVmZmVyJiZ0aGlzLmluZGV4QnVmZmVyLmJpbmQoKX1lbHNlIHRoaXMuYWN0aXZhdGUoKTtyZXR1cm4gdGhpc30sbi5wcm90b3R5cGUudW5iaW5kPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmF0aXZlVmFvJiZ0aGlzLm5hdGl2ZVZhb0V4dGVuc2lvbi5iaW5kVmVydGV4QXJyYXlPRVMobnVsbCksdGhpc30sbi5wcm90b3R5cGUuYWN0aXZhdGU9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5nbCxlPW51bGwscj0wO3I8dGhpcy5hdHRyaWJ1dGVzLmxlbmd0aDtyKyspe3ZhciBuPXRoaXMuYXR0cmlidXRlc1tyXTtlIT09bi5idWZmZXImJihuLmJ1ZmZlci5iaW5kKCksZT1uLmJ1ZmZlciksdC52ZXJ0ZXhBdHRyaWJQb2ludGVyKG4uYXR0cmlidXRlLmxvY2F0aW9uLG4uYXR0cmlidXRlLnNpemUsbi50eXBlfHx0LkZMT0FULG4ubm9ybWFsaXplZHx8ITEsbi5zdHJpZGV8fDAsbi5zdGFydHx8MCl9cmV0dXJuIGkodCx0aGlzLmF0dHJpYnV0ZXMsdGhpcy5uYXRpdmVTdGF0ZSksdGhpcy5pbmRleEJ1ZmZlciYmdGhpcy5pbmRleEJ1ZmZlci5iaW5kKCksdGhpc30sbi5wcm90b3R5cGUuYWRkQXR0cmlidXRlPWZ1bmN0aW9uKHQsZSxyLG4saSxvKXtyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzLnB1c2goe2J1ZmZlcjp0LGF0dHJpYnV0ZTplLGxvY2F0aW9uOmUubG9jYXRpb24sdHlwZTpyfHx0aGlzLmdsLkZMT0FULG5vcm1hbGl6ZWQ6bnx8ITEsc3RyaWRlOml8fDAsc3RhcnQ6b3x8MH0pLHRoaXMuZGlydHk9ITAsdGhpc30sbi5wcm90b3R5cGUuYWRkSW5kZXg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaW5kZXhCdWZmZXI9dCx0aGlzLmRpcnR5PSEwLHRoaXN9LG4ucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmF0aXZlVmFvJiZ0aGlzLm5hdGl2ZVZhb0V4dGVuc2lvbi5iaW5kVmVydGV4QXJyYXlPRVModGhpcy5uYXRpdmVWYW8pLHRoaXMuYXR0cmlidXRlcy5sZW5ndGg9MCx0aGlzLmluZGV4QnVmZmVyPW51bGwsdGhpc30sbi5wcm90b3R5cGUuZHJhdz1mdW5jdGlvbih0LGUscil7dmFyIG49dGhpcy5nbDtyZXR1cm4gdGhpcy5pbmRleEJ1ZmZlcj9uLmRyYXdFbGVtZW50cyh0LGV8fHRoaXMuaW5kZXhCdWZmZXIuZGF0YS5sZW5ndGgsbi5VTlNJR05FRF9TSE9SVCwyKihyfHwwKSk6bi5kcmF3QXJyYXlzKHQscixlfHx0aGlzLmdldFNpemUoKSksdGhpc30sbi5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuZ2w9bnVsbCx0aGlzLmluZGV4QnVmZmVyPW51bGwsdGhpcy5hdHRyaWJ1dGVzPW51bGwsdGhpcy5uYXRpdmVTdGF0ZT1udWxsLHRoaXMubmF0aXZlVmFvJiZ0aGlzLm5hdGl2ZVZhb0V4dGVuc2lvbi5kZWxldGVWZXJ0ZXhBcnJheU9FUyh0aGlzLm5hdGl2ZVZhbyksdGhpcy5uYXRpdmVWYW9FeHRlbnNpb249bnVsbCx0aGlzLm5hdGl2ZVZhbz1udWxsfSxuLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5hdHRyaWJ1dGVzWzBdO3JldHVybiB0LmJ1ZmZlci5kYXRhLmxlbmd0aC8odC5zdHJpZGUvNHx8dC5hdHRyaWJ1dGUuc2l6ZSl9fSx7XCIuL3NldFZlcnRleEF0dHJpYkFycmF5c1wiOjE2fV0sMTQ6W2Z1bmN0aW9uKHQsZSxyKXt2YXIgbj1mdW5jdGlvbih0LGUpe3ZhciByPXQuZ2V0Q29udGV4dChcIndlYmdsXCIsZSl8fHQuZ2V0Q29udGV4dChcImV4cGVyaW1lbnRhbC13ZWJnbFwiLGUpO2lmKCFyKXRocm93IG5ldyBFcnJvcihcIlRoaXMgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHdlYkdMLiBUcnkgdXNpbmcgdGhlIGNhbnZhcyByZW5kZXJlclwiKTtyZXR1cm4gcn07ZS5leHBvcnRzPW59LHt9XSwxNTpbZnVuY3Rpb24odCxlLHIpe3ZhciBuPXtjcmVhdGVDb250ZXh0OnQoXCIuL2NyZWF0ZUNvbnRleHRcIiksc2V0VmVydGV4QXR0cmliQXJyYXlzOnQoXCIuL3NldFZlcnRleEF0dHJpYkFycmF5c1wiKSxHTEJ1ZmZlcjp0KFwiLi9HTEJ1ZmZlclwiKSxHTEZyYW1lYnVmZmVyOnQoXCIuL0dMRnJhbWVidWZmZXJcIiksR0xTaGFkZXI6dChcIi4vR0xTaGFkZXJcIiksR0xUZXh0dXJlOnQoXCIuL0dMVGV4dHVyZVwiKSxWZXJ0ZXhBcnJheU9iamVjdDp0KFwiLi9WZXJ0ZXhBcnJheU9iamVjdFwiKSxzaGFkZXI6dChcIi4vc2hhZGVyXCIpfTt2b2lkIDAhPT1lJiZlLmV4cG9ydHMmJihlLmV4cG9ydHM9biksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmKHdpbmRvdy5QSVhJPXdpbmRvdy5QSVhJfHx7fSx3aW5kb3cuUElYSS5nbENvcmU9bil9LHtcIi4vR0xCdWZmZXJcIjo5LFwiLi9HTEZyYW1lYnVmZmVyXCI6MTAsXCIuL0dMU2hhZGVyXCI6MTEsXCIuL0dMVGV4dHVyZVwiOjEyLFwiLi9WZXJ0ZXhBcnJheU9iamVjdFwiOjEzLFwiLi9jcmVhdGVDb250ZXh0XCI6MTQsXCIuL3NldFZlcnRleEF0dHJpYkFycmF5c1wiOjE2LFwiLi9zaGFkZXJcIjoyMn1dLDE2OltmdW5jdGlvbih0LGUscil7dmFyIG49ZnVuY3Rpb24odCxlLHIpe3ZhciBuO2lmKHIpe3ZhciBpPXIudGVtcEF0dHJpYlN0YXRlLG89ci5hdHRyaWJTdGF0ZTtmb3Iobj0wO248aS5sZW5ndGg7bisrKWlbbl09ITE7Zm9yKG49MDtuPGUubGVuZ3RoO24rKylpW2Vbbl0uYXR0cmlidXRlLmxvY2F0aW9uXT0hMDtmb3Iobj0wO248by5sZW5ndGg7bisrKW9bbl0hPT1pW25dJiYob1tuXT1pW25dLHIuYXR0cmliU3RhdGVbbl0/dC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShuKTp0LmRpc2FibGVWZXJ0ZXhBdHRyaWJBcnJheShuKSl9ZWxzZSBmb3Iobj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcz1lW25dO3QuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocy5hdHRyaWJ1dGUubG9jYXRpb24pfX07ZS5leHBvcnRzPW59LHt9XSwxNzpbZnVuY3Rpb24odCxlLHIpe3ZhciBuPWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBvPWkodCx0LlZFUlRFWF9TSEFERVIsZSkscz1pKHQsdC5GUkFHTUVOVF9TSEFERVIsciksYT10LmNyZWF0ZVByb2dyYW0oKTtpZih0LmF0dGFjaFNoYWRlcihhLG8pLHQuYXR0YWNoU2hhZGVyKGEscyksbilmb3IodmFyIHUgaW4gbil0LmJpbmRBdHRyaWJMb2NhdGlvbihhLG5bdV0sdSk7cmV0dXJuIHQubGlua1Byb2dyYW0oYSksdC5nZXRQcm9ncmFtUGFyYW1ldGVyKGEsdC5MSU5LX1NUQVRVUyl8fChjb25zb2xlLmVycm9yKFwiUGl4aS5qcyBFcnJvcjogQ291bGQgbm90IGluaXRpYWxpemUgc2hhZGVyLlwiKSxjb25zb2xlLmVycm9yKFwiZ2wuVkFMSURBVEVfU1RBVFVTXCIsdC5nZXRQcm9ncmFtUGFyYW1ldGVyKGEsdC5WQUxJREFURV9TVEFUVVMpKSxjb25zb2xlLmVycm9yKFwiZ2wuZ2V0RXJyb3IoKVwiLHQuZ2V0RXJyb3IoKSksXCJcIiE9PXQuZ2V0UHJvZ3JhbUluZm9Mb2coYSkmJmNvbnNvbGUud2FybihcIlBpeGkuanMgV2FybmluZzogZ2wuZ2V0UHJvZ3JhbUluZm9Mb2coKVwiLHQuZ2V0UHJvZ3JhbUluZm9Mb2coYSkpLHQuZGVsZXRlUHJvZ3JhbShhKSxhPW51bGwpLHQuZGVsZXRlU2hhZGVyKG8pLHQuZGVsZXRlU2hhZGVyKHMpLGF9LGk9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPXQuY3JlYXRlU2hhZGVyKGUpO3JldHVybiB0LnNoYWRlclNvdXJjZShuLHIpLHQuY29tcGlsZVNoYWRlcihuKSx0LmdldFNoYWRlclBhcmFtZXRlcihuLHQuQ09NUElMRV9TVEFUVVMpP246KGNvbnNvbGUubG9nKHQuZ2V0U2hhZGVySW5mb0xvZyhuKSksbnVsbCl9O2UuZXhwb3J0cz1ufSx7fV0sMTg6W2Z1bmN0aW9uKHQsZSxyKXt2YXIgbj1mdW5jdGlvbih0LGUpe3N3aXRjaCh0KXtjYXNlXCJmbG9hdFwiOnJldHVybiAwO2Nhc2VcInZlYzJcIjpyZXR1cm4gbmV3IEZsb2F0MzJBcnJheSgyKmUpO2Nhc2VcInZlYzNcIjpyZXR1cm4gbmV3IEZsb2F0MzJBcnJheSgzKmUpO2Nhc2VcInZlYzRcIjpyZXR1cm4gbmV3IEZsb2F0MzJBcnJheSg0KmUpO2Nhc2VcImludFwiOmNhc2VcInNhbXBsZXIyRFwiOnJldHVybiAwO2Nhc2VcIml2ZWMyXCI6cmV0dXJuIG5ldyBJbnQzMkFycmF5KDIqZSk7Y2FzZVwiaXZlYzNcIjpyZXR1cm4gbmV3IEludDMyQXJyYXkoMyplKTtjYXNlXCJpdmVjNFwiOnJldHVybiBuZXcgSW50MzJBcnJheSg0KmUpO2Nhc2VcImJvb2xcIjpyZXR1cm4hMTtjYXNlXCJidmVjMlwiOnJldHVybiBpKDIqZSk7Y2FzZVwiYnZlYzNcIjpyZXR1cm4gaSgzKmUpO2Nhc2VcImJ2ZWM0XCI6cmV0dXJuIGkoNCplKTtjYXNlXCJtYXQyXCI6cmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoWzEsMCwwLDFdKTtjYXNlXCJtYXQzXCI6cmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoWzEsMCwwLDAsMSwwLDAsMCwxXSk7Y2FzZVwibWF0NFwiOnJldHVybiBuZXcgRmxvYXQzMkFycmF5KFsxLDAsMCwwLDAsMSwwLDAsMCwwLDEsMCwwLDAsMCwxXSl9fSxpPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgQXJyYXkodCkscj0wO3I8ZS5sZW5ndGg7cisrKWVbcl09ITE7cmV0dXJuIGV9O2UuZXhwb3J0cz1ufSx7fV0sMTk6W2Z1bmN0aW9uKHQsZSxyKXt2YXIgbj10KFwiLi9tYXBUeXBlXCIpLGk9dChcIi4vbWFwU2l6ZVwiKSxvPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPXt9LG89dC5nZXRQcm9ncmFtUGFyYW1ldGVyKGUsdC5BQ1RJVkVfQVRUUklCVVRFUyksYT0wO2E8bzthKyspe3ZhciB1PXQuZ2V0QWN0aXZlQXR0cmliKGUsYSksaD1uKHQsdS50eXBlKTtyW3UubmFtZV09e3R5cGU6aCxzaXplOmkoaCksbG9jYXRpb246dC5nZXRBdHRyaWJMb2NhdGlvbihlLHUubmFtZSkscG9pbnRlcjpzfX1yZXR1cm4gcn0scz1mdW5jdGlvbih0LGUscixuKXtnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHRoaXMubG9jYXRpb24sdGhpcy5zaXplLHR8fGdsLkZMT0FULGV8fCExLHJ8fDAsbnx8MCl9O2UuZXhwb3J0cz1vfSx7XCIuL21hcFNpemVcIjoyMyxcIi4vbWFwVHlwZVwiOjI0fV0sMjA6W2Z1bmN0aW9uKHQsZSxyKXt2YXIgbj10KFwiLi9tYXBUeXBlXCIpLGk9dChcIi4vZGVmYXVsdFZhbHVlXCIpLG89ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9e30sbz10LmdldFByb2dyYW1QYXJhbWV0ZXIoZSx0LkFDVElWRV9VTklGT1JNUykscz0wO3M8bztzKyspe3ZhciBhPXQuZ2V0QWN0aXZlVW5pZm9ybShlLHMpLHU9YS5uYW1lLnJlcGxhY2UoL1xcWy4qP1xcXS8sXCJcIiksaD1uKHQsYS50eXBlKTtyW3VdPXt0eXBlOmgsc2l6ZTphLnNpemUsbG9jYXRpb246dC5nZXRVbmlmb3JtTG9jYXRpb24oZSx1KSx2YWx1ZTppKGgsYS5zaXplKX19cmV0dXJuIHJ9O2UuZXhwb3J0cz1vfSx7XCIuL2RlZmF1bHRWYWx1ZVwiOjE4LFwiLi9tYXBUeXBlXCI6MjR9XSwyMTpbZnVuY3Rpb24odCxlLHIpe2Z1bmN0aW9uIG4odCxlKXtyZXR1cm4gZnVuY3Rpb24ocil7dGhpcy5kYXRhW3RdLnZhbHVlPXI7dmFyIG49dGhpcy5kYXRhW3RdLmxvY2F0aW9uOzE9PT1lLnNpemU/YVtlLnR5cGVdKHRoaXMuZ2wsbixyKTp1W2UudHlwZV0odGhpcy5nbCxuLHIpfX1mdW5jdGlvbiBpKHQsZSl7Zm9yKHZhciByPWUsbj0wO248dC5sZW5ndGgtMTtuKyspe3ZhciBpPXJbdFtuXV18fHtkYXRhOnt9fTtyW3Rbbl1dPWkscj1pfXJldHVybiByfXZhciBvPWZ1bmN0aW9uKHQsZSl7dmFyIHI9e2RhdGE6e319O3IuZ2w9dFxuO2Zvcih2YXIgbz1PYmplY3Qua2V5cyhlKSxhPTA7YTxvLmxlbmd0aDthKyspe3ZhciB1PW9bYV0saD11LnNwbGl0KFwiLlwiKSxsPWhbaC5sZW5ndGgtMV0sYz1pKGgsciksZD1lW3VdO2MuZGF0YVtsXT1kLGMuZ2w9dCxPYmplY3QuZGVmaW5lUHJvcGVydHkoYyxsLHtnZXQ6cyhsKSxzZXQ6bihsLGQpfSl9cmV0dXJuIHJ9LHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YVt0XS52YWx1ZX19LGE9e2Zsb2F0OmZ1bmN0aW9uKHQsZSxyKXt0LnVuaWZvcm0xZihlLHIpfSx2ZWMyOmZ1bmN0aW9uKHQsZSxyKXt0LnVuaWZvcm0yZihlLHJbMF0sclsxXSl9LHZlYzM6ZnVuY3Rpb24odCxlLHIpe3QudW5pZm9ybTNmKGUsclswXSxyWzFdLHJbMl0pfSx2ZWM0OmZ1bmN0aW9uKHQsZSxyKXt0LnVuaWZvcm00ZihlLHJbMF0sclsxXSxyWzJdLHJbM10pfSxpbnQ6ZnVuY3Rpb24odCxlLHIpe3QudW5pZm9ybTFpKGUscil9LGl2ZWMyOmZ1bmN0aW9uKHQsZSxyKXt0LnVuaWZvcm0yaShlLHJbMF0sclsxXSl9LGl2ZWMzOmZ1bmN0aW9uKHQsZSxyKXt0LnVuaWZvcm0zaShlLHJbMF0sclsxXSxyWzJdKX0saXZlYzQ6ZnVuY3Rpb24odCxlLHIpe3QudW5pZm9ybTRpKGUsclswXSxyWzFdLHJbMl0sclszXSl9LGJvb2w6ZnVuY3Rpb24odCxlLHIpe3QudW5pZm9ybTFpKGUscil9LGJ2ZWMyOmZ1bmN0aW9uKHQsZSxyKXt0LnVuaWZvcm0yaShlLHJbMF0sclsxXSl9LGJ2ZWMzOmZ1bmN0aW9uKHQsZSxyKXt0LnVuaWZvcm0zaShlLHJbMF0sclsxXSxyWzJdKX0sYnZlYzQ6ZnVuY3Rpb24odCxlLHIpe3QudW5pZm9ybTRpKGUsclswXSxyWzFdLHJbMl0sclszXSl9LG1hdDI6ZnVuY3Rpb24odCxlLHIpe3QudW5pZm9ybU1hdHJpeDJmdihlLCExLHIpfSxtYXQzOmZ1bmN0aW9uKHQsZSxyKXt0LnVuaWZvcm1NYXRyaXgzZnYoZSwhMSxyKX0sbWF0NDpmdW5jdGlvbih0LGUscil7dC51bmlmb3JtTWF0cml4NGZ2KGUsITEscil9LHNhbXBsZXIyRDpmdW5jdGlvbih0LGUscil7dC51bmlmb3JtMWkoZSxyKX19LHU9e2Zsb2F0OmZ1bmN0aW9uKHQsZSxyKXt0LnVuaWZvcm0xZnYoZSxyKX0sdmVjMjpmdW5jdGlvbih0LGUscil7dC51bmlmb3JtMmZ2KGUscil9LHZlYzM6ZnVuY3Rpb24odCxlLHIpe3QudW5pZm9ybTNmdihlLHIpfSx2ZWM0OmZ1bmN0aW9uKHQsZSxyKXt0LnVuaWZvcm00ZnYoZSxyKX0saW50OmZ1bmN0aW9uKHQsZSxyKXt0LnVuaWZvcm0xaXYoZSxyKX0saXZlYzI6ZnVuY3Rpb24odCxlLHIpe3QudW5pZm9ybTJpdihlLHIpfSxpdmVjMzpmdW5jdGlvbih0LGUscil7dC51bmlmb3JtM2l2KGUscil9LGl2ZWM0OmZ1bmN0aW9uKHQsZSxyKXt0LnVuaWZvcm00aXYoZSxyKX0sYm9vbDpmdW5jdGlvbih0LGUscil7dC51bmlmb3JtMWl2KGUscil9LGJ2ZWMyOmZ1bmN0aW9uKHQsZSxyKXt0LnVuaWZvcm0yaXYoZSxyKX0sYnZlYzM6ZnVuY3Rpb24odCxlLHIpe3QudW5pZm9ybTNpdihlLHIpfSxidmVjNDpmdW5jdGlvbih0LGUscil7dC51bmlmb3JtNGl2KGUscil9LHNhbXBsZXIyRDpmdW5jdGlvbih0LGUscil7dC51bmlmb3JtMWl2KGUscil9fTtlLmV4cG9ydHM9b30se31dLDIyOltmdW5jdGlvbih0LGUscil7ZS5leHBvcnRzPXtjb21waWxlUHJvZ3JhbTp0KFwiLi9jb21waWxlUHJvZ3JhbVwiKSxkZWZhdWx0VmFsdWU6dChcIi4vZGVmYXVsdFZhbHVlXCIpLGV4dHJhY3RBdHRyaWJ1dGVzOnQoXCIuL2V4dHJhY3RBdHRyaWJ1dGVzXCIpLGV4dHJhY3RVbmlmb3Jtczp0KFwiLi9leHRyYWN0VW5pZm9ybXNcIiksZ2VuZXJhdGVVbmlmb3JtQWNjZXNzT2JqZWN0OnQoXCIuL2dlbmVyYXRlVW5pZm9ybUFjY2Vzc09iamVjdFwiKSxzZXRQcmVjaXNpb246dChcIi4vc2V0UHJlY2lzaW9uXCIpLG1hcFNpemU6dChcIi4vbWFwU2l6ZVwiKSxtYXBUeXBlOnQoXCIuL21hcFR5cGVcIil9fSx7XCIuL2NvbXBpbGVQcm9ncmFtXCI6MTcsXCIuL2RlZmF1bHRWYWx1ZVwiOjE4LFwiLi9leHRyYWN0QXR0cmlidXRlc1wiOjE5LFwiLi9leHRyYWN0VW5pZm9ybXNcIjoyMCxcIi4vZ2VuZXJhdGVVbmlmb3JtQWNjZXNzT2JqZWN0XCI6MjEsXCIuL21hcFNpemVcIjoyMyxcIi4vbWFwVHlwZVwiOjI0LFwiLi9zZXRQcmVjaXNpb25cIjoyNX1dLDIzOltmdW5jdGlvbih0LGUscil7dmFyIG49ZnVuY3Rpb24odCl7cmV0dXJuIGlbdF19LGk9e2Zsb2F0OjEsdmVjMjoyLHZlYzM6Myx2ZWM0OjQsaW50OjEsaXZlYzI6MixpdmVjMzozLGl2ZWM0OjQsYm9vbDoxLGJ2ZWMyOjIsYnZlYzM6MyxidmVjNDo0LG1hdDI6NCxtYXQzOjksbWF0NDoxNixzYW1wbGVyMkQ6MX07ZS5leHBvcnRzPW59LHt9XSwyNDpbZnVuY3Rpb24odCxlLHIpe3ZhciBuPWZ1bmN0aW9uKHQsZSl7aWYoIWkpe3ZhciByPU9iamVjdC5rZXlzKG8pO2k9e307Zm9yKHZhciBuPTA7bjxyLmxlbmd0aDsrK24pe3ZhciBzPXJbbl07aVt0W3NdXT1vW3NdfX1yZXR1cm4gaVtlXX0saT1udWxsLG89e0ZMT0FUOlwiZmxvYXRcIixGTE9BVF9WRUMyOlwidmVjMlwiLEZMT0FUX1ZFQzM6XCJ2ZWMzXCIsRkxPQVRfVkVDNDpcInZlYzRcIixJTlQ6XCJpbnRcIixJTlRfVkVDMjpcIml2ZWMyXCIsSU5UX1ZFQzM6XCJpdmVjM1wiLElOVF9WRUM0OlwiaXZlYzRcIixCT09MOlwiYm9vbFwiLEJPT0xfVkVDMjpcImJ2ZWMyXCIsQk9PTF9WRUMzOlwiYnZlYzNcIixCT09MX1ZFQzQ6XCJidmVjNFwiLEZMT0FUX01BVDI6XCJtYXQyXCIsRkxPQVRfTUFUMzpcIm1hdDNcIixGTE9BVF9NQVQ0OlwibWF0NFwiLFNBTVBMRVJfMkQ6XCJzYW1wbGVyMkRcIn07ZS5leHBvcnRzPW59LHt9XSwyNTpbZnVuY3Rpb24odCxlLHIpe3ZhciBuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuXCJwcmVjaXNpb25cIiE9PXQuc3Vic3RyaW5nKDAsOSk/XCJwcmVjaXNpb24gXCIrZStcIiBmbG9hdDtcXG5cIit0OnR9O2UuZXhwb3J0cz1ufSx7fV0sMjY6W2Z1bmN0aW9uKHQsZSxyKXtmdW5jdGlvbiBuKCl7dGhyb3cgbmV3IEVycm9yKFwic2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZFwiKX1mdW5jdGlvbiBpKCl7dGhyb3cgbmV3IEVycm9yKFwiY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkXCIpfWZ1bmN0aW9uIG8odCl7aWYoYz09PXNldFRpbWVvdXQpcmV0dXJuIHNldFRpbWVvdXQodCwwKTtpZigoYz09PW58fCFjKSYmc2V0VGltZW91dClyZXR1cm4gYz1zZXRUaW1lb3V0LHNldFRpbWVvdXQodCwwKTt0cnl7cmV0dXJuIGModCwwKX1jYXRjaChlKXt0cnl7cmV0dXJuIGMuY2FsbChudWxsLHQsMCl9Y2F0Y2goZSl7cmV0dXJuIGMuY2FsbCh0aGlzLHQsMCl9fX1mdW5jdGlvbiBzKHQpe2lmKGQ9PT1jbGVhclRpbWVvdXQpcmV0dXJuIGNsZWFyVGltZW91dCh0KTtpZigoZD09PWl8fCFkKSYmY2xlYXJUaW1lb3V0KXJldHVybiBkPWNsZWFyVGltZW91dCxjbGVhclRpbWVvdXQodCk7dHJ5e3JldHVybiBkKHQpfWNhdGNoKGUpe3RyeXtyZXR1cm4gZC5jYWxsKG51bGwsdCl9Y2F0Y2goZSl7cmV0dXJuIGQuY2FsbCh0aGlzLHQpfX19ZnVuY3Rpb24gYSgpe2cmJnAmJihnPSExLHAubGVuZ3RoP3Y9cC5jb25jYXQodik6eT0tMSx2Lmxlbmd0aCYmdSgpKX1mdW5jdGlvbiB1KCl7aWYoIWcpe3ZhciB0PW8oYSk7Zz0hMDtmb3IodmFyIGU9di5sZW5ndGg7ZTspe2ZvcihwPXYsdj1bXTsrK3k8ZTspcCYmcFt5XS5ydW4oKTt5PS0xLGU9di5sZW5ndGh9cD1udWxsLGc9ITEscyh0KX19ZnVuY3Rpb24gaCh0LGUpe3RoaXMuZnVuPXQsdGhpcy5hcnJheT1lfWZ1bmN0aW9uIGwoKXt9dmFyIGMsZCxmPWUuZXhwb3J0cz17fTshZnVuY3Rpb24oKXt0cnl7Yz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBzZXRUaW1lb3V0P3NldFRpbWVvdXQ6bn1jYXRjaCh0KXtjPW59dHJ5e2Q9XCJmdW5jdGlvblwiPT10eXBlb2YgY2xlYXJUaW1lb3V0P2NsZWFyVGltZW91dDppfWNhdGNoKHQpe2Q9aX19KCk7dmFyIHAsdj1bXSxnPSExLHk9LTE7Zi5uZXh0VGljaz1mdW5jdGlvbih0KXt2YXIgZT1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aC0xKTtpZihhcmd1bWVudHMubGVuZ3RoPjEpZm9yKHZhciByPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyllW3ItMV09YXJndW1lbnRzW3JdO3YucHVzaChuZXcgaCh0LGUpKSwxIT09di5sZW5ndGh8fGd8fG8odSl9LGgucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3RoaXMuZnVuLmFwcGx5KG51bGwsdGhpcy5hcnJheSl9LGYudGl0bGU9XCJicm93c2VyXCIsZi5icm93c2VyPSEwLGYuZW52PXt9LGYuYXJndj1bXSxmLnZlcnNpb249XCJcIixmLnZlcnNpb25zPXt9LGYub249bCxmLmFkZExpc3RlbmVyPWwsZi5vbmNlPWwsZi5vZmY9bCxmLnJlbW92ZUxpc3RlbmVyPWwsZi5yZW1vdmVBbGxMaXN0ZW5lcnM9bCxmLmVtaXQ9bCxmLnByZXBlbmRMaXN0ZW5lcj1sLGYucHJlcGVuZE9uY2VMaXN0ZW5lcj1sLGYubGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3JldHVybltdfSxmLmJpbmRpbmc9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWRcIil9LGYuY3dkPWZ1bmN0aW9uKCl7cmV0dXJuXCIvXCJ9LGYuY2hkaXI9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkXCIpfSxmLnVtYXNrPWZ1bmN0aW9uKCl7cmV0dXJuIDB9fSx7fV0sMjc6W2Z1bmN0aW9uKGUscixuKXsoZnVuY3Rpb24oZSl7IWZ1bmN0aW9uKGkpe2Z1bmN0aW9uIG8odCl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoTFt0XSl9ZnVuY3Rpb24gcyh0LGUpe2Zvcih2YXIgcj10Lmxlbmd0aCxuPVtdO3ItLTspbltyXT1lKHRbcl0pO3JldHVybiBufWZ1bmN0aW9uIGEodCxlKXt2YXIgcj10LnNwbGl0KFwiQFwiKSxuPVwiXCI7cmV0dXJuIHIubGVuZ3RoPjEmJihuPXJbMF0rXCJAXCIsdD1yWzFdKSx0PXQucmVwbGFjZShELFwiLlwiKSxuK3ModC5zcGxpdChcIi5cIiksZSkuam9pbihcIi5cIil9ZnVuY3Rpb24gdSh0KXtmb3IodmFyIGUscixuPVtdLGk9MCxvPXQubGVuZ3RoO2k8bzspZT10LmNoYXJDb2RlQXQoaSsrKSxlPj01NTI5NiYmZTw9NTYzMTkmJmk8bz8ocj10LmNoYXJDb2RlQXQoaSsrKSw1NjMyMD09KDY0NTEyJnIpP24ucHVzaCgoKDEwMjMmZSk8PDEwKSsoMTAyMyZyKSs2NTUzNik6KG4ucHVzaChlKSxpLS0pKTpuLnB1c2goZSk7cmV0dXJuIG59ZnVuY3Rpb24gaCh0KXtyZXR1cm4gcyh0LGZ1bmN0aW9uKHQpe3ZhciBlPVwiXCI7cmV0dXJuIHQ+NjU1MzUmJih0LT02NTUzNixlKz1rKHQ+Pj4xMCYxMDIzfDU1Mjk2KSx0PTU2MzIwfDEwMjMmdCksZSs9ayh0KX0pLmpvaW4oXCJcIil9ZnVuY3Rpb24gbCh0KXtyZXR1cm4gdC00ODwxMD90LTIyOnQtNjU8MjY/dC02NTp0LTk3PDI2P3QtOTc6d31mdW5jdGlvbiBjKHQsZSl7cmV0dXJuIHQrMjIrNzUqKHQ8MjYpLSgoMCE9ZSk8PDUpfWZ1bmN0aW9uIGQodCxlLHIpe3ZhciBuPTA7Zm9yKHQ9cj9CKHQvTSk6dD4+MSx0Kz1CKHQvZSk7dD5OKlM+PjE7bis9dyl0PUIodC9OKTtyZXR1cm4gQihuKyhOKzEpKnQvKHQrTykpfWZ1bmN0aW9uIGYodCl7dmFyIGUscixuLGkscyxhLHUsYyxmLHAsdj1bXSxnPXQubGVuZ3RoLHk9MCxtPUMsXz1QO2ZvcihyPXQubGFzdEluZGV4T2YoUikscjwwJiYocj0wKSxuPTA7bjxyOysrbil0LmNoYXJDb2RlQXQobik+PTEyOCYmbyhcIm5vdC1iYXNpY1wiKSx2LnB1c2godC5jaGFyQ29kZUF0KG4pKTtmb3IoaT1yPjA/cisxOjA7aTxnOyl7Zm9yKHM9eSxhPTEsdT13O2k+PWcmJm8oXCJpbnZhbGlkLWlucHV0XCIpLGM9bCh0LmNoYXJDb2RlQXQoaSsrKSksKGM+PXd8fGM+QigoVC15KS9hKSkmJm8oXCJvdmVyZmxvd1wiKSx5Kz1jKmEsZj11PD1fP0U6dT49XytTP1M6dS1fLCEoYzxmKTt1Kz13KXA9dy1mLGE+QihUL3ApJiZvKFwib3ZlcmZsb3dcIiksYSo9cDtlPXYubGVuZ3RoKzEsXz1kKHktcyxlLDA9PXMpLEIoeS9lKT5ULW0mJm8oXCJvdmVyZmxvd1wiKSxtKz1CKHkvZSkseSU9ZSx2LnNwbGljZSh5KyssMCxtKX1yZXR1cm4gaCh2KX1mdW5jdGlvbiBwKHQpe3ZhciBlLHIsbixpLHMsYSxoLGwsZixwLHYsZyx5LG0sXyxiPVtdO2Zvcih0PXUodCksZz10Lmxlbmd0aCxlPUMscj0wLHM9UCxhPTA7YTxnOysrYSkodj10W2FdKTwxMjgmJmIucHVzaChrKHYpKTtmb3Iobj1pPWIubGVuZ3RoLGkmJmIucHVzaChSKTtuPGc7KXtmb3IoaD1ULGE9MDthPGc7KythKSh2PXRbYV0pPj1lJiZ2PGgmJihoPXYpO2Zvcih5PW4rMSxoLWU+QigoVC1yKS95KSYmbyhcIm92ZXJmbG93XCIpLHIrPShoLWUpKnksZT1oLGE9MDthPGc7KythKWlmKHY9dFthXSx2PGUmJisrcj5UJiZvKFwib3ZlcmZsb3dcIiksdj09ZSl7Zm9yKGw9cixmPXc7cD1mPD1zP0U6Zj49cytTP1M6Zi1zLCEobDxwKTtmKz13KV89bC1wLG09dy1wLGIucHVzaChrKGMocCtfJW0sMCkpKSxsPUIoXy9tKTtiLnB1c2goayhjKGwsMCkpKSxzPWQocix5LG49PWkpLHI9MCwrK259KytyLCsrZX1yZXR1cm4gYi5qb2luKFwiXCIpfWZ1bmN0aW9uIHYodCl7cmV0dXJuIGEodCxmdW5jdGlvbih0KXtyZXR1cm4gQS50ZXN0KHQpP2YodC5zbGljZSg0KS50b0xvd2VyQ2FzZSgpKTp0fSl9ZnVuY3Rpb24gZyh0KXtyZXR1cm4gYSh0LGZ1bmN0aW9uKHQpe3JldHVybiBJLnRlc3QodCk/XCJ4bi0tXCIrcCh0KTp0fSl9dmFyIHk9XCJvYmplY3RcIj09dHlwZW9mIG4mJm4mJiFuLm5vZGVUeXBlJiZuLG09XCJvYmplY3RcIj09dHlwZW9mIHImJnImJiFyLm5vZGVUeXBlJiZyLF89XCJvYmplY3RcIj09dHlwZW9mIGUmJmU7Xy5nbG9iYWwhPT1fJiZfLndpbmRvdyE9PV8mJl8uc2VsZiE9PV98fChpPV8pO3ZhciBiLHgsVD0yMTQ3NDgzNjQ3LHc9MzYsRT0xLFM9MjYsTz0zOCxNPTcwMCxQPTcyLEM9MTI4LFI9XCItXCIsQT0vXnhuLS0vLEk9L1teXFx4MjAtXFx4N0VdLyxEPS9bXFx4MkVcXHUzMDAyXFx1RkYwRVxcdUZGNjFdL2csTD17b3ZlcmZsb3c6XCJPdmVyZmxvdzogaW5wdXQgbmVlZHMgd2lkZXIgaW50ZWdlcnMgdG8gcHJvY2Vzc1wiLFwibm90LWJhc2ljXCI6XCJJbGxlZ2FsIGlucHV0ID49IDB4ODAgKG5vdCBhIGJhc2ljIGNvZGUgcG9pbnQpXCIsXCJpbnZhbGlkLWlucHV0XCI6XCJJbnZhbGlkIGlucHV0XCJ9LE49dy1FLEI9TWF0aC5mbG9vcixrPVN0cmluZy5mcm9tQ2hhckNvZGU7aWYoYj17dmVyc2lvbjpcIjEuNC4xXCIsdWNzMjp7ZGVjb2RlOnUsZW5jb2RlOmh9LGRlY29kZTpmLGVuY29kZTpwLHRvQVNDSUk6Zyx0b1VuaWNvZGU6dn0sXCJmdW5jdGlvblwiPT10eXBlb2YgdCYmXCJvYmplY3RcIj09dHlwZW9mIHQuYW1kJiZ0LmFtZCl0KFwicHVueWNvZGVcIixmdW5jdGlvbigpe3JldHVybiBifSk7ZWxzZSBpZih5JiZtKWlmKHIuZXhwb3J0cz09eSltLmV4cG9ydHM9YjtlbHNlIGZvcih4IGluIGIpYi5oYXNPd25Qcm9wZXJ0eSh4KSYmKHlbeF09Ylt4XSk7ZWxzZSBpLnB1bnljb2RlPWJ9KHRoaXMpfSkuY2FsbCh0aGlzLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7fV0sMjg6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpfWUuZXhwb3J0cz1mdW5jdGlvbih0LGUscixvKXtlPWV8fFwiJlwiLHI9cnx8XCI9XCI7dmFyIHM9e307aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHR8fDA9PT10Lmxlbmd0aClyZXR1cm4gczt2YXIgYT0vXFwrL2c7dD10LnNwbGl0KGUpO3ZhciB1PTFlMztvJiZcIm51bWJlclwiPT10eXBlb2Ygby5tYXhLZXlzJiYodT1vLm1heEtleXMpO3ZhciBoPXQubGVuZ3RoO3U+MCYmaD51JiYoaD11KTtmb3IodmFyIGw9MDtsPGg7KytsKXt2YXIgYyxkLGYscCx2PXRbbF0ucmVwbGFjZShhLFwiJTIwXCIpLGc9di5pbmRleE9mKHIpO2c+PTA/KGM9di5zdWJzdHIoMCxnKSxkPXYuc3Vic3RyKGcrMSkpOihjPXYsZD1cIlwiKSxmPWRlY29kZVVSSUNvbXBvbmVudChjKSxwPWRlY29kZVVSSUNvbXBvbmVudChkKSxuKHMsZik/aShzW2ZdKT9zW2ZdLnB1c2gocCk6c1tmXT1bc1tmXSxwXTpzW2ZdPXB9cmV0dXJuIHN9O3ZhciBpPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKHQpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX19LHt9XSwyOTpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZih0Lm1hcClyZXR1cm4gdC5tYXAoZSk7Zm9yKHZhciByPVtdLG49MDtuPHQubGVuZ3RoO24rKylyLnB1c2goZSh0W25dLG4pKTtyZXR1cm4gcn12YXIgaT1mdW5jdGlvbih0KXtzd2l0Y2godHlwZW9mIHQpe2Nhc2VcInN0cmluZ1wiOnJldHVybiB0O2Nhc2VcImJvb2xlYW5cIjpyZXR1cm4gdD9cInRydWVcIjpcImZhbHNlXCI7Y2FzZVwibnVtYmVyXCI6cmV0dXJuIGlzRmluaXRlKHQpP3Q6XCJcIjtkZWZhdWx0OnJldHVyblwiXCJ9fTtlLmV4cG9ydHM9ZnVuY3Rpb24odCxlLHIsYSl7cmV0dXJuIGU9ZXx8XCImXCIscj1yfHxcIj1cIixudWxsPT09dCYmKHQ9dm9pZCAwKSxcIm9iamVjdFwiPT10eXBlb2YgdD9uKHModCksZnVuY3Rpb24ocyl7dmFyIGE9ZW5jb2RlVVJJQ29tcG9uZW50KGkocykpK3I7cmV0dXJuIG8odFtzXSk/bih0W3NdLGZ1bmN0aW9uKHQpe3JldHVybiBhK2VuY29kZVVSSUNvbXBvbmVudChpKHQpKX0pLmpvaW4oZSk6YStlbmNvZGVVUklDb21wb25lbnQoaSh0W3NdKSl9KS5qb2luKGUpOmE/ZW5jb2RlVVJJQ29tcG9uZW50KGkoYSkpK3IrZW5jb2RlVVJJQ29tcG9uZW50KGkodCkpOlwiXCJ9O3ZhciBvPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKHQpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX0scz1PYmplY3Qua2V5c3x8ZnVuY3Rpb24odCl7dmFyIGU9W107Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJmUucHVzaChyKTtyZXR1cm4gZX19LHt9XSwzMDpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO3IuZGVjb2RlPXIucGFyc2U9dChcIi4vZGVjb2RlXCIpLHIuZW5jb2RlPXIuc3RyaW5naWZ5PXQoXCIuL2VuY29kZVwiKX0se1wiLi9kZWNvZGVcIjoyOCxcIi4vZW5jb2RlXCI6Mjl9XSwzMTpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz1mdW5jdGlvbih0LGUscil7dmFyIG4saT10Lmxlbmd0aDtpZighKGU+PWl8fDA9PT1yKSl7cj1lK3I+aT9pLWU6cjt2YXIgbz1pLXI7Zm9yKG49ZTtuPG87KytuKXRbbl09dFtuK3JdO3QubGVuZ3RoPW99fX0se31dLDMyOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ci5fX2VzTW9kdWxlPSEwLHIuTG9hZGVyPXZvaWQgMDt2YXIgbz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiB0fSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksYT10KFwibWluaS1zaWduYWxzXCIpLHU9bihhKSxoPXQoXCJwYXJzZS11cmlcIiksbD1uKGgpLGM9dChcIi4vYXN5bmNcIiksZD1mdW5jdGlvbih0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9e307aWYobnVsbCE9dClmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSk7cmV0dXJuIGUuZGVmYXVsdD10LGV9KGMpLGY9dChcIi4vUmVzb3VyY2VcIikscD0vKCNbXFx3LV0rKT8kLyx2PXIuTG9hZGVyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ZhciBlPXRoaXMscj1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06XCJcIixuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXToxMDtpKHRoaXMsdCksdGhpcy5iYXNlVXJsPXIsdGhpcy5wcm9ncmVzcz0wLHRoaXMubG9hZGluZz0hMSx0aGlzLmRlZmF1bHRRdWVyeVN0cmluZz1cIlwiLHRoaXMuX2JlZm9yZU1pZGRsZXdhcmU9W10sdGhpcy5fYWZ0ZXJNaWRkbGV3YXJlPVtdLHRoaXMuX3Jlc291cmNlc1BhcnNpbmc9W10sdGhpcy5fYm91bmRMb2FkUmVzb3VyY2U9ZnVuY3Rpb24odCxyKXtyZXR1cm4gZS5fbG9hZFJlc291cmNlKHQscil9LHRoaXMuX3F1ZXVlPWQucXVldWUodGhpcy5fYm91bmRMb2FkUmVzb3VyY2UsbiksdGhpcy5fcXVldWUucGF1c2UoKSx0aGlzLnJlc291cmNlcz17fSx0aGlzLm9uUHJvZ3Jlc3M9bmV3IHUuZGVmYXVsdCx0aGlzLm9uRXJyb3I9bmV3IHUuZGVmYXVsdCx0aGlzLm9uTG9hZD1uZXcgdS5kZWZhdWx0LHRoaXMub25TdGFydD1uZXcgdS5kZWZhdWx0LHRoaXMub25Db21wbGV0ZT1uZXcgdS5kZWZhdWx0O2Zvcih2YXIgbz0wO288dC5fZGVmYXVsdEJlZm9yZU1pZGRsZXdhcmUubGVuZ3RoOysrbyl0aGlzLnByZSh0Ll9kZWZhdWx0QmVmb3JlTWlkZGxld2FyZVtvXSk7Zm9yKHZhciBzPTA7czx0Ll9kZWZhdWx0QWZ0ZXJNaWRkbGV3YXJlLmxlbmd0aDsrK3MpdGhpcy51c2UodC5fZGVmYXVsdEFmdGVyTWlkZGxld2FyZVtzXSl9cmV0dXJuIHQucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0LGUscixuKXtpZihBcnJheS5pc0FycmF5KHQpKXtmb3IodmFyIGk9MDtpPHQubGVuZ3RoOysraSl0aGlzLmFkZCh0W2ldKTtyZXR1cm4gdGhpc31pZihcIm9iamVjdFwiPT09KHZvaWQgMD09PXQ/XCJ1bmRlZmluZWRcIjpvKHQpKSYmKG49ZXx8dC5jYWxsYmFja3x8dC5vbkNvbXBsZXRlLHI9dCxlPXQudXJsLHQ9dC5uYW1lfHx0LmtleXx8dC51cmwpLFwic3RyaW5nXCIhPXR5cGVvZiBlJiYobj1yLHI9ZSxlPXQpLFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcihcIk5vIHVybCBwYXNzZWQgdG8gYWRkIHJlc291cmNlIHRvIGxvYWRlci5cIik7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgciYmKG49cixyPW51bGwpLHRoaXMubG9hZGluZyYmKCFyfHwhci5wYXJlbnRSZXNvdXJjZSkpdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGFkZCByZXNvdXJjZXMgd2hpbGUgdGhlIGxvYWRlciBpcyBydW5uaW5nLlwiKTtpZih0aGlzLnJlc291cmNlc1t0XSl0aHJvdyBuZXcgRXJyb3IoJ1Jlc291cmNlIG5hbWVkIFwiJyt0KydcIiBhbHJlYWR5IGV4aXN0cy4nKTtpZihlPXRoaXMuX3ByZXBhcmVVcmwoZSksdGhpcy5yZXNvdXJjZXNbdF09bmV3IGYuUmVzb3VyY2UodCxlLHIpLFwiZnVuY3Rpb25cIj09dHlwZW9mIG4mJnRoaXMucmVzb3VyY2VzW3RdLm9uQWZ0ZXJNaWRkbGV3YXJlLm9uY2UobiksdGhpcy5sb2FkaW5nKXtmb3IodmFyIHM9ci5wYXJlbnRSZXNvdXJjZSxhPVtdLHU9MDt1PHMuY2hpbGRyZW4ubGVuZ3RoOysrdSlzLmNoaWxkcmVuW3VdLmlzQ29tcGxldGV8fGEucHVzaChzLmNoaWxkcmVuW3VdKTt2YXIgaD1zLnByb2dyZXNzQ2h1bmsqKGEubGVuZ3RoKzEpLGw9aC8oYS5sZW5ndGgrMik7cy5jaGlsZHJlbi5wdXNoKHRoaXMucmVzb3VyY2VzW3RdKSxzLnByb2dyZXNzQ2h1bms9bDtmb3IodmFyIGM9MDtjPGEubGVuZ3RoOysrYylhW2NdLnByb2dyZXNzQ2h1bms9bDt0aGlzLnJlc291cmNlc1t0XS5wcm9ncmVzc0NodW5rPWx9cmV0dXJuIHRoaXMuX3F1ZXVlLnB1c2godGhpcy5yZXNvdXJjZXNbdF0pLHRoaXN9LHQucHJvdG90eXBlLnByZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYmVmb3JlTWlkZGxld2FyZS5wdXNoKHQpLHRoaXN9LHQucHJvdG90eXBlLnVzZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYWZ0ZXJNaWRkbGV3YXJlLnB1c2godCksdGhpc30sdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLnByb2dyZXNzPTAsdGhpcy5sb2FkaW5nPSExLHRoaXMuX3F1ZXVlLmtpbGwoKSx0aGlzLl9xdWV1ZS5wYXVzZSgpO2Zvcih2YXIgdCBpbiB0aGlzLnJlc291cmNlcyl7dmFyIGU9dGhpcy5yZXNvdXJjZXNbdF07ZS5fb25Mb2FkQmluZGluZyYmZS5fb25Mb2FkQmluZGluZy5kZXRhY2goKSxlLmlzTG9hZGluZyYmZS5hYm9ydCgpfXJldHVybiB0aGlzLnJlc291cmNlcz17fSx0aGlzfSx0LnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKHQpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQmJnRoaXMub25Db21wbGV0ZS5vbmNlKHQpLHRoaXMubG9hZGluZylyZXR1cm4gdGhpcztpZih0aGlzLl9xdWV1ZS5pZGxlKCkpdGhpcy5fb25TdGFydCgpLHRoaXMuX29uQ29tcGxldGUoKTtlbHNle2Zvcih2YXIgZT10aGlzLl9xdWV1ZS5fdGFza3MubGVuZ3RoLHI9MTAwL2Usbj0wO248dGhpcy5fcXVldWUuX3Rhc2tzLmxlbmd0aDsrK24pdGhpcy5fcXVldWUuX3Rhc2tzW25dLmRhdGEucHJvZ3Jlc3NDaHVuaz1yO3RoaXMuX29uU3RhcnQoKSx0aGlzLl9xdWV1ZS5yZXN1bWUoKX1yZXR1cm4gdGhpc30sdC5wcm90b3R5cGUuX3ByZXBhcmVVcmw9ZnVuY3Rpb24odCl7dmFyIGU9KDAsbC5kZWZhdWx0KSh0LHtzdHJpY3RNb2RlOiEwfSkscj12b2lkIDA7aWYocj1lLnByb3RvY29sfHwhZS5wYXRofHwwPT09dC5pbmRleE9mKFwiLy9cIik/dDp0aGlzLmJhc2VVcmwubGVuZ3RoJiZ0aGlzLmJhc2VVcmwubGFzdEluZGV4T2YoXCIvXCIpIT09dGhpcy5iYXNlVXJsLmxlbmd0aC0xJiZcIi9cIiE9PXQuY2hhckF0KDApP3RoaXMuYmFzZVVybCtcIi9cIit0OnRoaXMuYmFzZVVybCt0LHRoaXMuZGVmYXVsdFF1ZXJ5U3RyaW5nKXt2YXIgbj1wLmV4ZWMocilbMF07cj1yLnN1YnN0cigwLHIubGVuZ3RoLW4ubGVuZ3RoKSwtMSE9PXIuaW5kZXhPZihcIj9cIik/cis9XCImXCIrdGhpcy5kZWZhdWx0UXVlcnlTdHJpbmc6cis9XCI/XCIrdGhpcy5kZWZhdWx0UXVlcnlTdHJpbmcscis9bn1yZXR1cm4gcn0sdC5wcm90b3R5cGUuX2xvYWRSZXNvdXJjZT1mdW5jdGlvbih0LGUpe3ZhciByPXRoaXM7dC5fZGVxdWV1ZT1lLGQuZWFjaFNlcmllcyh0aGlzLl9iZWZvcmVNaWRkbGV3YXJlLGZ1bmN0aW9uKGUsbil7ZS5jYWxsKHIsdCxmdW5jdGlvbigpe24odC5pc0NvbXBsZXRlP3t9Om51bGwpfSl9LGZ1bmN0aW9uKCl7dC5pc0NvbXBsZXRlP3IuX29uTG9hZCh0KToodC5fb25Mb2FkQmluZGluZz10Lm9uQ29tcGxldGUub25jZShyLl9vbkxvYWQsciksdC5sb2FkKCkpfSwhMCl9LHQucHJvdG90eXBlLl9vblN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5wcm9ncmVzcz0wLHRoaXMubG9hZGluZz0hMCx0aGlzLm9uU3RhcnQuZGlzcGF0Y2godGhpcyl9LHQucHJvdG90eXBlLl9vbkNvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy5wcm9ncmVzcz0xMDAsdGhpcy5sb2FkaW5nPSExLHRoaXMub25Db21wbGV0ZS5kaXNwYXRjaCh0aGlzLHRoaXMucmVzb3VyY2VzKX0sdC5wcm90b3R5cGUuX29uTG9hZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3QuX29uTG9hZEJpbmRpbmc9bnVsbCx0aGlzLl9yZXNvdXJjZXNQYXJzaW5nLnB1c2godCksdC5fZGVxdWV1ZSgpLGQuZWFjaFNlcmllcyh0aGlzLl9hZnRlck1pZGRsZXdhcmUsZnVuY3Rpb24ocixuKXtyLmNhbGwoZSx0LG4pfSxmdW5jdGlvbigpe3Qub25BZnRlck1pZGRsZXdhcmUuZGlzcGF0Y2godCksZS5wcm9ncmVzcz1NYXRoLm1pbigxMDAsZS5wcm9ncmVzcyt0LnByb2dyZXNzQ2h1bmspLGUub25Qcm9ncmVzcy5kaXNwYXRjaChlLHQpLHQuZXJyb3I/ZS5vbkVycm9yLmRpc3BhdGNoKHQuZXJyb3IsZSx0KTplLm9uTG9hZC5kaXNwYXRjaChlLHQpLGUuX3Jlc291cmNlc1BhcnNpbmcuc3BsaWNlKGUuX3Jlc291cmNlc1BhcnNpbmcuaW5kZXhPZih0KSwxKSxlLl9xdWV1ZS5pZGxlKCkmJjA9PT1lLl9yZXNvdXJjZXNQYXJzaW5nLmxlbmd0aCYmZS5fb25Db21wbGV0ZSgpfSwhMCl9LHModCxbe2tleTpcImNvbmN1cnJlbmN5XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3F1ZXVlLmNvbmN1cnJlbmN5fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcXVldWUuY29uY3VycmVuY3k9dH19XSksdH0oKTt2Ll9kZWZhdWx0QmVmb3JlTWlkZGxld2FyZT1bXSx2Ll9kZWZhdWx0QWZ0ZXJNaWRkbGV3YXJlPVtdLHYucHJlPWZ1bmN0aW9uKHQpe3JldHVybiB2Ll9kZWZhdWx0QmVmb3JlTWlkZGxld2FyZS5wdXNoKHQpLHZ9LHYudXNlPWZ1bmN0aW9uKHQpe3JldHVybiB2Ll9kZWZhdWx0QWZ0ZXJNaWRkbGV3YXJlLnB1c2godCksdn19LHtcIi4vUmVzb3VyY2VcIjozMyxcIi4vYXN5bmNcIjozNCxcIm1pbmktc2lnbmFsc1wiOjUsXCJwYXJzZS11cmlcIjo3fV0sMzM6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBpKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKCl7fWZ1bmN0aW9uIHModCxlLHIpe2UmJjA9PT1lLmluZGV4T2YoXCIuXCIpJiYoZT1lLnN1YnN0cmluZygxKSksZSYmKHRbZV09cil9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gdC50b1N0cmluZygpLnJlcGxhY2UoXCJvYmplY3QgXCIsXCJcIil9ci5fX2VzTW9kdWxlPSEwLHIuUmVzb3VyY2U9dm9pZCAwO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksaD10KFwicGFyc2UtdXJpXCIpLGw9bihoKSxjPXQoXCJtaW5pLXNpZ25hbHNcIiksZD1uKGMpLGY9ISghd2luZG93LlhEb21haW5SZXF1ZXN0fHxcIndpdGhDcmVkZW50aWFsc1wiaW4gbmV3IFhNTEh0dHBSZXF1ZXN0KSxwPW51bGwsdj1yLlJlc291cmNlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLHIsbil7aWYoaSh0aGlzLHQpLFwic3RyaW5nXCIhPXR5cGVvZiBlfHxcInN0cmluZ1wiIT10eXBlb2Ygcil0aHJvdyBuZXcgRXJyb3IoXCJCb3RoIG5hbWUgYW5kIHVybCBhcmUgcmVxdWlyZWQgZm9yIGNvbnN0cnVjdGluZyBhIHJlc291cmNlLlwiKTtuPW58fHt9LHRoaXMuX2ZsYWdzPTAsdGhpcy5fc2V0RmxhZyh0LlNUQVRVU19GTEFHUy5EQVRBX1VSTCwwPT09ci5pbmRleE9mKFwiZGF0YTpcIikpLHRoaXMubmFtZT1lLHRoaXMudXJsPXIsdGhpcy5leHRlbnNpb249dGhpcy5fZ2V0RXh0ZW5zaW9uKCksdGhpcy5kYXRhPW51bGwsdGhpcy5jcm9zc09yaWdpbj0hMD09PW4uY3Jvc3NPcmlnaW4/XCJhbm9ueW1vdXNcIjpuLmNyb3NzT3JpZ2luLHRoaXMudGltZW91dD1uLnRpbWVvdXR8fDAsdGhpcy5sb2FkVHlwZT1uLmxvYWRUeXBlfHx0aGlzLl9kZXRlcm1pbmVMb2FkVHlwZSgpLHRoaXMueGhyVHlwZT1uLnhoclR5cGUsdGhpcy5tZXRhZGF0YT1uLm1ldGFkYXRhfHx7fSx0aGlzLmVycm9yPW51bGwsdGhpcy54aHI9bnVsbCx0aGlzLmNoaWxkcmVuPVtdLHRoaXMudHlwZT10LlRZUEUuVU5LTk9XTix0aGlzLnByb2dyZXNzQ2h1bms9MCx0aGlzLl9kZXF1ZXVlPW8sdGhpcy5fb25Mb2FkQmluZGluZz1udWxsLHRoaXMuX2VsZW1lbnRUaW1lcj0wLHRoaXMuX2JvdW5kQ29tcGxldGU9dGhpcy5jb21wbGV0ZS5iaW5kKHRoaXMpLHRoaXMuX2JvdW5kT25FcnJvcj10aGlzLl9vbkVycm9yLmJpbmQodGhpcyksdGhpcy5fYm91bmRPblByb2dyZXNzPXRoaXMuX29uUHJvZ3Jlc3MuYmluZCh0aGlzKSx0aGlzLl9ib3VuZE9uVGltZW91dD10aGlzLl9vblRpbWVvdXQuYmluZCh0aGlzKSx0aGlzLl9ib3VuZFhock9uRXJyb3I9dGhpcy5feGhyT25FcnJvci5iaW5kKHRoaXMpLHRoaXMuX2JvdW5kWGhyT25UaW1lb3V0PXRoaXMuX3hock9uVGltZW91dC5iaW5kKHRoaXMpLHRoaXMuX2JvdW5kWGhyT25BYm9ydD10aGlzLl94aHJPbkFib3J0LmJpbmQodGhpcyksdGhpcy5fYm91bmRYaHJPbkxvYWQ9dGhpcy5feGhyT25Mb2FkLmJpbmQodGhpcyksdGhpcy5vblN0YXJ0PW5ldyBkLmRlZmF1bHQsdGhpcy5vblByb2dyZXNzPW5ldyBkLmRlZmF1bHQsdGhpcy5vbkNvbXBsZXRlPW5ldyBkLmRlZmF1bHQsdGhpcy5vbkFmdGVyTWlkZGxld2FyZT1uZXcgZC5kZWZhdWx0fXJldHVybiB0LnNldEV4dGVuc2lvbkxvYWRUeXBlPWZ1bmN0aW9uKGUscil7cyh0Ll9sb2FkVHlwZU1hcCxlLHIpfSx0LnNldEV4dGVuc2lvblhoclR5cGU9ZnVuY3Rpb24oZSxyKXtzKHQuX3hoclR5cGVNYXAsZSxyKX0sdC5wcm90b3R5cGUuY29tcGxldGU9ZnVuY3Rpb24oKXt0aGlzLl9jbGVhckV2ZW50cygpLHRoaXMuX2ZpbmlzaCgpfSx0LnByb3RvdHlwZS5hYm9ydD1mdW5jdGlvbihlKXtpZighdGhpcy5lcnJvcil7aWYodGhpcy5lcnJvcj1uZXcgRXJyb3IoZSksdGhpcy5fY2xlYXJFdmVudHMoKSx0aGlzLnhocil0aGlzLnhoci5hYm9ydCgpO2Vsc2UgaWYodGhpcy54ZHIpdGhpcy54ZHIuYWJvcnQoKTtlbHNlIGlmKHRoaXMuZGF0YSlpZih0aGlzLmRhdGEuc3JjKXRoaXMuZGF0YS5zcmM9dC5FTVBUWV9HSUY7ZWxzZSBmb3IoO3RoaXMuZGF0YS5maXJzdENoaWxkOyl0aGlzLmRhdGEucmVtb3ZlQ2hpbGQodGhpcy5kYXRhLmZpcnN0Q2hpbGQpO3RoaXMuX2ZpbmlzaCgpfX0sdC5wcm90b3R5cGUubG9hZD1mdW5jdGlvbihlKXt2YXIgcj10aGlzO2lmKCF0aGlzLmlzTG9hZGluZyl7aWYodGhpcy5pc0NvbXBsZXRlKXJldHVybiB2b2lkKGUmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gZShyKX0sMSkpO3N3aXRjaChlJiZ0aGlzLm9uQ29tcGxldGUub25jZShlKSx0aGlzLl9zZXRGbGFnKHQuU1RBVFVTX0ZMQUdTLkxPQURJTkcsITApLHRoaXMub25TdGFydC5kaXNwYXRjaCh0aGlzKSwhMSE9PXRoaXMuY3Jvc3NPcmlnaW4mJlwic3RyaW5nXCI9PXR5cGVvZiB0aGlzLmNyb3NzT3JpZ2lufHwodGhpcy5jcm9zc09yaWdpbj10aGlzLl9kZXRlcm1pbmVDcm9zc09yaWdpbih0aGlzLnVybCkpLHRoaXMubG9hZFR5cGUpe2Nhc2UgdC5MT0FEX1RZUEUuSU1BR0U6dGhpcy50eXBlPXQuVFlQRS5JTUFHRSx0aGlzLl9sb2FkRWxlbWVudChcImltYWdlXCIpO2JyZWFrO2Nhc2UgdC5MT0FEX1RZUEUuQVVESU86dGhpcy50eXBlPXQuVFlQRS5BVURJTyx0aGlzLl9sb2FkU291cmNlRWxlbWVudChcImF1ZGlvXCIpO2JyZWFrO2Nhc2UgdC5MT0FEX1RZUEUuVklERU86dGhpcy50eXBlPXQuVFlQRS5WSURFTyx0aGlzLl9sb2FkU291cmNlRWxlbWVudChcInZpZGVvXCIpO2JyZWFrO2Nhc2UgdC5MT0FEX1RZUEUuWEhSOmRlZmF1bHQ6ZiYmdGhpcy5jcm9zc09yaWdpbj90aGlzLl9sb2FkWGRyKCk6dGhpcy5fbG9hZFhocigpfX19LHQucHJvdG90eXBlLl9oYXNGbGFnPWZ1bmN0aW9uKHQpe3JldHVybiAwIT0odGhpcy5fZmxhZ3MmdCl9LHQucHJvdG90eXBlLl9zZXRGbGFnPWZ1bmN0aW9uKHQsZSl7dGhpcy5fZmxhZ3M9ZT90aGlzLl9mbGFnc3x0OnRoaXMuX2ZsYWdzJn50fSx0LnByb3RvdHlwZS5fY2xlYXJFdmVudHM9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5fZWxlbWVudFRpbWVyKSx0aGlzLmRhdGEmJnRoaXMuZGF0YS5yZW1vdmVFdmVudExpc3RlbmVyJiYodGhpcy5kYXRhLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLHRoaXMuX2JvdW5kT25FcnJvciwhMSksdGhpcy5kYXRhLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsdGhpcy5fYm91bmRDb21wbGV0ZSwhMSksdGhpcy5kYXRhLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLHRoaXMuX2JvdW5kT25Qcm9ncmVzcywhMSksdGhpcy5kYXRhLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjYW5wbGF5dGhyb3VnaFwiLHRoaXMuX2JvdW5kQ29tcGxldGUsITEpKSx0aGlzLnhociYmKHRoaXMueGhyLnJlbW92ZUV2ZW50TGlzdGVuZXI/KHRoaXMueGhyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLHRoaXMuX2JvdW5kWGhyT25FcnJvciwhMSksdGhpcy54aHIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRpbWVvdXRcIix0aGlzLl9ib3VuZFhock9uVGltZW91dCwhMSksdGhpcy54aHIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsdGhpcy5fYm91bmRYaHJPbkFib3J0LCExKSx0aGlzLnhoci5yZW1vdmVFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIix0aGlzLl9ib3VuZE9uUHJvZ3Jlc3MsITEpLHRoaXMueGhyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsdGhpcy5fYm91bmRYaHJPbkxvYWQsITEpKToodGhpcy54aHIub25lcnJvcj1udWxsLHRoaXMueGhyLm9udGltZW91dD1udWxsLHRoaXMueGhyLm9ucHJvZ3Jlc3M9bnVsbCx0aGlzLnhoci5vbmxvYWQ9bnVsbCkpfSx0LnByb3RvdHlwZS5fZmluaXNoPWZ1bmN0aW9uKCl7aWYodGhpcy5pc0NvbXBsZXRlKXRocm93IG5ldyBFcnJvcihcIkNvbXBsZXRlIGNhbGxlZCBhZ2FpbiBmb3IgYW4gYWxyZWFkeSBjb21wbGV0ZWQgcmVzb3VyY2UuXCIpO3RoaXMuX3NldEZsYWcodC5TVEFUVVNfRkxBR1MuQ09NUExFVEUsITApLHRoaXMuX3NldEZsYWcodC5TVEFUVVNfRkxBR1MuTE9BRElORywhMSksdGhpcy5vbkNvbXBsZXRlLmRpc3BhdGNoKHRoaXMpfSx0LnByb3RvdHlwZS5fbG9hZEVsZW1lbnQ9ZnVuY3Rpb24odCl7dGhpcy5tZXRhZGF0YS5sb2FkRWxlbWVudD90aGlzLmRhdGE9dGhpcy5tZXRhZGF0YS5sb2FkRWxlbWVudDpcImltYWdlXCI9PT10JiZ2b2lkIDAhPT13aW5kb3cuSW1hZ2U/dGhpcy5kYXRhPW5ldyBJbWFnZTp0aGlzLmRhdGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0KSx0aGlzLmNyb3NzT3JpZ2luJiYodGhpcy5kYXRhLmNyb3NzT3JpZ2luPXRoaXMuY3Jvc3NPcmlnaW4pLHRoaXMubWV0YWRhdGEuc2tpcFNvdXJjZXx8KHRoaXMuZGF0YS5zcmM9dGhpcy51cmwpLHRoaXMuZGF0YS5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIix0aGlzLl9ib3VuZE9uRXJyb3IsITEpLHRoaXMuZGF0YS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLHRoaXMuX2JvdW5kQ29tcGxldGUsITEpLHRoaXMuZGF0YS5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIix0aGlzLl9ib3VuZE9uUHJvZ3Jlc3MsITEpLHRoaXMudGltZW91dCYmKHRoaXMuX2VsZW1lbnRUaW1lcj1zZXRUaW1lb3V0KHRoaXMuX2JvdW5kT25UaW1lb3V0LHRoaXMudGltZW91dCkpfSx0LnByb3RvdHlwZS5fbG9hZFNvdXJjZUVsZW1lbnQ9ZnVuY3Rpb24odCl7aWYodGhpcy5tZXRhZGF0YS5sb2FkRWxlbWVudD90aGlzLmRhdGE9dGhpcy5tZXRhZGF0YS5sb2FkRWxlbWVudDpcImF1ZGlvXCI9PT10JiZ2b2lkIDAhPT13aW5kb3cuQXVkaW8/dGhpcy5kYXRhPW5ldyBBdWRpbzp0aGlzLmRhdGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0KSxudWxsPT09dGhpcy5kYXRhKXJldHVybiB2b2lkIHRoaXMuYWJvcnQoXCJVbnN1cHBvcnRlZCBlbGVtZW50OiBcIit0KTtpZih0aGlzLmNyb3NzT3JpZ2luJiYodGhpcy5kYXRhLmNyb3NzT3JpZ2luPXRoaXMuY3Jvc3NPcmlnaW4pLCF0aGlzLm1ldGFkYXRhLnNraXBTb3VyY2UpaWYobmF2aWdhdG9yLmlzQ29jb29uSlMpdGhpcy5kYXRhLnNyYz1BcnJheS5pc0FycmF5KHRoaXMudXJsKT90aGlzLnVybFswXTp0aGlzLnVybDtlbHNlIGlmKEFycmF5LmlzQXJyYXkodGhpcy51cmwpKWZvcih2YXIgZT10aGlzLm1ldGFkYXRhLm1pbWVUeXBlLHI9MDtyPHRoaXMudXJsLmxlbmd0aDsrK3IpdGhpcy5kYXRhLmFwcGVuZENoaWxkKHRoaXMuX2NyZWF0ZVNvdXJjZSh0LHRoaXMudXJsW3JdLEFycmF5LmlzQXJyYXkoZSk/ZVtyXTplKSk7ZWxzZXt2YXIgbj10aGlzLm1ldGFkYXRhLm1pbWVUeXBlO3RoaXMuZGF0YS5hcHBlbmRDaGlsZCh0aGlzLl9jcmVhdGVTb3VyY2UodCx0aGlzLnVybCxBcnJheS5pc0FycmF5KG4pP25bMF06bikpfXRoaXMuZGF0YS5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIix0aGlzLl9ib3VuZE9uRXJyb3IsITEpLHRoaXMuZGF0YS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLHRoaXMuX2JvdW5kQ29tcGxldGUsITEpLHRoaXMuZGF0YS5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIix0aGlzLl9ib3VuZE9uUHJvZ3Jlc3MsITEpLHRoaXMuZGF0YS5hZGRFdmVudExpc3RlbmVyKFwiY2FucGxheXRocm91Z2hcIix0aGlzLl9ib3VuZENvbXBsZXRlLCExKSx0aGlzLmRhdGEubG9hZCgpLHRoaXMudGltZW91dCYmKHRoaXMuX2VsZW1lbnRUaW1lcj1zZXRUaW1lb3V0KHRoaXMuX2JvdW5kT25UaW1lb3V0LHRoaXMudGltZW91dCkpfSx0LnByb3RvdHlwZS5fbG9hZFhocj1mdW5jdGlvbigpe1wic3RyaW5nXCIhPXR5cGVvZiB0aGlzLnhoclR5cGUmJih0aGlzLnhoclR5cGU9dGhpcy5fZGV0ZXJtaW5lWGhyVHlwZSgpKTt2YXIgZT10aGlzLnhocj1uZXcgWE1MSHR0cFJlcXVlc3Q7ZS5vcGVuKFwiR0VUXCIsdGhpcy51cmwsITApLGUudGltZW91dD10aGlzLnRpbWVvdXQsdGhpcy54aHJUeXBlPT09dC5YSFJfUkVTUE9OU0VfVFlQRS5KU09OfHx0aGlzLnhoclR5cGU9PT10LlhIUl9SRVNQT05TRV9UWVBFLkRPQ1VNRU5UP2UucmVzcG9uc2VUeXBlPXQuWEhSX1JFU1BPTlNFX1RZUEUuVEVYVDplLnJlc3BvbnNlVHlwZT10aGlzLnhoclR5cGUsZS5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIix0aGlzLl9ib3VuZFhock9uRXJyb3IsITEpLGUuYWRkRXZlbnRMaXN0ZW5lcihcInRpbWVvdXRcIix0aGlzLl9ib3VuZFhock9uVGltZW91dCwhMSksZS5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIix0aGlzLl9ib3VuZFhock9uQWJvcnQsITEpLGUuYWRkRXZlbnRMaXN0ZW5lcihcInByb2dyZXNzXCIsdGhpcy5fYm91bmRPblByb2dyZXNzLCExKSxlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsdGhpcy5fYm91bmRYaHJPbkxvYWQsITEpLGUuc2VuZCgpfSx0LnByb3RvdHlwZS5fbG9hZFhkcj1mdW5jdGlvbigpe1wic3RyaW5nXCIhPXR5cGVvZiB0aGlzLnhoclR5cGUmJih0aGlzLnhoclR5cGU9dGhpcy5fZGV0ZXJtaW5lWGhyVHlwZSgpKTt2YXIgdD10aGlzLnhocj1uZXcgWERvbWFpblJlcXVlc3Q7dC50aW1lb3V0PXRoaXMudGltZW91dHx8NWUzLHQub25lcnJvcj10aGlzLl9ib3VuZFhock9uRXJyb3IsdC5vbnRpbWVvdXQ9dGhpcy5fYm91bmRYaHJPblRpbWVvdXQsdC5vbnByb2dyZXNzPXRoaXMuX2JvdW5kT25Qcm9ncmVzcyx0Lm9ubG9hZD10aGlzLl9ib3VuZFhock9uTG9hZCx0Lm9wZW4oXCJHRVRcIix0aGlzLnVybCwhMCksc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiB0LnNlbmQoKX0sMSl9LHQucHJvdG90eXBlLl9jcmVhdGVTb3VyY2U9ZnVuY3Rpb24odCxlLHIpe3J8fChyPXQrXCIvXCIrdGhpcy5fZ2V0RXh0ZW5zaW9uKGUpKTt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic291cmNlXCIpO3JldHVybiBuLnNyYz1lLG4udHlwZT1yLG59LHQucHJvdG90eXBlLl9vbkVycm9yPWZ1bmN0aW9uKHQpe3RoaXMuYWJvcnQoXCJGYWlsZWQgdG8gbG9hZCBlbGVtZW50IHVzaW5nOiBcIit0LnRhcmdldC5ub2RlTmFtZSl9LHQucHJvdG90eXBlLl9vblByb2dyZXNzPWZ1bmN0aW9uKHQpe3QmJnQubGVuZ3RoQ29tcHV0YWJsZSYmdGhpcy5vblByb2dyZXNzLmRpc3BhdGNoKHRoaXMsdC5sb2FkZWQvdC50b3RhbCl9LHQucHJvdG90eXBlLl9vblRpbWVvdXQ9ZnVuY3Rpb24oKXt0aGlzLmFib3J0KFwiTG9hZCB0aW1lZCBvdXQuXCIpfSx0LnByb3RvdHlwZS5feGhyT25FcnJvcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMueGhyO3RoaXMuYWJvcnQoYSh0KStcIiBSZXF1ZXN0IGZhaWxlZC4gU3RhdHVzOiBcIit0LnN0YXR1cysnLCB0ZXh0OiBcIicrdC5zdGF0dXNUZXh0KydcIicpfSx0LnByb3RvdHlwZS5feGhyT25UaW1lb3V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy54aHI7dGhpcy5hYm9ydChhKHQpK1wiIFJlcXVlc3QgdGltZWQgb3V0LlwiKX0sdC5wcm90b3R5cGUuX3hock9uQWJvcnQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnhocjt0aGlzLmFib3J0KGEodCkrXCIgUmVxdWVzdCB3YXMgYWJvcnRlZCBieSB0aGUgdXNlci5cIil9LHQucHJvdG90eXBlLl94aHJPbkxvYWQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnhocixyPVwiXCIsbj12b2lkIDA9PT1lLnN0YXR1cz8yMDA6ZS5zdGF0dXM7aWYoXCJcIiE9PWUucmVzcG9uc2VUeXBlJiZcInRleHRcIiE9PWUucmVzcG9uc2VUeXBlJiZ2b2lkIDAhPT1lLnJlc3BvbnNlVHlwZXx8KHI9ZS5yZXNwb25zZVRleHQpLDA9PT1uJiYoci5sZW5ndGg+MHx8ZS5yZXNwb25zZVR5cGU9PT10LlhIUl9SRVNQT05TRV9UWVBFLkJVRkZFUik/bj0yMDA6MTIyMz09PW4mJihuPTIwNCksMiE9KG4vMTAwfDApKXJldHVybiB2b2lkIHRoaXMuYWJvcnQoXCJbXCIrZS5zdGF0dXMrXCJdIFwiK2Uuc3RhdHVzVGV4dCtcIjogXCIrZS5yZXNwb25zZVVSTCk7aWYodGhpcy54aHJUeXBlPT09dC5YSFJfUkVTUE9OU0VfVFlQRS5URVhUKXRoaXMuZGF0YT1yLHRoaXMudHlwZT10LlRZUEUuVEVYVDtlbHNlIGlmKHRoaXMueGhyVHlwZT09PXQuWEhSX1JFU1BPTlNFX1RZUEUuSlNPTil0cnl7dGhpcy5kYXRhPUpTT04ucGFyc2UociksdGhpcy50eXBlPXQuVFlQRS5KU09OfWNhdGNoKHQpe3JldHVybiB2b2lkIHRoaXMuYWJvcnQoXCJFcnJvciB0cnlpbmcgdG8gcGFyc2UgbG9hZGVkIGpzb246IFwiK3QpfWVsc2UgaWYodGhpcy54aHJUeXBlPT09dC5YSFJfUkVTUE9OU0VfVFlQRS5ET0NVTUVOVCl0cnl7aWYod2luZG93LkRPTVBhcnNlcil7dmFyIGk9bmV3IERPTVBhcnNlcjt0aGlzLmRhdGE9aS5wYXJzZUZyb21TdHJpbmcocixcInRleHQveG1sXCIpfWVsc2V7dmFyIG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtvLmlubmVySFRNTD1yLHRoaXMuZGF0YT1vfXRoaXMudHlwZT10LlRZUEUuWE1MfWNhdGNoKHQpe3JldHVybiB2b2lkIHRoaXMuYWJvcnQoXCJFcnJvciB0cnlpbmcgdG8gcGFyc2UgbG9hZGVkIHhtbDogXCIrdCl9ZWxzZSB0aGlzLmRhdGE9ZS5yZXNwb25zZXx8cjt0aGlzLmNvbXBsZXRlKCl9LHQucHJvdG90eXBlLl9kZXRlcm1pbmVDcm9zc09yaWdpbj1mdW5jdGlvbih0LGUpe2lmKDA9PT10LmluZGV4T2YoXCJkYXRhOlwiKSlyZXR1cm5cIlwiO2lmKHdpbmRvdy5vcmlnaW4hPT13aW5kb3cubG9jYXRpb24ub3JpZ2luKXJldHVyblwiYW5vbnltb3VzXCI7ZT1lfHx3aW5kb3cubG9jYXRpb24scHx8KHA9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIikpLHAuaHJlZj10LHQ9KDAsbC5kZWZhdWx0KShwLmhyZWYse3N0cmljdE1vZGU6ITB9KTt2YXIgcj0hdC5wb3J0JiZcIlwiPT09ZS5wb3J0fHx0LnBvcnQ9PT1lLnBvcnQsbj10LnByb3RvY29sP3QucHJvdG9jb2wrXCI6XCI6XCJcIjtyZXR1cm4gdC5ob3N0PT09ZS5ob3N0bmFtZSYmciYmbj09PWUucHJvdG9jb2w/XCJcIjpcImFub255bW91c1wifSx0LnByb3RvdHlwZS5fZGV0ZXJtaW5lWGhyVHlwZT1mdW5jdGlvbigpe3JldHVybiB0Ll94aHJUeXBlTWFwW3RoaXMuZXh0ZW5zaW9uXXx8dC5YSFJfUkVTUE9OU0VfVFlQRS5URVhUfSx0LnByb3RvdHlwZS5fZGV0ZXJtaW5lTG9hZFR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gdC5fbG9hZFR5cGVNYXBbdGhpcy5leHRlbnNpb25dfHx0LkxPQURfVFlQRS5YSFJ9LHQucHJvdG90eXBlLl9nZXRFeHRlbnNpb249ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnVybCxlPVwiXCI7aWYodGhpcy5pc0RhdGFVcmwpe3ZhciByPXQuaW5kZXhPZihcIi9cIik7ZT10LnN1YnN0cmluZyhyKzEsdC5pbmRleE9mKFwiO1wiLHIpKX1lbHNle3ZhciBuPXQuaW5kZXhPZihcIj9cIiksaT10LmluZGV4T2YoXCIjXCIpLG89TWF0aC5taW4obj4tMT9uOnQubGVuZ3RoLGk+LTE/aTp0Lmxlbmd0aCk7dD10LnN1YnN0cmluZygwLG8pLGU9dC5zdWJzdHJpbmcodC5sYXN0SW5kZXhPZihcIi5cIikrMSl9cmV0dXJuIGUudG9Mb3dlckNhc2UoKX0sdC5wcm90b3R5cGUuX2dldE1pbWVGcm9tWGhyVHlwZT1mdW5jdGlvbihlKXtzd2l0Y2goZSl7Y2FzZSB0LlhIUl9SRVNQT05TRV9UWVBFLkJVRkZFUjpyZXR1cm5cImFwcGxpY2F0aW9uL29jdGV0LWJpbmFyeVwiO2Nhc2UgdC5YSFJfUkVTUE9OU0VfVFlQRS5CTE9COnJldHVyblwiYXBwbGljYXRpb24vYmxvYlwiO2Nhc2UgdC5YSFJfUkVTUE9OU0VfVFlQRS5ET0NVTUVOVDpyZXR1cm5cImFwcGxpY2F0aW9uL3htbFwiO2Nhc2UgdC5YSFJfUkVTUE9OU0VfVFlQRS5KU09OOnJldHVyblwiYXBwbGljYXRpb24vanNvblwiO2Nhc2UgdC5YSFJfUkVTUE9OU0VfVFlQRS5ERUZBVUxUOmNhc2UgdC5YSFJfUkVTUE9OU0VfVFlQRS5URVhUOmRlZmF1bHQ6cmV0dXJuXCJ0ZXh0L3BsYWluXCJ9fSx1KHQsW3trZXk6XCJpc0RhdGFVcmxcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGFzRmxhZyh0LlNUQVRVU19GTEFHUy5EQVRBX1VSTCl9fSx7a2V5OlwiaXNDb21wbGV0ZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oYXNGbGFnKHQuU1RBVFVTX0ZMQUdTLkNPTVBMRVRFKX19LHtrZXk6XCJpc0xvYWRpbmdcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGFzRmxhZyh0LlNUQVRVU19GTEFHUy5MT0FESU5HKX19XSksdH0oKTt2LlNUQVRVU19GTEFHUz17Tk9ORTowLERBVEFfVVJMOjEsQ09NUExFVEU6MixMT0FESU5HOjR9LHYuVFlQRT17VU5LTk9XTjowLEpTT046MSxYTUw6MixJTUFHRTozLEFVRElPOjQsVklERU86NSxURVhUOjZ9LHYuTE9BRF9UWVBFPXtYSFI6MSxJTUFHRToyLEFVRElPOjMsVklERU86NH0sdi5YSFJfUkVTUE9OU0VfVFlQRT17REVGQVVMVDpcInRleHRcIixCVUZGRVI6XCJhcnJheWJ1ZmZlclwiLEJMT0I6XCJibG9iXCIsRE9DVU1FTlQ6XCJkb2N1bWVudFwiLEpTT046XCJqc29uXCIsVEVYVDpcInRleHRcIn0sdi5fbG9hZFR5cGVNYXA9e2dpZjp2LkxPQURfVFlQRS5JTUFHRSxwbmc6di5MT0FEX1RZUEUuSU1BR0UsYm1wOnYuTE9BRF9UWVBFLklNQUdFLGpwZzp2LkxPQURfVFlQRS5JTUFHRSxqcGVnOnYuTE9BRF9UWVBFLklNQUdFLHRpZjp2LkxPQURfVFlQRS5JTUFHRSx0aWZmOnYuTE9BRF9UWVBFLklNQUdFLHdlYnA6di5MT0FEX1RZUEUuSU1BR0UsdGdhOnYuTE9BRF9UWVBFLklNQUdFLHN2Zzp2LkxPQURfVFlQRS5JTUFHRSxcInN2Zyt4bWxcIjp2LkxPQURfVFlQRS5JTUFHRSxtcDM6di5MT0FEX1RZUEUuQVVESU8sb2dnOnYuTE9BRF9UWVBFLkFVRElPLHdhdjp2LkxPQURfVFlQRS5BVURJTyxtcDQ6di5MT0FEX1RZUEUuVklERU8sd2VibTp2LkxPQURfVFlQRS5WSURFT30sdi5feGhyVHlwZU1hcD17eGh0bWw6di5YSFJfUkVTUE9OU0VfVFlQRS5ET0NVTUVOVCxodG1sOnYuWEhSX1JFU1BPTlNFX1RZUEUuRE9DVU1FTlQsaHRtOnYuWEhSX1JFU1BPTlNFX1RZUEUuRE9DVU1FTlQseG1sOnYuWEhSX1JFU1BPTlNFX1RZUEUuRE9DVU1FTlQsdG14OnYuWEhSX1JFU1BPTlNFX1RZUEUuRE9DVU1FTlQsc3ZnOnYuWEhSX1JFU1BPTlNFX1RZUEUuRE9DVU1FTlQsdHN4OnYuWEhSX1JFU1BPTlNFX1RZUEUuRE9DVU1FTlQsZ2lmOnYuWEhSX1JFU1BPTlNFX1RZUEUuQkxPQixwbmc6di5YSFJfUkVTUE9OU0VfVFlQRS5CTE9CLGJtcDp2LlhIUl9SRVNQT05TRV9UWVBFLkJMT0IsanBnOnYuWEhSX1JFU1BPTlNFX1RZUEUuQkxPQixqcGVnOnYuWEhSX1JFU1BPTlNFX1RZUEUuQkxPQix0aWY6di5YSFJfUkVTUE9OU0VfVFlQRS5CTE9CLHRpZmY6di5YSFJfUkVTUE9OU0VfVFlQRS5CTE9CLHdlYnA6di5YSFJfUkVTUE9OU0VfVFlQRS5CTE9CLHRnYTp2LlhIUl9SRVNQT05TRV9UWVBFLkJMT0IsanNvbjp2LlhIUl9SRVNQT05TRV9UWVBFLkpTT04sdGV4dDp2LlhIUl9SRVNQT05TRV9UWVBFLlRFWFQsdHh0OnYuWEhSX1JFU1BPTlNFX1RZUEUuVEVYVCx0dGY6di5YSFJfUkVTUE9OU0VfVFlQRS5CVUZGRVIsb3RmOnYuWEhSX1JFU1BPTlNFX1RZUEUuQlVGRkVSfSx2LkVNUFRZX0dJRj1cImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFBQVAvLy93QUFBQ0g1QkFFQUFBQUFMQUFBQUFBQkFBRUFBQUlDUkFFQU93PT1cIix2b2lkIDAhPT1lJiYoZS5leHBvcnRzLmRlZmF1bHQ9dil9LHtcIm1pbmktc2lnbmFsc1wiOjUsXCJwYXJzZS11cmlcIjo3fV0sMzQ6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKCl7fWZ1bmN0aW9uIGkodCxlLHIsbil7dmFyIGk9MCxvPXQubGVuZ3RoOyFmdW5jdGlvbiBzKGEpe2lmKGF8fGk9PT1vKXJldHVybiB2b2lkKHImJnIoYSkpO24/c2V0VGltZW91dChmdW5jdGlvbigpe2UodFtpKytdLHMpfSwxKTplKHRbaSsrXSxzKX0oKX1mdW5jdGlvbiBvKHQpe3JldHVybiBmdW5jdGlvbigpe2lmKG51bGw9PT10KXRocm93IG5ldyBFcnJvcihcIkNhbGxiYWNrIHdhcyBhbHJlYWR5IGNhbGxlZC5cIik7dmFyIGU9dDt0PW51bGwsZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHModCxlKXtmdW5jdGlvbiByKHQsZSxyKXtpZihudWxsIT1yJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiByKXRocm93IG5ldyBFcnJvcihcInRhc2sgY2FsbGJhY2sgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO2lmKGEuc3RhcnRlZD0hMCxudWxsPT10JiZhLmlkbGUoKSlyZXR1cm4gdm9pZCBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIGEuZHJhaW4oKX0sMSk7dmFyIGk9e2RhdGE6dCxjYWxsYmFjazpcImZ1bmN0aW9uXCI9PXR5cGVvZiByP3I6bn07ZT9hLl90YXNrcy51bnNoaWZ0KGkpOmEuX3Rhc2tzLnB1c2goaSksc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBhLnByb2Nlc3MoKX0sMSl9ZnVuY3Rpb24gaSh0KXtyZXR1cm4gZnVuY3Rpb24oKXtzLT0xLHQuY2FsbGJhY2suYXBwbHkodCxhcmd1bWVudHMpLG51bGwhPWFyZ3VtZW50c1swXSYmYS5lcnJvcihhcmd1bWVudHNbMF0sdC5kYXRhKSxzPD1hLmNvbmN1cnJlbmN5LWEuYnVmZmVyJiZhLnVuc2F0dXJhdGVkKCksYS5pZGxlKCkmJmEuZHJhaW4oKSxhLnByb2Nlc3MoKX19aWYobnVsbD09ZSllPTE7ZWxzZSBpZigwPT09ZSl0aHJvdyBuZXcgRXJyb3IoXCJDb25jdXJyZW5jeSBtdXN0IG5vdCBiZSB6ZXJvXCIpO3ZhciBzPTAsYT17X3Rhc2tzOltdLGNvbmN1cnJlbmN5OmUsc2F0dXJhdGVkOm4sdW5zYXR1cmF0ZWQ6bixidWZmZXI6ZS80LGVtcHR5Om4sZHJhaW46bixlcnJvcjpuLHN0YXJ0ZWQ6ITEscGF1c2VkOiExLHB1c2g6ZnVuY3Rpb24odCxlKXtyKHQsITEsZSl9LGtpbGw6ZnVuY3Rpb24oKXtzPTAsYS5kcmFpbj1uLGEuc3RhcnRlZD0hMSxhLl90YXNrcz1bXX0sdW5zaGlmdDpmdW5jdGlvbih0LGUpe3IodCwhMCxlKX0scHJvY2VzczpmdW5jdGlvbigpe2Zvcig7IWEucGF1c2VkJiZzPGEuY29uY3VycmVuY3kmJmEuX3Rhc2tzLmxlbmd0aDspe3ZhciBlPWEuX3Rhc2tzLnNoaWZ0KCk7MD09PWEuX3Rhc2tzLmxlbmd0aCYmYS5lbXB0eSgpLHMrPTEscz09PWEuY29uY3VycmVuY3kmJmEuc2F0dXJhdGVkKCksdChlLmRhdGEsbyhpKGUpKSl9fSxsZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gYS5fdGFza3MubGVuZ3RofSxydW5uaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHN9LGlkbGU6ZnVuY3Rpb24oKXtyZXR1cm4gYS5fdGFza3MubGVuZ3RoK3M9PT0wfSxwYXVzZTpmdW5jdGlvbigpeyEwIT09YS5wYXVzZWQmJihhLnBhdXNlZD0hMCl9LHJlc3VtZTpmdW5jdGlvbigpe2lmKCExIT09YS5wYXVzZWQpe2EucGF1c2VkPSExO2Zvcih2YXIgdD0xO3Q8PWEuY29uY3VycmVuY3k7dCsrKWEucHJvY2VzcygpfX19O3JldHVybiBhfXIuX19lc01vZHVsZT0hMCxyLmVhY2hTZXJpZXM9aSxyLnF1ZXVlPXN9LHt9XSwzNTpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCl7Zm9yKHZhciBlPVwiXCIscj0wO3I8dC5sZW5ndGg7KXtmb3IodmFyIG49WzAsMCwwXSxvPVswLDAsMCwwXSxzPTA7czxuLmxlbmd0aDsrK3Mpcjx0Lmxlbmd0aD9uW3NdPTI1NSZ0LmNoYXJDb2RlQXQocisrKTpuW3NdPTA7b1swXT1uWzBdPj4yLG9bMV09KDMmblswXSk8PDR8blsxXT4+NCxvWzJdPSgxNSZuWzFdKTw8MnxuWzJdPj42LG9bM109NjMmblsyXTtzd2l0Y2goci0odC5sZW5ndGgtMSkpe2Nhc2UgMjpvWzNdPTY0LG9bMl09NjQ7YnJlYWs7Y2FzZSAxOm9bM109NjR9Zm9yKHZhciBhPTA7YTxvLmxlbmd0aDsrK2EpZSs9aS5jaGFyQXQob1thXSl9cmV0dXJuIGV9ci5fX2VzTW9kdWxlPSEwLHIuZW5jb2RlQmluYXJ5PW47dmFyIGk9XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPVwiO3ZvaWQgMCE9PWUmJihlLmV4cG9ydHMuZGVmYXVsdD1uKX0se31dLDM2OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dChcIi4vTG9hZGVyXCIpLkxvYWRlcixpPXQoXCIuL1Jlc291cmNlXCIpLlJlc291cmNlLG89dChcIi4vYXN5bmNcIikscz10KFwiLi9iNjRcIik7bi5SZXNvdXJjZT1pLG4uYXN5bmM9byxuLmVuY29kZUJpbmFyeT1zLG4uYmFzZTY0PXMsZS5leHBvcnRzPW4sZS5leHBvcnRzLkxvYWRlcj1uLGUuZXhwb3J0cy5kZWZhdWx0PW59LHtcIi4vTG9hZGVyXCI6MzIsXCIuL1Jlc291cmNlXCI6MzMsXCIuL2FzeW5jXCI6MzQsXCIuL2I2NFwiOjM1fV0sMzc6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKCl7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7aWYoIXQuZGF0YSlyZXR1cm4gdm9pZCBlKCk7aWYodC54aHImJnQueGhyVHlwZT09PWkuUmVzb3VyY2UuWEhSX1JFU1BPTlNFX1RZUEUuQkxPQilpZih3aW5kb3cuQmxvYiYmXCJzdHJpbmdcIiE9dHlwZW9mIHQuZGF0YSl7aWYoMD09PXQuZGF0YS50eXBlLmluZGV4T2YoXCJpbWFnZVwiKSl7dmFyIHI9cy5jcmVhdGVPYmplY3RVUkwodC5kYXRhKTtyZXR1cm4gdC5ibG9iPXQuZGF0YSx0LmRhdGE9bmV3IEltYWdlLHQuZGF0YS5zcmM9cix0LnR5cGU9aS5SZXNvdXJjZS5UWVBFLklNQUdFLHZvaWQodC5kYXRhLm9ubG9hZD1mdW5jdGlvbigpe3MucmV2b2tlT2JqZWN0VVJMKHIpLHQuZGF0YS5vbmxvYWQ9bnVsbCxlKCl9KX19ZWxzZXt2YXIgbj10Lnhoci5nZXRSZXNwb25zZUhlYWRlcihcImNvbnRlbnQtdHlwZVwiKTtpZihuJiYwPT09bi5pbmRleE9mKFwiaW1hZ2VcIikpcmV0dXJuIHQuZGF0YT1uZXcgSW1hZ2UsdC5kYXRhLnNyYz1cImRhdGE6XCIrbitcIjtiYXNlNjQsXCIrKDAsby5lbmNvZGVCaW5hcnkpKHQueGhyLnJlc3BvbnNlVGV4dCksdC50eXBlPWkuUmVzb3VyY2UuVFlQRS5JTUFHRSx2b2lkKHQuZGF0YS5vbmxvYWQ9ZnVuY3Rpb24oKXt0LmRhdGEub25sb2FkPW51bGwsZSgpfSl9ZSgpfX1yLl9fZXNNb2R1bGU9ITAsci5ibG9iTWlkZGxld2FyZUZhY3Rvcnk9bjt2YXIgaT10KFwiLi4vLi4vUmVzb3VyY2VcIiksbz10KFwiLi4vLi4vYjY0XCIpLHM9d2luZG93LlVSTHx8d2luZG93LndlYmtpdFVSTH0se1wiLi4vLi4vUmVzb3VyY2VcIjozMyxcIi4uLy4uL2I2NFwiOjM1fV0sMzg6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKCl7dGhpcy5wcm90b2NvbD1udWxsLHRoaXMuc2xhc2hlcz1udWxsLHRoaXMuYXV0aD1udWxsLHRoaXMuaG9zdD1udWxsLHRoaXMucG9ydD1udWxsLHRoaXMuaG9zdG5hbWU9bnVsbCx0aGlzLmhhc2g9bnVsbCx0aGlzLnNlYXJjaD1udWxsLHRoaXMucXVlcnk9bnVsbCx0aGlzLnBhdGhuYW1lPW51bGwsdGhpcy5wYXRoPW51bGwsdGhpcy5ocmVmPW51bGx9ZnVuY3Rpb24gaSh0LGUscil7aWYodCYmaC5pc09iamVjdCh0KSYmdCBpbnN0YW5jZW9mIG4pcmV0dXJuIHQ7dmFyIGk9bmV3IG47cmV0dXJuIGkucGFyc2UodCxlLHIpLGl9ZnVuY3Rpb24gbyh0KXtyZXR1cm4gaC5pc1N0cmluZyh0KSYmKHQ9aSh0KSksdCBpbnN0YW5jZW9mIG4/dC5mb3JtYXQoKTpuLnByb3RvdHlwZS5mb3JtYXQuY2FsbCh0KX1mdW5jdGlvbiBzKHQsZSl7cmV0dXJuIGkodCwhMSwhMCkucmVzb2x2ZShlKX1mdW5jdGlvbiBhKHQsZSl7cmV0dXJuIHQ/aSh0LCExLCEwKS5yZXNvbHZlT2JqZWN0KGUpOmV9dmFyIHU9dChcInB1bnljb2RlXCIpLGg9dChcIi4vdXRpbFwiKTtyLnBhcnNlPWksci5yZXNvbHZlPXMsci5yZXNvbHZlT2JqZWN0PWEsci5mb3JtYXQ9byxyLlVybD1uO3ZhciBsPS9eKFthLXowLTkuKy1dKzopL2ksYz0vOlswLTldKiQvLGQ9L14oXFwvXFwvPyg/IVxcLylbXlxcP1xcc10qKShcXD9bXlxcc10qKT8kLyxmPVtcIjxcIixcIj5cIiwnXCInLFwiYFwiLFwiIFwiLFwiXFxyXCIsXCJcXG5cIixcIlxcdFwiXSxwPVtcIntcIixcIn1cIixcInxcIixcIlxcXFxcIixcIl5cIixcImBcIl0uY29uY2F0KGYpLHY9W1wiJ1wiXS5jb25jYXQocCksZz1bXCIlXCIsXCIvXCIsXCI/XCIsXCI7XCIsXCIjXCJdLmNvbmNhdCh2KSx5PVtcIi9cIixcIj9cIixcIiNcIl0sbT0vXlsrYS16MC05QS1aXy1dezAsNjN9JC8sXz0vXihbK2EtejAtOUEtWl8tXXswLDYzfSkoLiopJC8sYj17amF2YXNjcmlwdDohMCxcImphdmFzY3JpcHQ6XCI6ITB9LHg9e2phdmFzY3JpcHQ6ITAsXCJqYXZhc2NyaXB0OlwiOiEwfSxUPXtodHRwOiEwLGh0dHBzOiEwLGZ0cDohMCxnb3BoZXI6ITAsZmlsZTohMCxcImh0dHA6XCI6ITAsXCJodHRwczpcIjohMCxcImZ0cDpcIjohMCxcImdvcGhlcjpcIjohMCxcImZpbGU6XCI6ITB9LHc9dChcInF1ZXJ5c3RyaW5nXCIpO24ucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQsZSxyKXtpZighaC5pc1N0cmluZyh0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiUGFyYW1ldGVyICd1cmwnIG11c3QgYmUgYSBzdHJpbmcsIG5vdCBcIit0eXBlb2YgdCk7dmFyIG49dC5pbmRleE9mKFwiP1wiKSxpPS0xIT09biYmbjx0LmluZGV4T2YoXCIjXCIpP1wiP1wiOlwiI1wiLG89dC5zcGxpdChpKSxzPS9cXFxcL2c7b1swXT1vWzBdLnJlcGxhY2UocyxcIi9cIiksdD1vLmpvaW4oaSk7dmFyIGE9dDtpZihhPWEudHJpbSgpLCFyJiYxPT09dC5zcGxpdChcIiNcIikubGVuZ3RoKXt2YXIgYz1kLmV4ZWMoYSk7aWYoYylyZXR1cm4gdGhpcy5wYXRoPWEsdGhpcy5ocmVmPWEsdGhpcy5wYXRobmFtZT1jWzFdLGNbMl0/KHRoaXMuc2VhcmNoPWNbMl0sdGhpcy5xdWVyeT1lP3cucGFyc2UodGhpcy5zZWFyY2guc3Vic3RyKDEpKTp0aGlzLnNlYXJjaC5zdWJzdHIoMSkpOmUmJih0aGlzLnNlYXJjaD1cIlwiLHRoaXMucXVlcnk9e30pLHRoaXN9dmFyIGY9bC5leGVjKGEpO2lmKGYpe2Y9ZlswXTt2YXIgcD1mLnRvTG93ZXJDYXNlKCk7dGhpcy5wcm90b2NvbD1wLGE9YS5zdWJzdHIoZi5sZW5ndGgpfWlmKHJ8fGZ8fGEubWF0Y2goL15cXC9cXC9bXkBcXC9dK0BbXkBcXC9dKy8pKXt2YXIgRT1cIi8vXCI9PT1hLnN1YnN0cigwLDIpOyFFfHxmJiZ4W2ZdfHwoYT1hLnN1YnN0cigyKSx0aGlzLnNsYXNoZXM9ITApfWlmKCF4W2ZdJiYoRXx8ZiYmIVRbZl0pKXtmb3IodmFyIFM9LTEsTz0wO088eS5sZW5ndGg7TysrKXt2YXIgTT1hLmluZGV4T2YoeVtPXSk7LTEhPT1NJiYoLTE9PT1TfHxNPFMpJiYoUz1NKX12YXIgUCxDO0M9LTE9PT1TP2EubGFzdEluZGV4T2YoXCJAXCIpOmEubGFzdEluZGV4T2YoXCJAXCIsUyksLTEhPT1DJiYoUD1hLnNsaWNlKDAsQyksYT1hLnNsaWNlKEMrMSksdGhpcy5hdXRoPWRlY29kZVVSSUNvbXBvbmVudChQKSksUz0tMTtmb3IodmFyIE89MDtPPGcubGVuZ3RoO08rKyl7dmFyIE09YS5pbmRleE9mKGdbT10pOy0xIT09TSYmKC0xPT09U3x8TTxTKSYmKFM9TSl9LTE9PT1TJiYoUz1hLmxlbmd0aCksdGhpcy5ob3N0PWEuc2xpY2UoMCxTKSxhPWEuc2xpY2UoUyksdGhpcy5wYXJzZUhvc3QoKSx0aGlzLmhvc3RuYW1lPXRoaXMuaG9zdG5hbWV8fFwiXCI7dmFyIFI9XCJbXCI9PT10aGlzLmhvc3RuYW1lWzBdJiZcIl1cIj09PXRoaXMuaG9zdG5hbWVbdGhpcy5ob3N0bmFtZS5sZW5ndGgtMV07aWYoIVIpZm9yKHZhciBBPXRoaXMuaG9zdG5hbWUuc3BsaXQoL1xcLi8pLE89MCxJPUEubGVuZ3RoO088STtPKyspe3ZhciBEPUFbT107aWYoRCYmIUQubWF0Y2gobSkpe2Zvcih2YXIgTD1cIlwiLE49MCxCPUQubGVuZ3RoO048QjtOKyspRC5jaGFyQ29kZUF0KE4pPjEyNz9MKz1cInhcIjpMKz1EW05dO2lmKCFMLm1hdGNoKG0pKXt2YXIgaz1BLnNsaWNlKDAsTyksRj1BLnNsaWNlKE8rMSksaj1ELm1hdGNoKF8pO2omJihrLnB1c2goalsxXSksRi51bnNoaWZ0KGpbMl0pKSxGLmxlbmd0aCYmKGE9XCIvXCIrRi5qb2luKFwiLlwiKSthKSx0aGlzLmhvc3RuYW1lPWsuam9pbihcIi5cIik7YnJlYWt9fX1cbnRoaXMuaG9zdG5hbWUubGVuZ3RoPjI1NT90aGlzLmhvc3RuYW1lPVwiXCI6dGhpcy5ob3N0bmFtZT10aGlzLmhvc3RuYW1lLnRvTG93ZXJDYXNlKCksUnx8KHRoaXMuaG9zdG5hbWU9dS50b0FTQ0lJKHRoaXMuaG9zdG5hbWUpKTt2YXIgVT10aGlzLnBvcnQ/XCI6XCIrdGhpcy5wb3J0OlwiXCIsWD10aGlzLmhvc3RuYW1lfHxcIlwiO3RoaXMuaG9zdD1YK1UsdGhpcy5ocmVmKz10aGlzLmhvc3QsUiYmKHRoaXMuaG9zdG5hbWU9dGhpcy5ob3N0bmFtZS5zdWJzdHIoMSx0aGlzLmhvc3RuYW1lLmxlbmd0aC0yKSxcIi9cIiE9PWFbMF0mJihhPVwiL1wiK2EpKX1pZighYltwXSlmb3IodmFyIE89MCxJPXYubGVuZ3RoO088STtPKyspe3ZhciBHPXZbT107aWYoLTEhPT1hLmluZGV4T2YoRykpe3ZhciBXPWVuY29kZVVSSUNvbXBvbmVudChHKTtXPT09RyYmKFc9ZXNjYXBlKEcpKSxhPWEuc3BsaXQoRykuam9pbihXKX19dmFyIEg9YS5pbmRleE9mKFwiI1wiKTstMSE9PUgmJih0aGlzLmhhc2g9YS5zdWJzdHIoSCksYT1hLnNsaWNlKDAsSCkpO3ZhciBZPWEuaW5kZXhPZihcIj9cIik7aWYoLTEhPT1ZPyh0aGlzLnNlYXJjaD1hLnN1YnN0cihZKSx0aGlzLnF1ZXJ5PWEuc3Vic3RyKFkrMSksZSYmKHRoaXMucXVlcnk9dy5wYXJzZSh0aGlzLnF1ZXJ5KSksYT1hLnNsaWNlKDAsWSkpOmUmJih0aGlzLnNlYXJjaD1cIlwiLHRoaXMucXVlcnk9e30pLGEmJih0aGlzLnBhdGhuYW1lPWEpLFRbcF0mJnRoaXMuaG9zdG5hbWUmJiF0aGlzLnBhdGhuYW1lJiYodGhpcy5wYXRobmFtZT1cIi9cIiksdGhpcy5wYXRobmFtZXx8dGhpcy5zZWFyY2gpe3ZhciBVPXRoaXMucGF0aG5hbWV8fFwiXCIsVj10aGlzLnNlYXJjaHx8XCJcIjt0aGlzLnBhdGg9VStWfXJldHVybiB0aGlzLmhyZWY9dGhpcy5mb3JtYXQoKSx0aGlzfSxuLnByb3RvdHlwZS5mb3JtYXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmF1dGh8fFwiXCI7dCYmKHQ9ZW5jb2RlVVJJQ29tcG9uZW50KHQpLHQ9dC5yZXBsYWNlKC8lM0EvaSxcIjpcIiksdCs9XCJAXCIpO3ZhciBlPXRoaXMucHJvdG9jb2x8fFwiXCIscj10aGlzLnBhdGhuYW1lfHxcIlwiLG49dGhpcy5oYXNofHxcIlwiLGk9ITEsbz1cIlwiO3RoaXMuaG9zdD9pPXQrdGhpcy5ob3N0OnRoaXMuaG9zdG5hbWUmJihpPXQrKC0xPT09dGhpcy5ob3N0bmFtZS5pbmRleE9mKFwiOlwiKT90aGlzLmhvc3RuYW1lOlwiW1wiK3RoaXMuaG9zdG5hbWUrXCJdXCIpLHRoaXMucG9ydCYmKGkrPVwiOlwiK3RoaXMucG9ydCkpLHRoaXMucXVlcnkmJmguaXNPYmplY3QodGhpcy5xdWVyeSkmJk9iamVjdC5rZXlzKHRoaXMucXVlcnkpLmxlbmd0aCYmKG89dy5zdHJpbmdpZnkodGhpcy5xdWVyeSkpO3ZhciBzPXRoaXMuc2VhcmNofHxvJiZcIj9cIitvfHxcIlwiO3JldHVybiBlJiZcIjpcIiE9PWUuc3Vic3RyKC0xKSYmKGUrPVwiOlwiKSx0aGlzLnNsYXNoZXN8fCghZXx8VFtlXSkmJiExIT09aT8oaT1cIi8vXCIrKGl8fFwiXCIpLHImJlwiL1wiIT09ci5jaGFyQXQoMCkmJihyPVwiL1wiK3IpKTppfHwoaT1cIlwiKSxuJiZcIiNcIiE9PW4uY2hhckF0KDApJiYobj1cIiNcIituKSxzJiZcIj9cIiE9PXMuY2hhckF0KDApJiYocz1cIj9cIitzKSxyPXIucmVwbGFjZSgvWz8jXS9nLGZ1bmN0aW9uKHQpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQodCl9KSxzPXMucmVwbGFjZShcIiNcIixcIiUyM1wiKSxlK2krcitzK259LG4ucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucmVzb2x2ZU9iamVjdChpKHQsITEsITApKS5mb3JtYXQoKX0sbi5wcm90b3R5cGUucmVzb2x2ZU9iamVjdD1mdW5jdGlvbih0KXtpZihoLmlzU3RyaW5nKHQpKXt2YXIgZT1uZXcgbjtlLnBhcnNlKHQsITEsITApLHQ9ZX1mb3IodmFyIHI9bmV3IG4saT1PYmplY3Qua2V5cyh0aGlzKSxvPTA7bzxpLmxlbmd0aDtvKyspe3ZhciBzPWlbb107cltzXT10aGlzW3NdfWlmKHIuaGFzaD10Lmhhc2gsXCJcIj09PXQuaHJlZilyZXR1cm4gci5ocmVmPXIuZm9ybWF0KCkscjtpZih0LnNsYXNoZXMmJiF0LnByb3RvY29sKXtmb3IodmFyIGE9T2JqZWN0LmtleXModCksdT0wO3U8YS5sZW5ndGg7dSsrKXt2YXIgbD1hW3VdO1wicHJvdG9jb2xcIiE9PWwmJihyW2xdPXRbbF0pfXJldHVybiBUW3IucHJvdG9jb2xdJiZyLmhvc3RuYW1lJiYhci5wYXRobmFtZSYmKHIucGF0aD1yLnBhdGhuYW1lPVwiL1wiKSxyLmhyZWY9ci5mb3JtYXQoKSxyfWlmKHQucHJvdG9jb2wmJnQucHJvdG9jb2whPT1yLnByb3RvY29sKXtpZighVFt0LnByb3RvY29sXSl7Zm9yKHZhciBjPU9iamVjdC5rZXlzKHQpLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGY9Y1tkXTtyW2ZdPXRbZl19cmV0dXJuIHIuaHJlZj1yLmZvcm1hdCgpLHJ9aWYoci5wcm90b2NvbD10LnByb3RvY29sLHQuaG9zdHx8eFt0LnByb3RvY29sXSlyLnBhdGhuYW1lPXQucGF0aG5hbWU7ZWxzZXtmb3IodmFyIHA9KHQucGF0aG5hbWV8fFwiXCIpLnNwbGl0KFwiL1wiKTtwLmxlbmd0aCYmISh0Lmhvc3Q9cC5zaGlmdCgpKTspO3QuaG9zdHx8KHQuaG9zdD1cIlwiKSx0Lmhvc3RuYW1lfHwodC5ob3N0bmFtZT1cIlwiKSxcIlwiIT09cFswXSYmcC51bnNoaWZ0KFwiXCIpLHAubGVuZ3RoPDImJnAudW5zaGlmdChcIlwiKSxyLnBhdGhuYW1lPXAuam9pbihcIi9cIil9aWYoci5zZWFyY2g9dC5zZWFyY2gsci5xdWVyeT10LnF1ZXJ5LHIuaG9zdD10Lmhvc3R8fFwiXCIsci5hdXRoPXQuYXV0aCxyLmhvc3RuYW1lPXQuaG9zdG5hbWV8fHQuaG9zdCxyLnBvcnQ9dC5wb3J0LHIucGF0aG5hbWV8fHIuc2VhcmNoKXt2YXIgdj1yLnBhdGhuYW1lfHxcIlwiLGc9ci5zZWFyY2h8fFwiXCI7ci5wYXRoPXYrZ31yZXR1cm4gci5zbGFzaGVzPXIuc2xhc2hlc3x8dC5zbGFzaGVzLHIuaHJlZj1yLmZvcm1hdCgpLHJ9dmFyIHk9ci5wYXRobmFtZSYmXCIvXCI9PT1yLnBhdGhuYW1lLmNoYXJBdCgwKSxtPXQuaG9zdHx8dC5wYXRobmFtZSYmXCIvXCI9PT10LnBhdGhuYW1lLmNoYXJBdCgwKSxfPW18fHl8fHIuaG9zdCYmdC5wYXRobmFtZSxiPV8sdz1yLnBhdGhuYW1lJiZyLnBhdGhuYW1lLnNwbGl0KFwiL1wiKXx8W10scD10LnBhdGhuYW1lJiZ0LnBhdGhuYW1lLnNwbGl0KFwiL1wiKXx8W10sRT1yLnByb3RvY29sJiYhVFtyLnByb3RvY29sXTtpZihFJiYoci5ob3N0bmFtZT1cIlwiLHIucG9ydD1udWxsLHIuaG9zdCYmKFwiXCI9PT13WzBdP3dbMF09ci5ob3N0OncudW5zaGlmdChyLmhvc3QpKSxyLmhvc3Q9XCJcIix0LnByb3RvY29sJiYodC5ob3N0bmFtZT1udWxsLHQucG9ydD1udWxsLHQuaG9zdCYmKFwiXCI9PT1wWzBdP3BbMF09dC5ob3N0OnAudW5zaGlmdCh0Lmhvc3QpKSx0Lmhvc3Q9bnVsbCksXz1fJiYoXCJcIj09PXBbMF18fFwiXCI9PT13WzBdKSksbSlyLmhvc3Q9dC5ob3N0fHxcIlwiPT09dC5ob3N0P3QuaG9zdDpyLmhvc3Qsci5ob3N0bmFtZT10Lmhvc3RuYW1lfHxcIlwiPT09dC5ob3N0bmFtZT90Lmhvc3RuYW1lOnIuaG9zdG5hbWUsci5zZWFyY2g9dC5zZWFyY2gsci5xdWVyeT10LnF1ZXJ5LHc9cDtlbHNlIGlmKHAubGVuZ3RoKXd8fCh3PVtdKSx3LnBvcCgpLHc9dy5jb25jYXQocCksci5zZWFyY2g9dC5zZWFyY2gsci5xdWVyeT10LnF1ZXJ5O2Vsc2UgaWYoIWguaXNOdWxsT3JVbmRlZmluZWQodC5zZWFyY2gpKXtpZihFKXtyLmhvc3RuYW1lPXIuaG9zdD13LnNoaWZ0KCk7dmFyIFM9ISEoci5ob3N0JiZyLmhvc3QuaW5kZXhPZihcIkBcIik+MCkmJnIuaG9zdC5zcGxpdChcIkBcIik7UyYmKHIuYXV0aD1TLnNoaWZ0KCksci5ob3N0PXIuaG9zdG5hbWU9Uy5zaGlmdCgpKX1yZXR1cm4gci5zZWFyY2g9dC5zZWFyY2gsci5xdWVyeT10LnF1ZXJ5LGguaXNOdWxsKHIucGF0aG5hbWUpJiZoLmlzTnVsbChyLnNlYXJjaCl8fChyLnBhdGg9KHIucGF0aG5hbWU/ci5wYXRobmFtZTpcIlwiKSsoci5zZWFyY2g/ci5zZWFyY2g6XCJcIikpLHIuaHJlZj1yLmZvcm1hdCgpLHJ9aWYoIXcubGVuZ3RoKXJldHVybiByLnBhdGhuYW1lPW51bGwsci5zZWFyY2g/ci5wYXRoPVwiL1wiK3Iuc2VhcmNoOnIucGF0aD1udWxsLHIuaHJlZj1yLmZvcm1hdCgpLHI7Zm9yKHZhciBPPXcuc2xpY2UoLTEpWzBdLE09KHIuaG9zdHx8dC5ob3N0fHx3Lmxlbmd0aD4xKSYmKFwiLlwiPT09T3x8XCIuLlwiPT09Tyl8fFwiXCI9PT1PLFA9MCxDPXcubGVuZ3RoO0M+PTA7Qy0tKU89d1tDXSxcIi5cIj09PU8/dy5zcGxpY2UoQywxKTpcIi4uXCI9PT1PPyh3LnNwbGljZShDLDEpLFArKyk6UCYmKHcuc3BsaWNlKEMsMSksUC0tKTtpZighXyYmIWIpZm9yKDtQLS07UCl3LnVuc2hpZnQoXCIuLlwiKTshX3x8XCJcIj09PXdbMF18fHdbMF0mJlwiL1wiPT09d1swXS5jaGFyQXQoMCl8fHcudW5zaGlmdChcIlwiKSxNJiZcIi9cIiE9PXcuam9pbihcIi9cIikuc3Vic3RyKC0xKSYmdy5wdXNoKFwiXCIpO3ZhciBSPVwiXCI9PT13WzBdfHx3WzBdJiZcIi9cIj09PXdbMF0uY2hhckF0KDApO2lmKEUpe3IuaG9zdG5hbWU9ci5ob3N0PVI/XCJcIjp3Lmxlbmd0aD93LnNoaWZ0KCk6XCJcIjt2YXIgUz0hIShyLmhvc3QmJnIuaG9zdC5pbmRleE9mKFwiQFwiKT4wKSYmci5ob3N0LnNwbGl0KFwiQFwiKTtTJiYoci5hdXRoPVMuc2hpZnQoKSxyLmhvc3Q9ci5ob3N0bmFtZT1TLnNoaWZ0KCkpfXJldHVybiBfPV98fHIuaG9zdCYmdy5sZW5ndGgsXyYmIVImJncudW5zaGlmdChcIlwiKSx3Lmxlbmd0aD9yLnBhdGhuYW1lPXcuam9pbihcIi9cIik6KHIucGF0aG5hbWU9bnVsbCxyLnBhdGg9bnVsbCksaC5pc051bGwoci5wYXRobmFtZSkmJmguaXNOdWxsKHIuc2VhcmNoKXx8KHIucGF0aD0oci5wYXRobmFtZT9yLnBhdGhuYW1lOlwiXCIpKyhyLnNlYXJjaD9yLnNlYXJjaDpcIlwiKSksci5hdXRoPXQuYXV0aHx8ci5hdXRoLHIuc2xhc2hlcz1yLnNsYXNoZXN8fHQuc2xhc2hlcyxyLmhyZWY9ci5mb3JtYXQoKSxyfSxuLnByb3RvdHlwZS5wYXJzZUhvc3Q9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmhvc3QsZT1jLmV4ZWModCk7ZSYmKGU9ZVswXSxcIjpcIiE9PWUmJih0aGlzLnBvcnQ9ZS5zdWJzdHIoMSkpLHQ9dC5zdWJzdHIoMCx0Lmxlbmd0aC1lLmxlbmd0aCkpLHQmJih0aGlzLmhvc3RuYW1lPXQpfX0se1wiLi91dGlsXCI6MzkscHVueWNvZGU6MjcscXVlcnlzdHJpbmc6MzB9XSwzOTpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz17aXNTdHJpbmc6ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHR9LGlzT2JqZWN0OmZ1bmN0aW9uKHQpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiB0JiZudWxsIT09dH0saXNOdWxsOmZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT09dH0saXNOdWxsT3JVbmRlZmluZWQ6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXR9fX0se31dLDQwOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ci5fX2VzTW9kdWxlPSEwO3ZhciBvPXQoXCIuLi9jb3JlXCIpLHM9ZnVuY3Rpb24odCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfShvKSxhPXQoXCJpc21vYmlsZWpzXCIpLHU9bihhKSxoPXQoXCIuL2FjY2Vzc2libGVUYXJnZXRcIiksbD1uKGgpO3MudXRpbHMubWl4aW5zLmRlbGF5TWl4aW4ocy5EaXNwbGF5T2JqZWN0LnByb3RvdHlwZSxsLmRlZmF1bHQpO3ZhciBjPTEwMCxkPTAsZj0wLHA9Mix2PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpKHRoaXMsdCksIXUuZGVmYXVsdC50YWJsZXQmJiF1LmRlZmF1bHQucGhvbmV8fG5hdmlnYXRvci5pc0NvY29vbkpTfHx0aGlzLmNyZWF0ZVRvdWNoSG9vaygpO3ZhciByPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ci5zdHlsZS53aWR0aD1jK1wicHhcIixyLnN0eWxlLmhlaWdodD1jK1wicHhcIixyLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIixyLnN0eWxlLnRvcD1kK1wicHhcIixyLnN0eWxlLmxlZnQ9ZitcInB4XCIsci5zdHlsZS56SW5kZXg9cCx0aGlzLmRpdj1yLHRoaXMucG9vbD1bXSx0aGlzLnJlbmRlcklkPTAsdGhpcy5kZWJ1Zz0hMSx0aGlzLnJlbmRlcmVyPWUsdGhpcy5jaGlsZHJlbj1bXSx0aGlzLl9vbktleURvd249dGhpcy5fb25LZXlEb3duLmJpbmQodGhpcyksdGhpcy5fb25Nb3VzZU1vdmU9dGhpcy5fb25Nb3VzZU1vdmUuYmluZCh0aGlzKSx0aGlzLmlzQWN0aXZlPSExLHRoaXMuaXNNb2JpbGVBY2Nlc3NhYmlsbGl0eT0hMSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIix0aGlzLl9vbktleURvd24sITEpfXJldHVybiB0LnByb3RvdHlwZS5jcmVhdGVUb3VjaEhvb2s9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtlLnN0eWxlLndpZHRoPVwiMXB4XCIsZS5zdHlsZS5oZWlnaHQ9XCIxcHhcIixlLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIixlLnN0eWxlLnRvcD1cIi0xMDAwcHhcIixlLnN0eWxlLmxlZnQ9XCItMTAwMHB4XCIsZS5zdHlsZS56SW5kZXg9MixlLnN0eWxlLmJhY2tncm91bmRDb2xvcj1cIiNGRjAwMDBcIixlLnRpdGxlPVwiSE9PSyBESVZcIixlLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLGZ1bmN0aW9uKCl7dC5pc01vYmlsZUFjY2Vzc2FiaWxsaXR5PSEwLHQuYWN0aXZhdGUoKSxkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGUpfSksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlKX0sdC5wcm90b3R5cGUuYWN0aXZhdGU9ZnVuY3Rpb24oKXt0aGlzLmlzQWN0aXZlfHwodGhpcy5pc0FjdGl2ZT0hMCx3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMuX29uTW91c2VNb3ZlLCEwKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIix0aGlzLl9vbktleURvd24sITEpLHRoaXMucmVuZGVyZXIub24oXCJwb3N0cmVuZGVyXCIsdGhpcy51cGRhdGUsdGhpcyksdGhpcy5yZW5kZXJlci52aWV3LnBhcmVudE5vZGUmJnRoaXMucmVuZGVyZXIudmlldy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMuZGl2KSl9LHQucHJvdG90eXBlLmRlYWN0aXZhdGU9ZnVuY3Rpb24oKXt0aGlzLmlzQWN0aXZlJiYhdGhpcy5pc01vYmlsZUFjY2Vzc2FiaWxsaXR5JiYodGhpcy5pc0FjdGl2ZT0hMSx3aW5kb3cuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMuX29uTW91c2VNb3ZlLCEwKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIix0aGlzLl9vbktleURvd24sITEpLHRoaXMucmVuZGVyZXIub2ZmKFwicG9zdHJlbmRlclwiLHRoaXMudXBkYXRlKSx0aGlzLmRpdi5wYXJlbnROb2RlJiZ0aGlzLmRpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZGl2KSl9LHQucHJvdG90eXBlLnVwZGF0ZUFjY2Vzc2libGVPYmplY3RzPWZ1bmN0aW9uKHQpe2lmKHQudmlzaWJsZSl7dC5hY2Nlc3NpYmxlJiZ0LmludGVyYWN0aXZlJiYodC5fYWNjZXNzaWJsZUFjdGl2ZXx8dGhpcy5hZGRDaGlsZCh0KSx0LnJlbmRlcklkPXRoaXMucmVuZGVySWQpO2Zvcih2YXIgZT10LmNoaWxkcmVuLHI9MDtyPGUubGVuZ3RoO3IrKyl0aGlzLnVwZGF0ZUFjY2Vzc2libGVPYmplY3RzKGVbcl0pfX0sdC5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7aWYodGhpcy5yZW5kZXJlci5yZW5kZXJpbmdUb1NjcmVlbil7dGhpcy51cGRhdGVBY2Nlc3NpYmxlT2JqZWN0cyh0aGlzLnJlbmRlcmVyLl9sYXN0T2JqZWN0UmVuZGVyZWQpO3ZhciB0PXRoaXMucmVuZGVyZXIudmlldy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxlPXQud2lkdGgvdGhpcy5yZW5kZXJlci53aWR0aCxyPXQuaGVpZ2h0L3RoaXMucmVuZGVyZXIuaGVpZ2h0LG49dGhpcy5kaXY7bi5zdHlsZS5sZWZ0PXQubGVmdCtcInB4XCIsbi5zdHlsZS50b3A9dC50b3ArXCJweFwiLG4uc3R5bGUud2lkdGg9dGhpcy5yZW5kZXJlci53aWR0aCtcInB4XCIsbi5zdHlsZS5oZWlnaHQ9dGhpcy5yZW5kZXJlci5oZWlnaHQrXCJweFwiO2Zvcih2YXIgaT0wO2k8dGhpcy5jaGlsZHJlbi5sZW5ndGg7aSsrKXt2YXIgbz10aGlzLmNoaWxkcmVuW2ldO2lmKG8ucmVuZGVySWQhPT10aGlzLnJlbmRlcklkKW8uX2FjY2Vzc2libGVBY3RpdmU9ITEscy51dGlscy5yZW1vdmVJdGVtcyh0aGlzLmNoaWxkcmVuLGksMSksdGhpcy5kaXYucmVtb3ZlQ2hpbGQoby5fYWNjZXNzaWJsZURpdiksdGhpcy5wb29sLnB1c2goby5fYWNjZXNzaWJsZURpdiksby5fYWNjZXNzaWJsZURpdj1udWxsLGktLSwwPT09dGhpcy5jaGlsZHJlbi5sZW5ndGgmJnRoaXMuZGVhY3RpdmF0ZSgpO2Vsc2V7bj1vLl9hY2Nlc3NpYmxlRGl2O3ZhciBhPW8uaGl0QXJlYSx1PW8ud29ybGRUcmFuc2Zvcm07by5oaXRBcmVhPyhuLnN0eWxlLmxlZnQ9KHUudHgrYS54KnUuYSkqZStcInB4XCIsbi5zdHlsZS50b3A9KHUudHkrYS55KnUuZCkqcitcInB4XCIsbi5zdHlsZS53aWR0aD1hLndpZHRoKnUuYSplK1wicHhcIixuLnN0eWxlLmhlaWdodD1hLmhlaWdodCp1LmQqcitcInB4XCIpOihhPW8uZ2V0Qm91bmRzKCksdGhpcy5jYXBIaXRBcmVhKGEpLG4uc3R5bGUubGVmdD1hLngqZStcInB4XCIsbi5zdHlsZS50b3A9YS55KnIrXCJweFwiLG4uc3R5bGUud2lkdGg9YS53aWR0aCplK1wicHhcIixuLnN0eWxlLmhlaWdodD1hLmhlaWdodCpyK1wicHhcIixuLnRpdGxlIT09by5hY2Nlc3NpYmxlVGl0bGUmJm51bGwhPT1vLmFjY2Vzc2libGVUaXRsZSYmKG4udGl0bGU9by5hY2Nlc3NpYmxlVGl0bGUpLG4uZ2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiKSE9PW8uYWNjZXNzaWJsZUhpbnQmJm51bGwhPT1vLmFjY2Vzc2libGVIaW50JiZuLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIixvLmFjY2Vzc2libGVIaW50KSl9fXRoaXMucmVuZGVySWQrK319LHQucHJvdG90eXBlLmNhcEhpdEFyZWE9ZnVuY3Rpb24odCl7dC54PDAmJih0LndpZHRoKz10LngsdC54PTApLHQueTwwJiYodC5oZWlnaHQrPXQueSx0Lnk9MCksdC54K3Qud2lkdGg+dGhpcy5yZW5kZXJlci53aWR0aCYmKHQud2lkdGg9dGhpcy5yZW5kZXJlci53aWR0aC10LngpLHQueSt0LmhlaWdodD50aGlzLnJlbmRlcmVyLmhlaWdodCYmKHQuaGVpZ2h0PXRoaXMucmVuZGVyZXIuaGVpZ2h0LXQueSl9LHQucHJvdG90eXBlLmFkZENoaWxkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucG9vbC5wb3AoKTtlfHwoZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpLGUuc3R5bGUud2lkdGg9YytcInB4XCIsZS5zdHlsZS5oZWlnaHQ9YytcInB4XCIsZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9dGhpcy5kZWJ1Zz9cInJnYmEoMjU1LDAsMCwwLjUpXCI6XCJ0cmFuc3BhcmVudFwiLGUuc3R5bGUucG9zaXRpb249XCJhYnNvbHV0ZVwiLGUuc3R5bGUuekluZGV4PXAsZS5zdHlsZS5ib3JkZXJTdHlsZT1cIm5vbmVcIixuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImNocm9tZVwiKT4tMT9lLnNldEF0dHJpYnV0ZShcImFyaWEtbGl2ZVwiLFwib2ZmXCIpOmUuc2V0QXR0cmlidXRlKFwiYXJpYS1saXZlXCIsXCJwb2xpdGVcIiksbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvcnY6LipHZWNrb1xcLy8pP2Uuc2V0QXR0cmlidXRlKFwiYXJpYS1yZWxldmFudFwiLFwiYWRkaXRpb25zXCIpOmUuc2V0QXR0cmlidXRlKFwiYXJpYS1yZWxldmFudFwiLFwidGV4dFwiKSxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX29uQ2xpY2suYmluZCh0aGlzKSksZS5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIix0aGlzLl9vbkZvY3VzLmJpbmQodGhpcykpLGUuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3Vzb3V0XCIsdGhpcy5fb25Gb2N1c091dC5iaW5kKHRoaXMpKSksdC5hY2Nlc3NpYmxlVGl0bGUmJm51bGwhPT10LmFjY2Vzc2libGVUaXRsZT9lLnRpdGxlPXQuYWNjZXNzaWJsZVRpdGxlOnQuYWNjZXNzaWJsZUhpbnQmJm51bGwhPT10LmFjY2Vzc2libGVIaW50fHwoZS50aXRsZT1cImRpc3BsYXlPYmplY3QgXCIrdC50YWJJbmRleCksdC5hY2Nlc3NpYmxlSGludCYmbnVsbCE9PXQuYWNjZXNzaWJsZUhpbnQmJmUuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLHQuYWNjZXNzaWJsZUhpbnQpLHQuX2FjY2Vzc2libGVBY3RpdmU9ITAsdC5fYWNjZXNzaWJsZURpdj1lLGUuZGlzcGxheU9iamVjdD10LHRoaXMuY2hpbGRyZW4ucHVzaCh0KSx0aGlzLmRpdi5hcHBlbmRDaGlsZCh0Ll9hY2Nlc3NpYmxlRGl2KSx0Ll9hY2Nlc3NpYmxlRGl2LnRhYkluZGV4PXQudGFiSW5kZXh9LHQucHJvdG90eXBlLl9vbkNsaWNrPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucmVuZGVyZXIucGx1Z2lucy5pbnRlcmFjdGlvbjtlLmRpc3BhdGNoRXZlbnQodC50YXJnZXQuZGlzcGxheU9iamVjdCxcImNsaWNrXCIsZS5ldmVudERhdGEpfSx0LnByb3RvdHlwZS5fb25Gb2N1cz1mdW5jdGlvbih0KXt0LnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJhcmlhLWxpdmVcIixcIm9mZlwiKXx8dC50YXJnZXQuc2V0QXR0cmlidXRlKFwiYXJpYS1saXZlXCIsXCJhc3NlcnRpdmVcIik7dmFyIGU9dGhpcy5yZW5kZXJlci5wbHVnaW5zLmludGVyYWN0aW9uO2UuZGlzcGF0Y2hFdmVudCh0LnRhcmdldC5kaXNwbGF5T2JqZWN0LFwibW91c2VvdmVyXCIsZS5ldmVudERhdGEpfSx0LnByb3RvdHlwZS5fb25Gb2N1c091dD1mdW5jdGlvbih0KXt0LnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJhcmlhLWxpdmVcIixcIm9mZlwiKXx8dC50YXJnZXQuc2V0QXR0cmlidXRlKFwiYXJpYS1saXZlXCIsXCJwb2xpdGVcIik7dmFyIGU9dGhpcy5yZW5kZXJlci5wbHVnaW5zLmludGVyYWN0aW9uO2UuZGlzcGF0Y2hFdmVudCh0LnRhcmdldC5kaXNwbGF5T2JqZWN0LFwibW91c2VvdXRcIixlLmV2ZW50RGF0YSl9LHQucHJvdG90eXBlLl9vbktleURvd249ZnVuY3Rpb24odCl7OT09PXQua2V5Q29kZSYmdGhpcy5hY3RpdmF0ZSgpfSx0LnByb3RvdHlwZS5fb25Nb3VzZU1vdmU9ZnVuY3Rpb24odCl7MD09PXQubW92ZW1lbnRYJiYwPT09dC5tb3ZlbWVudFl8fHRoaXMuZGVhY3RpdmF0ZSgpfSx0LnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5kaXY9bnVsbDtmb3IodmFyIHQ9MDt0PHRoaXMuY2hpbGRyZW4ubGVuZ3RoO3QrKyl0aGlzLmNoaWxkcmVuW3RdLmRpdj1udWxsO3dpbmRvdy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsdGhpcy5fb25Nb3VzZU1vdmUsITApLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLHRoaXMuX29uS2V5RG93biksdGhpcy5wb29sPW51bGwsdGhpcy5jaGlsZHJlbj1udWxsLHRoaXMucmVuZGVyZXI9bnVsbH0sdH0oKTtyLmRlZmF1bHQ9dixzLldlYkdMUmVuZGVyZXIucmVnaXN0ZXJQbHVnaW4oXCJhY2Nlc3NpYmlsaXR5XCIsdikscy5DYW52YXNSZW5kZXJlci5yZWdpc3RlclBsdWdpbihcImFjY2Vzc2liaWxpdHlcIix2KX0se1wiLi4vY29yZVwiOjY1LFwiLi9hY2Nlc3NpYmxlVGFyZ2V0XCI6NDEsaXNtb2JpbGVqczo0fV0sNDE6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtyLl9fZXNNb2R1bGU9ITAsci5kZWZhdWx0PXthY2Nlc3NpYmxlOiExLGFjY2Vzc2libGVUaXRsZTpudWxsLGFjY2Vzc2libGVIaW50Om51bGwsdGFiSW5kZXg6MCxfYWNjZXNzaWJsZUFjdGl2ZTohMSxfYWNjZXNzaWJsZURpdjohMX19LHt9XSw0MjpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fXIuX19lc01vZHVsZT0hMDt2YXIgaT10KFwiLi9hY2Nlc3NpYmxlVGFyZ2V0XCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiYWNjZXNzaWJsZVRhcmdldFwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBuKGkpLmRlZmF1bHR9fSk7dmFyIG89dChcIi4vQWNjZXNzaWJpbGl0eU1hbmFnZXJcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJBY2Nlc3NpYmlsaXR5TWFuYWdlclwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBuKG8pLmRlZmF1bHR9fSl9LHtcIi4vQWNjZXNzaWJpbGl0eU1hbmFnZXJcIjo0MCxcIi4vYWNjZXNzaWJsZVRhcmdldFwiOjQxfV0sNDM6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBpKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBuPWVbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSxyLG4pe3JldHVybiByJiZ0KGUucHJvdG90eXBlLHIpLG4mJnQoZSxuKSxlfX0oKSxzPXQoXCIuL2F1dG9EZXRlY3RSZW5kZXJlclwiKSxhPXQoXCIuL2Rpc3BsYXkvQ29udGFpbmVyXCIpLHU9bihhKSxoPXQoXCIuL3RpY2tlclwiKSxsPXQoXCIuL3NldHRpbmdzXCIpLGM9bihsKSxkPXQoXCIuL2NvbnN0XCIpLGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUscixuLG8sYSl7aSh0aGlzLHQpLFwibnVtYmVyXCI9PXR5cGVvZiBlJiYoZT1PYmplY3QuYXNzaWduKHt3aWR0aDplLGhlaWdodDpyfHxjLmRlZmF1bHQuUkVOREVSX09QVElPTlMuaGVpZ2h0LGZvcmNlQ2FudmFzOiEhbyxzaGFyZWRUaWNrZXI6ISFhfSxuKSksdGhpcy5fb3B0aW9ucz1lPU9iamVjdC5hc3NpZ24oe2F1dG9TdGFydDohMCxzaGFyZWRUaWNrZXI6ITEsZm9yY2VDYW52YXM6ITEsc2hhcmVkTG9hZGVyOiExfSxlKSx0aGlzLnJlbmRlcmVyPSgwLHMuYXV0b0RldGVjdFJlbmRlcmVyKShlKSx0aGlzLnN0YWdlPW5ldyB1LmRlZmF1bHQsdGhpcy5fdGlja2VyPW51bGwsdGhpcy50aWNrZXI9ZS5zaGFyZWRUaWNrZXI/aC5zaGFyZWQ6bmV3IGguVGlja2VyLGUuYXV0b1N0YXJ0JiZ0aGlzLnN0YXJ0KCl9cmV0dXJuIHQucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3RoaXMucmVuZGVyZXIucmVuZGVyKHRoaXMuc3RhZ2UpfSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5fdGlja2VyLnN0b3AoKX0sdC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLl90aWNrZXIuc3RhcnQoKX0sdC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbih0LGUpe2lmKHRoaXMuX3RpY2tlcil7dmFyIHI9dGhpcy5fdGlja2VyO3RoaXMudGlja2VyPW51bGwsci5kZXN0cm95KCl9dGhpcy5zdGFnZS5kZXN0cm95KGUpLHRoaXMuc3RhZ2U9bnVsbCx0aGlzLnJlbmRlcmVyLmRlc3Ryb3kodCksdGhpcy5yZW5kZXJlcj1udWxsLHRoaXMuX29wdGlvbnM9bnVsbH0sbyh0LFt7a2V5OlwidGlja2VyXCIsc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3RpY2tlciYmdGhpcy5fdGlja2VyLnJlbW92ZSh0aGlzLnJlbmRlcix0aGlzKSx0aGlzLl90aWNrZXI9dCx0JiZ0LmFkZCh0aGlzLnJlbmRlcix0aGlzLGQuVVBEQVRFX1BSSU9SSVRZLkxPVyl9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aWNrZXJ9fSx7a2V5Olwidmlld1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlbmRlcmVyLnZpZXd9fSx7a2V5Olwic2NyZWVuXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVuZGVyZXIuc2NyZWVufX1dKSx0fSgpO3IuZGVmYXVsdD1mfSx7XCIuL2F1dG9EZXRlY3RSZW5kZXJlclwiOjQ1LFwiLi9jb25zdFwiOjQ2LFwiLi9kaXNwbGF5L0NvbnRhaW5lclwiOjQ4LFwiLi9zZXR0aW5nc1wiOjEwMSxcIi4vdGlja2VyXCI6MTIxfV0sNDQ6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gbyh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfWZ1bmN0aW9uIHModCxlKXtpZih0IGluc3RhbmNlb2YgQXJyYXkpe2lmKFwicHJlY2lzaW9uXCIhPT10WzBdLnN1YnN0cmluZygwLDkpKXt2YXIgcj10LnNsaWNlKDApO3JldHVybiByLnVuc2hpZnQoXCJwcmVjaXNpb24gXCIrZStcIiBmbG9hdDtcIikscn19ZWxzZSBpZihcInByZWNpc2lvblwiIT09dC50cmltKCkuc3Vic3RyaW5nKDAsOSkpcmV0dXJuXCJwcmVjaXNpb24gXCIrZStcIiBmbG9hdDtcXG5cIit0O3JldHVybiB0fXIuX19lc01vZHVsZT0hMDt2YXIgYT10KFwicGl4aS1nbC1jb3JlXCIpLHU9dChcIi4vc2V0dGluZ3NcIiksaD1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KHUpLGw9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShyLG8sYSx1LGwpe3JldHVybiBuKHRoaXMsZSksaSh0aGlzLHQuY2FsbCh0aGlzLHIscyhvLGx8fGguZGVmYXVsdC5QUkVDSVNJT05fVkVSVEVYKSxzKGEsbHx8aC5kZWZhdWx0LlBSRUNJU0lPTl9GUkFHTUVOVCksdm9pZCAwLHUpKX1yZXR1cm4gbyhlLHQpLGV9KGEuR0xTaGFkZXIpO3IuZGVmYXVsdD1sfSx7XCIuL3NldHRpbmdzXCI6MTAxLFwicGl4aS1nbC1jb3JlXCI6MTV9XSw0NTpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIGkodCxlLHIsbil7dmFyIGk9dCYmdC5mb3JjZUNhbnZhcztyZXR1cm4gdm9pZCAwIT09biYmKGk9biksIWkmJnMuaXNXZWJHTFN1cHBvcnRlZCgpP25ldyBsLmRlZmF1bHQodCxlLHIpOm5ldyB1LmRlZmF1bHQodCxlLHIpfXIuX19lc01vZHVsZT0hMCxyLmF1dG9EZXRlY3RSZW5kZXJlcj1pO3ZhciBvPXQoXCIuL3V0aWxzXCIpLHM9ZnVuY3Rpb24odCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfShvKSxhPXQoXCIuL3JlbmRlcmVycy9jYW52YXMvQ2FudmFzUmVuZGVyZXJcIiksdT1uKGEpLGg9dChcIi4vcmVuZGVyZXJzL3dlYmdsL1dlYkdMUmVuZGVyZXJcIiksbD1uKGgpfSx7XCIuL3JlbmRlcmVycy9jYW52YXMvQ2FudmFzUmVuZGVyZXJcIjo3NyxcIi4vcmVuZGVyZXJzL3dlYmdsL1dlYkdMUmVuZGVyZXJcIjo4NCxcIi4vdXRpbHNcIjoxMjV9XSw0NjpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO3IuX19lc01vZHVsZT0hMDtyLlZFUlNJT049XCI0LjguOVwiLHIuUElfMj0yKk1hdGguUEksci5SQURfVE9fREVHPTE4MC9NYXRoLlBJLHIuREVHX1RPX1JBRD1NYXRoLlBJLzE4MCxyLlJFTkRFUkVSX1RZUEU9e1VOS05PV046MCxXRUJHTDoxLENBTlZBUzoyfSxyLkJMRU5EX01PREVTPXtOT1JNQUw6MCxBREQ6MSxNVUxUSVBMWToyLFNDUkVFTjozLE9WRVJMQVk6NCxEQVJLRU46NSxMSUdIVEVOOjYsQ09MT1JfRE9ER0U6NyxDT0xPUl9CVVJOOjgsSEFSRF9MSUdIVDo5LFNPRlRfTElHSFQ6MTAsRElGRkVSRU5DRToxMSxFWENMVVNJT046MTIsSFVFOjEzLFNBVFVSQVRJT046MTQsQ09MT1I6MTUsTFVNSU5PU0lUWToxNixOT1JNQUxfTlBNOjE3LEFERF9OUE06MTgsU0NSRUVOX05QTToxOX0sci5EUkFXX01PREVTPXtQT0lOVFM6MCxMSU5FUzoxLExJTkVfTE9PUDoyLExJTkVfU1RSSVA6MyxUUklBTkdMRVM6NCxUUklBTkdMRV9TVFJJUDo1LFRSSUFOR0xFX0ZBTjo2fSxyLlNDQUxFX01PREVTPXtMSU5FQVI6MCxORUFSRVNUOjF9LHIuV1JBUF9NT0RFUz17Q0xBTVA6MCxSRVBFQVQ6MSxNSVJST1JFRF9SRVBFQVQ6Mn0sci5HQ19NT0RFUz17QVVUTzowLE1BTlVBTDoxfSxyLlVSTF9GSUxFX0VYVEVOU0lPTj0vXFwuKFxcd3szLDR9KSg/OiR8XFw/fCMpL2ksci5EQVRBX1VSST0vXlxccypkYXRhOig/OihbXFx3LV0rKVxcLyhbXFx3Ky4tXSspKT8oPzo7Y2hhcnNldD0oW1xcdy1dKykpPyg/OjsoYmFzZTY0KSk/LCguKikvaSxyLlNWR19TSVpFPS88c3ZnW14+XSooPzpcXHMod2lkdGh8aGVpZ2h0KT0oJ3xcIikoXFxkKig/OlxcLlxcZCspPykoPzpweCk/KCd8XCIpKVtePl0qKD86XFxzKHdpZHRofGhlaWdodCk9KCd8XCIpKFxcZCooPzpcXC5cXGQrKT8pKD86cHgpPygnfFwiKSlbXj5dKj4vaSxyLlNIQVBFUz17UE9MWTowLFJFQ1Q6MSxDSVJDOjIsRUxJUDozLFJSRUM6NH0sci5QUkVDSVNJT049e0xPVzpcImxvd3BcIixNRURJVU06XCJtZWRpdW1wXCIsSElHSDpcImhpZ2hwXCJ9LHIuVFJBTlNGT1JNX01PREU9e1NUQVRJQzowLERZTkFNSUM6MX0sci5URVhUX0dSQURJRU5UPXtMSU5FQVJfVkVSVElDQUw6MCxMSU5FQVJfSE9SSVpPTlRBTDoxfSxyLlVQREFURV9QUklPUklUWT17SU5URVJBQ1RJT046NTAsSElHSDoyNSxOT1JNQUw6MCxMT1c6LTI1LFVUSUxJVFk6LTUwfX0se31dLDQ3OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ci5fX2VzTW9kdWxlPSEwO3ZhciBpPXQoXCIuLi9tYXRoXCIpLG89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7bih0aGlzLHQpLHRoaXMubWluWD0xLzAsdGhpcy5taW5ZPTEvMCx0aGlzLm1heFg9LTEvMCx0aGlzLm1heFk9LTEvMCx0aGlzLnJlY3Q9bnVsbH1yZXR1cm4gdC5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1pblg+dGhpcy5tYXhYfHx0aGlzLm1pblk+dGhpcy5tYXhZfSx0LnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMudXBkYXRlSUQrKyx0aGlzLm1pblg9MS8wLHRoaXMubWluWT0xLzAsdGhpcy5tYXhYPS0xLzAsdGhpcy5tYXhZPS0xLzB9LHQucHJvdG90eXBlLmdldFJlY3RhbmdsZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5taW5YPnRoaXMubWF4WHx8dGhpcy5taW5ZPnRoaXMubWF4WT9pLlJlY3RhbmdsZS5FTVBUWToodD10fHxuZXcgaS5SZWN0YW5nbGUoMCwwLDEsMSksdC54PXRoaXMubWluWCx0Lnk9dGhpcy5taW5ZLHQud2lkdGg9dGhpcy5tYXhYLXRoaXMubWluWCx0LmhlaWdodD10aGlzLm1heFktdGhpcy5taW5ZLHQpfSx0LnByb3RvdHlwZS5hZGRQb2ludD1mdW5jdGlvbih0KXt0aGlzLm1pblg9TWF0aC5taW4odGhpcy5taW5YLHQueCksdGhpcy5tYXhYPU1hdGgubWF4KHRoaXMubWF4WCx0LngpLHRoaXMubWluWT1NYXRoLm1pbih0aGlzLm1pblksdC55KSx0aGlzLm1heFk9TWF0aC5tYXgodGhpcy5tYXhZLHQueSl9LHQucHJvdG90eXBlLmFkZFF1YWQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5taW5YLHI9dGhpcy5taW5ZLG49dGhpcy5tYXhYLGk9dGhpcy5tYXhZLG89dFswXSxzPXRbMV07ZT1vPGU/bzplLHI9czxyP3M6cixuPW8+bj9vOm4saT1zPmk/czppLG89dFsyXSxzPXRbM10sZT1vPGU/bzplLHI9czxyP3M6cixuPW8+bj9vOm4saT1zPmk/czppLG89dFs0XSxzPXRbNV0sZT1vPGU/bzplLHI9czxyP3M6cixuPW8+bj9vOm4saT1zPmk/czppLG89dFs2XSxzPXRbN10sZT1vPGU/bzplLHI9czxyP3M6cixuPW8+bj9vOm4saT1zPmk/czppLHRoaXMubWluWD1lLHRoaXMubWluWT1yLHRoaXMubWF4WD1uLHRoaXMubWF4WT1pfSx0LnByb3RvdHlwZS5hZGRGcmFtZT1mdW5jdGlvbih0LGUscixuLGkpe3ZhciBvPXQud29ybGRUcmFuc2Zvcm0scz1vLmEsYT1vLmIsdT1vLmMsaD1vLmQsbD1vLnR4LGM9by50eSxkPXRoaXMubWluWCxmPXRoaXMubWluWSxwPXRoaXMubWF4WCx2PXRoaXMubWF4WSxnPXMqZSt1KnIrbCx5PWEqZStoKnIrYztkPWc8ZD9nOmQsZj15PGY/eTpmLHA9Zz5wP2c6cCx2PXk+dj95OnYsZz1zKm4rdSpyK2wseT1hKm4raCpyK2MsZD1nPGQ/ZzpkLGY9eTxmP3k6ZixwPWc+cD9nOnAsdj15PnY/eTp2LGc9cyplK3UqaStsLHk9YSplK2gqaStjLGQ9ZzxkP2c6ZCxmPXk8Zj95OmYscD1nPnA/ZzpwLHY9eT52P3k6dixnPXMqbit1KmkrbCx5PWEqbitoKmkrYyxkPWc8ZD9nOmQsZj15PGY/eTpmLHA9Zz5wP2c6cCx2PXk+dj95OnYsdGhpcy5taW5YPWQsdGhpcy5taW5ZPWYsdGhpcy5tYXhYPXAsdGhpcy5tYXhZPXZ9LHQucHJvdG90eXBlLmFkZFZlcnRpY2VzPWZ1bmN0aW9uKHQsZSxyLG4pe2Zvcih2YXIgaT10LndvcmxkVHJhbnNmb3JtLG89aS5hLHM9aS5iLGE9aS5jLHU9aS5kLGg9aS50eCxsPWkudHksYz10aGlzLm1pblgsZD10aGlzLm1pblksZj10aGlzLm1heFgscD10aGlzLm1heFksdj1yO3Y8bjt2Kz0yKXt2YXIgZz1lW3ZdLHk9ZVt2KzFdLG09bypnK2EqeStoLF89dSp5K3MqZytsO2M9bTxjP206YyxkPV88ZD9fOmQsZj1tPmY/bTpmLHA9Xz5wP186cH10aGlzLm1pblg9Yyx0aGlzLm1pblk9ZCx0aGlzLm1heFg9Zix0aGlzLm1heFk9cH0sdC5wcm90b3R5cGUuYWRkQm91bmRzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubWluWCxyPXRoaXMubWluWSxuPXRoaXMubWF4WCxpPXRoaXMubWF4WTt0aGlzLm1pblg9dC5taW5YPGU/dC5taW5YOmUsdGhpcy5taW5ZPXQubWluWTxyP3QubWluWTpyLHRoaXMubWF4WD10Lm1heFg+bj90Lm1heFg6bix0aGlzLm1heFk9dC5tYXhZPmk/dC5tYXhZOml9LHQucHJvdG90eXBlLmFkZEJvdW5kc01hc2s9ZnVuY3Rpb24odCxlKXt2YXIgcj10Lm1pblg+ZS5taW5YP3QubWluWDplLm1pblgsbj10Lm1pblk+ZS5taW5ZP3QubWluWTplLm1pblksaT10Lm1heFg8ZS5tYXhYP3QubWF4WDplLm1heFgsbz10Lm1heFk8ZS5tYXhZP3QubWF4WTplLm1heFk7aWYocjw9aSYmbjw9byl7dmFyIHM9dGhpcy5taW5YLGE9dGhpcy5taW5ZLHU9dGhpcy5tYXhYLGg9dGhpcy5tYXhZO3RoaXMubWluWD1yPHM/cjpzLHRoaXMubWluWT1uPGE/bjphLHRoaXMubWF4WD1pPnU/aTp1LHRoaXMubWF4WT1vPmg/bzpofX0sdC5wcm90b3R5cGUuYWRkQm91bmRzQXJlYT1mdW5jdGlvbih0LGUpe3ZhciByPXQubWluWD5lLng/dC5taW5YOmUueCxuPXQubWluWT5lLnk/dC5taW5ZOmUueSxpPXQubWF4WDxlLngrZS53aWR0aD90Lm1heFg6ZS54K2Uud2lkdGgsbz10Lm1heFk8ZS55K2UuaGVpZ2h0P3QubWF4WTplLnkrZS5oZWlnaHQ7aWYocjw9aSYmbjw9byl7dmFyIHM9dGhpcy5taW5YLGE9dGhpcy5taW5ZLHU9dGhpcy5tYXhYLGg9dGhpcy5tYXhZO3RoaXMubWluWD1yPHM/cjpzLHRoaXMubWluWT1uPGE/bjphLHRoaXMubWF4WD1pPnU/aTp1LHRoaXMubWF4WT1vPmg/bzpofX0sdH0oKTtyLmRlZmF1bHQ9b30se1wiLi4vbWF0aFwiOjcwfV0sNDg6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gbyh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfXIuX19lc01vZHVsZT0hMDt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG49ZVtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbihlLHIsbil7cmV0dXJuIHImJnQoZS5wcm90b3R5cGUsciksbiYmdChlLG4pLGV9fSgpLGE9dChcIi4uL3V0aWxzXCIpLHU9dChcIi4vRGlzcGxheU9iamVjdFwiKSxoPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0odSksbD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7bih0aGlzLGUpO3ZhciByPWkodGhpcyx0LmNhbGwodGhpcykpO3JldHVybiByLmNoaWxkcmVuPVtdLHJ9cmV0dXJuIG8oZSx0KSxlLnByb3RvdHlwZS5vbkNoaWxkcmVuQ2hhbmdlPWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5hZGRDaGlsZD1mdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoO2lmKGU+MSlmb3IodmFyIHI9MDtyPGU7cisrKXRoaXMuYWRkQ2hpbGQoYXJndW1lbnRzW3JdKTtlbHNlIHQucGFyZW50JiZ0LnBhcmVudC5yZW1vdmVDaGlsZCh0KSx0LnBhcmVudD10aGlzLHQudHJhbnNmb3JtLl9wYXJlbnRJRD0tMSx0aGlzLmNoaWxkcmVuLnB1c2godCksdGhpcy5fYm91bmRzSUQrKyx0aGlzLm9uQ2hpbGRyZW5DaGFuZ2UodGhpcy5jaGlsZHJlbi5sZW5ndGgtMSksdC5lbWl0KFwiYWRkZWRcIix0aGlzKTtyZXR1cm4gdH0sZS5wcm90b3R5cGUuYWRkQ2hpbGRBdD1mdW5jdGlvbih0LGUpe2lmKGU8MHx8ZT50aGlzLmNoaWxkcmVuLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IodCtcImFkZENoaWxkQXQ6IFRoZSBpbmRleCBcIitlK1wiIHN1cHBsaWVkIGlzIG91dCBvZiBib3VuZHMgXCIrdGhpcy5jaGlsZHJlbi5sZW5ndGgpO3JldHVybiB0LnBhcmVudCYmdC5wYXJlbnQucmVtb3ZlQ2hpbGQodCksdC5wYXJlbnQ9dGhpcyx0LnRyYW5zZm9ybS5fcGFyZW50SUQ9LTEsdGhpcy5jaGlsZHJlbi5zcGxpY2UoZSwwLHQpLHRoaXMuX2JvdW5kc0lEKyssdGhpcy5vbkNoaWxkcmVuQ2hhbmdlKGUpLHQuZW1pdChcImFkZGVkXCIsdGhpcyksdH0sZS5wcm90b3R5cGUuc3dhcENoaWxkcmVuPWZ1bmN0aW9uKHQsZSl7aWYodCE9PWUpe3ZhciByPXRoaXMuZ2V0Q2hpbGRJbmRleCh0KSxuPXRoaXMuZ2V0Q2hpbGRJbmRleChlKTt0aGlzLmNoaWxkcmVuW3JdPWUsdGhpcy5jaGlsZHJlbltuXT10LHRoaXMub25DaGlsZHJlbkNoYW5nZShyPG4/cjpuKX19LGUucHJvdG90eXBlLmdldENoaWxkSW5kZXg9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jaGlsZHJlbi5pbmRleE9mKHQpO2lmKC0xPT09ZSl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3VwcGxpZWQgRGlzcGxheU9iamVjdCBtdXN0IGJlIGEgY2hpbGQgb2YgdGhlIGNhbGxlclwiKTtyZXR1cm4gZX0sZS5wcm90b3R5cGUuc2V0Q2hpbGRJbmRleD1mdW5jdGlvbih0LGUpe2lmKGU8MHx8ZT49dGhpcy5jaGlsZHJlbi5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiVGhlIGluZGV4IFwiK2UrXCIgc3VwcGxpZWQgaXMgb3V0IG9mIGJvdW5kcyBcIit0aGlzLmNoaWxkcmVuLmxlbmd0aCk7dmFyIHI9dGhpcy5nZXRDaGlsZEluZGV4KHQpOygwLGEucmVtb3ZlSXRlbXMpKHRoaXMuY2hpbGRyZW4sciwxKSx0aGlzLmNoaWxkcmVuLnNwbGljZShlLDAsdCksdGhpcy5vbkNoaWxkcmVuQ2hhbmdlKGUpfSxlLnByb3RvdHlwZS5nZXRDaGlsZEF0PWZ1bmN0aW9uKHQpe2lmKHQ8MHx8dD49dGhpcy5jaGlsZHJlbi5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiZ2V0Q2hpbGRBdDogSW5kZXggKFwiK3QrXCIpIGRvZXMgbm90IGV4aXN0LlwiKTtyZXR1cm4gdGhpcy5jaGlsZHJlblt0XX0sZS5wcm90b3R5cGUucmVtb3ZlQ2hpbGQ9ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aDtpZihlPjEpZm9yKHZhciByPTA7cjxlO3IrKyl0aGlzLnJlbW92ZUNoaWxkKGFyZ3VtZW50c1tyXSk7ZWxzZXt2YXIgbj10aGlzLmNoaWxkcmVuLmluZGV4T2YodCk7aWYoLTE9PT1uKXJldHVybiBudWxsO3QucGFyZW50PW51bGwsdC50cmFuc2Zvcm0uX3BhcmVudElEPS0xLCgwLGEucmVtb3ZlSXRlbXMpKHRoaXMuY2hpbGRyZW4sbiwxKSx0aGlzLl9ib3VuZHNJRCsrLHRoaXMub25DaGlsZHJlbkNoYW5nZShuKSx0LmVtaXQoXCJyZW1vdmVkXCIsdGhpcyl9cmV0dXJuIHR9LGUucHJvdG90eXBlLnJlbW92ZUNoaWxkQXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRDaGlsZEF0KHQpO3JldHVybiBlLnBhcmVudD1udWxsLGUudHJhbnNmb3JtLl9wYXJlbnRJRD0tMSwoMCxhLnJlbW92ZUl0ZW1zKSh0aGlzLmNoaWxkcmVuLHQsMSksdGhpcy5fYm91bmRzSUQrKyx0aGlzLm9uQ2hpbGRyZW5DaGFuZ2UodCksZS5lbWl0KFwicmVtb3ZlZFwiLHRoaXMpLGV9LGUucHJvdG90eXBlLnJlbW92ZUNoaWxkcmVuPWZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOjAsZT1hcmd1bWVudHNbMV0scj10LG49XCJudW1iZXJcIj09dHlwZW9mIGU/ZTp0aGlzLmNoaWxkcmVuLmxlbmd0aCxpPW4tcixvPXZvaWQgMDtpZihpPjAmJmk8PW4pe289dGhpcy5jaGlsZHJlbi5zcGxpY2UocixpKTtmb3IodmFyIHM9MDtzPG8ubGVuZ3RoOysrcylvW3NdLnBhcmVudD1udWxsLG9bc10udHJhbnNmb3JtJiYob1tzXS50cmFuc2Zvcm0uX3BhcmVudElEPS0xKTt0aGlzLl9ib3VuZHNJRCsrLHRoaXMub25DaGlsZHJlbkNoYW5nZSh0KTtmb3IodmFyIGE9MDthPG8ubGVuZ3RoOysrYSlvW2FdLmVtaXQoXCJyZW1vdmVkXCIsdGhpcyk7cmV0dXJuIG99aWYoMD09PWkmJjA9PT10aGlzLmNoaWxkcmVuLmxlbmd0aClyZXR1cm5bXTt0aHJvdyBuZXcgUmFuZ2VFcnJvcihcInJlbW92ZUNoaWxkcmVuOiBudW1lcmljIHZhbHVlcyBhcmUgb3V0c2lkZSB0aGUgYWNjZXB0YWJsZSByYW5nZS5cIil9LGUucHJvdG90eXBlLnVwZGF0ZVRyYW5zZm9ybT1mdW5jdGlvbigpe3RoaXMuX2JvdW5kc0lEKyssdGhpcy50cmFuc2Zvcm0udXBkYXRlVHJhbnNmb3JtKHRoaXMucGFyZW50LnRyYW5zZm9ybSksdGhpcy53b3JsZEFscGhhPXRoaXMuYWxwaGEqdGhpcy5wYXJlbnQud29ybGRBbHBoYTtmb3IodmFyIHQ9MCxlPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO3Q8ZTsrK3Qpe3ZhciByPXRoaXMuY2hpbGRyZW5bdF07ci52aXNpYmxlJiZyLnVwZGF0ZVRyYW5zZm9ybSgpfX0sZS5wcm90b3R5cGUuY2FsY3VsYXRlQm91bmRzPWZ1bmN0aW9uKCl7dGhpcy5fYm91bmRzLmNsZWFyKCksdGhpcy5fY2FsY3VsYXRlQm91bmRzKCk7Zm9yKHZhciB0PTA7dDx0aGlzLmNoaWxkcmVuLmxlbmd0aDt0Kyspe3ZhciBlPXRoaXMuY2hpbGRyZW5bdF07ZS52aXNpYmxlJiZlLnJlbmRlcmFibGUmJihlLmNhbGN1bGF0ZUJvdW5kcygpLGUuX21hc2s/KGUuX21hc2suY2FsY3VsYXRlQm91bmRzKCksdGhpcy5fYm91bmRzLmFkZEJvdW5kc01hc2soZS5fYm91bmRzLGUuX21hc2suX2JvdW5kcykpOmUuZmlsdGVyQXJlYT90aGlzLl9ib3VuZHMuYWRkQm91bmRzQXJlYShlLl9ib3VuZHMsZS5maWx0ZXJBcmVhKTp0aGlzLl9ib3VuZHMuYWRkQm91bmRzKGUuX2JvdW5kcykpfXRoaXMuX2xhc3RCb3VuZHNJRD10aGlzLl9ib3VuZHNJRH0sZS5wcm90b3R5cGUuX2NhbGN1bGF0ZUJvdW5kcz1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUucmVuZGVyV2ViR0w9ZnVuY3Rpb24odCl7aWYodGhpcy52aXNpYmxlJiYhKHRoaXMud29ybGRBbHBoYTw9MCkmJnRoaXMucmVuZGVyYWJsZSlpZih0aGlzLl9tYXNrfHx0aGlzLmZpbHRlcnMmJnRoaXMuZmlsdGVycy5sZW5ndGgpdGhpcy5yZW5kZXJBZHZhbmNlZFdlYkdMKHQpO2Vsc2V7dGhpcy5fcmVuZGVyV2ViR0wodCk7Zm9yKHZhciBlPTAscj10aGlzLmNoaWxkcmVuLmxlbmd0aDtlPHI7KytlKXRoaXMuY2hpbGRyZW5bZV0ucmVuZGVyV2ViR0wodCl9fSxlLnByb3RvdHlwZS5yZW5kZXJBZHZhbmNlZFdlYkdMPWZ1bmN0aW9uKHQpe3QuZmx1c2goKTt2YXIgZT10aGlzLl9maWx0ZXJzLHI9dGhpcy5fbWFzaztpZihlKXt0aGlzLl9lbmFibGVkRmlsdGVyc3x8KHRoaXMuX2VuYWJsZWRGaWx0ZXJzPVtdKSx0aGlzLl9lbmFibGVkRmlsdGVycy5sZW5ndGg9MDtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyllW25dLmVuYWJsZWQmJnRoaXMuX2VuYWJsZWRGaWx0ZXJzLnB1c2goZVtuXSk7dGhpcy5fZW5hYmxlZEZpbHRlcnMubGVuZ3RoJiZ0LmZpbHRlck1hbmFnZXIucHVzaEZpbHRlcih0aGlzLHRoaXMuX2VuYWJsZWRGaWx0ZXJzKX1yJiZ0Lm1hc2tNYW5hZ2VyLnB1c2hNYXNrKHRoaXMsdGhpcy5fbWFzayksdGhpcy5fcmVuZGVyV2ViR0wodCk7Zm9yKHZhciBpPTAsbz10aGlzLmNoaWxkcmVuLmxlbmd0aDtpPG87aSsrKXRoaXMuY2hpbGRyZW5baV0ucmVuZGVyV2ViR0wodCk7dC5mbHVzaCgpLHImJnQubWFza01hbmFnZXIucG9wTWFzayh0aGlzLHRoaXMuX21hc2spLGUmJnRoaXMuX2VuYWJsZWRGaWx0ZXJzJiZ0aGlzLl9lbmFibGVkRmlsdGVycy5sZW5ndGgmJnQuZmlsdGVyTWFuYWdlci5wb3BGaWx0ZXIoKX0sZS5wcm90b3R5cGUuX3JlbmRlcldlYkdMPWZ1bmN0aW9uKHQpe30sZS5wcm90b3R5cGUuX3JlbmRlckNhbnZhcz1mdW5jdGlvbih0KXt9LGUucHJvdG90eXBlLnJlbmRlckNhbnZhcz1mdW5jdGlvbih0KXtpZih0aGlzLnZpc2libGUmJiEodGhpcy53b3JsZEFscGhhPD0wKSYmdGhpcy5yZW5kZXJhYmxlKXt0aGlzLl9tYXNrJiZ0Lm1hc2tNYW5hZ2VyLnB1c2hNYXNrKHRoaXMuX21hc2spLHRoaXMuX3JlbmRlckNhbnZhcyh0KTtmb3IodmFyIGU9MCxyPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO2U8cjsrK2UpdGhpcy5jaGlsZHJlbltlXS5yZW5kZXJDYW52YXModCk7dGhpcy5fbWFzayYmdC5tYXNrTWFuYWdlci5wb3BNYXNrKHQpfX0sZS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbihlKXt0LnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7dmFyIHI9XCJib29sZWFuXCI9PXR5cGVvZiBlP2U6ZSYmZS5jaGlsZHJlbixuPXRoaXMucmVtb3ZlQ2hpbGRyZW4oMCx0aGlzLmNoaWxkcmVuLmxlbmd0aCk7aWYocilmb3IodmFyIGk9MDtpPG4ubGVuZ3RoOysraSluW2ldLmRlc3Ryb3koZSl9LHMoZSxbe2tleTpcIndpZHRoXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2NhbGUueCp0aGlzLmdldExvY2FsQm91bmRzKCkud2lkdGh9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldExvY2FsQm91bmRzKCkud2lkdGg7dGhpcy5zY2FsZS54PTAhPT1lP3QvZToxLHRoaXMuX3dpZHRoPXR9fSx7a2V5OlwiaGVpZ2h0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2NhbGUueSp0aGlzLmdldExvY2FsQm91bmRzKCkuaGVpZ2h0fSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRMb2NhbEJvdW5kcygpLmhlaWdodDt0aGlzLnNjYWxlLnk9MCE9PWU/dC9lOjEsdGhpcy5faGVpZ2h0PXR9fV0pLGV9KGguZGVmYXVsdCk7ci5kZWZhdWx0PWwsbC5wcm90b3R5cGUuY29udGFpbmVyVXBkYXRlVHJhbnNmb3JtPWwucHJvdG90eXBlLnVwZGF0ZVRyYW5zZm9ybX0se1wiLi4vdXRpbHNcIjoxMjUsXCIuL0Rpc3BsYXlPYmplY3RcIjo0OX1dLDQ5OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIHModCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1yLl9fZXNNb2R1bGU9ITA7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBuPWVbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSxyLG4pe3JldHVybiByJiZ0KGUucHJvdG90eXBlLHIpLG4mJnQoZSxuKSxlfX0oKSx1PXQoXCJldmVudGVtaXR0ZXIzXCIpLGg9bih1KSxsPXQoXCIuLi9jb25zdFwiKSxjPXQoXCIuLi9zZXR0aW5nc1wiKSxkPW4oYyksZj10KFwiLi9UcmFuc2Zvcm1TdGF0aWNcIikscD1uKGYpLHY9dChcIi4vVHJhbnNmb3JtXCIpLGc9bih2KSx5PXQoXCIuL0JvdW5kc1wiKSxtPW4oeSksXz10KFwiLi4vbWF0aFwiKSxiPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtpKHRoaXMsZSk7dmFyIHI9byh0aGlzLHQuY2FsbCh0aGlzKSksbj1kLmRlZmF1bHQuVFJBTlNGT1JNX01PREU9PT1sLlRSQU5TRk9STV9NT0RFLlNUQVRJQz9wLmRlZmF1bHQ6Zy5kZWZhdWx0O3JldHVybiByLnRlbXBEaXNwbGF5T2JqZWN0UGFyZW50PW51bGwsci50cmFuc2Zvcm09bmV3IG4sci5hbHBoYT0xLHIudmlzaWJsZT0hMCxyLnJlbmRlcmFibGU9ITAsci5wYXJlbnQ9bnVsbCxyLndvcmxkQWxwaGE9MSxyLmZpbHRlckFyZWE9bnVsbCxyLl9maWx0ZXJzPW51bGwsci5fZW5hYmxlZEZpbHRlcnM9bnVsbCxyLl9ib3VuZHM9bmV3IG0uZGVmYXVsdCxyLl9ib3VuZHNJRD0wLHIuX2xhc3RCb3VuZHNJRD0tMSxyLl9ib3VuZHNSZWN0PW51bGwsci5fbG9jYWxCb3VuZHNSZWN0PW51bGwsci5fbWFzaz1udWxsLHIuX2Rlc3Ryb3llZD0hMSxyfXJldHVybiBzKGUsdCksZS5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtPWZ1bmN0aW9uKCl7dGhpcy50cmFuc2Zvcm0udXBkYXRlVHJhbnNmb3JtKHRoaXMucGFyZW50LnRyYW5zZm9ybSksdGhpcy53b3JsZEFscGhhPXRoaXMuYWxwaGEqdGhpcy5wYXJlbnQud29ybGRBbHBoYSx0aGlzLl9ib3VuZHMudXBkYXRlSUQrK30sZS5wcm90b3R5cGUuX3JlY3Vyc2l2ZVBvc3RVcGRhdGVUcmFuc2Zvcm09ZnVuY3Rpb24oKXt0aGlzLnBhcmVudD8odGhpcy5wYXJlbnQuX3JlY3Vyc2l2ZVBvc3RVcGRhdGVUcmFuc2Zvcm0oKSx0aGlzLnRyYW5zZm9ybS51cGRhdGVUcmFuc2Zvcm0odGhpcy5wYXJlbnQudHJhbnNmb3JtKSk6dGhpcy50cmFuc2Zvcm0udXBkYXRlVHJhbnNmb3JtKHRoaXMuX3RlbXBEaXNwbGF5T2JqZWN0UGFyZW50LnRyYW5zZm9ybSl9LGUucHJvdG90eXBlLmdldEJvdW5kcz1mdW5jdGlvbih0LGUpe3JldHVybiB0fHwodGhpcy5wYXJlbnQ/KHRoaXMuX3JlY3Vyc2l2ZVBvc3RVcGRhdGVUcmFuc2Zvcm0oKSx0aGlzLnVwZGF0ZVRyYW5zZm9ybSgpKToodGhpcy5wYXJlbnQ9dGhpcy5fdGVtcERpc3BsYXlPYmplY3RQYXJlbnQsdGhpcy51cGRhdGVUcmFuc2Zvcm0oKSx0aGlzLnBhcmVudD1udWxsKSksdGhpcy5fYm91bmRzSUQhPT10aGlzLl9sYXN0Qm91bmRzSUQmJnRoaXMuY2FsY3VsYXRlQm91bmRzKCksZXx8KHRoaXMuX2JvdW5kc1JlY3R8fCh0aGlzLl9ib3VuZHNSZWN0PW5ldyBfLlJlY3RhbmdsZSksZT10aGlzLl9ib3VuZHNSZWN0KSx0aGlzLl9ib3VuZHMuZ2V0UmVjdGFuZ2xlKGUpfSxlLnByb3RvdHlwZS5nZXRMb2NhbEJvdW5kcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnRyYW5zZm9ybSxyPXRoaXMucGFyZW50O3RoaXMucGFyZW50PW51bGwsdGhpcy50cmFuc2Zvcm09dGhpcy5fdGVtcERpc3BsYXlPYmplY3RQYXJlbnQudHJhbnNmb3JtLHR8fCh0aGlzLl9sb2NhbEJvdW5kc1JlY3R8fCh0aGlzLl9sb2NhbEJvdW5kc1JlY3Q9bmV3IF8uUmVjdGFuZ2xlKSx0PXRoaXMuX2xvY2FsQm91bmRzUmVjdCk7dmFyIG49dGhpcy5nZXRCb3VuZHMoITEsdCk7cmV0dXJuIHRoaXMucGFyZW50PXIsdGhpcy50cmFuc2Zvcm09ZSxufSxlLnByb3RvdHlwZS50b0dsb2JhbD1mdW5jdGlvbih0LGUpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXSYmYXJndW1lbnRzWzJdfHwodGhpcy5fcmVjdXJzaXZlUG9zdFVwZGF0ZVRyYW5zZm9ybSgpLHRoaXMucGFyZW50P3RoaXMuZGlzcGxheU9iamVjdFVwZGF0ZVRyYW5zZm9ybSgpOih0aGlzLnBhcmVudD10aGlzLl90ZW1wRGlzcGxheU9iamVjdFBhcmVudCx0aGlzLmRpc3BsYXlPYmplY3RVcGRhdGVUcmFuc2Zvcm0oKSx0aGlzLnBhcmVudD1udWxsKSksdGhpcy53b3JsZFRyYW5zZm9ybS5hcHBseSh0LGUpfSxlLnByb3RvdHlwZS50b0xvY2FsPWZ1bmN0aW9uKHQsZSxyLG4pe3JldHVybiBlJiYodD1lLnRvR2xvYmFsKHQscixuKSksbnx8KHRoaXMuX3JlY3Vyc2l2ZVBvc3RVcGRhdGVUcmFuc2Zvcm0oKSx0aGlzLnBhcmVudD90aGlzLmRpc3BsYXlPYmplY3RVcGRhdGVUcmFuc2Zvcm0oKToodGhpcy5wYXJlbnQ9dGhpcy5fdGVtcERpc3BsYXlPYmplY3RQYXJlbnQsdGhpcy5kaXNwbGF5T2JqZWN0VXBkYXRlVHJhbnNmb3JtKCksdGhpcy5wYXJlbnQ9bnVsbCkpLHRoaXMud29ybGRUcmFuc2Zvcm0uYXBwbHlJbnZlcnNlKHQscil9LGUucHJvdG90eXBlLnJlbmRlcldlYkdMPWZ1bmN0aW9uKHQpe30sZS5wcm90b3R5cGUucmVuZGVyQ2FudmFzPWZ1bmN0aW9uKHQpe30sZS5wcm90b3R5cGUuc2V0UGFyZW50PWZ1bmN0aW9uKHQpe2lmKCF0fHwhdC5hZGRDaGlsZCl0aHJvdyBuZXcgRXJyb3IoXCJzZXRQYXJlbnQ6IEFyZ3VtZW50IG11c3QgYmUgYSBDb250YWluZXJcIik7cmV0dXJuIHQuYWRkQ2hpbGQodGhpcyksdH0sZS5wcm90b3R5cGUuc2V0VHJhbnNmb3JtPWZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOjAsZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MCxyPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXToxLG49YXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10/YXJndW1lbnRzWzNdOjEsaT1hcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XT9hcmd1bWVudHNbNF06MCxvPWFyZ3VtZW50cy5sZW5ndGg+NSYmdm9pZCAwIT09YXJndW1lbnRzWzVdP2FyZ3VtZW50c1s1XTowLHM9YXJndW1lbnRzLmxlbmd0aD42JiZ2b2lkIDAhPT1hcmd1bWVudHNbNl0/YXJndW1lbnRzWzZdOjAsYT1hcmd1bWVudHMubGVuZ3RoPjcmJnZvaWQgMCE9PWFyZ3VtZW50c1s3XT9hcmd1bWVudHNbN106MCx1PWFyZ3VtZW50cy5sZW5ndGg+OCYmdm9pZCAwIT09YXJndW1lbnRzWzhdP2FyZ3VtZW50c1s4XTowO3JldHVybiB0aGlzLnBvc2l0aW9uLng9dCx0aGlzLnBvc2l0aW9uLnk9ZSx0aGlzLnNjYWxlLng9cnx8MSx0aGlzLnNjYWxlLnk9bnx8MSx0aGlzLnJvdGF0aW9uPWksdGhpcy5za2V3Lng9byx0aGlzLnNrZXcueT1zLHRoaXMucGl2b3QueD1hLHRoaXMucGl2b3QueT11LHRoaXN9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpLHRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5yZW1vdmVDaGlsZCh0aGlzKSx0aGlzLnRyYW5zZm9ybT1udWxsLHRoaXMucGFyZW50PW51bGwsdGhpcy5fYm91bmRzPW51bGwsdGhpcy5fY3VycmVudEJvdW5kcz1udWxsLHRoaXMuX21hc2s9bnVsbCx0aGlzLmZpbHRlckFyZWE9bnVsbCx0aGlzLmludGVyYWN0aXZlPSExLHRoaXMuaW50ZXJhY3RpdmVDaGlsZHJlbj0hMSx0aGlzLl9kZXN0cm95ZWQ9ITB9LGEoZSxbe2tleTpcIl90ZW1wRGlzcGxheU9iamVjdFBhcmVudFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy50ZW1wRGlzcGxheU9iamVjdFBhcmVudCYmKHRoaXMudGVtcERpc3BsYXlPYmplY3RQYXJlbnQ9bmV3IGUpLHRoaXMudGVtcERpc3BsYXlPYmplY3RQYXJlbnR9fSx7a2V5OlwieFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBvc2l0aW9uLnh9LHNldDpmdW5jdGlvbih0KXt0aGlzLnRyYW5zZm9ybS5wb3NpdGlvbi54PXR9fSx7a2V5OlwieVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBvc2l0aW9uLnl9LHNldDpmdW5jdGlvbih0KXt0aGlzLnRyYW5zZm9ybS5wb3NpdGlvbi55PXR9fSx7a2V5Olwid29ybGRUcmFuc2Zvcm1cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmFuc2Zvcm0ud29ybGRUcmFuc2Zvcm19fSx7a2V5OlwibG9jYWxUcmFuc2Zvcm1cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmFuc2Zvcm0ubG9jYWxUcmFuc2Zvcm19fSx7a2V5OlwicG9zaXRpb25cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmFuc2Zvcm0ucG9zaXRpb259LHNldDpmdW5jdGlvbih0KXt0aGlzLnRyYW5zZm9ybS5wb3NpdGlvbi5jb3B5KHQpfX0se2tleTpcInNjYWxlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJhbnNmb3JtLnNjYWxlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy50cmFuc2Zvcm0uc2NhbGUuY29weSh0KX19LHtrZXk6XCJwaXZvdFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYW5zZm9ybS5waXZvdH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMudHJhbnNmb3JtLnBpdm90LmNvcHkodCl9fSx7a2V5Olwic2tld1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYW5zZm9ybS5za2V3fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy50cmFuc2Zvcm0uc2tldy5jb3B5KHQpfX0se2tleTpcInJvdGF0aW9uXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJhbnNmb3JtLnJvdGF0aW9ufSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy50cmFuc2Zvcm0ucm90YXRpb249dH19LHtrZXk6XCJ3b3JsZFZpc2libGVcIixnZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2Rve2lmKCF0LnZpc2libGUpcmV0dXJuITE7dD10LnBhcmVudH13aGlsZSh0KTtyZXR1cm4hMH19LHtrZXk6XCJtYXNrXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hc2t9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9tYXNrJiYodGhpcy5fbWFzay5yZW5kZXJhYmxlPSEwLHRoaXMuX21hc2suaXNNYXNrPSExKSx0aGlzLl9tYXNrPXQsdGhpcy5fbWFzayYmKHRoaXMuX21hc2sucmVuZGVyYWJsZT0hMSx0aGlzLl9tYXNrLmlzTWFzaz0hMCl9fSx7a2V5OlwiZmlsdGVyc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9maWx0ZXJzJiZ0aGlzLl9maWx0ZXJzLnNsaWNlKCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9maWx0ZXJzPXQmJnQuc2xpY2UoKX19XSksZX0oaC5kZWZhdWx0KTtyLmRlZmF1bHQ9YixiLnByb3RvdHlwZS5kaXNwbGF5T2JqZWN0VXBkYXRlVHJhbnNmb3JtPWIucHJvdG90eXBlLnVwZGF0ZVRyYW5zZm9ybX0se1wiLi4vY29uc3RcIjo0NixcIi4uL21hdGhcIjo3MCxcIi4uL3NldHRpbmdzXCI6MTAxLFwiLi9Cb3VuZHNcIjo0NyxcIi4vVHJhbnNmb3JtXCI6NTAsXCIuL1RyYW5zZm9ybVN0YXRpY1wiOjUyLGV2ZW50ZW1pdHRlcjM6M31dLDUwOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe1xuaWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gbyh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfXIuX19lc01vZHVsZT0hMDt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG49ZVtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbihlLHIsbil7cmV0dXJuIHImJnQoZS5wcm90b3R5cGUsciksbiYmdChlLG4pLGV9fSgpLGE9dChcIi4uL21hdGhcIiksdT10KFwiLi9UcmFuc2Zvcm1CYXNlXCIpLGg9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fSh1KSxsPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtuKHRoaXMsZSk7dmFyIHI9aSh0aGlzLHQuY2FsbCh0aGlzKSk7cmV0dXJuIHIucG9zaXRpb249bmV3IGEuUG9pbnQoMCwwKSxyLnNjYWxlPW5ldyBhLlBvaW50KDEsMSksci5za2V3PW5ldyBhLk9ic2VydmFibGVQb2ludChyLnVwZGF0ZVNrZXcsciwwLDApLHIucGl2b3Q9bmV3IGEuUG9pbnQoMCwwKSxyLl9yb3RhdGlvbj0wLHIuX2N4PTEsci5fc3g9MCxyLl9jeT0wLHIuX3N5PTEscn1yZXR1cm4gbyhlLHQpLGUucHJvdG90eXBlLnVwZGF0ZVNrZXc9ZnVuY3Rpb24oKXt0aGlzLl9jeD1NYXRoLmNvcyh0aGlzLl9yb3RhdGlvbit0aGlzLnNrZXcuX3kpLHRoaXMuX3N4PU1hdGguc2luKHRoaXMuX3JvdGF0aW9uK3RoaXMuc2tldy5feSksdGhpcy5fY3k9LU1hdGguc2luKHRoaXMuX3JvdGF0aW9uLXRoaXMuc2tldy5feCksdGhpcy5fc3k9TWF0aC5jb3ModGhpcy5fcm90YXRpb24tdGhpcy5za2V3Ll94KX0sZS5wcm90b3R5cGUudXBkYXRlTG9jYWxUcmFuc2Zvcm09ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmxvY2FsVHJhbnNmb3JtO3QuYT10aGlzLl9jeCp0aGlzLnNjYWxlLngsdC5iPXRoaXMuX3N4KnRoaXMuc2NhbGUueCx0LmM9dGhpcy5fY3kqdGhpcy5zY2FsZS55LHQuZD10aGlzLl9zeSp0aGlzLnNjYWxlLnksdC50eD10aGlzLnBvc2l0aW9uLngtKHRoaXMucGl2b3QueCp0LmErdGhpcy5waXZvdC55KnQuYyksdC50eT10aGlzLnBvc2l0aW9uLnktKHRoaXMucGl2b3QueCp0LmIrdGhpcy5waXZvdC55KnQuZCl9LGUucHJvdG90eXBlLnVwZGF0ZVRyYW5zZm9ybT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmxvY2FsVHJhbnNmb3JtO2UuYT10aGlzLl9jeCp0aGlzLnNjYWxlLngsZS5iPXRoaXMuX3N4KnRoaXMuc2NhbGUueCxlLmM9dGhpcy5fY3kqdGhpcy5zY2FsZS55LGUuZD10aGlzLl9zeSp0aGlzLnNjYWxlLnksZS50eD10aGlzLnBvc2l0aW9uLngtKHRoaXMucGl2b3QueCplLmErdGhpcy5waXZvdC55KmUuYyksZS50eT10aGlzLnBvc2l0aW9uLnktKHRoaXMucGl2b3QueCplLmIrdGhpcy5waXZvdC55KmUuZCk7dmFyIHI9dC53b3JsZFRyYW5zZm9ybSxuPXRoaXMud29ybGRUcmFuc2Zvcm07bi5hPWUuYSpyLmErZS5iKnIuYyxuLmI9ZS5hKnIuYitlLmIqci5kLG4uYz1lLmMqci5hK2UuZCpyLmMsbi5kPWUuYypyLmIrZS5kKnIuZCxuLnR4PWUudHgqci5hK2UudHkqci5jK3IudHgsbi50eT1lLnR4KnIuYitlLnR5KnIuZCtyLnR5LHRoaXMuX3dvcmxkSUQrK30sZS5wcm90b3R5cGUuc2V0RnJvbU1hdHJpeD1mdW5jdGlvbih0KXt0LmRlY29tcG9zZSh0aGlzKX0scyhlLFt7a2V5Olwicm90YXRpb25cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcm90YXRpb259LHNldDpmdW5jdGlvbih0KXt0aGlzLl9yb3RhdGlvbj10LHRoaXMudXBkYXRlU2tldygpfX1dKSxlfShoLmRlZmF1bHQpO3IuZGVmYXVsdD1sfSx7XCIuLi9tYXRoXCI6NzAsXCIuL1RyYW5zZm9ybUJhc2VcIjo1MX1dLDUxOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ci5fX2VzTW9kdWxlPSEwO3ZhciBpPXQoXCIuLi9tYXRoXCIpLG89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7bih0aGlzLHQpLHRoaXMud29ybGRUcmFuc2Zvcm09bmV3IGkuTWF0cml4LHRoaXMubG9jYWxUcmFuc2Zvcm09bmV3IGkuTWF0cml4LHRoaXMuX3dvcmxkSUQ9MCx0aGlzLl9wYXJlbnRJRD0wfXJldHVybiB0LnByb3RvdHlwZS51cGRhdGVMb2NhbFRyYW5zZm9ybT1mdW5jdGlvbigpe30sdC5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtPWZ1bmN0aW9uKHQpe3ZhciBlPXQud29ybGRUcmFuc2Zvcm0scj10aGlzLndvcmxkVHJhbnNmb3JtLG49dGhpcy5sb2NhbFRyYW5zZm9ybTtyLmE9bi5hKmUuYStuLmIqZS5jLHIuYj1uLmEqZS5iK24uYiplLmQsci5jPW4uYyplLmErbi5kKmUuYyxyLmQ9bi5jKmUuYituLmQqZS5kLHIudHg9bi50eCplLmErbi50eSplLmMrZS50eCxyLnR5PW4udHgqZS5iK24udHkqZS5kK2UudHksdGhpcy5fd29ybGRJRCsrfSx0fSgpO3IuZGVmYXVsdD1vLG8ucHJvdG90eXBlLnVwZGF0ZVdvcmxkVHJhbnNmb3JtPW8ucHJvdG90eXBlLnVwZGF0ZVRyYW5zZm9ybSxvLklERU5USVRZPW5ldyBvfSx7XCIuLi9tYXRoXCI6NzB9XSw1MjpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkodCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBvKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9ci5fX2VzTW9kdWxlPSEwO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksYT10KFwiLi4vbWF0aFwiKSx1PXQoXCIuL1RyYW5zZm9ybUJhc2VcIiksaD1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KHUpLGw9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe24odGhpcyxlKTt2YXIgcj1pKHRoaXMsdC5jYWxsKHRoaXMpKTtyZXR1cm4gci5wb3NpdGlvbj1uZXcgYS5PYnNlcnZhYmxlUG9pbnQoci5vbkNoYW5nZSxyLDAsMCksci5zY2FsZT1uZXcgYS5PYnNlcnZhYmxlUG9pbnQoci5vbkNoYW5nZSxyLDEsMSksci5waXZvdD1uZXcgYS5PYnNlcnZhYmxlUG9pbnQoci5vbkNoYW5nZSxyLDAsMCksci5za2V3PW5ldyBhLk9ic2VydmFibGVQb2ludChyLnVwZGF0ZVNrZXcsciwwLDApLHIuX3JvdGF0aW9uPTAsci5fY3g9MSxyLl9zeD0wLHIuX2N5PTAsci5fc3k9MSxyLl9sb2NhbElEPTAsci5fY3VycmVudExvY2FsSUQ9MCxyfXJldHVybiBvKGUsdCksZS5wcm90b3R5cGUub25DaGFuZ2U9ZnVuY3Rpb24oKXt0aGlzLl9sb2NhbElEKyt9LGUucHJvdG90eXBlLnVwZGF0ZVNrZXc9ZnVuY3Rpb24oKXt0aGlzLl9jeD1NYXRoLmNvcyh0aGlzLl9yb3RhdGlvbit0aGlzLnNrZXcuX3kpLHRoaXMuX3N4PU1hdGguc2luKHRoaXMuX3JvdGF0aW9uK3RoaXMuc2tldy5feSksdGhpcy5fY3k9LU1hdGguc2luKHRoaXMuX3JvdGF0aW9uLXRoaXMuc2tldy5feCksdGhpcy5fc3k9TWF0aC5jb3ModGhpcy5fcm90YXRpb24tdGhpcy5za2V3Ll94KSx0aGlzLl9sb2NhbElEKyt9LGUucHJvdG90eXBlLnVwZGF0ZUxvY2FsVHJhbnNmb3JtPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5sb2NhbFRyYW5zZm9ybTt0aGlzLl9sb2NhbElEIT09dGhpcy5fY3VycmVudExvY2FsSUQmJih0LmE9dGhpcy5fY3gqdGhpcy5zY2FsZS5feCx0LmI9dGhpcy5fc3gqdGhpcy5zY2FsZS5feCx0LmM9dGhpcy5fY3kqdGhpcy5zY2FsZS5feSx0LmQ9dGhpcy5fc3kqdGhpcy5zY2FsZS5feSx0LnR4PXRoaXMucG9zaXRpb24uX3gtKHRoaXMucGl2b3QuX3gqdC5hK3RoaXMucGl2b3QuX3kqdC5jKSx0LnR5PXRoaXMucG9zaXRpb24uX3ktKHRoaXMucGl2b3QuX3gqdC5iK3RoaXMucGl2b3QuX3kqdC5kKSx0aGlzLl9jdXJyZW50TG9jYWxJRD10aGlzLl9sb2NhbElELHRoaXMuX3BhcmVudElEPS0xKX0sZS5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubG9jYWxUcmFuc2Zvcm07aWYodGhpcy5fbG9jYWxJRCE9PXRoaXMuX2N1cnJlbnRMb2NhbElEJiYoZS5hPXRoaXMuX2N4KnRoaXMuc2NhbGUuX3gsZS5iPXRoaXMuX3N4KnRoaXMuc2NhbGUuX3gsZS5jPXRoaXMuX2N5KnRoaXMuc2NhbGUuX3ksZS5kPXRoaXMuX3N5KnRoaXMuc2NhbGUuX3ksZS50eD10aGlzLnBvc2l0aW9uLl94LSh0aGlzLnBpdm90Ll94KmUuYSt0aGlzLnBpdm90Ll95KmUuYyksZS50eT10aGlzLnBvc2l0aW9uLl95LSh0aGlzLnBpdm90Ll94KmUuYit0aGlzLnBpdm90Ll95KmUuZCksdGhpcy5fY3VycmVudExvY2FsSUQ9dGhpcy5fbG9jYWxJRCx0aGlzLl9wYXJlbnRJRD0tMSksdGhpcy5fcGFyZW50SUQhPT10Ll93b3JsZElEKXt2YXIgcj10LndvcmxkVHJhbnNmb3JtLG49dGhpcy53b3JsZFRyYW5zZm9ybTtuLmE9ZS5hKnIuYStlLmIqci5jLG4uYj1lLmEqci5iK2UuYipyLmQsbi5jPWUuYypyLmErZS5kKnIuYyxuLmQ9ZS5jKnIuYitlLmQqci5kLG4udHg9ZS50eCpyLmErZS50eSpyLmMrci50eCxuLnR5PWUudHgqci5iK2UudHkqci5kK3IudHksdGhpcy5fcGFyZW50SUQ9dC5fd29ybGRJRCx0aGlzLl93b3JsZElEKyt9fSxlLnByb3RvdHlwZS5zZXRGcm9tTWF0cml4PWZ1bmN0aW9uKHQpe3QuZGVjb21wb3NlKHRoaXMpLHRoaXMuX2xvY2FsSUQrK30scyhlLFt7a2V5Olwicm90YXRpb25cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcm90YXRpb259LHNldDpmdW5jdGlvbih0KXt0aGlzLl9yb3RhdGlvbiE9PXQmJih0aGlzLl9yb3RhdGlvbj10LHRoaXMudXBkYXRlU2tldygpKX19XSksZX0oaC5kZWZhdWx0KTtyLmRlZmF1bHQ9bH0se1wiLi4vbWF0aFwiOjcwLFwiLi9UcmFuc2Zvcm1CYXNlXCI6NTF9XSw1MzpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIGkodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBzKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9ci5fX2VzTW9kdWxlPSEwO3ZhciBhPXQoXCIuLi9kaXNwbGF5L0NvbnRhaW5lclwiKSx1PW4oYSksaD10KFwiLi4vdGV4dHVyZXMvUmVuZGVyVGV4dHVyZVwiKSxsPW4oaCksYz10KFwiLi4vdGV4dHVyZXMvVGV4dHVyZVwiKSxkPW4oYyksZj10KFwiLi9HcmFwaGljc0RhdGFcIikscD1uKGYpLHY9dChcIi4uL3Nwcml0ZXMvU3ByaXRlXCIpLGc9bih2KSx5PXQoXCIuLi9tYXRoXCIpLG09dChcIi4uL3V0aWxzXCIpLF89dChcIi4uL2NvbnN0XCIpLGI9dChcIi4uL2Rpc3BsYXkvQm91bmRzXCIpLHg9bihiKSxUPXQoXCIuL3V0aWxzL2JlemllckN1cnZlVG9cIiksdz1uKFQpLEU9dChcIi4uL3JlbmRlcmVycy9jYW52YXMvQ2FudmFzUmVuZGVyZXJcIiksUz1uKEUpLE89dm9pZCAwLE09bmV3IHkuTWF0cml4LFA9bmV3IHkuUG9pbnQsQz1uZXcgRmxvYXQzMkFycmF5KDQpLFI9bmV3IEZsb2F0MzJBcnJheSg0KSxBPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSYmYXJndW1lbnRzWzBdO2kodGhpcyxlKTt2YXIgbj1vKHRoaXMsdC5jYWxsKHRoaXMpKTtyZXR1cm4gbi5maWxsQWxwaGE9MSxuLmxpbmVXaWR0aD0wLG4ubmF0aXZlTGluZXM9cixuLmxpbmVDb2xvcj0wLG4ubGluZUFsaWdubWVudD0uNSxuLmdyYXBoaWNzRGF0YT1bXSxuLnRpbnQ9MTY3NzcyMTUsbi5fcHJldlRpbnQ9MTY3NzcyMTUsbi5ibGVuZE1vZGU9Xy5CTEVORF9NT0RFUy5OT1JNQUwsbi5jdXJyZW50UGF0aD1udWxsLG4uX3dlYkdMPXt9LG4uaXNNYXNrPSExLG4uYm91bmRzUGFkZGluZz0wLG4uX2xvY2FsQm91bmRzPW5ldyB4LmRlZmF1bHQsbi5kaXJ0eT0wLG4uZmFzdFJlY3REaXJ0eT0tMSxuLmNsZWFyRGlydHk9MCxuLmJvdW5kc0RpcnR5PS0xLG4uY2FjaGVkU3ByaXRlRGlydHk9ITEsbi5fc3ByaXRlUmVjdD1udWxsLG4uX2Zhc3RSZWN0PSExLG4uX3ByZXZSZWN0VGludD1udWxsLG4uX3ByZXZSZWN0RmlsbENvbG9yPW51bGwsbn1yZXR1cm4gcyhlLHQpLGUucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGU7dC5yZW5kZXJhYmxlPXRoaXMucmVuZGVyYWJsZSx0LmZpbGxBbHBoYT10aGlzLmZpbGxBbHBoYSx0LmxpbmVXaWR0aD10aGlzLmxpbmVXaWR0aCx0LmxpbmVDb2xvcj10aGlzLmxpbmVDb2xvcix0LmxpbmVBbGlnbm1lbnQ9dGhpcy5saW5lQWxpZ25tZW50LHQudGludD10aGlzLnRpbnQsdC5ibGVuZE1vZGU9dGhpcy5ibGVuZE1vZGUsdC5pc01hc2s9dGhpcy5pc01hc2ssdC5ib3VuZHNQYWRkaW5nPXRoaXMuYm91bmRzUGFkZGluZyx0LmRpcnR5PTAsdC5jYWNoZWRTcHJpdGVEaXJ0eT10aGlzLmNhY2hlZFNwcml0ZURpcnR5O2Zvcih2YXIgcj0wO3I8dGhpcy5ncmFwaGljc0RhdGEubGVuZ3RoOysrcil0LmdyYXBoaWNzRGF0YS5wdXNoKHRoaXMuZ3JhcGhpY3NEYXRhW3JdLmNsb25lKCkpO3JldHVybiB0LmN1cnJlbnRQYXRoPXQuZ3JhcGhpY3NEYXRhW3QuZ3JhcGhpY3NEYXRhLmxlbmd0aC0xXSx0LnVwZGF0ZUxvY2FsQm91bmRzKCksdH0sZS5wcm90b3R5cGUuX3F1YWRyYXRpY0N1cnZlTGVuZ3RoPWZ1bmN0aW9uKHQsZSxyLG4saSxvKXt2YXIgcz10LTIqcitpLGE9ZS0yKm4rbyx1PTIqci0yKnQsaD0yKm4tMiplLGw9NCoocypzK2EqYSksYz00KihzKnUrYSpoKSxkPXUqdStoKmgsZj0yKk1hdGguc3FydChsK2MrZCkscD1NYXRoLnNxcnQobCksdj0yKmwqcCxnPTIqTWF0aC5zcXJ0KGQpLHk9Yy9wO3JldHVybih2KmYrcCpjKihmLWcpKyg0KmQqbC1jKmMpKk1hdGgubG9nKCgyKnAreStmKS8oeStnKSkpLyg0KnYpfSxlLnByb3RvdHlwZS5fYmV6aWVyQ3VydmVMZW5ndGg9ZnVuY3Rpb24odCxlLHIsbixpLG8scyxhKXtmb3IodmFyIHU9MCxoPTAsbD0wLGM9MCxkPTAsZj0wLHA9MCx2PTAsZz0wLHk9MCxtPTAsXz10LGI9ZSx4PTE7eDw9MTA7Kyt4KWg9eC8xMCxsPWgqaCxjPWwqaCxkPTEtaCxmPWQqZCxwPWYqZCx2PXAqdCszKmYqaCpyKzMqZCpsKmkrYypzLGc9cCplKzMqZipoKm4rMypkKmwqbytjKmEseT1fLXYsbT1iLWcsXz12LGI9Zyx1Kz1NYXRoLnNxcnQoeSp5K20qbSk7cmV0dXJuIHV9LGUucHJvdG90eXBlLl9zZWdtZW50c0NvdW50PWZ1bmN0aW9uKHQpe3ZhciByPU1hdGguY2VpbCh0L2UuQ1VSVkVTLm1heExlbmd0aCk7cmV0dXJuIHI8ZS5DVVJWRVMubWluU2VnbWVudHM/cj1lLkNVUlZFUy5taW5TZWdtZW50czpyPmUuQ1VSVkVTLm1heFNlZ21lbnRzJiYocj1lLkNVUlZFUy5tYXhTZWdtZW50cykscn0sZS5wcm90b3R5cGUubGluZVN0eWxlPWZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOjAsZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MCxyPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXToxLG49YXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10/YXJndW1lbnRzWzNdOi41O2lmKHRoaXMubGluZVdpZHRoPXQsdGhpcy5saW5lQ29sb3I9ZSx0aGlzLmxpbmVBbHBoYT1yLHRoaXMubGluZUFsaWdubWVudD1uLHRoaXMuY3VycmVudFBhdGgpaWYodGhpcy5jdXJyZW50UGF0aC5zaGFwZS5wb2ludHMubGVuZ3RoKXt2YXIgaT1uZXcgeS5Qb2x5Z29uKHRoaXMuY3VycmVudFBhdGguc2hhcGUucG9pbnRzLnNsaWNlKC0yKSk7aS5jbG9zZWQ9ITEsdGhpcy5kcmF3U2hhcGUoaSl9ZWxzZSB0aGlzLmN1cnJlbnRQYXRoLmxpbmVXaWR0aD10aGlzLmxpbmVXaWR0aCx0aGlzLmN1cnJlbnRQYXRoLmxpbmVDb2xvcj10aGlzLmxpbmVDb2xvcix0aGlzLmN1cnJlbnRQYXRoLmxpbmVBbHBoYT10aGlzLmxpbmVBbHBoYSx0aGlzLmN1cnJlbnRQYXRoLmxpbmVBbGlnbm1lbnQ9dGhpcy5saW5lQWxpZ25tZW50O3JldHVybiB0aGlzfSxlLnByb3RvdHlwZS5tb3ZlVG89ZnVuY3Rpb24odCxlKXt2YXIgcj1uZXcgeS5Qb2x5Z29uKFt0LGVdKTtyZXR1cm4gci5jbG9zZWQ9ITEsdGhpcy5kcmF3U2hhcGUociksdGhpc30sZS5wcm90b3R5cGUubGluZVRvPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcy5jdXJyZW50UGF0aC5zaGFwZS5wb2ludHMsbj1yW3IubGVuZ3RoLTJdLGk9cltyLmxlbmd0aC0xXTtyZXR1cm4gbj09PXQmJmk9PT1lfHwoci5wdXNoKHQsZSksdGhpcy5kaXJ0eSsrKSx0aGlzfSxlLnByb3RvdHlwZS5xdWFkcmF0aWNDdXJ2ZVRvPWZ1bmN0aW9uKHQscixuLGkpe3RoaXMuY3VycmVudFBhdGg/MD09PXRoaXMuY3VycmVudFBhdGguc2hhcGUucG9pbnRzLmxlbmd0aCYmKHRoaXMuY3VycmVudFBhdGguc2hhcGUucG9pbnRzPVswLDBdKTp0aGlzLm1vdmVUbygwLDApO3ZhciBvPXRoaXMuY3VycmVudFBhdGguc2hhcGUucG9pbnRzLHM9MCxhPTA7MD09PW8ubGVuZ3RoJiZ0aGlzLm1vdmVUbygwLDApO2Zvcih2YXIgdT1vW28ubGVuZ3RoLTJdLGg9b1tvLmxlbmd0aC0xXSxsPWUuQ1VSVkVTLmFkYXB0aXZlP3RoaXMuX3NlZ21lbnRzQ291bnQodGhpcy5fcXVhZHJhdGljQ3VydmVMZW5ndGgodSxoLHQscixuLGkpKToyMCxjPTE7Yzw9bDsrK2Mpe3ZhciBkPWMvbDtzPXUrKHQtdSkqZCxhPWgrKHItaCkqZCxvLnB1c2gocysodCsobi10KSpkLXMpKmQsYSsocisoaS1yKSpkLWEpKmQpfXJldHVybiB0aGlzLmRpcnR5KyssdGhpc30sZS5wcm90b3R5cGUuYmV6aWVyQ3VydmVUbz1mdW5jdGlvbih0LHIsbixpLG8scyl7dGhpcy5jdXJyZW50UGF0aD8wPT09dGhpcy5jdXJyZW50UGF0aC5zaGFwZS5wb2ludHMubGVuZ3RoJiYodGhpcy5jdXJyZW50UGF0aC5zaGFwZS5wb2ludHM9WzAsMF0pOnRoaXMubW92ZVRvKDAsMCk7dmFyIGE9dGhpcy5jdXJyZW50UGF0aC5zaGFwZS5wb2ludHMsdT1hW2EubGVuZ3RoLTJdLGg9YVthLmxlbmd0aC0xXTthLmxlbmd0aC09Mjt2YXIgbD1lLkNVUlZFUy5hZGFwdGl2ZT90aGlzLl9zZWdtZW50c0NvdW50KHRoaXMuX2JlemllckN1cnZlTGVuZ3RoKHUsaCx0LHIsbixpLG8scykpOjIwO3JldHVybigwLHcuZGVmYXVsdCkodSxoLHQscixuLGksbyxzLGwsYSksdGhpcy5kaXJ0eSsrLHRoaXN9LGUucHJvdG90eXBlLmFyY1RvPWZ1bmN0aW9uKHQsZSxyLG4saSl7dGhpcy5jdXJyZW50UGF0aD8wPT09dGhpcy5jdXJyZW50UGF0aC5zaGFwZS5wb2ludHMubGVuZ3RoJiZ0aGlzLmN1cnJlbnRQYXRoLnNoYXBlLnBvaW50cy5wdXNoKHQsZSk6dGhpcy5tb3ZlVG8odCxlKTt2YXIgbz10aGlzLmN1cnJlbnRQYXRoLnNoYXBlLnBvaW50cyxzPW9bby5sZW5ndGgtMl0sYT1vW28ubGVuZ3RoLTFdLHU9YS1lLGg9cy10LGw9bi1lLGM9ci10LGQ9TWF0aC5hYnModSpjLWgqbCk7aWYoZDwxZS04fHwwPT09aSlvW28ubGVuZ3RoLTJdPT09dCYmb1tvLmxlbmd0aC0xXT09PWV8fG8ucHVzaCh0LGUpO2Vsc2V7dmFyIGY9dSp1K2gqaCxwPWwqbCtjKmMsdj11KmwraCpjLGc9aSpNYXRoLnNxcnQoZikvZCx5PWkqTWF0aC5zcXJ0KHApL2QsbT1nKnYvZixfPXkqdi9wLGI9ZypjK3kqaCx4PWcqbCt5KnUsVD1oKih5K20pLHc9dSooeSttKSxFPWMqKGcrXyksUz1sKihnK18pLE89TWF0aC5hdGFuMih3LXgsVC1iKSxNPU1hdGguYXRhbjIoUy14LEUtYik7dGhpcy5hcmMoYit0LHgrZSxpLE8sTSxoKmw+Yyp1KX1yZXR1cm4gdGhpcy5kaXJ0eSsrLHRoaXN9LGUucHJvdG90eXBlLmFyYz1mdW5jdGlvbih0LHIsbixpLG8pe3ZhciBzPWFyZ3VtZW50cy5sZW5ndGg+NSYmdm9pZCAwIT09YXJndW1lbnRzWzVdJiZhcmd1bWVudHNbNV07aWYoaT09PW8pcmV0dXJuIHRoaXM7IXMmJm88PWk/bys9Xy5QSV8yOnMmJmk8PW8mJihpKz1fLlBJXzIpO3ZhciBhPW8taSx1PWUuQ1VSVkVTLmFkYXB0aXZlP3RoaXMuX3NlZ21lbnRzQ291bnQoTWF0aC5hYnMoYSkqbik6NDAqTWF0aC5jZWlsKE1hdGguYWJzKGEpL18uUElfMik7aWYoMD09PWEpcmV0dXJuIHRoaXM7dmFyIGg9dCtNYXRoLmNvcyhpKSpuLGw9citNYXRoLnNpbihpKSpuLGM9dGhpcy5jdXJyZW50UGF0aD90aGlzLmN1cnJlbnRQYXRoLnNoYXBlLnBvaW50czpudWxsO2lmKGMpe3ZhciBkPU1hdGguYWJzKGNbYy5sZW5ndGgtMl0taCksZj1NYXRoLmFicyhjW2MubGVuZ3RoLTFdLWwpO2Q8LjAwMSYmZjwuMDAxfHxjLnB1c2goaCxsKX1lbHNlIHRoaXMubW92ZVRvKGgsbCksYz10aGlzLmN1cnJlbnRQYXRoLnNoYXBlLnBvaW50cztmb3IodmFyIHA9YS8oMip1KSx2PTIqcCxnPU1hdGguY29zKHApLHk9TWF0aC5zaW4ocCksbT11LTEsYj1tJTEvbSx4PTA7eDw9bTsrK3gpe3ZhciBUPXgrYip4LHc9cCtpK3YqVCxFPU1hdGguY29zKHcpLFM9LU1hdGguc2luKHcpO2MucHVzaCgoZypFK3kqUykqbit0LChnKi1TK3kqRSkqbityKX1yZXR1cm4gdGhpcy5kaXJ0eSsrLHRoaXN9LGUucHJvdG90eXBlLmJlZ2luRmlsbD1mdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTowLGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjE7cmV0dXJuIHRoaXMuZmlsbGluZz0hMCx0aGlzLmZpbGxDb2xvcj10LHRoaXMuZmlsbEFscGhhPWUsdGhpcy5jdXJyZW50UGF0aCYmdGhpcy5jdXJyZW50UGF0aC5zaGFwZS5wb2ludHMubGVuZ3RoPD0yJiYodGhpcy5jdXJyZW50UGF0aC5maWxsPXRoaXMuZmlsbGluZyx0aGlzLmN1cnJlbnRQYXRoLmZpbGxDb2xvcj10aGlzLmZpbGxDb2xvcix0aGlzLmN1cnJlbnRQYXRoLmZpbGxBbHBoYT10aGlzLmZpbGxBbHBoYSksdGhpc30sZS5wcm90b3R5cGUuZW5kRmlsbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbGxpbmc9ITEsdGhpcy5maWxsQ29sb3I9bnVsbCx0aGlzLmZpbGxBbHBoYT0xLHRoaXN9LGUucHJvdG90eXBlLmRyYXdSZWN0PWZ1bmN0aW9uKHQsZSxyLG4pe3JldHVybiB0aGlzLmRyYXdTaGFwZShuZXcgeS5SZWN0YW5nbGUodCxlLHIsbikpLHRoaXN9LGUucHJvdG90eXBlLmRyYXdSb3VuZGVkUmVjdD1mdW5jdGlvbih0LGUscixuLGkpe3JldHVybiB0aGlzLmRyYXdTaGFwZShuZXcgeS5Sb3VuZGVkUmVjdGFuZ2xlKHQsZSxyLG4saSkpLHRoaXN9LGUucHJvdG90eXBlLmRyYXdDaXJjbGU9ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0aGlzLmRyYXdTaGFwZShuZXcgeS5DaXJjbGUodCxlLHIpKSx0aGlzfSxlLnByb3RvdHlwZS5kcmF3RWxsaXBzZT1mdW5jdGlvbih0LGUscixuKXtyZXR1cm4gdGhpcy5kcmF3U2hhcGUobmV3IHkuRWxsaXBzZSh0LGUscixuKSksdGhpc30sZS5wcm90b3R5cGUuZHJhd1BvbHlnb249ZnVuY3Rpb24odCl7dmFyIGU9dCxyPSEwO2lmKGUgaW5zdGFuY2VvZiB5LlBvbHlnb24mJihyPWUuY2xvc2VkLGU9ZS5wb2ludHMpLCFBcnJheS5pc0FycmF5KGUpKXtlPW5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKTtmb3IodmFyIG49MDtuPGUubGVuZ3RoOysrbillW25dPWFyZ3VtZW50c1tuXX12YXIgaT1uZXcgeS5Qb2x5Z29uKGUpO3JldHVybiBpLmNsb3NlZD1yLHRoaXMuZHJhd1NoYXBlKGkpLHRoaXN9LGUucHJvdG90eXBlLmRyYXdTdGFyPWZ1bmN0aW9uKHQsZSxyLG4saSl7dmFyIG89YXJndW1lbnRzLmxlbmd0aD41JiZ2b2lkIDAhPT1hcmd1bWVudHNbNV0/YXJndW1lbnRzWzVdOjA7aT1pfHxuLzI7Zm9yKHZhciBzPS0xKk1hdGguUEkvMitvLGE9MipyLHU9Xy5QSV8yL2EsaD1bXSxsPTA7bDxhO2wrKyl7dmFyIGM9bCUyP2k6bixkPWwqdStzO2gucHVzaCh0K2MqTWF0aC5jb3MoZCksZStjKk1hdGguc2luKGQpKX1yZXR1cm4gdGhpcy5kcmF3UG9seWdvbihoKX0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5saW5lV2lkdGh8fHRoaXMuZmlsbGluZ3x8dGhpcy5ncmFwaGljc0RhdGEubGVuZ3RoPjApJiYodGhpcy5saW5lV2lkdGg9MCx0aGlzLmxpbmVBbGlnbm1lbnQ9LjUsdGhpcy5maWxsaW5nPSExLHRoaXMuYm91bmRzRGlydHk9LTEsdGhpcy5jYW52YXNUaW50RGlydHk9LTEsdGhpcy5kaXJ0eSsrLHRoaXMuY2xlYXJEaXJ0eSsrLHRoaXMuZ3JhcGhpY3NEYXRhLmxlbmd0aD0wKSx0aGlzLmN1cnJlbnRQYXRoPW51bGwsdGhpcy5fc3ByaXRlUmVjdD1udWxsLHRoaXN9LGUucHJvdG90eXBlLmlzRmFzdFJlY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gMT09PXRoaXMuZ3JhcGhpY3NEYXRhLmxlbmd0aCYmdGhpcy5ncmFwaGljc0RhdGFbMF0uc2hhcGUudHlwZT09PV8uU0hBUEVTLlJFQ1QmJiF0aGlzLmdyYXBoaWNzRGF0YVswXS5saW5lV2lkdGh9LGUucHJvdG90eXBlLl9yZW5kZXJXZWJHTD1mdW5jdGlvbih0KXt0aGlzLmRpcnR5IT09dGhpcy5mYXN0UmVjdERpcnR5JiYodGhpcy5mYXN0UmVjdERpcnR5PXRoaXMuZGlydHksdGhpcy5fZmFzdFJlY3Q9dGhpcy5pc0Zhc3RSZWN0KCkpLHRoaXMuX2Zhc3RSZWN0P3RoaXMuX3JlbmRlclNwcml0ZVJlY3QodCk6KHQuc2V0T2JqZWN0UmVuZGVyZXIodC5wbHVnaW5zLmdyYXBoaWNzKSx0LnBsdWdpbnMuZ3JhcGhpY3MucmVuZGVyKHRoaXMpKX0sZS5wcm90b3R5cGUuX3JlbmRlclNwcml0ZVJlY3Q9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5ncmFwaGljc0RhdGFbMF0uc2hhcGU7dGhpcy5fc3ByaXRlUmVjdHx8KHRoaXMuX3Nwcml0ZVJlY3Q9bmV3IGcuZGVmYXVsdChuZXcgZC5kZWZhdWx0KGQuZGVmYXVsdC5XSElURSkpKTt2YXIgcj10aGlzLl9zcHJpdGVSZWN0LG49dGhpcy5ncmFwaGljc0RhdGFbMF0uZmlsbENvbG9yO2lmKDE2Nzc3MjE1PT09dGhpcy50aW50KXIudGludD1uO2Vsc2UgaWYodGhpcy50aW50IT09dGhpcy5fcHJldlJlY3RUaW50fHxuIT09dGhpcy5fcHJldlJlY3RGaWxsQ29sb3Ipe3ZhciBpPUMsbz1SOygwLG0uaGV4MnJnYikobixpKSwoMCxtLmhleDJyZ2IpKHRoaXMudGludCxvKSxpWzBdKj1vWzBdLGlbMV0qPW9bMV0saVsyXSo9b1syXSxyLnRpbnQ9KDAsbS5yZ2IyaGV4KShpKSx0aGlzLl9wcmV2UmVjdFRpbnQ9dGhpcy50aW50LHRoaXMuX3ByZXZSZWN0RmlsbENvbG9yPW59ci5hbHBoYT10aGlzLmdyYXBoaWNzRGF0YVswXS5maWxsQWxwaGEsci53b3JsZEFscGhhPXRoaXMud29ybGRBbHBoYSpyLmFscGhhLHIuYmxlbmRNb2RlPXRoaXMuYmxlbmRNb2RlLHIuX3RleHR1cmUuX2ZyYW1lLndpZHRoPWUud2lkdGgsci5fdGV4dHVyZS5fZnJhbWUuaGVpZ2h0PWUuaGVpZ2h0LHIudHJhbnNmb3JtLndvcmxkVHJhbnNmb3JtPXRoaXMudHJhbnNmb3JtLndvcmxkVHJhbnNmb3JtLHIuYW5jaG9yLnNldCgtZS54L2Uud2lkdGgsLWUueS9lLmhlaWdodCksci5fb25BbmNob3JVcGRhdGUoKSxyLl9yZW5kZXJXZWJHTCh0KX0sZS5wcm90b3R5cGUuX3JlbmRlckNhbnZhcz1mdW5jdGlvbih0KXshMCE9PXRoaXMuaXNNYXNrJiZ0LnBsdWdpbnMuZ3JhcGhpY3MucmVuZGVyKHRoaXMpfSxlLnByb3RvdHlwZS5fY2FsY3VsYXRlQm91bmRzPWZ1bmN0aW9uKCl7dGhpcy5ib3VuZHNEaXJ0eSE9PXRoaXMuZGlydHkmJih0aGlzLmJvdW5kc0RpcnR5PXRoaXMuZGlydHksdGhpcy51cGRhdGVMb2NhbEJvdW5kcygpLHRoaXMuY2FjaGVkU3ByaXRlRGlydHk9ITApO3ZhciB0PXRoaXMuX2xvY2FsQm91bmRzO3RoaXMuX2JvdW5kcy5hZGRGcmFtZSh0aGlzLnRyYW5zZm9ybSx0Lm1pblgsdC5taW5ZLHQubWF4WCx0Lm1heFkpfSxlLnByb3RvdHlwZS5jb250YWluc1BvaW50PWZ1bmN0aW9uKHQpe3RoaXMud29ybGRUcmFuc2Zvcm0uYXBwbHlJbnZlcnNlKHQsUCk7Zm9yKHZhciBlPXRoaXMuZ3JhcGhpY3NEYXRhLHI9MDtyPGUubGVuZ3RoOysrcil7dmFyIG49ZVtyXTtpZihuLmZpbGwmJihuLnNoYXBlJiZuLnNoYXBlLmNvbnRhaW5zKFAueCxQLnkpKSl7dmFyIGk9ITE7aWYobi5ob2xlcylmb3IodmFyIG89MDtvPG4uaG9sZXMubGVuZ3RoO28rKyl7dmFyIHM9bi5ob2xlc1tvXTtpZihzLmNvbnRhaW5zKFAueCxQLnkpKXtpPSEwO2JyZWFrfX1pZighaSlyZXR1cm4hMH19cmV0dXJuITF9LGUucHJvdG90eXBlLnVwZGF0ZUxvY2FsQm91bmRzPWZ1bmN0aW9uKCl7dmFyIHQ9MS8wLGU9LTEvMCxyPTEvMCxuPS0xLzA7aWYodGhpcy5ncmFwaGljc0RhdGEubGVuZ3RoKWZvcih2YXIgaT0wLG89MCxzPTAsYT0wLHU9MCxoPTA7aDx0aGlzLmdyYXBoaWNzRGF0YS5sZW5ndGg7aCsrKXt2YXIgbD10aGlzLmdyYXBoaWNzRGF0YVtoXSxjPWwudHlwZSxkPWwubGluZVdpZHRoLGY9bC5saW5lQWxpZ25tZW50LHA9ZCpmO2lmKGk9bC5zaGFwZSxjPT09Xy5TSEFQRVMuUkVDVHx8Yz09PV8uU0hBUEVTLlJSRUMpbz1pLngtcCxzPWkueS1wLGE9aS53aWR0aCsyKnAsdT1pLmhlaWdodCsyKnAsdD1vPHQ/bzp0LGU9bythPmU/bythOmUscj1zPHI/czpyLG49cyt1Pm4/cyt1Om47ZWxzZSBpZihjPT09Xy5TSEFQRVMuQ0lSQylvPWkueCxzPWkueSxhPWkucmFkaXVzK3AsdT1pLnJhZGl1cytwLHQ9by1hPHQ/by1hOnQsZT1vK2E+ZT9vK2E6ZSxyPXMtdTxyP3MtdTpyLG49cyt1Pm4/cyt1Om47ZWxzZSBpZihjPT09Xy5TSEFQRVMuRUxJUClvPWkueCxzPWkueSxhPWkud2lkdGgrcCx1PWkuaGVpZ2h0K3AsdD1vLWE8dD9vLWE6dCxlPW8rYT5lP28rYTplLHI9cy11PHI/cy11OnIsbj1zK3U+bj9zK3U6bjtlbHNlIGZvcih2YXIgdj1pLnBvaW50cyxnPTAseT0wLG09MCxiPTAseD0wLFQ9MCx3PTAsRT0wLFM9MDtTKzI8di5sZW5ndGg7Uys9MilvPXZbU10scz12W1MrMV0sZz12W1MrMl0seT12W1MrM10sbT1NYXRoLmFicyhnLW8pLGI9TWF0aC5hYnMoeS1zKSx1PTIqcCwoYT1NYXRoLnNxcnQobSptK2IqYikpPDFlLTl8fCh4PSh1L2EqYittKS8yLFQ9KHUvYSptK2IpLzIsdz0oZytvKS8yLEU9KHkrcykvMix0PXcteDx0P3cteDp0LGU9dyt4PmU/dyt4OmUscj1FLVQ8cj9FLVQ6cixuPUUrVD5uP0UrVDpuKX1lbHNlIHQ9MCxlPTAscj0wLG49MDt2YXIgTz10aGlzLmJvdW5kc1BhZGRpbmc7dGhpcy5fbG9jYWxCb3VuZHMubWluWD10LU8sdGhpcy5fbG9jYWxCb3VuZHMubWF4WD1lK08sdGhpcy5fbG9jYWxCb3VuZHMubWluWT1yLU8sdGhpcy5fbG9jYWxCb3VuZHMubWF4WT1uK099LGUucHJvdG90eXBlLmRyYXdTaGFwZT1mdW5jdGlvbih0KXt0aGlzLmN1cnJlbnRQYXRoJiZ0aGlzLmN1cnJlbnRQYXRoLnNoYXBlLnBvaW50cy5sZW5ndGg8PTImJnRoaXMuZ3JhcGhpY3NEYXRhLnBvcCgpLHRoaXMuY3VycmVudFBhdGg9bnVsbDt2YXIgZT1uZXcgcC5kZWZhdWx0KHRoaXMubGluZVdpZHRoLHRoaXMubGluZUNvbG9yLHRoaXMubGluZUFscGhhLHRoaXMuZmlsbENvbG9yLHRoaXMuZmlsbEFscGhhLHRoaXMuZmlsbGluZyx0aGlzLm5hdGl2ZUxpbmVzLHQsdGhpcy5saW5lQWxpZ25tZW50KTtyZXR1cm4gdGhpcy5ncmFwaGljc0RhdGEucHVzaChlKSxlLnR5cGU9PT1fLlNIQVBFUy5QT0xZJiYoZS5zaGFwZS5jbG9zZWQ9ZS5zaGFwZS5jbG9zZWQsdGhpcy5jdXJyZW50UGF0aD1lKSx0aGlzLmRpcnR5KyssZX0sZS5wcm90b3R5cGUuZ2VuZXJhdGVDYW52YXNUZXh0dXJlPWZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXToxLHI9dGhpcy5nZXRMb2NhbEJvdW5kcygpLG49bC5kZWZhdWx0LmNyZWF0ZShyLndpZHRoLHIuaGVpZ2h0LHQsZSk7T3x8KE89bmV3IFMuZGVmYXVsdCksdGhpcy50cmFuc2Zvcm0udXBkYXRlTG9jYWxUcmFuc2Zvcm0oKSx0aGlzLnRyYW5zZm9ybS5sb2NhbFRyYW5zZm9ybS5jb3B5KE0pLE0uaW52ZXJ0KCksTS50eC09ci54LE0udHktPXIueSxPLnJlbmRlcih0aGlzLG4sITAsTSk7dmFyIGk9ZC5kZWZhdWx0LmZyb21DYW52YXMobi5iYXNlVGV4dHVyZS5fY2FudmFzUmVuZGVyVGFyZ2V0LmNhbnZhcyx0LFwiZ3JhcGhpY3NcIik7cmV0dXJuIGkuYmFzZVRleHR1cmUucmVzb2x1dGlvbj1lLGkuYmFzZVRleHR1cmUudXBkYXRlKCksaX0sZS5wcm90b3R5cGUuY2xvc2VQYXRoPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jdXJyZW50UGF0aDtyZXR1cm4gdCYmdC5zaGFwZSYmdC5zaGFwZS5jbG9zZSgpLHRoaXN9LGUucHJvdG90eXBlLmFkZEhvbGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdyYXBoaWNzRGF0YS5wb3AoKTtyZXR1cm4gdGhpcy5jdXJyZW50UGF0aD10aGlzLmdyYXBoaWNzRGF0YVt0aGlzLmdyYXBoaWNzRGF0YS5sZW5ndGgtMV0sdGhpcy5jdXJyZW50UGF0aC5hZGRIb2xlKHQuc2hhcGUpLHRoaXMuY3VycmVudFBhdGg9bnVsbCx0aGlzfSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKGUpe3QucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzLGUpO2Zvcih2YXIgcj0wO3I8dGhpcy5ncmFwaGljc0RhdGEubGVuZ3RoOysrcil0aGlzLmdyYXBoaWNzRGF0YVtyXS5kZXN0cm95KCk7Zm9yKHZhciBuIGluIHRoaXMuX3dlYkdMKWZvcih2YXIgaT0wO2k8dGhpcy5fd2ViR0xbbl0uZGF0YS5sZW5ndGg7KytpKXRoaXMuX3dlYkdMW25dLmRhdGFbaV0uZGVzdHJveSgpO3RoaXMuX3Nwcml0ZVJlY3QmJnRoaXMuX3Nwcml0ZVJlY3QuZGVzdHJveSgpLHRoaXMuZ3JhcGhpY3NEYXRhPW51bGwsdGhpcy5jdXJyZW50UGF0aD1udWxsLHRoaXMuX3dlYkdMPW51bGwsdGhpcy5fbG9jYWxCb3VuZHM9bnVsbH0sZX0odS5kZWZhdWx0KTtyLmRlZmF1bHQ9QSxBLl9TUFJJVEVfVEVYVFVSRT1udWxsLEEuQ1VSVkVTPXthZGFwdGl2ZTohMSxtYXhMZW5ndGg6MTAsbWluU2VnbWVudHM6OCxtYXhTZWdtZW50czoyMDQ4fX0se1wiLi4vY29uc3RcIjo0NixcIi4uL2Rpc3BsYXkvQm91bmRzXCI6NDcsXCIuLi9kaXNwbGF5L0NvbnRhaW5lclwiOjQ4LFwiLi4vbWF0aFwiOjcwLFwiLi4vcmVuZGVyZXJzL2NhbnZhcy9DYW52YXNSZW5kZXJlclwiOjc3LFwiLi4vc3ByaXRlcy9TcHJpdGVcIjoxMDIsXCIuLi90ZXh0dXJlcy9SZW5kZXJUZXh0dXJlXCI6MTEzLFwiLi4vdGV4dHVyZXMvVGV4dHVyZVwiOjExNSxcIi4uL3V0aWxzXCI6MTI1LFwiLi9HcmFwaGljc0RhdGFcIjo1NCxcIi4vdXRpbHMvYmV6aWVyQ3VydmVUb1wiOjU2fV0sNTQ6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1yLl9fZXNNb2R1bGU9ITA7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUscixpLG8scyxhLHUsaCxsKXtuKHRoaXMsdCksdGhpcy5saW5lV2lkdGg9ZSx0aGlzLmxpbmVBbGlnbm1lbnQ9bCx0aGlzLm5hdGl2ZUxpbmVzPXUsdGhpcy5saW5lQ29sb3I9cix0aGlzLmxpbmVBbHBoYT1pLHRoaXMuX2xpbmVUaW50PXIsdGhpcy5maWxsQ29sb3I9byx0aGlzLmZpbGxBbHBoYT1zLHRoaXMuX2ZpbGxUaW50PW8sdGhpcy5maWxsPWEsdGhpcy5ob2xlcz1bXSx0aGlzLnNoYXBlPWgsdGhpcy50eXBlPWgudHlwZX1yZXR1cm4gdC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHQodGhpcy5saW5lV2lkdGgsdGhpcy5saW5lQ29sb3IsdGhpcy5saW5lQWxwaGEsdGhpcy5maWxsQ29sb3IsdGhpcy5maWxsQWxwaGEsdGhpcy5maWxsLHRoaXMubmF0aXZlTGluZXMsdGhpcy5zaGFwZSx0aGlzLmxpbmVBbGlnbm1lbnQpfSx0LnByb3RvdHlwZS5hZGRIb2xlPWZ1bmN0aW9uKHQpe3RoaXMuaG9sZXMucHVzaCh0KX0sdC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuc2hhcGU9bnVsbCx0aGlzLmhvbGVzPW51bGx9LHR9KCk7ci5kZWZhdWx0PWl9LHt9XSw1NTpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfXIuX19lc01vZHVsZT0hMDt2YXIgaT10KFwiLi4vLi4vcmVuZGVyZXJzL2NhbnZhcy9DYW52YXNSZW5kZXJlclwiKSxvPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0oaSkscz10KFwiLi4vLi4vY29uc3RcIiksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7bih0aGlzLHQpLHRoaXMucmVuZGVyZXI9ZX1yZXR1cm4gdC5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucmVuZGVyZXIscj1lLmNvbnRleHQsbj10LndvcmxkQWxwaGEsaT10LnRyYW5zZm9ybS53b3JsZFRyYW5zZm9ybSxvPWUucmVzb2x1dGlvbjtyLnNldFRyYW5zZm9ybShpLmEqbyxpLmIqbyxpLmMqbyxpLmQqbyxpLnR4Km8saS50eSpvKSx0LmNhbnZhc1RpbnREaXJ0eT09PXQuZGlydHkmJnQuX3ByZXZUaW50PT09dC50aW50fHx0aGlzLnVwZGF0ZUdyYXBoaWNzVGludCh0KSxlLnNldEJsZW5kTW9kZSh0LmJsZW5kTW9kZSk7Zm9yKHZhciBhPTA7YTx0LmdyYXBoaWNzRGF0YS5sZW5ndGg7YSsrKXt2YXIgdT10LmdyYXBoaWNzRGF0YVthXSxoPXUuc2hhcGUsbD11Ll9maWxsVGludCxjPXUuX2xpbmVUaW50O2lmKHIubGluZVdpZHRoPXUubGluZVdpZHRoLHUudHlwZT09PXMuU0hBUEVTLlBPTFkpe3IuYmVnaW5QYXRoKCk7dmFyIGQ9aC5wb2ludHMsZj11LmhvbGVzLHA9dm9pZCAwLHY9dm9pZCAwLGc9dm9pZCAwLHk9dm9pZCAwO3IubW92ZVRvKGRbMF0sZFsxXSk7Zm9yKHZhciBtPTI7bTxkLmxlbmd0aDttKz0yKXIubGluZVRvKGRbbV0sZFttKzFdKTtpZihoLmNsb3NlZCYmci5jbG9zZVBhdGgoKSxmLmxlbmd0aD4wKXtwPTAsZz1kWzBdLHk9ZFsxXTtmb3IodmFyIF89MjtfKzI8ZC5sZW5ndGg7Xys9MilwKz0oZFtfXS1nKSooZFtfKzNdLXkpLShkW18rMl0tZykqKGRbXysxXS15KTtmb3IodmFyIGI9MDtiPGYubGVuZ3RoO2IrKylpZihkPWZbYl0ucG9pbnRzKXt2PTAsZz1kWzBdLHk9ZFsxXTtmb3IodmFyIHg9Mjt4KzI8ZC5sZW5ndGg7eCs9Mil2Kz0oZFt4XS1nKSooZFt4KzNdLXkpLShkW3grMl0tZykqKGRbeCsxXS15KTtpZih2KnA8MCl7ci5tb3ZlVG8oZFswXSxkWzFdKTtmb3IodmFyIFQ9MjtUPGQubGVuZ3RoO1QrPTIpci5saW5lVG8oZFtUXSxkW1QrMV0pfWVsc2V7ci5tb3ZlVG8oZFtkLmxlbmd0aC0yXSxkW2QubGVuZ3RoLTFdKTtmb3IodmFyIHc9ZC5sZW5ndGgtNDt3Pj0wO3ctPTIpci5saW5lVG8oZFt3XSxkW3crMV0pfWZbYl0uY2xvc2UmJnIuY2xvc2VQYXRoKCl9fXUuZmlsbCYmKHIuZ2xvYmFsQWxwaGE9dS5maWxsQWxwaGEqbixyLmZpbGxTdHlsZT1cIiNcIisoXCIwMDAwMFwiKygwfGwpLnRvU3RyaW5nKDE2KSkuc3Vic3RyKC02KSxyLmZpbGwoKSksdS5saW5lV2lkdGgmJihyLmdsb2JhbEFscGhhPXUubGluZUFscGhhKm4sci5zdHJva2VTdHlsZT1cIiNcIisoXCIwMDAwMFwiKygwfGMpLnRvU3RyaW5nKDE2KSkuc3Vic3RyKC02KSxyLnN0cm9rZSgpKX1lbHNlIGlmKHUudHlwZT09PXMuU0hBUEVTLlJFQ1QpKHUuZmlsbENvbG9yfHwwPT09dS5maWxsQ29sb3IpJiYoci5nbG9iYWxBbHBoYT11LmZpbGxBbHBoYSpuLHIuZmlsbFN0eWxlPVwiI1wiKyhcIjAwMDAwXCIrKDB8bCkudG9TdHJpbmcoMTYpKS5zdWJzdHIoLTYpLHIuZmlsbFJlY3QoaC54LGgueSxoLndpZHRoLGguaGVpZ2h0KSksdS5saW5lV2lkdGgmJihyLmdsb2JhbEFscGhhPXUubGluZUFscGhhKm4sci5zdHJva2VTdHlsZT1cIiNcIisoXCIwMDAwMFwiKygwfGMpLnRvU3RyaW5nKDE2KSkuc3Vic3RyKC02KSxyLnN0cm9rZVJlY3QoaC54LGgueSxoLndpZHRoLGguaGVpZ2h0KSk7ZWxzZSBpZih1LnR5cGU9PT1zLlNIQVBFUy5DSVJDKXIuYmVnaW5QYXRoKCksci5hcmMoaC54LGgueSxoLnJhZGl1cywwLDIqTWF0aC5QSSksci5jbG9zZVBhdGgoKSx1LmZpbGwmJihyLmdsb2JhbEFscGhhPXUuZmlsbEFscGhhKm4sci5maWxsU3R5bGU9XCIjXCIrKFwiMDAwMDBcIisoMHxsKS50b1N0cmluZygxNikpLnN1YnN0cigtNiksci5maWxsKCkpLHUubGluZVdpZHRoJiYoci5nbG9iYWxBbHBoYT11LmxpbmVBbHBoYSpuLHIuc3Ryb2tlU3R5bGU9XCIjXCIrKFwiMDAwMDBcIisoMHxjKS50b1N0cmluZygxNikpLnN1YnN0cigtNiksci5zdHJva2UoKSk7ZWxzZSBpZih1LnR5cGU9PT1zLlNIQVBFUy5FTElQKXt2YXIgRT0yKmgud2lkdGgsUz0yKmguaGVpZ2h0LE89aC54LUUvMixNPWgueS1TLzI7ci5iZWdpblBhdGgoKTt2YXIgUD1FLzIqLjU1MjI4NDgsQz1TLzIqLjU1MjI4NDgsUj1PK0UsQT1NK1MsST1PK0UvMixEPU0rUy8yO3IubW92ZVRvKE8sRCksci5iZXppZXJDdXJ2ZVRvKE8sRC1DLEktUCxNLEksTSksci5iZXppZXJDdXJ2ZVRvKEkrUCxNLFIsRC1DLFIsRCksci5iZXppZXJDdXJ2ZVRvKFIsRCtDLEkrUCxBLEksQSksci5iZXppZXJDdXJ2ZVRvKEktUCxBLE8sRCtDLE8sRCksci5jbG9zZVBhdGgoKSx1LmZpbGwmJihyLmdsb2JhbEFscGhhPXUuZmlsbEFscGhhKm4sci5maWxsU3R5bGU9XCIjXCIrKFwiMDAwMDBcIisoMHxsKS50b1N0cmluZygxNikpLnN1YnN0cigtNiksci5maWxsKCkpLHUubGluZVdpZHRoJiYoci5nbG9iYWxBbHBoYT11LmxpbmVBbHBoYSpuLHIuc3Ryb2tlU3R5bGU9XCIjXCIrKFwiMDAwMDBcIisoMHxjKS50b1N0cmluZygxNikpLnN1YnN0cigtNiksci5zdHJva2UoKSl9ZWxzZSBpZih1LnR5cGU9PT1zLlNIQVBFUy5SUkVDKXt2YXIgTD1oLngsTj1oLnksQj1oLndpZHRoLGs9aC5oZWlnaHQsRj1oLnJhZGl1cyxqPU1hdGgubWluKEIsaykvMnwwO0Y9Rj5qP2o6RixyLmJlZ2luUGF0aCgpLHIubW92ZVRvKEwsTitGKSxyLmxpbmVUbyhMLE4ray1GKSxyLnF1YWRyYXRpY0N1cnZlVG8oTCxOK2ssTCtGLE4rayksci5saW5lVG8oTCtCLUYsTitrKSxyLnF1YWRyYXRpY0N1cnZlVG8oTCtCLE4rayxMK0IsTitrLUYpLHIubGluZVRvKEwrQixOK0YpLHIucXVhZHJhdGljQ3VydmVUbyhMK0IsTixMK0ItRixOKSxyLmxpbmVUbyhMK0YsTiksci5xdWFkcmF0aWNDdXJ2ZVRvKEwsTixMLE4rRiksci5jbG9zZVBhdGgoKSwodS5maWxsQ29sb3J8fDA9PT11LmZpbGxDb2xvcikmJihyLmdsb2JhbEFscGhhPXUuZmlsbEFscGhhKm4sci5maWxsU3R5bGU9XCIjXCIrKFwiMDAwMDBcIisoMHxsKS50b1N0cmluZygxNikpLnN1YnN0cigtNiksci5maWxsKCkpLHUubGluZVdpZHRoJiYoci5nbG9iYWxBbHBoYT11LmxpbmVBbHBoYSpuLHIuc3Ryb2tlU3R5bGU9XCIjXCIrKFwiMDAwMDBcIisoMHxjKS50b1N0cmluZygxNikpLnN1YnN0cigtNiksci5zdHJva2UoKSl9fX0sdC5wcm90b3R5cGUudXBkYXRlR3JhcGhpY3NUaW50PWZ1bmN0aW9uKHQpe3QuX3ByZXZUaW50PXQudGludCx0LmNhbnZhc1RpbnREaXJ0eT10LmRpcnR5O2Zvcih2YXIgZT0odC50aW50Pj4xNiYyNTUpLzI1NSxyPSh0LnRpbnQ+PjgmMjU1KS8yNTUsbj0oMjU1JnQudGludCkvMjU1LGk9MDtpPHQuZ3JhcGhpY3NEYXRhLmxlbmd0aDsrK2kpe3ZhciBvPXQuZ3JhcGhpY3NEYXRhW2ldLHM9MHxvLmZpbGxDb2xvcixhPTB8by5saW5lQ29sb3I7by5fZmlsbFRpbnQ9KChzPj4xNiYyNTUpLzI1NSplKjI1NTw8MTYpKygocz4+OCYyNTUpLzI1NSpyKjI1NTw8OCkrKDI1NSZzKS8yNTUqbioyNTUsby5fbGluZVRpbnQ9KChhPj4xNiYyNTUpLzI1NSplKjI1NTw8MTYpKygoYT4+OCYyNTUpLzI1NSpyKjI1NTw8OCkrKDI1NSZhKS8yNTUqbioyNTV9fSx0LnByb3RvdHlwZS5yZW5kZXJQb2x5Z29uPWZ1bmN0aW9uKHQsZSxyKXtyLm1vdmVUbyh0WzBdLHRbMV0pO2Zvcih2YXIgbj0xO248dC5sZW5ndGgvMjsrK24pci5saW5lVG8odFsyKm5dLHRbMipuKzFdKTtlJiZyLmNsb3NlUGF0aCgpfSx0LnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5yZW5kZXJlcj1udWxsfSx0fSgpO3IuZGVmYXVsdD1hLG8uZGVmYXVsdC5yZWdpc3RlclBsdWdpbihcImdyYXBoaWNzXCIsYSl9LHtcIi4uLy4uL2NvbnN0XCI6NDYsXCIuLi8uLi9yZW5kZXJlcnMvY2FudmFzL0NhbnZhc1JlbmRlcmVyXCI6Nzd9XSw1NjpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlLHIsbixpLG8scyxhLHUpe3ZhciBoPWFyZ3VtZW50cy5sZW5ndGg+OSYmdm9pZCAwIT09YXJndW1lbnRzWzldP2FyZ3VtZW50c1s5XTpbXSxsPTAsYz0wLGQ9MCxmPTAscD0wO2gucHVzaCh0LGUpO2Zvcih2YXIgdj0xLGc9MDt2PD11OysrdilnPXYvdSxsPTEtZyxjPWwqbCxkPWMqbCxmPWcqZyxwPWYqZyxoLnB1c2goZCp0KzMqYypnKnIrMypsKmYqaStwKnMsZCplKzMqYypnKm4rMypsKmYqbytwKmEpO3JldHVybiBofXIuX19lc01vZHVsZT0hMCxyLmRlZmF1bHQ9bn0se31dLDU3OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIHModCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1yLl9fZXNNb2R1bGU9ITA7dmFyIGE9dChcIi4uLy4uL3V0aWxzXCIpLHU9dChcIi4uLy4uL2NvbnN0XCIpLGg9dChcIi4uLy4uL3JlbmRlcmVycy93ZWJnbC91dGlscy9PYmplY3RSZW5kZXJlclwiKSxsPW4oaCksYz10KFwiLi4vLi4vcmVuZGVyZXJzL3dlYmdsL1dlYkdMUmVuZGVyZXJcIiksZD1uKGMpLGY9dChcIi4vV2ViR0xHcmFwaGljc0RhdGFcIikscD1uKGYpLHY9dChcIi4vc2hhZGVycy9QcmltaXRpdmVTaGFkZXJcIiksZz1uKHYpLHk9dChcIi4vdXRpbHMvYnVpbGRQb2x5XCIpLG09bih5KSxfPXQoXCIuL3V0aWxzL2J1aWxkUmVjdGFuZ2xlXCIpLGI9bihfKSx4PXQoXCIuL3V0aWxzL2J1aWxkUm91bmRlZFJlY3RhbmdsZVwiKSxUPW4oeCksdz10KFwiLi91dGlscy9idWlsZENpcmNsZVwiKSxFPW4odyksUz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHIpe2kodGhpcyxlKTt2YXIgbj1vKHRoaXMsdC5jYWxsKHRoaXMscikpO3JldHVybiBuLmdyYXBoaWNzRGF0YVBvb2w9W10sbi5wcmltaXRpdmVTaGFkZXI9bnVsbCxuLmdsPXIuZ2wsbi5DT05URVhUX1VJRD0wLG59cmV0dXJuIHMoZSx0KSxlLnByb3RvdHlwZS5vbkNvbnRleHRDaGFuZ2U9ZnVuY3Rpb24oKXt0aGlzLmdsPXRoaXMucmVuZGVyZXIuZ2wsdGhpcy5DT05URVhUX1VJRD10aGlzLnJlbmRlcmVyLkNPTlRFWFRfVUlELHRoaXMucHJpbWl0aXZlU2hhZGVyPW5ldyBnLmRlZmF1bHQodGhpcy5nbCl9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtsLmRlZmF1bHQucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtmb3IodmFyIHQ9MDt0PHRoaXMuZ3JhcGhpY3NEYXRhUG9vbC5sZW5ndGg7Kyt0KXRoaXMuZ3JhcGhpY3NEYXRhUG9vbFt0XS5kZXN0cm95KCk7dGhpcy5ncmFwaGljc0RhdGFQb29sPW51bGx9LGUucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnJlbmRlcmVyLHI9ZS5nbCxuPXZvaWQgMCxpPXQuX3dlYkdMW3RoaXMuQ09OVEVYVF9VSURdO2kmJnQuZGlydHk9PT1pLmRpcnR5fHwodGhpcy51cGRhdGVHcmFwaGljcyh0KSxpPXQuX3dlYkdMW3RoaXMuQ09OVEVYVF9VSURdKTt2YXIgbz10aGlzLnByaW1pdGl2ZVNoYWRlcjtlLmJpbmRTaGFkZXIobyksZS5zdGF0ZS5zZXRCbGVuZE1vZGUodC5ibGVuZE1vZGUpO2Zvcih2YXIgcz0wLHU9aS5kYXRhLmxlbmd0aDtzPHU7cysrKXtuPWkuZGF0YVtzXTt2YXIgaD1uLnNoYWRlcjtlLmJpbmRTaGFkZXIoaCksaC51bmlmb3Jtcy50cmFuc2xhdGlvbk1hdHJpeD10LnRyYW5zZm9ybS53b3JsZFRyYW5zZm9ybS50b0FycmF5KCEwKSxoLnVuaWZvcm1zLnRpbnQ9KDAsYS5oZXgycmdiKSh0LnRpbnQpLGgudW5pZm9ybXMuYWxwaGE9dC53b3JsZEFscGhhLGUuYmluZFZhbyhuLnZhbyksbi5uYXRpdmVMaW5lcz9yLmRyYXdBcnJheXMoci5MSU5FUywwLG4ucG9pbnRzLmxlbmd0aC82KTpuLnZhby5kcmF3KHIuVFJJQU5HTEVfU1RSSVAsbi5pbmRpY2VzLmxlbmd0aCl9fSxlLnByb3RvdHlwZS51cGRhdGVHcmFwaGljcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnJlbmRlcmVyLmdsLHI9dC5fd2ViR0xbdGhpcy5DT05URVhUX1VJRF07aWYocnx8KHI9dC5fd2ViR0xbdGhpcy5DT05URVhUX1VJRF09e2xhc3RJbmRleDowLGRhdGE6W10sZ2w6ZSxjbGVhckRpcnR5Oi0xLGRpcnR5Oi0xfSksci5kaXJ0eT10LmRpcnR5LHQuY2xlYXJEaXJ0eSE9PXIuY2xlYXJEaXJ0eSl7ci5jbGVhckRpcnR5PXQuY2xlYXJEaXJ0eTtmb3IodmFyIG49MDtuPHIuZGF0YS5sZW5ndGg7bisrKXRoaXMuZ3JhcGhpY3NEYXRhUG9vbC5wdXNoKHIuZGF0YVtuXSk7ci5kYXRhLmxlbmd0aD0wLHIubGFzdEluZGV4PTB9Zm9yKHZhciBpPXZvaWQgMCxvPXZvaWQgMCxzPXIubGFzdEluZGV4O3M8dC5ncmFwaGljc0RhdGEubGVuZ3RoO3MrKyl7dmFyIGE9dC5ncmFwaGljc0RhdGFbc107aT10aGlzLmdldFdlYkdMRGF0YShyLDApLGEubmF0aXZlTGluZXMmJmEubGluZVdpZHRoJiYobz10aGlzLmdldFdlYkdMRGF0YShyLDAsITApLHIubGFzdEluZGV4KyspLGEudHlwZT09PXUuU0hBUEVTLlBPTFkmJigwLG0uZGVmYXVsdCkoYSxpLG8pLGEudHlwZT09PXUuU0hBUEVTLlJFQ1Q/KDAsYi5kZWZhdWx0KShhLGksbyk6YS50eXBlPT09dS5TSEFQRVMuQ0lSQ3x8YS50eXBlPT09dS5TSEFQRVMuRUxJUD8oMCxFLmRlZmF1bHQpKGEsaSxvKTphLnR5cGU9PT11LlNIQVBFUy5SUkVDJiYoMCxULmRlZmF1bHQpKGEsaSxvKSxyLmxhc3RJbmRleCsrfXRoaXMucmVuZGVyZXIuYmluZFZhbyhudWxsKTtmb3IodmFyIGg9MDtoPHIuZGF0YS5sZW5ndGg7aCsrKWk9ci5kYXRhW2hdLGkuZGlydHkmJmkudXBsb2FkKCl9LGUucHJvdG90eXBlLmdldFdlYkdMRGF0YT1mdW5jdGlvbih0LGUscil7dmFyIG49dC5kYXRhW3QuZGF0YS5sZW5ndGgtMV07cmV0dXJuKCFufHxuLm5hdGl2ZUxpbmVzIT09cnx8bi5wb2ludHMubGVuZ3RoPjMyZTQpJiYobj10aGlzLmdyYXBoaWNzRGF0YVBvb2wucG9wKCl8fG5ldyBwLmRlZmF1bHQodGhpcy5yZW5kZXJlci5nbCx0aGlzLnByaW1pdGl2ZVNoYWRlcix0aGlzLnJlbmRlcmVyLnN0YXRlLmF0dHJpYnNTdGF0ZSksbi5uYXRpdmVMaW5lcz1yLG4ucmVzZXQoZSksdC5kYXRhLnB1c2gobikpLG4uZGlydHk9ITAsbn0sZX0obC5kZWZhdWx0KTtyLmRlZmF1bHQ9UyxkLmRlZmF1bHQucmVnaXN0ZXJQbHVnaW4oXCJncmFwaGljc1wiLFMpfSx7XCIuLi8uLi9jb25zdFwiOjQ2LFwiLi4vLi4vcmVuZGVyZXJzL3dlYmdsL1dlYkdMUmVuZGVyZXJcIjo4NCxcIi4uLy4uL3JlbmRlcmVycy93ZWJnbC91dGlscy9PYmplY3RSZW5kZXJlclwiOjk0LFwiLi4vLi4vdXRpbHNcIjoxMjUsXCIuL1dlYkdMR3JhcGhpY3NEYXRhXCI6NTgsXCIuL3NoYWRlcnMvUHJpbWl0aXZlU2hhZGVyXCI6NTksXCIuL3V0aWxzL2J1aWxkQ2lyY2xlXCI6NjAsXCIuL3V0aWxzL2J1aWxkUG9seVwiOjYyLFwiLi91dGlscy9idWlsZFJlY3RhbmdsZVwiOjYzLFwiLi91dGlscy9idWlsZFJvdW5kZWRSZWN0YW5nbGVcIjo2NH1dLDU4OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ci5fX2VzTW9kdWxlPSEwO3ZhciBpPXQoXCJwaXhpLWdsLWNvcmVcIiksbz1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KGkpLHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUscixpKXtuKHRoaXMsdCksdGhpcy5nbD1lLHRoaXMuY29sb3I9WzAsMCwwXSx0aGlzLnBvaW50cz1bXSx0aGlzLmluZGljZXM9W10sdGhpcy5idWZmZXI9by5kZWZhdWx0LkdMQnVmZmVyLmNyZWF0ZVZlcnRleEJ1ZmZlcihlKSx0aGlzLmluZGV4QnVmZmVyPW8uZGVmYXVsdC5HTEJ1ZmZlci5jcmVhdGVJbmRleEJ1ZmZlcihlKSx0aGlzLmRpcnR5PSEwLHRoaXMubmF0aXZlTGluZXM9ITEsdGhpcy5nbFBvaW50cz1udWxsLHRoaXMuZ2xJbmRpY2VzPW51bGwsdGhpcy5zaGFkZXI9cix0aGlzLnZhbz1uZXcgby5kZWZhdWx0LlZlcnRleEFycmF5T2JqZWN0KGUsaSkuYWRkSW5kZXgodGhpcy5pbmRleEJ1ZmZlcikuYWRkQXR0cmlidXRlKHRoaXMuYnVmZmVyLHIuYXR0cmlidXRlcy5hVmVydGV4UG9zaXRpb24sZS5GTE9BVCwhMSwyNCwwKS5hZGRBdHRyaWJ1dGUodGhpcy5idWZmZXIsci5hdHRyaWJ1dGVzLmFDb2xvcixlLkZMT0FULCExLDI0LDgpfXJldHVybiB0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMucG9pbnRzLmxlbmd0aD0wLHRoaXMuaW5kaWNlcy5sZW5ndGg9MH0sdC5wcm90b3R5cGUudXBsb2FkPWZ1bmN0aW9uKCl7dGhpcy5nbFBvaW50cz1uZXcgRmxvYXQzMkFycmF5KHRoaXMucG9pbnRzKSx0aGlzLmJ1ZmZlci51cGxvYWQodGhpcy5nbFBvaW50cyksdGhpcy5nbEluZGljZXM9bmV3IFVpbnQxNkFycmF5KHRoaXMuaW5kaWNlcyksdGhpcy5pbmRleEJ1ZmZlci51cGxvYWQodGhpcy5nbEluZGljZXMpLHRoaXMuZGlydHk9ITF9LHQucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmNvbG9yPW51bGwsdGhpcy5wb2ludHM9bnVsbCx0aGlzLmluZGljZXM9bnVsbCx0aGlzLnZhby5kZXN0cm95KCksdGhpcy5idWZmZXIuZGVzdHJveSgpLHRoaXMuaW5kZXhCdWZmZXIuZGVzdHJveSgpLHRoaXMuZ2w9bnVsbCx0aGlzLmJ1ZmZlcj1udWxsLHRoaXMuaW5kZXhCdWZmZXI9bnVsbCx0aGlzLmdsUG9pbnRzPW51bGwsdGhpcy5nbEluZGljZXM9bnVsbH0sdH0oKTtyLmRlZmF1bHQ9c30se1wicGl4aS1nbC1jb3JlXCI6MTV9XSw1OTpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkodCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBvKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9ci5fX2VzTW9kdWxlPSEwO3ZhciBzPXQoXCIuLi8uLi8uLi9TaGFkZXJcIiksYT1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KHMpLHU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShyKXtyZXR1cm4gbih0aGlzLGUpLGkodGhpcyx0LmNhbGwodGhpcyxyLFtcImF0dHJpYnV0ZSB2ZWMyIGFWZXJ0ZXhQb3NpdGlvbjtcIixcImF0dHJpYnV0ZSB2ZWM0IGFDb2xvcjtcIixcInVuaWZvcm0gbWF0MyB0cmFuc2xhdGlvbk1hdHJpeDtcIixcInVuaWZvcm0gbWF0MyBwcm9qZWN0aW9uTWF0cml4O1wiLFwidW5pZm9ybSBmbG9hdCBhbHBoYTtcIixcInVuaWZvcm0gdmVjMyB0aW50O1wiLFwidmFyeWluZyB2ZWM0IHZDb2xvcjtcIixcInZvaWQgbWFpbih2b2lkKXtcIixcIiAgIGdsX1Bvc2l0aW9uID0gdmVjNCgocHJvamVjdGlvbk1hdHJpeCAqIHRyYW5zbGF0aW9uTWF0cml4ICogdmVjMyhhVmVydGV4UG9zaXRpb24sIDEuMCkpLnh5LCAwLjAsIDEuMCk7XCIsXCIgICB2Q29sb3IgPSBhQ29sb3IgKiB2ZWM0KHRpbnQgKiBhbHBoYSwgYWxwaGEpO1wiLFwifVwiXS5qb2luKFwiXFxuXCIpLFtcInZhcnlpbmcgdmVjNCB2Q29sb3I7XCIsXCJ2b2lkIG1haW4odm9pZCl7XCIsXCIgICBnbF9GcmFnQ29sb3IgPSB2Q29sb3I7XCIsXCJ9XCJdLmpvaW4oXCJcXG5cIikpKX1yZXR1cm4gbyhlLHQpLGV9KGEuZGVmYXVsdCk7ci5kZWZhdWx0PXV9LHtcIi4uLy4uLy4uL1NoYWRlclwiOjQ0fV0sNjA6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSxyKXt2YXIgbj10LnNoYXBlLGk9bi54LHU9bi55LGg9dm9pZCAwLGw9dm9pZCAwO2lmKHQudHlwZT09PXMuU0hBUEVTLkNJUkM/KGg9bi5yYWRpdXMsbD1uLnJhZGl1cyk6KGg9bi53aWR0aCxsPW4uaGVpZ2h0KSwwIT09aCYmMCE9PWwpe3ZhciBjPU1hdGguZmxvb3IoMzAqTWF0aC5zcXJ0KG4ucmFkaXVzKSl8fE1hdGguZmxvb3IoMTUqTWF0aC5zcXJ0KG4ud2lkdGgrbi5oZWlnaHQpKSxkPTIqTWF0aC5QSS9jO2lmKHQuZmlsbCl7dmFyIGY9KDAsYS5oZXgycmdiKSh0LmZpbGxDb2xvcikscD10LmZpbGxBbHBoYSx2PWZbMF0qcCxnPWZbMV0qcCx5PWZbMl0qcCxtPWUucG9pbnRzLF89ZS5pbmRpY2VzLGI9bS5sZW5ndGgvNjtfLnB1c2goYik7Zm9yKHZhciB4PTA7eDxjKzE7eCsrKW0ucHVzaChpLHUsdixnLHkscCksbS5wdXNoKGkrTWF0aC5zaW4oZCp4KSpoLHUrTWF0aC5jb3MoZCp4KSpsLHYsZyx5LHApLF8ucHVzaChiKyssYisrKTtfLnB1c2goYi0xKX1pZih0LmxpbmVXaWR0aCl7dmFyIFQ9dC5wb2ludHM7dC5wb2ludHM9W107Zm9yKHZhciB3PTA7dzxjO3crKyl0LnBvaW50cy5wdXNoKGkrTWF0aC5zaW4oZCotdykqaCx1K01hdGguY29zKGQqLXcpKmwpO3QucG9pbnRzLnB1c2godC5wb2ludHNbMF0sdC5wb2ludHNbMV0pLCgwLG8uZGVmYXVsdCkodCxlLHIpLHQucG9pbnRzPVR9fX1yLl9fZXNNb2R1bGU9ITAsci5kZWZhdWx0PW47dmFyIGk9dChcIi4vYnVpbGRMaW5lXCIpLG89ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShpKSxzPXQoXCIuLi8uLi8uLi9jb25zdFwiKSxhPXQoXCIuLi8uLi8uLi91dGlsc1wiKX0se1wiLi4vLi4vLi4vY29uc3RcIjo0NixcIi4uLy4uLy4uL3V0aWxzXCI6MTI1LFwiLi9idWlsZExpbmVcIjo2MX1dLDYxOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe3ZhciByPXQucG9pbnRzO2lmKDAhPT1yLmxlbmd0aCl7dmFyIG49bmV3IG8uUG9pbnQoclswXSxyWzFdKSxpPW5ldyBvLlBvaW50KHJbci5sZW5ndGgtMl0scltyLmxlbmd0aC0xXSk7aWYobi54PT09aS54JiZuLnk9PT1pLnkpe3I9ci5zbGljZSgpLHIucG9wKCksci5wb3AoKSxpPW5ldyBvLlBvaW50KHJbci5sZW5ndGgtMl0scltyLmxlbmd0aC0xXSk7dmFyIGE9aS54Ky41KihuLngtaS54KSx1PWkueSsuNSoobi55LWkueSk7ci51bnNoaWZ0KGEsdSksci5wdXNoKGEsdSl9dmFyIGg9ZS5wb2ludHMsbD1lLmluZGljZXMsYz1yLmxlbmd0aC8yLGQ9ci5sZW5ndGgsZj1oLmxlbmd0aC82LHA9dC5saW5lV2lkdGgvMix2PSgwLHMuaGV4MnJnYikodC5saW5lQ29sb3IpLGc9dC5saW5lQWxwaGEseT12WzBdKmcsbT12WzFdKmcsXz12WzJdKmcsYj1yWzBdLHg9clsxXSxUPXJbMl0sdz1yWzNdLEU9MCxTPTAsTz0tKHgtdyksTT1iLVQsUD0wLEM9MCxSPTAsQT0wLEk9TWF0aC5zcXJ0KE8qTytNKk0pO08vPUksTS89SSxPKj1wLE0qPXA7dmFyIEQ9dC5saW5lQWxpZ25tZW50LEw9MiooMS1EKSxOPTIqRDtoLnB1c2goYi1PKkwseC1NKkwseSxtLF8sZyksaC5wdXNoKGIrTypOLHgrTSpOLHksbSxfLGcpO2Zvcih2YXIgQj0xO0I8Yy0xOysrQil7Yj1yWzIqKEItMSldLHg9clsyKihCLTEpKzFdLFQ9clsyKkJdLHc9clsyKkIrMV0sRT1yWzIqKEIrMSldLFM9clsyKihCKzEpKzFdLE89LSh4LXcpLE09Yi1ULEk9TWF0aC5zcXJ0KE8qTytNKk0pLE8vPUksTS89SSxPKj1wLE0qPXAsUD0tKHctUyksQz1ULUUsST1NYXRoLnNxcnQoUCpQK0MqQyksUC89SSxDLz1JLFAqPXAsQyo9cDt2YXIgaz0tTSt4LSgtTSt3KSxGPS1PK1QtKC1PK2IpLGo9KC1PK2IpKigtTSt3KS0oLU8rVCkqKC1NK3gpLFU9LUMrUy0oLUMrdyksWD0tUCtULSgtUCtFKSxHPSgtUCtFKSooLUMrdyktKC1QK1QpKigtQytTKSxXPWsqWC1VKkY7aWYoTWF0aC5hYnMoVyk8LjEpVys9MTAuMSxoLnB1c2goVC1PKkwsdy1NKkwseSxtLF8sZyksXG5oLnB1c2goVCtPKk4sdytNKk4seSxtLF8sZyk7ZWxzZXt2YXIgSD0oRipHLVgqaikvVyxZPShVKmotaypHKS9XOyhILVQpKihILVQpKyhZLXcpKihZLXcpPjE5NipwKnA/KFI9Ty1QLEE9TS1DLEk9TWF0aC5zcXJ0KFIqUitBKkEpLFIvPUksQS89SSxSKj1wLEEqPXAsaC5wdXNoKFQtUipMLHctQSpMKSxoLnB1c2goeSxtLF8sZyksaC5wdXNoKFQrUipOLHcrQSpOKSxoLnB1c2goeSxtLF8sZyksaC5wdXNoKFQtUipOKkwsdy1BKkwpLGgucHVzaCh5LG0sXyxnKSxkKyspOihoLnB1c2goVCsoSC1UKSpMLHcrKFktdykqTCksaC5wdXNoKHksbSxfLGcpLGgucHVzaChULShILVQpKk4sdy0oWS13KSpOKSxoLnB1c2goeSxtLF8sZykpfX1iPXJbMiooYy0yKV0seD1yWzIqKGMtMikrMV0sVD1yWzIqKGMtMSldLHc9clsyKihjLTEpKzFdLE89LSh4LXcpLE09Yi1ULEk9TWF0aC5zcXJ0KE8qTytNKk0pLE8vPUksTS89SSxPKj1wLE0qPXAsaC5wdXNoKFQtTypMLHctTSpMKSxoLnB1c2goeSxtLF8sZyksaC5wdXNoKFQrTypOLHcrTSpOKSxoLnB1c2goeSxtLF8sZyksbC5wdXNoKGYpO2Zvcih2YXIgVj0wO1Y8ZDsrK1YpbC5wdXNoKGYrKyk7bC5wdXNoKGYtMSl9fWZ1bmN0aW9uIGkodCxlKXt2YXIgcj0wLG49dC5wb2ludHM7aWYoMCE9PW4ubGVuZ3RoKXt2YXIgaT1lLnBvaW50cyxvPW4ubGVuZ3RoLzIsYT0oMCxzLmhleDJyZ2IpKHQubGluZUNvbG9yKSx1PXQubGluZUFscGhhLGg9YVswXSp1LGw9YVsxXSp1LGM9YVsyXSp1O2ZvcihyPTE7cjxvO3IrKyl7dmFyIGQ9blsyKihyLTEpXSxmPW5bMiooci0xKSsxXSxwPW5bMipyXSx2PW5bMipyKzFdO2kucHVzaChkLGYpLGkucHVzaChoLGwsYyx1KSxpLnB1c2gocCx2KSxpLnB1c2goaCxsLGMsdSl9fX1yLl9fZXNNb2R1bGU9ITAsci5kZWZhdWx0PWZ1bmN0aW9uKHQsZSxyKXt0Lm5hdGl2ZUxpbmVzP2kodCxyKTpuKHQsZSl9O3ZhciBvPXQoXCIuLi8uLi8uLi9tYXRoXCIpLHM9dChcIi4uLy4uLy4uL3V0aWxzXCIpfSx7XCIuLi8uLi8uLi9tYXRoXCI6NzAsXCIuLi8uLi8uLi91dGlsc1wiOjEyNX1dLDYyOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gaSh0LGUscil7dC5wb2ludHM9dC5zaGFwZS5wb2ludHMuc2xpY2UoKTt2YXIgbj10LnBvaW50cztpZih0LmZpbGwmJm4ubGVuZ3RoPj02KXtmb3IodmFyIGk9W10sbz10LmhvbGVzLHU9MDt1PG8ubGVuZ3RoO3UrKyl7dmFyIGw9b1t1XTtpLnB1c2gobi5sZW5ndGgvMiksbj1uLmNvbmNhdChsLnBvaW50cyl9dmFyIGM9ZS5wb2ludHMsZD1lLmluZGljZXMsZj1uLmxlbmd0aC8yLHA9KDAsYS5oZXgycmdiKSh0LmZpbGxDb2xvciksdj10LmZpbGxBbHBoYSxnPXBbMF0qdix5PXBbMV0qdixtPXBbMl0qdixfPSgwLGguZGVmYXVsdCkobixpLDIpO2lmKCFfKXJldHVybjtmb3IodmFyIGI9Yy5sZW5ndGgvNix4PTA7eDxfLmxlbmd0aDt4Kz0zKWQucHVzaChfW3hdK2IpLGQucHVzaChfW3hdK2IpLGQucHVzaChfW3grMV0rYiksZC5wdXNoKF9beCsyXStiKSxkLnB1c2goX1t4KzJdK2IpO2Zvcih2YXIgVD0wO1Q8ZjtUKyspYy5wdXNoKG5bMipUXSxuWzIqVCsxXSxnLHksbSx2KX10LmxpbmVXaWR0aD4wJiYoMCxzLmRlZmF1bHQpKHQsZSxyKX1yLl9fZXNNb2R1bGU9ITAsci5kZWZhdWx0PWk7dmFyIG89dChcIi4vYnVpbGRMaW5lXCIpLHM9bihvKSxhPXQoXCIuLi8uLi8uLi91dGlsc1wiKSx1PXQoXCJlYXJjdXRcIiksaD1uKHUpfSx7XCIuLi8uLi8uLi91dGlsc1wiOjEyNSxcIi4vYnVpbGRMaW5lXCI6NjEsZWFyY3V0OjJ9XSw2MzpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlLHIpe3ZhciBuPXQuc2hhcGUsaT1uLngsYT1uLnksdT1uLndpZHRoLGg9bi5oZWlnaHQ7aWYodC5maWxsKXt2YXIgbD0oMCxzLmhleDJyZ2IpKHQuZmlsbENvbG9yKSxjPXQuZmlsbEFscGhhLGQ9bFswXSpjLGY9bFsxXSpjLHA9bFsyXSpjLHY9ZS5wb2ludHMsZz1lLmluZGljZXMseT12Lmxlbmd0aC82O3YucHVzaChpLGEpLHYucHVzaChkLGYscCxjKSx2LnB1c2goaSt1LGEpLHYucHVzaChkLGYscCxjKSx2LnB1c2goaSxhK2gpLHYucHVzaChkLGYscCxjKSx2LnB1c2goaSt1LGEraCksdi5wdXNoKGQsZixwLGMpLGcucHVzaCh5LHkseSsxLHkrMix5KzMseSszKX1pZih0LmxpbmVXaWR0aCl7dmFyIG09dC5wb2ludHM7dC5wb2ludHM9W2ksYSxpK3UsYSxpK3UsYStoLGksYStoLGksYV0sKDAsby5kZWZhdWx0KSh0LGUsciksdC5wb2ludHM9bX19ci5fX2VzTW9kdWxlPSEwLHIuZGVmYXVsdD1uO3ZhciBpPXQoXCIuL2J1aWxkTGluZVwiKSxvPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0oaSkscz10KFwiLi4vLi4vLi4vdXRpbHNcIil9LHtcIi4uLy4uLy4uL3V0aWxzXCI6MTI1LFwiLi9idWlsZExpbmVcIjo2MX1dLDY0OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gaSh0LGUscil7dmFyIG49dC5zaGFwZSxpPW4ueCxvPW4ueSxhPW4ud2lkdGgsaD1uLmhlaWdodCxkPW4ucmFkaXVzLGY9W107aWYoZi5wdXNoKGkrZCxvKSxzKGkrYS1kLG8saSthLG8saSthLG8rZCxmKSxzKGkrYSxvK2gtZCxpK2EsbytoLGkrYS1kLG8raCxmKSxzKGkrZCxvK2gsaSxvK2gsaSxvK2gtZCxmKSxzKGksbytkLGksbyxpK2QrMWUtMTAsbyxmKSx0LmZpbGwpe2Zvcih2YXIgcD0oMCxjLmhleDJyZ2IpKHQuZmlsbENvbG9yKSx2PXQuZmlsbEFscGhhLGc9cFswXSp2LHk9cFsxXSp2LG09cFsyXSp2LF89ZS5wb2ludHMsYj1lLmluZGljZXMseD1fLmxlbmd0aC82LFQ9KDAsdS5kZWZhdWx0KShmLG51bGwsMiksdz0wLEU9VC5sZW5ndGg7dzxFO3crPTMpYi5wdXNoKFRbd10reCksYi5wdXNoKFRbd10reCksYi5wdXNoKFRbdysxXSt4KSxiLnB1c2goVFt3KzJdK3gpLGIucHVzaChUW3crMl0reCk7Zm9yKHZhciBTPTAsTz1mLmxlbmd0aDtTPE87UysrKV8ucHVzaChmW1NdLGZbKytTXSxnLHksbSx2KX1pZih0LmxpbmVXaWR0aCl7dmFyIE09dC5wb2ludHM7dC5wb2ludHM9ZiwoMCxsLmRlZmF1bHQpKHQsZSxyKSx0LnBvaW50cz1NfX1mdW5jdGlvbiBvKHQsZSxyKXtyZXR1cm4gdCsoZS10KSpyfWZ1bmN0aW9uIHModCxlLHIsbixpLHMpe2Zvcih2YXIgYT1hcmd1bWVudHMubGVuZ3RoPjYmJnZvaWQgMCE9PWFyZ3VtZW50c1s2XT9hcmd1bWVudHNbNl06W10sdT1hLGg9MCxsPTAsYz0wLGQ9MCxmPTAscD0wLHY9MCxnPTA7djw9MjA7Kyt2KWc9di8yMCxoPW8odCxyLGcpLGw9byhlLG4sZyksYz1vKHIsaSxnKSxkPW8obixzLGcpLGY9byhoLGMsZykscD1vKGwsZCxnKSx1LnB1c2goZixwKTtyZXR1cm4gdX1yLl9fZXNNb2R1bGU9ITAsci5kZWZhdWx0PWk7dmFyIGE9dChcImVhcmN1dFwiKSx1PW4oYSksaD10KFwiLi9idWlsZExpbmVcIiksbD1uKGgpLGM9dChcIi4uLy4uLy4uL3V0aWxzXCIpfSx7XCIuLi8uLi8uLi91dGlsc1wiOjEyNSxcIi4vYnVpbGRMaW5lXCI6NjEsZWFyY3V0OjJ9XSw2NTpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfWZ1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fXIuX19lc01vZHVsZT0hMCxyLmF1dG9EZXRlY3RSZW5kZXJlcj1yLkFwcGxpY2F0aW9uPXIuRmlsdGVyPXIuU3ByaXRlTWFza0ZpbHRlcj1yLlF1YWQ9ci5SZW5kZXJUYXJnZXQ9ci5PYmplY3RSZW5kZXJlcj1yLldlYkdMTWFuYWdlcj1yLlNoYWRlcj1yLkNhbnZhc1JlbmRlclRhcmdldD1yLlRleHR1cmVVdnM9ci5WaWRlb0Jhc2VUZXh0dXJlPXIuQmFzZVJlbmRlclRleHR1cmU9ci5SZW5kZXJUZXh0dXJlPXIuQmFzZVRleHR1cmU9ci5UZXh0dXJlTWF0cml4PXIuVGV4dHVyZT1yLlNwcml0ZXNoZWV0PXIuQ2FudmFzR3JhcGhpY3NSZW5kZXJlcj1yLkdyYXBoaWNzUmVuZGVyZXI9ci5HcmFwaGljc0RhdGE9ci5HcmFwaGljcz1yLlRleHRNZXRyaWNzPXIuVGV4dFN0eWxlPXIuVGV4dD1yLlNwcml0ZVJlbmRlcmVyPXIuQ2FudmFzVGludGVyPXIuQ2FudmFzU3ByaXRlUmVuZGVyZXI9ci5TcHJpdGU9ci5UcmFuc2Zvcm1CYXNlPXIuVHJhbnNmb3JtU3RhdGljPXIuVHJhbnNmb3JtPXIuQ29udGFpbmVyPXIuRGlzcGxheU9iamVjdD1yLkJvdW5kcz1yLmdsQ29yZT1yLldlYkdMUmVuZGVyZXI9ci5DYW52YXNSZW5kZXJlcj1yLnRpY2tlcj1yLnV0aWxzPXIuc2V0dGluZ3M9dm9pZCAwO3ZhciBvPXQoXCIuL2NvbnN0XCIpO09iamVjdC5rZXlzKG8pLmZvckVhY2goZnVuY3Rpb24odCl7XCJkZWZhdWx0XCIhPT10JiZcIl9fZXNNb2R1bGVcIiE9PXQmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLHQse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG9bdF19fSl9KTt2YXIgcz10KFwiLi9tYXRoXCIpO09iamVjdC5rZXlzKHMpLmZvckVhY2goZnVuY3Rpb24odCl7XCJkZWZhdWx0XCIhPT10JiZcIl9fZXNNb2R1bGVcIiE9PXQmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLHQse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHNbdF19fSl9KTt2YXIgYT10KFwicGl4aS1nbC1jb3JlXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiZ2xDb3JlXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGkoYSkuZGVmYXVsdH19KTt2YXIgdT10KFwiLi9kaXNwbGF5L0JvdW5kc1wiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkJvdW5kc1wiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpKHUpLmRlZmF1bHR9fSk7dmFyIGg9dChcIi4vZGlzcGxheS9EaXNwbGF5T2JqZWN0XCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiRGlzcGxheU9iamVjdFwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpKGgpLmRlZmF1bHR9fSk7dmFyIGw9dChcIi4vZGlzcGxheS9Db250YWluZXJcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJDb250YWluZXJcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaShsKS5kZWZhdWx0fX0pO3ZhciBjPXQoXCIuL2Rpc3BsYXkvVHJhbnNmb3JtXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiVHJhbnNmb3JtXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGkoYykuZGVmYXVsdH19KTt2YXIgZD10KFwiLi9kaXNwbGF5L1RyYW5zZm9ybVN0YXRpY1wiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlRyYW5zZm9ybVN0YXRpY1wiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpKGQpLmRlZmF1bHR9fSk7dmFyIGY9dChcIi4vZGlzcGxheS9UcmFuc2Zvcm1CYXNlXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiVHJhbnNmb3JtQmFzZVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpKGYpLmRlZmF1bHR9fSk7dmFyIHA9dChcIi4vc3ByaXRlcy9TcHJpdGVcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJTcHJpdGVcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaShwKS5kZWZhdWx0fX0pO3ZhciB2PXQoXCIuL3Nwcml0ZXMvY2FudmFzL0NhbnZhc1Nwcml0ZVJlbmRlcmVyXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiQ2FudmFzU3ByaXRlUmVuZGVyZXJcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaSh2KS5kZWZhdWx0fX0pO3ZhciBnPXQoXCIuL3Nwcml0ZXMvY2FudmFzL0NhbnZhc1RpbnRlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkNhbnZhc1RpbnRlclwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpKGcpLmRlZmF1bHR9fSk7dmFyIHk9dChcIi4vc3ByaXRlcy93ZWJnbC9TcHJpdGVSZW5kZXJlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlNwcml0ZVJlbmRlcmVyXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGkoeSkuZGVmYXVsdH19KTt2YXIgbT10KFwiLi90ZXh0L1RleHRcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJUZXh0XCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGkobSkuZGVmYXVsdH19KTt2YXIgXz10KFwiLi90ZXh0L1RleHRTdHlsZVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlRleHRTdHlsZVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpKF8pLmRlZmF1bHR9fSk7dmFyIGI9dChcIi4vdGV4dC9UZXh0TWV0cmljc1wiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlRleHRNZXRyaWNzXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGkoYikuZGVmYXVsdH19KTt2YXIgeD10KFwiLi9ncmFwaGljcy9HcmFwaGljc1wiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkdyYXBoaWNzXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGkoeCkuZGVmYXVsdH19KTt2YXIgVD10KFwiLi9ncmFwaGljcy9HcmFwaGljc0RhdGFcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJHcmFwaGljc0RhdGFcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaShUKS5kZWZhdWx0fX0pO3ZhciB3PXQoXCIuL2dyYXBoaWNzL3dlYmdsL0dyYXBoaWNzUmVuZGVyZXJcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJHcmFwaGljc1JlbmRlcmVyXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGkodykuZGVmYXVsdH19KTt2YXIgRT10KFwiLi9ncmFwaGljcy9jYW52YXMvQ2FudmFzR3JhcGhpY3NSZW5kZXJlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkNhbnZhc0dyYXBoaWNzUmVuZGVyZXJcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaShFKS5kZWZhdWx0fX0pO3ZhciBTPXQoXCIuL3RleHR1cmVzL1Nwcml0ZXNoZWV0XCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiU3ByaXRlc2hlZXRcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaShTKS5kZWZhdWx0fX0pO3ZhciBPPXQoXCIuL3RleHR1cmVzL1RleHR1cmVcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJUZXh0dXJlXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGkoTykuZGVmYXVsdH19KTt2YXIgTT10KFwiLi90ZXh0dXJlcy9UZXh0dXJlTWF0cml4XCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiVGV4dHVyZU1hdHJpeFwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpKE0pLmRlZmF1bHR9fSk7dmFyIFA9dChcIi4vdGV4dHVyZXMvQmFzZVRleHR1cmVcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJCYXNlVGV4dHVyZVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpKFApLmRlZmF1bHR9fSk7dmFyIEM9dChcIi4vdGV4dHVyZXMvUmVuZGVyVGV4dHVyZVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlJlbmRlclRleHR1cmVcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaShDKS5kZWZhdWx0fX0pO3ZhciBSPXQoXCIuL3RleHR1cmVzL0Jhc2VSZW5kZXJUZXh0dXJlXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiQmFzZVJlbmRlclRleHR1cmVcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaShSKS5kZWZhdWx0fX0pO3ZhciBBPXQoXCIuL3RleHR1cmVzL1ZpZGVvQmFzZVRleHR1cmVcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJWaWRlb0Jhc2VUZXh0dXJlXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGkoQSkuZGVmYXVsdH19KTt2YXIgST10KFwiLi90ZXh0dXJlcy9UZXh0dXJlVXZzXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiVGV4dHVyZVV2c1wiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpKEkpLmRlZmF1bHR9fSk7dmFyIEQ9dChcIi4vcmVuZGVyZXJzL2NhbnZhcy91dGlscy9DYW52YXNSZW5kZXJUYXJnZXRcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJDYW52YXNSZW5kZXJUYXJnZXRcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaShEKS5kZWZhdWx0fX0pO3ZhciBMPXQoXCIuL1NoYWRlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlNoYWRlclwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpKEwpLmRlZmF1bHR9fSk7dmFyIE49dChcIi4vcmVuZGVyZXJzL3dlYmdsL21hbmFnZXJzL1dlYkdMTWFuYWdlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIldlYkdMTWFuYWdlclwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpKE4pLmRlZmF1bHR9fSk7dmFyIEI9dChcIi4vcmVuZGVyZXJzL3dlYmdsL3V0aWxzL09iamVjdFJlbmRlcmVyXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiT2JqZWN0UmVuZGVyZXJcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaShCKS5kZWZhdWx0fX0pO3ZhciBrPXQoXCIuL3JlbmRlcmVycy93ZWJnbC91dGlscy9SZW5kZXJUYXJnZXRcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJSZW5kZXJUYXJnZXRcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaShrKS5kZWZhdWx0fX0pO3ZhciBGPXQoXCIuL3JlbmRlcmVycy93ZWJnbC91dGlscy9RdWFkXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiUXVhZFwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpKEYpLmRlZmF1bHR9fSk7dmFyIGo9dChcIi4vcmVuZGVyZXJzL3dlYmdsL2ZpbHRlcnMvc3ByaXRlTWFzay9TcHJpdGVNYXNrRmlsdGVyXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiU3ByaXRlTWFza0ZpbHRlclwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpKGopLmRlZmF1bHR9fSk7dmFyIFU9dChcIi4vcmVuZGVyZXJzL3dlYmdsL2ZpbHRlcnMvRmlsdGVyXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiRmlsdGVyXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGkoVSkuZGVmYXVsdH19KTt2YXIgWD10KFwiLi9BcHBsaWNhdGlvblwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkFwcGxpY2F0aW9uXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGkoWCkuZGVmYXVsdH19KTt2YXIgRz10KFwiLi9hdXRvRGV0ZWN0UmVuZGVyZXJcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJhdXRvRGV0ZWN0UmVuZGVyZXJcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gRy5hdXRvRGV0ZWN0UmVuZGVyZXJ9fSk7dmFyIFc9dChcIi4vdXRpbHNcIiksSD1uKFcpLFk9dChcIi4vdGlja2VyXCIpLFY9bihZKSx6PXQoXCIuL3NldHRpbmdzXCIpLHE9aSh6KSxLPXQoXCIuL3JlbmRlcmVycy9jYW52YXMvQ2FudmFzUmVuZGVyZXJcIiksWj1pKEspLEo9dChcIi4vcmVuZGVyZXJzL3dlYmdsL1dlYkdMUmVuZGVyZXJcIiksUT1pKEopO3Iuc2V0dGluZ3M9cS5kZWZhdWx0LHIudXRpbHM9SCxyLnRpY2tlcj1WLHIuQ2FudmFzUmVuZGVyZXI9Wi5kZWZhdWx0LHIuV2ViR0xSZW5kZXJlcj1RLmRlZmF1bHR9LHtcIi4vQXBwbGljYXRpb25cIjo0MyxcIi4vU2hhZGVyXCI6NDQsXCIuL2F1dG9EZXRlY3RSZW5kZXJlclwiOjQ1LFwiLi9jb25zdFwiOjQ2LFwiLi9kaXNwbGF5L0JvdW5kc1wiOjQ3LFwiLi9kaXNwbGF5L0NvbnRhaW5lclwiOjQ4LFwiLi9kaXNwbGF5L0Rpc3BsYXlPYmplY3RcIjo0OSxcIi4vZGlzcGxheS9UcmFuc2Zvcm1cIjo1MCxcIi4vZGlzcGxheS9UcmFuc2Zvcm1CYXNlXCI6NTEsXCIuL2Rpc3BsYXkvVHJhbnNmb3JtU3RhdGljXCI6NTIsXCIuL2dyYXBoaWNzL0dyYXBoaWNzXCI6NTMsXCIuL2dyYXBoaWNzL0dyYXBoaWNzRGF0YVwiOjU0LFwiLi9ncmFwaGljcy9jYW52YXMvQ2FudmFzR3JhcGhpY3NSZW5kZXJlclwiOjU1LFwiLi9ncmFwaGljcy93ZWJnbC9HcmFwaGljc1JlbmRlcmVyXCI6NTcsXCIuL21hdGhcIjo3MCxcIi4vcmVuZGVyZXJzL2NhbnZhcy9DYW52YXNSZW5kZXJlclwiOjc3LFwiLi9yZW5kZXJlcnMvY2FudmFzL3V0aWxzL0NhbnZhc1JlbmRlclRhcmdldFwiOjc5LFwiLi9yZW5kZXJlcnMvd2ViZ2wvV2ViR0xSZW5kZXJlclwiOjg0LFwiLi9yZW5kZXJlcnMvd2ViZ2wvZmlsdGVycy9GaWx0ZXJcIjo4NixcIi4vcmVuZGVyZXJzL3dlYmdsL2ZpbHRlcnMvc3ByaXRlTWFzay9TcHJpdGVNYXNrRmlsdGVyXCI6ODksXCIuL3JlbmRlcmVycy93ZWJnbC9tYW5hZ2Vycy9XZWJHTE1hbmFnZXJcIjo5MyxcIi4vcmVuZGVyZXJzL3dlYmdsL3V0aWxzL09iamVjdFJlbmRlcmVyXCI6OTQsXCIuL3JlbmRlcmVycy93ZWJnbC91dGlscy9RdWFkXCI6OTUsXCIuL3JlbmRlcmVycy93ZWJnbC91dGlscy9SZW5kZXJUYXJnZXRcIjo5NixcIi4vc2V0dGluZ3NcIjoxMDEsXCIuL3Nwcml0ZXMvU3ByaXRlXCI6MTAyLFwiLi9zcHJpdGVzL2NhbnZhcy9DYW52YXNTcHJpdGVSZW5kZXJlclwiOjEwMyxcIi4vc3ByaXRlcy9jYW52YXMvQ2FudmFzVGludGVyXCI6MTA0LFwiLi9zcHJpdGVzL3dlYmdsL1Nwcml0ZVJlbmRlcmVyXCI6MTA2LFwiLi90ZXh0L1RleHRcIjoxMDgsXCIuL3RleHQvVGV4dE1ldHJpY3NcIjoxMDksXCIuL3RleHQvVGV4dFN0eWxlXCI6MTEwLFwiLi90ZXh0dXJlcy9CYXNlUmVuZGVyVGV4dHVyZVwiOjExMSxcIi4vdGV4dHVyZXMvQmFzZVRleHR1cmVcIjoxMTIsXCIuL3RleHR1cmVzL1JlbmRlclRleHR1cmVcIjoxMTMsXCIuL3RleHR1cmVzL1Nwcml0ZXNoZWV0XCI6MTE0LFwiLi90ZXh0dXJlcy9UZXh0dXJlXCI6MTE1LFwiLi90ZXh0dXJlcy9UZXh0dXJlTWF0cml4XCI6MTE2LFwiLi90ZXh0dXJlcy9UZXh0dXJlVXZzXCI6MTE3LFwiLi90ZXh0dXJlcy9WaWRlb0Jhc2VUZXh0dXJlXCI6MTE4LFwiLi90aWNrZXJcIjoxMjEsXCIuL3V0aWxzXCI6MTI1LFwicGl4aS1nbC1jb3JlXCI6MTV9XSw2NjpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCl7cmV0dXJuIHQ8MD8tMTp0PjA/MTowfXIuX19lc01vZHVsZT0hMDt2YXIgaT10KFwiLi9NYXRyaXhcIiksbz1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KGkpLHM9WzEsMSwwLC0xLC0xLC0xLDAsMSwxLDEsMCwtMSwtMSwtMSwwLDFdLGE9WzAsMSwxLDEsMCwtMSwtMSwtMSwwLDEsMSwxLDAsLTEsLTEsLTFdLHU9WzAsLTEsLTEsLTEsMCwxLDEsMSwwLDEsMSwxLDAsLTEsLTEsLTFdLGg9WzEsMSwwLC0xLC0xLC0xLDAsMSwtMSwtMSwwLDEsMSwxLDAsLTFdLGw9W10sYz1bXTshZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PDE2O3QrKyl7dmFyIGU9W107Yy5wdXNoKGUpO2Zvcih2YXIgcj0wO3I8MTY7cisrKWZvcih2YXIgaT1uKHNbdF0qc1tyXSt1W3RdKmFbcl0pLGQ9bihhW3RdKnNbcl0raFt0XSphW3JdKSxmPW4oc1t0XSp1W3JdK3VbdF0qaFtyXSkscD1uKGFbdF0qdVtyXStoW3RdKmhbcl0pLHY9MDt2PDE2O3YrKylpZihzW3ZdPT09aSYmYVt2XT09PWQmJnVbdl09PT1mJiZoW3ZdPT09cCl7ZS5wdXNoKHYpO2JyZWFrfX1mb3IodmFyIGc9MDtnPDE2O2crKyl7dmFyIHk9bmV3IG8uZGVmYXVsdDt5LnNldChzW2ddLGFbZ10sdVtnXSxoW2ddLDAsMCksbC5wdXNoKHkpfX0oKTt2YXIgZD17RTowLFNFOjEsUzoyLFNXOjMsVzo0LE5XOjUsTjo2LE5FOjcsTUlSUk9SX1ZFUlRJQ0FMOjgsTUlSUk9SX0hPUklaT05UQUw6MTIsdVg6ZnVuY3Rpb24odCl7cmV0dXJuIHNbdF19LHVZOmZ1bmN0aW9uKHQpe3JldHVybiBhW3RdfSx2WDpmdW5jdGlvbih0KXtyZXR1cm4gdVt0XX0sdlk6ZnVuY3Rpb24odCl7cmV0dXJuIGhbdF19LGludjpmdW5jdGlvbih0KXtyZXR1cm4gOCZ0PzE1JnQ6NyYtdH0sYWRkOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGNbdF1bZV19LHN1YjpmdW5jdGlvbih0LGUpe3JldHVybiBjW3RdW2QuaW52KGUpXX0scm90YXRlMTgwOmZ1bmN0aW9uKHQpe3JldHVybiA0XnR9LGlzVmVydGljYWw6ZnVuY3Rpb24odCl7cmV0dXJuIDI9PSgzJnQpfSxieURpcmVjdGlvbjpmdW5jdGlvbih0LGUpe3JldHVybiAyKk1hdGguYWJzKHQpPD1NYXRoLmFicyhlKT9lPj0wP2QuUzpkLk46MipNYXRoLmFicyhlKTw9TWF0aC5hYnModCk/dD4wP2QuRTpkLlc6ZT4wP3Q+MD9kLlNFOmQuU1c6dD4wP2QuTkU6ZC5OV30sbWF0cml4QXBwZW5kUm90YXRpb25JbnY6ZnVuY3Rpb24odCxlKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06MCxuPWFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdP2FyZ3VtZW50c1szXTowLGk9bFtkLmludihlKV07aS50eD1yLGkudHk9bix0LmFwcGVuZChpKX19O3IuZGVmYXVsdD1kfSx7XCIuL01hdHJpeFwiOjY3fV0sNjc6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1yLl9fZXNNb2R1bGU9ITA7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBuPWVbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSxyLG4pe3JldHVybiByJiZ0KGUucHJvdG90eXBlLHIpLG4mJnQoZSxuKSxlfX0oKSxvPXQoXCIuL1BvaW50XCIpLHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShvKSxhPXQoXCIuLi9jb25zdFwiKSx1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXToxLHI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjAsaT1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06MCxvPWFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdP2FyZ3VtZW50c1szXToxLHM9YXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0/YXJndW1lbnRzWzRdOjAsYT1hcmd1bWVudHMubGVuZ3RoPjUmJnZvaWQgMCE9PWFyZ3VtZW50c1s1XT9hcmd1bWVudHNbNV06MDtuKHRoaXMsdCksdGhpcy5hPWUsdGhpcy5iPXIsdGhpcy5jPWksdGhpcy5kPW8sdGhpcy50eD1zLHRoaXMudHk9YSx0aGlzLmFycmF5PW51bGx9cmV0dXJuIHQucHJvdG90eXBlLmZyb21BcnJheT1mdW5jdGlvbih0KXt0aGlzLmE9dFswXSx0aGlzLmI9dFsxXSx0aGlzLmM9dFszXSx0aGlzLmQ9dFs0XSx0aGlzLnR4PXRbMl0sdGhpcy50eT10WzVdfSx0LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlLHIsbixpLG8pe3JldHVybiB0aGlzLmE9dCx0aGlzLmI9ZSx0aGlzLmM9cix0aGlzLmQ9bix0aGlzLnR4PWksdGhpcy50eT1vLHRoaXN9LHQucHJvdG90eXBlLnRvQXJyYXk9ZnVuY3Rpb24odCxlKXt0aGlzLmFycmF5fHwodGhpcy5hcnJheT1uZXcgRmxvYXQzMkFycmF5KDkpKTt2YXIgcj1lfHx0aGlzLmFycmF5O3JldHVybiB0PyhyWzBdPXRoaXMuYSxyWzFdPXRoaXMuYixyWzJdPTAsclszXT10aGlzLmMscls0XT10aGlzLmQscls1XT0wLHJbNl09dGhpcy50eCxyWzddPXRoaXMudHkscls4XT0xKTooclswXT10aGlzLmEsclsxXT10aGlzLmMsclsyXT10aGlzLnR4LHJbM109dGhpcy5iLHJbNF09dGhpcy5kLHJbNV09dGhpcy50eSxyWzZdPTAscls3XT0wLHJbOF09MSkscn0sdC5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24odCxlKXtlPWV8fG5ldyBzLmRlZmF1bHQ7dmFyIHI9dC54LG49dC55O3JldHVybiBlLng9dGhpcy5hKnIrdGhpcy5jKm4rdGhpcy50eCxlLnk9dGhpcy5iKnIrdGhpcy5kKm4rdGhpcy50eSxlfSx0LnByb3RvdHlwZS5hcHBseUludmVyc2U9ZnVuY3Rpb24odCxlKXtlPWV8fG5ldyBzLmRlZmF1bHQ7dmFyIHI9MS8odGhpcy5hKnRoaXMuZCt0aGlzLmMqLXRoaXMuYiksbj10LngsaT10Lnk7cmV0dXJuIGUueD10aGlzLmQqcipuKy10aGlzLmMqcippKyh0aGlzLnR5KnRoaXMuYy10aGlzLnR4KnRoaXMuZCkqcixlLnk9dGhpcy5hKnIqaSstdGhpcy5iKnIqbisoLXRoaXMudHkqdGhpcy5hK3RoaXMudHgqdGhpcy5iKSpyLGV9LHQucHJvdG90eXBlLnRyYW5zbGF0ZT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnR4Kz10LHRoaXMudHkrPWUsdGhpc30sdC5wcm90b3R5cGUuc2NhbGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5hKj10LHRoaXMuZCo9ZSx0aGlzLmMqPXQsdGhpcy5iKj1lLHRoaXMudHgqPXQsdGhpcy50eSo9ZSx0aGlzfSx0LnByb3RvdHlwZS5yb3RhdGU9ZnVuY3Rpb24odCl7dmFyIGU9TWF0aC5jb3ModCkscj1NYXRoLnNpbih0KSxuPXRoaXMuYSxpPXRoaXMuYyxvPXRoaXMudHg7cmV0dXJuIHRoaXMuYT1uKmUtdGhpcy5iKnIsdGhpcy5iPW4qcit0aGlzLmIqZSx0aGlzLmM9aSplLXRoaXMuZCpyLHRoaXMuZD1pKnIrdGhpcy5kKmUsdGhpcy50eD1vKmUtdGhpcy50eSpyLHRoaXMudHk9bypyK3RoaXMudHkqZSx0aGlzfSx0LnByb3RvdHlwZS5hcHBlbmQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5hLHI9dGhpcy5iLG49dGhpcy5jLGk9dGhpcy5kO3JldHVybiB0aGlzLmE9dC5hKmUrdC5iKm4sdGhpcy5iPXQuYSpyK3QuYippLHRoaXMuYz10LmMqZSt0LmQqbix0aGlzLmQ9dC5jKnIrdC5kKmksdGhpcy50eD10LnR4KmUrdC50eSpuK3RoaXMudHgsdGhpcy50eT10LnR4KnIrdC50eSppK3RoaXMudHksdGhpc30sdC5wcm90b3R5cGUuc2V0VHJhbnNmb3JtPWZ1bmN0aW9uKHQsZSxyLG4saSxvLHMsYSx1KXtyZXR1cm4gdGhpcy5hPU1hdGguY29zKHMrdSkqaSx0aGlzLmI9TWF0aC5zaW4ocyt1KSppLHRoaXMuYz0tTWF0aC5zaW4ocy1hKSpvLHRoaXMuZD1NYXRoLmNvcyhzLWEpKm8sdGhpcy50eD10LShyKnRoaXMuYStuKnRoaXMuYyksdGhpcy50eT1lLShyKnRoaXMuYituKnRoaXMuZCksdGhpc30sdC5wcm90b3R5cGUucHJlcGVuZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnR4O2lmKDEhPT10LmF8fDAhPT10LmJ8fDAhPT10LmN8fDEhPT10LmQpe3ZhciByPXRoaXMuYSxuPXRoaXMuYzt0aGlzLmE9cip0LmErdGhpcy5iKnQuYyx0aGlzLmI9cip0LmIrdGhpcy5iKnQuZCx0aGlzLmM9bip0LmErdGhpcy5kKnQuYyx0aGlzLmQ9bip0LmIrdGhpcy5kKnQuZH1yZXR1cm4gdGhpcy50eD1lKnQuYSt0aGlzLnR5KnQuYyt0LnR4LHRoaXMudHk9ZSp0LmIrdGhpcy50eSp0LmQrdC50eSx0aGlzfSx0LnByb3RvdHlwZS5kZWNvbXBvc2U9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5hLHI9dGhpcy5iLG49dGhpcy5jLGk9dGhpcy5kLG89LU1hdGguYXRhbjIoLW4saSkscz1NYXRoLmF0YW4yKHIsZSksdT1NYXRoLmFicyhvK3MpO3JldHVybiB1PDFlLTV8fE1hdGguYWJzKGEuUElfMi11KTwxZS01Pyh0LnJvdGF0aW9uPXMsdC5za2V3Lng9dC5za2V3Lnk9MCk6KHQucm90YXRpb249MCx0LnNrZXcueD1vLHQuc2tldy55PXMpLHQuc2NhbGUueD1NYXRoLnNxcnQoZSplK3IqciksdC5zY2FsZS55PU1hdGguc3FydChuKm4raSppKSx0LnBvc2l0aW9uLng9dGhpcy50eCx0LnBvc2l0aW9uLnk9dGhpcy50eSx0fSx0LnByb3RvdHlwZS5pbnZlcnQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmEsZT10aGlzLmIscj10aGlzLmMsbj10aGlzLmQsaT10aGlzLnR4LG89dCpuLWUqcjtyZXR1cm4gdGhpcy5hPW4vbyx0aGlzLmI9LWUvbyx0aGlzLmM9LXIvbyx0aGlzLmQ9dC9vLHRoaXMudHg9KHIqdGhpcy50eS1uKmkpL28sdGhpcy50eT0tKHQqdGhpcy50eS1lKmkpL28sdGhpc30sdC5wcm90b3R5cGUuaWRlbnRpdHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hPTEsdGhpcy5iPTAsdGhpcy5jPTAsdGhpcy5kPTEsdGhpcy50eD0wLHRoaXMudHk9MCx0aGlzfSx0LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBlPW5ldyB0O3JldHVybiBlLmE9dGhpcy5hLGUuYj10aGlzLmIsZS5jPXRoaXMuYyxlLmQ9dGhpcy5kLGUudHg9dGhpcy50eCxlLnR5PXRoaXMudHksZX0sdC5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gdC5hPXRoaXMuYSx0LmI9dGhpcy5iLHQuYz10aGlzLmMsdC5kPXRoaXMuZCx0LnR4PXRoaXMudHgsdC50eT10aGlzLnR5LHR9LGkodCxudWxsLFt7a2V5OlwiSURFTlRJVFlcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHR9fSx7a2V5OlwiVEVNUF9NQVRSSVhcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHR9fV0pLHR9KCk7ci5kZWZhdWx0PXV9LHtcIi4uL2NvbnN0XCI6NDYsXCIuL1BvaW50XCI6Njl9XSw2ODpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfXIuX19lc01vZHVsZT0hMDt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG49ZVtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbihlLHIsbil7cmV0dXJuIHImJnQoZS5wcm90b3R5cGUsciksbiYmdChlLG4pLGV9fSgpLG89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUscil7dmFyIGk9YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOjAsbz1hcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXT9hcmd1bWVudHNbM106MDtuKHRoaXMsdCksdGhpcy5feD1pLHRoaXMuX3k9byx0aGlzLmNiPWUsdGhpcy5zY29wZT1yfXJldHVybiB0LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpudWxsLHI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOm51bGw7cmV0dXJuIG5ldyB0KGV8fHRoaXMuY2Iscnx8dGhpcy5zY29wZSx0aGlzLl94LHRoaXMuX3kpfSx0LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlKXt2YXIgcj10fHwwLG49ZXx8KDAhPT1lP3I6MCk7dGhpcy5feD09PXImJnRoaXMuX3k9PT1ufHwodGhpcy5feD1yLHRoaXMuX3k9bix0aGlzLmNiLmNhbGwodGhpcy5zY29wZSkpfSx0LnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3RoaXMuX3g9PT10LngmJnRoaXMuX3k9PT10Lnl8fCh0aGlzLl94PXQueCx0aGlzLl95PXQueSx0aGlzLmNiLmNhbGwodGhpcy5zY29wZSkpfSx0LnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQueD09PXRoaXMuX3gmJnQueT09PXRoaXMuX3l9LGkodCxbe2tleTpcInhcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5feH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3ghPT10JiYodGhpcy5feD10LHRoaXMuY2IuY2FsbCh0aGlzLnNjb3BlKSl9fSx7a2V5OlwieVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl95fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5feSE9PXQmJih0aGlzLl95PXQsdGhpcy5jYi5jYWxsKHRoaXMuc2NvcGUpKX19XSksdH0oKTtyLmRlZmF1bHQ9b30se31dLDY5OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ci5fX2VzTW9kdWxlPSEwO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTowLHI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjA7bih0aGlzLHQpLHRoaXMueD1lLHRoaXMueT1yfXJldHVybiB0LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgdCh0aGlzLngsdGhpcy55KX0sdC5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXt0aGlzLnNldCh0LngsdC55KX0sdC5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKHQpe3JldHVybiB0Lng9PT10aGlzLngmJnQueT09PXRoaXMueX0sdC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7dGhpcy54PXR8fDAsdGhpcy55PWV8fCgwIT09ZT90aGlzLng6MCl9LHR9KCk7ci5kZWZhdWx0PWl9LHt9XSw3MDpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fXIuX19lc01vZHVsZT0hMDt2YXIgaT10KFwiLi9Qb2ludFwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlBvaW50XCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4oaSkuZGVmYXVsdH19KTt2YXIgbz10KFwiLi9PYnNlcnZhYmxlUG9pbnRcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJPYnNlcnZhYmxlUG9pbnRcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihvKS5kZWZhdWx0fX0pO3ZhciBzPXQoXCIuL01hdHJpeFwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIk1hdHJpeFwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBuKHMpLmRlZmF1bHR9fSk7dmFyIGE9dChcIi4vR3JvdXBEOFwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkdyb3VwRDhcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihhKS5kZWZhdWx0fX0pO3ZhciB1PXQoXCIuL3NoYXBlcy9DaXJjbGVcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJDaXJjbGVcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbih1KS5kZWZhdWx0fX0pO3ZhciBoPXQoXCIuL3NoYXBlcy9FbGxpcHNlXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiRWxsaXBzZVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBuKGgpLmRlZmF1bHR9fSk7dmFyIGw9dChcIi4vc2hhcGVzL1BvbHlnb25cIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJQb2x5Z29uXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4obCkuZGVmYXVsdH19KTt2YXIgYz10KFwiLi9zaGFwZXMvUmVjdGFuZ2xlXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiUmVjdGFuZ2xlXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4oYykuZGVmYXVsdH19KTt2YXIgZD10KFwiLi9zaGFwZXMvUm91bmRlZFJlY3RhbmdsZVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlJvdW5kZWRSZWN0YW5nbGVcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihkKS5kZWZhdWx0fX0pfSx7XCIuL0dyb3VwRDhcIjo2NixcIi4vTWF0cml4XCI6NjcsXCIuL09ic2VydmFibGVQb2ludFwiOjY4LFwiLi9Qb2ludFwiOjY5LFwiLi9zaGFwZXMvQ2lyY2xlXCI6NzEsXCIuL3NoYXBlcy9FbGxpcHNlXCI6NzIsXCIuL3NoYXBlcy9Qb2x5Z29uXCI6NzMsXCIuL3NoYXBlcy9SZWN0YW5nbGVcIjo3NCxcIi4vc2hhcGVzL1JvdW5kZWRSZWN0YW5nbGVcIjo3NX1dLDcxOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ci5fX2VzTW9kdWxlPSEwO3ZhciBpPXQoXCIuL1JlY3RhbmdsZVwiKSxvPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0oaSkscz10KFwiLi4vLi4vY29uc3RcIiksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06MCxyPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTowLGk9YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOjA7bih0aGlzLHQpLHRoaXMueD1lLHRoaXMueT1yLHRoaXMucmFkaXVzPWksdGhpcy50eXBlPXMuU0hBUEVTLkNJUkN9cmV0dXJuIHQucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0KHRoaXMueCx0aGlzLnksdGhpcy5yYWRpdXMpfSx0LnByb3RvdHlwZS5jb250YWlucz1mdW5jdGlvbih0LGUpe2lmKHRoaXMucmFkaXVzPD0wKXJldHVybiExO3ZhciByPXRoaXMucmFkaXVzKnRoaXMucmFkaXVzLG49dGhpcy54LXQsaT10aGlzLnktZTtyZXR1cm4gbio9bixpKj1pLG4raTw9cn0sdC5wcm90b3R5cGUuZ2V0Qm91bmRzPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBvLmRlZmF1bHQodGhpcy54LXRoaXMucmFkaXVzLHRoaXMueS10aGlzLnJhZGl1cywyKnRoaXMucmFkaXVzLDIqdGhpcy5yYWRpdXMpfSx0fSgpO3IuZGVmYXVsdD1hfSx7XCIuLi8uLi9jb25zdFwiOjQ2LFwiLi9SZWN0YW5nbGVcIjo3NH1dLDcyOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ci5fX2VzTW9kdWxlPSEwO3ZhciBpPXQoXCIuL1JlY3RhbmdsZVwiKSxvPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0oaSkscz10KFwiLi4vLi4vY29uc3RcIiksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06MCxyPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTowLGk9YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOjAsbz1hcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXT9hcmd1bWVudHNbM106MDtuKHRoaXMsdCksdGhpcy54PWUsdGhpcy55PXIsdGhpcy53aWR0aD1pLHRoaXMuaGVpZ2h0PW8sdGhpcy50eXBlPXMuU0hBUEVTLkVMSVB9cmV0dXJuIHQucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0KHRoaXMueCx0aGlzLnksdGhpcy53aWR0aCx0aGlzLmhlaWdodCl9LHQucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKHQsZSl7aWYodGhpcy53aWR0aDw9MHx8dGhpcy5oZWlnaHQ8PTApcmV0dXJuITE7dmFyIHI9KHQtdGhpcy54KS90aGlzLndpZHRoLG49KGUtdGhpcy55KS90aGlzLmhlaWdodDtyZXR1cm4gcio9cixuKj1uLHIrbjw9MX0sdC5wcm90b3R5cGUuZ2V0Qm91bmRzPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBvLmRlZmF1bHQodGhpcy54LXRoaXMud2lkdGgsdGhpcy55LXRoaXMuaGVpZ2h0LHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpfSx0fSgpO3IuZGVmYXVsdD1hfSx7XCIuLi8uLi9jb25zdFwiOjQ2LFwiLi9SZWN0YW5nbGVcIjo3NH1dLDczOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ci5fX2VzTW9kdWxlPSEwO3ZhciBpPXQoXCIuLi9Qb2ludFwiKSxvPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0oaSkscz10KFwiLi4vLi4vY29uc3RcIiksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCxyPUFycmF5KGUpLGk9MDtpPGU7aSsrKXJbaV09YXJndW1lbnRzW2ldO2lmKG4odGhpcyx0KSxBcnJheS5pc0FycmF5KHJbMF0pJiYocj1yWzBdKSxyWzBdaW5zdGFuY2VvZiBvLmRlZmF1bHQpe2Zvcih2YXIgYT1bXSx1PTAsaD1yLmxlbmd0aDt1PGg7dSsrKWEucHVzaChyW3VdLngsclt1XS55KTtyPWF9dGhpcy5jbG9zZWQ9ITAsdGhpcy5wb2ludHM9cix0aGlzLnR5cGU9cy5TSEFQRVMuUE9MWX1yZXR1cm4gdC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHQodGhpcy5wb2ludHMuc2xpY2UoKSl9LHQucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wb2ludHM7dFswXT09PXRbdC5sZW5ndGgtMl0mJnRbMV09PT10W3QubGVuZ3RoLTFdfHx0LnB1c2godFswXSx0WzFdKX0sdC5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9ITEsbj10aGlzLnBvaW50cy5sZW5ndGgvMixpPTAsbz1uLTE7aTxuO289aSsrKXt2YXIgcz10aGlzLnBvaW50c1syKmldLGE9dGhpcy5wb2ludHNbMippKzFdLHU9dGhpcy5wb2ludHNbMipvXSxoPXRoaXMucG9pbnRzWzIqbysxXTthPmUhPWg+ZSYmdDwoZS1hKS8oaC1hKSoodS1zKStzJiYocj0hcil9cmV0dXJuIHJ9LHR9KCk7ci5kZWZhdWx0PWF9LHtcIi4uLy4uL2NvbnN0XCI6NDYsXCIuLi9Qb2ludFwiOjY5fV0sNzQ6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1yLl9fZXNNb2R1bGU9ITA7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBuPWVbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSxyLG4pe3JldHVybiByJiZ0KGUucHJvdG90eXBlLHIpLG4mJnQoZSxuKSxlfX0oKSxvPXQoXCIuLi8uLi9jb25zdFwiKSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTowLHI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjAsaT1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06MCxzPWFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdP2FyZ3VtZW50c1szXTowO24odGhpcyx0KSx0aGlzLng9TnVtYmVyKGUpLHRoaXMueT1OdW1iZXIociksdGhpcy53aWR0aD1OdW1iZXIoaSksdGhpcy5oZWlnaHQ9TnVtYmVyKHMpLHRoaXMudHlwZT1vLlNIQVBFUy5SRUNUfXJldHVybiB0LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgdCh0aGlzLngsdGhpcy55LHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpfSx0LnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLng9dC54LHRoaXMueT10LnksdGhpcy53aWR0aD10LndpZHRoLHRoaXMuaGVpZ2h0PXQuaGVpZ2h0LHRoaXN9LHQucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKHQsZSl7cmV0dXJuISh0aGlzLndpZHRoPD0wfHx0aGlzLmhlaWdodDw9MCkmJih0Pj10aGlzLngmJnQ8dGhpcy54K3RoaXMud2lkdGgmJmU+PXRoaXMueSYmZTx0aGlzLnkrdGhpcy5oZWlnaHQpfSx0LnByb3RvdHlwZS5wYWQ9ZnVuY3Rpb24odCxlKXt0PXR8fDAsZT1lfHwoMCE9PWU/dDowKSx0aGlzLngtPXQsdGhpcy55LT1lLHRoaXMud2lkdGgrPTIqdCx0aGlzLmhlaWdodCs9MiplfSx0LnByb3RvdHlwZS5maXQ9ZnVuY3Rpb24odCl7dmFyIGU9TWF0aC5tYXgodGhpcy54LHQueCkscj1NYXRoLm1pbih0aGlzLngrdGhpcy53aWR0aCx0LngrdC53aWR0aCksbj1NYXRoLm1heCh0aGlzLnksdC55KSxpPU1hdGgubWluKHRoaXMueSt0aGlzLmhlaWdodCx0LnkrdC5oZWlnaHQpO3RoaXMueD1lLHRoaXMud2lkdGg9TWF0aC5tYXgoci1lLDApLHRoaXMueT1uLHRoaXMuaGVpZ2h0PU1hdGgubWF4KGktbiwwKX0sdC5wcm90b3R5cGUuZW5sYXJnZT1mdW5jdGlvbih0KXt2YXIgZT1NYXRoLm1pbih0aGlzLngsdC54KSxyPU1hdGgubWF4KHRoaXMueCt0aGlzLndpZHRoLHQueCt0LndpZHRoKSxuPU1hdGgubWluKHRoaXMueSx0LnkpLGk9TWF0aC5tYXgodGhpcy55K3RoaXMuaGVpZ2h0LHQueSt0LmhlaWdodCk7dGhpcy54PWUsdGhpcy53aWR0aD1yLWUsdGhpcy55PW4sdGhpcy5oZWlnaHQ9aS1ufSx0LnByb3RvdHlwZS5jZWlsPWZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOjEsZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06LjAwMSxyPU1hdGguY2VpbCgodGhpcy54K3RoaXMud2lkdGgtZSkqdCkvdCxuPU1hdGguY2VpbCgodGhpcy55K3RoaXMuaGVpZ2h0LWUpKnQpL3Q7dGhpcy54PU1hdGguZmxvb3IoKHRoaXMueCtlKSp0KS90LHRoaXMueT1NYXRoLmZsb29yKCh0aGlzLnkrZSkqdCkvdCx0aGlzLndpZHRoPXItdGhpcy54LHRoaXMuaGVpZ2h0PW4tdGhpcy55fSxpKHQsW3trZXk6XCJsZWZ0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueH19LHtrZXk6XCJyaWdodFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLngrdGhpcy53aWR0aH19LHtrZXk6XCJ0b3BcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy55fX0se2tleTpcImJvdHRvbVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnkrdGhpcy5oZWlnaHR9fV0sW3trZXk6XCJFTVBUWVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBuZXcgdCgwLDAsMCwwKX19XSksdH0oKTtyLmRlZmF1bHQ9c30se1wiLi4vLi4vY29uc3RcIjo0Nn1dLDc1OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ci5fX2VzTW9kdWxlPSEwO3ZhciBpPXQoXCIuLi8uLi9jb25zdFwiKSxvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTowLHI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjAsbz1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06MCxzPWFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdP2FyZ3VtZW50c1szXTowLGE9YXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0/YXJndW1lbnRzWzRdOjIwO24odGhpcyx0KSx0aGlzLng9ZSx0aGlzLnk9cix0aGlzLndpZHRoPW8sdGhpcy5oZWlnaHQ9cyx0aGlzLnJhZGl1cz1hLHRoaXMudHlwZT1pLlNIQVBFUy5SUkVDfXJldHVybiB0LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgdCh0aGlzLngsdGhpcy55LHRoaXMud2lkdGgsdGhpcy5oZWlnaHQsdGhpcy5yYWRpdXMpfSx0LnByb3RvdHlwZS5jb250YWlucz1mdW5jdGlvbih0LGUpe2lmKHRoaXMud2lkdGg8PTB8fHRoaXMuaGVpZ2h0PD0wKXJldHVybiExO2lmKHQ+PXRoaXMueCYmdDw9dGhpcy54K3RoaXMud2lkdGgmJmU+PXRoaXMueSYmZTw9dGhpcy55K3RoaXMuaGVpZ2h0KXtpZihlPj10aGlzLnkrdGhpcy5yYWRpdXMmJmU8PXRoaXMueSt0aGlzLmhlaWdodC10aGlzLnJhZGl1c3x8dD49dGhpcy54K3RoaXMucmFkaXVzJiZ0PD10aGlzLngrdGhpcy53aWR0aC10aGlzLnJhZGl1cylyZXR1cm4hMDt2YXIgcj10LSh0aGlzLngrdGhpcy5yYWRpdXMpLG49ZS0odGhpcy55K3RoaXMucmFkaXVzKSxpPXRoaXMucmFkaXVzKnRoaXMucmFkaXVzO2lmKHIqcituKm48PWkpcmV0dXJuITA7aWYoKHI9dC0odGhpcy54K3RoaXMud2lkdGgtdGhpcy5yYWRpdXMpKSpyK24qbjw9aSlyZXR1cm4hMDtpZihuPWUtKHRoaXMueSt0aGlzLmhlaWdodC10aGlzLnJhZGl1cykscipyK24qbjw9aSlyZXR1cm4hMDtpZigocj10LSh0aGlzLngrdGhpcy5yYWRpdXMpKSpyK24qbjw9aSlyZXR1cm4hMH1yZXR1cm4hMX0sdH0oKTtyLmRlZmF1bHQ9b30se1wiLi4vLi4vY29uc3RcIjo0Nn1dLDc2OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIHModCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1yLl9fZXNNb2R1bGU9ITA7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBuPWVbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSxyLG4pe3JldHVybiByJiZ0KGUucHJvdG90eXBlLHIpLG4mJnQoZSxuKSxlfX0oKSx1PXQoXCIuLi91dGlsc1wiKSxoPXQoXCIuLi9tYXRoXCIpLGw9dChcIi4uL2NvbnN0XCIpLGM9dChcIi4uL3NldHRpbmdzXCIpLGQ9bihjKSxmPXQoXCIuLi9kaXNwbGF5L0NvbnRhaW5lclwiKSxwPW4oZiksdj10KFwiLi4vdGV4dHVyZXMvUmVuZGVyVGV4dHVyZVwiKSxnPW4odikseT10KFwiZXZlbnRlbWl0dGVyM1wiKSxtPW4oeSksXz1uZXcgaC5NYXRyaXgsYj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHIsbixzLGEpe2kodGhpcyxlKTt2YXIgYz1vKHRoaXMsdC5jYWxsKHRoaXMpKTtyZXR1cm4oMCx1LnNheUhlbGxvKShyKSxcIm51bWJlclwiPT10eXBlb2YgbiYmKG49T2JqZWN0LmFzc2lnbih7d2lkdGg6bixoZWlnaHQ6c3x8ZC5kZWZhdWx0LlJFTkRFUl9PUFRJT05TLmhlaWdodH0sYSkpLG49T2JqZWN0LmFzc2lnbih7fSxkLmRlZmF1bHQuUkVOREVSX09QVElPTlMsbiksYy5vcHRpb25zPW4sYy50eXBlPWwuUkVOREVSRVJfVFlQRS5VTktOT1dOLGMuc2NyZWVuPW5ldyBoLlJlY3RhbmdsZSgwLDAsbi53aWR0aCxuLmhlaWdodCksYy52aWV3PW4udmlld3x8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxjLnJlc29sdXRpb249bi5yZXNvbHV0aW9ufHxkLmRlZmF1bHQuUkVTT0xVVElPTixjLnRyYW5zcGFyZW50PW4udHJhbnNwYXJlbnQsYy5hdXRvUmVzaXplPW4uYXV0b1Jlc2l6ZXx8ITEsYy5ibGVuZE1vZGVzPW51bGwsYy5wcmVzZXJ2ZURyYXdpbmdCdWZmZXI9bi5wcmVzZXJ2ZURyYXdpbmdCdWZmZXIsYy5jbGVhckJlZm9yZVJlbmRlcj1uLmNsZWFyQmVmb3JlUmVuZGVyLGMucm91bmRQaXhlbHM9bi5yb3VuZFBpeGVscyxjLl9iYWNrZ3JvdW5kQ29sb3I9MCxjLl9iYWNrZ3JvdW5kQ29sb3JSZ2JhPVswLDAsMCwwXSxjLl9iYWNrZ3JvdW5kQ29sb3JTdHJpbmc9XCIjMDAwMDAwXCIsYy5iYWNrZ3JvdW5kQ29sb3I9bi5iYWNrZ3JvdW5kQ29sb3J8fGMuX2JhY2tncm91bmRDb2xvcixjLl90ZW1wRGlzcGxheU9iamVjdFBhcmVudD1uZXcgcC5kZWZhdWx0LGMuX2xhc3RPYmplY3RSZW5kZXJlZD1jLl90ZW1wRGlzcGxheU9iamVjdFBhcmVudCxjfXJldHVybiBzKGUsdCksZS5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKHQsZSl7dGhpcy5zY3JlZW4ud2lkdGg9dCx0aGlzLnNjcmVlbi5oZWlnaHQ9ZSx0aGlzLnZpZXcud2lkdGg9dCp0aGlzLnJlc29sdXRpb24sdGhpcy52aWV3LmhlaWdodD1lKnRoaXMucmVzb2x1dGlvbix0aGlzLmF1dG9SZXNpemUmJih0aGlzLnZpZXcuc3R5bGUud2lkdGg9dCtcInB4XCIsdGhpcy52aWV3LnN0eWxlLmhlaWdodD1lK1wicHhcIil9LGUucHJvdG90eXBlLmdlbmVyYXRlVGV4dHVyZT1mdW5jdGlvbih0LGUscixuKXtuPW58fHQuZ2V0TG9jYWxCb3VuZHMoKTt2YXIgaT1nLmRlZmF1bHQuY3JlYXRlKDB8bi53aWR0aCwwfG4uaGVpZ2h0LGUscik7cmV0dXJuIF8udHg9LW4ueCxfLnR5PS1uLnksdGhpcy5yZW5kZXIodCxpLCExLF8sISF0LnBhcmVudCksaX0sZS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbih0KXt0JiZ0aGlzLnZpZXcucGFyZW50Tm9kZSYmdGhpcy52aWV3LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy52aWV3KSx0aGlzLnR5cGU9bC5SRU5ERVJFUl9UWVBFLlVOS05PV04sdGhpcy52aWV3PW51bGwsdGhpcy5zY3JlZW49bnVsbCx0aGlzLnJlc29sdXRpb249MCx0aGlzLnRyYW5zcGFyZW50PSExLHRoaXMuYXV0b1Jlc2l6ZT0hMSx0aGlzLmJsZW5kTW9kZXM9bnVsbCx0aGlzLm9wdGlvbnM9bnVsbCx0aGlzLnByZXNlcnZlRHJhd2luZ0J1ZmZlcj0hMSx0aGlzLmNsZWFyQmVmb3JlUmVuZGVyPSExLHRoaXMucm91bmRQaXhlbHM9ITEsdGhpcy5fYmFja2dyb3VuZENvbG9yPTAsdGhpcy5fYmFja2dyb3VuZENvbG9yUmdiYT1udWxsLHRoaXMuX2JhY2tncm91bmRDb2xvclN0cmluZz1udWxsLHRoaXMuX3RlbXBEaXNwbGF5T2JqZWN0UGFyZW50PW51bGwsdGhpcy5fbGFzdE9iamVjdFJlbmRlcmVkPW51bGx9LGEoZSxbe2tleTpcIndpZHRoXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlldy53aWR0aH19LHtrZXk6XCJoZWlnaHRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aWV3LmhlaWdodH19LHtrZXk6XCJiYWNrZ3JvdW5kQ29sb3JcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmFja2dyb3VuZENvbG9yfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFja2dyb3VuZENvbG9yPXQsdGhpcy5fYmFja2dyb3VuZENvbG9yU3RyaW5nPSgwLHUuaGV4MnN0cmluZykodCksKDAsdS5oZXgycmdiKSh0LHRoaXMuX2JhY2tncm91bmRDb2xvclJnYmEpfX1dKSxlfShtLmRlZmF1bHQpO3IuZGVmYXVsdD1ifSx7XCIuLi9jb25zdFwiOjQ2LFwiLi4vZGlzcGxheS9Db250YWluZXJcIjo0OCxcIi4uL21hdGhcIjo3MCxcIi4uL3NldHRpbmdzXCI6MTAxLFwiLi4vdGV4dHVyZXMvUmVuZGVyVGV4dHVyZVwiOjExMyxcIi4uL3V0aWxzXCI6MTI1LGV2ZW50ZW1pdHRlcjM6M31dLDc3OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIHModCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1yLl9fZXNNb2R1bGU9ITA7dmFyIGE9dChcIi4uL1N5c3RlbVJlbmRlcmVyXCIpLHU9bihhKSxoPXQoXCIuL3V0aWxzL0NhbnZhc01hc2tNYW5hZ2VyXCIpLGw9bihoKSxjPXQoXCIuL3V0aWxzL0NhbnZhc1JlbmRlclRhcmdldFwiKSxkPW4oYyksZj10KFwiLi91dGlscy9tYXBDYW52YXNCbGVuZE1vZGVzVG9QaXhpXCIpLHA9bihmKSx2PXQoXCIuLi8uLi91dGlsc1wiKSxnPXQoXCIuLi8uLi9jb25zdFwiKSx5PXQoXCIuLi8uLi9zZXR0aW5nc1wiKSxtPW4oeSksXz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHIsbixzKXtpKHRoaXMsZSk7dmFyIGE9byh0aGlzLHQuY2FsbCh0aGlzLFwiQ2FudmFzXCIscixuLHMpKTtyZXR1cm4gYS50eXBlPWcuUkVOREVSRVJfVFlQRS5DQU5WQVMsYS5yb290Q29udGV4dD1hLnZpZXcuZ2V0Q29udGV4dChcIjJkXCIse2FscGhhOmEudHJhbnNwYXJlbnR9KSxhLmNvbnRleHQ9YS5yb290Q29udGV4dCxhLnJlZnJlc2g9ITAsYS5tYXNrTWFuYWdlcj1uZXcgbC5kZWZhdWx0KGEpLGEuc21vb3RoUHJvcGVydHk9XCJpbWFnZVNtb290aGluZ0VuYWJsZWRcIixhLnJvb3RDb250ZXh0LmltYWdlU21vb3RoaW5nRW5hYmxlZHx8KGEucm9vdENvbnRleHQud2Via2l0SW1hZ2VTbW9vdGhpbmdFbmFibGVkP2Euc21vb3RoUHJvcGVydHk9XCJ3ZWJraXRJbWFnZVNtb290aGluZ0VuYWJsZWRcIjphLnJvb3RDb250ZXh0Lm1vekltYWdlU21vb3RoaW5nRW5hYmxlZD9hLnNtb290aFByb3BlcnR5PVwibW96SW1hZ2VTbW9vdGhpbmdFbmFibGVkXCI6YS5yb290Q29udGV4dC5vSW1hZ2VTbW9vdGhpbmdFbmFibGVkP2Euc21vb3RoUHJvcGVydHk9XCJvSW1hZ2VTbW9vdGhpbmdFbmFibGVkXCI6YS5yb290Q29udGV4dC5tc0ltYWdlU21vb3RoaW5nRW5hYmxlZCYmKGEuc21vb3RoUHJvcGVydHk9XCJtc0ltYWdlU21vb3RoaW5nRW5hYmxlZFwiKSksYS5pbml0UGx1Z2lucygpLGEuYmxlbmRNb2Rlcz0oMCxwLmRlZmF1bHQpKCksYS5fYWN0aXZlQmxlbmRNb2RlPW51bGwsYS5yZW5kZXJpbmdUb1NjcmVlbj0hMSxhLnJlc2l6ZShhLm9wdGlvbnMud2lkdGgsYS5vcHRpb25zLmhlaWdodCksYX1yZXR1cm4gcyhlLHQpLGUucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbih0LGUscixuLGkpe2lmKHRoaXMudmlldyl7dGhpcy5yZW5kZXJpbmdUb1NjcmVlbj0hZSx0aGlzLmVtaXQoXCJwcmVyZW5kZXJcIik7dmFyIG89dGhpcy5yZXNvbHV0aW9uO2U/KGU9ZS5iYXNlVGV4dHVyZXx8ZSxlLl9jYW52YXNSZW5kZXJUYXJnZXR8fChlLl9jYW52YXNSZW5kZXJUYXJnZXQ9bmV3IGQuZGVmYXVsdChlLndpZHRoLGUuaGVpZ2h0LGUucmVzb2x1dGlvbiksZS5zb3VyY2U9ZS5fY2FudmFzUmVuZGVyVGFyZ2V0LmNhbnZhcyxlLnZhbGlkPSEwKSx0aGlzLmNvbnRleHQ9ZS5fY2FudmFzUmVuZGVyVGFyZ2V0LmNvbnRleHQsdGhpcy5yZXNvbHV0aW9uPWUuX2NhbnZhc1JlbmRlclRhcmdldC5yZXNvbHV0aW9uKTp0aGlzLmNvbnRleHQ9dGhpcy5yb290Q29udGV4dDt2YXIgcz10aGlzLmNvbnRleHQ7aWYoZXx8KHRoaXMuX2xhc3RPYmplY3RSZW5kZXJlZD10KSwhaSl7dmFyIGE9dC5wYXJlbnQsdT10aGlzLl90ZW1wRGlzcGxheU9iamVjdFBhcmVudC50cmFuc2Zvcm0ud29ybGRUcmFuc2Zvcm07bj8obi5jb3B5KHUpLHRoaXMuX3RlbXBEaXNwbGF5T2JqZWN0UGFyZW50LnRyYW5zZm9ybS5fd29ybGRJRD0tMSk6dS5pZGVudGl0eSgpLHQucGFyZW50PXRoaXMuX3RlbXBEaXNwbGF5T2JqZWN0UGFyZW50LHQudXBkYXRlVHJhbnNmb3JtKCksdC5wYXJlbnQ9YX1zLnNhdmUoKSxzLnNldFRyYW5zZm9ybSgxLDAsMCwxLDAsMCkscy5nbG9iYWxBbHBoYT0xLHRoaXMuX2FjdGl2ZUJsZW5kTW9kZT1nLkJMRU5EX01PREVTLk5PUk1BTCxcbnMuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPXRoaXMuYmxlbmRNb2Rlc1tnLkJMRU5EX01PREVTLk5PUk1BTF0sbmF2aWdhdG9yLmlzQ29jb29uSlMmJnRoaXMudmlldy5zY3JlZW5jYW52YXMmJihzLmZpbGxTdHlsZT1cImJsYWNrXCIscy5jbGVhcigpKSwodm9pZCAwIT09cj9yOnRoaXMuY2xlYXJCZWZvcmVSZW5kZXIpJiZ0aGlzLnJlbmRlcmluZ1RvU2NyZWVuJiYodGhpcy50cmFuc3BhcmVudD9zLmNsZWFyUmVjdCgwLDAsdGhpcy53aWR0aCx0aGlzLmhlaWdodCk6KHMuZmlsbFN0eWxlPXRoaXMuX2JhY2tncm91bmRDb2xvclN0cmluZyxzLmZpbGxSZWN0KDAsMCx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0KSkpO3ZhciBoPXRoaXMuY29udGV4dDt0aGlzLmNvbnRleHQ9cyx0LnJlbmRlckNhbnZhcyh0aGlzKSx0aGlzLmNvbnRleHQ9aCxzLnJlc3RvcmUoKSx0aGlzLnJlc29sdXRpb249byx0aGlzLmVtaXQoXCJwb3N0cmVuZGVyXCIpfX0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZXh0O3Q9dHx8dGhpcy5fYmFja2dyb3VuZENvbG9yU3RyaW5nLCF0aGlzLnRyYW5zcGFyZW50JiZ0PyhlLmZpbGxTdHlsZT10LGUuZmlsbFJlY3QoMCwwLHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpKTplLmNsZWFyUmVjdCgwLDAsdGhpcy53aWR0aCx0aGlzLmhlaWdodCl9LGUucHJvdG90eXBlLnNldEJsZW5kTW9kZT1mdW5jdGlvbih0KXt0aGlzLl9hY3RpdmVCbGVuZE1vZGUhPT10JiYodGhpcy5fYWN0aXZlQmxlbmRNb2RlPXQsdGhpcy5jb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbj10aGlzLmJsZW5kTW9kZXNbdF0pfSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKGUpe3RoaXMuZGVzdHJveVBsdWdpbnMoKSx0LnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyxlKSx0aGlzLmNvbnRleHQ9bnVsbCx0aGlzLnJlZnJlc2g9ITAsdGhpcy5tYXNrTWFuYWdlci5kZXN0cm95KCksdGhpcy5tYXNrTWFuYWdlcj1udWxsLHRoaXMuc21vb3RoUHJvcGVydHk9bnVsbH0sZS5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKGUscil7dC5wcm90b3R5cGUucmVzaXplLmNhbGwodGhpcyxlLHIpLHRoaXMuc21vb3RoUHJvcGVydHkmJih0aGlzLnJvb3RDb250ZXh0W3RoaXMuc21vb3RoUHJvcGVydHldPW0uZGVmYXVsdC5TQ0FMRV9NT0RFPT09Zy5TQ0FMRV9NT0RFUy5MSU5FQVIpfSxlLnByb3RvdHlwZS5pbnZhbGlkYXRlQmxlbmRNb2RlPWZ1bmN0aW9uKCl7dGhpcy5fYWN0aXZlQmxlbmRNb2RlPXRoaXMuYmxlbmRNb2Rlcy5pbmRleE9mKHRoaXMuY29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24pfSxlfSh1LmRlZmF1bHQpO3IuZGVmYXVsdD1fLHYucGx1Z2luVGFyZ2V0Lm1peGluKF8pfSx7XCIuLi8uLi9jb25zdFwiOjQ2LFwiLi4vLi4vc2V0dGluZ3NcIjoxMDEsXCIuLi8uLi91dGlsc1wiOjEyNSxcIi4uL1N5c3RlbVJlbmRlcmVyXCI6NzYsXCIuL3V0aWxzL0NhbnZhc01hc2tNYW5hZ2VyXCI6NzgsXCIuL3V0aWxzL0NhbnZhc1JlbmRlclRhcmdldFwiOjc5LFwiLi91dGlscy9tYXBDYW52YXNCbGVuZE1vZGVzVG9QaXhpXCI6ODF9XSw3ODpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfXIuX19lc01vZHVsZT0hMDt2YXIgaT10KFwiLi4vLi4vLi4vY29uc3RcIiksbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7bih0aGlzLHQpLHRoaXMucmVuZGVyZXI9ZX1yZXR1cm4gdC5wcm90b3R5cGUucHVzaE1hc2s9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5yZW5kZXJlcjtlLmNvbnRleHQuc2F2ZSgpO3ZhciByPXQuYWxwaGEsbj10LnRyYW5zZm9ybS53b3JsZFRyYW5zZm9ybSxpPWUucmVzb2x1dGlvbjtlLmNvbnRleHQuc2V0VHJhbnNmb3JtKG4uYSppLG4uYippLG4uYyppLG4uZCppLG4udHgqaSxuLnR5KmkpLHQuX3RleHR1cmV8fCh0aGlzLnJlbmRlckdyYXBoaWNzU2hhcGUodCksZS5jb250ZXh0LmNsaXAoKSksdC53b3JsZEFscGhhPXJ9LHQucHJvdG90eXBlLnJlbmRlckdyYXBoaWNzU2hhcGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5yZW5kZXJlci5jb250ZXh0LHI9dC5ncmFwaGljc0RhdGEubGVuZ3RoO2lmKDAhPT1yKXtlLmJlZ2luUGF0aCgpO2Zvcih2YXIgbj0wO248cjtuKyspe3ZhciBvPXQuZ3JhcGhpY3NEYXRhW25dLHM9by5zaGFwZTtpZihvLnR5cGU9PT1pLlNIQVBFUy5QT0xZKXt2YXIgYT1zLnBvaW50cyx1PW8uaG9sZXMsaD12b2lkIDAsbD12b2lkIDA7ZS5tb3ZlVG8oYVswXSxhWzFdKTtmb3IodmFyIGM9MjtjPGEubGVuZ3RoO2MrPTIpZS5saW5lVG8oYVtjXSxhW2MrMV0pO2lmKGFbMF09PT1hW2EubGVuZ3RoLTJdJiZhWzFdPT09YVthLmxlbmd0aC0xXSYmZS5jbG9zZVBhdGgoKSx1Lmxlbmd0aD4wKXtoPTA7Zm9yKHZhciBkPTA7ZDxhLmxlbmd0aDtkKz0yKWgrPWFbZF0qYVtkKzNdLWFbZCsxXSphW2QrMl07Zm9yKHZhciBmPTA7Zjx1Lmxlbmd0aDtmKyspe2E9dVtmXS5wb2ludHMsbD0wO2Zvcih2YXIgcD0wO3A8YS5sZW5ndGg7cCs9MilsKz1hW3BdKmFbcCszXS1hW3ArMV0qYVtwKzJdO2lmKGUubW92ZVRvKGFbMF0sYVsxXSksbCpoPDApZm9yKHZhciB2PTI7djxhLmxlbmd0aDt2Kz0yKWUubGluZVRvKGFbdl0sYVt2KzFdKTtlbHNlIGZvcih2YXIgZz1hLmxlbmd0aC0yO2c+PTI7Zy09MillLmxpbmVUbyhhW2ddLGFbZysxXSl9fX1lbHNlIGlmKG8udHlwZT09PWkuU0hBUEVTLlJFQ1QpZS5yZWN0KHMueCxzLnkscy53aWR0aCxzLmhlaWdodCksZS5jbG9zZVBhdGgoKTtlbHNlIGlmKG8udHlwZT09PWkuU0hBUEVTLkNJUkMpZS5hcmMocy54LHMueSxzLnJhZGl1cywwLDIqTWF0aC5QSSksZS5jbG9zZVBhdGgoKTtlbHNlIGlmKG8udHlwZT09PWkuU0hBUEVTLkVMSVApe3ZhciB5PTIqcy53aWR0aCxtPTIqcy5oZWlnaHQsXz1zLngteS8yLGI9cy55LW0vMix4PXkvMiouNTUyMjg0OCxUPW0vMiouNTUyMjg0OCx3PV8reSxFPWIrbSxTPV8reS8yLE89YittLzI7ZS5tb3ZlVG8oXyxPKSxlLmJlemllckN1cnZlVG8oXyxPLVQsUy14LGIsUyxiKSxlLmJlemllckN1cnZlVG8oUyt4LGIsdyxPLVQsdyxPKSxlLmJlemllckN1cnZlVG8odyxPK1QsUyt4LEUsUyxFKSxlLmJlemllckN1cnZlVG8oUy14LEUsXyxPK1QsXyxPKSxlLmNsb3NlUGF0aCgpfWVsc2UgaWYoby50eXBlPT09aS5TSEFQRVMuUlJFQyl7dmFyIE09cy54LFA9cy55LEM9cy53aWR0aCxSPXMuaGVpZ2h0LEE9cy5yYWRpdXMsST1NYXRoLm1pbihDLFIpLzJ8MDtBPUE+ST9JOkEsZS5tb3ZlVG8oTSxQK0EpLGUubGluZVRvKE0sUCtSLUEpLGUucXVhZHJhdGljQ3VydmVUbyhNLFArUixNK0EsUCtSKSxlLmxpbmVUbyhNK0MtQSxQK1IpLGUucXVhZHJhdGljQ3VydmVUbyhNK0MsUCtSLE0rQyxQK1ItQSksZS5saW5lVG8oTStDLFArQSksZS5xdWFkcmF0aWNDdXJ2ZVRvKE0rQyxQLE0rQy1BLFApLGUubGluZVRvKE0rQSxQKSxlLnF1YWRyYXRpY0N1cnZlVG8oTSxQLE0sUCtBKSxlLmNsb3NlUGF0aCgpfX19fSx0LnByb3RvdHlwZS5wb3BNYXNrPWZ1bmN0aW9uKHQpe3QuY29udGV4dC5yZXN0b3JlKCksdC5pbnZhbGlkYXRlQmxlbmRNb2RlKCl9LHQucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt9LHR9KCk7ci5kZWZhdWx0PW99LHtcIi4uLy4uLy4uL2NvbnN0XCI6NDZ9XSw3OTpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfXIuX19lc01vZHVsZT0hMDt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG49ZVtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbihlLHIsbil7cmV0dXJuIHImJnQoZS5wcm90b3R5cGUsciksbiYmdChlLG4pLGV9fSgpLG89dChcIi4uLy4uLy4uL3NldHRpbmdzXCIpLHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShvKSxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLHIsaSl7bih0aGlzLHQpLHRoaXMuY2FudmFzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksdGhpcy5jb250ZXh0PXRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSx0aGlzLnJlc29sdXRpb249aXx8cy5kZWZhdWx0LlJFU09MVVRJT04sdGhpcy5yZXNpemUoZSxyKX1yZXR1cm4gdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmNvbnRleHQuc2V0VHJhbnNmb3JtKDEsMCwwLDEsMCwwKSx0aGlzLmNvbnRleHQuY2xlYXJSZWN0KDAsMCx0aGlzLmNhbnZhcy53aWR0aCx0aGlzLmNhbnZhcy5oZWlnaHQpfSx0LnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24odCxlKXt0aGlzLmNhbnZhcy53aWR0aD10KnRoaXMucmVzb2x1dGlvbix0aGlzLmNhbnZhcy5oZWlnaHQ9ZSp0aGlzLnJlc29sdXRpb259LHQucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmNvbnRleHQ9bnVsbCx0aGlzLmNhbnZhcz1udWxsfSxpKHQsW3trZXk6XCJ3aWR0aFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNhbnZhcy53aWR0aH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuY2FudmFzLndpZHRoPXR9fSx7a2V5OlwiaGVpZ2h0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FudmFzLmhlaWdodH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuY2FudmFzLmhlaWdodD10fX1dKSx0fSgpO3IuZGVmYXVsdD1hfSx7XCIuLi8uLi8uLi9zZXR0aW5nc1wiOjEwMX1dLDgwOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO2Uud2lkdGg9NixlLmhlaWdodD0xO3ZhciByPWUuZ2V0Q29udGV4dChcIjJkXCIpO3JldHVybiByLmZpbGxTdHlsZT10LHIuZmlsbFJlY3QoMCwwLDYsMSksZX1mdW5jdGlvbiBpKCl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGRvY3VtZW50KXJldHVybiExO3ZhciB0PW4oXCIjZmYwMGZmXCIpLGU9bihcIiNmZmZmMDBcIikscj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO3Iud2lkdGg9NixyLmhlaWdodD0xO3ZhciBpPXIuZ2V0Q29udGV4dChcIjJkXCIpO2kuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPVwibXVsdGlwbHlcIixpLmRyYXdJbWFnZSh0LDAsMCksaS5kcmF3SW1hZ2UoZSwyLDApO3ZhciBvPWkuZ2V0SW1hZ2VEYXRhKDIsMCwxLDEpO2lmKCFvKXJldHVybiExO3ZhciBzPW8uZGF0YTtyZXR1cm4gMjU1PT09c1swXSYmMD09PXNbMV0mJjA9PT1zWzJdfXIuX19lc01vZHVsZT0hMCxyLmRlZmF1bHQ9aX0se31dLDgxOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpbXTtyZXR1cm4oMCxzLmRlZmF1bHQpKCk/KHRbaS5CTEVORF9NT0RFUy5OT1JNQUxdPVwic291cmNlLW92ZXJcIix0W2kuQkxFTkRfTU9ERVMuQUREXT1cImxpZ2h0ZXJcIix0W2kuQkxFTkRfTU9ERVMuTVVMVElQTFldPVwibXVsdGlwbHlcIix0W2kuQkxFTkRfTU9ERVMuU0NSRUVOXT1cInNjcmVlblwiLHRbaS5CTEVORF9NT0RFUy5PVkVSTEFZXT1cIm92ZXJsYXlcIix0W2kuQkxFTkRfTU9ERVMuREFSS0VOXT1cImRhcmtlblwiLHRbaS5CTEVORF9NT0RFUy5MSUdIVEVOXT1cImxpZ2h0ZW5cIix0W2kuQkxFTkRfTU9ERVMuQ09MT1JfRE9ER0VdPVwiY29sb3ItZG9kZ2VcIix0W2kuQkxFTkRfTU9ERVMuQ09MT1JfQlVSTl09XCJjb2xvci1idXJuXCIsdFtpLkJMRU5EX01PREVTLkhBUkRfTElHSFRdPVwiaGFyZC1saWdodFwiLHRbaS5CTEVORF9NT0RFUy5TT0ZUX0xJR0hUXT1cInNvZnQtbGlnaHRcIix0W2kuQkxFTkRfTU9ERVMuRElGRkVSRU5DRV09XCJkaWZmZXJlbmNlXCIsdFtpLkJMRU5EX01PREVTLkVYQ0xVU0lPTl09XCJleGNsdXNpb25cIix0W2kuQkxFTkRfTU9ERVMuSFVFXT1cImh1ZVwiLHRbaS5CTEVORF9NT0RFUy5TQVRVUkFUSU9OXT1cInNhdHVyYXRlXCIsdFtpLkJMRU5EX01PREVTLkNPTE9SXT1cImNvbG9yXCIsdFtpLkJMRU5EX01PREVTLkxVTUlOT1NJVFldPVwibHVtaW5vc2l0eVwiKToodFtpLkJMRU5EX01PREVTLk5PUk1BTF09XCJzb3VyY2Utb3ZlclwiLHRbaS5CTEVORF9NT0RFUy5BRERdPVwibGlnaHRlclwiLHRbaS5CTEVORF9NT0RFUy5NVUxUSVBMWV09XCJzb3VyY2Utb3ZlclwiLHRbaS5CTEVORF9NT0RFUy5TQ1JFRU5dPVwic291cmNlLW92ZXJcIix0W2kuQkxFTkRfTU9ERVMuT1ZFUkxBWV09XCJzb3VyY2Utb3ZlclwiLHRbaS5CTEVORF9NT0RFUy5EQVJLRU5dPVwic291cmNlLW92ZXJcIix0W2kuQkxFTkRfTU9ERVMuTElHSFRFTl09XCJzb3VyY2Utb3ZlclwiLHRbaS5CTEVORF9NT0RFUy5DT0xPUl9ET0RHRV09XCJzb3VyY2Utb3ZlclwiLHRbaS5CTEVORF9NT0RFUy5DT0xPUl9CVVJOXT1cInNvdXJjZS1vdmVyXCIsdFtpLkJMRU5EX01PREVTLkhBUkRfTElHSFRdPVwic291cmNlLW92ZXJcIix0W2kuQkxFTkRfTU9ERVMuU09GVF9MSUdIVF09XCJzb3VyY2Utb3ZlclwiLHRbaS5CTEVORF9NT0RFUy5ESUZGRVJFTkNFXT1cInNvdXJjZS1vdmVyXCIsdFtpLkJMRU5EX01PREVTLkVYQ0xVU0lPTl09XCJzb3VyY2Utb3ZlclwiLHRbaS5CTEVORF9NT0RFUy5IVUVdPVwic291cmNlLW92ZXJcIix0W2kuQkxFTkRfTU9ERVMuU0FUVVJBVElPTl09XCJzb3VyY2Utb3ZlclwiLHRbaS5CTEVORF9NT0RFUy5DT0xPUl09XCJzb3VyY2Utb3ZlclwiLHRbaS5CTEVORF9NT0RFUy5MVU1JTk9TSVRZXT1cInNvdXJjZS1vdmVyXCIpLHRbaS5CTEVORF9NT0RFUy5OT1JNQUxfTlBNXT10W2kuQkxFTkRfTU9ERVMuTk9STUFMXSx0W2kuQkxFTkRfTU9ERVMuQUREX05QTV09dFtpLkJMRU5EX01PREVTLkFERF0sdFtpLkJMRU5EX01PREVTLlNDUkVFTl9OUE1dPXRbaS5CTEVORF9NT0RFUy5TQ1JFRU5dLHR9ci5fX2VzTW9kdWxlPSEwLHIuZGVmYXVsdD1uO3ZhciBpPXQoXCIuLi8uLi8uLi9jb25zdFwiKSxvPXQoXCIuL2NhblVzZU5ld0NhbnZhc0JsZW5kTW9kZXNcIikscz1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KG8pfSx7XCIuLi8uLi8uLi9jb25zdFwiOjQ2LFwiLi9jYW5Vc2VOZXdDYW52YXNCbGVuZE1vZGVzXCI6ODB9XSw4MjpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfXIuX19lc01vZHVsZT0hMDt2YXIgaT10KFwiLi4vLi4vY29uc3RcIiksbz10KFwiLi4vLi4vc2V0dGluZ3NcIikscz1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KG8pLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe24odGhpcyx0KSx0aGlzLnJlbmRlcmVyPWUsdGhpcy5jb3VudD0wLHRoaXMuY2hlY2tDb3VudD0wLHRoaXMubWF4SWRsZT1zLmRlZmF1bHQuR0NfTUFYX0lETEUsdGhpcy5jaGVja0NvdW50TWF4PXMuZGVmYXVsdC5HQ19NQVhfQ0hFQ0tfQ09VTlQsdGhpcy5tb2RlPXMuZGVmYXVsdC5HQ19NT0RFfXJldHVybiB0LnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt0aGlzLmNvdW50KyssdGhpcy5tb2RlIT09aS5HQ19NT0RFUy5NQU5VQUwmJisrdGhpcy5jaGVja0NvdW50PnRoaXMuY2hlY2tDb3VudE1heCYmKHRoaXMuY2hlY2tDb3VudD0wLHRoaXMucnVuKCkpfSx0LnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5yZW5kZXJlci50ZXh0dXJlTWFuYWdlcixlPXQuX21hbmFnZWRUZXh0dXJlcyxyPSExLG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTshaS5fZ2xSZW5kZXJUYXJnZXRzJiZ0aGlzLmNvdW50LWkudG91Y2hlZD50aGlzLm1heElkbGUmJih0LmRlc3Ryb3lUZXh0dXJlKGksITApLGVbbl09bnVsbCxyPSEwKX1pZihyKXtmb3IodmFyIG89MCxzPTA7czxlLmxlbmd0aDtzKyspbnVsbCE9PWVbc10mJihlW28rK109ZVtzXSk7ZS5sZW5ndGg9b319LHQucHJvdG90eXBlLnVubG9hZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnJlbmRlcmVyLnRleHR1cmVNYW5hZ2VyO3QuX3RleHR1cmUmJnQuX3RleHR1cmUuX2dsUmVuZGVyVGFyZ2V0cyYmZS5kZXN0cm95VGV4dHVyZSh0Ll90ZXh0dXJlLCEwKTtmb3IodmFyIHI9dC5jaGlsZHJlbi5sZW5ndGgtMTtyPj0wO3ItLSl0aGlzLnVubG9hZCh0LmNoaWxkcmVuW3JdKX0sdH0oKTtyLmRlZmF1bHQ9YX0se1wiLi4vLi4vY29uc3RcIjo0NixcIi4uLy4uL3NldHRpbmdzXCI6MTAxfV0sODM6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1yLl9fZXNNb2R1bGU9ITA7dmFyIGk9dChcInBpeGktZ2wtY29yZVwiKSxvPXQoXCIuLi8uLi9jb25zdFwiKSxzPXQoXCIuL3V0aWxzL1JlbmRlclRhcmdldFwiKSxhPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0ocyksdT10KFwiLi4vLi4vdXRpbHNcIiksaD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7bih0aGlzLHQpLHRoaXMucmVuZGVyZXI9ZSx0aGlzLmdsPWUuZ2wsdGhpcy5fbWFuYWdlZFRleHR1cmVzPVtdfXJldHVybiB0LnByb3RvdHlwZS5iaW5kVGV4dHVyZT1mdW5jdGlvbigpe30sdC5wcm90b3R5cGUuZ2V0VGV4dHVyZT1mdW5jdGlvbigpe30sdC5wcm90b3R5cGUudXBkYXRlVGV4dHVyZT1mdW5jdGlvbih0LGUpe3ZhciByPXRoaXMuZ2wsbj0hIXQuX2dsUmVuZGVyVGFyZ2V0cztpZighdC5oYXNMb2FkZWQpcmV0dXJuIG51bGw7dmFyIHM9dGhpcy5yZW5kZXJlci5ib3VuZFRleHR1cmVzO2lmKHZvaWQgMD09PWUpe2U9MDtmb3IodmFyIHU9MDt1PHMubGVuZ3RoOysrdSlpZihzW3VdPT09dCl7ZT11O2JyZWFrfX1zW2VdPXQsci5hY3RpdmVUZXh0dXJlKHIuVEVYVFVSRTArZSk7dmFyIGg9dC5fZ2xUZXh0dXJlc1t0aGlzLnJlbmRlcmVyLkNPTlRFWFRfVUlEXTtpZihoKW4/dC5fZ2xSZW5kZXJUYXJnZXRzW3RoaXMucmVuZGVyZXIuQ09OVEVYVF9VSURdLnJlc2l6ZSh0LndpZHRoLHQuaGVpZ2h0KTpoLnVwbG9hZCh0LnNvdXJjZSk7ZWxzZXtpZihuKXt2YXIgbD1uZXcgYS5kZWZhdWx0KHRoaXMuZ2wsdC53aWR0aCx0LmhlaWdodCx0LnNjYWxlTW9kZSx0LnJlc29sdXRpb24pO2wucmVzaXplKHQud2lkdGgsdC5oZWlnaHQpLHQuX2dsUmVuZGVyVGFyZ2V0c1t0aGlzLnJlbmRlcmVyLkNPTlRFWFRfVUlEXT1sLGg9bC50ZXh0dXJlLHRoaXMucmVuZGVyZXIuX2FjdGl2ZVJlbmRlclRhcmdldC5yb290fHx0aGlzLnJlbmRlcmVyLl9hY3RpdmVSZW5kZXJUYXJnZXQuZnJhbWVCdWZmZXIuYmluZCgpfWVsc2UgaD1uZXcgaS5HTFRleHR1cmUodGhpcy5nbCxudWxsLG51bGwsbnVsbCxudWxsKSxoLmJpbmQoZSksaC5wcmVtdWx0aXBseUFscGhhPSEwLGgudXBsb2FkKHQuc291cmNlKTt0Ll9nbFRleHR1cmVzW3RoaXMucmVuZGVyZXIuQ09OVEVYVF9VSURdPWgsdC5vbihcInVwZGF0ZVwiLHRoaXMudXBkYXRlVGV4dHVyZSx0aGlzKSx0Lm9uKFwiZGlzcG9zZVwiLHRoaXMuZGVzdHJveVRleHR1cmUsdGhpcyksdGhpcy5fbWFuYWdlZFRleHR1cmVzLnB1c2godCksdC5pc1Bvd2VyT2ZUd28/KHQubWlwbWFwJiZoLmVuYWJsZU1pcG1hcCgpLHQud3JhcE1vZGU9PT1vLldSQVBfTU9ERVMuQ0xBTVA/aC5lbmFibGVXcmFwQ2xhbXAoKTp0LndyYXBNb2RlPT09by5XUkFQX01PREVTLlJFUEVBVD9oLmVuYWJsZVdyYXBSZXBlYXQoKTpoLmVuYWJsZVdyYXBNaXJyb3JSZXBlYXQoKSk6aC5lbmFibGVXcmFwQ2xhbXAoKSx0LnNjYWxlTW9kZT09PW8uU0NBTEVfTU9ERVMuTkVBUkVTVD9oLmVuYWJsZU5lYXJlc3RTY2FsaW5nKCk6aC5lbmFibGVMaW5lYXJTY2FsaW5nKCl9cmV0dXJuIGh9LHQucHJvdG90eXBlLmRlc3Ryb3lUZXh0dXJlPWZ1bmN0aW9uKHQsZSl7aWYodD10LmJhc2VUZXh0dXJlfHx0LHQuaGFzTG9hZGVkKXt2YXIgcj10aGlzLnJlbmRlcmVyLG49ci5DT05URVhUX1VJRCxpPXQuX2dsVGV4dHVyZXMsbz10Ll9nbFJlbmRlclRhcmdldHM7aWYoaVtuXSYmKHIudW5iaW5kVGV4dHVyZSh0KSxpW25dLmRlc3Ryb3koKSx0Lm9mZihcInVwZGF0ZVwiLHRoaXMudXBkYXRlVGV4dHVyZSx0aGlzKSx0Lm9mZihcImRpc3Bvc2VcIix0aGlzLmRlc3Ryb3lUZXh0dXJlLHRoaXMpLGRlbGV0ZSBpW25dLCFlKSl7dmFyIHM9dGhpcy5fbWFuYWdlZFRleHR1cmVzLmluZGV4T2YodCk7LTEhPT1zJiYoMCx1LnJlbW92ZUl0ZW1zKSh0aGlzLl9tYW5hZ2VkVGV4dHVyZXMscywxKX1vJiZvW25dJiYoci5fYWN0aXZlUmVuZGVyVGFyZ2V0PT09b1tuXSYmci5iaW5kUmVuZGVyVGFyZ2V0KHIucm9vdFJlbmRlclRhcmdldCksb1tuXS5kZXN0cm95KCksZGVsZXRlIG9bbl0pfX0sdC5wcm90b3R5cGUucmVtb3ZlQWxsPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLl9tYW5hZ2VkVGV4dHVyZXMubGVuZ3RoOysrdCl7dmFyIGU9dGhpcy5fbWFuYWdlZFRleHR1cmVzW3RdO2UuX2dsVGV4dHVyZXNbdGhpcy5yZW5kZXJlci5DT05URVhUX1VJRF0mJmRlbGV0ZSBlLl9nbFRleHR1cmVzW3RoaXMucmVuZGVyZXIuQ09OVEVYVF9VSURdfX0sdC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5fbWFuYWdlZFRleHR1cmVzLmxlbmd0aDsrK3Qpe3ZhciBlPXRoaXMuX21hbmFnZWRUZXh0dXJlc1t0XTt0aGlzLmRlc3Ryb3lUZXh0dXJlKGUsITApLGUub2ZmKFwidXBkYXRlXCIsdGhpcy51cGRhdGVUZXh0dXJlLHRoaXMpLGUub2ZmKFwiZGlzcG9zZVwiLHRoaXMuZGVzdHJveVRleHR1cmUsdGhpcyl9dGhpcy5fbWFuYWdlZFRleHR1cmVzPW51bGx9LHR9KCk7ci5kZWZhdWx0PWh9LHtcIi4uLy4uL2NvbnN0XCI6NDYsXCIuLi8uLi91dGlsc1wiOjEyNSxcIi4vdXRpbHMvUmVuZGVyVGFyZ2V0XCI6OTYsXCJwaXhpLWdsLWNvcmVcIjoxNX1dLDg0OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIHModCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1yLl9fZXNNb2R1bGU9ITA7dmFyIGE9dChcIi4uL1N5c3RlbVJlbmRlcmVyXCIpLHU9bihhKSxoPXQoXCIuL21hbmFnZXJzL01hc2tNYW5hZ2VyXCIpLGw9bihoKSxjPXQoXCIuL21hbmFnZXJzL1N0ZW5jaWxNYW5hZ2VyXCIpLGQ9bihjKSxmPXQoXCIuL21hbmFnZXJzL0ZpbHRlck1hbmFnZXJcIikscD1uKGYpLHY9dChcIi4vdXRpbHMvUmVuZGVyVGFyZ2V0XCIpLGc9bih2KSx5PXQoXCIuL3V0aWxzL09iamVjdFJlbmRlcmVyXCIpLG09bih5KSxfPXQoXCIuL1RleHR1cmVNYW5hZ2VyXCIpLGI9bihfKSx4PXQoXCIuLi8uLi90ZXh0dXJlcy9CYXNlVGV4dHVyZVwiKSxUPW4oeCksdz10KFwiLi9UZXh0dXJlR2FyYmFnZUNvbGxlY3RvclwiKSxFPW4odyksUz10KFwiLi9XZWJHTFN0YXRlXCIpLE89bihTKSxNPXQoXCIuL3V0aWxzL21hcFdlYkdMRHJhd01vZGVzVG9QaXhpXCIpLFA9bihNKSxDPXQoXCIuL3V0aWxzL3ZhbGlkYXRlQ29udGV4dFwiKSxSPW4oQyksQT10KFwiLi4vLi4vdXRpbHNcIiksST10KFwicGl4aS1nbC1jb3JlXCIpLEQ9bihJKSxMPXQoXCIuLi8uLi9jb25zdFwiKSxOPTAsQj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHIsbixzKXtpKHRoaXMsZSk7dmFyIGE9byh0aGlzLHQuY2FsbCh0aGlzLFwiV2ViR0xcIixyLG4scykpO3JldHVybiBhLmxlZ2FjeT1hLm9wdGlvbnMubGVnYWN5LGEubGVnYWN5JiYoRC5kZWZhdWx0LlZlcnRleEFycmF5T2JqZWN0LkZPUkNFX05BVElWRT0hMCksYS50eXBlPUwuUkVOREVSRVJfVFlQRS5XRUJHTCxhLmhhbmRsZUNvbnRleHRMb3N0PWEuaGFuZGxlQ29udGV4dExvc3QuYmluZChhKSxhLmhhbmRsZUNvbnRleHRSZXN0b3JlZD1hLmhhbmRsZUNvbnRleHRSZXN0b3JlZC5iaW5kKGEpLGEudmlldy5hZGRFdmVudExpc3RlbmVyKFwid2ViZ2xjb250ZXh0bG9zdFwiLGEuaGFuZGxlQ29udGV4dExvc3QsITEpLGEudmlldy5hZGRFdmVudExpc3RlbmVyKFwid2ViZ2xjb250ZXh0cmVzdG9yZWRcIixhLmhhbmRsZUNvbnRleHRSZXN0b3JlZCwhMSksYS5fY29udGV4dE9wdGlvbnM9e2FscGhhOmEudHJhbnNwYXJlbnQsYW50aWFsaWFzOmEub3B0aW9ucy5hbnRpYWxpYXMscHJlbXVsdGlwbGllZEFscGhhOmEudHJhbnNwYXJlbnQmJlwibm90TXVsdGlwbGllZFwiIT09YS50cmFuc3BhcmVudCxzdGVuY2lsOiEwLHByZXNlcnZlRHJhd2luZ0J1ZmZlcjphLm9wdGlvbnMucHJlc2VydmVEcmF3aW5nQnVmZmVyLHBvd2VyUHJlZmVyZW5jZTphLm9wdGlvbnMucG93ZXJQcmVmZXJlbmNlfSxhLl9iYWNrZ3JvdW5kQ29sb3JSZ2JhWzNdPWEudHJhbnNwYXJlbnQ/MDoxLGEubWFza01hbmFnZXI9bmV3IGwuZGVmYXVsdChhKSxhLnN0ZW5jaWxNYW5hZ2VyPW5ldyBkLmRlZmF1bHQoYSksYS5lbXB0eVJlbmRlcmVyPW5ldyBtLmRlZmF1bHQoYSksYS5jdXJyZW50UmVuZGVyZXI9YS5lbXB0eVJlbmRlcmVyLGEudGV4dHVyZU1hbmFnZXI9bnVsbCxhLmZpbHRlck1hbmFnZXI9bnVsbCxhLmluaXRQbHVnaW5zKCksYS5vcHRpb25zLmNvbnRleHQmJigwLFIuZGVmYXVsdCkoYS5vcHRpb25zLmNvbnRleHQpLGEuZ2w9YS5vcHRpb25zLmNvbnRleHR8fEQuZGVmYXVsdC5jcmVhdGVDb250ZXh0KGEudmlldyxhLl9jb250ZXh0T3B0aW9ucyksYS5DT05URVhUX1VJRD1OKyssYS5zdGF0ZT1uZXcgTy5kZWZhdWx0KGEuZ2wpLGEucmVuZGVyaW5nVG9TY3JlZW49ITAsYS5ib3VuZFRleHR1cmVzPW51bGwsYS5fYWN0aXZlU2hhZGVyPW51bGwsYS5fYWN0aXZlVmFvPW51bGwsYS5fYWN0aXZlUmVuZGVyVGFyZ2V0PW51bGwsYS5faW5pdENvbnRleHQoKSxhLmRyYXdNb2Rlcz0oMCxQLmRlZmF1bHQpKGEuZ2wpLGEuX25leHRUZXh0dXJlTG9jYXRpb249MCxhLnNldEJsZW5kTW9kZSgwKSxhfXJldHVybiBzKGUsdCksZS5wcm90b3R5cGUuX2luaXRDb250ZXh0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nbDt0LmlzQ29udGV4dExvc3QoKSYmdC5nZXRFeHRlbnNpb24oXCJXRUJHTF9sb3NlX2NvbnRleHRcIikmJnQuZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfbG9zZV9jb250ZXh0XCIpLnJlc3RvcmVDb250ZXh0KCk7dmFyIGU9dC5nZXRQYXJhbWV0ZXIodC5NQVhfVEVYVFVSRV9JTUFHRV9VTklUUyk7dGhpcy5fYWN0aXZlU2hhZGVyPW51bGwsdGhpcy5fYWN0aXZlVmFvPW51bGwsdGhpcy5ib3VuZFRleHR1cmVzPW5ldyBBcnJheShlKSx0aGlzLmVtcHR5VGV4dHVyZXM9bmV3IEFycmF5KGUpLHRoaXMuX3Vua25vd25Cb3VuZFRleHR1cmVzPSExLHRoaXMudGV4dHVyZU1hbmFnZXI9bmV3IGIuZGVmYXVsdCh0aGlzKSx0aGlzLmZpbHRlck1hbmFnZXI9bmV3IHAuZGVmYXVsdCh0aGlzKSx0aGlzLnRleHR1cmVHQz1uZXcgRS5kZWZhdWx0KHRoaXMpLHRoaXMuc3RhdGUucmVzZXRUb0RlZmF1bHQoKSx0aGlzLnJvb3RSZW5kZXJUYXJnZXQ9bmV3IGcuZGVmYXVsdCh0LHRoaXMud2lkdGgsdGhpcy5oZWlnaHQsbnVsbCx0aGlzLnJlc29sdXRpb24sITApLHRoaXMucm9vdFJlbmRlclRhcmdldC5jbGVhckNvbG9yPXRoaXMuX2JhY2tncm91bmRDb2xvclJnYmEsdGhpcy5iaW5kUmVuZGVyVGFyZ2V0KHRoaXMucm9vdFJlbmRlclRhcmdldCk7dmFyIHI9bmV3IEQuZGVmYXVsdC5HTFRleHR1cmUuZnJvbURhdGEodCxudWxsLDEsMSksbj17X2dsVGV4dHVyZXM6e319O24uX2dsVGV4dHVyZXNbdGhpcy5DT05URVhUX1VJRF09e307Zm9yKHZhciBpPTA7aTxlO2krKyl7dmFyIG89bmV3IFQuZGVmYXVsdDtvLl9nbFRleHR1cmVzW3RoaXMuQ09OVEVYVF9VSURdPXIsdGhpcy5ib3VuZFRleHR1cmVzW2ldPW4sdGhpcy5lbXB0eVRleHR1cmVzW2ldPW8sdGhpcy5iaW5kVGV4dHVyZShudWxsLGkpfXRoaXMuZW1pdChcImNvbnRleHRcIix0KSx0aGlzLnJlc2l6ZSh0aGlzLnNjcmVlbi53aWR0aCx0aGlzLnNjcmVlbi5oZWlnaHQpfSxlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24odCxlLHIsbixpKXtpZih0aGlzLnJlbmRlcmluZ1RvU2NyZWVuPSFlLHRoaXMuZW1pdChcInByZXJlbmRlclwiKSx0aGlzLmdsJiYhdGhpcy5nbC5pc0NvbnRleHRMb3N0KCkpe2lmKHRoaXMuX25leHRUZXh0dXJlTG9jYXRpb249MCxlfHwodGhpcy5fbGFzdE9iamVjdFJlbmRlcmVkPXQpLCFpKXt2YXIgbz10LnBhcmVudDt0LnBhcmVudD10aGlzLl90ZW1wRGlzcGxheU9iamVjdFBhcmVudCx0LnVwZGF0ZVRyYW5zZm9ybSgpLHQucGFyZW50PW99dGhpcy5iaW5kUmVuZGVyVGV4dHVyZShlLG4pLHRoaXMuY3VycmVudFJlbmRlcmVyLnN0YXJ0KCksKHZvaWQgMCE9PXI/cjp0aGlzLmNsZWFyQmVmb3JlUmVuZGVyKSYmdGhpcy5fYWN0aXZlUmVuZGVyVGFyZ2V0LmNsZWFyKCksdC5yZW5kZXJXZWJHTCh0aGlzKSx0aGlzLmN1cnJlbnRSZW5kZXJlci5mbHVzaCgpLHRoaXMudGV4dHVyZUdDLnVwZGF0ZSgpLHRoaXMuZW1pdChcInBvc3RyZW5kZXJcIil9fSxlLnByb3RvdHlwZS5zZXRPYmplY3RSZW5kZXJlcj1mdW5jdGlvbih0KXt0aGlzLmN1cnJlbnRSZW5kZXJlciE9PXQmJih0aGlzLmN1cnJlbnRSZW5kZXJlci5zdG9wKCksdGhpcy5jdXJyZW50UmVuZGVyZXI9dCx0aGlzLmN1cnJlbnRSZW5kZXJlci5zdGFydCgpKX0sZS5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oKXt0aGlzLnNldE9iamVjdFJlbmRlcmVyKHRoaXMuZW1wdHlSZW5kZXJlcil9LGUucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbih0LGUpe3UuZGVmYXVsdC5wcm90b3R5cGUucmVzaXplLmNhbGwodGhpcyx0LGUpLHRoaXMucm9vdFJlbmRlclRhcmdldC5yZXNpemUodCxlKSx0aGlzLl9hY3RpdmVSZW5kZXJUYXJnZXQ9PT10aGlzLnJvb3RSZW5kZXJUYXJnZXQmJih0aGlzLnJvb3RSZW5kZXJUYXJnZXQuYWN0aXZhdGUoKSx0aGlzLl9hY3RpdmVTaGFkZXImJih0aGlzLl9hY3RpdmVTaGFkZXIudW5pZm9ybXMucHJvamVjdGlvbk1hdHJpeD10aGlzLnJvb3RSZW5kZXJUYXJnZXQucHJvamVjdGlvbk1hdHJpeC50b0FycmF5KCEwKSkpfSxlLnByb3RvdHlwZS5zZXRCbGVuZE1vZGU9ZnVuY3Rpb24odCl7dGhpcy5zdGF0ZS5zZXRCbGVuZE1vZGUodCl9LGUucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKHQpe3RoaXMuX2FjdGl2ZVJlbmRlclRhcmdldC5jbGVhcih0KX0sZS5wcm90b3R5cGUuc2V0VHJhbnNmb3JtPWZ1bmN0aW9uKHQpe3RoaXMuX2FjdGl2ZVJlbmRlclRhcmdldC50cmFuc2Zvcm09dH0sZS5wcm90b3R5cGUuY2xlYXJSZW5kZXJUZXh0dXJlPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dC5iYXNlVGV4dHVyZSxuPXIuX2dsUmVuZGVyVGFyZ2V0c1t0aGlzLkNPTlRFWFRfVUlEXTtyZXR1cm4gbiYmbi5jbGVhcihlKSx0aGlzfSxlLnByb3RvdHlwZS5iaW5kUmVuZGVyVGV4dHVyZT1mdW5jdGlvbih0LGUpe3ZhciByPXZvaWQgMDtpZih0KXt2YXIgbj10LmJhc2VUZXh0dXJlO24uX2dsUmVuZGVyVGFyZ2V0c1t0aGlzLkNPTlRFWFRfVUlEXXx8dGhpcy50ZXh0dXJlTWFuYWdlci51cGRhdGVUZXh0dXJlKG4sMCksdGhpcy51bmJpbmRUZXh0dXJlKG4pLHI9bi5fZ2xSZW5kZXJUYXJnZXRzW3RoaXMuQ09OVEVYVF9VSURdLHIuc2V0RnJhbWUodC5mcmFtZSl9ZWxzZSByPXRoaXMucm9vdFJlbmRlclRhcmdldDtyZXR1cm4gci50cmFuc2Zvcm09ZSx0aGlzLmJpbmRSZW5kZXJUYXJnZXQociksdGhpc30sZS5wcm90b3R5cGUuYmluZFJlbmRlclRhcmdldD1mdW5jdGlvbih0KXtyZXR1cm4gdCE9PXRoaXMuX2FjdGl2ZVJlbmRlclRhcmdldCYmKHRoaXMuX2FjdGl2ZVJlbmRlclRhcmdldD10LHQuYWN0aXZhdGUoKSx0aGlzLl9hY3RpdmVTaGFkZXImJih0aGlzLl9hY3RpdmVTaGFkZXIudW5pZm9ybXMucHJvamVjdGlvbk1hdHJpeD10LnByb2plY3Rpb25NYXRyaXgudG9BcnJheSghMCkpLHRoaXMuc3RlbmNpbE1hbmFnZXIuc2V0TWFza1N0YWNrKHQuc3RlbmNpbE1hc2tTdGFjaykpLHRoaXN9LGUucHJvdG90eXBlLmJpbmRTaGFkZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fYWN0aXZlU2hhZGVyIT09dCYmKHRoaXMuX2FjdGl2ZVNoYWRlcj10LHQuYmluZCgpLCExIT09ZSYmKHQudW5pZm9ybXMucHJvamVjdGlvbk1hdHJpeD10aGlzLl9hY3RpdmVSZW5kZXJUYXJnZXQucHJvamVjdGlvbk1hdHJpeC50b0FycmF5KCEwKSkpLHRoaXN9LGUucHJvdG90eXBlLmJpbmRUZXh0dXJlPWZ1bmN0aW9uKHQsZSxyKXtpZih0PXR8fHRoaXMuZW1wdHlUZXh0dXJlc1tlXSx0PXQuYmFzZVRleHR1cmV8fHQsdC50b3VjaGVkPXRoaXMudGV4dHVyZUdDLmNvdW50LHIpZT1lfHwwO2Vsc2V7Zm9yKHZhciBuPTA7bjx0aGlzLmJvdW5kVGV4dHVyZXMubGVuZ3RoO24rKylpZih0aGlzLmJvdW5kVGV4dHVyZXNbbl09PT10KXJldHVybiBuO3ZvaWQgMD09PWUmJih0aGlzLl9uZXh0VGV4dHVyZUxvY2F0aW9uKyssdGhpcy5fbmV4dFRleHR1cmVMb2NhdGlvbiU9dGhpcy5ib3VuZFRleHR1cmVzLmxlbmd0aCxlPXRoaXMuYm91bmRUZXh0dXJlcy5sZW5ndGgtdGhpcy5fbmV4dFRleHR1cmVMb2NhdGlvbi0xKX12YXIgaT10aGlzLmdsLG89dC5fZ2xUZXh0dXJlc1t0aGlzLkNPTlRFWFRfVUlEXTtyZXR1cm4gbz8odGhpcy5ib3VuZFRleHR1cmVzW2VdPXQsaS5hY3RpdmVUZXh0dXJlKGkuVEVYVFVSRTArZSksaS5iaW5kVGV4dHVyZShpLlRFWFRVUkVfMkQsby50ZXh0dXJlKSk6dGhpcy50ZXh0dXJlTWFuYWdlci51cGRhdGVUZXh0dXJlKHQsZSksZX0sZS5wcm90b3R5cGUudW5iaW5kVGV4dHVyZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdsO2lmKHQ9dC5iYXNlVGV4dHVyZXx8dCx0aGlzLl91bmtub3duQm91bmRUZXh0dXJlcyl7dGhpcy5fdW5rbm93bkJvdW5kVGV4dHVyZXM9ITE7Zm9yKHZhciByPTA7cjx0aGlzLmJvdW5kVGV4dHVyZXMubGVuZ3RoO3IrKyl0aGlzLmJvdW5kVGV4dHVyZXNbcl09PT10aGlzLmVtcHR5VGV4dHVyZXNbcl0mJihlLmFjdGl2ZVRleHR1cmUoZS5URVhUVVJFMCtyKSxlLmJpbmRUZXh0dXJlKGUuVEVYVFVSRV8yRCx0aGlzLmVtcHR5VGV4dHVyZXNbcl0uX2dsVGV4dHVyZXNbdGhpcy5DT05URVhUX1VJRF0udGV4dHVyZSkpfWZvcih2YXIgbj0wO248dGhpcy5ib3VuZFRleHR1cmVzLmxlbmd0aDtuKyspdGhpcy5ib3VuZFRleHR1cmVzW25dPT09dCYmKHRoaXMuYm91bmRUZXh0dXJlc1tuXT10aGlzLmVtcHR5VGV4dHVyZXNbbl0sZS5hY3RpdmVUZXh0dXJlKGUuVEVYVFVSRTArbiksZS5iaW5kVGV4dHVyZShlLlRFWFRVUkVfMkQsdGhpcy5lbXB0eVRleHR1cmVzW25dLl9nbFRleHR1cmVzW3RoaXMuQ09OVEVYVF9VSURdLnRleHR1cmUpKTtyZXR1cm4gdGhpc30sZS5wcm90b3R5cGUuY3JlYXRlVmFvPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBELmRlZmF1bHQuVmVydGV4QXJyYXlPYmplY3QodGhpcy5nbCx0aGlzLnN0YXRlLmF0dHJpYlN0YXRlKX0sZS5wcm90b3R5cGUuYmluZFZhbz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYWN0aXZlVmFvPT09dD90aGlzOih0P3QuYmluZCgpOnRoaXMuX2FjdGl2ZVZhbyYmdGhpcy5fYWN0aXZlVmFvLnVuYmluZCgpLHRoaXMuX2FjdGl2ZVZhbz10LHRoaXMpfSxlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuc2V0T2JqZWN0UmVuZGVyZXIodGhpcy5lbXB0eVJlbmRlcmVyKSx0aGlzLmJpbmRWYW8obnVsbCksdGhpcy5fYWN0aXZlU2hhZGVyPW51bGwsdGhpcy5fYWN0aXZlUmVuZGVyVGFyZ2V0PXRoaXMucm9vdFJlbmRlclRhcmdldCx0aGlzLl91bmtub3duQm91bmRUZXh0dXJlcz0hMDtmb3IodmFyIHQ9MDt0PHRoaXMuYm91bmRUZXh0dXJlcy5sZW5ndGg7dCsrKXRoaXMuYm91bmRUZXh0dXJlc1t0XT10aGlzLmVtcHR5VGV4dHVyZXNbdF07cmV0dXJuIHRoaXMucm9vdFJlbmRlclRhcmdldC5hY3RpdmF0ZSgpLHRoaXMuc3RhdGUucmVzZXRUb0RlZmF1bHQoKSx0aGlzfSxlLnByb3RvdHlwZS5oYW5kbGVDb250ZXh0TG9zdD1mdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCl9LGUucHJvdG90eXBlLmhhbmRsZUNvbnRleHRSZXN0b3JlZD1mdW5jdGlvbigpe3RoaXMudGV4dHVyZU1hbmFnZXIucmVtb3ZlQWxsKCksdGhpcy5maWx0ZXJNYW5hZ2VyLmRlc3Ryb3koITApLHRoaXMuX2luaXRDb250ZXh0KCl9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oZSl7dGhpcy5kZXN0cm95UGx1Z2lucygpLHRoaXMudmlldy5yZW1vdmVFdmVudExpc3RlbmVyKFwid2ViZ2xjb250ZXh0bG9zdFwiLHRoaXMuaGFuZGxlQ29udGV4dExvc3QpLHRoaXMudmlldy5yZW1vdmVFdmVudExpc3RlbmVyKFwid2ViZ2xjb250ZXh0cmVzdG9yZWRcIix0aGlzLmhhbmRsZUNvbnRleHRSZXN0b3JlZCksdGhpcy50ZXh0dXJlTWFuYWdlci5kZXN0cm95KCksdC5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMsZSksdGhpcy51aWQ9MCx0aGlzLm1hc2tNYW5hZ2VyLmRlc3Ryb3koKSx0aGlzLnN0ZW5jaWxNYW5hZ2VyLmRlc3Ryb3koKSx0aGlzLmZpbHRlck1hbmFnZXIuZGVzdHJveSgpLHRoaXMubWFza01hbmFnZXI9bnVsbCx0aGlzLmZpbHRlck1hbmFnZXI9bnVsbCx0aGlzLnRleHR1cmVNYW5hZ2VyPW51bGwsdGhpcy5jdXJyZW50UmVuZGVyZXI9bnVsbCx0aGlzLmhhbmRsZUNvbnRleHRMb3N0PW51bGwsdGhpcy5oYW5kbGVDb250ZXh0UmVzdG9yZWQ9bnVsbCx0aGlzLl9jb250ZXh0T3B0aW9ucz1udWxsLHRoaXMuZ2wudXNlUHJvZ3JhbShudWxsKSx0aGlzLmdsLmdldEV4dGVuc2lvbihcIldFQkdMX2xvc2VfY29udGV4dFwiKSYmdGhpcy5nbC5nZXRFeHRlbnNpb24oXCJXRUJHTF9sb3NlX2NvbnRleHRcIikubG9zZUNvbnRleHQoKSx0aGlzLmdsPW51bGx9LGV9KHUuZGVmYXVsdCk7ci5kZWZhdWx0PUIsQS5wbHVnaW5UYXJnZXQubWl4aW4oQil9LHtcIi4uLy4uL2NvbnN0XCI6NDYsXCIuLi8uLi90ZXh0dXJlcy9CYXNlVGV4dHVyZVwiOjExMixcIi4uLy4uL3V0aWxzXCI6MTI1LFwiLi4vU3lzdGVtUmVuZGVyZXJcIjo3NixcIi4vVGV4dHVyZUdhcmJhZ2VDb2xsZWN0b3JcIjo4MixcIi4vVGV4dHVyZU1hbmFnZXJcIjo4MyxcIi4vV2ViR0xTdGF0ZVwiOjg1LFwiLi9tYW5hZ2Vycy9GaWx0ZXJNYW5hZ2VyXCI6OTAsXCIuL21hbmFnZXJzL01hc2tNYW5hZ2VyXCI6OTEsXCIuL21hbmFnZXJzL1N0ZW5jaWxNYW5hZ2VyXCI6OTIsXCIuL3V0aWxzL09iamVjdFJlbmRlcmVyXCI6OTQsXCIuL3V0aWxzL1JlbmRlclRhcmdldFwiOjk2LFwiLi91dGlscy9tYXBXZWJHTERyYXdNb2Rlc1RvUGl4aVwiOjk5LFwiLi91dGlscy92YWxpZGF0ZUNvbnRleHRcIjoxMDAsXCJwaXhpLWdsLWNvcmVcIjoxNX1dLDg1OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ci5fX2VzTW9kdWxlPSEwO3ZhciBpPXQoXCIuL3V0aWxzL21hcFdlYkdMQmxlbmRNb2Rlc1RvUGl4aVwiKSxvPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0oaSkscz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7bih0aGlzLHQpLHRoaXMuYWN0aXZlU3RhdGU9bmV3IFVpbnQ4QXJyYXkoMTYpLHRoaXMuZGVmYXVsdFN0YXRlPW5ldyBVaW50OEFycmF5KDE2KSx0aGlzLmRlZmF1bHRTdGF0ZVswXT0xLHRoaXMuc3RhY2tJbmRleD0wLHRoaXMuc3RhY2s9W10sdGhpcy5nbD1lLHRoaXMubWF4QXR0cmlicz1lLmdldFBhcmFtZXRlcihlLk1BWF9WRVJURVhfQVRUUklCUyksdGhpcy5hdHRyaWJTdGF0ZT17dGVtcEF0dHJpYlN0YXRlOm5ldyBBcnJheSh0aGlzLm1heEF0dHJpYnMpLGF0dHJpYlN0YXRlOm5ldyBBcnJheSh0aGlzLm1heEF0dHJpYnMpfSx0aGlzLmJsZW5kTW9kZXM9KDAsby5kZWZhdWx0KShlKSx0aGlzLm5hdGl2ZVZhb0V4dGVuc2lvbj1lLmdldEV4dGVuc2lvbihcIk9FU192ZXJ0ZXhfYXJyYXlfb2JqZWN0XCIpfHxlLmdldEV4dGVuc2lvbihcIk1PWl9PRVNfdmVydGV4X2FycmF5X29iamVjdFwiKXx8ZS5nZXRFeHRlbnNpb24oXCJXRUJLSVRfT0VTX3ZlcnRleF9hcnJheV9vYmplY3RcIil9cmV0dXJuIHQucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnN0YWNrW3RoaXMuc3RhY2tJbmRleF07dHx8KHQ9dGhpcy5zdGFja1t0aGlzLnN0YWNrSW5kZXhdPW5ldyBVaW50OEFycmF5KDE2KSksKyt0aGlzLnN0YWNrSW5kZXg7Zm9yKHZhciBlPTA7ZTx0aGlzLmFjdGl2ZVN0YXRlLmxlbmd0aDtlKyspdFtlXT10aGlzLmFjdGl2ZVN0YXRlW2VdfSx0LnByb3RvdHlwZS5wb3A9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnN0YWNrWy0tdGhpcy5zdGFja0luZGV4XTt0aGlzLnNldFN0YXRlKHQpfSx0LnByb3RvdHlwZS5zZXRTdGF0ZT1mdW5jdGlvbih0KXt0aGlzLnNldEJsZW5kKHRbMF0pLHRoaXMuc2V0RGVwdGhUZXN0KHRbMV0pLHRoaXMuc2V0RnJvbnRGYWNlKHRbMl0pLHRoaXMuc2V0Q3VsbEZhY2UodFszXSksdGhpcy5zZXRCbGVuZE1vZGUodFs0XSl9LHQucHJvdG90eXBlLnNldEJsZW5kPWZ1bmN0aW9uKHQpe3Q9dD8xOjAsdGhpcy5hY3RpdmVTdGF0ZVswXSE9PXQmJih0aGlzLmFjdGl2ZVN0YXRlWzBdPXQsdGhpcy5nbFt0P1wiZW5hYmxlXCI6XCJkaXNhYmxlXCJdKHRoaXMuZ2wuQkxFTkQpKX0sdC5wcm90b3R5cGUuc2V0QmxlbmRNb2RlPWZ1bmN0aW9uKHQpe2lmKHQhPT10aGlzLmFjdGl2ZVN0YXRlWzRdKXt0aGlzLmFjdGl2ZVN0YXRlWzRdPXQ7dmFyIGU9dGhpcy5ibGVuZE1vZGVzW3RdOzI9PT1lLmxlbmd0aD90aGlzLmdsLmJsZW5kRnVuYyhlWzBdLGVbMV0pOnRoaXMuZ2wuYmxlbmRGdW5jU2VwYXJhdGUoZVswXSxlWzFdLGVbMl0sZVszXSl9fSx0LnByb3RvdHlwZS5zZXREZXB0aFRlc3Q9ZnVuY3Rpb24odCl7dD10PzE6MCx0aGlzLmFjdGl2ZVN0YXRlWzFdIT09dCYmKHRoaXMuYWN0aXZlU3RhdGVbMV09dCx0aGlzLmdsW3Q/XCJlbmFibGVcIjpcImRpc2FibGVcIl0odGhpcy5nbC5ERVBUSF9URVNUKSl9LHQucHJvdG90eXBlLnNldEN1bGxGYWNlPWZ1bmN0aW9uKHQpe3Q9dD8xOjAsdGhpcy5hY3RpdmVTdGF0ZVszXSE9PXQmJih0aGlzLmFjdGl2ZVN0YXRlWzNdPXQsdGhpcy5nbFt0P1wiZW5hYmxlXCI6XCJkaXNhYmxlXCJdKHRoaXMuZ2wuQ1VMTF9GQUNFKSl9LHQucHJvdG90eXBlLnNldEZyb250RmFjZT1mdW5jdGlvbih0KXt0PXQ/MTowLHRoaXMuYWN0aXZlU3RhdGVbMl0hPT10JiYodGhpcy5hY3RpdmVTdGF0ZVsyXT10LHRoaXMuZ2wuZnJvbnRGYWNlKHRoaXMuZ2xbdD9cIkNXXCI6XCJDQ1dcIl0pKX0sdC5wcm90b3R5cGUucmVzZXRBdHRyaWJ1dGVzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLmF0dHJpYlN0YXRlLnRlbXBBdHRyaWJTdGF0ZS5sZW5ndGg7dCsrKXRoaXMuYXR0cmliU3RhdGUudGVtcEF0dHJpYlN0YXRlW3RdPTA7Zm9yKHZhciBlPTA7ZTx0aGlzLmF0dHJpYlN0YXRlLmF0dHJpYlN0YXRlLmxlbmd0aDtlKyspdGhpcy5hdHRyaWJTdGF0ZS5hdHRyaWJTdGF0ZVtlXT0wO2Zvcih2YXIgcj0xO3I8dGhpcy5tYXhBdHRyaWJzO3IrKyl0aGlzLmdsLmRpc2FibGVWZXJ0ZXhBdHRyaWJBcnJheShyKX0sdC5wcm90b3R5cGUucmVzZXRUb0RlZmF1bHQ9ZnVuY3Rpb24oKXt0aGlzLm5hdGl2ZVZhb0V4dGVuc2lvbiYmdGhpcy5uYXRpdmVWYW9FeHRlbnNpb24uYmluZFZlcnRleEFycmF5T0VTKG51bGwpLHRoaXMucmVzZXRBdHRyaWJ1dGVzKCk7Zm9yKHZhciB0PTA7dDx0aGlzLmFjdGl2ZVN0YXRlLmxlbmd0aDsrK3QpdGhpcy5hY3RpdmVTdGF0ZVt0XT0zMjt0aGlzLmdsLnBpeGVsU3RvcmVpKHRoaXMuZ2wuVU5QQUNLX0ZMSVBfWV9XRUJHTCwhMSksdGhpcy5zZXRTdGF0ZSh0aGlzLmRlZmF1bHRTdGF0ZSl9LHR9KCk7ci5kZWZhdWx0PXN9LHtcIi4vdXRpbHMvbWFwV2ViR0xCbGVuZE1vZGVzVG9QaXhpXCI6OTh9XSw4NjpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIGkodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfXIuX19lc01vZHVsZT0hMDt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG49ZVtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbihlLHIsbil7cmV0dXJuIHImJnQoZS5wcm90b3R5cGUsciksbiYmdChlLG4pLGV9fSgpLHM9dChcIi4vZXh0cmFjdFVuaWZvcm1zRnJvbVNyY1wiKSxhPW4ocyksdT10KFwiLi4vLi4vLi4vdXRpbHNcIiksaD10KFwiLi4vLi4vLi4vY29uc3RcIiksbD10KFwiLi4vLi4vLi4vc2V0dGluZ3NcIiksYz1uKGwpLGQ9e30sZj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxyLG4pe2kodGhpcyx0KSx0aGlzLnZlcnRleFNyYz1lfHx0LmRlZmF1bHRWZXJ0ZXhTcmMsdGhpcy5mcmFnbWVudFNyYz1yfHx0LmRlZmF1bHRGcmFnbWVudFNyYyx0aGlzLl9ibGVuZE1vZGU9aC5CTEVORF9NT0RFUy5OT1JNQUwsdGhpcy51bmlmb3JtRGF0YT1ufHwoMCxhLmRlZmF1bHQpKHRoaXMudmVydGV4U3JjLHRoaXMuZnJhZ21lbnRTcmMsXCJwcm9qZWN0aW9uTWF0cml4fHVTYW1wbGVyXCIpLHRoaXMudW5pZm9ybXM9e307Zm9yKHZhciBvIGluIHRoaXMudW5pZm9ybURhdGEpdGhpcy51bmlmb3Jtc1tvXT10aGlzLnVuaWZvcm1EYXRhW29dLnZhbHVlLHRoaXMudW5pZm9ybURhdGFbb10udHlwZSYmKHRoaXMudW5pZm9ybURhdGFbb10udHlwZT10aGlzLnVuaWZvcm1EYXRhW29dLnR5cGUudG9Mb3dlckNhc2UoKSk7dGhpcy5nbFNoYWRlcnM9e30sZFt0aGlzLnZlcnRleFNyYyt0aGlzLmZyYWdtZW50U3JjXXx8KGRbdGhpcy52ZXJ0ZXhTcmMrdGhpcy5mcmFnbWVudFNyY109KDAsdS51aWQpKCkpLHRoaXMuZ2xTaGFkZXJLZXk9ZFt0aGlzLnZlcnRleFNyYyt0aGlzLmZyYWdtZW50U3JjXSx0aGlzLnBhZGRpbmc9NCx0aGlzLnJlc29sdXRpb249Yy5kZWZhdWx0LkZJTFRFUl9SRVNPTFVUSU9OLHRoaXMuZW5hYmxlZD0hMCx0aGlzLmF1dG9GaXQ9ITB9cmV0dXJuIHQucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHQsZSxyLG4saSl7dC5hcHBseUZpbHRlcih0aGlzLGUscixuKX0sbyh0LFt7a2V5OlwiYmxlbmRNb2RlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JsZW5kTW9kZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2JsZW5kTW9kZT10fX1dLFt7a2V5OlwiZGVmYXVsdFZlcnRleFNyY1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcImF0dHJpYnV0ZSB2ZWMyIGFWZXJ0ZXhQb3NpdGlvbjtcIixcImF0dHJpYnV0ZSB2ZWMyIGFUZXh0dXJlQ29vcmQ7XCIsXCJ1bmlmb3JtIG1hdDMgcHJvamVjdGlvbk1hdHJpeDtcIixcInVuaWZvcm0gbWF0MyBmaWx0ZXJNYXRyaXg7XCIsXCJ2YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcIixcInZhcnlpbmcgdmVjMiB2RmlsdGVyQ29vcmQ7XCIsXCJ2b2lkIG1haW4odm9pZCl7XCIsXCIgICBnbF9Qb3NpdGlvbiA9IHZlYzQoKHByb2plY3Rpb25NYXRyaXggKiB2ZWMzKGFWZXJ0ZXhQb3NpdGlvbiwgMS4wKSkueHksIDAuMCwgMS4wKTtcIixcIiAgIHZGaWx0ZXJDb29yZCA9ICggZmlsdGVyTWF0cml4ICogdmVjMyggYVRleHR1cmVDb29yZCwgMS4wKSAgKS54eTtcIixcIiAgIHZUZXh0dXJlQ29vcmQgPSBhVGV4dHVyZUNvb3JkIDtcIixcIn1cIl0uam9pbihcIlxcblwiKX19LHtrZXk6XCJkZWZhdWx0RnJhZ21lbnRTcmNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJ2YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcIixcInZhcnlpbmcgdmVjMiB2RmlsdGVyQ29vcmQ7XCIsXCJ1bmlmb3JtIHNhbXBsZXIyRCB1U2FtcGxlcjtcIixcInVuaWZvcm0gc2FtcGxlcjJEIGZpbHRlclNhbXBsZXI7XCIsXCJ2b2lkIG1haW4odm9pZCl7XCIsXCIgICB2ZWM0IG1hc2t5ID0gdGV4dHVyZTJEKGZpbHRlclNhbXBsZXIsIHZGaWx0ZXJDb29yZCk7XCIsXCIgICB2ZWM0IHNhbXBsZSA9IHRleHR1cmUyRCh1U2FtcGxlciwgdlRleHR1cmVDb29yZCk7XCIsXCIgICB2ZWM0IGNvbG9yO1wiLFwiICAgaWYobW9kKHZGaWx0ZXJDb29yZC54LCAxLjApID4gMC41KVwiLFwiICAge1wiLFwiICAgICBjb2xvciA9IHZlYzQoMS4wLCAwLjAsIDAuMCwgMS4wKTtcIixcIiAgIH1cIixcIiAgIGVsc2VcIixcIiAgIHtcIixcIiAgICAgY29sb3IgPSB2ZWM0KDAuMCwgMS4wLCAwLjAsIDEuMCk7XCIsXCIgICB9XCIsXCIgICBnbF9GcmFnQ29sb3IgPSBtaXgoc2FtcGxlLCBtYXNreSwgMC41KTtcIixcIiAgIGdsX0ZyYWdDb2xvciAqPSBzYW1wbGUuYTtcIixcIn1cIl0uam9pbihcIlxcblwiKX19XSksdH0oKTtyLmRlZmF1bHQ9Zn0se1wiLi4vLi4vLi4vY29uc3RcIjo0NixcIi4uLy4uLy4uL3NldHRpbmdzXCI6MTAxLFwiLi4vLi4vLi4vdXRpbHNcIjoxMjUsXCIuL2V4dHJhY3RVbmlmb3Jtc0Zyb21TcmNcIjo4N31dLDg3OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUscil7dmFyIG49aSh0KSxvPWkoZSk7cmV0dXJuIE9iamVjdC5hc3NpZ24obixvKX1mdW5jdGlvbiBpKHQpe2Zvcih2YXIgZT1uZXcgUmVnRXhwKFwiXihwcm9qZWN0aW9uTWF0cml4fHVTYW1wbGVyfGZpbHRlckFyZWF8ZmlsdGVyQ2xhbXApJFwiKSxyPXt9LG49dm9pZCAwLGk9dC5yZXBsYWNlKC9cXHMrL2csXCIgXCIpLnNwbGl0KC9cXHMqO1xccyovKSxvPTA7bzxpLmxlbmd0aDtvKyspe3ZhciBzPWlbb10udHJpbSgpO2lmKHMuaW5kZXhPZihcInVuaWZvcm1cIik+LTEpe3ZhciB1PXMuc3BsaXQoXCIgXCIpLGg9dVsxXSxsPXVbMl0sYz0xO2wuaW5kZXhPZihcIltcIik+LTEmJihuPWwuc3BsaXQoL1xcW3xdLyksbD1uWzBdLGMqPU51bWJlcihuWzFdKSksbC5tYXRjaChlKXx8KHJbbF09e3ZhbHVlOmEoaCxjKSxuYW1lOmwsdHlwZTpofSl9fXJldHVybiByfXIuX19lc01vZHVsZT0hMCxyLmRlZmF1bHQ9bjt2YXIgbz10KFwicGl4aS1nbC1jb3JlXCIpLHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShvKSxhPXMuZGVmYXVsdC5zaGFkZXIuZGVmYXVsdFZhbHVlfSx7XCJwaXhpLWdsLWNvcmVcIjoxNX1dLDg4OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUscil7dmFyIG49dC5pZGVudGl0eSgpO3JldHVybiBuLnRyYW5zbGF0ZShlLngvci53aWR0aCxlLnkvci5oZWlnaHQpLG4uc2NhbGUoci53aWR0aCxyLmhlaWdodCksbn1mdW5jdGlvbiBpKHQsZSxyKXt2YXIgbj10LmlkZW50aXR5KCk7bi50cmFuc2xhdGUoZS54L3Iud2lkdGgsZS55L3IuaGVpZ2h0KTt2YXIgaT1yLndpZHRoL2Uud2lkdGgsbz1yLmhlaWdodC9lLmhlaWdodDtyZXR1cm4gbi5zY2FsZShpLG8pLG59ZnVuY3Rpb24gbyh0LGUscixuKXt2YXIgaT1uLl90ZXh0dXJlLm9yaWcsbz10LnNldChyLndpZHRoLDAsMCxyLmhlaWdodCxlLngsZS55KSxhPW4ud29ybGRUcmFuc2Zvcm0uY29weShzLk1hdHJpeC5URU1QX01BVFJJWCk7cmV0dXJuIGEuaW52ZXJ0KCksby5wcmVwZW5kKGEpLG8uc2NhbGUoMS9pLndpZHRoLDEvaS5oZWlnaHQpLG8udHJhbnNsYXRlKG4uYW5jaG9yLngsbi5hbmNob3IueSksb31yLl9fZXNNb2R1bGU9ITAsci5jYWxjdWxhdGVTY3JlZW5TcGFjZU1hdHJpeD1uLHIuY2FsY3VsYXRlTm9ybWFsaXplZFNjcmVlblNwYWNlTWF0cml4PWksci5jYWxjdWxhdGVTcHJpdGVNYXRyaXg9bzt2YXIgcz10KFwiLi4vLi4vLi4vbWF0aFwiKX0se1wiLi4vLi4vLi4vbWF0aFwiOjcwfV0sODk6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBpKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gcyh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfXIuX19lc01vZHVsZT0hMDt2YXIgYT10KFwiLi4vRmlsdGVyXCIpLHU9bihhKSxoPXQoXCIuLi8uLi8uLi8uLi9tYXRoXCIpLGw9KHQoXCJwYXRoXCIpLHQoXCIuLi8uLi8uLi8uLi90ZXh0dXJlcy9UZXh0dXJlTWF0cml4XCIpKSxjPW4obCksZD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHIpe2kodGhpcyxlKTt2YXIgbj1uZXcgaC5NYXRyaXgscz1vKHRoaXMsdC5jYWxsKHRoaXMsXCJhdHRyaWJ1dGUgdmVjMiBhVmVydGV4UG9zaXRpb247XFxuYXR0cmlidXRlIHZlYzIgYVRleHR1cmVDb29yZDtcXG5cXG51bmlmb3JtIG1hdDMgcHJvamVjdGlvbk1hdHJpeDtcXG51bmlmb3JtIG1hdDMgb3RoZXJNYXRyaXg7XFxuXFxudmFyeWluZyB2ZWMyIHZNYXNrQ29vcmQ7XFxudmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XFxuXFxudm9pZCBtYWluKHZvaWQpXFxue1xcbiAgICBnbF9Qb3NpdGlvbiA9IHZlYzQoKHByb2plY3Rpb25NYXRyaXggKiB2ZWMzKGFWZXJ0ZXhQb3NpdGlvbiwgMS4wKSkueHksIDAuMCwgMS4wKTtcXG5cXG4gICAgdlRleHR1cmVDb29yZCA9IGFUZXh0dXJlQ29vcmQ7XFxuICAgIHZNYXNrQ29vcmQgPSAoIG90aGVyTWF0cml4ICogdmVjMyggYVRleHR1cmVDb29yZCwgMS4wKSAgKS54eTtcXG59XFxuXCIsXCJ2YXJ5aW5nIHZlYzIgdk1hc2tDb29yZDtcXG52YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcXG5cXG51bmlmb3JtIHNhbXBsZXIyRCB1U2FtcGxlcjtcXG51bmlmb3JtIHNhbXBsZXIyRCBtYXNrO1xcbnVuaWZvcm0gZmxvYXQgYWxwaGE7XFxudW5pZm9ybSB2ZWM0IG1hc2tDbGFtcDtcXG5cXG52b2lkIG1haW4odm9pZClcXG57XFxuICAgIGZsb2F0IGNsaXAgPSBzdGVwKDMuNSxcXG4gICAgICAgIHN0ZXAobWFza0NsYW1wLngsIHZNYXNrQ29vcmQueCkgK1xcbiAgICAgICAgc3RlcChtYXNrQ2xhbXAueSwgdk1hc2tDb29yZC55KSArXFxuICAgICAgICBzdGVwKHZNYXNrQ29vcmQueCwgbWFza0NsYW1wLnopICtcXG4gICAgICAgIHN0ZXAodk1hc2tDb29yZC55LCBtYXNrQ2xhbXAudykpO1xcblxcbiAgICB2ZWM0IG9yaWdpbmFsID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKTtcXG4gICAgdmVjNCBtYXNreSA9IHRleHR1cmUyRChtYXNrLCB2TWFza0Nvb3JkKTtcXG5cXG4gICAgb3JpZ2luYWwgKj0gKG1hc2t5LnIgKiBtYXNreS5hICogYWxwaGEgKiBjbGlwKTtcXG5cXG4gICAgZ2xfRnJhZ0NvbG9yID0gb3JpZ2luYWw7XFxufVxcblwiKSk7cmV0dXJuIHIucmVuZGVyYWJsZT0hMSxzLm1hc2tTcHJpdGU9cixzLm1hc2tNYXRyaXg9bixzfXJldHVybiBzKGUsdCksZS5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24odCxlLHIsbil7dmFyIGk9dGhpcy5tYXNrU3ByaXRlLG89dGhpcy5tYXNrU3ByaXRlLnRleHR1cmU7by52YWxpZCYmKG8udHJhbnNmb3JtfHwoby50cmFuc2Zvcm09bmV3IGMuZGVmYXVsdChvLDApKSxvLnRyYW5zZm9ybS51cGRhdGUoKSx0aGlzLnVuaWZvcm1zLm1hc2s9byx0aGlzLnVuaWZvcm1zLm90aGVyTWF0cml4PXQuY2FsY3VsYXRlU3ByaXRlTWF0cml4KHRoaXMubWFza01hdHJpeCxpKS5wcmVwZW5kKG8udHJhbnNmb3JtLm1hcENvb3JkKSx0aGlzLnVuaWZvcm1zLmFscGhhPWkud29ybGRBbHBoYSx0aGlzLnVuaWZvcm1zLm1hc2tDbGFtcD1vLnRyYW5zZm9ybS51Q2xhbXBGcmFtZSx0LmFwcGx5RmlsdGVyKHRoaXMsZSxyLG4pKX0sZX0odS5kZWZhdWx0KTtyLmRlZmF1bHQ9ZH0se1wiLi4vLi4vLi4vLi4vbWF0aFwiOjcwLFwiLi4vLi4vLi4vLi4vdGV4dHVyZXMvVGV4dHVyZU1hdHJpeFwiOjExNixcIi4uL0ZpbHRlclwiOjg2LHBhdGg6OH1dLDkwOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gaSh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIG8odCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1mdW5jdGlvbiBzKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1yLl9fZXNNb2R1bGU9ITA7dmFyIGE9dChcIi4vV2ViR0xNYW5hZ2VyXCIpLHU9bihhKSxoPXQoXCIuLi91dGlscy9SZW5kZXJUYXJnZXRcIiksbD1uKGgpLGM9dChcIi4uL3V0aWxzL1F1YWRcIiksZD1uKGMpLGY9dChcIi4uLy4uLy4uL21hdGhcIikscD10KFwiLi4vLi4vLi4vU2hhZGVyXCIpLHY9bihwKSxnPXQoXCIuLi9maWx0ZXJzL2ZpbHRlclRyYW5zZm9ybXNcIikseT1mdW5jdGlvbih0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9e307aWYobnVsbCE9dClmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSk7cmV0dXJuIGUuZGVmYXVsdD10LGV9KGcpLG09dChcImJpdC10d2lkZGxlXCIpLF89bihtKSxiPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ModGhpcyx0KSx0aGlzLnJlbmRlclRhcmdldD1udWxsLHRoaXMudGFyZ2V0PW51bGwsdGhpcy5yZXNvbHV0aW9uPTEsdGhpcy5zb3VyY2VGcmFtZT1uZXcgZi5SZWN0YW5nbGUsdGhpcy5kZXN0aW5hdGlvbkZyYW1lPW5ldyBmLlJlY3RhbmdsZSx0aGlzLmZpbHRlcnM9W119cmV0dXJuIHQucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5maWx0ZXJzPW51bGwsdGhpcy50YXJnZXQ9bnVsbCx0aGlzLnJlbmRlclRhcmdldD1udWxsfSx0fSgpLHg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShyKXtzKHRoaXMsZSk7dmFyIG49aSh0aGlzLHQuY2FsbCh0aGlzLHIpKTtyZXR1cm4gbi5nbD1uLnJlbmRlcmVyLmdsLG4ucXVhZD1uZXcgZC5kZWZhdWx0KG4uZ2wsci5zdGF0ZS5hdHRyaWJTdGF0ZSksbi5zaGFkZXJDYWNoZT17fSxuLnBvb2w9e30sbi5maWx0ZXJEYXRhPW51bGwsbi5tYW5hZ2VkRmlsdGVycz1bXSxuLnJlbmRlcmVyLm9uKFwicHJlcmVuZGVyXCIsbi5vblByZXJlbmRlcixuKSxuLl9zY3JlZW5XaWR0aD1yLnZpZXcud2lkdGgsbi5fc2NyZWVuSGVpZ2h0PXIudmlldy5oZWlnaHQsbn1yZXR1cm4gbyhlLHQpLGUucHJvdG90eXBlLnB1c2hGaWx0ZXI9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLnJlbmRlcmVyLG49dGhpcy5maWx0ZXJEYXRhO2lmKCFuKXtuPXRoaXMucmVuZGVyZXIuX2FjdGl2ZVJlbmRlclRhcmdldC5maWx0ZXJTdGFjazt2YXIgaT1uZXcgYjtpLnNvdXJjZUZyYW1lPWkuZGVzdGluYXRpb25GcmFtZT10aGlzLnJlbmRlcmVyLl9hY3RpdmVSZW5kZXJUYXJnZXQuc2l6ZSxpLnJlbmRlclRhcmdldD1yLl9hY3RpdmVSZW5kZXJUYXJnZXQsdGhpcy5yZW5kZXJlci5fYWN0aXZlUmVuZGVyVGFyZ2V0LmZpbHRlckRhdGE9bj17aW5kZXg6MCxzdGFjazpbaV19LHRoaXMuZmlsdGVyRGF0YT1ufXZhciBvPW4uc3RhY2tbKytuLmluZGV4XSxzPW4uc3RhY2tbMF0uZGVzdGluYXRpb25GcmFtZTtvfHwobz1uLnN0YWNrW24uaW5kZXhdPW5ldyBiKTt2YXIgYT10LmZpbHRlckFyZWEmJjA9PT10LmZpbHRlckFyZWEueCYmMD09PXQuZmlsdGVyQXJlYS55JiZ0LmZpbHRlckFyZWEud2lkdGg9PT1yLnNjcmVlbi53aWR0aCYmdC5maWx0ZXJBcmVhLmhlaWdodD09PXIuc2NyZWVuLmhlaWdodCx1PWVbMF0ucmVzb2x1dGlvbixoPTB8ZVswXS5wYWRkaW5nLGw9YT9yLnNjcmVlbjp0LmZpbHRlckFyZWF8fHQuZ2V0Qm91bmRzKCEwKSxjPW8uc291cmNlRnJhbWUsZD1vLmRlc3RpbmF0aW9uRnJhbWU7Yy54PShsLngqdXwwKS91LGMueT0obC55KnV8MCkvdSxjLndpZHRoPShsLndpZHRoKnV8MCkvdSxjLmhlaWdodD0obC5oZWlnaHQqdXwwKS91LGF8fChuLnN0YWNrWzBdLnJlbmRlclRhcmdldC50cmFuc2Zvcm18fGVbMF0uYXV0b0ZpdCYmYy5maXQocyksYy5wYWQoaCkpLGQud2lkdGg9Yy53aWR0aCxkLmhlaWdodD1jLmhlaWdodDt2YXIgZj10aGlzLmdldFBvdFJlbmRlclRhcmdldChyLmdsLGMud2lkdGgsYy5oZWlnaHQsdSk7by50YXJnZXQ9dCxvLmZpbHRlcnM9ZSxvLnJlc29sdXRpb249dSxvLnJlbmRlclRhcmdldD1mLGYuc2V0RnJhbWUoZCxjKSxyLmJpbmRSZW5kZXJUYXJnZXQoZiksZi5jbGVhcigpfSxlLnByb3RvdHlwZS5wb3BGaWx0ZXI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmZpbHRlckRhdGEsZT10LnN0YWNrW3QuaW5kZXgtMV0scj10LnN0YWNrW3QuaW5kZXhdO3RoaXMucXVhZC5tYXAoci5yZW5kZXJUYXJnZXQuc2l6ZSxyLnNvdXJjZUZyYW1lKS51cGxvYWQoKTt2YXIgbj1yLmZpbHRlcnM7aWYoMT09PW4ubGVuZ3RoKW5bMF0uYXBwbHkodGhpcyxyLnJlbmRlclRhcmdldCxlLnJlbmRlclRhcmdldCwhMSxyKSx0aGlzLmZyZWVQb3RSZW5kZXJUYXJnZXQoci5yZW5kZXJUYXJnZXQpO2Vsc2V7dmFyIGk9ci5yZW5kZXJUYXJnZXQsbz10aGlzLmdldFBvdFJlbmRlclRhcmdldCh0aGlzLnJlbmRlcmVyLmdsLHIuc291cmNlRnJhbWUud2lkdGgsci5zb3VyY2VGcmFtZS5oZWlnaHQsci5yZXNvbHV0aW9uKTtvLnNldEZyYW1lKHIuZGVzdGluYXRpb25GcmFtZSxyLnNvdXJjZUZyYW1lKSxvLmNsZWFyKCk7dmFyIHM9MDtmb3Iocz0wO3M8bi5sZW5ndGgtMTsrK3Mpe25bc10uYXBwbHkodGhpcyxpLG8sITAscik7dmFyIGE9aTtpPW8sbz1hfW5bc10uYXBwbHkodGhpcyxpLGUucmVuZGVyVGFyZ2V0LCExLHIpLFxudGhpcy5mcmVlUG90UmVuZGVyVGFyZ2V0KGkpLHRoaXMuZnJlZVBvdFJlbmRlclRhcmdldChvKX1yLmNsZWFyKCksMD09PS0tdC5pbmRleCYmKHRoaXMuZmlsdGVyRGF0YT1udWxsKX0sZS5wcm90b3R5cGUuYXBwbHlGaWx0ZXI9ZnVuY3Rpb24odCxlLHIsbil7dmFyIGk9dGhpcy5yZW5kZXJlcixvPWkuZ2wscz10LmdsU2hhZGVyc1tpLkNPTlRFWFRfVUlEXTtzfHwodC5nbFNoYWRlcktleT8ocz10aGlzLnNoYWRlckNhY2hlW3QuZ2xTaGFkZXJLZXldKXx8KHM9bmV3IHYuZGVmYXVsdCh0aGlzLmdsLHQudmVydGV4U3JjLHQuZnJhZ21lbnRTcmMpLHQuZ2xTaGFkZXJzW2kuQ09OVEVYVF9VSURdPXRoaXMuc2hhZGVyQ2FjaGVbdC5nbFNoYWRlcktleV09cyx0aGlzLm1hbmFnZWRGaWx0ZXJzLnB1c2godCkpOihzPXQuZ2xTaGFkZXJzW2kuQ09OVEVYVF9VSURdPW5ldyB2LmRlZmF1bHQodGhpcy5nbCx0LnZlcnRleFNyYyx0LmZyYWdtZW50U3JjKSx0aGlzLm1hbmFnZWRGaWx0ZXJzLnB1c2godCkpLGkuYmluZFZhbyhudWxsKSx0aGlzLnF1YWQuaW5pdFZhbyhzKSksaS5iaW5kVmFvKHRoaXMucXVhZC52YW8pLGkuYmluZFJlbmRlclRhcmdldChyKSxuJiYoby5kaXNhYmxlKG8uU0NJU1NPUl9URVNUKSxpLmNsZWFyKCksby5lbmFibGUoby5TQ0lTU09SX1RFU1QpKSxyPT09aS5tYXNrTWFuYWdlci5zY2lzc29yUmVuZGVyVGFyZ2V0JiZpLm1hc2tNYW5hZ2VyLnB1c2hTY2lzc29yTWFzayhudWxsLGkubWFza01hbmFnZXIuc2Npc3NvckRhdGEpLGkuYmluZFNoYWRlcihzKTt2YXIgYT10aGlzLnJlbmRlcmVyLmVtcHR5VGV4dHVyZXNbMF07dGhpcy5yZW5kZXJlci5ib3VuZFRleHR1cmVzWzBdPWEsdGhpcy5zeW5jVW5pZm9ybXMocyx0KSxpLnN0YXRlLnNldEJsZW5kTW9kZSh0LmJsZW5kTW9kZSksby5hY3RpdmVUZXh0dXJlKG8uVEVYVFVSRTApLG8uYmluZFRleHR1cmUoby5URVhUVVJFXzJELGUudGV4dHVyZS50ZXh0dXJlKSx0aGlzLnF1YWQudmFvLmRyYXcodGhpcy5yZW5kZXJlci5nbC5UUklBTkdMRVMsNiwwKSxvLmJpbmRUZXh0dXJlKG8uVEVYVFVSRV8yRCxhLl9nbFRleHR1cmVzW3RoaXMucmVuZGVyZXIuQ09OVEVYVF9VSURdLnRleHR1cmUpfSxlLnByb3RvdHlwZS5zeW5jVW5pZm9ybXM9ZnVuY3Rpb24odCxlKXt2YXIgcj1lLnVuaWZvcm1EYXRhLG49ZS51bmlmb3JtcyxpPTEsbz12b2lkIDA7aWYodC51bmlmb3Jtcy5maWx0ZXJBcmVhKXtvPXRoaXMuZmlsdGVyRGF0YS5zdGFja1t0aGlzLmZpbHRlckRhdGEuaW5kZXhdO3ZhciBzPXQudW5pZm9ybXMuZmlsdGVyQXJlYTtzWzBdPW8ucmVuZGVyVGFyZ2V0LnNpemUud2lkdGgsc1sxXT1vLnJlbmRlclRhcmdldC5zaXplLmhlaWdodCxzWzJdPW8uc291cmNlRnJhbWUueCxzWzNdPW8uc291cmNlRnJhbWUueSx0LnVuaWZvcm1zLmZpbHRlckFyZWE9c31pZih0LnVuaWZvcm1zLmZpbHRlckNsYW1wKXtvPW98fHRoaXMuZmlsdGVyRGF0YS5zdGFja1t0aGlzLmZpbHRlckRhdGEuaW5kZXhdO3ZhciBhPXQudW5pZm9ybXMuZmlsdGVyQ2xhbXA7YVswXT0wLGFbMV09MCxhWzJdPShvLnNvdXJjZUZyYW1lLndpZHRoLTEpL28ucmVuZGVyVGFyZ2V0LnNpemUud2lkdGgsYVszXT0oby5zb3VyY2VGcmFtZS5oZWlnaHQtMSkvby5yZW5kZXJUYXJnZXQuc2l6ZS5oZWlnaHQsdC51bmlmb3Jtcy5maWx0ZXJDbGFtcD1hfWZvcih2YXIgdSBpbiByKWlmKHQudW5pZm9ybXMuZGF0YVt1XSl7dmFyIGg9clt1XS50eXBlO2lmKFwic2FtcGxlcjJkXCI9PT1oJiYwIT09blt1XSl7aWYoblt1XS5iYXNlVGV4dHVyZSl0LnVuaWZvcm1zW3VdPXRoaXMucmVuZGVyZXIuYmluZFRleHR1cmUoblt1XS5iYXNlVGV4dHVyZSxpKTtlbHNle3QudW5pZm9ybXNbdV09aTt2YXIgbD10aGlzLnJlbmRlcmVyLmdsO3RoaXMucmVuZGVyZXIuYm91bmRUZXh0dXJlc1tpXT10aGlzLnJlbmRlcmVyLmVtcHR5VGV4dHVyZXNbaV0sbC5hY3RpdmVUZXh0dXJlKGwuVEVYVFVSRTAraSksblt1XS50ZXh0dXJlLmJpbmQoKX1pKyt9ZWxzZSBpZihcIm1hdDNcIj09PWgpdm9pZCAwIT09blt1XS5hP3QudW5pZm9ybXNbdV09blt1XS50b0FycmF5KCEwKTp0LnVuaWZvcm1zW3VdPW5bdV07ZWxzZSBpZihcInZlYzJcIj09PWgpaWYodm9pZCAwIT09blt1XS54KXt2YXIgYz10LnVuaWZvcm1zW3VdfHxuZXcgRmxvYXQzMkFycmF5KDIpO2NbMF09blt1XS54LGNbMV09blt1XS55LHQudW5pZm9ybXNbdV09Y31lbHNlIHQudW5pZm9ybXNbdV09blt1XTtlbHNlXCJmbG9hdFwiPT09aD90LnVuaWZvcm1zLmRhdGFbdV0udmFsdWUhPT1yW3VdJiYodC51bmlmb3Jtc1t1XT1uW3VdKTp0LnVuaWZvcm1zW3VdPW5bdV19fSxlLnByb3RvdHlwZS5nZXRSZW5kZXJUYXJnZXQ9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLmZpbHRlckRhdGEuc3RhY2tbdGhpcy5maWx0ZXJEYXRhLmluZGV4XSxuPXRoaXMuZ2V0UG90UmVuZGVyVGFyZ2V0KHRoaXMucmVuZGVyZXIuZ2wsci5zb3VyY2VGcmFtZS53aWR0aCxyLnNvdXJjZUZyYW1lLmhlaWdodCxlfHxyLnJlc29sdXRpb24pO3JldHVybiBuLnNldEZyYW1lKHIuZGVzdGluYXRpb25GcmFtZSxyLnNvdXJjZUZyYW1lKSxufSxlLnByb3RvdHlwZS5yZXR1cm5SZW5kZXJUYXJnZXQ9ZnVuY3Rpb24odCl7dGhpcy5mcmVlUG90UmVuZGVyVGFyZ2V0KHQpfSxlLnByb3RvdHlwZS5jYWxjdWxhdGVTY3JlZW5TcGFjZU1hdHJpeD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmZpbHRlckRhdGEuc3RhY2tbdGhpcy5maWx0ZXJEYXRhLmluZGV4XTtyZXR1cm4geS5jYWxjdWxhdGVTY3JlZW5TcGFjZU1hdHJpeCh0LGUuc291cmNlRnJhbWUsZS5yZW5kZXJUYXJnZXQuc2l6ZSl9LGUucHJvdG90eXBlLmNhbGN1bGF0ZU5vcm1hbGl6ZWRTY3JlZW5TcGFjZU1hdHJpeD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmZpbHRlckRhdGEuc3RhY2tbdGhpcy5maWx0ZXJEYXRhLmluZGV4XTtyZXR1cm4geS5jYWxjdWxhdGVOb3JtYWxpemVkU2NyZWVuU3BhY2VNYXRyaXgodCxlLnNvdXJjZUZyYW1lLGUucmVuZGVyVGFyZ2V0LnNpemUsZS5kZXN0aW5hdGlvbkZyYW1lKX0sZS5wcm90b3R5cGUuY2FsY3VsYXRlU3ByaXRlTWF0cml4PWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcy5maWx0ZXJEYXRhLnN0YWNrW3RoaXMuZmlsdGVyRGF0YS5pbmRleF07cmV0dXJuIHkuY2FsY3VsYXRlU3ByaXRlTWF0cml4KHQsci5zb3VyY2VGcmFtZSxyLnJlbmRlclRhcmdldC5zaXplLGUpfSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0mJmFyZ3VtZW50c1swXSxlPXRoaXMucmVuZGVyZXIscj10aGlzLm1hbmFnZWRGaWx0ZXJzO2Uub2ZmKFwicHJlcmVuZGVyXCIsdGhpcy5vblByZXJlbmRlcix0aGlzKTtmb3IodmFyIG49MDtuPHIubGVuZ3RoO24rKyl0fHxyW25dLmdsU2hhZGVyc1tlLkNPTlRFWFRfVUlEXS5kZXN0cm95KCksZGVsZXRlIHJbbl0uZ2xTaGFkZXJzW2UuQ09OVEVYVF9VSURdO3RoaXMuc2hhZGVyQ2FjaGU9e30sdD90aGlzLnBvb2w9e306dGhpcy5lbXB0eVBvb2woKX0sZS5wcm90b3R5cGUuZ2V0UG90UmVuZGVyVGFyZ2V0PWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBpPVwic2NyZWVuXCI7ZSo9bixyKj1uLGU9PT10aGlzLl9zY3JlZW5XaWR0aCYmcj09PXRoaXMuX3NjcmVlbkhlaWdodHx8KGU9Xy5kZWZhdWx0Lm5leHRQb3cyKGUpLHI9Xy5kZWZhdWx0Lm5leHRQb3cyKHIpLGk9KDY1NTM1JmUpPDwxNnw2NTUzNSZyKSx0aGlzLnBvb2xbaV18fCh0aGlzLnBvb2xbaV09W10pO3ZhciBvPXRoaXMucG9vbFtpXS5wb3AoKTtpZighbyl7dmFyIHM9dGhpcy5yZW5kZXJlci5ib3VuZFRleHR1cmVzWzBdO3QuYWN0aXZlVGV4dHVyZSh0LlRFWFRVUkUwKSxvPW5ldyBsLmRlZmF1bHQodCxlLHIsbnVsbCwxKSx0LmJpbmRUZXh0dXJlKHQuVEVYVFVSRV8yRCxzLl9nbFRleHR1cmVzW3RoaXMucmVuZGVyZXIuQ09OVEVYVF9VSURdLnRleHR1cmUpfXJldHVybiBvLnJlc29sdXRpb249bixvLmRlZmF1bHRGcmFtZS53aWR0aD1vLnNpemUud2lkdGg9ZS9uLG8uZGVmYXVsdEZyYW1lLmhlaWdodD1vLnNpemUuaGVpZ2h0PXIvbixvLmZpbHRlclBvb2xLZXk9aSxvfSxlLnByb3RvdHlwZS5lbXB0eVBvb2w9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5wb29sKXt2YXIgZT10aGlzLnBvb2xbdF07aWYoZSlmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyllW3JdLmRlc3Ryb3koITApfXRoaXMucG9vbD17fX0sZS5wcm90b3R5cGUuZnJlZVBvdFJlbmRlclRhcmdldD1mdW5jdGlvbih0KXt0aGlzLnBvb2xbdC5maWx0ZXJQb29sS2V5XS5wdXNoKHQpfSxlLnByb3RvdHlwZS5vblByZXJlbmRlcj1mdW5jdGlvbigpe2lmKHRoaXMuX3NjcmVlbldpZHRoIT09dGhpcy5yZW5kZXJlci52aWV3LndpZHRofHx0aGlzLl9zY3JlZW5IZWlnaHQhPT10aGlzLnJlbmRlcmVyLnZpZXcuaGVpZ2h0KXt0aGlzLl9zY3JlZW5XaWR0aD10aGlzLnJlbmRlcmVyLnZpZXcud2lkdGgsdGhpcy5fc2NyZWVuSGVpZ2h0PXRoaXMucmVuZGVyZXIudmlldy5oZWlnaHQ7dmFyIHQ9dGhpcy5wb29sLnNjcmVlbjtpZih0KWZvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKXRbZV0uZGVzdHJveSghMCk7dGhpcy5wb29sLnNjcmVlbj1bXX19LGV9KHUuZGVmYXVsdCk7ci5kZWZhdWx0PXh9LHtcIi4uLy4uLy4uL1NoYWRlclwiOjQ0LFwiLi4vLi4vLi4vbWF0aFwiOjcwLFwiLi4vZmlsdGVycy9maWx0ZXJUcmFuc2Zvcm1zXCI6ODgsXCIuLi91dGlscy9RdWFkXCI6OTUsXCIuLi91dGlscy9SZW5kZXJUYXJnZXRcIjo5NixcIi4vV2ViR0xNYW5hZ2VyXCI6OTMsXCJiaXQtdHdpZGRsZVwiOjF9XSw5MTpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIGkodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBzKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9ci5fX2VzTW9kdWxlPSEwO3ZhciBhPXQoXCIuL1dlYkdMTWFuYWdlclwiKSx1PW4oYSksaD10KFwiLi4vZmlsdGVycy9zcHJpdGVNYXNrL1Nwcml0ZU1hc2tGaWx0ZXJcIiksbD1uKGgpLGM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShyKXtpKHRoaXMsZSk7dmFyIG49byh0aGlzLHQuY2FsbCh0aGlzLHIpKTtyZXR1cm4gbi5zY2lzc29yPSExLG4uc2Npc3NvckRhdGE9bnVsbCxuLnNjaXNzb3JSZW5kZXJUYXJnZXQ9bnVsbCxuLmVuYWJsZVNjaXNzb3I9ITAsbi5hbHBoYU1hc2tQb29sPVtdLG4uYWxwaGFNYXNrSW5kZXg9MCxufXJldHVybiBzKGUsdCksZS5wcm90b3R5cGUucHVzaE1hc2s9ZnVuY3Rpb24odCxlKXtpZihlLnRleHR1cmUpdGhpcy5wdXNoU3ByaXRlTWFzayh0LGUpO2Vsc2UgaWYodGhpcy5lbmFibGVTY2lzc29yJiYhdGhpcy5zY2lzc29yJiZ0aGlzLnJlbmRlcmVyLl9hY3RpdmVSZW5kZXJUYXJnZXQucm9vdCYmIXRoaXMucmVuZGVyZXIuc3RlbmNpbE1hbmFnZXIuc3RlbmNpbE1hc2tTdGFjay5sZW5ndGgmJmUuaXNGYXN0UmVjdCgpKXt2YXIgcj1lLndvcmxkVHJhbnNmb3JtLG49TWF0aC5hdGFuMihyLmIsci5hKTtuPU1hdGgucm91bmQobiooMTgwL01hdGguUEkpKSxuJTkwP3RoaXMucHVzaFN0ZW5jaWxNYXNrKGUpOnRoaXMucHVzaFNjaXNzb3JNYXNrKHQsZSl9ZWxzZSB0aGlzLnB1c2hTdGVuY2lsTWFzayhlKX0sZS5wcm90b3R5cGUucG9wTWFzaz1mdW5jdGlvbih0LGUpe2UudGV4dHVyZT90aGlzLnBvcFNwcml0ZU1hc2sodCxlKTp0aGlzLmVuYWJsZVNjaXNzb3ImJiF0aGlzLnJlbmRlcmVyLnN0ZW5jaWxNYW5hZ2VyLnN0ZW5jaWxNYXNrU3RhY2subGVuZ3RoP3RoaXMucG9wU2Npc3Nvck1hc2sodCxlKTp0aGlzLnBvcFN0ZW5jaWxNYXNrKHQsZSl9LGUucHJvdG90eXBlLnB1c2hTcHJpdGVNYXNrPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcy5hbHBoYU1hc2tQb29sW3RoaXMuYWxwaGFNYXNrSW5kZXhdO3J8fChyPXRoaXMuYWxwaGFNYXNrUG9vbFt0aGlzLmFscGhhTWFza0luZGV4XT1bbmV3IGwuZGVmYXVsdChlKV0pLHJbMF0ucmVzb2x1dGlvbj10aGlzLnJlbmRlcmVyLnJlc29sdXRpb24sclswXS5tYXNrU3ByaXRlPWU7dmFyIG49dC5maWx0ZXJBcmVhO3QuZmlsdGVyQXJlYT1lLmdldEJvdW5kcyghMCksdGhpcy5yZW5kZXJlci5maWx0ZXJNYW5hZ2VyLnB1c2hGaWx0ZXIodCxyKSx0LmZpbHRlckFyZWE9bix0aGlzLmFscGhhTWFza0luZGV4Kyt9LGUucHJvdG90eXBlLnBvcFNwcml0ZU1hc2s9ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcmVyLmZpbHRlck1hbmFnZXIucG9wRmlsdGVyKCksdGhpcy5hbHBoYU1hc2tJbmRleC0tfSxlLnByb3RvdHlwZS5wdXNoU3RlbmNpbE1hc2s9ZnVuY3Rpb24odCl7dGhpcy5yZW5kZXJlci5jdXJyZW50UmVuZGVyZXIuc3RvcCgpLHRoaXMucmVuZGVyZXIuc3RlbmNpbE1hbmFnZXIucHVzaFN0ZW5jaWwodCl9LGUucHJvdG90eXBlLnBvcFN0ZW5jaWxNYXNrPWZ1bmN0aW9uKCl7dGhpcy5yZW5kZXJlci5jdXJyZW50UmVuZGVyZXIuc3RvcCgpLHRoaXMucmVuZGVyZXIuc3RlbmNpbE1hbmFnZXIucG9wU3RlbmNpbCgpfSxlLnByb3RvdHlwZS5wdXNoU2Npc3Nvck1hc2s9ZnVuY3Rpb24odCxlKXtlLnJlbmRlcmFibGU9ITA7dmFyIHI9dGhpcy5yZW5kZXJlci5fYWN0aXZlUmVuZGVyVGFyZ2V0LG49ZS5nZXRCb3VuZHMoKTtuLmZpdChyLnNpemUpLGUucmVuZGVyYWJsZT0hMSx0aGlzLnJlbmRlcmVyLmdsLmVuYWJsZSh0aGlzLnJlbmRlcmVyLmdsLlNDSVNTT1JfVEVTVCk7dmFyIGk9dGhpcy5yZW5kZXJlci5yZXNvbHV0aW9uO3RoaXMucmVuZGVyZXIuZ2wuc2Npc3NvcihuLngqaSwoci5yb290P3Iuc2l6ZS5oZWlnaHQtbi55LW4uaGVpZ2h0Om4ueSkqaSxuLndpZHRoKmksbi5oZWlnaHQqaSksdGhpcy5zY2lzc29yUmVuZGVyVGFyZ2V0PXIsdGhpcy5zY2lzc29yRGF0YT1lLHRoaXMuc2Npc3Nvcj0hMH0sZS5wcm90b3R5cGUucG9wU2Npc3Nvck1hc2s9ZnVuY3Rpb24oKXt0aGlzLnNjaXNzb3JSZW5kZXJUYXJnZXQ9bnVsbCx0aGlzLnNjaXNzb3JEYXRhPW51bGwsdGhpcy5zY2lzc29yPSExO3ZhciB0PXRoaXMucmVuZGVyZXIuZ2w7dC5kaXNhYmxlKHQuU0NJU1NPUl9URVNUKX0sZX0odS5kZWZhdWx0KTtyLmRlZmF1bHQ9Y30se1wiLi4vZmlsdGVycy9zcHJpdGVNYXNrL1Nwcml0ZU1hc2tGaWx0ZXJcIjo4OSxcIi4vV2ViR0xNYW5hZ2VyXCI6OTN9XSw5MjpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkodCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBvKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9ci5fX2VzTW9kdWxlPSEwO3ZhciBzPXQoXCIuL1dlYkdMTWFuYWdlclwiKSxhPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0ocyksdT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHIpe24odGhpcyxlKTt2YXIgbz1pKHRoaXMsdC5jYWxsKHRoaXMscikpO3JldHVybiBvLnN0ZW5jaWxNYXNrU3RhY2s9bnVsbCxvfXJldHVybiBvKGUsdCksZS5wcm90b3R5cGUuc2V0TWFza1N0YWNrPWZ1bmN0aW9uKHQpe3RoaXMuc3RlbmNpbE1hc2tTdGFjaz10O3ZhciBlPXRoaXMucmVuZGVyZXIuZ2w7MD09PXQubGVuZ3RoP2UuZGlzYWJsZShlLlNURU5DSUxfVEVTVCk6ZS5lbmFibGUoZS5TVEVOQ0lMX1RFU1QpfSxlLnByb3RvdHlwZS5wdXNoU3RlbmNpbD1mdW5jdGlvbih0KXt0aGlzLnJlbmRlcmVyLnNldE9iamVjdFJlbmRlcmVyKHRoaXMucmVuZGVyZXIucGx1Z2lucy5ncmFwaGljcyksdGhpcy5yZW5kZXJlci5fYWN0aXZlUmVuZGVyVGFyZ2V0LmF0dGFjaFN0ZW5jaWxCdWZmZXIoKTt2YXIgZT10aGlzLnJlbmRlcmVyLmdsLHI9dGhpcy5zdGVuY2lsTWFza1N0YWNrLmxlbmd0aDswPT09ciYmZS5lbmFibGUoZS5TVEVOQ0lMX1RFU1QpLHRoaXMuc3RlbmNpbE1hc2tTdGFjay5wdXNoKHQpLGUuY29sb3JNYXNrKCExLCExLCExLCExKSxlLnN0ZW5jaWxGdW5jKGUuRVFVQUwscix0aGlzLl9nZXRCaXR3aXNlTWFzaygpKSxlLnN0ZW5jaWxPcChlLktFRVAsZS5LRUVQLGUuSU5DUiksdGhpcy5yZW5kZXJlci5wbHVnaW5zLmdyYXBoaWNzLnJlbmRlcih0KSx0aGlzLl91c2VDdXJyZW50KCl9LGUucHJvdG90eXBlLnBvcFN0ZW5jaWw9ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcmVyLnNldE9iamVjdFJlbmRlcmVyKHRoaXMucmVuZGVyZXIucGx1Z2lucy5ncmFwaGljcyk7dmFyIHQ9dGhpcy5yZW5kZXJlci5nbCxlPXRoaXMuc3RlbmNpbE1hc2tTdGFjay5wb3AoKTswPT09dGhpcy5zdGVuY2lsTWFza1N0YWNrLmxlbmd0aD8odC5kaXNhYmxlKHQuU1RFTkNJTF9URVNUKSx0LmNsZWFyKHQuU1RFTkNJTF9CVUZGRVJfQklUKSx0LmNsZWFyU3RlbmNpbCgwKSk6KHQuY29sb3JNYXNrKCExLCExLCExLCExKSx0LnN0ZW5jaWxPcCh0LktFRVAsdC5LRUVQLHQuREVDUiksdGhpcy5yZW5kZXJlci5wbHVnaW5zLmdyYXBoaWNzLnJlbmRlcihlKSx0aGlzLl91c2VDdXJyZW50KCkpfSxlLnByb3RvdHlwZS5fdXNlQ3VycmVudD1mdW5jdGlvbigpe3ZhciB0PXRoaXMucmVuZGVyZXIuZ2w7dC5jb2xvck1hc2soITAsITAsITAsITApLHQuc3RlbmNpbEZ1bmModC5FUVVBTCx0aGlzLnN0ZW5jaWxNYXNrU3RhY2subGVuZ3RoLHRoaXMuX2dldEJpdHdpc2VNYXNrKCkpLHQuc3RlbmNpbE9wKHQuS0VFUCx0LktFRVAsdC5LRUVQKX0sZS5wcm90b3R5cGUuX2dldEJpdHdpc2VNYXNrPWZ1bmN0aW9uKCl7cmV0dXJuKDE8PHRoaXMuc3RlbmNpbE1hc2tTdGFjay5sZW5ndGgpLTF9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXthLmRlZmF1bHQucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKSx0aGlzLnN0ZW5jaWxNYXNrU3RhY2suc3RlbmNpbFN0YWNrPW51bGx9LGV9KGEuZGVmYXVsdCk7ci5kZWZhdWx0PXV9LHtcIi4vV2ViR0xNYW5hZ2VyXCI6OTN9XSw5MzpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfXIuX19lc01vZHVsZT0hMDt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7bih0aGlzLHQpLHRoaXMucmVuZGVyZXI9ZSx0aGlzLnJlbmRlcmVyLm9uKFwiY29udGV4dFwiLHRoaXMub25Db250ZXh0Q2hhbmdlLHRoaXMpfXJldHVybiB0LnByb3RvdHlwZS5vbkNvbnRleHRDaGFuZ2U9ZnVuY3Rpb24oKXt9LHQucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcmVyLm9mZihcImNvbnRleHRcIix0aGlzLm9uQ29udGV4dENoYW5nZSx0aGlzKSx0aGlzLnJlbmRlcmVyPW51bGx9LHR9KCk7ci5kZWZhdWx0PWl9LHt9XSw5NDpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkodCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBvKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9ci5fX2VzTW9kdWxlPSEwO3ZhciBzPXQoXCIuLi9tYW5hZ2Vycy9XZWJHTE1hbmFnZXJcIiksYT1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KHMpLHU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBuKHRoaXMsZSksaSh0aGlzLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gbyhlLHQpLGUucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5mbHVzaCgpfSxlLnByb3RvdHlwZS5mbHVzaD1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKHQpe30sZX0oYS5kZWZhdWx0KTtyLmRlZmF1bHQ9dX0se1wiLi4vbWFuYWdlcnMvV2ViR0xNYW5hZ2VyXCI6OTN9XSw5NTpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIGkodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfXIuX19lc01vZHVsZT0hMDt2YXIgbz10KFwicGl4aS1nbC1jb3JlXCIpLHM9bihvKSxhPXQoXCIuLi8uLi8uLi91dGlscy9jcmVhdGVJbmRpY2VzRm9yUXVhZHNcIiksdT1uKGEpLGg9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUscil7aSh0aGlzLHQpLHRoaXMuZ2w9ZSx0aGlzLnZlcnRpY2VzPW5ldyBGbG9hdDMyQXJyYXkoWy0xLC0xLDEsLTEsMSwxLC0xLDFdKSx0aGlzLnV2cz1uZXcgRmxvYXQzMkFycmF5KFswLDAsMSwwLDEsMSwwLDFdKSx0aGlzLmludGVybGVhdmVkPW5ldyBGbG9hdDMyQXJyYXkoMTYpO2Zvcih2YXIgbj0wO248NDtuKyspdGhpcy5pbnRlcmxlYXZlZFs0Km5dPXRoaXMudmVydGljZXNbMipuXSx0aGlzLmludGVybGVhdmVkWzQqbisxXT10aGlzLnZlcnRpY2VzWzIqbisxXSx0aGlzLmludGVybGVhdmVkWzQqbisyXT10aGlzLnV2c1syKm5dLHRoaXMuaW50ZXJsZWF2ZWRbNCpuKzNdPXRoaXMudXZzWzIqbisxXTt0aGlzLmluZGljZXM9KDAsdS5kZWZhdWx0KSgxKSx0aGlzLnZlcnRleEJ1ZmZlcj1zLmRlZmF1bHQuR0xCdWZmZXIuY3JlYXRlVmVydGV4QnVmZmVyKGUsdGhpcy5pbnRlcmxlYXZlZCxlLlNUQVRJQ19EUkFXKSx0aGlzLmluZGV4QnVmZmVyPXMuZGVmYXVsdC5HTEJ1ZmZlci5jcmVhdGVJbmRleEJ1ZmZlcihlLHRoaXMuaW5kaWNlcyxlLlNUQVRJQ19EUkFXKSx0aGlzLnZhbz1uZXcgcy5kZWZhdWx0LlZlcnRleEFycmF5T2JqZWN0KGUscil9cmV0dXJuIHQucHJvdG90eXBlLmluaXRWYW89ZnVuY3Rpb24odCl7dGhpcy52YW8uY2xlYXIoKS5hZGRJbmRleCh0aGlzLmluZGV4QnVmZmVyKS5hZGRBdHRyaWJ1dGUodGhpcy52ZXJ0ZXhCdWZmZXIsdC5hdHRyaWJ1dGVzLmFWZXJ0ZXhQb3NpdGlvbix0aGlzLmdsLkZMT0FULCExLDE2LDApLmFkZEF0dHJpYnV0ZSh0aGlzLnZlcnRleEJ1ZmZlcix0LmF0dHJpYnV0ZXMuYVRleHR1cmVDb29yZCx0aGlzLmdsLkZMT0FULCExLDE2LDgpfSx0LnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlKXt2YXIgcj0wLG49MDtyZXR1cm4gdGhpcy51dnNbMF09cix0aGlzLnV2c1sxXT1uLHRoaXMudXZzWzJdPXIrZS53aWR0aC90LndpZHRoLHRoaXMudXZzWzNdPW4sdGhpcy51dnNbNF09citlLndpZHRoL3Qud2lkdGgsdGhpcy51dnNbNV09bitlLmhlaWdodC90LmhlaWdodCx0aGlzLnV2c1s2XT1yLHRoaXMudXZzWzddPW4rZS5oZWlnaHQvdC5oZWlnaHQscj1lLngsbj1lLnksdGhpcy52ZXJ0aWNlc1swXT1yLHRoaXMudmVydGljZXNbMV09bix0aGlzLnZlcnRpY2VzWzJdPXIrZS53aWR0aCx0aGlzLnZlcnRpY2VzWzNdPW4sdGhpcy52ZXJ0aWNlc1s0XT1yK2Uud2lkdGgsdGhpcy52ZXJ0aWNlc1s1XT1uK2UuaGVpZ2h0LHRoaXMudmVydGljZXNbNl09cix0aGlzLnZlcnRpY2VzWzddPW4rZS5oZWlnaHQsdGhpc30sdC5wcm90b3R5cGUudXBsb2FkPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDw0O3QrKyl0aGlzLmludGVybGVhdmVkWzQqdF09dGhpcy52ZXJ0aWNlc1syKnRdLHRoaXMuaW50ZXJsZWF2ZWRbNCp0KzFdPXRoaXMudmVydGljZXNbMip0KzFdLHRoaXMuaW50ZXJsZWF2ZWRbNCp0KzJdPXRoaXMudXZzWzIqdF0sdGhpcy5pbnRlcmxlYXZlZFs0KnQrM109dGhpcy51dnNbMip0KzFdO3JldHVybiB0aGlzLnZlcnRleEJ1ZmZlci51cGxvYWQodGhpcy5pbnRlcmxlYXZlZCksdGhpc30sdC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2w7dC5kZWxldGVCdWZmZXIodGhpcy52ZXJ0ZXhCdWZmZXIpLHQuZGVsZXRlQnVmZmVyKHRoaXMuaW5kZXhCdWZmZXIpfSx0fSgpO3IuZGVmYXVsdD1ofSx7XCIuLi8uLi8uLi91dGlscy9jcmVhdGVJbmRpY2VzRm9yUXVhZHNcIjoxMjMsXCJwaXhpLWdsLWNvcmVcIjoxNX1dLDk2OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ci5fX2VzTW9kdWxlPSEwO3ZhciBpPXQoXCIuLi8uLi8uLi9tYXRoXCIpLG89dChcIi4uLy4uLy4uL2NvbnN0XCIpLHM9dChcIi4uLy4uLy4uL3NldHRpbmdzXCIpLGE9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShzKSx1PXQoXCJwaXhpLWdsLWNvcmVcIiksaD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxyLHMsaCxsLGMpe24odGhpcyx0KSx0aGlzLmdsPWUsdGhpcy5mcmFtZUJ1ZmZlcj1udWxsLHRoaXMudGV4dHVyZT1udWxsLHRoaXMuY2xlYXJDb2xvcj1bMCwwLDAsMF0sdGhpcy5zaXplPW5ldyBpLlJlY3RhbmdsZSgwLDAsMSwxKSx0aGlzLnJlc29sdXRpb249bHx8YS5kZWZhdWx0LlJFU09MVVRJT04sdGhpcy5wcm9qZWN0aW9uTWF0cml4PW5ldyBpLk1hdHJpeCx0aGlzLnRyYW5zZm9ybT1udWxsLHRoaXMuZnJhbWU9bnVsbCx0aGlzLmRlZmF1bHRGcmFtZT1uZXcgaS5SZWN0YW5nbGUsdGhpcy5kZXN0aW5hdGlvbkZyYW1lPW51bGwsdGhpcy5zb3VyY2VGcmFtZT1udWxsLHRoaXMuc3RlbmNpbEJ1ZmZlcj1udWxsLHRoaXMuc3RlbmNpbE1hc2tTdGFjaz1bXSx0aGlzLmZpbHRlckRhdGE9bnVsbCx0aGlzLmZpbHRlclBvb2xLZXk9XCJcIix0aGlzLnNjYWxlTW9kZT12b2lkIDAhPT1oP2g6YS5kZWZhdWx0LlNDQUxFX01PREUsdGhpcy5yb290PWN8fCExLHRoaXMucm9vdD8odGhpcy5mcmFtZUJ1ZmZlcj1uZXcgdS5HTEZyYW1lYnVmZmVyKGUsMTAwLDEwMCksdGhpcy5mcmFtZUJ1ZmZlci5mcmFtZWJ1ZmZlcj1udWxsKToodGhpcy5mcmFtZUJ1ZmZlcj11LkdMRnJhbWVidWZmZXIuY3JlYXRlUkdCQShlLDEwMCwxMDApLHRoaXMuc2NhbGVNb2RlPT09by5TQ0FMRV9NT0RFUy5ORUFSRVNUP3RoaXMuZnJhbWVCdWZmZXIudGV4dHVyZS5lbmFibGVOZWFyZXN0U2NhbGluZygpOnRoaXMuZnJhbWVCdWZmZXIudGV4dHVyZS5lbmFibGVMaW5lYXJTY2FsaW5nKCksdGhpcy50ZXh0dXJlPXRoaXMuZnJhbWVCdWZmZXIudGV4dHVyZSksdGhpcy5zZXRGcmFtZSgpLHRoaXMucmVzaXplKHIscyl9cmV0dXJuIHQucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKHQpe3ZhciBlPXR8fHRoaXMuY2xlYXJDb2xvcjt0aGlzLmZyYW1lQnVmZmVyLmNsZWFyKGVbMF0sZVsxXSxlWzJdLGVbM10pfSx0LnByb3RvdHlwZS5hdHRhY2hTdGVuY2lsQnVmZmVyPWZ1bmN0aW9uKCl7dGhpcy5yb290fHx0aGlzLmZyYW1lQnVmZmVyLmVuYWJsZVN0ZW5jaWwoKX0sdC5wcm90b3R5cGUuc2V0RnJhbWU9ZnVuY3Rpb24odCxlKXt0aGlzLmRlc3RpbmF0aW9uRnJhbWU9dHx8dGhpcy5kZXN0aW5hdGlvbkZyYW1lfHx0aGlzLmRlZmF1bHRGcmFtZSx0aGlzLnNvdXJjZUZyYW1lPWV8fHRoaXMuc291cmNlRnJhbWV8fHRoaXMuZGVzdGluYXRpb25GcmFtZX0sdC5wcm90b3R5cGUuYWN0aXZhdGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdsO3RoaXMuZnJhbWVCdWZmZXIuYmluZCgpLHRoaXMuY2FsY3VsYXRlUHJvamVjdGlvbih0aGlzLmRlc3RpbmF0aW9uRnJhbWUsdGhpcy5zb3VyY2VGcmFtZSksdGhpcy50cmFuc2Zvcm0mJnRoaXMucHJvamVjdGlvbk1hdHJpeC5hcHBlbmQodGhpcy50cmFuc2Zvcm0pLHRoaXMuZGVzdGluYXRpb25GcmFtZSE9PXRoaXMuc291cmNlRnJhbWU/KHQuZW5hYmxlKHQuU0NJU1NPUl9URVNUKSx0LnNjaXNzb3IoMHx0aGlzLmRlc3RpbmF0aW9uRnJhbWUueCwwfHRoaXMuZGVzdGluYXRpb25GcmFtZS55LHRoaXMuZGVzdGluYXRpb25GcmFtZS53aWR0aCp0aGlzLnJlc29sdXRpb258MCx0aGlzLmRlc3RpbmF0aW9uRnJhbWUuaGVpZ2h0KnRoaXMucmVzb2x1dGlvbnwwKSk6dC5kaXNhYmxlKHQuU0NJU1NPUl9URVNUKSx0LnZpZXdwb3J0KDB8dGhpcy5kZXN0aW5hdGlvbkZyYW1lLngsMHx0aGlzLmRlc3RpbmF0aW9uRnJhbWUueSx0aGlzLmRlc3RpbmF0aW9uRnJhbWUud2lkdGgqdGhpcy5yZXNvbHV0aW9ufDAsdGhpcy5kZXN0aW5hdGlvbkZyYW1lLmhlaWdodCp0aGlzLnJlc29sdXRpb258MCl9LHQucHJvdG90eXBlLmNhbGN1bGF0ZVByb2plY3Rpb249ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLnByb2plY3Rpb25NYXRyaXg7ZT1lfHx0LHIuaWRlbnRpdHkoKSx0aGlzLnJvb3Q/KHIuYT0xL3Qud2lkdGgqMixyLmQ9LTEvdC5oZWlnaHQqMixyLnR4PS0xLWUueCpyLmEsci50eT0xLWUueSpyLmQpOihyLmE9MS90LndpZHRoKjIsci5kPTEvdC5oZWlnaHQqMixyLnR4PS0xLWUueCpyLmEsci50eT0tMS1lLnkqci5kKX0sdC5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKHQsZSl7aWYodHw9MCxlfD0wLHRoaXMuc2l6ZS53aWR0aCE9PXR8fHRoaXMuc2l6ZS5oZWlnaHQhPT1lKXt0aGlzLnNpemUud2lkdGg9dCx0aGlzLnNpemUuaGVpZ2h0PWUsdGhpcy5kZWZhdWx0RnJhbWUud2lkdGg9dCx0aGlzLmRlZmF1bHRGcmFtZS5oZWlnaHQ9ZSx0aGlzLmZyYW1lQnVmZmVyLnJlc2l6ZSh0KnRoaXMucmVzb2x1dGlvbixlKnRoaXMucmVzb2x1dGlvbik7dmFyIHI9dGhpcy5mcmFtZXx8dGhpcy5zaXplO3RoaXMuY2FsY3VsYXRlUHJvamVjdGlvbihyKX19LHQucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmZyYW1lQnVmZmVyLnN0ZW5jaWwmJnRoaXMuZ2wuZGVsZXRlUmVuZGVyYnVmZmVyKHRoaXMuZnJhbWVCdWZmZXIuc3RlbmNpbCksdGhpcy5mcmFtZUJ1ZmZlci5kZXN0cm95KCksdGhpcy5mcmFtZUJ1ZmZlcj1udWxsLHRoaXMudGV4dHVyZT1udWxsfSx0fSgpO3IuZGVmYXVsdD1ofSx7XCIuLi8uLi8uLi9jb25zdFwiOjQ2LFwiLi4vLi4vLi4vbWF0aFwiOjcwLFwiLi4vLi4vLi4vc2V0dGluZ3NcIjoxMDEsXCJwaXhpLWdsLWNvcmVcIjoxNX1dLDk3OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe3ZhciByPSFlO2lmKHIpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7bi53aWR0aD0xLG4uaGVpZ2h0PTEsZT1zLmRlZmF1bHQuY3JlYXRlQ29udGV4dChuKX1mb3IodmFyIG89ZS5jcmVhdGVTaGFkZXIoZS5GUkFHTUVOVF9TSEFERVIpOzspe3ZhciB1PWEucmVwbGFjZSgvJWZvcmxvb3AlL2dpLGkodCkpO2lmKGUuc2hhZGVyU291cmNlKG8sdSksZS5jb21waWxlU2hhZGVyKG8pLGUuZ2V0U2hhZGVyUGFyYW1ldGVyKG8sZS5DT01QSUxFX1NUQVRVUykpYnJlYWs7dD10LzJ8MH1yZXR1cm4gciYmZS5nZXRFeHRlbnNpb24oXCJXRUJHTF9sb3NlX2NvbnRleHRcIikmJmUuZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfbG9zZV9jb250ZXh0XCIpLmxvc2VDb250ZXh0KCksdH1mdW5jdGlvbiBpKHQpe2Zvcih2YXIgZT1cIlwiLHI9MDtyPHQ7KytyKXI+MCYmKGUrPVwiXFxuZWxzZSBcIikscjx0LTEmJihlKz1cImlmKHRlc3QgPT0gXCIrcitcIi4wKXt9XCIpO3JldHVybiBlfXIuX19lc01vZHVsZT0hMCxyLmRlZmF1bHQ9bjt2YXIgbz10KFwicGl4aS1nbC1jb3JlXCIpLHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShvKSxhPVtcInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1wiLFwidm9pZCBtYWluKHZvaWQpe1wiLFwiZmxvYXQgdGVzdCA9IDAuMTtcIixcIiVmb3Jsb29wJVwiLFwiZ2xfRnJhZ0NvbG9yID0gdmVjNCgwLjApO1wiLFwifVwiXS5qb2luKFwiXFxuXCIpfSx7XCJwaXhpLWdsLWNvcmVcIjoxNX1dLDk4OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06W107cmV0dXJuIGVbaS5CTEVORF9NT0RFUy5OT1JNQUxdPVt0Lk9ORSx0Lk9ORV9NSU5VU19TUkNfQUxQSEFdLGVbaS5CTEVORF9NT0RFUy5BRERdPVt0Lk9ORSx0Lk9ORV0sZVtpLkJMRU5EX01PREVTLk1VTFRJUExZXT1bdC5EU1RfQ09MT1IsdC5PTkVfTUlOVVNfU1JDX0FMUEhBLHQuT05FLHQuT05FX01JTlVTX1NSQ19BTFBIQV0sZVtpLkJMRU5EX01PREVTLlNDUkVFTl09W3QuT05FLHQuT05FX01JTlVTX1NSQ19DT0xPUix0Lk9ORSx0Lk9ORV9NSU5VU19TUkNfQUxQSEFdLGVbaS5CTEVORF9NT0RFUy5PVkVSTEFZXT1bdC5PTkUsdC5PTkVfTUlOVVNfU1JDX0FMUEhBXSxlW2kuQkxFTkRfTU9ERVMuREFSS0VOXT1bdC5PTkUsdC5PTkVfTUlOVVNfU1JDX0FMUEhBXSxlW2kuQkxFTkRfTU9ERVMuTElHSFRFTl09W3QuT05FLHQuT05FX01JTlVTX1NSQ19BTFBIQV0sZVtpLkJMRU5EX01PREVTLkNPTE9SX0RPREdFXT1bdC5PTkUsdC5PTkVfTUlOVVNfU1JDX0FMUEhBXSxlW2kuQkxFTkRfTU9ERVMuQ09MT1JfQlVSTl09W3QuT05FLHQuT05FX01JTlVTX1NSQ19BTFBIQV0sZVtpLkJMRU5EX01PREVTLkhBUkRfTElHSFRdPVt0Lk9ORSx0Lk9ORV9NSU5VU19TUkNfQUxQSEFdLGVbaS5CTEVORF9NT0RFUy5TT0ZUX0xJR0hUXT1bdC5PTkUsdC5PTkVfTUlOVVNfU1JDX0FMUEhBXSxlW2kuQkxFTkRfTU9ERVMuRElGRkVSRU5DRV09W3QuT05FLHQuT05FX01JTlVTX1NSQ19BTFBIQV0sZVtpLkJMRU5EX01PREVTLkVYQ0xVU0lPTl09W3QuT05FLHQuT05FX01JTlVTX1NSQ19BTFBIQV0sZVtpLkJMRU5EX01PREVTLkhVRV09W3QuT05FLHQuT05FX01JTlVTX1NSQ19BTFBIQV0sZVtpLkJMRU5EX01PREVTLlNBVFVSQVRJT05dPVt0Lk9ORSx0Lk9ORV9NSU5VU19TUkNfQUxQSEFdLGVbaS5CTEVORF9NT0RFUy5DT0xPUl09W3QuT05FLHQuT05FX01JTlVTX1NSQ19BTFBIQV0sZVtpLkJMRU5EX01PREVTLkxVTUlOT1NJVFldPVt0Lk9ORSx0Lk9ORV9NSU5VU19TUkNfQUxQSEFdLGVbaS5CTEVORF9NT0RFUy5OT1JNQUxfTlBNXT1bdC5TUkNfQUxQSEEsdC5PTkVfTUlOVVNfU1JDX0FMUEhBLHQuT05FLHQuT05FX01JTlVTX1NSQ19BTFBIQV0sZVtpLkJMRU5EX01PREVTLkFERF9OUE1dPVt0LlNSQ19BTFBIQSx0Lk9ORSx0Lk9ORSx0Lk9ORV0sZVtpLkJMRU5EX01PREVTLlNDUkVFTl9OUE1dPVt0LlNSQ19BTFBIQSx0Lk9ORV9NSU5VU19TUkNfQ09MT1IsdC5PTkUsdC5PTkVfTUlOVVNfU1JDX0FMUEhBXSxlfXIuX19lc01vZHVsZT0hMCxyLmRlZmF1bHQ9bjt2YXIgaT10KFwiLi4vLi4vLi4vY29uc3RcIil9LHtcIi4uLy4uLy4uL2NvbnN0XCI6NDZ9XSw5OTpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3JldHVybiBlW2kuRFJBV19NT0RFUy5QT0lOVFNdPXQuUE9JTlRTLGVbaS5EUkFXX01PREVTLkxJTkVTXT10LkxJTkVTLGVbaS5EUkFXX01PREVTLkxJTkVfTE9PUF09dC5MSU5FX0xPT1AsZVtpLkRSQVdfTU9ERVMuTElORV9TVFJJUF09dC5MSU5FX1NUUklQLGVbaS5EUkFXX01PREVTLlRSSUFOR0xFU109dC5UUklBTkdMRVMsZVtpLkRSQVdfTU9ERVMuVFJJQU5HTEVfU1RSSVBdPXQuVFJJQU5HTEVfU1RSSVAsZVtpLkRSQVdfTU9ERVMuVFJJQU5HTEVfRkFOXT10LlRSSUFOR0xFX0ZBTixlfXIuX19lc01vZHVsZT0hMCxyLmRlZmF1bHQ9bjt2YXIgaT10KFwiLi4vLi4vLi4vY29uc3RcIil9LHtcIi4uLy4uLy4uL2NvbnN0XCI6NDZ9XSwxMDA6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe3QuZ2V0Q29udGV4dEF0dHJpYnV0ZXMoKS5zdGVuY2lsfHxjb25zb2xlLndhcm4oXCJQcm92aWRlZCBXZWJHTCBjb250ZXh0IGRvZXMgbm90IGhhdmUgYSBzdGVuY2lsIGJ1ZmZlciwgbWFza3MgbWF5IG5vdCByZW5kZXIgY29ycmVjdGx5XCIpfXIuX19lc01vZHVsZT0hMCxyLmRlZmF1bHQ9bn0se31dLDEwMTpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fXIuX19lc01vZHVsZT0hMDt2YXIgaT10KFwiLi91dGlscy9tYXhSZWNvbW1lbmRlZFRleHR1cmVzXCIpLG89bihpKSxzPXQoXCIuL3V0aWxzL2NhblVwbG9hZFNhbWVCdWZmZXJcIiksYT1uKHMpO3IuZGVmYXVsdD17VEFSR0VUX0ZQTVM6LjA2LE1JUE1BUF9URVhUVVJFUzohMCxSRVNPTFVUSU9OOjEsRklMVEVSX1JFU09MVVRJT046MSxTUFJJVEVfTUFYX1RFWFRVUkVTOigwLG8uZGVmYXVsdCkoMzIpLFNQUklURV9CQVRDSF9TSVpFOjQwOTYsUkVUSU5BX1BSRUZJWDovQChbMC05XFwuXSspeC8sUkVOREVSX09QVElPTlM6e3ZpZXc6bnVsbCxhbnRpYWxpYXM6ITEsZm9yY2VGWEFBOiExLGF1dG9SZXNpemU6ITEsdHJhbnNwYXJlbnQ6ITEsYmFja2dyb3VuZENvbG9yOjAsY2xlYXJCZWZvcmVSZW5kZXI6ITAscHJlc2VydmVEcmF3aW5nQnVmZmVyOiExLHJvdW5kUGl4ZWxzOiExLHdpZHRoOjgwMCxoZWlnaHQ6NjAwLGxlZ2FjeTohMX0sVFJBTlNGT1JNX01PREU6MCxHQ19NT0RFOjAsR0NfTUFYX0lETEU6MzYwMCxHQ19NQVhfQ0hFQ0tfQ09VTlQ6NjAwLFdSQVBfTU9ERTowLFNDQUxFX01PREU6MCxQUkVDSVNJT05fVkVSVEVYOlwiaGlnaHBcIixQUkVDSVNJT05fRlJBR01FTlQ6XCJtZWRpdW1wXCIsQ0FOX1VQTE9BRF9TQU1FX0JVRkZFUjooMCxhLmRlZmF1bHQpKCksTUVTSF9DQU5WQVNfUEFERElORzowfX0se1wiLi91dGlscy9jYW5VcGxvYWRTYW1lQnVmZmVyXCI6MTIyLFwiLi91dGlscy9tYXhSZWNvbW1lbmRlZFRleHR1cmVzXCI6MTI3fV0sMTAyOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIHModCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1yLl9fZXNNb2R1bGU9ITA7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBuPWVbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSxyLG4pe3JldHVybiByJiZ0KGUucHJvdG90eXBlLHIpLG4mJnQoZSxuKSxlfX0oKSx1PXQoXCIuLi9tYXRoXCIpLGg9dChcIi4uL3V0aWxzXCIpLGw9dChcIi4uL2NvbnN0XCIpLGM9dChcIi4uL3RleHR1cmVzL1RleHR1cmVcIiksZD1uKGMpLGY9dChcIi4uL2Rpc3BsYXkvQ29udGFpbmVyXCIpLHA9bihmKSx2PW5ldyB1LlBvaW50LGc9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShyKXtpKHRoaXMsZSk7dmFyIG49byh0aGlzLHQuY2FsbCh0aGlzKSk7cmV0dXJuIG4uX2FuY2hvcj1uZXcgdS5PYnNlcnZhYmxlUG9pbnQobi5fb25BbmNob3JVcGRhdGUsbixyP3IuZGVmYXVsdEFuY2hvci54OjAscj9yLmRlZmF1bHRBbmNob3IueTowKSxuLl90ZXh0dXJlPW51bGwsbi5fd2lkdGg9MCxuLl9oZWlnaHQ9MCxuLl90aW50PW51bGwsbi5fdGludFJHQj1udWxsLG4udGludD0xNjc3NzIxNSxuLmJsZW5kTW9kZT1sLkJMRU5EX01PREVTLk5PUk1BTCxuLnNoYWRlcj1udWxsLG4uY2FjaGVkVGludD0xNjc3NzIxNSxuLnRleHR1cmU9cnx8ZC5kZWZhdWx0LkVNUFRZLG4udmVydGV4RGF0YT1uZXcgRmxvYXQzMkFycmF5KDgpLG4udmVydGV4VHJpbW1lZERhdGE9bnVsbCxuLl90cmFuc2Zvcm1JRD0tMSxuLl90ZXh0dXJlSUQ9LTEsbi5fdHJhbnNmb3JtVHJpbW1lZElEPS0xLG4uX3RleHR1cmVUcmltbWVkSUQ9LTEsbi5wbHVnaW5OYW1lPVwic3ByaXRlXCIsbn1yZXR1cm4gcyhlLHQpLGUucHJvdG90eXBlLl9vblRleHR1cmVVcGRhdGU9ZnVuY3Rpb24oKXt0aGlzLl90ZXh0dXJlSUQ9LTEsdGhpcy5fdGV4dHVyZVRyaW1tZWRJRD0tMSx0aGlzLmNhY2hlZFRpbnQ9MTY3NzcyMTUsdGhpcy5fd2lkdGgmJih0aGlzLnNjYWxlLng9KDAsaC5zaWduKSh0aGlzLnNjYWxlLngpKnRoaXMuX3dpZHRoL3RoaXMuX3RleHR1cmUub3JpZy53aWR0aCksdGhpcy5faGVpZ2h0JiYodGhpcy5zY2FsZS55PSgwLGguc2lnbikodGhpcy5zY2FsZS55KSp0aGlzLl9oZWlnaHQvdGhpcy5fdGV4dHVyZS5vcmlnLmhlaWdodCl9LGUucHJvdG90eXBlLl9vbkFuY2hvclVwZGF0ZT1mdW5jdGlvbigpe3RoaXMuX3RyYW5zZm9ybUlEPS0xLHRoaXMuX3RyYW5zZm9ybVRyaW1tZWRJRD0tMX0sZS5wcm90b3R5cGUuY2FsY3VsYXRlVmVydGljZXM9ZnVuY3Rpb24oKXtpZih0aGlzLl90cmFuc2Zvcm1JRCE9PXRoaXMudHJhbnNmb3JtLl93b3JsZElEfHx0aGlzLl90ZXh0dXJlSUQhPT10aGlzLl90ZXh0dXJlLl91cGRhdGVJRCl7dGhpcy5fdHJhbnNmb3JtSUQ9dGhpcy50cmFuc2Zvcm0uX3dvcmxkSUQsdGhpcy5fdGV4dHVyZUlEPXRoaXMuX3RleHR1cmUuX3VwZGF0ZUlEO3ZhciB0PXRoaXMuX3RleHR1cmUsZT10aGlzLnRyYW5zZm9ybS53b3JsZFRyYW5zZm9ybSxyPWUuYSxuPWUuYixpPWUuYyxvPWUuZCxzPWUudHgsYT1lLnR5LHU9dGhpcy52ZXJ0ZXhEYXRhLGg9dC50cmltLGw9dC5vcmlnLGM9dGhpcy5fYW5jaG9yLGQ9MCxmPTAscD0wLHY9MDtoPyhmPWgueC1jLl94Kmwud2lkdGgsZD1mK2gud2lkdGgsdj1oLnktYy5feSpsLmhlaWdodCxwPXYraC5oZWlnaHQpOihmPS1jLl94Kmwud2lkdGgsZD1mK2wud2lkdGgsdj0tYy5feSpsLmhlaWdodCxwPXYrbC5oZWlnaHQpLHVbMF09cipmK2kqditzLHVbMV09byp2K24qZithLHVbMl09cipkK2kqditzLHVbM109byp2K24qZCthLHVbNF09cipkK2kqcCtzLHVbNV09bypwK24qZCthLHVbNl09cipmK2kqcCtzLHVbN109bypwK24qZithfX0sZS5wcm90b3R5cGUuY2FsY3VsYXRlVHJpbW1lZFZlcnRpY2VzPWZ1bmN0aW9uKCl7aWYodGhpcy52ZXJ0ZXhUcmltbWVkRGF0YSl7aWYodGhpcy5fdHJhbnNmb3JtVHJpbW1lZElEPT09dGhpcy50cmFuc2Zvcm0uX3dvcmxkSUQmJnRoaXMuX3RleHR1cmVUcmltbWVkSUQ9PT10aGlzLl90ZXh0dXJlLl91cGRhdGVJRClyZXR1cm59ZWxzZSB0aGlzLnZlcnRleFRyaW1tZWREYXRhPW5ldyBGbG9hdDMyQXJyYXkoOCk7dGhpcy5fdHJhbnNmb3JtVHJpbW1lZElEPXRoaXMudHJhbnNmb3JtLl93b3JsZElELHRoaXMuX3RleHR1cmVUcmltbWVkSUQ9dGhpcy5fdGV4dHVyZS5fdXBkYXRlSUQ7dmFyIHQ9dGhpcy5fdGV4dHVyZSxlPXRoaXMudmVydGV4VHJpbW1lZERhdGEscj10Lm9yaWcsbj10aGlzLl9hbmNob3IsaT10aGlzLnRyYW5zZm9ybS53b3JsZFRyYW5zZm9ybSxvPWkuYSxzPWkuYixhPWkuYyx1PWkuZCxoPWkudHgsbD1pLnR5LGM9LW4uX3gqci53aWR0aCxkPWMrci53aWR0aCxmPS1uLl95KnIuaGVpZ2h0LHA9ZityLmhlaWdodDtlWzBdPW8qYythKmYraCxlWzFdPXUqZitzKmMrbCxlWzJdPW8qZCthKmYraCxlWzNdPXUqZitzKmQrbCxlWzRdPW8qZCthKnAraCxlWzVdPXUqcCtzKmQrbCxlWzZdPW8qYythKnAraCxlWzddPXUqcCtzKmMrbH0sZS5wcm90b3R5cGUuX3JlbmRlcldlYkdMPWZ1bmN0aW9uKHQpe3RoaXMuY2FsY3VsYXRlVmVydGljZXMoKSx0LnNldE9iamVjdFJlbmRlcmVyKHQucGx1Z2luc1t0aGlzLnBsdWdpbk5hbWVdKSx0LnBsdWdpbnNbdGhpcy5wbHVnaW5OYW1lXS5yZW5kZXIodGhpcyl9LGUucHJvdG90eXBlLl9yZW5kZXJDYW52YXM9ZnVuY3Rpb24odCl7dC5wbHVnaW5zW3RoaXMucGx1Z2luTmFtZV0ucmVuZGVyKHRoaXMpfSxlLnByb3RvdHlwZS5fY2FsY3VsYXRlQm91bmRzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fdGV4dHVyZS50cmltLGU9dGhpcy5fdGV4dHVyZS5vcmlnOyF0fHx0LndpZHRoPT09ZS53aWR0aCYmdC5oZWlnaHQ9PT1lLmhlaWdodD8odGhpcy5jYWxjdWxhdGVWZXJ0aWNlcygpLHRoaXMuX2JvdW5kcy5hZGRRdWFkKHRoaXMudmVydGV4RGF0YSkpOih0aGlzLmNhbGN1bGF0ZVRyaW1tZWRWZXJ0aWNlcygpLHRoaXMuX2JvdW5kcy5hZGRRdWFkKHRoaXMudmVydGV4VHJpbW1lZERhdGEpKX0sZS5wcm90b3R5cGUuZ2V0TG9jYWxCb3VuZHM9ZnVuY3Rpb24oZSl7cmV0dXJuIDA9PT10aGlzLmNoaWxkcmVuLmxlbmd0aD8odGhpcy5fYm91bmRzLm1pblg9dGhpcy5fdGV4dHVyZS5vcmlnLndpZHRoKi10aGlzLl9hbmNob3IuX3gsdGhpcy5fYm91bmRzLm1pblk9dGhpcy5fdGV4dHVyZS5vcmlnLmhlaWdodCotdGhpcy5fYW5jaG9yLl95LHRoaXMuX2JvdW5kcy5tYXhYPXRoaXMuX3RleHR1cmUub3JpZy53aWR0aCooMS10aGlzLl9hbmNob3IuX3gpLHRoaXMuX2JvdW5kcy5tYXhZPXRoaXMuX3RleHR1cmUub3JpZy5oZWlnaHQqKDEtdGhpcy5fYW5jaG9yLl95KSxlfHwodGhpcy5fbG9jYWxCb3VuZHNSZWN0fHwodGhpcy5fbG9jYWxCb3VuZHNSZWN0PW5ldyB1LlJlY3RhbmdsZSksZT10aGlzLl9sb2NhbEJvdW5kc1JlY3QpLHRoaXMuX2JvdW5kcy5nZXRSZWN0YW5nbGUoZSkpOnQucHJvdG90eXBlLmdldExvY2FsQm91bmRzLmNhbGwodGhpcyxlKX0sZS5wcm90b3R5cGUuY29udGFpbnNQb2ludD1mdW5jdGlvbih0KXt0aGlzLndvcmxkVHJhbnNmb3JtLmFwcGx5SW52ZXJzZSh0LHYpO3ZhciBlPXRoaXMuX3RleHR1cmUub3JpZy53aWR0aCxyPXRoaXMuX3RleHR1cmUub3JpZy5oZWlnaHQsbj0tZSp0aGlzLmFuY2hvci54LGk9MDtyZXR1cm4gdi54Pj1uJiZ2Lng8bitlJiYoaT0tcip0aGlzLmFuY2hvci55LHYueT49aSYmdi55PGkrcil9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oZSl7aWYodC5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMsZSksdGhpcy5fdGV4dHVyZS5vZmYoXCJ1cGRhdGVcIix0aGlzLl9vblRleHR1cmVVcGRhdGUsdGhpcyksdGhpcy5fYW5jaG9yPW51bGwsXCJib29sZWFuXCI9PXR5cGVvZiBlP2U6ZSYmZS50ZXh0dXJlKXt2YXIgcj1cImJvb2xlYW5cIj09dHlwZW9mIGU/ZTplJiZlLmJhc2VUZXh0dXJlO3RoaXMuX3RleHR1cmUuZGVzdHJveSghIXIpfXRoaXMuX3RleHR1cmU9bnVsbCx0aGlzLnNoYWRlcj1udWxsfSxlLmZyb209ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlKGQuZGVmYXVsdC5mcm9tKHQpKX0sZS5mcm9tRnJhbWU9ZnVuY3Rpb24odCl7dmFyIHI9aC5UZXh0dXJlQ2FjaGVbdF07aWYoIXIpdGhyb3cgbmV3IEVycm9yKCdUaGUgZnJhbWVJZCBcIicrdCsnXCIgZG9lcyBub3QgZXhpc3QgaW4gdGhlIHRleHR1cmUgY2FjaGUnKTtyZXR1cm4gbmV3IGUocil9LGUuZnJvbUltYWdlPWZ1bmN0aW9uKHQscixuKXtyZXR1cm4gbmV3IGUoZC5kZWZhdWx0LmZyb21JbWFnZSh0LHIsbikpfSxhKGUsW3trZXk6XCJ3aWR0aFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBNYXRoLmFicyh0aGlzLnNjYWxlLngpKnRoaXMuX3RleHR1cmUub3JpZy53aWR0aH0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPSgwLGguc2lnbikodGhpcy5zY2FsZS54KXx8MTt0aGlzLnNjYWxlLng9ZSp0L3RoaXMuX3RleHR1cmUub3JpZy53aWR0aCx0aGlzLl93aWR0aD10fX0se2tleTpcImhlaWdodFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBNYXRoLmFicyh0aGlzLnNjYWxlLnkpKnRoaXMuX3RleHR1cmUub3JpZy5oZWlnaHR9LHNldDpmdW5jdGlvbih0KXt2YXIgZT0oMCxoLnNpZ24pKHRoaXMuc2NhbGUueSl8fDE7dGhpcy5zY2FsZS55PWUqdC90aGlzLl90ZXh0dXJlLm9yaWcuaGVpZ2h0LHRoaXMuX2hlaWdodD10fX0se2tleTpcImFuY2hvclwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbmNob3J9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9hbmNob3IuY29weSh0KX19LHtrZXk6XCJ0aW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RpbnR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl90aW50PXQsdGhpcy5fdGludFJHQj0odD4+MTYpKyg2NTI4MCZ0KSsoKDI1NSZ0KTw8MTYpfX0se2tleTpcInRleHR1cmVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGV4dHVyZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3RleHR1cmUhPT10JiYodGhpcy5fdGV4dHVyZT10fHxkLmRlZmF1bHQuRU1QVFksdGhpcy5jYWNoZWRUaW50PTE2Nzc3MjE1LHRoaXMuX3RleHR1cmVJRD0tMSx0aGlzLl90ZXh0dXJlVHJpbW1lZElEPS0xLHQmJih0LmJhc2VUZXh0dXJlLmhhc0xvYWRlZD90aGlzLl9vblRleHR1cmVVcGRhdGUoKTp0Lm9uY2UoXCJ1cGRhdGVcIix0aGlzLl9vblRleHR1cmVVcGRhdGUsdGhpcykpKX19XSksZX0ocC5kZWZhdWx0KTtyLmRlZmF1bHQ9Z30se1wiLi4vY29uc3RcIjo0NixcIi4uL2Rpc3BsYXkvQ29udGFpbmVyXCI6NDgsXCIuLi9tYXRoXCI6NzAsXCIuLi90ZXh0dXJlcy9UZXh0dXJlXCI6MTE1LFwiLi4vdXRpbHNcIjoxMjV9XSwxMDM6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBpKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89dChcIi4uLy4uL3JlbmRlcmVycy9jYW52YXMvQ2FudmFzUmVuZGVyZXJcIikscz1uKG8pLGE9dChcIi4uLy4uL2NvbnN0XCIpLHU9dChcIi4uLy4uL21hdGhcIiksaD10KFwiLi9DYW52YXNUaW50ZXJcIiksbD1uKGgpLGM9bmV3IHUuTWF0cml4LGQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2kodGhpcyx0KSx0aGlzLnJlbmRlcmVyPWV9cmV0dXJuIHQucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbih0KXt2YXIgZT10Ll90ZXh0dXJlLHI9dGhpcy5yZW5kZXJlcixuPWUuX2ZyYW1lLndpZHRoLGk9ZS5fZnJhbWUuaGVpZ2h0LG89dC50cmFuc2Zvcm0ud29ybGRUcmFuc2Zvcm0scz0wLGg9MDtpZighKGUub3JpZy53aWR0aDw9MHx8ZS5vcmlnLmhlaWdodDw9MCkmJmUuYmFzZVRleHR1cmUuc291cmNlJiYoci5zZXRCbGVuZE1vZGUodC5ibGVuZE1vZGUpLGUudmFsaWQpKXtyLmNvbnRleHQuZ2xvYmFsQWxwaGE9dC53b3JsZEFscGhhO3ZhciBkPWUuYmFzZVRleHR1cmUuc2NhbGVNb2RlPT09YS5TQ0FMRV9NT0RFUy5MSU5FQVI7ci5zbW9vdGhQcm9wZXJ0eSYmci5jb250ZXh0W3Iuc21vb3RoUHJvcGVydHldIT09ZCYmKHIuY29udGV4dFtyLnNtb290aFByb3BlcnR5XT1kKSxlLnRyaW0/KHM9ZS50cmltLndpZHRoLzIrZS50cmltLngtdC5hbmNob3IueCplLm9yaWcud2lkdGgsaD1lLnRyaW0uaGVpZ2h0LzIrZS50cmltLnktdC5hbmNob3IueSplLm9yaWcuaGVpZ2h0KToocz0oLjUtdC5hbmNob3IueCkqZS5vcmlnLndpZHRoLGg9KC41LXQuYW5jaG9yLnkpKmUub3JpZy5oZWlnaHQpLGUucm90YXRlJiYoby5jb3B5KGMpLG89Yyx1Lkdyb3VwRDgubWF0cml4QXBwZW5kUm90YXRpb25JbnYobyxlLnJvdGF0ZSxzLGgpLHM9MCxoPTApLHMtPW4vMixoLT1pLzIsci5yb3VuZFBpeGVscz8oci5jb250ZXh0LnNldFRyYW5zZm9ybShvLmEsby5iLG8uYyxvLmQsby50eCpyLnJlc29sdXRpb258MCxvLnR5KnIucmVzb2x1dGlvbnwwKSxzfD0wLGh8PTApOnIuY29udGV4dC5zZXRUcmFuc2Zvcm0oby5hLG8uYixvLmMsby5kLG8udHgqci5yZXNvbHV0aW9uLG8udHkqci5yZXNvbHV0aW9uKTt2YXIgZj1lLmJhc2VUZXh0dXJlLnJlc29sdXRpb247MTY3NzcyMTUhPT10LnRpbnQ/KHQuY2FjaGVkVGludD09PXQudGludCYmdC50aW50ZWRUZXh0dXJlLnRpbnRJZD09PXQuX3RleHR1cmUuX3VwZGF0ZUlEfHwodC5jYWNoZWRUaW50PXQudGludCx0LnRpbnRlZFRleHR1cmU9bC5kZWZhdWx0LmdldFRpbnRlZFRleHR1cmUodCx0LnRpbnQpKSxyLmNvbnRleHQuZHJhd0ltYWdlKHQudGludGVkVGV4dHVyZSwwLDAsbipmLGkqZixzKnIucmVzb2x1dGlvbixoKnIucmVzb2x1dGlvbixuKnIucmVzb2x1dGlvbixpKnIucmVzb2x1dGlvbikpOnIuY29udGV4dC5kcmF3SW1hZ2UoZS5iYXNlVGV4dHVyZS5zb3VyY2UsZS5fZnJhbWUueCpmLGUuX2ZyYW1lLnkqZixuKmYsaSpmLHMqci5yZXNvbHV0aW9uLGgqci5yZXNvbHV0aW9uLG4qci5yZXNvbHV0aW9uLGkqci5yZXNvbHV0aW9uKX19LHQucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcmVyPW51bGx9LHR9KCk7ci5kZWZhdWx0PWQscy5kZWZhdWx0LnJlZ2lzdGVyUGx1Z2luKFwic3ByaXRlXCIsZCl9LHtcIi4uLy4uL2NvbnN0XCI6NDYsXCIuLi8uLi9tYXRoXCI6NzAsXCIuLi8uLi9yZW5kZXJlcnMvY2FudmFzL0NhbnZhc1JlbmRlcmVyXCI6NzcsXCIuL0NhbnZhc1RpbnRlclwiOjEwNH1dLDEwNDpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO3IuX19lc01vZHVsZT0hMDt2YXIgbj10KFwiLi4vLi4vdXRpbHNcIiksaT10KFwiLi4vLi4vcmVuZGVyZXJzL2NhbnZhcy91dGlscy9jYW5Vc2VOZXdDYW52YXNCbGVuZE1vZGVzXCIpLG89ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShpKSxzPXtnZXRUaW50ZWRUZXh0dXJlOmZ1bmN0aW9uKHQsZSl7dmFyIHI9dC5fdGV4dHVyZTtlPXMucm91bmRDb2xvcihlKTt2YXIgbj1cIiNcIisoXCIwMDAwMFwiKygwfGUpLnRvU3RyaW5nKDE2KSkuc3Vic3RyKC02KTtyLnRpbnRDYWNoZT1yLnRpbnRDYWNoZXx8e307dmFyIGk9ci50aW50Q2FjaGVbbl0sbz12b2lkIDA7aWYoaSl7aWYoaS50aW50SWQ9PT1yLl91cGRhdGVJRClyZXR1cm4gci50aW50Q2FjaGVbbl07bz1yLnRpbnRDYWNoZVtuXX1lbHNlIG89cy5jYW52YXN8fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7aWYocy50aW50TWV0aG9kKHIsZSxvKSxvLnRpbnRJZD1yLl91cGRhdGVJRCxzLmNvbnZlcnRUaW50VG9JbWFnZSl7dmFyIGE9bmV3IEltYWdlO2Euc3JjPW8udG9EYXRhVVJMKCksci50aW50Q2FjaGVbbl09YX1lbHNlIHIudGludENhY2hlW25dPW8scy5jYW52YXM9bnVsbDtyZXR1cm4gb30sdGludFdpdGhNdWx0aXBseTpmdW5jdGlvbih0LGUscil7dmFyIG49ci5nZXRDb250ZXh0KFwiMmRcIiksaT10Ll9mcmFtZS5jbG9uZSgpLG89dC5iYXNlVGV4dHVyZS5yZXNvbHV0aW9uO2kueCo9byxpLnkqPW8saS53aWR0aCo9byxpLmhlaWdodCo9byxyLndpZHRoPU1hdGguY2VpbChpLndpZHRoKSxyLmhlaWdodD1NYXRoLmNlaWwoaS5oZWlnaHQpLG4uc2F2ZSgpLG4uZmlsbFN0eWxlPVwiI1wiKyhcIjAwMDAwXCIrKDB8ZSkudG9TdHJpbmcoMTYpKS5zdWJzdHIoLTYpLG4uZmlsbFJlY3QoMCwwLGkud2lkdGgsaS5oZWlnaHQpLG4uZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPVwibXVsdGlwbHlcIixuLmRyYXdJbWFnZSh0LmJhc2VUZXh0dXJlLnNvdXJjZSxpLngsaS55LGkud2lkdGgsaS5oZWlnaHQsMCwwLGkud2lkdGgsaS5oZWlnaHQpLG4uZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPVwiZGVzdGluYXRpb24tYXRvcFwiLG4uZHJhd0ltYWdlKHQuYmFzZVRleHR1cmUuc291cmNlLGkueCxpLnksaS53aWR0aCxpLmhlaWdodCwwLDAsaS53aWR0aCxpLmhlaWdodCksbi5yZXN0b3JlKCl9LHRpbnRXaXRoT3ZlcmxheTpmdW5jdGlvbih0LGUscil7dmFyIG49ci5nZXRDb250ZXh0KFwiMmRcIiksaT10Ll9mcmFtZS5jbG9uZSgpLG89dC5iYXNlVGV4dHVyZS5yZXNvbHV0aW9uO2kueCo9byxpLnkqPW8saS53aWR0aCo9byxpLmhlaWdodCo9byxyLndpZHRoPU1hdGguY2VpbChpLndpZHRoKSxyLmhlaWdodD1NYXRoLmNlaWwoaS5oZWlnaHQpLG4uc2F2ZSgpLG4uZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPVwiY29weVwiLG4uZmlsbFN0eWxlPVwiI1wiKyhcIjAwMDAwXCIrKDB8ZSkudG9TdHJpbmcoMTYpKS5zdWJzdHIoLTYpLG4uZmlsbFJlY3QoMCwwLGkud2lkdGgsaS5oZWlnaHQpLG4uZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPVwiZGVzdGluYXRpb24tYXRvcFwiLG4uZHJhd0ltYWdlKHQuYmFzZVRleHR1cmUuc291cmNlLGkueCxpLnksaS53aWR0aCxpLmhlaWdodCwwLDAsaS53aWR0aCxpLmhlaWdodCksbi5yZXN0b3JlKCl9LHRpbnRXaXRoUGVyUGl4ZWw6ZnVuY3Rpb24odCxlLHIpe3ZhciBpPXIuZ2V0Q29udGV4dChcIjJkXCIpLG89dC5fZnJhbWUuY2xvbmUoKSxzPXQuYmFzZVRleHR1cmUucmVzb2x1dGlvbjtvLngqPXMsby55Kj1zLG8ud2lkdGgqPXMsby5oZWlnaHQqPXMsci53aWR0aD1NYXRoLmNlaWwoby53aWR0aCksci5oZWlnaHQ9TWF0aC5jZWlsKG8uaGVpZ2h0KSxpLnNhdmUoKSxpLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbj1cImNvcHlcIixpLmRyYXdJbWFnZSh0LmJhc2VUZXh0dXJlLnNvdXJjZSxvLngsby55LG8ud2lkdGgsby5oZWlnaHQsMCwwLG8ud2lkdGgsby5oZWlnaHQpLGkucmVzdG9yZSgpO2Zvcih2YXIgYT0oMCxuLmhleDJyZ2IpKGUpLHU9YVswXSxoPWFbMV0sbD1hWzJdLGM9aS5nZXRJbWFnZURhdGEoMCwwLG8ud2lkdGgsby5oZWlnaHQpLGQ9Yy5kYXRhLGY9MDtmPGQubGVuZ3RoO2YrPTQpZFtmKzBdKj11LGRbZisxXSo9aCxkW2YrMl0qPWw7aS5wdXRJbWFnZURhdGEoYywwLDApfSxyb3VuZENvbG9yOmZ1bmN0aW9uKHQpe3ZhciBlPXMuY2FjaGVTdGVwc1BlckNvbG9yQ2hhbm5lbCxyPSgwLG4uaGV4MnJnYikodCk7cmV0dXJuIHJbMF09TWF0aC5taW4oMjU1LHJbMF0vZSplKSxyWzFdPU1hdGgubWluKDI1NSxyWzFdL2UqZSksclsyXT1NYXRoLm1pbigyNTUsclsyXS9lKmUpLCgwLG4ucmdiMmhleCkocil9LGNhY2hlU3RlcHNQZXJDb2xvckNoYW5uZWw6OCxjb252ZXJ0VGludFRvSW1hZ2U6ITEsY2FuVXNlTXVsdGlwbHk6KDAsby5kZWZhdWx0KSgpLHRpbnRNZXRob2Q6MH07cy50aW50TWV0aG9kPXMuY2FuVXNlTXVsdGlwbHk/cy50aW50V2l0aE11bHRpcGx5OnMudGludFdpdGhQZXJQaXhlbCxyLmRlZmF1bHQ9c30se1wiLi4vLi4vcmVuZGVyZXJzL2NhbnZhcy91dGlscy9jYW5Vc2VOZXdDYW52YXNCbGVuZE1vZGVzXCI6ODAsXCIuLi8uLi91dGlsc1wiOjEyNX1dLDEwNTpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfXIuX19lc01vZHVsZT0hMDt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7bih0aGlzLHQpLHRoaXMudmVydGljZXM9bmV3IEFycmF5QnVmZmVyKGUpLHRoaXMuZmxvYXQzMlZpZXc9bmV3IEZsb2F0MzJBcnJheSh0aGlzLnZlcnRpY2VzKSx0aGlzLnVpbnQzMlZpZXc9bmV3IFVpbnQzMkFycmF5KHRoaXMudmVydGljZXMpfXJldHVybiB0LnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy52ZXJ0aWNlcz1udWxsLHRoaXMucG9zaXRpb25zPW51bGwsdGhpcy51dnM9bnVsbCx0aGlzLmNvbG9ycz1udWxsfSx0fSgpO3IuZGVmYXVsdD1pfSx7fV0sMTA2OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIHModCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1yLl9fZXNNb2R1bGU9ITBcbjt2YXIgYT10KFwiLi4vLi4vcmVuZGVyZXJzL3dlYmdsL3V0aWxzL09iamVjdFJlbmRlcmVyXCIpLHU9bihhKSxoPXQoXCIuLi8uLi9yZW5kZXJlcnMvd2ViZ2wvV2ViR0xSZW5kZXJlclwiKSxsPW4oaCksYz10KFwiLi4vLi4vdXRpbHMvY3JlYXRlSW5kaWNlc0ZvclF1YWRzXCIpLGQ9bihjKSxmPXQoXCIuL2dlbmVyYXRlTXVsdGlUZXh0dXJlU2hhZGVyXCIpLHA9bihmKSx2PXQoXCIuLi8uLi9yZW5kZXJlcnMvd2ViZ2wvdXRpbHMvY2hlY2tNYXhJZlN0YXRtZW50c0luU2hhZGVyXCIpLGc9bih2KSx5PXQoXCIuL0JhdGNoQnVmZmVyXCIpLG09bih5KSxfPXQoXCIuLi8uLi9zZXR0aW5nc1wiKSxiPW4oXykseD10KFwiLi4vLi4vdXRpbHNcIiksVD10KFwicGl4aS1nbC1jb3JlXCIpLHc9bihUKSxFPXQoXCJiaXQtdHdpZGRsZVwiKSxTPW4oRSksTz0wLE09MCxQPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUocil7aSh0aGlzLGUpO3ZhciBuPW8odGhpcyx0LmNhbGwodGhpcyxyKSk7bi52ZXJ0U2l6ZT01LG4udmVydEJ5dGVTaXplPTQqbi52ZXJ0U2l6ZSxuLnNpemU9Yi5kZWZhdWx0LlNQUklURV9CQVRDSF9TSVpFLG4uYnVmZmVycz1bXTtmb3IodmFyIHM9MTtzPD1TLmRlZmF1bHQubmV4dFBvdzIobi5zaXplKTtzKj0yKW4uYnVmZmVycy5wdXNoKG5ldyBtLmRlZmF1bHQoNCpzKm4udmVydEJ5dGVTaXplKSk7bi5pbmRpY2VzPSgwLGQuZGVmYXVsdCkobi5zaXplKSxuLnNoYWRlcj1udWxsLG4uY3VycmVudEluZGV4PTAsbi5ncm91cHM9W107Zm9yKHZhciBhPTA7YTxuLnNpemU7YSsrKW4uZ3JvdXBzW2FdPXt0ZXh0dXJlczpbXSx0ZXh0dXJlQ291bnQ6MCxpZHM6W10sc2l6ZTowLHN0YXJ0OjAsYmxlbmQ6MH07cmV0dXJuIG4uc3ByaXRlcz1bXSxuLnZlcnRleEJ1ZmZlcnM9W10sbi52YW9zPVtdLG4udmFvTWF4PTIsbi52ZXJ0ZXhDb3VudD0wLG4ucmVuZGVyZXIub24oXCJwcmVyZW5kZXJcIixuLm9uUHJlcmVuZGVyLG4pLG59cmV0dXJuIHMoZSx0KSxlLnByb3RvdHlwZS5vbkNvbnRleHRDaGFuZ2U9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnJlbmRlcmVyLmdsO3RoaXMucmVuZGVyZXIubGVnYWN5P3RoaXMuTUFYX1RFWFRVUkVTPTE6KHRoaXMuTUFYX1RFWFRVUkVTPU1hdGgubWluKHQuZ2V0UGFyYW1ldGVyKHQuTUFYX1RFWFRVUkVfSU1BR0VfVU5JVFMpLGIuZGVmYXVsdC5TUFJJVEVfTUFYX1RFWFRVUkVTKSx0aGlzLk1BWF9URVhUVVJFUz0oMCxnLmRlZmF1bHQpKHRoaXMuTUFYX1RFWFRVUkVTLHQpKSx0aGlzLnNoYWRlcj0oMCxwLmRlZmF1bHQpKHQsdGhpcy5NQVhfVEVYVFVSRVMpLHRoaXMuaW5kZXhCdWZmZXI9dy5kZWZhdWx0LkdMQnVmZmVyLmNyZWF0ZUluZGV4QnVmZmVyKHQsdGhpcy5pbmRpY2VzLHQuU1RBVElDX0RSQVcpLHRoaXMucmVuZGVyZXIuYmluZFZhbyhudWxsKTtmb3IodmFyIGU9dGhpcy5zaGFkZXIuYXR0cmlidXRlcyxyPTA7cjx0aGlzLnZhb01heDtyKyspe3ZhciBuPXRoaXMudmVydGV4QnVmZmVyc1tyXT13LmRlZmF1bHQuR0xCdWZmZXIuY3JlYXRlVmVydGV4QnVmZmVyKHQsbnVsbCx0LlNUUkVBTV9EUkFXKSxpPXRoaXMucmVuZGVyZXIuY3JlYXRlVmFvKCkuYWRkSW5kZXgodGhpcy5pbmRleEJ1ZmZlcikuYWRkQXR0cmlidXRlKG4sZS5hVmVydGV4UG9zaXRpb24sdC5GTE9BVCwhMSx0aGlzLnZlcnRCeXRlU2l6ZSwwKS5hZGRBdHRyaWJ1dGUobixlLmFUZXh0dXJlQ29vcmQsdC5VTlNJR05FRF9TSE9SVCwhMCx0aGlzLnZlcnRCeXRlU2l6ZSw4KS5hZGRBdHRyaWJ1dGUobixlLmFDb2xvcix0LlVOU0lHTkVEX0JZVEUsITAsdGhpcy52ZXJ0Qnl0ZVNpemUsMTIpO2UuYVRleHR1cmVJZCYmaS5hZGRBdHRyaWJ1dGUobixlLmFUZXh0dXJlSWQsdC5GTE9BVCwhMSx0aGlzLnZlcnRCeXRlU2l6ZSwxNiksdGhpcy52YW9zW3JdPWl9dGhpcy52YW89dGhpcy52YW9zWzBdLHRoaXMuY3VycmVudEJsZW5kTW9kZT05OTk5OSx0aGlzLmJvdW5kVGV4dHVyZXM9bmV3IEFycmF5KHRoaXMuTUFYX1RFWFRVUkVTKX0sZS5wcm90b3R5cGUub25QcmVyZW5kZXI9ZnVuY3Rpb24oKXt0aGlzLnZlcnRleENvdW50PTB9LGUucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbih0KXt0aGlzLmN1cnJlbnRJbmRleD49dGhpcy5zaXplJiZ0aGlzLmZsdXNoKCksdC5fdGV4dHVyZS5fdXZzJiYodGhpcy5zcHJpdGVzW3RoaXMuY3VycmVudEluZGV4KytdPXQpfSxlLnByb3RvdHlwZS5mbHVzaD1mdW5jdGlvbigpe2lmKDAhPT10aGlzLmN1cnJlbnRJbmRleCl7dmFyIHQ9dGhpcy5yZW5kZXJlci5nbCxlPXRoaXMuTUFYX1RFWFRVUkVTLHI9Uy5kZWZhdWx0Lm5leHRQb3cyKHRoaXMuY3VycmVudEluZGV4KSxuPVMuZGVmYXVsdC5sb2cyKHIpLGk9dGhpcy5idWZmZXJzW25dLG89dGhpcy5zcHJpdGVzLHM9dGhpcy5ncm91cHMsYT1pLmZsb2F0MzJWaWV3LHU9aS51aW50MzJWaWV3LGg9dGhpcy5ib3VuZFRleHR1cmVzLGw9dGhpcy5yZW5kZXJlci5ib3VuZFRleHR1cmVzLGM9dGhpcy5yZW5kZXJlci50ZXh0dXJlR0MuY291bnQsZD0wLGY9dm9pZCAwLHA9dm9pZCAwLHY9MSxnPTAseT1zWzBdLG09dm9pZCAwLF89dm9pZCAwLFQ9eC5wcmVtdWx0aXBseUJsZW5kTW9kZVtvWzBdLl90ZXh0dXJlLmJhc2VUZXh0dXJlLnByZW11bHRpcGxpZWRBbHBoYT8xOjBdW29bMF0uYmxlbmRNb2RlXTt5LnRleHR1cmVDb3VudD0wLHkuc3RhcnQ9MCx5LmJsZW5kPVQsTysrO3ZhciBFPXZvaWQgMDtmb3IoRT0wO0U8ZTsrK0Upe3ZhciBQPWxbRV07UC5fZW5hYmxlZCE9PU8/KGhbRV09UCxQLl92aXJ0YWxCb3VuZElkPUUsUC5fZW5hYmxlZD1PKTpoW0VdPXRoaXMucmVuZGVyZXIuZW1wdHlUZXh0dXJlc1tFXX1mb3IoTysrLEU9MDtFPHRoaXMuY3VycmVudEluZGV4OysrRSl7dmFyIEM9b1tFXTtvW0VdPW51bGwsZj1DLl90ZXh0dXJlLmJhc2VUZXh0dXJlO3ZhciBSPXgucHJlbXVsdGlwbHlCbGVuZE1vZGVbTnVtYmVyKGYucHJlbXVsdGlwbGllZEFscGhhKV1bQy5ibGVuZE1vZGVdO2lmKFQhPT1SJiYoVD1SLHA9bnVsbCxnPWUsTysrKSxwIT09ZiYmKHA9ZixmLl9lbmFibGVkIT09Tykpe2lmKGc9PT1lJiYoTysrLHkuc2l6ZT1FLXkuc3RhcnQsZz0wLHk9c1t2KytdLHkuYmxlbmQ9VCx5LnRleHR1cmVDb3VudD0wLHkuc3RhcnQ9RSksZi50b3VjaGVkPWMsLTE9PT1mLl92aXJ0YWxCb3VuZElkKWZvcih2YXIgQT0wO0E8ZTsrK0Epe3ZhciBJPShBK00pJWUsRD1oW0ldO2lmKEQuX2VuYWJsZWQhPT1PKXtNKyssRC5fdmlydGFsQm91bmRJZD0tMSxmLl92aXJ0YWxCb3VuZElkPUksaFtJXT1mO2JyZWFrfX1mLl9lbmFibGVkPU8seS50ZXh0dXJlQ291bnQrKyx5Lmlkc1tnXT1mLl92aXJ0YWxCb3VuZElkLHkudGV4dHVyZXNbZysrXT1mfWlmKG09Qy52ZXJ0ZXhEYXRhLF89Qy5fdGV4dHVyZS5fdXZzLnV2c1VpbnQzMix0aGlzLnJlbmRlcmVyLnJvdW5kUGl4ZWxzKXt2YXIgTD10aGlzLnJlbmRlcmVyLnJlc29sdXRpb247YVtkXT0obVswXSpMfDApL0wsYVtkKzFdPShtWzFdKkx8MCkvTCxhW2QrNV09KG1bMl0qTHwwKS9MLGFbZCs2XT0obVszXSpMfDApL0wsYVtkKzEwXT0obVs0XSpMfDApL0wsYVtkKzExXT0obVs1XSpMfDApL0wsYVtkKzE1XT0obVs2XSpMfDApL0wsYVtkKzE2XT0obVs3XSpMfDApL0x9ZWxzZSBhW2RdPW1bMF0sYVtkKzFdPW1bMV0sYVtkKzVdPW1bMl0sYVtkKzZdPW1bM10sYVtkKzEwXT1tWzRdLGFbZCsxMV09bVs1XSxhW2QrMTVdPW1bNl0sYVtkKzE2XT1tWzddO3VbZCsyXT1fWzBdLHVbZCs3XT1fWzFdLHVbZCsxMl09X1syXSx1W2QrMTddPV9bM107dmFyIE49TWF0aC5taW4oQy53b3JsZEFscGhhLDEpLEI9TjwxJiZmLnByZW11bHRpcGxpZWRBbHBoYT8oMCx4LnByZW11bHRpcGx5VGludCkoQy5fdGludFJHQixOKTpDLl90aW50UkdCKygyNTUqTjw8MjQpO3VbZCszXT11W2QrOF09dVtkKzEzXT11W2QrMThdPUIsYVtkKzRdPWFbZCs5XT1hW2QrMTRdPWFbZCsxOV09Zi5fdmlydGFsQm91bmRJZCxkKz0yMH1pZih5LnNpemU9RS15LnN0YXJ0LGIuZGVmYXVsdC5DQU5fVVBMT0FEX1NBTUVfQlVGRkVSKXRoaXMudmVydGV4QnVmZmVyc1t0aGlzLnZlcnRleENvdW50XS51cGxvYWQoaS52ZXJ0aWNlcywwLCEwKTtlbHNle2lmKHRoaXMudmFvTWF4PD10aGlzLnZlcnRleENvdW50KXt0aGlzLnZhb01heCsrO3ZhciBrPXRoaXMuc2hhZGVyLmF0dHJpYnV0ZXMsRj10aGlzLnZlcnRleEJ1ZmZlcnNbdGhpcy52ZXJ0ZXhDb3VudF09dy5kZWZhdWx0LkdMQnVmZmVyLmNyZWF0ZVZlcnRleEJ1ZmZlcih0LG51bGwsdC5TVFJFQU1fRFJBVyksaj10aGlzLnJlbmRlcmVyLmNyZWF0ZVZhbygpLmFkZEluZGV4KHRoaXMuaW5kZXhCdWZmZXIpLmFkZEF0dHJpYnV0ZShGLGsuYVZlcnRleFBvc2l0aW9uLHQuRkxPQVQsITEsdGhpcy52ZXJ0Qnl0ZVNpemUsMCkuYWRkQXR0cmlidXRlKEYsay5hVGV4dHVyZUNvb3JkLHQuVU5TSUdORURfU0hPUlQsITAsdGhpcy52ZXJ0Qnl0ZVNpemUsOCkuYWRkQXR0cmlidXRlKEYsay5hQ29sb3IsdC5VTlNJR05FRF9CWVRFLCEwLHRoaXMudmVydEJ5dGVTaXplLDEyKTtrLmFUZXh0dXJlSWQmJmouYWRkQXR0cmlidXRlKEYsay5hVGV4dHVyZUlkLHQuRkxPQVQsITEsdGhpcy52ZXJ0Qnl0ZVNpemUsMTYpLHRoaXMudmFvc1t0aGlzLnZlcnRleENvdW50XT1qfXRoaXMucmVuZGVyZXIuYmluZFZhbyh0aGlzLnZhb3NbdGhpcy52ZXJ0ZXhDb3VudF0pLHRoaXMudmVydGV4QnVmZmVyc1t0aGlzLnZlcnRleENvdW50XS51cGxvYWQoaS52ZXJ0aWNlcywwLCExKSx0aGlzLnZlcnRleENvdW50Kyt9Zm9yKEU9MDtFPGU7KytFKWxbRV0uX3ZpcnRhbEJvdW5kSWQ9LTE7Zm9yKEU9MDtFPHY7KytFKXtmb3IodmFyIFU9c1tFXSxYPVUudGV4dHVyZUNvdW50LEc9MDtHPFg7RysrKXA9VS50ZXh0dXJlc1tHXSxsW1UuaWRzW0ddXSE9PXAmJnRoaXMucmVuZGVyZXIuYmluZFRleHR1cmUocCxVLmlkc1tHXSwhMCkscC5fdmlydGFsQm91bmRJZD0tMTt0aGlzLnJlbmRlcmVyLnN0YXRlLnNldEJsZW5kTW9kZShVLmJsZW5kKSx0LmRyYXdFbGVtZW50cyh0LlRSSUFOR0xFUyw2KlUuc2l6ZSx0LlVOU0lHTkVEX1NIT1JULDYqVS5zdGFydCoyKX10aGlzLmN1cnJlbnRJbmRleD0wfX0sZS5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcmVyLmJpbmRTaGFkZXIodGhpcy5zaGFkZXIpLGIuZGVmYXVsdC5DQU5fVVBMT0FEX1NBTUVfQlVGRkVSJiYodGhpcy5yZW5kZXJlci5iaW5kVmFvKHRoaXMudmFvc1t0aGlzLnZlcnRleENvdW50XSksdGhpcy52ZXJ0ZXhCdWZmZXJzW3RoaXMudmVydGV4Q291bnRdLmJpbmQoKSl9LGUucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLmZsdXNoKCl9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtmb3IodmFyIGU9MDtlPHRoaXMudmFvTWF4O2UrKyl0aGlzLnZlcnRleEJ1ZmZlcnNbZV0mJnRoaXMudmVydGV4QnVmZmVyc1tlXS5kZXN0cm95KCksdGhpcy52YW9zW2VdJiZ0aGlzLnZhb3NbZV0uZGVzdHJveSgpO3RoaXMuaW5kZXhCdWZmZXImJnRoaXMuaW5kZXhCdWZmZXIuZGVzdHJveSgpLHRoaXMucmVuZGVyZXIub2ZmKFwicHJlcmVuZGVyXCIsdGhpcy5vblByZXJlbmRlcix0aGlzKSx0LnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5zaGFkZXImJih0aGlzLnNoYWRlci5kZXN0cm95KCksdGhpcy5zaGFkZXI9bnVsbCksdGhpcy52ZXJ0ZXhCdWZmZXJzPW51bGwsdGhpcy52YW9zPW51bGwsdGhpcy5pbmRleEJ1ZmZlcj1udWxsLHRoaXMuaW5kaWNlcz1udWxsLHRoaXMuc3ByaXRlcz1udWxsO2Zvcih2YXIgcj0wO3I8dGhpcy5idWZmZXJzLmxlbmd0aDsrK3IpdGhpcy5idWZmZXJzW3JdLmRlc3Ryb3koKX0sZX0odS5kZWZhdWx0KTtyLmRlZmF1bHQ9UCxsLmRlZmF1bHQucmVnaXN0ZXJQbHVnaW4oXCJzcHJpdGVcIixQKX0se1wiLi4vLi4vcmVuZGVyZXJzL3dlYmdsL1dlYkdMUmVuZGVyZXJcIjo4NCxcIi4uLy4uL3JlbmRlcmVycy93ZWJnbC91dGlscy9PYmplY3RSZW5kZXJlclwiOjk0LFwiLi4vLi4vcmVuZGVyZXJzL3dlYmdsL3V0aWxzL2NoZWNrTWF4SWZTdGF0bWVudHNJblNoYWRlclwiOjk3LFwiLi4vLi4vc2V0dGluZ3NcIjoxMDEsXCIuLi8uLi91dGlsc1wiOjEyNSxcIi4uLy4uL3V0aWxzL2NyZWF0ZUluZGljZXNGb3JRdWFkc1wiOjEyMyxcIi4vQmF0Y2hCdWZmZXJcIjoxMDUsXCIuL2dlbmVyYXRlTXVsdGlUZXh0dXJlU2hhZGVyXCI6MTA3LFwiYml0LXR3aWRkbGVcIjoxLFwicGl4aS1nbC1jb3JlXCI6MTV9XSwxMDc6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7dmFyIHI9YTtyPXIucmVwbGFjZSgvJWNvdW50JS9naSxlKSxyPXIucmVwbGFjZSgvJWZvcmxvb3AlL2dpLGkoZSkpO2Zvcih2YXIgbj1uZXcgcy5kZWZhdWx0KHQsXCJwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxuYXR0cmlidXRlIHZlYzIgYVZlcnRleFBvc2l0aW9uO1xcbmF0dHJpYnV0ZSB2ZWMyIGFUZXh0dXJlQ29vcmQ7XFxuYXR0cmlidXRlIHZlYzQgYUNvbG9yO1xcbmF0dHJpYnV0ZSBmbG9hdCBhVGV4dHVyZUlkO1xcblxcbnVuaWZvcm0gbWF0MyBwcm9qZWN0aW9uTWF0cml4O1xcblxcbnZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1xcbnZhcnlpbmcgdmVjNCB2Q29sb3I7XFxudmFyeWluZyBmbG9hdCB2VGV4dHVyZUlkO1xcblxcbnZvaWQgbWFpbih2b2lkKXtcXG4gICAgZ2xfUG9zaXRpb24gPSB2ZWM0KChwcm9qZWN0aW9uTWF0cml4ICogdmVjMyhhVmVydGV4UG9zaXRpb24sIDEuMCkpLnh5LCAwLjAsIDEuMCk7XFxuXFxuICAgIHZUZXh0dXJlQ29vcmQgPSBhVGV4dHVyZUNvb3JkO1xcbiAgICB2VGV4dHVyZUlkID0gYVRleHR1cmVJZDtcXG4gICAgdkNvbG9yID0gYUNvbG9yO1xcbn1cXG5cIixyKSxvPVtdLHU9MDt1PGU7dSsrKW9bdV09dTtyZXR1cm4gbi5iaW5kKCksbi51bmlmb3Jtcy51U2FtcGxlcnM9byxufWZ1bmN0aW9uIGkodCl7dmFyIGU9XCJcIjtlKz1cIlxcblwiLGUrPVwiXFxuXCI7Zm9yKHZhciByPTA7cjx0O3IrKylyPjAmJihlKz1cIlxcbmVsc2UgXCIpLHI8dC0xJiYoZSs9XCJpZih2VGV4dHVyZUlkIDwgXCIrcitcIi41KVwiKSxlKz1cIlxcbntcIixlKz1cIlxcblxcdGNvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyc1tcIityK1wiXSwgdlRleHR1cmVDb29yZCk7XCIsZSs9XCJcXG59XCI7cmV0dXJuIGUrPVwiXFxuXCIsZSs9XCJcXG5cIn1yLl9fZXNNb2R1bGU9ITAsci5kZWZhdWx0PW47dmFyIG89dChcIi4uLy4uL1NoYWRlclwiKSxzPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0obyksYT0odChcInBhdGhcIiksW1widmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXCJ2YXJ5aW5nIHZlYzQgdkNvbG9yO1wiLFwidmFyeWluZyBmbG9hdCB2VGV4dHVyZUlkO1wiLFwidW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXJzWyVjb3VudCVdO1wiLFwidm9pZCBtYWluKHZvaWQpe1wiLFwidmVjNCBjb2xvcjtcIixcIiVmb3Jsb29wJVwiLFwiZ2xfRnJhZ0NvbG9yID0gY29sb3IgKiB2Q29sb3I7XCIsXCJ9XCJdLmpvaW4oXCJcXG5cIikpfSx7XCIuLi8uLi9TaGFkZXJcIjo0NCxwYXRoOjh9XSwxMDg6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBpKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gcyh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfXIuX19lc01vZHVsZT0hMDt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG49ZVtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbihlLHIsbil7cmV0dXJuIHImJnQoZS5wcm90b3R5cGUsciksbiYmdChlLG4pLGV9fSgpLHU9dChcIi4uL3Nwcml0ZXMvU3ByaXRlXCIpLGg9bih1KSxsPXQoXCIuLi90ZXh0dXJlcy9UZXh0dXJlXCIpLGM9bihsKSxkPXQoXCIuLi9tYXRoXCIpLGY9dChcIi4uL3V0aWxzXCIpLHA9dChcIi4uL2NvbnN0XCIpLHY9dChcIi4uL3NldHRpbmdzXCIpLGc9bih2KSx5PXQoXCIuL1RleHRTdHlsZVwiKSxtPW4oeSksXz10KFwiLi9UZXh0TWV0cmljc1wiKSxiPW4oXykseD10KFwiLi4vdXRpbHMvdHJpbUNhbnZhc1wiKSxUPW4oeCksdz17dGV4dHVyZTohMCxjaGlsZHJlbjohMSxiYXNlVGV4dHVyZTohMH0sRT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHIsbixzKXtpKHRoaXMsZSkscz1zfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLHMud2lkdGg9MyxzLmhlaWdodD0zO3ZhciBhPWMuZGVmYXVsdC5mcm9tQ2FudmFzKHMsZy5kZWZhdWx0LlNDQUxFX01PREUsXCJ0ZXh0XCIpO2Eub3JpZz1uZXcgZC5SZWN0YW5nbGUsYS50cmltPW5ldyBkLlJlY3RhbmdsZTt2YXIgdT1vKHRoaXMsdC5jYWxsKHRoaXMsYSkpO3JldHVybiBjLmRlZmF1bHQuYWRkVG9DYWNoZSh1Ll90ZXh0dXJlLHUuX3RleHR1cmUuYmFzZVRleHR1cmUudGV4dHVyZUNhY2hlSWRzWzBdKSx1LmNhbnZhcz1zLHUuY29udGV4dD11LmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksdS5yZXNvbHV0aW9uPWcuZGVmYXVsdC5SRVNPTFVUSU9OLHUuX3RleHQ9bnVsbCx1Ll9zdHlsZT1udWxsLHUuX3N0eWxlTGlzdGVuZXI9bnVsbCx1Ll9mb250PVwiXCIsdS50ZXh0PXIsdS5zdHlsZT1uLHUubG9jYWxTdHlsZUlEPS0xLHV9cmV0dXJuIHMoZSx0KSxlLnByb3RvdHlwZS51cGRhdGVUZXh0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3N0eWxlO2lmKHRoaXMubG9jYWxTdHlsZUlEIT09ZS5zdHlsZUlEJiYodGhpcy5kaXJ0eT0hMCx0aGlzLmxvY2FsU3R5bGVJRD1lLnN0eWxlSUQpLHRoaXMuZGlydHl8fCF0KXt0aGlzLl9mb250PXRoaXMuX3N0eWxlLnRvRm9udFN0cmluZygpO3ZhciByPXRoaXMuY29udGV4dCxuPWIuZGVmYXVsdC5tZWFzdXJlVGV4dCh0aGlzLl90ZXh0LHRoaXMuX3N0eWxlLHRoaXMuX3N0eWxlLndvcmRXcmFwLHRoaXMuY2FudmFzKSxpPW4ud2lkdGgsbz1uLmhlaWdodCxzPW4ubGluZXMsYT1uLmxpbmVIZWlnaHQsdT1uLmxpbmVXaWR0aHMsaD1uLm1heExpbmVXaWR0aCxsPW4uZm9udFByb3BlcnRpZXM7dGhpcy5jYW52YXMud2lkdGg9TWF0aC5jZWlsKChNYXRoLm1heCgxLGkpKzIqZS5wYWRkaW5nKSp0aGlzLnJlc29sdXRpb24pLHRoaXMuY2FudmFzLmhlaWdodD1NYXRoLmNlaWwoKE1hdGgubWF4KDEsbykrMiplLnBhZGRpbmcpKnRoaXMucmVzb2x1dGlvbiksci5zY2FsZSh0aGlzLnJlc29sdXRpb24sdGhpcy5yZXNvbHV0aW9uKSxyLmNsZWFyUmVjdCgwLDAsdGhpcy5jYW52YXMud2lkdGgsdGhpcy5jYW52YXMuaGVpZ2h0KSxyLmZvbnQ9dGhpcy5fZm9udCxyLnN0cm9rZVN0eWxlPWUuc3Ryb2tlLHIubGluZVdpZHRoPWUuc3Ryb2tlVGhpY2tuZXNzLHIudGV4dEJhc2VsaW5lPWUudGV4dEJhc2VsaW5lLHIubGluZUpvaW49ZS5saW5lSm9pbixyLm1pdGVyTGltaXQ9ZS5taXRlckxpbWl0O3ZhciBjPXZvaWQgMCxkPXZvaWQgMDtpZihlLmRyb3BTaGFkb3cpe3IuZmlsbFN0eWxlPWUuZHJvcFNoYWRvd0NvbG9yLHIuZ2xvYmFsQWxwaGE9ZS5kcm9wU2hhZG93QWxwaGEsci5zaGFkb3dCbHVyPWUuZHJvcFNoYWRvd0JsdXIsZS5kcm9wU2hhZG93Qmx1cj4wJiYoci5zaGFkb3dDb2xvcj1lLmRyb3BTaGFkb3dDb2xvcik7Zm9yKHZhciBmPU1hdGguY29zKGUuZHJvcFNoYWRvd0FuZ2xlKSplLmRyb3BTaGFkb3dEaXN0YW5jZSxwPU1hdGguc2luKGUuZHJvcFNoYWRvd0FuZ2xlKSplLmRyb3BTaGFkb3dEaXN0YW5jZSx2PTA7djxzLmxlbmd0aDt2KyspYz1lLnN0cm9rZVRoaWNrbmVzcy8yLGQ9ZS5zdHJva2VUaGlja25lc3MvMit2KmErbC5hc2NlbnQsXCJyaWdodFwiPT09ZS5hbGlnbj9jKz1oLXVbdl06XCJjZW50ZXJcIj09PWUuYWxpZ24mJihjKz0oaC11W3ZdKS8yKSxlLmZpbGwmJih0aGlzLmRyYXdMZXR0ZXJTcGFjaW5nKHNbdl0sYytmK2UucGFkZGluZyxkK3ArZS5wYWRkaW5nKSxlLnN0cm9rZSYmZS5zdHJva2VUaGlja25lc3MmJihyLnN0cm9rZVN0eWxlPWUuZHJvcFNoYWRvd0NvbG9yLHRoaXMuZHJhd0xldHRlclNwYWNpbmcoc1t2XSxjK2YrZS5wYWRkaW5nLGQrcCtlLnBhZGRpbmcsITApLHIuc3Ryb2tlU3R5bGU9ZS5zdHJva2UpKX1yLnNoYWRvd0JsdXI9MCxyLmdsb2JhbEFscGhhPTEsci5maWxsU3R5bGU9dGhpcy5fZ2VuZXJhdGVGaWxsU3R5bGUoZSxzKTtmb3IodmFyIGc9MDtnPHMubGVuZ3RoO2crKyljPWUuc3Ryb2tlVGhpY2tuZXNzLzIsZD1lLnN0cm9rZVRoaWNrbmVzcy8yK2cqYStsLmFzY2VudCxcInJpZ2h0XCI9PT1lLmFsaWduP2MrPWgtdVtnXTpcImNlbnRlclwiPT09ZS5hbGlnbiYmKGMrPShoLXVbZ10pLzIpLGUuc3Ryb2tlJiZlLnN0cm9rZVRoaWNrbmVzcyYmdGhpcy5kcmF3TGV0dGVyU3BhY2luZyhzW2ddLGMrZS5wYWRkaW5nLGQrZS5wYWRkaW5nLCEwKSxlLmZpbGwmJnRoaXMuZHJhd0xldHRlclNwYWNpbmcoc1tnXSxjK2UucGFkZGluZyxkK2UucGFkZGluZyk7dGhpcy51cGRhdGVUZXh0dXJlKCl9fSxlLnByb3RvdHlwZS5kcmF3TGV0dGVyU3BhY2luZz1mdW5jdGlvbih0LGUscil7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10mJmFyZ3VtZW50c1szXSxpPXRoaXMuX3N0eWxlLG89aS5sZXR0ZXJTcGFjaW5nO2lmKDA9PT1vKXJldHVybiB2b2lkKG4/dGhpcy5jb250ZXh0LnN0cm9rZVRleHQodCxlLHIpOnRoaXMuY29udGV4dC5maWxsVGV4dCh0LGUscikpO2Zvcih2YXIgcz1TdHJpbmcucHJvdG90eXBlLnNwbGl0LmNhbGwodCxcIlwiKSxhPWUsdT0wLGg9XCJcIixsPXRoaXMuY29udGV4dC5tZWFzdXJlVGV4dCh0KS53aWR0aCxjPTA7dTx0Lmxlbmd0aDspaD1zW3UrK10sbj90aGlzLmNvbnRleHQuc3Ryb2tlVGV4dChoLGEscik6dGhpcy5jb250ZXh0LmZpbGxUZXh0KGgsYSxyKSxjPXRoaXMuY29udGV4dC5tZWFzdXJlVGV4dCh0LnN1YnN0cmluZyh1KSkud2lkdGgsYSs9bC1jK28sbD1jfSxlLnByb3RvdHlwZS51cGRhdGVUZXh0dXJlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jYW52YXM7aWYodGhpcy5fc3R5bGUudHJpbSl7dmFyIGU9KDAsVC5kZWZhdWx0KSh0KTtlLmRhdGEmJih0LndpZHRoPWUud2lkdGgsdC5oZWlnaHQ9ZS5oZWlnaHQsdGhpcy5jb250ZXh0LnB1dEltYWdlRGF0YShlLmRhdGEsMCwwKSl9dmFyIHI9dGhpcy5fdGV4dHVyZSxuPXRoaXMuX3N0eWxlLGk9bi50cmltPzA6bi5wYWRkaW5nLG89ci5iYXNlVGV4dHVyZTtvLmhhc0xvYWRlZD0hMCxvLnJlc29sdXRpb249dGhpcy5yZXNvbHV0aW9uLG8ucmVhbFdpZHRoPXQud2lkdGgsby5yZWFsSGVpZ2h0PXQuaGVpZ2h0LG8ud2lkdGg9dC53aWR0aC90aGlzLnJlc29sdXRpb24sby5oZWlnaHQ9dC5oZWlnaHQvdGhpcy5yZXNvbHV0aW9uLHIudHJpbS53aWR0aD1yLl9mcmFtZS53aWR0aD10LndpZHRoL3RoaXMucmVzb2x1dGlvbixyLnRyaW0uaGVpZ2h0PXIuX2ZyYW1lLmhlaWdodD10LmhlaWdodC90aGlzLnJlc29sdXRpb24sci50cmltLng9LWksci50cmltLnk9LWksci5vcmlnLndpZHRoPXIuX2ZyYW1lLndpZHRoLTIqaSxyLm9yaWcuaGVpZ2h0PXIuX2ZyYW1lLmhlaWdodC0yKmksdGhpcy5fb25UZXh0dXJlVXBkYXRlKCksby5lbWl0KFwidXBkYXRlXCIsbyksdGhpcy5kaXJ0eT0hMX0sZS5wcm90b3R5cGUucmVuZGVyV2ViR0w9ZnVuY3Rpb24oZSl7dGhpcy5yZXNvbHV0aW9uIT09ZS5yZXNvbHV0aW9uJiYodGhpcy5yZXNvbHV0aW9uPWUucmVzb2x1dGlvbix0aGlzLmRpcnR5PSEwKSx0aGlzLnVwZGF0ZVRleHQoITApLHQucHJvdG90eXBlLnJlbmRlcldlYkdMLmNhbGwodGhpcyxlKX0sZS5wcm90b3R5cGUuX3JlbmRlckNhbnZhcz1mdW5jdGlvbihlKXt0aGlzLnJlc29sdXRpb24hPT1lLnJlc29sdXRpb24mJih0aGlzLnJlc29sdXRpb249ZS5yZXNvbHV0aW9uLHRoaXMuZGlydHk9ITApLHRoaXMudXBkYXRlVGV4dCghMCksdC5wcm90b3R5cGUuX3JlbmRlckNhbnZhcy5jYWxsKHRoaXMsZSl9LGUucHJvdG90eXBlLmdldExvY2FsQm91bmRzPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnVwZGF0ZVRleHQoITApLHQucHJvdG90eXBlLmdldExvY2FsQm91bmRzLmNhbGwodGhpcyxlKX0sZS5wcm90b3R5cGUuX2NhbGN1bGF0ZUJvdW5kcz1mdW5jdGlvbigpe3RoaXMudXBkYXRlVGV4dCghMCksdGhpcy5jYWxjdWxhdGVWZXJ0aWNlcygpLHRoaXMuX2JvdW5kcy5hZGRRdWFkKHRoaXMudmVydGV4RGF0YSl9LGUucHJvdG90eXBlLl9vblN0eWxlQ2hhbmdlPWZ1bmN0aW9uKCl7dGhpcy5kaXJ0eT0hMH0sZS5wcm90b3R5cGUuX2dlbmVyYXRlRmlsbFN0eWxlPWZ1bmN0aW9uKHQsZSl7aWYoIUFycmF5LmlzQXJyYXkodC5maWxsKSlyZXR1cm4gdC5maWxsO2lmKG5hdmlnYXRvci5pc0NvY29vbkpTKXJldHVybiB0LmZpbGxbMF07dmFyIHI9dm9pZCAwLG49dm9pZCAwLGk9dm9pZCAwLG89dm9pZCAwLHM9dGhpcy5jYW52YXMud2lkdGgvdGhpcy5yZXNvbHV0aW9uLGE9dGhpcy5jYW52YXMuaGVpZ2h0L3RoaXMucmVzb2x1dGlvbix1PXQuZmlsbC5zbGljZSgpLGg9dC5maWxsR3JhZGllbnRTdG9wcy5zbGljZSgpO2lmKCFoLmxlbmd0aClmb3IodmFyIGw9dS5sZW5ndGgrMSxjPTE7YzxsOysrYyloLnB1c2goYy9sKTtpZih1LnVuc2hpZnQodC5maWxsWzBdKSxoLnVuc2hpZnQoMCksdS5wdXNoKHQuZmlsbFt0LmZpbGwubGVuZ3RoLTFdKSxoLnB1c2goMSksdC5maWxsR3JhZGllbnRUeXBlPT09cC5URVhUX0dSQURJRU5ULkxJTkVBUl9WRVJUSUNBTCl7cj10aGlzLmNvbnRleHQuY3JlYXRlTGluZWFyR3JhZGllbnQocy8yLDAscy8yLGEpLG49KHUubGVuZ3RoKzEpKmUubGVuZ3RoLGk9MDtmb3IodmFyIGQ9MDtkPGUubGVuZ3RoO2QrKyl7aSs9MTtmb3IodmFyIGY9MDtmPHUubGVuZ3RoO2YrKylvPVwibnVtYmVyXCI9PXR5cGVvZiBoW2ZdP2hbZl0vZS5sZW5ndGgrZC9lLmxlbmd0aDppL24sci5hZGRDb2xvclN0b3Aobyx1W2ZdKSxpKyt9fWVsc2V7cj10aGlzLmNvbnRleHQuY3JlYXRlTGluZWFyR3JhZGllbnQoMCxhLzIscyxhLzIpLG49dS5sZW5ndGgrMSxpPTE7Zm9yKHZhciB2PTA7djx1Lmxlbmd0aDt2Kyspbz1cIm51bWJlclwiPT10eXBlb2YgaFt2XT9oW3ZdOmkvbixyLmFkZENvbG9yU3RvcChvLHVbdl0pLGkrK31yZXR1cm4gcn0sZS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbihlKXtcImJvb2xlYW5cIj09dHlwZW9mIGUmJihlPXtjaGlsZHJlbjplfSksZT1PYmplY3QuYXNzaWduKHt9LHcsZSksdC5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMsZSksdGhpcy5jb250ZXh0PW51bGwsdGhpcy5jYW52YXM9bnVsbCx0aGlzLl9zdHlsZT1udWxsfSxhKGUsW3trZXk6XCJ3aWR0aFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVwZGF0ZVRleHQoITApLE1hdGguYWJzKHRoaXMuc2NhbGUueCkqdGhpcy5fdGV4dHVyZS5vcmlnLndpZHRofSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy51cGRhdGVUZXh0KCEwKTt2YXIgZT0oMCxmLnNpZ24pKHRoaXMuc2NhbGUueCl8fDE7dGhpcy5zY2FsZS54PWUqdC90aGlzLl90ZXh0dXJlLm9yaWcud2lkdGgsdGhpcy5fd2lkdGg9dH19LHtrZXk6XCJoZWlnaHRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51cGRhdGVUZXh0KCEwKSxNYXRoLmFicyh0aGlzLnNjYWxlLnkpKnRoaXMuX3RleHR1cmUub3JpZy5oZWlnaHR9LHNldDpmdW5jdGlvbih0KXt0aGlzLnVwZGF0ZVRleHQoITApO3ZhciBlPSgwLGYuc2lnbikodGhpcy5zY2FsZS55KXx8MTt0aGlzLnNjYWxlLnk9ZSp0L3RoaXMuX3RleHR1cmUub3JpZy5oZWlnaHQsdGhpcy5faGVpZ2h0PXR9fSx7a2V5Olwic3R5bGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3R5bGV9LHNldDpmdW5jdGlvbih0KXt0PXR8fHt9LHQgaW5zdGFuY2VvZiBtLmRlZmF1bHQ/dGhpcy5fc3R5bGU9dDp0aGlzLl9zdHlsZT1uZXcgbS5kZWZhdWx0KHQpLHRoaXMubG9jYWxTdHlsZUlEPS0xLHRoaXMuZGlydHk9ITB9fSx7a2V5OlwidGV4dFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90ZXh0fSxzZXQ6ZnVuY3Rpb24odCl7dD1TdHJpbmcoXCJcIj09PXR8fG51bGw9PT10fHx2b2lkIDA9PT10P1wiIFwiOnQpLHRoaXMuX3RleHQhPT10JiYodGhpcy5fdGV4dD10LHRoaXMuZGlydHk9ITApfX1dKSxlfShoLmRlZmF1bHQpO3IuZGVmYXVsdD1FfSx7XCIuLi9jb25zdFwiOjQ2LFwiLi4vbWF0aFwiOjcwLFwiLi4vc2V0dGluZ3NcIjoxMDEsXCIuLi9zcHJpdGVzL1Nwcml0ZVwiOjEwMixcIi4uL3RleHR1cmVzL1RleHR1cmVcIjoxMTUsXCIuLi91dGlsc1wiOjEyNSxcIi4uL3V0aWxzL3RyaW1DYW52YXNcIjoxMzAsXCIuL1RleHRNZXRyaWNzXCI6MTA5LFwiLi9UZXh0U3R5bGVcIjoxMTB9XSwxMDk6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1yLl9fZXNNb2R1bGU9ITA7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUscixpLG8scyxhLHUsaCxsKXtuKHRoaXMsdCksdGhpcy50ZXh0PWUsdGhpcy5zdHlsZT1yLHRoaXMud2lkdGg9aSx0aGlzLmhlaWdodD1vLHRoaXMubGluZXM9cyx0aGlzLmxpbmVXaWR0aHM9YSx0aGlzLmxpbmVIZWlnaHQ9dSx0aGlzLm1heExpbmVXaWR0aD1oLHRoaXMuZm9udFByb3BlcnRpZXM9bH1yZXR1cm4gdC5tZWFzdXJlVGV4dD1mdW5jdGlvbihlLHIsbil7dmFyIGk9YXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10/YXJndW1lbnRzWzNdOnQuX2NhbnZhcztuPXZvaWQgMD09PW58fG51bGw9PT1uP3Iud29yZFdyYXA6bjt2YXIgbz1yLnRvRm9udFN0cmluZygpLHM9dC5tZWFzdXJlRm9udChvKSxhPWkuZ2V0Q29udGV4dChcIjJkXCIpO2EuZm9udD1vO2Zvcih2YXIgdT1uP3Qud29yZFdyYXAoZSxyLGkpOmUsaD11LnNwbGl0KC8oPzpcXHJcXG58XFxyfFxcbikvKSxsPW5ldyBBcnJheShoLmxlbmd0aCksYz0wLGQ9MDtkPGgubGVuZ3RoO2QrKyl7dmFyIGY9YS5tZWFzdXJlVGV4dChoW2RdKS53aWR0aCsoaFtkXS5sZW5ndGgtMSkqci5sZXR0ZXJTcGFjaW5nO2xbZF09ZixjPU1hdGgubWF4KGMsZil9dmFyIHA9YytyLnN0cm9rZVRoaWNrbmVzcztyLmRyb3BTaGFkb3cmJihwKz1yLmRyb3BTaGFkb3dEaXN0YW5jZSk7dmFyIHY9ci5saW5lSGVpZ2h0fHxzLmZvbnRTaXplK3Iuc3Ryb2tlVGhpY2tuZXNzLGc9TWF0aC5tYXgodixzLmZvbnRTaXplK3Iuc3Ryb2tlVGhpY2tuZXNzKSsoaC5sZW5ndGgtMSkqKHYrci5sZWFkaW5nKTtyZXR1cm4gci5kcm9wU2hhZG93JiYoZys9ci5kcm9wU2hhZG93RGlzdGFuY2UpLG5ldyB0KGUscixwLGcsaCxsLHYrci5sZWFkaW5nLGMscyl9LHQud29yZFdyYXA9ZnVuY3Rpb24oZSxyKXtmb3IodmFyIG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnQuX2NhbnZhcyxpPW4uZ2V0Q29udGV4dChcIjJkXCIpLG89MCxzPVwiXCIsYT1cIlwiLHU9e30saD1yLmxldHRlclNwYWNpbmcsbD1yLndoaXRlU3BhY2UsYz10LmNvbGxhcHNlU3BhY2VzKGwpLGQ9dC5jb2xsYXBzZU5ld2xpbmVzKGwpLGY9IWMscD1yLndvcmRXcmFwV2lkdGgraCx2PXQudG9rZW5pemUoZSksZz0wO2c8di5sZW5ndGg7ZysrKXt2YXIgeT12W2ddO2lmKHQuaXNOZXdsaW5lKHkpKXtpZighZCl7YSs9dC5hZGRMaW5lKHMpLGY9IWMscz1cIlwiLG89MDtjb250aW51ZX15PVwiIFwifWlmKGMpe3ZhciBtPXQuaXNCcmVha2luZ1NwYWNlKHkpLF89dC5pc0JyZWFraW5nU3BhY2Uoc1tzLmxlbmd0aC0xXSk7aWYobSYmXyljb250aW51ZX12YXIgYj10LmdldEZyb21DYWNoZSh5LGgsdSxpKTtpZihiPnApaWYoXCJcIiE9PXMmJihhKz10LmFkZExpbmUocykscz1cIlwiLG89MCksdC5jYW5CcmVha1dvcmRzKHksci5icmVha1dvcmRzKSlmb3IodmFyIHg9eS5zcGxpdChcIlwiKSxUPTA7VDx4Lmxlbmd0aDtUKyspe2Zvcih2YXIgdz14W1RdLEU9MTt4W1QrRV07KXt2YXIgUz14W1QrRV0sTz13W3cubGVuZ3RoLTFdO2lmKHQuY2FuQnJlYWtDaGFycyhPLFMseSxULHIuYnJlYWtXb3JkcykpYnJlYWs7dys9UyxFKyt9VCs9dy5sZW5ndGgtMTt2YXIgTT10LmdldEZyb21DYWNoZSh3LGgsdSxpKTtNK28+cCYmKGErPXQuYWRkTGluZShzKSxmPSExLHM9XCJcIixvPTApLHMrPXcsbys9TX1lbHNle3MubGVuZ3RoPjAmJihhKz10LmFkZExpbmUocykscz1cIlwiLG89MCk7dmFyIFA9Zz09PXYubGVuZ3RoLTE7YSs9dC5hZGRMaW5lKHksIVApLGY9ITEscz1cIlwiLG89MH1lbHNlIGIrbz5wJiYoZj0hMSxhKz10LmFkZExpbmUocykscz1cIlwiLG89MCksKHMubGVuZ3RoPjB8fCF0LmlzQnJlYWtpbmdTcGFjZSh5KXx8ZikmJihzKz15LG8rPWIpfXJldHVybiBhKz10LmFkZExpbmUocywhMSl9LHQuYWRkTGluZT1mdW5jdGlvbihlKXt2YXIgcj0hKGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdKXx8YXJndW1lbnRzWzFdO3JldHVybiBlPXQudHJpbVJpZ2h0KGUpLGU9cj9lK1wiXFxuXCI6ZX0sdC5nZXRGcm9tQ2FjaGU9ZnVuY3Rpb24odCxlLHIsbil7dmFyIGk9clt0XTtpZih2b2lkIDA9PT1pKXt2YXIgbz10Lmxlbmd0aCplO2k9bi5tZWFzdXJlVGV4dCh0KS53aWR0aCtvLHJbdF09aX1yZXR1cm4gaX0sdC5jb2xsYXBzZVNwYWNlcz1mdW5jdGlvbih0KXtyZXR1cm5cIm5vcm1hbFwiPT09dHx8XCJwcmUtbGluZVwiPT09dH0sdC5jb2xsYXBzZU5ld2xpbmVzPWZ1bmN0aW9uKHQpe3JldHVyblwibm9ybWFsXCI9PT10fSx0LnRyaW1SaWdodD1mdW5jdGlvbihlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSlyZXR1cm5cIlwiO2Zvcih2YXIgcj1lLmxlbmd0aC0xO3I+PTA7ci0tKXt2YXIgbj1lW3JdO2lmKCF0LmlzQnJlYWtpbmdTcGFjZShuKSlicmVhaztlPWUuc2xpY2UoMCwtMSl9cmV0dXJuIGV9LHQuaXNOZXdsaW5lPWZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlJiZ0Ll9uZXdsaW5lcy5pbmRleE9mKGUuY2hhckNvZGVBdCgwKSk+PTB9LHQuaXNCcmVha2luZ1NwYWNlPWZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlJiZ0Ll9icmVha2luZ1NwYWNlcy5pbmRleE9mKGUuY2hhckNvZGVBdCgwKSk+PTB9LHQudG9rZW5pemU9ZnVuY3Rpb24oZSl7dmFyIHI9W10sbj1cIlwiO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXJldHVybiByO2Zvcih2YXIgaT0wO2k8ZS5sZW5ndGg7aSsrKXt2YXIgbz1lW2ldO3QuaXNCcmVha2luZ1NwYWNlKG8pfHx0LmlzTmV3bGluZShvKT8oXCJcIiE9PW4mJihyLnB1c2gobiksbj1cIlwiKSxyLnB1c2gobykpOm4rPW99cmV0dXJuXCJcIiE9PW4mJnIucHVzaChuKSxyfSx0LmNhbkJyZWFrV29yZHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZX0sdC5jYW5CcmVha0NoYXJzPWZ1bmN0aW9uKHQsZSxyLG4saSl7cmV0dXJuITB9LHQubWVhc3VyZUZvbnQ9ZnVuY3Rpb24oZSl7aWYodC5fZm9udHNbZV0pcmV0dXJuIHQuX2ZvbnRzW2VdO3ZhciByPXt9LG49dC5fY2FudmFzLGk9dC5fY29udGV4dDtpLmZvbnQ9ZTt2YXIgbz10Lk1FVFJJQ1NfU1RSSU5HK3QuQkFTRUxJTkVfU1lNQk9MLHM9TWF0aC5jZWlsKGkubWVhc3VyZVRleHQobykud2lkdGgpLGE9TWF0aC5jZWlsKGkubWVhc3VyZVRleHQodC5CQVNFTElORV9TWU1CT0wpLndpZHRoKSx1PTIqYTthPWEqdC5CQVNFTElORV9NVUxUSVBMSUVSfDAsbi53aWR0aD1zLG4uaGVpZ2h0PXUsaS5maWxsU3R5bGU9XCIjZjAwXCIsaS5maWxsUmVjdCgwLDAscyx1KSxpLmZvbnQ9ZSxpLnRleHRCYXNlbGluZT1cImFscGhhYmV0aWNcIixpLmZpbGxTdHlsZT1cIiMwMDBcIixpLmZpbGxUZXh0KG8sMCxhKTt2YXIgaD1pLmdldEltYWdlRGF0YSgwLDAscyx1KS5kYXRhLGw9aC5sZW5ndGgsYz00KnMsZD0wLGY9MCxwPSExO2ZvcihkPTA7ZDxhOysrZCl7Zm9yKHZhciB2PTA7djxjO3YrPTQpaWYoMjU1IT09aFtmK3ZdKXtwPSEwO2JyZWFrfWlmKHApYnJlYWs7Zis9Y31mb3Ioci5hc2NlbnQ9YS1kLGY9bC1jLHA9ITEsZD11O2Q+YTstLWQpe2Zvcih2YXIgZz0wO2c8YztnKz00KWlmKDI1NSE9PWhbZitnXSl7cD0hMDticmVha31pZihwKWJyZWFrO2YtPWN9cmV0dXJuIHIuZGVzY2VudD1kLWEsci5mb250U2l6ZT1yLmFzY2VudCtyLmRlc2NlbnQsdC5fZm9udHNbZV09cixyfSx0LmNsZWFyTWV0cmljcz1mdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpcIlwiO2U/ZGVsZXRlIHQuX2ZvbnRzW2VdOnQuX2ZvbnRzPXt9fSx0fSgpO3IuZGVmYXVsdD1pO3ZhciBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7by53aWR0aD1vLmhlaWdodD0xMCxpLl9jYW52YXM9byxpLl9jb250ZXh0PW8uZ2V0Q29udGV4dChcIjJkXCIpLGkuX2ZvbnRzPXt9LGkuTUVUUklDU19TVFJJTkc9XCJ8w4lxXCIsaS5CQVNFTElORV9TWU1CT0w9XCJNXCIsaS5CQVNFTElORV9NVUxUSVBMSUVSPTEuNCxpLl9uZXdsaW5lcz1bMTAsMTNdLGkuX2JyZWFraW5nU3BhY2VzPVs5LDMyLDgxOTIsODE5Myw4MTk0LDgxOTUsODE5Niw4MTk3LDgxOTgsODIwMCw4MjAxLDgyMDIsODI4NywxMjI4OF19LHt9XSwxMTA6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0PygwLGwuaGV4MnN0cmluZykodCk6KFwic3RyaW5nXCI9PXR5cGVvZiB0JiYwPT09dC5pbmRleE9mKFwiMHhcIikmJih0PXQucmVwbGFjZShcIjB4XCIsXCIjXCIpKSx0KX1mdW5jdGlvbiBvKHQpe2lmKEFycmF5LmlzQXJyYXkodCkpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7KytlKXRbZV09aSh0W2VdKTtyZXR1cm4gdH1yZXR1cm4gaSh0KX1mdW5jdGlvbiBzKHQsZSl7aWYoIUFycmF5LmlzQXJyYXkodCl8fCFBcnJheS5pc0FycmF5KGUpKXJldHVybiExO2lmKHQubGVuZ3RoIT09ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDsrK3IpaWYodFtyXSE9PWVbcl0pcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gYSh0LGUscil7Zm9yKHZhciBuIGluIHIpQXJyYXkuaXNBcnJheShlW25dKT90W25dPWVbbl0uc2xpY2UoKTp0W25dPWVbbl19ci5fX2VzTW9kdWxlPSEwO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksaD10KFwiLi4vY29uc3RcIiksbD10KFwiLi4vdXRpbHNcIiksYz17YWxpZ246XCJsZWZ0XCIsYnJlYWtXb3JkczohMSxkcm9wU2hhZG93OiExLGRyb3BTaGFkb3dBbHBoYToxLGRyb3BTaGFkb3dBbmdsZTpNYXRoLlBJLzYsZHJvcFNoYWRvd0JsdXI6MCxkcm9wU2hhZG93Q29sb3I6XCJibGFja1wiLGRyb3BTaGFkb3dEaXN0YW5jZTo1LGZpbGw6XCJibGFja1wiLGZpbGxHcmFkaWVudFR5cGU6aC5URVhUX0dSQURJRU5ULkxJTkVBUl9WRVJUSUNBTCxmaWxsR3JhZGllbnRTdG9wczpbXSxmb250RmFtaWx5OlwiQXJpYWxcIixmb250U2l6ZToyNixmb250U3R5bGU6XCJub3JtYWxcIixmb250VmFyaWFudDpcIm5vcm1hbFwiLGZvbnRXZWlnaHQ6XCJub3JtYWxcIixsZXR0ZXJTcGFjaW5nOjAsbGluZUhlaWdodDowLGxpbmVKb2luOlwibWl0ZXJcIixtaXRlckxpbWl0OjEwLHBhZGRpbmc6MCxzdHJva2U6XCJibGFja1wiLHN0cm9rZVRoaWNrbmVzczowLHRleHRCYXNlbGluZTpcImFscGhhYmV0aWNcIix0cmltOiExLHdoaXRlU3BhY2U6XCJwcmVcIix3b3JkV3JhcDohMSx3b3JkV3JhcFdpZHRoOjEwMCxsZWFkaW5nOjB9LGQ9W1wic2VyaWZcIixcInNhbnMtc2VyaWZcIixcIm1vbm9zcGFjZVwiLFwiY3Vyc2l2ZVwiLFwiZmFudGFzeVwiLFwic3lzdGVtLXVpXCJdLGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe24odGhpcyx0KSx0aGlzLnN0eWxlSUQ9MCx0aGlzLnJlc2V0KCksYSh0aGlzLGUsZSl9cmV0dXJuIHQucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGU9e307cmV0dXJuIGEoZSx0aGlzLGMpLG5ldyB0KGUpfSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe2EodGhpcyxjLGMpfSx0LnByb3RvdHlwZS50b0ZvbnRTdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD1cIm51bWJlclwiPT10eXBlb2YgdGhpcy5mb250U2l6ZT90aGlzLmZvbnRTaXplK1wicHhcIjp0aGlzLmZvbnRTaXplLGU9dGhpcy5mb250RmFtaWx5O0FycmF5LmlzQXJyYXkodGhpcy5mb250RmFtaWx5KXx8KGU9dGhpcy5mb250RmFtaWx5LnNwbGl0KFwiLFwiKSk7Zm9yKHZhciByPWUubGVuZ3RoLTE7cj49MDtyLS0pe3ZhciBuPWVbcl0udHJpbSgpOyEvKFtcXFwiXFwnXSlbXlxcJ1xcXCJdK1xcMS8udGVzdChuKSYmZC5pbmRleE9mKG4pPDAmJihuPSdcIicrbisnXCInKSxlW3JdPW59cmV0dXJuIHRoaXMuZm9udFN0eWxlK1wiIFwiK3RoaXMuZm9udFZhcmlhbnQrXCIgXCIrdGhpcy5mb250V2VpZ2h0K1wiIFwiK3QrXCIgXCIrZS5qb2luKFwiLFwiKX0sdSh0LFt7a2V5OlwiYWxpZ25cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWxpZ259LHNldDpmdW5jdGlvbih0KXt0aGlzLl9hbGlnbiE9PXQmJih0aGlzLl9hbGlnbj10LHRoaXMuc3R5bGVJRCsrKX19LHtrZXk6XCJicmVha1dvcmRzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JyZWFrV29yZHN9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9icmVha1dvcmRzIT09dCYmKHRoaXMuX2JyZWFrV29yZHM9dCx0aGlzLnN0eWxlSUQrKyl9fSx7a2V5OlwiZHJvcFNoYWRvd1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kcm9wU2hhZG93fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZHJvcFNoYWRvdyE9PXQmJih0aGlzLl9kcm9wU2hhZG93PXQsdGhpcy5zdHlsZUlEKyspfX0se2tleTpcImRyb3BTaGFkb3dBbHBoYVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kcm9wU2hhZG93QWxwaGF9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kcm9wU2hhZG93QWxwaGEhPT10JiYodGhpcy5fZHJvcFNoYWRvd0FscGhhPXQsdGhpcy5zdHlsZUlEKyspfX0se2tleTpcImRyb3BTaGFkb3dBbmdsZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kcm9wU2hhZG93QW5nbGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kcm9wU2hhZG93QW5nbGUhPT10JiYodGhpcy5fZHJvcFNoYWRvd0FuZ2xlPXQsdGhpcy5zdHlsZUlEKyspfX0se2tleTpcImRyb3BTaGFkb3dCbHVyXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Ryb3BTaGFkb3dCbHVyfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZHJvcFNoYWRvd0JsdXIhPT10JiYodGhpcy5fZHJvcFNoYWRvd0JsdXI9dCx0aGlzLnN0eWxlSUQrKyl9fSx7a2V5OlwiZHJvcFNoYWRvd0NvbG9yXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Ryb3BTaGFkb3dDb2xvcn0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPW8odCk7dGhpcy5fZHJvcFNoYWRvd0NvbG9yIT09ZSYmKHRoaXMuX2Ryb3BTaGFkb3dDb2xvcj1lLHRoaXMuc3R5bGVJRCsrKX19LHtrZXk6XCJkcm9wU2hhZG93RGlzdGFuY2VcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZHJvcFNoYWRvd0Rpc3RhbmNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZHJvcFNoYWRvd0Rpc3RhbmNlIT09dCYmKHRoaXMuX2Ryb3BTaGFkb3dEaXN0YW5jZT10LHRoaXMuc3R5bGVJRCsrKX19LHtrZXk6XCJmaWxsXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZpbGx9LHNldDpmdW5jdGlvbih0KXt2YXIgZT1vKHQpO3RoaXMuX2ZpbGwhPT1lJiYodGhpcy5fZmlsbD1lLHRoaXMuc3R5bGVJRCsrKX19LHtrZXk6XCJmaWxsR3JhZGllbnRUeXBlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZpbGxHcmFkaWVudFR5cGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9maWxsR3JhZGllbnRUeXBlIT09dCYmKHRoaXMuX2ZpbGxHcmFkaWVudFR5cGU9dCx0aGlzLnN0eWxlSUQrKyl9fSx7a2V5OlwiZmlsbEdyYWRpZW50U3RvcHNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmlsbEdyYWRpZW50U3RvcHN9LHNldDpmdW5jdGlvbih0KXtzKHRoaXMuX2ZpbGxHcmFkaWVudFN0b3BzLHQpfHwodGhpcy5fZmlsbEdyYWRpZW50U3RvcHM9dCx0aGlzLnN0eWxlSUQrKyl9fSx7a2V5OlwiZm9udEZhbWlseVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb250RmFtaWx5fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5mb250RmFtaWx5IT09dCYmKHRoaXMuX2ZvbnRGYW1pbHk9dCx0aGlzLnN0eWxlSUQrKyl9fSx7a2V5OlwiZm9udFNpemVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9udFNpemV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9mb250U2l6ZSE9PXQmJih0aGlzLl9mb250U2l6ZT10LHRoaXMuc3R5bGVJRCsrKX19LHtrZXk6XCJmb250U3R5bGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9udFN0eWxlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZm9udFN0eWxlIT09dCYmKHRoaXMuX2ZvbnRTdHlsZT10LHRoaXMuc3R5bGVJRCsrKX19LHtrZXk6XCJmb250VmFyaWFudFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb250VmFyaWFudH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2ZvbnRWYXJpYW50IT09dCYmKHRoaXMuX2ZvbnRWYXJpYW50PXQsdGhpcy5zdHlsZUlEKyspfX0se2tleTpcImZvbnRXZWlnaHRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9udFdlaWdodH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2ZvbnRXZWlnaHQhPT10JiYodGhpcy5fZm9udFdlaWdodD10LHRoaXMuc3R5bGVJRCsrKX19LHtrZXk6XCJsZXR0ZXJTcGFjaW5nXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xldHRlclNwYWNpbmd9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sZXR0ZXJTcGFjaW5nIT09dCYmKHRoaXMuX2xldHRlclNwYWNpbmc9dCx0aGlzLnN0eWxlSUQrKyl9fSx7a2V5OlwibGluZUhlaWdodFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9saW5lSGVpZ2h0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGluZUhlaWdodCE9PXQmJih0aGlzLl9saW5lSGVpZ2h0PXQsdGhpcy5zdHlsZUlEKyspfX0se2tleTpcImxlYWRpbmdcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGVhZGluZ30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xlYWRpbmchPT10JiYodGhpcy5fbGVhZGluZz10LHRoaXMuc3R5bGVJRCsrKX19LHtrZXk6XCJsaW5lSm9pblwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9saW5lSm9pbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xpbmVKb2luIT09dCYmKHRoaXMuX2xpbmVKb2luPXQsdGhpcy5zdHlsZUlEKyspfX0se2tleTpcIm1pdGVyTGltaXRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWl0ZXJMaW1pdH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX21pdGVyTGltaXQhPT10JiYodGhpcy5fbWl0ZXJMaW1pdD10LHRoaXMuc3R5bGVJRCsrKX19LHtrZXk6XCJwYWRkaW5nXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhZGRpbmd9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wYWRkaW5nIT09dCYmKHRoaXMuX3BhZGRpbmc9dCx0aGlzLnN0eWxlSUQrKyl9fSx7a2V5Olwic3Ryb2tlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0cm9rZX0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPW8odCk7dGhpcy5fc3Ryb2tlIT09ZSYmKHRoaXMuX3N0cm9rZT1lLHRoaXMuc3R5bGVJRCsrKX19LHtrZXk6XCJzdHJva2VUaGlja25lc3NcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3Ryb2tlVGhpY2tuZXNzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc3Ryb2tlVGhpY2tuZXNzIT09dCYmKHRoaXMuX3N0cm9rZVRoaWNrbmVzcz10LHRoaXMuc3R5bGVJRCsrKX19LHtrZXk6XCJ0ZXh0QmFzZWxpbmVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGV4dEJhc2VsaW5lfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdGV4dEJhc2VsaW5lIT09dCYmKHRoaXMuX3RleHRCYXNlbGluZT10LHRoaXMuc3R5bGVJRCsrKX19LHtrZXk6XCJ0cmltXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RyaW19LHNldDpmdW5jdGlvbih0KXt0aGlzLl90cmltIT09dCYmKHRoaXMuX3RyaW09dCx0aGlzLnN0eWxlSUQrKyl9fSx7a2V5Olwid2hpdGVTcGFjZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93aGl0ZVNwYWNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fd2hpdGVTcGFjZSE9PXQmJih0aGlzLl93aGl0ZVNwYWNlPXQsdGhpcy5zdHlsZUlEKyspfX0se2tleTpcIndvcmRXcmFwXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dvcmRXcmFwfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fd29yZFdyYXAhPT10JiYodGhpcy5fd29yZFdyYXA9dCx0aGlzLnN0eWxlSUQrKyl9fSx7a2V5Olwid29yZFdyYXBXaWR0aFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93b3JkV3JhcFdpZHRofSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fd29yZFdyYXBXaWR0aCE9PXQmJih0aGlzLl93b3JkV3JhcFdpZHRoPXQsdGhpcy5zdHlsZUlEKyspfX1dKSx0fSgpO3IuZGVmYXVsdD1mfSx7XCIuLi9jb25zdFwiOjQ2LFwiLi4vdXRpbHNcIjoxMjV9XSwxMTE6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBpKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gcyh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfXIuX19lc01vZHVsZT0hMDt2YXIgYT10KFwiLi9CYXNlVGV4dHVyZVwiKSx1PW4oYSksaD10KFwiLi4vc2V0dGluZ3NcIiksbD1uKGgpLGM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXToxMDAsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MTAwLHM9YXJndW1lbnRzWzJdLGE9YXJndW1lbnRzWzNdO2kodGhpcyxlKTt2YXIgdT1vKHRoaXMsdC5jYWxsKHRoaXMsbnVsbCxzKSk7cmV0dXJuIHUucmVzb2x1dGlvbj1hfHxsLmRlZmF1bHQuUkVTT0xVVElPTix1LndpZHRoPU1hdGguY2VpbChyKSx1LmhlaWdodD1NYXRoLmNlaWwobiksdS5yZWFsV2lkdGg9dS53aWR0aCp1LnJlc29sdXRpb24sdS5yZWFsSGVpZ2h0PXUuaGVpZ2h0KnUucmVzb2x1dGlvbix1LnNjYWxlTW9kZT12b2lkIDAhPT1zP3M6bC5kZWZhdWx0LlNDQUxFX01PREUsdS5oYXNMb2FkZWQ9ITAsdS5fZ2xSZW5kZXJUYXJnZXRzPXt9LHUuX2NhbnZhc1JlbmRlclRhcmdldD1udWxsLHUudmFsaWQ9ITEsdX1yZXR1cm4gcyhlLHQpLGUucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbih0LGUpe3Q9TWF0aC5jZWlsKHQpLGU9TWF0aC5jZWlsKGUpLHQ9PT10aGlzLndpZHRoJiZlPT09dGhpcy5oZWlnaHR8fCh0aGlzLnZhbGlkPXQ+MCYmZT4wLHRoaXMud2lkdGg9dCx0aGlzLmhlaWdodD1lLHRoaXMucmVhbFdpZHRoPXRoaXMud2lkdGgqdGhpcy5yZXNvbHV0aW9uLHRoaXMucmVhbEhlaWdodD10aGlzLmhlaWdodCp0aGlzLnJlc29sdXRpb24sdGhpcy52YWxpZCYmdGhpcy5lbWl0KFwidXBkYXRlXCIsdGhpcykpfSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dC5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMsITApLHRoaXMucmVuZGVyZXI9bnVsbH0sZX0odS5kZWZhdWx0KTtyLmRlZmF1bHQ9Y30se1wiLi4vc2V0dGluZ3NcIjoxMDEsXCIuL0Jhc2VUZXh0dXJlXCI6MTEyfV0sMTEyOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIHModCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1yLl9fZXNNb2R1bGU9ITA7dmFyIGE9dChcIi4uL3V0aWxzXCIpLHU9dChcIi4uL3NldHRpbmdzXCIpLGg9bih1KSxsPXQoXCJldmVudGVtaXR0ZXIzXCIpLGM9bihsKSxkPXQoXCIuLi91dGlscy9kZXRlcm1pbmVDcm9zc09yaWdpblwiKSxmPW4oZCkscD10KFwiYml0LXR3aWRkbGVcIiksdj1uKHApLGc9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShyLG4scyl7aSh0aGlzLGUpO3ZhciB1PW8odGhpcyx0LmNhbGwodGhpcykpO3JldHVybiB1LnVpZD0oMCxhLnVpZCkoKSx1LnRvdWNoZWQ9MCx1LnJlc29sdXRpb249c3x8aC5kZWZhdWx0LlJFU09MVVRJT04sdS53aWR0aD0xMDAsdS5oZWlnaHQ9MTAwLHUucmVhbFdpZHRoPTEwMCx1LnJlYWxIZWlnaHQ9MTAwLHUuc2NhbGVNb2RlPXZvaWQgMCE9PW4/bjpoLmRlZmF1bHQuU0NBTEVfTU9ERSx1Lmhhc0xvYWRlZD0hMSx1LmlzTG9hZGluZz0hMSx1LnNvdXJjZT1udWxsLHUub3JpZ1NvdXJjZT1udWxsLHUuaW1hZ2VUeXBlPW51bGwsdS5zb3VyY2VTY2FsZT0xLHUucHJlbXVsdGlwbGllZEFscGhhPSEwLHUuaW1hZ2VVcmw9bnVsbCx1LmlzUG93ZXJPZlR3bz0hMSx1Lm1pcG1hcD1oLmRlZmF1bHQuTUlQTUFQX1RFWFRVUkVTLHUud3JhcE1vZGU9aC5kZWZhdWx0LldSQVBfTU9ERSx1Ll9nbFRleHR1cmVzPXt9LHUuX2VuYWJsZWQ9MCx1Ll92aXJ0YWxCb3VuZElkPS0xLHUuX2Rlc3Ryb3llZD0hMSx1LnRleHR1cmVDYWNoZUlkcz1bXSxyJiZ1LmxvYWRTb3VyY2UociksdX1yZXR1cm4gcyhlLHQpLGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe1wic3ZnXCIhPT10aGlzLmltYWdlVHlwZSYmKHRoaXMucmVhbFdpZHRoPXRoaXMuc291cmNlLm5hdHVyYWxXaWR0aHx8dGhpcy5zb3VyY2UudmlkZW9XaWR0aHx8dGhpcy5zb3VyY2Uud2lkdGgsdGhpcy5yZWFsSGVpZ2h0PXRoaXMuc291cmNlLm5hdHVyYWxIZWlnaHR8fHRoaXMuc291cmNlLnZpZGVvSGVpZ2h0fHx0aGlzLnNvdXJjZS5oZWlnaHQsdGhpcy5fdXBkYXRlRGltZW5zaW9ucygpKSx0aGlzLmVtaXQoXCJ1cGRhdGVcIix0aGlzKX0sZS5wcm90b3R5cGUuX3VwZGF0ZURpbWVuc2lvbnM9ZnVuY3Rpb24oKXt0aGlzLndpZHRoPXRoaXMucmVhbFdpZHRoL3RoaXMucmVzb2x1dGlvbix0aGlzLmhlaWdodD10aGlzLnJlYWxIZWlnaHQvdGhpcy5yZXNvbHV0aW9uLHRoaXMuaXNQb3dlck9mVHdvPXYuZGVmYXVsdC5pc1BvdzIodGhpcy5yZWFsV2lkdGgpJiZ2LmRlZmF1bHQuaXNQb3cyKHRoaXMucmVhbEhlaWdodCl9LGUucHJvdG90eXBlLmxvYWRTb3VyY2U9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5pc0xvYWRpbmc7dGhpcy5oYXNMb2FkZWQ9ITEsdGhpcy5pc0xvYWRpbmc9ITEsZSYmdGhpcy5zb3VyY2UmJih0aGlzLnNvdXJjZS5vbmxvYWQ9bnVsbCx0aGlzLnNvdXJjZS5vbmVycm9yPW51bGwpO3ZhciByPSF0aGlzLnNvdXJjZTtpZih0aGlzLnNvdXJjZT10LCh0LnNyYyYmdC5jb21wbGV0ZXx8dC5nZXRDb250ZXh0KSYmdC53aWR0aCYmdC5oZWlnaHQpdGhpcy5fdXBkYXRlSW1hZ2VUeXBlKCksXCJzdmdcIj09PXRoaXMuaW1hZ2VUeXBlP3RoaXMuX2xvYWRTdmdTb3VyY2UoKTp0aGlzLl9zb3VyY2VMb2FkZWQoKSxyJiZ0aGlzLmVtaXQoXCJsb2FkZWRcIix0aGlzKTtlbHNlIGlmKCF0LmdldENvbnRleHQpe3RoaXMuaXNMb2FkaW5nPSEwO3ZhciBuPXRoaXM7aWYodC5vbmxvYWQ9ZnVuY3Rpb24oKXtpZihuLl91cGRhdGVJbWFnZVR5cGUoKSx0Lm9ubG9hZD1udWxsLHQub25lcnJvcj1udWxsLG4uaXNMb2FkaW5nKXtpZihuLmlzTG9hZGluZz0hMSxuLl9zb3VyY2VMb2FkZWQoKSxcInN2Z1wiPT09bi5pbWFnZVR5cGUpcmV0dXJuIHZvaWQgbi5fbG9hZFN2Z1NvdXJjZSgpO24uZW1pdChcImxvYWRlZFwiLG4pfX0sdC5vbmVycm9yPWZ1bmN0aW9uKCl7dC5vbmxvYWQ9bnVsbCx0Lm9uZXJyb3I9bnVsbCxuLmlzTG9hZGluZyYmKG4uaXNMb2FkaW5nPSExLG4uZW1pdChcImVycm9yXCIsbikpfSx0LmNvbXBsZXRlJiZ0LnNyYyl7aWYodC5vbmxvYWQ9bnVsbCx0Lm9uZXJyb3I9bnVsbCxcInN2Z1wiPT09bi5pbWFnZVR5cGUpcmV0dXJuIHZvaWQgbi5fbG9hZFN2Z1NvdXJjZSgpO3RoaXMuaXNMb2FkaW5nPSExLHQud2lkdGgmJnQuaGVpZ2h0Pyh0aGlzLl9zb3VyY2VMb2FkZWQoKSxlJiZ0aGlzLmVtaXQoXCJsb2FkZWRcIix0aGlzKSk6ZSYmdGhpcy5lbWl0KFwiZXJyb3JcIix0aGlzKX19fSxlLnByb3RvdHlwZS5fdXBkYXRlSW1hZ2VUeXBlPWZ1bmN0aW9uKCl7aWYodGhpcy5pbWFnZVVybCl7dmFyIHQ9KDAsYS5kZWNvbXBvc2VEYXRhVXJpKSh0aGlzLmltYWdlVXJsKSxlPXZvaWQgMDtpZih0JiZcImltYWdlXCI9PT10Lm1lZGlhVHlwZSl7dmFyIHI9dC5zdWJUeXBlLnNwbGl0KFwiK1wiKVswXTtpZighKGU9KDAsYS5nZXRVcmxGaWxlRXh0ZW5zaW9uKShcIi5cIityKSkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpbWFnZSB0eXBlIGluIGRhdGEgVVJJLlwiKX1lbHNlKGU9KDAsYS5nZXRVcmxGaWxlRXh0ZW5zaW9uKSh0aGlzLmltYWdlVXJsKSl8fChlPVwicG5nXCIpO3RoaXMuaW1hZ2VUeXBlPWV9fSxlLnByb3RvdHlwZS5fbG9hZFN2Z1NvdXJjZT1mdW5jdGlvbigpe2lmKFwic3ZnXCI9PT10aGlzLmltYWdlVHlwZSl7dmFyIHQ9KDAsYS5kZWNvbXBvc2VEYXRhVXJpKSh0aGlzLmltYWdlVXJsKTt0P3RoaXMuX2xvYWRTdmdTb3VyY2VVc2luZ0RhdGFVcmkodCk6dGhpcy5fbG9hZFN2Z1NvdXJjZVVzaW5nWGhyKCl9fSxlLnByb3RvdHlwZS5fbG9hZFN2Z1NvdXJjZVVzaW5nRGF0YVVyaT1mdW5jdGlvbih0KXt2YXIgZT12b2lkIDA7aWYoXCJiYXNlNjRcIj09PXQuZW5jb2Rpbmcpe2lmKCFhdG9iKXRocm93IG5ldyBFcnJvcihcIllvdXIgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgYmFzZTY0IGNvbnZlcnNpb25zLlwiKTtlPWF0b2IodC5kYXRhKX1lbHNlIGU9dC5kYXRhO3RoaXMuX2xvYWRTdmdTb3VyY2VVc2luZ1N0cmluZyhlKX0sZS5wcm90b3R5cGUuX2xvYWRTdmdTb3VyY2VVc2luZ1hocj1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1uZXcgWE1MSHR0cFJlcXVlc3Q7ZS5vbmxvYWQ9ZnVuY3Rpb24oKXtpZihlLnJlYWR5U3RhdGUhPT1lLkRPTkV8fDIwMCE9PWUuc3RhdHVzKXRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBsb2FkIFNWRyB1c2luZyBYSFIuXCIpO3QuX2xvYWRTdmdTb3VyY2VVc2luZ1N0cmluZyhlLnJlc3BvbnNlKX0sZS5vbmVycm9yPWZ1bmN0aW9uKCl7cmV0dXJuIHQuZW1pdChcImVycm9yXCIsdCl9LGUub3BlbihcIkdFVFwiLHRoaXMuaW1hZ2VVcmwsITApLGUuc2VuZCgpfSxlLnByb3RvdHlwZS5fbG9hZFN2Z1NvdXJjZVVzaW5nU3RyaW5nPWZ1bmN0aW9uKHQpe3ZhciByPSgwLGEuZ2V0U3ZnU2l6ZSkodCksbj1yLndpZHRoLGk9ci5oZWlnaHQ7aWYoIW58fCFpKXRocm93IG5ldyBFcnJvcihcIlRoZSBTVkcgaW1hZ2UgbXVzdCBoYXZlIHdpZHRoIGFuZCBoZWlnaHQgZGVmaW5lZCAoaW4gcGl4ZWxzKSwgY2FudmFzIEFQSSBuZWVkcyB0aGVtLlwiKTt0aGlzLnJlYWxXaWR0aD1NYXRoLnJvdW5kKG4qdGhpcy5zb3VyY2VTY2FsZSksdGhpcy5yZWFsSGVpZ2h0PU1hdGgucm91bmQoaSp0aGlzLnNvdXJjZVNjYWxlKSx0aGlzLl91cGRhdGVEaW1lbnNpb25zKCk7dmFyIG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtvLndpZHRoPXRoaXMucmVhbFdpZHRoLG8uaGVpZ2h0PXRoaXMucmVhbEhlaWdodCxvLl9waXhpSWQ9XCJjYW52YXNfXCIrKDAsYS51aWQpKCksby5nZXRDb250ZXh0KFwiMmRcIikuZHJhd0ltYWdlKHRoaXMuc291cmNlLDAsMCxuLGksMCwwLHRoaXMucmVhbFdpZHRoLHRoaXMucmVhbEhlaWdodCksdGhpcy5vcmlnU291cmNlPXRoaXMuc291cmNlLHRoaXMuc291cmNlPW8sZS5hZGRUb0NhY2hlKHRoaXMsby5fcGl4aUlkKSx0aGlzLmlzTG9hZGluZz0hMSx0aGlzLl9zb3VyY2VMb2FkZWQoKSx0aGlzLmVtaXQoXCJsb2FkZWRcIix0aGlzKX0sZS5wcm90b3R5cGUuX3NvdXJjZUxvYWRlZD1mdW5jdGlvbigpe3RoaXMuaGFzTG9hZGVkPSEwLHRoaXMudXBkYXRlKCl9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmltYWdlVXJsJiYoZGVsZXRlIGEuVGV4dHVyZUNhY2hlW3RoaXMuaW1hZ2VVcmxdLHRoaXMuaW1hZ2VVcmw9bnVsbCxuYXZpZ2F0b3IuaXNDb2Nvb25KU3x8KHRoaXMuc291cmNlLnNyYz1cIlwiKSksdGhpcy5zb3VyY2U9bnVsbCx0aGlzLmRpc3Bvc2UoKSxlLnJlbW92ZUZyb21DYWNoZSh0aGlzKSx0aGlzLnRleHR1cmVDYWNoZUlkcz1udWxsLHRoaXMuX2Rlc3Ryb3llZD0hMH0sZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuZW1pdChcImRpc3Bvc2VcIix0aGlzKX0sZS5wcm90b3R5cGUudXBkYXRlU291cmNlSW1hZ2U9ZnVuY3Rpb24odCl7dGhpcy5zb3VyY2Uuc3JjPXQsdGhpcy5sb2FkU291cmNlKHRoaXMuc291cmNlKX0sZS5mcm9tSW1hZ2U9ZnVuY3Rpb24odCxyLG4saSl7dmFyIG89YS5CYXNlVGV4dHVyZUNhY2hlW3RdO2lmKCFvKXt2YXIgcz1uZXcgSW1hZ2U7dm9pZCAwPT09ciYmMCE9PXQuaW5kZXhPZihcImRhdGE6XCIpP3MuY3Jvc3NPcmlnaW49KDAsZi5kZWZhdWx0KSh0KTpyJiYocy5jcm9zc09yaWdpbj1cInN0cmluZ1wiPT10eXBlb2Ygcj9yOlwiYW5vbnltb3VzXCIpLG89bmV3IGUocyxuKSxcbm8uaW1hZ2VVcmw9dCxpJiYoby5zb3VyY2VTY2FsZT1pKSxvLnJlc29sdXRpb249KDAsYS5nZXRSZXNvbHV0aW9uT2ZVcmwpKHQpLHMuc3JjPXQsZS5hZGRUb0NhY2hlKG8sdCl9cmV0dXJuIG99LGUuZnJvbUNhbnZhcz1mdW5jdGlvbih0LHIpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTpcImNhbnZhc1wiO3QuX3BpeGlJZHx8KHQuX3BpeGlJZD1uK1wiX1wiKygwLGEudWlkKSgpKTt2YXIgaT1hLkJhc2VUZXh0dXJlQ2FjaGVbdC5fcGl4aUlkXTtyZXR1cm4gaXx8KGk9bmV3IGUodCxyKSxlLmFkZFRvQ2FjaGUoaSx0Ll9waXhpSWQpKSxpfSxlLmZyb209ZnVuY3Rpb24odCxyLG4pe2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXJldHVybiBlLmZyb21JbWFnZSh0LHZvaWQgMCxyLG4pO2lmKHQgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50KXt2YXIgaT10LnNyYyxvPWEuQmFzZVRleHR1cmVDYWNoZVtpXTtyZXR1cm4gb3x8KG89bmV3IGUodCxyKSxvLmltYWdlVXJsPWksbiYmKG8uc291cmNlU2NhbGU9biksby5yZXNvbHV0aW9uPSgwLGEuZ2V0UmVzb2x1dGlvbk9mVXJsKShpKSxlLmFkZFRvQ2FjaGUobyxpKSksb31yZXR1cm4gdCBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50P2UuZnJvbUNhbnZhcyh0LHIpOnR9LGUuYWRkVG9DYWNoZT1mdW5jdGlvbih0LGUpe2UmJigtMT09PXQudGV4dHVyZUNhY2hlSWRzLmluZGV4T2YoZSkmJnQudGV4dHVyZUNhY2hlSWRzLnB1c2goZSksYS5CYXNlVGV4dHVyZUNhY2hlW2VdPXQpfSxlLnJlbW92ZUZyb21DYWNoZT1mdW5jdGlvbih0KXtpZihcInN0cmluZ1wiPT10eXBlb2YgdCl7dmFyIGU9YS5CYXNlVGV4dHVyZUNhY2hlW3RdO2lmKGUpe3ZhciByPWUudGV4dHVyZUNhY2hlSWRzLmluZGV4T2YodCk7cmV0dXJuIHI+LTEmJmUudGV4dHVyZUNhY2hlSWRzLnNwbGljZShyLDEpLGRlbGV0ZSBhLkJhc2VUZXh0dXJlQ2FjaGVbdF0sZX19ZWxzZSBpZih0JiZ0LnRleHR1cmVDYWNoZUlkcyl7Zm9yKHZhciBuPTA7bjx0LnRleHR1cmVDYWNoZUlkcy5sZW5ndGg7KytuKWRlbGV0ZSBhLkJhc2VUZXh0dXJlQ2FjaGVbdC50ZXh0dXJlQ2FjaGVJZHNbbl1dO3JldHVybiB0LnRleHR1cmVDYWNoZUlkcy5sZW5ndGg9MCx0fXJldHVybiBudWxsfSxlfShjLmRlZmF1bHQpO3IuZGVmYXVsdD1nfSx7XCIuLi9zZXR0aW5nc1wiOjEwMSxcIi4uL3V0aWxzXCI6MTI1LFwiLi4vdXRpbHMvZGV0ZXJtaW5lQ3Jvc3NPcmlnaW5cIjoxMjQsXCJiaXQtdHdpZGRsZVwiOjEsZXZlbnRlbWl0dGVyMzozfV0sMTEzOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIHModCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1yLl9fZXNNb2R1bGU9ITA7dmFyIGE9dChcIi4vQmFzZVJlbmRlclRleHR1cmVcIiksdT1uKGEpLGg9dChcIi4vVGV4dHVyZVwiKSxsPW4oaCksYz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHIsbil7aSh0aGlzLGUpO3ZhciBzPW51bGw7aWYoIShyIGluc3RhbmNlb2YgdS5kZWZhdWx0KSl7dmFyIGE9YXJndW1lbnRzWzFdLGg9YXJndW1lbnRzWzJdLGw9YXJndW1lbnRzWzNdLGM9YXJndW1lbnRzWzRdO2NvbnNvbGUud2FybihcIlBsZWFzZSB1c2UgUmVuZGVyVGV4dHVyZS5jcmVhdGUoXCIrYStcIiwgXCIraCtcIikgaW5zdGVhZCBvZiB0aGUgY3RvciBkaXJlY3RseS5cIikscz1hcmd1bWVudHNbMF0sbj1udWxsLHI9bmV3IHUuZGVmYXVsdChhLGgsbCxjKX12YXIgZD1vKHRoaXMsdC5jYWxsKHRoaXMscixuKSk7cmV0dXJuIGQubGVnYWN5UmVuZGVyZXI9cyxkLnZhbGlkPSEwLGQuX3VwZGF0ZVV2cygpLGR9cmV0dXJuIHMoZSx0KSxlLnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24odCxlLHIpe3Q9TWF0aC5jZWlsKHQpLGU9TWF0aC5jZWlsKGUpLHRoaXMudmFsaWQ9dD4wJiZlPjAsdGhpcy5fZnJhbWUud2lkdGg9dGhpcy5vcmlnLndpZHRoPXQsdGhpcy5fZnJhbWUuaGVpZ2h0PXRoaXMub3JpZy5oZWlnaHQ9ZSxyfHx0aGlzLmJhc2VUZXh0dXJlLnJlc2l6ZSh0LGUpLHRoaXMuX3VwZGF0ZVV2cygpfSxlLmNyZWF0ZT1mdW5jdGlvbih0LHIsbixpKXtyZXR1cm4gbmV3IGUobmV3IHUuZGVmYXVsdCh0LHIsbixpKSl9LGV9KGwuZGVmYXVsdCk7ci5kZWZhdWx0PWN9LHtcIi4vQmFzZVJlbmRlclRleHR1cmVcIjoxMTEsXCIuL1RleHR1cmVcIjoxMTV9XSwxMTQ6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1yLl9fZXNNb2R1bGU9ITA7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBuPWVbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSxyLG4pe3JldHVybiByJiZ0KGUucHJvdG90eXBlLHIpLG4mJnQoZSxuKSxlfX0oKSxvPXQoXCIuLi9cIikscz10KFwiLi4vdXRpbHNcIiksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxyKXt2YXIgaT1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06bnVsbDtuKHRoaXMsdCksdGhpcy5iYXNlVGV4dHVyZT1lLHRoaXMudGV4dHVyZXM9e30sdGhpcy5hbmltYXRpb25zPXt9LHRoaXMuZGF0YT1yLHRoaXMucmVzb2x1dGlvbj10aGlzLl91cGRhdGVSZXNvbHV0aW9uKGl8fHRoaXMuYmFzZVRleHR1cmUuaW1hZ2VVcmwpLHRoaXMuX2ZyYW1lcz10aGlzLmRhdGEuZnJhbWVzLHRoaXMuX2ZyYW1lS2V5cz1PYmplY3Qua2V5cyh0aGlzLl9mcmFtZXMpLHRoaXMuX2JhdGNoSW5kZXg9MCx0aGlzLl9jYWxsYmFjaz1udWxsfXJldHVybiBpKHQsbnVsbCxbe2tleTpcIkJBVENIX1NJWkVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMWUzfX1dKSx0LnByb3RvdHlwZS5fdXBkYXRlUmVzb2x1dGlvbj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmRhdGEubWV0YS5zY2FsZSxyPSgwLHMuZ2V0UmVzb2x1dGlvbk9mVXJsKSh0LG51bGwpO3JldHVybiBudWxsPT09ciYmKHI9dm9pZCAwIT09ZT9wYXJzZUZsb2F0KGUpOjEpLDEhPT1yJiYodGhpcy5iYXNlVGV4dHVyZS5yZXNvbHV0aW9uPXIsdGhpcy5iYXNlVGV4dHVyZS51cGRhdGUoKSkscn0sdC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24oZSl7dGhpcy5fYmF0Y2hJbmRleD0wLHRoaXMuX2NhbGxiYWNrPWUsdGhpcy5fZnJhbWVLZXlzLmxlbmd0aDw9dC5CQVRDSF9TSVpFPyh0aGlzLl9wcm9jZXNzRnJhbWVzKDApLHRoaXMuX3Byb2Nlc3NBbmltYXRpb25zKCksdGhpcy5fcGFyc2VDb21wbGV0ZSgpKTp0aGlzLl9uZXh0QmF0Y2goKX0sdC5wcm90b3R5cGUuX3Byb2Nlc3NGcmFtZXM9ZnVuY3Rpb24oZSl7Zm9yKHZhciByPWUsbj10LkJBVENIX1NJWkUsaT10aGlzLmJhc2VUZXh0dXJlLnNvdXJjZVNjYWxlO3ItZTxuJiZyPHRoaXMuX2ZyYW1lS2V5cy5sZW5ndGg7KXt2YXIgcz10aGlzLl9mcmFtZUtleXNbcl0sYT10aGlzLl9mcmFtZXNbc10sdT1hLmZyYW1lO2lmKHUpe3ZhciBoPW51bGwsbD1udWxsLGM9ITEhPT1hLnRyaW1tZWQmJmEuc291cmNlU2l6ZT9hLnNvdXJjZVNpemU6YS5mcmFtZSxkPW5ldyBvLlJlY3RhbmdsZSgwLDAsTWF0aC5mbG9vcihjLncqaSkvdGhpcy5yZXNvbHV0aW9uLE1hdGguZmxvb3IoYy5oKmkpL3RoaXMucmVzb2x1dGlvbik7aD1hLnJvdGF0ZWQ/bmV3IG8uUmVjdGFuZ2xlKE1hdGguZmxvb3IodS54KmkpL3RoaXMucmVzb2x1dGlvbixNYXRoLmZsb29yKHUueSppKS90aGlzLnJlc29sdXRpb24sTWF0aC5mbG9vcih1LmgqaSkvdGhpcy5yZXNvbHV0aW9uLE1hdGguZmxvb3IodS53KmkpL3RoaXMucmVzb2x1dGlvbik6bmV3IG8uUmVjdGFuZ2xlKE1hdGguZmxvb3IodS54KmkpL3RoaXMucmVzb2x1dGlvbixNYXRoLmZsb29yKHUueSppKS90aGlzLnJlc29sdXRpb24sTWF0aC5mbG9vcih1LncqaSkvdGhpcy5yZXNvbHV0aW9uLE1hdGguZmxvb3IodS5oKmkpL3RoaXMucmVzb2x1dGlvbiksITEhPT1hLnRyaW1tZWQmJmEuc3ByaXRlU291cmNlU2l6ZSYmKGw9bmV3IG8uUmVjdGFuZ2xlKE1hdGguZmxvb3IoYS5zcHJpdGVTb3VyY2VTaXplLngqaSkvdGhpcy5yZXNvbHV0aW9uLE1hdGguZmxvb3IoYS5zcHJpdGVTb3VyY2VTaXplLnkqaSkvdGhpcy5yZXNvbHV0aW9uLE1hdGguZmxvb3IodS53KmkpL3RoaXMucmVzb2x1dGlvbixNYXRoLmZsb29yKHUuaCppKS90aGlzLnJlc29sdXRpb24pKSx0aGlzLnRleHR1cmVzW3NdPW5ldyBvLlRleHR1cmUodGhpcy5iYXNlVGV4dHVyZSxoLGQsbCxhLnJvdGF0ZWQ/MjowLGEuYW5jaG9yKSxvLlRleHR1cmUuYWRkVG9DYWNoZSh0aGlzLnRleHR1cmVzW3NdLHMpfXIrK319LHQucHJvdG90eXBlLl9wcm9jZXNzQW5pbWF0aW9ucz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZGF0YS5hbmltYXRpb25zfHx7fTtmb3IodmFyIGUgaW4gdCl7dGhpcy5hbmltYXRpb25zW2VdPVtdO2Zvcih2YXIgcj10W2VdLG49QXJyYXkuaXNBcnJheShyKSxpPTAscj1uP3I6cltTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIG87aWYobil7aWYoaT49ci5sZW5ndGgpYnJlYWs7bz1yW2krK119ZWxzZXtpZihpPXIubmV4dCgpLGkuZG9uZSlicmVhaztvPWkudmFsdWV9dmFyIHM9bzt0aGlzLmFuaW1hdGlvbnNbZV0ucHVzaCh0aGlzLnRleHR1cmVzW3NdKX19fSx0LnByb3RvdHlwZS5fcGFyc2VDb21wbGV0ZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2NhbGxiYWNrO3RoaXMuX2NhbGxiYWNrPW51bGwsdGhpcy5fYmF0Y2hJbmRleD0wLHQuY2FsbCh0aGlzLHRoaXMudGV4dHVyZXMpfSx0LnByb3RvdHlwZS5fbmV4dEJhdGNoPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLl9wcm9jZXNzRnJhbWVzKHRoaXMuX2JhdGNoSW5kZXgqdC5CQVRDSF9TSVpFKSx0aGlzLl9iYXRjaEluZGV4Kyssc2V0VGltZW91dChmdW5jdGlvbigpe2UuX2JhdGNoSW5kZXgqdC5CQVRDSF9TSVpFPGUuX2ZyYW1lS2V5cy5sZW5ndGg/ZS5fbmV4dEJhdGNoKCk6KGUuX3Byb2Nlc3NBbmltYXRpb25zKCksZS5fcGFyc2VDb21wbGV0ZSgpKX0sMCl9LHQucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSYmYXJndW1lbnRzWzBdO2Zvcih2YXIgZSBpbiB0aGlzLnRleHR1cmVzKXRoaXMudGV4dHVyZXNbZV0uZGVzdHJveSgpO3RoaXMuX2ZyYW1lcz1udWxsLHRoaXMuX2ZyYW1lS2V5cz1udWxsLHRoaXMuZGF0YT1udWxsLHRoaXMudGV4dHVyZXM9bnVsbCx0JiZ0aGlzLmJhc2VUZXh0dXJlLmRlc3Ryb3koKSx0aGlzLmJhc2VUZXh0dXJlPW51bGx9LHR9KCk7ci5kZWZhdWx0PWF9LHtcIi4uL1wiOjY1LFwiLi4vdXRpbHNcIjoxMjV9XSwxMTU6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBpKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gcyh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfWZ1bmN0aW9uIGEodCl7dC5kZXN0cm95PWZ1bmN0aW9uKCl7fSx0Lm9uPWZ1bmN0aW9uKCl7fSx0Lm9uY2U9ZnVuY3Rpb24oKXt9LHQuZW1pdD1mdW5jdGlvbigpe319ci5fX2VzTW9kdWxlPSEwO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksaD10KFwiLi9CYXNlVGV4dHVyZVwiKSxsPW4oaCksYz10KFwiLi9WaWRlb0Jhc2VUZXh0dXJlXCIpLGQ9bihjKSxmPXQoXCIuL1RleHR1cmVVdnNcIikscD1uKGYpLHY9dChcImV2ZW50ZW1pdHRlcjNcIiksZz1uKHYpLHk9dChcIi4uL21hdGhcIiksbT10KFwiLi4vdXRpbHNcIiksXz10KFwiLi4vc2V0dGluZ3NcIiksYj1uKF8pLHg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShyLG4scyxhLHUsaCl7aSh0aGlzLGUpO3ZhciBsPW8odGhpcyx0LmNhbGwodGhpcykpO2lmKGwubm9GcmFtZT0hMSxufHwobC5ub0ZyYW1lPSEwLG49bmV3IHkuUmVjdGFuZ2xlKDAsMCwxLDEpKSxyIGluc3RhbmNlb2YgZSYmKHI9ci5iYXNlVGV4dHVyZSksbC5iYXNlVGV4dHVyZT1yLGwuX2ZyYW1lPW4sbC50cmltPWEsbC52YWxpZD0hMSxsLnJlcXVpcmVzVXBkYXRlPSExLGwuX3V2cz1udWxsLGwub3JpZz1zfHxuLGwuX3JvdGF0ZT1OdW1iZXIodXx8MCksITA9PT11KWwuX3JvdGF0ZT0yO2Vsc2UgaWYobC5fcm90YXRlJTIhPTApdGhyb3cgbmV3IEVycm9yKFwiYXR0ZW1wdCB0byB1c2UgZGlhbW9uZC1zaGFwZWQgVVZzLiBJZiB5b3UgYXJlIHN1cmUsIHNldCByb3RhdGlvbiBtYW51YWxseVwiKTtyZXR1cm4gci5oYXNMb2FkZWQ/KGwubm9GcmFtZSYmKG49bmV3IHkuUmVjdGFuZ2xlKDAsMCxyLndpZHRoLHIuaGVpZ2h0KSxyLm9uKFwidXBkYXRlXCIsbC5vbkJhc2VUZXh0dXJlVXBkYXRlZCxsKSksbC5mcmFtZT1uKTpyLm9uY2UoXCJsb2FkZWRcIixsLm9uQmFzZVRleHR1cmVMb2FkZWQsbCksbC5kZWZhdWx0QW5jaG9yPWg/bmV3IHkuUG9pbnQoaC54LGgueSk6bmV3IHkuUG9pbnQoMCwwKSxsLl91cGRhdGVJRD0wLGwudHJhbnNmb3JtPW51bGwsbC50ZXh0dXJlQ2FjaGVJZHM9W10sbH1yZXR1cm4gcyhlLHQpLGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3RoaXMuYmFzZVRleHR1cmUudXBkYXRlKCl9LGUucHJvdG90eXBlLm9uQmFzZVRleHR1cmVMb2FkZWQ9ZnVuY3Rpb24odCl7dGhpcy5fdXBkYXRlSUQrKyx0aGlzLm5vRnJhbWU/dGhpcy5mcmFtZT1uZXcgeS5SZWN0YW5nbGUoMCwwLHQud2lkdGgsdC5oZWlnaHQpOnRoaXMuZnJhbWU9dGhpcy5fZnJhbWUsdGhpcy5iYXNlVGV4dHVyZS5vbihcInVwZGF0ZVwiLHRoaXMub25CYXNlVGV4dHVyZVVwZGF0ZWQsdGhpcyksdGhpcy5lbWl0KFwidXBkYXRlXCIsdGhpcyl9LGUucHJvdG90eXBlLm9uQmFzZVRleHR1cmVVcGRhdGVkPWZ1bmN0aW9uKHQpe3RoaXMuX3VwZGF0ZUlEKyssdGhpcy5fZnJhbWUud2lkdGg9dC53aWR0aCx0aGlzLl9mcmFtZS5oZWlnaHQ9dC5oZWlnaHQsdGhpcy5lbWl0KFwidXBkYXRlXCIsdGhpcyl9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24odCl7dGhpcy5iYXNlVGV4dHVyZSYmKHQmJihtLlRleHR1cmVDYWNoZVt0aGlzLmJhc2VUZXh0dXJlLmltYWdlVXJsXSYmZS5yZW1vdmVGcm9tQ2FjaGUodGhpcy5iYXNlVGV4dHVyZS5pbWFnZVVybCksdGhpcy5iYXNlVGV4dHVyZS5kZXN0cm95KCkpLHRoaXMuYmFzZVRleHR1cmUub2ZmKFwidXBkYXRlXCIsdGhpcy5vbkJhc2VUZXh0dXJlVXBkYXRlZCx0aGlzKSx0aGlzLmJhc2VUZXh0dXJlLm9mZihcImxvYWRlZFwiLHRoaXMub25CYXNlVGV4dHVyZUxvYWRlZCx0aGlzKSx0aGlzLmJhc2VUZXh0dXJlPW51bGwpLHRoaXMuX2ZyYW1lPW51bGwsdGhpcy5fdXZzPW51bGwsdGhpcy50cmltPW51bGwsdGhpcy5vcmlnPW51bGwsdGhpcy52YWxpZD0hMSxlLnJlbW92ZUZyb21DYWNoZSh0aGlzKSx0aGlzLnRleHR1cmVDYWNoZUlkcz1udWxsfSxlLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgZSh0aGlzLmJhc2VUZXh0dXJlLHRoaXMuZnJhbWUsdGhpcy5vcmlnLHRoaXMudHJpbSx0aGlzLnJvdGF0ZSx0aGlzLmRlZmF1bHRBbmNob3IpfSxlLnByb3RvdHlwZS5fdXBkYXRlVXZzPWZ1bmN0aW9uKCl7dGhpcy5fdXZzfHwodGhpcy5fdXZzPW5ldyBwLmRlZmF1bHQpLHRoaXMuX3V2cy5zZXQodGhpcy5fZnJhbWUsdGhpcy5iYXNlVGV4dHVyZSx0aGlzLnJvdGF0ZSksdGhpcy5fdXBkYXRlSUQrK30sZS5mcm9tSW1hZ2U9ZnVuY3Rpb24odCxyLG4saSl7dmFyIG89bS5UZXh0dXJlQ2FjaGVbdF07cmV0dXJuIG98fChvPW5ldyBlKGwuZGVmYXVsdC5mcm9tSW1hZ2UodCxyLG4saSkpLGUuYWRkVG9DYWNoZShvLHQpKSxvfSxlLmZyb21GcmFtZT1mdW5jdGlvbih0KXt2YXIgZT1tLlRleHR1cmVDYWNoZVt0XTtpZighZSl0aHJvdyBuZXcgRXJyb3IoJ1RoZSBmcmFtZUlkIFwiJyt0KydcIiBkb2VzIG5vdCBleGlzdCBpbiB0aGUgdGV4dHVyZSBjYWNoZScpO3JldHVybiBlfSxlLmZyb21DYW52YXM9ZnVuY3Rpb24odCxyKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06XCJjYW52YXNcIjtyZXR1cm4gbmV3IGUobC5kZWZhdWx0LmZyb21DYW52YXModCxyLG4pKX0sZS5mcm9tVmlkZW89ZnVuY3Rpb24odCxyLG4saSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQ/ZS5mcm9tVmlkZW9VcmwodCxyLG4saSk6bmV3IGUoZC5kZWZhdWx0LmZyb21WaWRlbyh0LHIsaSkpfSxlLmZyb21WaWRlb1VybD1mdW5jdGlvbih0LHIsbixpKXtyZXR1cm4gbmV3IGUoZC5kZWZhdWx0LmZyb21VcmwodCxyLG4saSkpfSxlLmZyb209ZnVuY3Rpb24odCl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpe3ZhciByPW0uVGV4dHVyZUNhY2hlW3RdO2lmKCFyKXtyZXR1cm4gbnVsbCE9PXQubWF0Y2goL1xcLihtcDR8d2VibXxvZ2d8aDI2NHxhdml8bW92KSQvKT9lLmZyb21WaWRlb1VybCh0KTplLmZyb21JbWFnZSh0KX1yZXR1cm4gcn1yZXR1cm4gdCBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQ/bmV3IGUobC5kZWZhdWx0LmZyb20odCkpOnQgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudD9lLmZyb21DYW52YXModCxiLmRlZmF1bHQuU0NBTEVfTU9ERSxcIkhUTUxDYW52YXNFbGVtZW50XCIpOnQgaW5zdGFuY2VvZiBIVE1MVmlkZW9FbGVtZW50P2UuZnJvbVZpZGVvKHQpOnQgaW5zdGFuY2VvZiBsLmRlZmF1bHQ/bmV3IGUodCk6dH0sZS5mcm9tTG9hZGVyPWZ1bmN0aW9uKHQscixuKXt2YXIgaT1uZXcgbC5kZWZhdWx0KHQsdm9pZCAwLCgwLG0uZ2V0UmVzb2x1dGlvbk9mVXJsKShyKSksbz1uZXcgZShpKTtyZXR1cm4gaS5pbWFnZVVybD1yLG58fChuPXIpLGwuZGVmYXVsdC5hZGRUb0NhY2hlKG8uYmFzZVRleHR1cmUsbiksZS5hZGRUb0NhY2hlKG8sbiksbiE9PXImJihsLmRlZmF1bHQuYWRkVG9DYWNoZShvLmJhc2VUZXh0dXJlLHIpLGUuYWRkVG9DYWNoZShvLHIpKSxvfSxlLmFkZFRvQ2FjaGU9ZnVuY3Rpb24odCxlKXtlJiYoLTE9PT10LnRleHR1cmVDYWNoZUlkcy5pbmRleE9mKGUpJiZ0LnRleHR1cmVDYWNoZUlkcy5wdXNoKGUpLG0uVGV4dHVyZUNhY2hlW2VdPXQpfSxlLnJlbW92ZUZyb21DYWNoZT1mdW5jdGlvbih0KXtpZihcInN0cmluZ1wiPT10eXBlb2YgdCl7dmFyIGU9bS5UZXh0dXJlQ2FjaGVbdF07aWYoZSl7dmFyIHI9ZS50ZXh0dXJlQ2FjaGVJZHMuaW5kZXhPZih0KTtyZXR1cm4gcj4tMSYmZS50ZXh0dXJlQ2FjaGVJZHMuc3BsaWNlKHIsMSksZGVsZXRlIG0uVGV4dHVyZUNhY2hlW3RdLGV9fWVsc2UgaWYodCYmdC50ZXh0dXJlQ2FjaGVJZHMpe2Zvcih2YXIgbj0wO248dC50ZXh0dXJlQ2FjaGVJZHMubGVuZ3RoOysrbiltLlRleHR1cmVDYWNoZVt0LnRleHR1cmVDYWNoZUlkc1tuXV09PT10JiZkZWxldGUgbS5UZXh0dXJlQ2FjaGVbdC50ZXh0dXJlQ2FjaGVJZHNbbl1dO3JldHVybiB0LnRleHR1cmVDYWNoZUlkcy5sZW5ndGg9MCx0fXJldHVybiBudWxsfSx1KGUsW3trZXk6XCJmcmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mcmFtZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2ZyYW1lPXQsdGhpcy5ub0ZyYW1lPSExO3ZhciBlPXQueCxyPXQueSxuPXQud2lkdGgsaT10LmhlaWdodCxvPWUrbj50aGlzLmJhc2VUZXh0dXJlLndpZHRoLHM9citpPnRoaXMuYmFzZVRleHR1cmUuaGVpZ2h0O2lmKG98fHMpe3ZhciBhPW8mJnM/XCJhbmRcIjpcIm9yXCIsdT1cIlg6IFwiK2UrXCIgKyBcIituK1wiID0gXCIrKGUrbikrXCIgPiBcIit0aGlzLmJhc2VUZXh0dXJlLndpZHRoLGg9XCJZOiBcIityK1wiICsgXCIraStcIiA9IFwiKyhyK2kpK1wiID4gXCIrdGhpcy5iYXNlVGV4dHVyZS5oZWlnaHQ7dGhyb3cgbmV3IEVycm9yKFwiVGV4dHVyZSBFcnJvcjogZnJhbWUgZG9lcyBub3QgZml0IGluc2lkZSB0aGUgYmFzZSBUZXh0dXJlIGRpbWVuc2lvbnM6IFwiK3UrXCIgXCIrYStcIiBcIitoKX10aGlzLnZhbGlkPW4mJmkmJnRoaXMuYmFzZVRleHR1cmUuaGFzTG9hZGVkLHRoaXMudHJpbXx8dGhpcy5yb3RhdGV8fCh0aGlzLm9yaWc9dCksdGhpcy52YWxpZCYmdGhpcy5fdXBkYXRlVXZzKCl9fSx7a2V5Olwicm90YXRlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JvdGF0ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3JvdGF0ZT10LHRoaXMudmFsaWQmJnRoaXMuX3VwZGF0ZVV2cygpfX0se2tleTpcIndpZHRoXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3JpZy53aWR0aH19LHtrZXk6XCJoZWlnaHRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcmlnLmhlaWdodH19XSksZX0oZy5kZWZhdWx0KTtyLmRlZmF1bHQ9eCx4LkVNUFRZPW5ldyB4KG5ldyBsLmRlZmF1bHQpLGEoeC5FTVBUWSksYSh4LkVNUFRZLmJhc2VUZXh0dXJlKSx4LldISVRFPWZ1bmN0aW9uKCl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTt0LndpZHRoPTEwLHQuaGVpZ2h0PTEwO3ZhciBlPXQuZ2V0Q29udGV4dChcIjJkXCIpO3JldHVybiBlLmZpbGxTdHlsZT1cIndoaXRlXCIsZS5maWxsUmVjdCgwLDAsMTAsMTApLG5ldyB4KG5ldyBsLmRlZmF1bHQodCkpfSgpLGEoeC5XSElURSksYSh4LldISVRFLmJhc2VUZXh0dXJlKX0se1wiLi4vbWF0aFwiOjcwLFwiLi4vc2V0dGluZ3NcIjoxMDEsXCIuLi91dGlsc1wiOjEyNSxcIi4vQmFzZVRleHR1cmVcIjoxMTIsXCIuL1RleHR1cmVVdnNcIjoxMTcsXCIuL1ZpZGVvQmFzZVRleHR1cmVcIjoxMTgsZXZlbnRlbWl0dGVyMzozfV0sMTE2OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ci5fX2VzTW9kdWxlPSEwO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksbz10KFwiLi4vbWF0aC9NYXRyaXhcIikscz1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KG8pLGE9bmV3IHMuZGVmYXVsdCx1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLHIpe24odGhpcyx0KSx0aGlzLl90ZXh0dXJlPWUsdGhpcy5tYXBDb29yZD1uZXcgcy5kZWZhdWx0LHRoaXMudUNsYW1wRnJhbWU9bmV3IEZsb2F0MzJBcnJheSg0KSx0aGlzLnVDbGFtcE9mZnNldD1uZXcgRmxvYXQzMkFycmF5KDIpLHRoaXMuX2xhc3RUZXh0dXJlSUQ9LTEsdGhpcy5jbGFtcE9mZnNldD0wLHRoaXMuY2xhbXBNYXJnaW49dm9pZCAwPT09cj8uNTpyfXJldHVybiB0LnByb3RvdHlwZS5tdWx0aXBseVV2cz1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXQpO2Zvcih2YXIgcj10aGlzLm1hcENvb3JkLG49MDtuPHQubGVuZ3RoO24rPTIpe3ZhciBpPXRbbl0sbz10W24rMV07ZVtuXT1pKnIuYStvKnIuYytyLnR4LGVbbisxXT1pKnIuYitvKnIuZCtyLnR5fXJldHVybiBlfSx0LnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fdGV4dHVyZTtpZighZXx8IWUudmFsaWQpcmV0dXJuITE7aWYoIXQmJnRoaXMuX2xhc3RUZXh0dXJlSUQ9PT1lLl91cGRhdGVJRClyZXR1cm4hMTt0aGlzLl9sYXN0VGV4dHVyZUlEPWUuX3VwZGF0ZUlEO3ZhciByPWUuX3V2czt0aGlzLm1hcENvb3JkLnNldChyLngxLXIueDAsci55MS1yLnkwLHIueDMtci54MCxyLnkzLXIueTAsci54MCxyLnkwKTt2YXIgbj1lLm9yaWcsaT1lLnRyaW07aSYmKGEuc2V0KG4ud2lkdGgvaS53aWR0aCwwLDAsbi5oZWlnaHQvaS5oZWlnaHQsLWkueC9pLndpZHRoLC1pLnkvaS5oZWlnaHQpLHRoaXMubWFwQ29vcmQuYXBwZW5kKGEpKTt2YXIgbz1lLmJhc2VUZXh0dXJlLHM9dGhpcy51Q2xhbXBGcmFtZSx1PXRoaXMuY2xhbXBNYXJnaW4vby5yZXNvbHV0aW9uLGg9dGhpcy5jbGFtcE9mZnNldDtyZXR1cm4gc1swXT0oZS5fZnJhbWUueCt1K2gpL28ud2lkdGgsc1sxXT0oZS5fZnJhbWUueSt1K2gpL28uaGVpZ2h0LHNbMl09KGUuX2ZyYW1lLngrZS5fZnJhbWUud2lkdGgtdStoKS9vLndpZHRoLHNbM109KGUuX2ZyYW1lLnkrZS5fZnJhbWUuaGVpZ2h0LXUraCkvby5oZWlnaHQsdGhpcy51Q2xhbXBPZmZzZXRbMF09aC9vLnJlYWxXaWR0aCx0aGlzLnVDbGFtcE9mZnNldFsxXT1oL28ucmVhbEhlaWdodCwhMH0saSh0LFt7a2V5OlwidGV4dHVyZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90ZXh0dXJlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdGV4dHVyZT10LHRoaXMuX2xhc3RUZXh0dXJlSUQ9LTF9fV0pLHR9KCk7ci5kZWZhdWx0PXV9LHtcIi4uL21hdGgvTWF0cml4XCI6Njd9XSwxMTc6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1yLl9fZXNNb2R1bGU9ITA7dmFyIGk9dChcIi4uL21hdGgvR3JvdXBEOFwiKSxvPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0oaSkscz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtuKHRoaXMsdCksdGhpcy54MD0wLHRoaXMueTA9MCx0aGlzLngxPTEsdGhpcy55MT0wLHRoaXMueDI9MSx0aGlzLnkyPTEsdGhpcy54Mz0wLHRoaXMueTM9MSx0aGlzLnV2c1VpbnQzMj1uZXcgVWludDMyQXJyYXkoNCl9cmV0dXJuIHQucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LGUscil7dmFyIG49ZS53aWR0aCxpPWUuaGVpZ2h0O2lmKHIpe3ZhciBzPXQud2lkdGgvMi9uLGE9dC5oZWlnaHQvMi9pLHU9dC54L24rcyxoPXQueS9pK2E7cj1vLmRlZmF1bHQuYWRkKHIsby5kZWZhdWx0Lk5XKSx0aGlzLngwPXUrcypvLmRlZmF1bHQudVgociksdGhpcy55MD1oK2Eqby5kZWZhdWx0LnVZKHIpLHI9by5kZWZhdWx0LmFkZChyLDIpLHRoaXMueDE9dStzKm8uZGVmYXVsdC51WChyKSx0aGlzLnkxPWgrYSpvLmRlZmF1bHQudVkocikscj1vLmRlZmF1bHQuYWRkKHIsMiksdGhpcy54Mj11K3Mqby5kZWZhdWx0LnVYKHIpLHRoaXMueTI9aCthKm8uZGVmYXVsdC51WShyKSxyPW8uZGVmYXVsdC5hZGQociwyKSx0aGlzLngzPXUrcypvLmRlZmF1bHQudVgociksdGhpcy55Mz1oK2Eqby5kZWZhdWx0LnVZKHIpfWVsc2UgdGhpcy54MD10Lngvbix0aGlzLnkwPXQueS9pLHRoaXMueDE9KHQueCt0LndpZHRoKS9uLHRoaXMueTE9dC55L2ksdGhpcy54Mj0odC54K3Qud2lkdGgpL24sdGhpcy55Mj0odC55K3QuaGVpZ2h0KS9pLHRoaXMueDM9dC54L24sdGhpcy55Mz0odC55K3QuaGVpZ2h0KS9pO3RoaXMudXZzVWludDMyWzBdPSg2NTUzNSZNYXRoLnJvdW5kKDY1NTM1KnRoaXMueTApKTw8MTZ8NjU1MzUmTWF0aC5yb3VuZCg2NTUzNSp0aGlzLngwKSx0aGlzLnV2c1VpbnQzMlsxXT0oNjU1MzUmTWF0aC5yb3VuZCg2NTUzNSp0aGlzLnkxKSk8PDE2fDY1NTM1Jk1hdGgucm91bmQoNjU1MzUqdGhpcy54MSksdGhpcy51dnNVaW50MzJbMl09KDY1NTM1Jk1hdGgucm91bmQoNjU1MzUqdGhpcy55MikpPDwxNnw2NTUzNSZNYXRoLnJvdW5kKDY1NTM1KnRoaXMueDIpLHRoaXMudXZzVWludDMyWzNdPSg2NTUzNSZNYXRoLnJvdW5kKDY1NTM1KnRoaXMueTMpKTw8MTZ8NjU1MzUmTWF0aC5yb3VuZCg2NTUzNSp0aGlzLngzKX0sdH0oKTtyLmRlZmF1bHQ9c30se1wiLi4vbWF0aC9Hcm91cEQ4XCI6NjZ9XSwxMTg6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBpKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gcyh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfWZ1bmN0aW9uIGEodCxlKXtpZighZSl7dmFyIHI9dC5zcGxpdChcIj9cIikuc2hpZnQoKS50b0xvd2VyQ2FzZSgpO2U9XCJ2aWRlby9cIityLnN1YnN0cihyLmxhc3RJbmRleE9mKFwiLlwiKSsxKX12YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic291cmNlXCIpO3JldHVybiBuLnNyYz10LG4udHlwZT1lLG59ci5fX2VzTW9kdWxlPSEwO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksaD10KFwiLi9CYXNlVGV4dHVyZVwiKSxsPW4oaCksYz10KFwiLi4vdXRpbHNcIiksZD10KFwiLi4vdGlja2VyXCIpLGY9dChcIi4uL2NvbnN0XCIpLHA9dChcIi4uL3V0aWxzL2RldGVybWluZUNyb3NzT3JpZ2luXCIpLHY9bihwKSxnPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUocixuKXt2YXIgcz0hKGFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdKXx8YXJndW1lbnRzWzJdO2lmKGkodGhpcyxlKSwhcil0aHJvdyBuZXcgRXJyb3IoXCJObyB2aWRlbyBzb3VyY2UgZWxlbWVudCBzcGVjaWZpZWQuXCIpOyhyLnJlYWR5U3RhdGU9PT1yLkhBVkVfRU5PVUdIX0RBVEF8fHIucmVhZHlTdGF0ZT09PXIuSEFWRV9GVVRVUkVfREFUQSkmJnIud2lkdGgmJnIuaGVpZ2h0JiYoci5jb21wbGV0ZT0hMCk7dmFyIGE9byh0aGlzLHQuY2FsbCh0aGlzLHIsbikpO3JldHVybiBhLndpZHRoPXIudmlkZW9XaWR0aCxhLmhlaWdodD1yLnZpZGVvSGVpZ2h0LGEuX2F1dG9VcGRhdGU9ITAsYS5faXNBdXRvVXBkYXRpbmc9ITEsYS5hdXRvUGxheT1zLGEudXBkYXRlPWEudXBkYXRlLmJpbmQoYSksYS5fb25DYW5QbGF5PWEuX29uQ2FuUGxheS5iaW5kKGEpLHIuYWRkRXZlbnRMaXN0ZW5lcihcInBsYXlcIixhLl9vblBsYXlTdGFydC5iaW5kKGEpKSxyLmFkZEV2ZW50TGlzdGVuZXIoXCJwYXVzZVwiLGEuX29uUGxheVN0b3AuYmluZChhKSksYS5oYXNMb2FkZWQ9ITEsYS5fX2xvYWRlZD0hMSxhLl9pc1NvdXJjZVJlYWR5KCk/YS5fb25DYW5QbGF5KCk6KHIuYWRkRXZlbnRMaXN0ZW5lcihcImNhbnBsYXlcIixhLl9vbkNhblBsYXkpLHIuYWRkRXZlbnRMaXN0ZW5lcihcImNhbnBsYXl0aHJvdWdoXCIsYS5fb25DYW5QbGF5KSksYX1yZXR1cm4gcyhlLHQpLGUucHJvdG90eXBlLl9pc1NvdXJjZVBsYXlpbmc9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnNvdXJjZTtyZXR1cm4gdC5jdXJyZW50VGltZT4wJiYhMT09PXQucGF1c2VkJiYhMT09PXQuZW5kZWQmJnQucmVhZHlTdGF0ZT4yfSxlLnByb3RvdHlwZS5faXNTb3VyY2VSZWFkeT1mdW5jdGlvbigpe3JldHVybiAzPT09dGhpcy5zb3VyY2UucmVhZHlTdGF0ZXx8ND09PXRoaXMuc291cmNlLnJlYWR5U3RhdGV9LGUucHJvdG90eXBlLl9vblBsYXlTdGFydD1mdW5jdGlvbigpe3RoaXMuaGFzTG9hZGVkfHx0aGlzLl9vbkNhblBsYXkoKSwhdGhpcy5faXNBdXRvVXBkYXRpbmcmJnRoaXMuYXV0b1VwZGF0ZSYmKGQuc2hhcmVkLmFkZCh0aGlzLnVwZGF0ZSx0aGlzLGYuVVBEQVRFX1BSSU9SSVRZLkhJR0gpLHRoaXMuX2lzQXV0b1VwZGF0aW5nPSEwKX0sZS5wcm90b3R5cGUuX29uUGxheVN0b3A9ZnVuY3Rpb24oKXt0aGlzLl9pc0F1dG9VcGRhdGluZyYmKGQuc2hhcmVkLnJlbW92ZSh0aGlzLnVwZGF0ZSx0aGlzKSx0aGlzLl9pc0F1dG9VcGRhdGluZz0hMSl9LGUucHJvdG90eXBlLl9vbkNhblBsYXk9ZnVuY3Rpb24oKXt0aGlzLmhhc0xvYWRlZD0hMCx0aGlzLnNvdXJjZSYmKHRoaXMuc291cmNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjYW5wbGF5XCIsdGhpcy5fb25DYW5QbGF5KSx0aGlzLnNvdXJjZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2FucGxheXRocm91Z2hcIix0aGlzLl9vbkNhblBsYXkpLHRoaXMud2lkdGg9dGhpcy5zb3VyY2UudmlkZW9XaWR0aCx0aGlzLmhlaWdodD10aGlzLnNvdXJjZS52aWRlb0hlaWdodCx0aGlzLl9fbG9hZGVkfHwodGhpcy5fX2xvYWRlZD0hMCx0aGlzLmVtaXQoXCJsb2FkZWRcIix0aGlzKSksdGhpcy5faXNTb3VyY2VQbGF5aW5nKCk/dGhpcy5fb25QbGF5U3RhcnQoKTp0aGlzLmF1dG9QbGF5JiZ0aGlzLnNvdXJjZS5wbGF5KCkpfSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5faXNBdXRvVXBkYXRpbmcmJmQuc2hhcmVkLnJlbW92ZSh0aGlzLnVwZGF0ZSx0aGlzKSx0aGlzLnNvdXJjZSYmdGhpcy5zb3VyY2UuX3BpeGlJZCYmKGwuZGVmYXVsdC5yZW1vdmVGcm9tQ2FjaGUodGhpcy5zb3VyY2UuX3BpeGlJZCksZGVsZXRlIHRoaXMuc291cmNlLl9waXhpSWQsdGhpcy5zb3VyY2UucGF1c2UoKSx0aGlzLnNvdXJjZS5zcmM9XCJcIix0aGlzLnNvdXJjZS5sb2FkKCkpLHQucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKX0sZS5mcm9tVmlkZW89ZnVuY3Rpb24odCxyLG4pe3QuX3BpeGlJZHx8KHQuX3BpeGlJZD1cInZpZGVvX1wiKygwLGMudWlkKSgpKTt2YXIgaT1jLkJhc2VUZXh0dXJlQ2FjaGVbdC5fcGl4aUlkXTtyZXR1cm4gaXx8KGk9bmV3IGUodCxyLG4pLGwuZGVmYXVsdC5hZGRUb0NhY2hlKGksdC5fcGl4aUlkKSksaX0sZS5mcm9tVXJsPWZ1bmN0aW9uKHQscixuLGkpe3ZhciBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiKTtvLnNldEF0dHJpYnV0ZShcIndlYmtpdC1wbGF5c2lubGluZVwiLFwiXCIpLG8uc2V0QXR0cmlidXRlKFwicGxheXNpbmxpbmVcIixcIlwiKTt2YXIgcz1BcnJheS5pc0FycmF5KHQpP3RbMF0uc3JjfHx0WzBdOnQuc3JjfHx0O2lmKHZvaWQgMD09PW4mJjAhPT1zLmluZGV4T2YoXCJkYXRhOlwiKT9vLmNyb3NzT3JpZ2luPSgwLHYuZGVmYXVsdCkocyk6biYmKG8uY3Jvc3NPcmlnaW49XCJzdHJpbmdcIj09dHlwZW9mIG4/bjpcImFub255bW91c1wiKSxBcnJheS5pc0FycmF5KHQpKWZvcih2YXIgdT0wO3U8dC5sZW5ndGg7Kyt1KW8uYXBwZW5kQ2hpbGQoYSh0W3VdLnNyY3x8dFt1XSx0W3VdLm1pbWUpKTtlbHNlIG8uYXBwZW5kQ2hpbGQoYShzLHQubWltZSkpO3JldHVybiBvLmxvYWQoKSxlLmZyb21WaWRlbyhvLHIsaSl9LHUoZSxbe2tleTpcImF1dG9VcGRhdGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXV0b1VwZGF0ZX0sc2V0OmZ1bmN0aW9uKHQpe3QhPT10aGlzLl9hdXRvVXBkYXRlJiYodGhpcy5fYXV0b1VwZGF0ZT10LCF0aGlzLl9hdXRvVXBkYXRlJiZ0aGlzLl9pc0F1dG9VcGRhdGluZz8oZC5zaGFyZWQucmVtb3ZlKHRoaXMudXBkYXRlLHRoaXMpLHRoaXMuX2lzQXV0b1VwZGF0aW5nPSExKTp0aGlzLl9hdXRvVXBkYXRlJiYhdGhpcy5faXNBdXRvVXBkYXRpbmcmJihkLnNoYXJlZC5hZGQodGhpcy51cGRhdGUsdGhpcyxmLlVQREFURV9QUklPUklUWS5ISUdIKSx0aGlzLl9pc0F1dG9VcGRhdGluZz0hMCkpfX1dKSxlfShsLmRlZmF1bHQpO3IuZGVmYXVsdD1nLGcuZnJvbVVybHM9Zy5mcm9tVXJsfSx7XCIuLi9jb25zdFwiOjQ2LFwiLi4vdGlja2VyXCI6MTIxLFwiLi4vdXRpbHNcIjoxMjUsXCIuLi91dGlscy9kZXRlcm1pbmVDcm9zc09yaWdpblwiOjEyNCxcIi4vQmFzZVRleHR1cmVcIjoxMTJ9XSwxMTk6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBpKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBuPWVbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSxyLG4pe3JldHVybiByJiZ0KGUucHJvdG90eXBlLHIpLG4mJnQoZSxuKSxlfX0oKSxzPXQoXCIuLi9zZXR0aW5nc1wiKSxhPW4ocyksdT10KFwiLi4vY29uc3RcIiksaD10KFwiLi9UaWNrZXJMaXN0ZW5lclwiKSxsPW4oaCksYz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt2YXIgZT10aGlzO2kodGhpcyx0KSx0aGlzLl9oZWFkPW5ldyBsLmRlZmF1bHQobnVsbCxudWxsLDEvMCksdGhpcy5fcmVxdWVzdElkPW51bGwsdGhpcy5fbWF4RWxhcHNlZE1TPTEwMCx0aGlzLmF1dG9TdGFydD0hMSx0aGlzLmRlbHRhVGltZT0xLHRoaXMuZWxhcHNlZE1TPTEvYS5kZWZhdWx0LlRBUkdFVF9GUE1TLHRoaXMubGFzdFRpbWU9LTEsdGhpcy5zcGVlZD0xLHRoaXMuc3RhcnRlZD0hMSx0aGlzLl90aWNrPWZ1bmN0aW9uKHQpe2UuX3JlcXVlc3RJZD1udWxsLGUuc3RhcnRlZCYmKGUudXBkYXRlKHQpLGUuc3RhcnRlZCYmbnVsbD09PWUuX3JlcXVlc3RJZCYmZS5faGVhZC5uZXh0JiYoZS5fcmVxdWVzdElkPXJlcXVlc3RBbmltYXRpb25GcmFtZShlLl90aWNrKSkpfX1yZXR1cm4gdC5wcm90b3R5cGUuX3JlcXVlc3RJZk5lZWRlZD1mdW5jdGlvbigpe251bGw9PT10aGlzLl9yZXF1ZXN0SWQmJnRoaXMuX2hlYWQubmV4dCYmKHRoaXMubGFzdFRpbWU9cGVyZm9ybWFuY2Uubm93KCksdGhpcy5fcmVxdWVzdElkPXJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLl90aWNrKSl9LHQucHJvdG90eXBlLl9jYW5jZWxJZk5lZWRlZD1mdW5jdGlvbigpe251bGwhPT10aGlzLl9yZXF1ZXN0SWQmJihjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9yZXF1ZXN0SWQpLHRoaXMuX3JlcXVlc3RJZD1udWxsKX0sdC5wcm90b3R5cGUuX3N0YXJ0SWZQb3NzaWJsZT1mdW5jdGlvbigpe3RoaXMuc3RhcnRlZD90aGlzLl9yZXF1ZXN0SWZOZWVkZWQoKTp0aGlzLmF1dG9TdGFydCYmdGhpcy5zdGFydCgpfSx0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCxlKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06dS5VUERBVEVfUFJJT1JJVFkuTk9STUFMO3JldHVybiB0aGlzLl9hZGRMaXN0ZW5lcihuZXcgbC5kZWZhdWx0KHQsZSxyKSl9LHQucHJvdG90eXBlLmFkZE9uY2U9ZnVuY3Rpb24odCxlKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06dS5VUERBVEVfUFJJT1JJVFkuTk9STUFMO3JldHVybiB0aGlzLl9hZGRMaXN0ZW5lcihuZXcgbC5kZWZhdWx0KHQsZSxyLCEwKSl9LHQucHJvdG90eXBlLl9hZGRMaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9oZWFkLm5leHQscj10aGlzLl9oZWFkO2lmKGUpe2Zvcig7ZTspe2lmKHQucHJpb3JpdHk+ZS5wcmlvcml0eSl7dC5jb25uZWN0KHIpO2JyZWFrfXI9ZSxlPWUubmV4dH10LnByZXZpb3VzfHx0LmNvbm5lY3Qocil9ZWxzZSB0LmNvbm5lY3Qocik7cmV0dXJuIHRoaXMuX3N0YXJ0SWZQb3NzaWJsZSgpLHRoaXN9LHQucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgcj10aGlzLl9oZWFkLm5leHQ7cjspcj1yLm1hdGNoKHQsZSk/ci5kZXN0cm95KCk6ci5uZXh0O3JldHVybiB0aGlzLl9oZWFkLm5leHR8fHRoaXMuX2NhbmNlbElmTmVlZGVkKCksdGhpc30sdC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLnN0YXJ0ZWR8fCh0aGlzLnN0YXJ0ZWQ9ITAsdGhpcy5fcmVxdWVzdElmTmVlZGVkKCkpfSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5zdGFydGVkJiYodGhpcy5zdGFydGVkPSExLHRoaXMuX2NhbmNlbElmTmVlZGVkKCkpfSx0LnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5zdG9wKCk7Zm9yKHZhciB0PXRoaXMuX2hlYWQubmV4dDt0Oyl0PXQuZGVzdHJveSghMCk7dGhpcy5faGVhZC5kZXN0cm95KCksdGhpcy5faGVhZD1udWxsfSx0LnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06cGVyZm9ybWFuY2Uubm93KCksZT12b2lkIDA7aWYodD50aGlzLmxhc3RUaW1lKXtlPXRoaXMuZWxhcHNlZE1TPXQtdGhpcy5sYXN0VGltZSxlPnRoaXMuX21heEVsYXBzZWRNUyYmKGU9dGhpcy5fbWF4RWxhcHNlZE1TKSx0aGlzLmRlbHRhVGltZT1lKmEuZGVmYXVsdC5UQVJHRVRfRlBNUyp0aGlzLnNwZWVkO2Zvcih2YXIgcj10aGlzLl9oZWFkLG49ci5uZXh0O247KW49bi5lbWl0KHRoaXMuZGVsdGFUaW1lKTtyLm5leHR8fHRoaXMuX2NhbmNlbElmTmVlZGVkKCl9ZWxzZSB0aGlzLmRlbHRhVGltZT10aGlzLmVsYXBzZWRNUz0wO3RoaXMubGFzdFRpbWU9dH0sbyh0LFt7a2V5OlwiRlBTXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDFlMy90aGlzLmVsYXBzZWRNU319LHtrZXk6XCJtaW5GUFNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMWUzL3RoaXMuX21heEVsYXBzZWRNU30sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPU1hdGgubWluKE1hdGgubWF4KDAsdCkvMWUzLGEuZGVmYXVsdC5UQVJHRVRfRlBNUyk7dGhpcy5fbWF4RWxhcHNlZE1TPTEvZX19XSksdH0oKTtyLmRlZmF1bHQ9Y30se1wiLi4vY29uc3RcIjo0NixcIi4uL3NldHRpbmdzXCI6MTAxLFwiLi9UaWNrZXJMaXN0ZW5lclwiOjEyMH1dLDEyMDpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfXIuX19lc01vZHVsZT0hMDt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOm51bGwsaT1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06MCxvPWFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdJiZhcmd1bWVudHNbM107bih0aGlzLHQpLHRoaXMuZm49ZSx0aGlzLmNvbnRleHQ9cix0aGlzLnByaW9yaXR5PWksdGhpcy5vbmNlPW8sdGhpcy5uZXh0PW51bGwsdGhpcy5wcmV2aW91cz1udWxsLHRoaXMuX2Rlc3Ryb3llZD0hMX1yZXR1cm4gdC5wcm90b3R5cGUubWF0Y2g9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZT1lfHxudWxsLHRoaXMuZm49PT10JiZ0aGlzLmNvbnRleHQ9PT1lfSx0LnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKHQpe3RoaXMuZm4mJih0aGlzLmNvbnRleHQ/dGhpcy5mbi5jYWxsKHRoaXMuY29udGV4dCx0KTp0aGlzLmZuKHQpKTt2YXIgZT10aGlzLm5leHQ7cmV0dXJuIHRoaXMub25jZSYmdGhpcy5kZXN0cm95KCEwKSx0aGlzLl9kZXN0cm95ZWQmJih0aGlzLm5leHQ9bnVsbCksZX0sdC5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbih0KXt0aGlzLnByZXZpb3VzPXQsdC5uZXh0JiYodC5uZXh0LnByZXZpb3VzPXRoaXMpLHRoaXMubmV4dD10Lm5leHQsdC5uZXh0PXRoaXN9LHQucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSYmYXJndW1lbnRzWzBdO3RoaXMuX2Rlc3Ryb3llZD0hMCx0aGlzLmZuPW51bGwsdGhpcy5jb250ZXh0PW51bGwsdGhpcy5wcmV2aW91cyYmKHRoaXMucHJldmlvdXMubmV4dD10aGlzLm5leHQpLHRoaXMubmV4dCYmKHRoaXMubmV4dC5wcmV2aW91cz10aGlzLnByZXZpb3VzKTt2YXIgZT10aGlzLm5leHQ7cmV0dXJuIHRoaXMubmV4dD10P251bGw6ZSx0aGlzLnByZXZpb3VzPW51bGwsZX0sdH0oKTtyLmRlZmF1bHQ9aX0se31dLDEyMTpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO3IuX19lc01vZHVsZT0hMCxyLlRpY2tlcj1yLnNoYXJlZD12b2lkIDA7dmFyIG49dChcIi4vVGlja2VyXCIpLGk9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShuKSxvPW5ldyBpLmRlZmF1bHQ7by5hdXRvU3RhcnQ9ITAsby5kZXN0cm95PWZ1bmN0aW9uKCl7fSxyLnNoYXJlZD1vLHIuVGlja2VyPWkuZGVmYXVsdH0se1wiLi9UaWNrZXJcIjoxMTl9XSwxMjI6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKCl7cmV0dXJuISghIW5hdmlnYXRvci5wbGF0Zm9ybSYmL2lQYWR8aVBob25lfGlQb2QvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKSl9ci5fX2VzTW9kdWxlPSEwLHIuZGVmYXVsdD1ufSx7fV0sMTIzOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtmb3IodmFyIGU9Nip0LHI9bmV3IFVpbnQxNkFycmF5KGUpLG49MCxpPTA7bjxlO24rPTYsaSs9NClyW24rMF09aSswLHJbbisxXT1pKzEscltuKzJdPWkrMixyW24rM109aSswLHJbbis0XT1pKzIscltuKzVdPWkrMztyZXR1cm4gcn1yLl9fZXNNb2R1bGU9ITAsci5kZWZhdWx0PW59LHt9XSwxMjQ6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp3aW5kb3cubG9jYXRpb247aWYoMD09PXQuaW5kZXhPZihcImRhdGE6XCIpKXJldHVyblwiXCI7ZT1lfHx3aW5kb3cubG9jYXRpb24sc3x8KHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIikpLHMuaHJlZj10LHQ9by5kZWZhdWx0LnBhcnNlKHMuaHJlZik7dmFyIHI9IXQucG9ydCYmXCJcIj09PWUucG9ydHx8dC5wb3J0PT09ZS5wb3J0O3JldHVybiB0Lmhvc3RuYW1lPT09ZS5ob3N0bmFtZSYmciYmdC5wcm90b2NvbD09PWUucHJvdG9jb2w/XCJcIjpcImFub255bW91c1wifXIuX19lc01vZHVsZT0hMCxyLmRlZmF1bHQ9bjt2YXIgaT10KFwidXJsXCIpLG89ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShpKSxzPXZvaWQgMH0se3VybDozOH1dLDEyNTpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfWZ1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIG8oKXtyZXR1cm4rK1V9ZnVuY3Rpb24gcyh0LGUpe3JldHVybiBlPWV8fFtdLGVbMF09KHQ+PjE2JjI1NSkvMjU1LGVbMV09KHQ+PjgmMjU1KS8yNTUsZVsyXT0oMjU1JnQpLzI1NSxlfWZ1bmN0aW9uIGEodCl7cmV0dXJuIHQ9dC50b1N0cmluZygxNiksXCIjXCIrKHQ9XCIwMDAwMDBcIi5zdWJzdHIoMCw2LXQubGVuZ3RoKSt0KX1mdW5jdGlvbiB1KHQpe3JldHVybigyNTUqdFswXTw8MTYpKygyNTUqdFsxXTw8OCkrKDI1NSp0WzJdfDApfWZ1bmN0aW9uIGgodCxlKXt2YXIgcj1TLmRlZmF1bHQuUkVUSU5BX1BSRUZJWC5leGVjKHQpO3JldHVybiByP3BhcnNlRmxvYXQoclsxXSk6dm9pZCAwIT09ZT9lOjF9ZnVuY3Rpb24gbCh0KXt2YXIgZT13LkRBVEFfVVJJLmV4ZWModCk7aWYoZSlyZXR1cm57bWVkaWFUeXBlOmVbMV0/ZVsxXS50b0xvd2VyQ2FzZSgpOnZvaWQgMCxzdWJUeXBlOmVbMl0/ZVsyXS50b0xvd2VyQ2FzZSgpOnZvaWQgMCxjaGFyc2V0OmVbM10/ZVszXS50b0xvd2VyQ2FzZSgpOnZvaWQgMCxlbmNvZGluZzplWzRdP2VbNF0udG9Mb3dlckNhc2UoKTp2b2lkIDAsZGF0YTplWzVdfX1mdW5jdGlvbiBjKHQpe3ZhciBlPXcuVVJMX0ZJTEVfRVhURU5TSU9OLmV4ZWModCk7aWYoZSlyZXR1cm4gZVsxXS50b0xvd2VyQ2FzZSgpfWZ1bmN0aW9uIGQodCl7dmFyIGU9dy5TVkdfU0laRS5leGVjKHQpLHI9e307cmV0dXJuIGUmJihyW2VbMV1dPU1hdGgucm91bmQocGFyc2VGbG9hdChlWzNdKSkscltlWzVdXT1NYXRoLnJvdW5kKHBhcnNlRmxvYXQoZVs3XSkpKSxyfWZ1bmN0aW9uIGYoKXtYPSEwfWZ1bmN0aW9uIHAodCl7aWYoIVgpe2lmKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiY2hyb21lXCIpPi0xKXt2YXIgZT1bXCJcXG4gJWMgJWMgJWMgUGl4aUpTIFwiK3cuVkVSU0lPTitcIiAtIOKcsCBcIit0K1wiIOKcsCAgJWMgICVjICBodHRwOi8vd3d3LnBpeGlqcy5jb20vICAlYyAlYyDimaUlY+KZpSVj4pmlIFxcblxcblwiLFwiYmFja2dyb3VuZDogI2ZmNjZhNTsgcGFkZGluZzo1cHggMDtcIixcImJhY2tncm91bmQ6ICNmZjY2YTU7IHBhZGRpbmc6NXB4IDA7XCIsXCJjb2xvcjogI2ZmNjZhNTsgYmFja2dyb3VuZDogIzAzMDMwNzsgcGFkZGluZzo1cHggMDtcIixcImJhY2tncm91bmQ6ICNmZjY2YTU7IHBhZGRpbmc6NXB4IDA7XCIsXCJiYWNrZ3JvdW5kOiAjZmZjM2RjOyBwYWRkaW5nOjVweCAwO1wiLFwiYmFja2dyb3VuZDogI2ZmNjZhNTsgcGFkZGluZzo1cHggMDtcIixcImNvbG9yOiAjZmYyNDI0OyBiYWNrZ3JvdW5kOiAjZmZmOyBwYWRkaW5nOjVweCAwO1wiLFwiY29sb3I6ICNmZjI0MjQ7IGJhY2tncm91bmQ6ICNmZmY7IHBhZGRpbmc6NXB4IDA7XCIsXCJjb2xvcjogI2ZmMjQyNDsgYmFja2dyb3VuZDogI2ZmZjsgcGFkZGluZzo1cHggMDtcIl07d2luZG93LmNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsZSl9ZWxzZSB3aW5kb3cuY29uc29sZSYmd2luZG93LmNvbnNvbGUubG9nKFwiUGl4aUpTIFwiK3cuVkVSU0lPTitcIiAtIFwiK3QrXCIgLSBodHRwOi8vd3d3LnBpeGlqcy5jb20vXCIpO1g9ITB9fWZ1bmN0aW9uIHYoKXt2YXIgdD17c3RlbmNpbDohMCxmYWlsSWZNYWpvclBlcmZvcm1hbmNlQ2F2ZWF0OiEwfTt0cnl7aWYoIXdpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQpcmV0dXJuITE7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxyPWUuZ2V0Q29udGV4dChcIndlYmdsXCIsdCl8fGUuZ2V0Q29udGV4dChcImV4cGVyaW1lbnRhbC13ZWJnbFwiLHQpLG49ISghcnx8IXIuZ2V0Q29udGV4dEF0dHJpYnV0ZXMoKS5zdGVuY2lsKTtpZihyKXt2YXIgaT1yLmdldEV4dGVuc2lvbihcIldFQkdMX2xvc2VfY29udGV4dFwiKTtpJiZpLmxvc2VDb250ZXh0KCl9cmV0dXJuIHI9bnVsbCxufWNhdGNoKHQpe3JldHVybiExfX1mdW5jdGlvbiBnKHQpe3JldHVybiAwPT09dD8wOnQ8MD8tMToxfWZ1bmN0aW9uIHkoKXt2YXIgdD12b2lkIDA7Zm9yKHQgaW4gRylHW3RdLmRlc3Ryb3koKTtmb3IodCBpbiBXKVdbdF0uZGVzdHJveSgpfWZ1bmN0aW9uIG0oKXt2YXIgdD12b2lkIDA7Zm9yKHQgaW4gRylkZWxldGUgR1t0XTtmb3IodCBpbiBXKWRlbGV0ZSBXW3RdfWZ1bmN0aW9uIF8odCxlKXtyZXR1cm4gSFtlPzE6MF1bdF19ZnVuY3Rpb24gYih0LGUpe2lmKDE9PT1lKXJldHVybigyNTUqZTw8MjQpK3Q7aWYoMD09PWUpcmV0dXJuIDA7dmFyIHI9dD4+MTYmMjU1LG49dD4+OCYyNTUsaT0yNTUmdDtyZXR1cm4gcj1yKmUrLjV8MCxuPW4qZSsuNXwwLGk9aSplKy41fDAsKDI1NSplPDwyNCkrKHI8PDE2KSsobjw8OCkraX1mdW5jdGlvbiB4KHQsZSxyLG4pe3JldHVybiByPXJ8fG5ldyBGbG9hdDMyQXJyYXkoNCksbnx8dm9pZCAwPT09bj8oclswXT10WzBdKmUsclsxXT10WzFdKmUsclsyXT10WzJdKmUpOihyWzBdPXRbMF0sclsxXT10WzFdLHJbMl09dFsyXSksclszXT1lLHJ9ZnVuY3Rpb24gVCh0LGUscixuKXtyZXR1cm4gcj1yfHxuZXcgRmxvYXQzMkFycmF5KDQpLHJbMF09KHQ+PjE2JjI1NSkvMjU1LHJbMV09KHQ+PjgmMjU1KS8yNTUsclsyXT0oMjU1JnQpLzI1NSwobnx8dm9pZCAwPT09bikmJihyWzBdKj1lLHJbMV0qPWUsclsyXSo9ZSksclszXT1lLHJ9ci5fX2VzTW9kdWxlPSEwLHIucHJlbXVsdGlwbHlCbGVuZE1vZGU9ci5CYXNlVGV4dHVyZUNhY2hlPXIuVGV4dHVyZUNhY2hlPXIuZWFyY3V0PXIubWl4aW5zPXIucGx1Z2luVGFyZ2V0PXIuRXZlbnRFbWl0dGVyPXIucmVtb3ZlSXRlbXM9ci5pc01vYmlsZT12b2lkIDAsci51aWQ9byxyLmhleDJyZ2I9cyxyLmhleDJzdHJpbmc9YSxyLnJnYjJoZXg9dSxyLmdldFJlc29sdXRpb25PZlVybD1oLHIuZGVjb21wb3NlRGF0YVVyaT1sLHIuZ2V0VXJsRmlsZUV4dGVuc2lvbj1jLHIuZ2V0U3ZnU2l6ZT1kLHIuc2tpcEhlbGxvPWYsci5zYXlIZWxsbz1wLHIuaXNXZWJHTFN1cHBvcnRlZD12LHIuc2lnbj1nLHIuZGVzdHJveVRleHR1cmVDYWNoZT15LHIuY2xlYXJUZXh0dXJlQ2FjaGU9bSxyLmNvcnJlY3RCbGVuZE1vZGU9XyxyLnByZW11bHRpcGx5VGludD1iLHIucHJlbXVsdGlwbHlSZ2JhPXgsci5wcmVtdWx0aXBseVRpbnRUb1JnYmE9VDt2YXIgdz10KFwiLi4vY29uc3RcIiksRT10KFwiLi4vc2V0dGluZ3NcIiksUz1pKEUpLE89dChcImV2ZW50ZW1pdHRlcjNcIiksTT1pKE8pLFA9dChcIi4vcGx1Z2luVGFyZ2V0XCIpLEM9aShQKSxSPXQoXCIuL21peGluXCIpLEE9bihSKSxJPXQoXCJpc21vYmlsZWpzXCIpLEQ9bihJKSxMPXQoXCJyZW1vdmUtYXJyYXktaXRlbXNcIiksTj1pKEwpLEI9dChcIi4vbWFwUHJlbXVsdGlwbGllZEJsZW5kTW9kZXNcIiksaz1pKEIpLEY9dChcImVhcmN1dFwiKSxqPWkoRiksVT0wLFg9ITE7ci5pc01vYmlsZT1ELHIucmVtb3ZlSXRlbXM9Ti5kZWZhdWx0LHIuRXZlbnRFbWl0dGVyPU0uZGVmYXVsdCxyLnBsdWdpblRhcmdldD1DLmRlZmF1bHQsci5taXhpbnM9QSxyLmVhcmN1dD1qLmRlZmF1bHQ7dmFyIEc9ci5UZXh0dXJlQ2FjaGU9T2JqZWN0LmNyZWF0ZShudWxsKSxXPXIuQmFzZVRleHR1cmVDYWNoZT1PYmplY3QuY3JlYXRlKG51bGwpLEg9ci5wcmVtdWx0aXBseUJsZW5kTW9kZT0oMCxrLmRlZmF1bHQpKCl9LHtcIi4uL2NvbnN0XCI6NDYsXCIuLi9zZXR0aW5nc1wiOjEwMSxcIi4vbWFwUHJlbXVsdGlwbGllZEJsZW5kTW9kZXNcIjoxMjYsXCIuL21peGluXCI6MTI4LFwiLi9wbHVnaW5UYXJnZXRcIjoxMjksZWFyY3V0OjIsZXZlbnRlbWl0dGVyMzozLGlzbW9iaWxlanM6NCxcInJlbW92ZS1hcnJheS1pdGVtc1wiOjMxfV0sMTI2OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbigpe2Zvcih2YXIgdD1bXSxlPVtdLHI9MDtyPDMyO3IrKyl0W3JdPXIsZVtyXT1yO3RbaS5CTEVORF9NT0RFUy5OT1JNQUxfTlBNXT1pLkJMRU5EX01PREVTLk5PUk1BTCx0W2kuQkxFTkRfTU9ERVMuQUREX05QTV09aS5CTEVORF9NT0RFUy5BREQsdFtpLkJMRU5EX01PREVTLlNDUkVFTl9OUE1dPWkuQkxFTkRfTU9ERVMuU0NSRUVOLGVbaS5CTEVORF9NT0RFUy5OT1JNQUxdPWkuQkxFTkRfTU9ERVMuTk9STUFMX05QTSxlW2kuQkxFTkRfTU9ERVMuQUREXT1pLkJMRU5EX01PREVTLkFERF9OUE0sZVtpLkJMRU5EX01PREVTLlNDUkVFTl09aS5CTEVORF9NT0RFUy5TQ1JFRU5fTlBNO3ZhciBuPVtdO3JldHVybiBuLnB1c2goZSksbi5wdXNoKHQpLG59ci5fX2VzTW9kdWxlPSEwLHIuZGVmYXVsdD1uO3ZhciBpPXQoXCIuLi9jb25zdFwiKX0se1wiLi4vY29uc3RcIjo0Nn1dLDEyNzpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCl7cmV0dXJuIG8uZGVmYXVsdC50YWJsZXR8fG8uZGVmYXVsdC5waG9uZT80OnR9ci5fX2VzTW9kdWxlPSEwLHIuZGVmYXVsdD1uO3ZhciBpPXQoXCJpc21vYmlsZWpzXCIpLG89ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShpKX0se2lzbW9iaWxlanM6NH1dLDEyODpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZih0JiZlKWZvcih2YXIgcj1PYmplY3Qua2V5cyhlKSxuPTA7bjxyLmxlbmd0aDsrK24pe3ZhciBpPXJbbl07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsaSkpfX1mdW5jdGlvbiBpKHQsZSl7cy5wdXNoKHQsZSl9ZnVuY3Rpb24gbygpe2Zvcih2YXIgdD0wO3Q8cy5sZW5ndGg7dCs9MiluKHNbdF0sc1t0KzFdKTtzLmxlbmd0aD0wfXIuX19lc01vZHVsZT0hMCxyLm1peGluPW4sci5kZWxheU1peGluPWksci5wZXJmb3JtTWl4aW5zPW87dmFyIHM9W119LHt9XSwxMjk6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe3QuX19wbHVnaW5zPXt9LHQucmVnaXN0ZXJQbHVnaW49ZnVuY3Rpb24oZSxyKXt0Ll9fcGx1Z2luc1tlXT1yfSx0LnByb3RvdHlwZS5pbml0UGx1Z2lucz1mdW5jdGlvbigpe3RoaXMucGx1Z2lucz10aGlzLnBsdWdpbnN8fHt9O2Zvcih2YXIgZSBpbiB0Ll9fcGx1Z2lucyl0aGlzLnBsdWdpbnNbZV09bmV3IHQuX19wbHVnaW5zW2VdKHRoaXMpfSx0LnByb3RvdHlwZS5kZXN0cm95UGx1Z2lucz1mdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLnBsdWdpbnMpdGhpcy5wbHVnaW5zW3RdLmRlc3Ryb3koKSx0aGlzLnBsdWdpbnNbdF09bnVsbDt0aGlzLnBsdWdpbnM9bnVsbH19ci5fX2VzTW9kdWxlPSEwLHIuZGVmYXVsdD17bWl4aW46ZnVuY3Rpb24odCl7bih0KX19fSx7fV0sMTMwOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXt2YXIgZT10LndpZHRoLHI9dC5oZWlnaHQsbj10LmdldENvbnRleHQoXCIyZFwiKSxpPW4uZ2V0SW1hZ2VEYXRhKDAsMCxlLHIpLG89aS5kYXRhLHM9by5sZW5ndGgsYT17dG9wOm51bGwsbGVmdDpudWxsLHJpZ2h0Om51bGwsYm90dG9tOm51bGx9LHU9bnVsbCxoPXZvaWQgMCxsPXZvaWQgMCxjPXZvaWQgMDtmb3IoaD0wO2g8cztoKz00KTAhPT1vW2grM10mJihsPWgvNCVlLGM9fn4oaC80L2UpLG51bGw9PT1hLnRvcCYmKGEudG9wPWMpLG51bGw9PT1hLmxlZnQ/YS5sZWZ0PWw6bDxhLmxlZnQmJihhLmxlZnQ9bCksbnVsbD09PWEucmlnaHQ/YS5yaWdodD1sKzE6YS5yaWdodDxsJiYoYS5yaWdodD1sKzEpLG51bGw9PT1hLmJvdHRvbT9hLmJvdHRvbT1jOmEuYm90dG9tPGMmJihhLmJvdHRvbT1jKSk7cmV0dXJuIG51bGwhPT1hLnRvcCYmKGU9YS5yaWdodC1hLmxlZnQscj1hLmJvdHRvbS1hLnRvcCsxLHU9bi5nZXRJbWFnZURhdGEoYS5sZWZ0LGEudG9wLGUscikpLHtoZWlnaHQ6cix3aWR0aDplLGRhdGE6dX19ci5fX2VzTW9kdWxlPSEwLHIuZGVmYXVsdD1ufSx7fV0sMTMxOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtpZighb1t0XSl7dmFyIGU9KG5ldyBFcnJvcikuc3RhY2s7dm9pZCAwPT09ZT9jb25zb2xlLndhcm4oXCJEZXByZWNhdGlvbiBXYXJuaW5nOiBcIix0KTooZT1lLnNwbGl0KFwiXFxuXCIpLnNwbGljZSgzKS5qb2luKFwiXFxuXCIpLGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQ/KGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQoXCIlY0RlcHJlY2F0aW9uIFdhcm5pbmc6ICVjJXNcIixcImNvbG9yOiM2MTQxMDg7YmFja2dyb3VuZDojZmZmYmU2XCIsXCJmb250LXdlaWdodDpub3JtYWw7Y29sb3I6IzYxNDEwODtiYWNrZ3JvdW5kOiNmZmZiZTZcIix0KSxjb25zb2xlLndhcm4oZSksY29uc29sZS5ncm91cEVuZCgpKTooY29uc29sZS53YXJuKFwiRGVwcmVjYXRpb24gV2FybmluZzogXCIsdCksY29uc29sZS53YXJuKGUpKSksb1t0XT0hMH19ZnVuY3Rpb24gaSh0KXt2YXIgZT10Lm1lc2gscj10LnBhcnRpY2xlcyxpPXQuZXh0cmFzLG89dC5maWx0ZXJzLHM9dC5wcmVwYXJlLGE9dC5sb2FkZXJzLHU9dC5pbnRlcmFjdGlvbjtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0LHtTcHJpdGVCYXRjaDp7Z2V0OmZ1bmN0aW9uKCl7dGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwiU3ByaXRlQmF0Y2ggZG9lcyBub3QgZXhpc3QgYW55IG1vcmUsIHBsZWFzZSB1c2UgdGhlIG5ldyBQYXJ0aWNsZUNvbnRhaW5lciBpbnN0ZWFkLlwiKX19LEFzc2V0TG9hZGVyOntnZXQ6ZnVuY3Rpb24oKXt0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJUaGUgbG9hZGVyIHN5c3RlbSB3YXMgb3ZlcmhhdWxlZCBpbiBQaXhpSlMgdjMsIHBsZWFzZSBzZWUgdGhlIG5ldyBQSVhJLmxvYWRlcnMuTG9hZGVyIGNsYXNzLlwiKX19LFN0YWdlOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihcIllvdSBkbyBub3QgbmVlZCB0byB1c2UgYSBQSVhJIFN0YWdlIGFueSBtb3JlLCB5b3UgY2FuIHNpbXBseSByZW5kZXIgYW55IGNvbnRhaW5lci5cIiksdC5Db250YWluZXJ9fSxEaXNwbGF5T2JqZWN0Q29udGFpbmVyOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihcIkRpc3BsYXlPYmplY3RDb250YWluZXIgaGFzIGJlZW4gc2hvcnRlbmVkIHRvIENvbnRhaW5lciwgcGxlYXNlIHVzZSBDb250YWluZXIgZnJvbSBub3cgb24uXCIpLHQuQ29udGFpbmVyfX0sU3RyaXA6e2dldDpmdW5jdGlvbigpe1xucmV0dXJuIG4oXCJUaGUgU3RyaXAgY2xhc3MgaGFzIGJlZW4gcmVuYW1lZCB0byBNZXNoIGFuZCBtb3ZlZCB0byBtZXNoLk1lc2gsIHBsZWFzZSB1c2UgbWVzaC5NZXNoIGZyb20gbm93IG9uLlwiKSxlLk1lc2h9fSxSb3BlOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihcIlRoZSBSb3BlIGNsYXNzIGhhcyBiZWVuIG1vdmVkIHRvIG1lc2guUm9wZSwgcGxlYXNlIHVzZSBtZXNoLlJvcGUgZnJvbSBub3cgb24uXCIpLGUuUm9wZX19LFBhcnRpY2xlQ29udGFpbmVyOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihcIlRoZSBQYXJ0aWNsZUNvbnRhaW5lciBjbGFzcyBoYXMgYmVlbiBtb3ZlZCB0byBwYXJ0aWNsZXMuUGFydGljbGVDb250YWluZXIsIHBsZWFzZSB1c2UgcGFydGljbGVzLlBhcnRpY2xlQ29udGFpbmVyIGZyb20gbm93IG9uLlwiKSxyLlBhcnRpY2xlQ29udGFpbmVyfX0sTW92aWVDbGlwOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihcIlRoZSBNb3ZpZUNsaXAgY2xhc3MgaGFzIGJlZW4gbW92ZWQgdG8gZXh0cmFzLkFuaW1hdGVkU3ByaXRlLCBwbGVhc2UgdXNlIGV4dHJhcy5BbmltYXRlZFNwcml0ZS5cIiksaS5BbmltYXRlZFNwcml0ZX19LFRpbGluZ1Nwcml0ZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4oXCJUaGUgVGlsaW5nU3ByaXRlIGNsYXNzIGhhcyBiZWVuIG1vdmVkIHRvIGV4dHJhcy5UaWxpbmdTcHJpdGUsIHBsZWFzZSB1c2UgZXh0cmFzLlRpbGluZ1Nwcml0ZSBmcm9tIG5vdyBvbi5cIiksaS5UaWxpbmdTcHJpdGV9fSxCaXRtYXBUZXh0OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihcIlRoZSBCaXRtYXBUZXh0IGNsYXNzIGhhcyBiZWVuIG1vdmVkIHRvIGV4dHJhcy5CaXRtYXBUZXh0LCBwbGVhc2UgdXNlIGV4dHJhcy5CaXRtYXBUZXh0IGZyb20gbm93IG9uLlwiKSxpLkJpdG1hcFRleHR9fSxibGVuZE1vZGVzOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihcIlRoZSBibGVuZE1vZGVzIGhhcyBiZWVuIG1vdmVkIHRvIEJMRU5EX01PREVTLCBwbGVhc2UgdXNlIEJMRU5EX01PREVTIGZyb20gbm93IG9uLlwiKSx0LkJMRU5EX01PREVTfX0sc2NhbGVNb2Rlczp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4oXCJUaGUgc2NhbGVNb2RlcyBoYXMgYmVlbiBtb3ZlZCB0byBTQ0FMRV9NT0RFUywgcGxlYXNlIHVzZSBTQ0FMRV9NT0RFUyBmcm9tIG5vdyBvbi5cIiksdC5TQ0FMRV9NT0RFU319LEJhc2VUZXh0dXJlQ2FjaGU6e2dldDpmdW5jdGlvbigpe3JldHVybiBuKFwiVGhlIEJhc2VUZXh0dXJlQ2FjaGUgY2xhc3MgaGFzIGJlZW4gbW92ZWQgdG8gdXRpbHMuQmFzZVRleHR1cmVDYWNoZSwgcGxlYXNlIHVzZSB1dGlscy5CYXNlVGV4dHVyZUNhY2hlIGZyb20gbm93IG9uLlwiKSx0LnV0aWxzLkJhc2VUZXh0dXJlQ2FjaGV9fSxUZXh0dXJlQ2FjaGU6e2dldDpmdW5jdGlvbigpe3JldHVybiBuKFwiVGhlIFRleHR1cmVDYWNoZSBjbGFzcyBoYXMgYmVlbiBtb3ZlZCB0byB1dGlscy5UZXh0dXJlQ2FjaGUsIHBsZWFzZSB1c2UgdXRpbHMuVGV4dHVyZUNhY2hlIGZyb20gbm93IG9uLlwiKSx0LnV0aWxzLlRleHR1cmVDYWNoZX19LG1hdGg6e2dldDpmdW5jdGlvbigpe3JldHVybiBuKFwiVGhlIG1hdGggbmFtZXNwYWNlIGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSBhY2Nlc3MgbWVtYmVycyBhbHJlYWR5IGFjY2Vzc2libGUgb24gUElYSS5cIiksdH19LEFic3RyYWN0RmlsdGVyOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihcIkFzdHJhY3RGaWx0ZXIgaGFzIGJlZW4gcmVuYW1lZCB0byBGaWx0ZXIsIHBsZWFzZSB1c2UgUElYSS5GaWx0ZXJcIiksdC5GaWx0ZXJ9fSxUcmFuc2Zvcm1NYW51YWw6e2dldDpmdW5jdGlvbigpe3JldHVybiBuKFwiVHJhbnNmb3JtTWFudWFsIGhhcyBiZWVuIHJlbmFtZWQgdG8gVHJhbnNmb3JtQmFzZSwgcGxlYXNlIHVwZGF0ZSB5b3VyIHBpeGktc3BpbmVcIiksdC5UcmFuc2Zvcm1CYXNlfX0sVEFSR0VUX0ZQTVM6e2dldDpmdW5jdGlvbigpe3JldHVybiBuKFwiUElYSS5UQVJHRVRfRlBNUyBoYXMgYmVlbiBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIFBJWEkuc2V0dGluZ3MuVEFSR0VUX0ZQTVNcIiksdC5zZXR0aW5ncy5UQVJHRVRfRlBNU30sc2V0OmZ1bmN0aW9uKGUpe24oXCJQSVhJLlRBUkdFVF9GUE1TIGhhcyBiZWVuIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgUElYSS5zZXR0aW5ncy5UQVJHRVRfRlBNU1wiKSx0LnNldHRpbmdzLlRBUkdFVF9GUE1TPWV9fSxGSUxURVJfUkVTT0xVVElPTjp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4oXCJQSVhJLkZJTFRFUl9SRVNPTFVUSU9OIGhhcyBiZWVuIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgUElYSS5zZXR0aW5ncy5GSUxURVJfUkVTT0xVVElPTlwiKSx0LnNldHRpbmdzLkZJTFRFUl9SRVNPTFVUSU9OfSxzZXQ6ZnVuY3Rpb24oZSl7bihcIlBJWEkuRklMVEVSX1JFU09MVVRJT04gaGFzIGJlZW4gZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBQSVhJLnNldHRpbmdzLkZJTFRFUl9SRVNPTFVUSU9OXCIpLHQuc2V0dGluZ3MuRklMVEVSX1JFU09MVVRJT049ZX19LFJFU09MVVRJT046e2dldDpmdW5jdGlvbigpe3JldHVybiBuKFwiUElYSS5SRVNPTFVUSU9OIGhhcyBiZWVuIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgUElYSS5zZXR0aW5ncy5SRVNPTFVUSU9OXCIpLHQuc2V0dGluZ3MuUkVTT0xVVElPTn0sc2V0OmZ1bmN0aW9uKGUpe24oXCJQSVhJLlJFU09MVVRJT04gaGFzIGJlZW4gZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBQSVhJLnNldHRpbmdzLlJFU09MVVRJT05cIiksdC5zZXR0aW5ncy5SRVNPTFVUSU9OPWV9fSxNSVBNQVBfVEVYVFVSRVM6e2dldDpmdW5jdGlvbigpe3JldHVybiBuKFwiUElYSS5NSVBNQVBfVEVYVFVSRVMgaGFzIGJlZW4gZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBQSVhJLnNldHRpbmdzLk1JUE1BUF9URVhUVVJFU1wiKSx0LnNldHRpbmdzLk1JUE1BUF9URVhUVVJFU30sc2V0OmZ1bmN0aW9uKGUpe24oXCJQSVhJLk1JUE1BUF9URVhUVVJFUyBoYXMgYmVlbiBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIFBJWEkuc2V0dGluZ3MuTUlQTUFQX1RFWFRVUkVTXCIpLHQuc2V0dGluZ3MuTUlQTUFQX1RFWFRVUkVTPWV9fSxTUFJJVEVfQkFUQ0hfU0laRTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4oXCJQSVhJLlNQUklURV9CQVRDSF9TSVpFIGhhcyBiZWVuIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgUElYSS5zZXR0aW5ncy5TUFJJVEVfQkFUQ0hfU0laRVwiKSx0LnNldHRpbmdzLlNQUklURV9CQVRDSF9TSVpFfSxzZXQ6ZnVuY3Rpb24oZSl7bihcIlBJWEkuU1BSSVRFX0JBVENIX1NJWkUgaGFzIGJlZW4gZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBQSVhJLnNldHRpbmdzLlNQUklURV9CQVRDSF9TSVpFXCIpLHQuc2V0dGluZ3MuU1BSSVRFX0JBVENIX1NJWkU9ZX19LFNQUklURV9NQVhfVEVYVFVSRVM6e2dldDpmdW5jdGlvbigpe3JldHVybiBuKFwiUElYSS5TUFJJVEVfTUFYX1RFWFRVUkVTIGhhcyBiZWVuIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgUElYSS5zZXR0aW5ncy5TUFJJVEVfTUFYX1RFWFRVUkVTXCIpLHQuc2V0dGluZ3MuU1BSSVRFX01BWF9URVhUVVJFU30sc2V0OmZ1bmN0aW9uKGUpe24oXCJQSVhJLlNQUklURV9NQVhfVEVYVFVSRVMgaGFzIGJlZW4gZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBQSVhJLnNldHRpbmdzLlNQUklURV9NQVhfVEVYVFVSRVNcIiksdC5zZXR0aW5ncy5TUFJJVEVfTUFYX1RFWFRVUkVTPWV9fSxSRVRJTkFfUFJFRklYOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihcIlBJWEkuUkVUSU5BX1BSRUZJWCBoYXMgYmVlbiBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIFBJWEkuc2V0dGluZ3MuUkVUSU5BX1BSRUZJWFwiKSx0LnNldHRpbmdzLlJFVElOQV9QUkVGSVh9LHNldDpmdW5jdGlvbihlKXtuKFwiUElYSS5SRVRJTkFfUFJFRklYIGhhcyBiZWVuIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgUElYSS5zZXR0aW5ncy5SRVRJTkFfUFJFRklYXCIpLHQuc2V0dGluZ3MuUkVUSU5BX1BSRUZJWD1lfX0sREVGQVVMVF9SRU5ERVJfT1BUSU9OUzp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4oXCJQSVhJLkRFRkFVTFRfUkVOREVSX09QVElPTlMgaGFzIGJlZW4gZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBQSVhJLnNldHRpbmdzLkRFRkFVTFRfUkVOREVSX09QVElPTlNcIiksdC5zZXR0aW5ncy5SRU5ERVJfT1BUSU9OU319fSk7Zm9yKHZhciBoPVt7cGFyZW50OlwiVFJBTlNGT1JNX01PREVcIix0YXJnZXQ6XCJUUkFOU0ZPUk1fTU9ERVwifSx7cGFyZW50OlwiR0NfTU9ERVNcIix0YXJnZXQ6XCJHQ19NT0RFXCJ9LHtwYXJlbnQ6XCJXUkFQX01PREVTXCIsdGFyZ2V0OlwiV1JBUF9NT0RFXCJ9LHtwYXJlbnQ6XCJTQ0FMRV9NT0RFU1wiLHRhcmdldDpcIlNDQUxFX01PREVcIn0se3BhcmVudDpcIlBSRUNJU0lPTlwiLHRhcmdldDpcIlBSRUNJU0lPTl9GUkFHTUVOVFwifV0sbD0wO2w8aC5sZW5ndGg7bCsrKSFmdW5jdGlvbihlKXt2YXIgcj1oW2VdO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0W3IucGFyZW50XSxcIkRFRkFVTFRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4oXCJQSVhJLlwiK3IucGFyZW50K1wiLkRFRkFVTFQgaGFzIGJlZW4gZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBQSVhJLnNldHRpbmdzLlwiK3IudGFyZ2V0KSx0LnNldHRpbmdzW3IudGFyZ2V0XX0sc2V0OmZ1bmN0aW9uKGUpe24oXCJQSVhJLlwiK3IucGFyZW50K1wiLkRFRkFVTFQgaGFzIGJlZW4gZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBQSVhJLnNldHRpbmdzLlwiK3IudGFyZ2V0KSx0LnNldHRpbmdzW3IudGFyZ2V0XT1lfX0pfShsKTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0LnNldHRpbmdzLHtQUkVDSVNJT046e2dldDpmdW5jdGlvbigpe3JldHVybiBuKFwiUElYSS5zZXR0aW5ncy5QUkVDSVNJT04gaGFzIGJlZW4gZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBQSVhJLnNldHRpbmdzLlBSRUNJU0lPTl9GUkFHTUVOVFwiKSx0LnNldHRpbmdzLlBSRUNJU0lPTl9GUkFHTUVOVH0sc2V0OmZ1bmN0aW9uKGUpe24oXCJQSVhJLnNldHRpbmdzLlBSRUNJU0lPTiBoYXMgYmVlbiBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIFBJWEkuc2V0dGluZ3MuUFJFQ0lTSU9OX0ZSQUdNRU5UXCIpLHQuc2V0dGluZ3MuUFJFQ0lTSU9OX0ZSQUdNRU5UPWV9fX0pLGkuQW5pbWF0ZWRTcHJpdGUmJk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGkse01vdmllQ2xpcDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4oXCJUaGUgTW92aWVDbGlwIGNsYXNzIGhhcyBiZWVuIHJlbmFtZWQgdG8gQW5pbWF0ZWRTcHJpdGUsIHBsZWFzZSB1c2UgQW5pbWF0ZWRTcHJpdGUgZnJvbSBub3cgb24uXCIpLGkuQW5pbWF0ZWRTcHJpdGV9fX0pLGkmJk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGkse1RleHR1cmVUcmFuc2Zvcm06e2dldDpmdW5jdGlvbigpe3JldHVybiBuKFwiVGhlIFRleHR1cmVUcmFuc2Zvcm0gY2xhc3MgaGFzIGJlZW4gcmVuYW1lZCB0byBUZXh0dXJlTWF0cml4LCBwbGVhc2UgdXNlIFBJWEkuVGV4dHVyZU1hdHJpeCBmcm9tIG5vdyBvbi5cIiksdC5UZXh0dXJlTWF0cml4fX19KSx0LkRpc3BsYXlPYmplY3QucHJvdG90eXBlLmdlbmVyYXRlVGV4dHVyZT1mdW5jdGlvbih0LGUscil7cmV0dXJuIG4oXCJnZW5lcmF0ZVRleHR1cmUgaGFzIG1vdmVkIHRvIHRoZSByZW5kZXJlciwgcGxlYXNlIHVzZSByZW5kZXJlci5nZW5lcmF0ZVRleHR1cmUoZGlzcGxheU9iamVjdClcIiksdC5nZW5lcmF0ZVRleHR1cmUodGhpcyxlLHIpfSx0LkdyYXBoaWNzLnByb3RvdHlwZS5nZW5lcmF0ZVRleHR1cmU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbihcImdyYXBoaWNzIGdlbmVyYXRlIHRleHR1cmUgaGFzIG1vdmVkIHRvIHRoZSByZW5kZXJlci4gT3IgdG8gcmVuZGVyIGEgZ3JhcGhpY3MgdG8gYSB0ZXh0dXJlIHVzaW5nIGNhbnZhcyBwbGVhc2UgdXNlIGdlbmVyYXRlQ2FudmFzVGV4dHVyZVwiKSx0aGlzLmdlbmVyYXRlQ2FudmFzVGV4dHVyZSh0LGUpfSx0Lkdyb3VwRDguaXNTd2FwV2lkdGhIZWlnaHQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG4oXCJHcm91cEQ4LmlzU3dhcFdpZHRoSGVpZ2h0IHdhcyByZW5hbWVkIHRvIEdyb3VwRDguaXNWZXJ0aWNhbFwiKSx0Lkdyb3VwRDguaXNWZXJ0aWNhbChlKX0sdC5SZW5kZXJUZXh0dXJlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24odCxlLHIsaSl7dGhpcy5sZWdhY3lSZW5kZXJlci5yZW5kZXIodCx0aGlzLHIsZSwhaSksbihcIlJlbmRlclRleHR1cmUucmVuZGVyIGlzIG5vdyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIHJlbmRlcmVyLnJlbmRlcihkaXNwbGF5T2JqZWN0LCByZW5kZXJUZXh0dXJlKVwiKX0sdC5SZW5kZXJUZXh0dXJlLnByb3RvdHlwZS5nZXRJbWFnZT1mdW5jdGlvbih0KXtyZXR1cm4gbihcIlJlbmRlclRleHR1cmUuZ2V0SW1hZ2UgaXMgbm93IGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgcmVuZGVyZXIuZXh0cmFjdC5pbWFnZSh0YXJnZXQpXCIpLHRoaXMubGVnYWN5UmVuZGVyZXIuZXh0cmFjdC5pbWFnZSh0KX0sdC5SZW5kZXJUZXh0dXJlLnByb3RvdHlwZS5nZXRCYXNlNjQ9ZnVuY3Rpb24odCl7cmV0dXJuIG4oXCJSZW5kZXJUZXh0dXJlLmdldEJhc2U2NCBpcyBub3cgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSByZW5kZXJlci5leHRyYWN0LmJhc2U2NCh0YXJnZXQpXCIpLHRoaXMubGVnYWN5UmVuZGVyZXIuZXh0cmFjdC5iYXNlNjQodCl9LHQuUmVuZGVyVGV4dHVyZS5wcm90b3R5cGUuZ2V0Q2FudmFzPWZ1bmN0aW9uKHQpe3JldHVybiBuKFwiUmVuZGVyVGV4dHVyZS5nZXRDYW52YXMgaXMgbm93IGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgcmVuZGVyZXIuZXh0cmFjdC5jYW52YXModGFyZ2V0KVwiKSx0aGlzLmxlZ2FjeVJlbmRlcmVyLmV4dHJhY3QuY2FudmFzKHQpfSx0LlJlbmRlclRleHR1cmUucHJvdG90eXBlLmdldFBpeGVscz1mdW5jdGlvbih0KXtyZXR1cm4gbihcIlJlbmRlclRleHR1cmUuZ2V0UGl4ZWxzIGlzIG5vdyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIHJlbmRlcmVyLmV4dHJhY3QucGl4ZWxzKHRhcmdldClcIiksdGhpcy5sZWdhY3lSZW5kZXJlci5waXhlbHModCl9LHQuU3ByaXRlLnByb3RvdHlwZS5zZXRUZXh0dXJlPWZ1bmN0aW9uKHQpe3RoaXMudGV4dHVyZT10LG4oXCJzZXRUZXh0dXJlIGlzIG5vdyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIHRoZSB0ZXh0dXJlIHByb3BlcnR5LCBlLmcgOiBzcHJpdGUudGV4dHVyZSA9IHRleHR1cmU7XCIpfSxpLkJpdG1hcFRleHQmJihpLkJpdG1hcFRleHQucHJvdG90eXBlLnNldFRleHQ9ZnVuY3Rpb24odCl7dGhpcy50ZXh0PXQsbihcInNldFRleHQgaXMgbm93IGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgdGhlIHRleHQgcHJvcGVydHksIGUuZyA6IG15Qml0bWFwVGV4dC50ZXh0ID0gJ215IHRleHQnO1wiKX0pLHQuVGV4dC5wcm90b3R5cGUuc2V0VGV4dD1mdW5jdGlvbih0KXt0aGlzLnRleHQ9dCxuKFwic2V0VGV4dCBpcyBub3cgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSB0aGUgdGV4dCBwcm9wZXJ0eSwgZS5nIDogbXlUZXh0LnRleHQgPSAnbXkgdGV4dCc7XCIpfSx0LlRleHQuY2FsY3VsYXRlRm9udFByb3BlcnRpZXM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4oXCJUZXh0LmNhbGN1bGF0ZUZvbnRQcm9wZXJ0aWVzIGlzIG5vdyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIHRoZSBUZXh0TWV0cmljcy5tZWFzdXJlRm9udFwiKSx0LlRleHRNZXRyaWNzLm1lYXN1cmVGb250KGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0LlRleHQse2ZvbnRQcm9wZXJ0aWVzQ2FjaGU6e2dldDpmdW5jdGlvbigpe3JldHVybiBuKFwiVGV4dC5mb250UHJvcGVydGllc0NhY2hlIGlzIGRlcHJlY2F0ZWRcIiksdC5UZXh0TWV0cmljcy5fZm9udHN9fSxmb250UHJvcGVydGllc0NhbnZhczp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4oXCJUZXh0LmZvbnRQcm9wZXJ0aWVzQ2FudmFzIGlzIGRlcHJlY2F0ZWRcIiksdC5UZXh0TWV0cmljcy5fY2FudmFzfX0sZm9udFByb3BlcnRpZXNDb250ZXh0OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihcIlRleHQuZm9udFByb3BlcnRpZXNDb250ZXh0IGlzIGRlcHJlY2F0ZWRcIiksdC5UZXh0TWV0cmljcy5fY29udGV4dH19fSksdC5UZXh0LnByb3RvdHlwZS5zZXRTdHlsZT1mdW5jdGlvbih0KXt0aGlzLnN0eWxlPXQsbihcInNldFN0eWxlIGlzIG5vdyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIHRoZSBzdHlsZSBwcm9wZXJ0eSwgZS5nIDogbXlUZXh0LnN0eWxlID0gc3R5bGU7XCIpfSx0LlRleHQucHJvdG90eXBlLmRldGVybWluZUZvbnRQcm9wZXJ0aWVzPWZ1bmN0aW9uKGUpe3JldHVybiBuKFwiZGV0ZXJtaW5lRm9udFByb3BlcnRpZXMgaXMgbm93IGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgVGV4dE1ldHJpY3MubWVhc3VyZUZvbnQgbWV0aG9kXCIpLHQuVGV4dE1ldHJpY3MubWVhc3VyZUZvbnQoZSl9LHQuVGV4dC5nZXRGb250U3R5bGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG4oXCJnZXRGb250U3R5bGUgaXMgbm93IGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgVGV4dFN0eWxlLnRvRm9udFN0cmluZygpIGluc3RlYWRcIiksZT1lfHx7fSxlIGluc3RhbmNlb2YgdC5UZXh0U3R5bGV8fChlPW5ldyB0LlRleHRTdHlsZShlKSksZS50b0ZvbnRTdHJpbmcoKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXModC5UZXh0U3R5bGUucHJvdG90eXBlLHtmb250OntnZXQ6ZnVuY3Rpb24oKXtuKFwidGV4dCBzdHlsZSBwcm9wZXJ0eSAnZm9udCcgaXMgbm93IGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgdGhlICdmb250RmFtaWx5JywgJ2ZvbnRTaXplJywgJ2ZvbnRTdHlsZScsICdmb250VmFyaWFudCcgYW5kICdmb250V2VpZ2h0JyBwcm9wZXJ0aWVzIGZyb20gbm93IG9uXCIpO3ZhciB0PVwibnVtYmVyXCI9PXR5cGVvZiB0aGlzLl9mb250U2l6ZT90aGlzLl9mb250U2l6ZStcInB4XCI6dGhpcy5fZm9udFNpemU7cmV0dXJuIHRoaXMuX2ZvbnRTdHlsZStcIiBcIit0aGlzLl9mb250VmFyaWFudCtcIiBcIit0aGlzLl9mb250V2VpZ2h0K1wiIFwiK3QrXCIgXCIrdGhpcy5fZm9udEZhbWlseX0sc2V0OmZ1bmN0aW9uKHQpe24oXCJ0ZXh0IHN0eWxlIHByb3BlcnR5ICdmb250JyBpcyBub3cgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSB0aGUgJ2ZvbnRGYW1pbHknLCdmb250U2l6ZScsZm9udFN0eWxlJywnZm9udFZhcmlhbnQnIGFuZCAnZm9udFdlaWdodCcgcHJvcGVydGllcyBmcm9tIG5vdyBvblwiKSx0LmluZGV4T2YoXCJpdGFsaWNcIik+MT90aGlzLl9mb250U3R5bGU9XCJpdGFsaWNcIjp0LmluZGV4T2YoXCJvYmxpcXVlXCIpPi0xP3RoaXMuX2ZvbnRTdHlsZT1cIm9ibGlxdWVcIjp0aGlzLl9mb250U3R5bGU9XCJub3JtYWxcIix0LmluZGV4T2YoXCJzbWFsbC1jYXBzXCIpPi0xP3RoaXMuX2ZvbnRWYXJpYW50PVwic21hbGwtY2Fwc1wiOnRoaXMuX2ZvbnRWYXJpYW50PVwibm9ybWFsXCI7dmFyIGU9dC5zcGxpdChcIiBcIikscj0tMTt0aGlzLl9mb250U2l6ZT0yNjtmb3IodmFyIGk9MDtpPGUubGVuZ3RoOysraSlpZihlW2ldLm1hdGNoKC8ocHh8cHR8ZW18JSkvKSl7cj1pLHRoaXMuX2ZvbnRTaXplPWVbaV07YnJlYWt9dGhpcy5fZm9udFdlaWdodD1cIm5vcm1hbFwiO2Zvcih2YXIgbz0wO288cjsrK28paWYoZVtvXS5tYXRjaCgvKGJvbGR8Ym9sZGVyfGxpZ2h0ZXJ8MTAwfDIwMHwzMDB8NDAwfDUwMHw2MDB8NzAwfDgwMHw5MDApLykpe3RoaXMuX2ZvbnRXZWlnaHQ9ZVtvXTticmVha31pZihyPi0xJiZyPGUubGVuZ3RoLTEpe3RoaXMuX2ZvbnRGYW1pbHk9XCJcIjtmb3IodmFyIHM9cisxO3M8ZS5sZW5ndGg7KytzKXRoaXMuX2ZvbnRGYW1pbHkrPWVbc10rXCIgXCI7dGhpcy5fZm9udEZhbWlseT10aGlzLl9mb250RmFtaWx5LnNsaWNlKDAsLTEpfWVsc2UgdGhpcy5fZm9udEZhbWlseT1cIkFyaWFsXCI7dGhpcy5zdHlsZUlEKyt9fX0pLHQuVGV4dHVyZS5wcm90b3R5cGUuc2V0RnJhbWU9ZnVuY3Rpb24odCl7dGhpcy5mcmFtZT10LG4oXCJzZXRGcmFtZSBpcyBub3cgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSB0aGUgZnJhbWUgcHJvcGVydHksIGUuZzogbXlUZXh0dXJlLmZyYW1lID0gZnJhbWU7XCIpfSx0LlRleHR1cmUuYWRkVGV4dHVyZVRvQ2FjaGU9ZnVuY3Rpb24oZSxyKXt0LlRleHR1cmUuYWRkVG9DYWNoZShlLHIpLG4oXCJUZXh0dXJlLmFkZFRleHR1cmVUb0NhY2hlIGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgVGV4dHVyZS5hZGRUb0NhY2hlIGZyb20gbm93IG9uLlwiKX0sdC5UZXh0dXJlLnJlbW92ZVRleHR1cmVGcm9tQ2FjaGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG4oXCJUZXh0dXJlLnJlbW92ZVRleHR1cmVGcm9tQ2FjaGUgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBUZXh0dXJlLnJlbW92ZUZyb21DYWNoZSBmcm9tIG5vdyBvbi4gQmUgYXdhcmUgdGhhdCBUZXh0dXJlLnJlbW92ZUZyb21DYWNoZSBkb2VzIG5vdCBhdXRvbWF0aWNhbGx5IGl0cyBCYXNlVGV4dHVyZSBmcm9tIHRoZSBCYXNlVGV4dHVyZUNhY2hlLiBGb3IgdGhhdCwgdXNlIEJhc2VUZXh0dXJlLnJlbW92ZUZyb21DYWNoZVwiKSx0LkJhc2VUZXh0dXJlLnJlbW92ZUZyb21DYWNoZShlKSx0LlRleHR1cmUucmVtb3ZlRnJvbUNhY2hlKGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvLHtBYnN0cmFjdEZpbHRlcjp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4oXCJBc3RyYWN0RmlsdGVyIGhhcyBiZWVuIHJlbmFtZWQgdG8gRmlsdGVyLCBwbGVhc2UgdXNlIFBJWEkuRmlsdGVyXCIpLHQuQWJzdHJhY3RGaWx0ZXJ9fSxTcHJpdGVNYXNrRmlsdGVyOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihcImZpbHRlcnMuU3ByaXRlTWFza0ZpbHRlciBpcyBhbiB1bmRvY3VtZW50ZWQgYWxpYXMsIHBsZWFzZSB1c2UgU3ByaXRlTWFza0ZpbHRlciBmcm9tIG5vdyBvbi5cIiksdC5TcHJpdGVNYXNrRmlsdGVyfX0sVm9pZEZpbHRlcjp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4oXCJWb2lkRmlsdGVyIGhhcyBiZWVuIHJlbmFtZWQgdG8gQWxwaGFGaWx0ZXIsIHBsZWFzZSB1c2UgUElYSS5maWx0ZXJzLkFscGhhRmlsdGVyXCIpLG8uQWxwaGFGaWx0ZXJ9fX0pLHQudXRpbHMudXVpZD1mdW5jdGlvbigpe3JldHVybiBuKFwidXRpbHMudXVpZCgpIGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgdXRpbHMudWlkKCkgZnJvbSBub3cgb24uXCIpLHQudXRpbHMudWlkKCl9LHQudXRpbHMuY2FuVXNlTmV3Q2FudmFzQmxlbmRNb2Rlcz1mdW5jdGlvbigpe3JldHVybiBuKFwidXRpbHMuY2FuVXNlTmV3Q2FudmFzQmxlbmRNb2RlcygpIGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgQ2FudmFzVGludGVyLmNhblVzZU11bHRpcGx5IGZyb20gbm93IG9uXCIpLHQuQ2FudmFzVGludGVyLmNhblVzZU11bHRpcGx5fTt2YXIgYz0hMDtpZihPYmplY3QuZGVmaW5lUHJvcGVydHkodC51dGlscyxcIl9zYWlkSGVsbG9cIix7c2V0OmZ1bmN0aW9uKHQpe3QmJihuKFwiUElYSS51dGlscy5fc2FpZEhlbGxvIGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgUElYSS51dGlscy5za2lwSGVsbG8oKVwiKSx0aGlzLnNraXBIZWxsbygpKSxjPXR9LGdldDpmdW5jdGlvbigpe3JldHVybiBjfX0pLHMuQmFzZVByZXBhcmUmJihzLkJhc2VQcmVwYXJlLnByb3RvdHlwZS5yZWdpc3Rlcj1mdW5jdGlvbih0LGUpe3JldHVybiBuKFwicmVuZGVyZXIucGx1Z2lucy5wcmVwYXJlLnJlZ2lzdGVyIGlzIG5vdyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIHJlbmRlcmVyLnBsdWdpbnMucHJlcGFyZS5yZWdpc3RlckZpbmRIb29rICYgcmVuZGVyZXIucGx1Z2lucy5wcmVwYXJlLnJlZ2lzdGVyVXBsb2FkSG9va1wiKSx0JiZ0aGlzLnJlZ2lzdGVyRmluZEhvb2sodCksZSYmdGhpcy5yZWdpc3RlclVwbG9hZEhvb2soZSksdGhpc30pLHMuY2FudmFzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkocy5jYW52YXMsXCJVUExPQURTX1BFUl9GUkFNRVwiLHtzZXQ6ZnVuY3Rpb24oKXtuKFwiUElYSS5DYW52YXNQcmVwYXJlLlVQTE9BRFNfUEVSX0ZSQU1FIGhhcyBiZWVuIHJlbW92ZWQuIFBsZWFzZSBzZXQgcmVuZGVyZXIucGx1Z2lucy5wcmVwYXJlLmxpbWl0ZXIubWF4SXRlbXNQZXJGcmFtZSBvbiB5b3VyIHJlbmRlcmVyXCIpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihcIlBJWEkuQ2FudmFzUHJlcGFyZS5VUExPQURTX1BFUl9GUkFNRSBoYXMgYmVlbiByZW1vdmVkLiBQbGVhc2UgdXNlIHJlbmRlcmVyLnBsdWdpbnMucHJlcGFyZS5saW1pdGVyXCIpLE5hTn19KSxzLndlYmdsJiZPYmplY3QuZGVmaW5lUHJvcGVydHkocy53ZWJnbCxcIlVQTE9BRFNfUEVSX0ZSQU1FXCIse3NldDpmdW5jdGlvbigpe24oXCJQSVhJLldlYkdMUHJlcGFyZS5VUExPQURTX1BFUl9GUkFNRSBoYXMgYmVlbiByZW1vdmVkLiBQbGVhc2Ugc2V0IHJlbmRlcmVyLnBsdWdpbnMucHJlcGFyZS5saW1pdGVyLm1heEl0ZW1zUGVyRnJhbWUgb24geW91ciByZW5kZXJlclwiKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4oXCJQSVhJLldlYkdMUHJlcGFyZS5VUExPQURTX1BFUl9GUkFNRSBoYXMgYmVlbiByZW1vdmVkLiBQbGVhc2UgdXNlIHJlbmRlcmVyLnBsdWdpbnMucHJlcGFyZS5saW1pdGVyXCIpLE5hTn19KSxhLkxvYWRlcil7dmFyIGQ9YS5SZXNvdXJjZSxmPWEuTG9hZGVyO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGQucHJvdG90eXBlLHtpc0pzb246e2dldDpmdW5jdGlvbigpe3JldHVybiBuKFwiVGhlIGlzSnNvbiBwcm9wZXJ0eSBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIGByZXNvdXJjZS50eXBlID09PSBSZXNvdXJjZS5UWVBFLkpTT05gLlwiKSx0aGlzLnR5cGU9PT1kLlRZUEUuSlNPTn19LGlzWG1sOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihcIlRoZSBpc1htbCBwcm9wZXJ0eSBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIGByZXNvdXJjZS50eXBlID09PSBSZXNvdXJjZS5UWVBFLlhNTGAuXCIpLHRoaXMudHlwZT09PWQuVFlQRS5YTUx9fSxpc0ltYWdlOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihcIlRoZSBpc0ltYWdlIHByb3BlcnR5IGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgYHJlc291cmNlLnR5cGUgPT09IFJlc291cmNlLlRZUEUuSU1BR0VgLlwiKSx0aGlzLnR5cGU9PT1kLlRZUEUuSU1BR0V9fSxpc0F1ZGlvOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihcIlRoZSBpc0F1ZGlvIHByb3BlcnR5IGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgYHJlc291cmNlLnR5cGUgPT09IFJlc291cmNlLlRZUEUuQVVESU9gLlwiKSx0aGlzLnR5cGU9PT1kLlRZUEUuQVVESU99fSxpc1ZpZGVvOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihcIlRoZSBpc1ZpZGVvIHByb3BlcnR5IGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgYHJlc291cmNlLnR5cGUgPT09IFJlc291cmNlLlRZUEUuVklERU9gLlwiKSx0aGlzLnR5cGU9PT1kLlRZUEUuVklERU99fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGYucHJvdG90eXBlLHtiZWZvcmU6e2dldDpmdW5jdGlvbigpe3JldHVybiBuKFwiVGhlIGJlZm9yZSgpIG1ldGhvZCBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIHByZSgpLlwiKSx0aGlzLnByZX19LGFmdGVyOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihcIlRoZSBhZnRlcigpIG1ldGhvZCBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIHVzZSgpLlwiKSx0aGlzLnVzZX19fSl9dS5pbnRlcmFjdGl2ZVRhcmdldCYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHUuaW50ZXJhY3RpdmVUYXJnZXQsXCJkZWZhdWx0Q3Vyc29yXCIse3NldDpmdW5jdGlvbih0KXtuKFwiUHJvcGVydHkgZGVmYXVsdEN1cnNvciBoYXMgYmVlbiByZXBsYWNlZCB3aXRoICdjdXJzb3InLiBcIiksdGhpcy5jdXJzb3I9dH0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4oXCJQcm9wZXJ0eSBkZWZhdWx0Q3Vyc29yIGhhcyBiZWVuIHJlcGxhY2VkIHdpdGggJ2N1cnNvcicuIFwiKSx0aGlzLmN1cnNvcn19KSx1LkludGVyYWN0aW9uTWFuYWdlciYmKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh1LkludGVyYWN0aW9uTWFuYWdlcixcImRlZmF1bHRDdXJzb3JTdHlsZVwiLHtzZXQ6ZnVuY3Rpb24odCl7bihcIlByb3BlcnR5IGRlZmF1bHRDdXJzb3JTdHlsZSBoYXMgYmVlbiByZXBsYWNlZCB3aXRoICdjdXJzb3JTdHlsZXMuZGVmYXVsdCcuIFwiKSx0aGlzLmN1cnNvclN0eWxlcy5kZWZhdWx0PXR9LGdldDpmdW5jdGlvbigpe3JldHVybiBuKFwiUHJvcGVydHkgZGVmYXVsdEN1cnNvclN0eWxlIGhhcyBiZWVuIHJlcGxhY2VkIHdpdGggJ2N1cnNvclN0eWxlcy5kZWZhdWx0Jy4gXCIpLHRoaXMuY3Vyc29yU3R5bGVzLmRlZmF1bHR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHUuSW50ZXJhY3Rpb25NYW5hZ2VyLFwiY3VycmVudEN1cnNvclN0eWxlXCIse3NldDpmdW5jdGlvbih0KXtuKFwiUHJvcGVydHkgY3VycmVudEN1cnNvclN0eWxlIGhhcyBiZWVuIHJlbW92ZWQuU2VlIHRoZSBjdXJyZW50Q3Vyc29yTW9kZSBwcm9wZXJ0eSwgd2hpY2ggd29ya3MgZGlmZmVyZW50bHkuXCIpLHRoaXMuY3VycmVudEN1cnNvck1vZGU9dH0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4oXCJQcm9wZXJ0eSBjdXJyZW50Q3Vyc29yU3R5bGUgaGFzIGJlZW4gcmVtb3ZlZC5TZWUgdGhlIGN1cnJlbnRDdXJzb3JNb2RlIHByb3BlcnR5LCB3aGljaCB3b3JrcyBkaWZmZXJlbnRseS5cIiksdGhpcy5jdXJyZW50Q3Vyc29yTW9kZX19KSl9ci5fX2VzTW9kdWxlPSEwLHIuZGVmYXVsdD1pO3ZhciBvPXt9fSx7fV0sMTMyOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ci5fX2VzTW9kdWxlPSEwO3ZhciBpPXQoXCIuLi8uLi9jb3JlXCIpLG89ZnVuY3Rpb24odCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfShpKSxzPW5ldyBvLlJlY3RhbmdsZSxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtuKHRoaXMsdCksdGhpcy5yZW5kZXJlcj1lLGUuZXh0cmFjdD10aGlzfXJldHVybiB0LnByb3RvdHlwZS5pbWFnZT1mdW5jdGlvbih0KXt2YXIgZT1uZXcgSW1hZ2U7cmV0dXJuIGUuc3JjPXRoaXMuYmFzZTY0KHQpLGV9LHQucHJvdG90eXBlLmJhc2U2ND1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jYW52YXModCkudG9EYXRhVVJMKCl9LHQucHJvdG90eXBlLmNhbnZhcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnJlbmRlcmVyLHI9dm9pZCAwLG49dm9pZCAwLGk9dm9pZCAwLGE9dm9pZCAwO3QmJihhPXQgaW5zdGFuY2VvZiBvLlJlbmRlclRleHR1cmU/dDplLmdlbmVyYXRlVGV4dHVyZSh0KSksYT8ocj1hLmJhc2VUZXh0dXJlLl9jYW52YXNSZW5kZXJUYXJnZXQuY29udGV4dCxuPWEuYmFzZVRleHR1cmUuX2NhbnZhc1JlbmRlclRhcmdldC5yZXNvbHV0aW9uLGk9YS5mcmFtZSk6KHI9ZS5yb290Q29udGV4dCxuPWUucmVzb2x1dGlvbixpPXMsaS53aWR0aD10aGlzLnJlbmRlcmVyLndpZHRoLGkuaGVpZ2h0PXRoaXMucmVuZGVyZXIuaGVpZ2h0KTt2YXIgdT1NYXRoLmZsb29yKGkud2lkdGgqbisxZS00KSxoPU1hdGguZmxvb3IoaS5oZWlnaHQqbisxZS00KSxsPW5ldyBvLkNhbnZhc1JlbmRlclRhcmdldCh1LGgsMSksYz1yLmdldEltYWdlRGF0YShpLngqbixpLnkqbix1LGgpO3JldHVybiBsLmNvbnRleHQucHV0SW1hZ2VEYXRhKGMsMCwwKSxsLmNhbnZhc30sdC5wcm90b3R5cGUucGl4ZWxzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucmVuZGVyZXIscj12b2lkIDAsbj12b2lkIDAsaT12b2lkIDAsYT12b2lkIDA7cmV0dXJuIHQmJihhPXQgaW5zdGFuY2VvZiBvLlJlbmRlclRleHR1cmU/dDplLmdlbmVyYXRlVGV4dHVyZSh0KSksYT8ocj1hLmJhc2VUZXh0dXJlLl9jYW52YXNSZW5kZXJUYXJnZXQuY29udGV4dCxuPWEuYmFzZVRleHR1cmUuX2NhbnZhc1JlbmRlclRhcmdldC5yZXNvbHV0aW9uLGk9YS5mcmFtZSk6KHI9ZS5yb290Q29udGV4dCxpPXMsaS53aWR0aD1lLndpZHRoLGkuaGVpZ2h0PWUuaGVpZ2h0KSxyLmdldEltYWdlRGF0YSgwLDAsaS53aWR0aCpuLGkuaGVpZ2h0Km4pLmRhdGF9LHQucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcmVyLmV4dHJhY3Q9bnVsbCx0aGlzLnJlbmRlcmVyPW51bGx9LHR9KCk7ci5kZWZhdWx0PWEsby5DYW52YXNSZW5kZXJlci5yZWdpc3RlclBsdWdpbihcImV4dHJhY3RcIixhKX0se1wiLi4vLi4vY29yZVwiOjY1fV0sMTMzOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ci5fX2VzTW9kdWxlPSEwO3ZhciBpPXQoXCIuL3dlYmdsL1dlYkdMRXh0cmFjdFwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIndlYmdsXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4oaSkuZGVmYXVsdH19KTt2YXIgbz10KFwiLi9jYW52YXMvQ2FudmFzRXh0cmFjdFwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcImNhbnZhc1wiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBuKG8pLmRlZmF1bHR9fSl9LHtcIi4vY2FudmFzL0NhbnZhc0V4dHJhY3RcIjoxMzIsXCIuL3dlYmdsL1dlYkdMRXh0cmFjdFwiOjEzNH1dLDEzNDpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfXIuX19lc01vZHVsZT0hMDt2YXIgaT10KFwiLi4vLi4vY29yZVwiKSxvPWZ1bmN0aW9uKHQpe2lmKHQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT17fTtpZihudWxsIT10KWZvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKTtyZXR1cm4gZS5kZWZhdWx0PXQsZX0oaSkscz1uZXcgby5SZWN0YW5nbGUsYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7bih0aGlzLHQpLHRoaXMucmVuZGVyZXI9ZSxlLmV4dHJhY3Q9dGhpc31yZXR1cm4gdC5wcm90b3R5cGUuaW1hZ2U9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEltYWdlO3JldHVybiBlLnNyYz10aGlzLmJhc2U2NCh0KSxlfSx0LnByb3RvdHlwZS5iYXNlNjQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2FudmFzKHQpLnRvRGF0YVVSTCgpfSx0LnByb3RvdHlwZS5jYW52YXM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5yZW5kZXJlcixyPXZvaWQgMCxuPXZvaWQgMCxpPXZvaWQgMCxhPSExLHU9dm9pZCAwLGg9ITE7dCYmKHQgaW5zdGFuY2VvZiBvLlJlbmRlclRleHR1cmU/dT10Oih1PXRoaXMucmVuZGVyZXIuZ2VuZXJhdGVUZXh0dXJlKHQpLGg9ITApKSx1PyhyPXUuYmFzZVRleHR1cmUuX2dsUmVuZGVyVGFyZ2V0c1t0aGlzLnJlbmRlcmVyLkNPTlRFWFRfVUlEXSxuPXIucmVzb2x1dGlvbixpPXUuZnJhbWUsYT0hMSk6KHI9dGhpcy5yZW5kZXJlci5yb290UmVuZGVyVGFyZ2V0LG49ci5yZXNvbHV0aW9uLGE9ITAsaT1zLGkud2lkdGg9ci5zaXplLndpZHRoLGkuaGVpZ2h0PXIuc2l6ZS5oZWlnaHQpO3ZhciBsPU1hdGguZmxvb3IoaS53aWR0aCpuKzFlLTQpLGM9TWF0aC5mbG9vcihpLmhlaWdodCpuKzFlLTQpLGQ9bmV3IG8uQ2FudmFzUmVuZGVyVGFyZ2V0KGwsYywxKTtpZihyKXtlLmJpbmRSZW5kZXJUYXJnZXQocik7dmFyIGY9bmV3IFVpbnQ4QXJyYXkoNCpsKmMpLHA9ZS5nbDtwLnJlYWRQaXhlbHMoaS54Km4saS55Km4sbCxjLHAuUkdCQSxwLlVOU0lHTkVEX0JZVEUsZik7dmFyIHY9ZC5jb250ZXh0LmdldEltYWdlRGF0YSgwLDAsbCxjKTt2LmRhdGEuc2V0KGYpLGQuY29udGV4dC5wdXRJbWFnZURhdGEodiwwLDApLGEmJihkLmNvbnRleHQuc2NhbGUoMSwtMSksZC5jb250ZXh0LmRyYXdJbWFnZShkLmNhbnZhcywwLC1jKSl9cmV0dXJuIGgmJnUuZGVzdHJveSghMCksZC5jYW52YXN9LHQucHJvdG90eXBlLnBpeGVscz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnJlbmRlcmVyLHI9dm9pZCAwLG49dm9pZCAwLGk9dm9pZCAwLGE9dm9pZCAwLHU9ITE7dCYmKHQgaW5zdGFuY2VvZiBvLlJlbmRlclRleHR1cmU/YT10OihhPXRoaXMucmVuZGVyZXIuZ2VuZXJhdGVUZXh0dXJlKHQpLHU9ITApKSxhPyhyPWEuYmFzZVRleHR1cmUuX2dsUmVuZGVyVGFyZ2V0c1t0aGlzLnJlbmRlcmVyLkNPTlRFWFRfVUlEXSxuPXIucmVzb2x1dGlvbixpPWEuZnJhbWUpOihyPXRoaXMucmVuZGVyZXIucm9vdFJlbmRlclRhcmdldCxuPXIucmVzb2x1dGlvbixpPXMsaS53aWR0aD1yLnNpemUud2lkdGgsaS5oZWlnaHQ9ci5zaXplLmhlaWdodCk7dmFyIGg9aS53aWR0aCpuLGw9aS5oZWlnaHQqbixjPW5ldyBVaW50OEFycmF5KDQqaCpsKTtpZihyKXtlLmJpbmRSZW5kZXJUYXJnZXQocik7dmFyIGQ9ZS5nbDtkLnJlYWRQaXhlbHMoaS54Km4saS55Km4saCxsLGQuUkdCQSxkLlVOU0lHTkVEX0JZVEUsYyl9cmV0dXJuIHUmJmEuZGVzdHJveSghMCksY30sdC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMucmVuZGVyZXIuZXh0cmFjdD1udWxsLHRoaXMucmVuZGVyZXI9bnVsbH0sdH0oKTtyLmRlZmF1bHQ9YSxvLldlYkdMUmVuZGVyZXIucmVnaXN0ZXJQbHVnaW4oXCJleHRyYWN0XCIsYSl9LHtcIi4uLy4uL2NvcmVcIjo2NX1dLDEzNTpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkodCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBvKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9ci5fX2VzTW9kdWxlPSEwO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksYT10KFwiLi4vY29yZVwiKSx1PWZ1bmN0aW9uKHQpe2lmKHQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT17fTtpZihudWxsIT10KWZvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKTtyZXR1cm4gZS5kZWZhdWx0PXQsZX0oYSksaD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHIsbyl7bih0aGlzLGUpO3ZhciBzPWkodGhpcyx0LmNhbGwodGhpcyxyWzBdaW5zdGFuY2VvZiB1LlRleHR1cmU/clswXTpyWzBdLnRleHR1cmUpKTtyZXR1cm4gcy5fdGV4dHVyZXM9bnVsbCxzLl9kdXJhdGlvbnM9bnVsbCxzLnRleHR1cmVzPXIscy5fYXV0b1VwZGF0ZT0hMSE9PW8scy5hbmltYXRpb25TcGVlZD0xLHMubG9vcD0hMCxzLnVwZGF0ZUFuY2hvcj0hMSxzLm9uQ29tcGxldGU9bnVsbCxzLm9uRnJhbWVDaGFuZ2U9bnVsbCxzLm9uTG9vcD1udWxsLHMuX2N1cnJlbnRUaW1lPTAscy5wbGF5aW5nPSExLHN9cmV0dXJuIG8oZSx0KSxlLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5wbGF5aW5nJiYodGhpcy5wbGF5aW5nPSExLHRoaXMuX2F1dG9VcGRhdGUmJnUudGlja2VyLnNoYXJlZC5yZW1vdmUodGhpcy51cGRhdGUsdGhpcykpfSxlLnByb3RvdHlwZS5wbGF5PWZ1bmN0aW9uKCl7dGhpcy5wbGF5aW5nfHwodGhpcy5wbGF5aW5nPSEwLHRoaXMuX2F1dG9VcGRhdGUmJnUudGlja2VyLnNoYXJlZC5hZGQodGhpcy51cGRhdGUsdGhpcyx1LlVQREFURV9QUklPUklUWS5ISUdIKSl9LGUucHJvdG90eXBlLmdvdG9BbmRTdG9wPWZ1bmN0aW9uKHQpe3RoaXMuc3RvcCgpO3ZhciBlPXRoaXMuY3VycmVudEZyYW1lO3RoaXMuX2N1cnJlbnRUaW1lPXQsZSE9PXRoaXMuY3VycmVudEZyYW1lJiZ0aGlzLnVwZGF0ZVRleHR1cmUoKX0sZS5wcm90b3R5cGUuZ290b0FuZFBsYXk9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jdXJyZW50RnJhbWU7dGhpcy5fY3VycmVudFRpbWU9dCxlIT09dGhpcy5jdXJyZW50RnJhbWUmJnRoaXMudXBkYXRlVGV4dHVyZSgpLHRoaXMucGxheSgpfSxlLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5hbmltYXRpb25TcGVlZCp0LHI9dGhpcy5jdXJyZW50RnJhbWU7aWYobnVsbCE9PXRoaXMuX2R1cmF0aW9ucyl7dmFyIG49dGhpcy5fY3VycmVudFRpbWUlMSp0aGlzLl9kdXJhdGlvbnNbdGhpcy5jdXJyZW50RnJhbWVdO2ZvcihuKz1lLzYwKjFlMztuPDA7KXRoaXMuX2N1cnJlbnRUaW1lLS0sbis9dGhpcy5fZHVyYXRpb25zW3RoaXMuY3VycmVudEZyYW1lXTt2YXIgaT1NYXRoLnNpZ24odGhpcy5hbmltYXRpb25TcGVlZCp0KTtmb3IodGhpcy5fY3VycmVudFRpbWU9TWF0aC5mbG9vcih0aGlzLl9jdXJyZW50VGltZSk7bj49dGhpcy5fZHVyYXRpb25zW3RoaXMuY3VycmVudEZyYW1lXTspbi09dGhpcy5fZHVyYXRpb25zW3RoaXMuY3VycmVudEZyYW1lXSppLHRoaXMuX2N1cnJlbnRUaW1lKz1pO3RoaXMuX2N1cnJlbnRUaW1lKz1uL3RoaXMuX2R1cmF0aW9uc1t0aGlzLmN1cnJlbnRGcmFtZV19ZWxzZSB0aGlzLl9jdXJyZW50VGltZSs9ZTt0aGlzLl9jdXJyZW50VGltZTwwJiYhdGhpcy5sb29wPyh0aGlzLmdvdG9BbmRTdG9wKDApLHRoaXMub25Db21wbGV0ZSYmdGhpcy5vbkNvbXBsZXRlKCkpOnRoaXMuX2N1cnJlbnRUaW1lPj10aGlzLl90ZXh0dXJlcy5sZW5ndGgmJiF0aGlzLmxvb3A/KHRoaXMuZ290b0FuZFN0b3AodGhpcy5fdGV4dHVyZXMubGVuZ3RoLTEpLHRoaXMub25Db21wbGV0ZSYmdGhpcy5vbkNvbXBsZXRlKCkpOnIhPT10aGlzLmN1cnJlbnRGcmFtZSYmKHRoaXMubG9vcCYmdGhpcy5vbkxvb3AmJih0aGlzLmFuaW1hdGlvblNwZWVkPjAmJnRoaXMuY3VycmVudEZyYW1lPHI/dGhpcy5vbkxvb3AoKTp0aGlzLmFuaW1hdGlvblNwZWVkPDAmJnRoaXMuY3VycmVudEZyYW1lPnImJnRoaXMub25Mb29wKCkpLHRoaXMudXBkYXRlVGV4dHVyZSgpKX0sZS5wcm90b3R5cGUudXBkYXRlVGV4dHVyZT1mdW5jdGlvbigpe3RoaXMuX3RleHR1cmU9dGhpcy5fdGV4dHVyZXNbdGhpcy5jdXJyZW50RnJhbWVdLHRoaXMuX3RleHR1cmVJRD0tMSx0aGlzLmNhY2hlZFRpbnQ9MTY3NzcyMTUsdGhpcy51cGRhdGVBbmNob3ImJnRoaXMuX2FuY2hvci5jb3B5KHRoaXMuX3RleHR1cmUuZGVmYXVsdEFuY2hvciksdGhpcy5vbkZyYW1lQ2hhbmdlJiZ0aGlzLm9uRnJhbWVDaGFuZ2UodGhpcy5jdXJyZW50RnJhbWUpfSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKGUpe3RoaXMuc3RvcCgpLHQucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzLGUpfSxlLmZyb21GcmFtZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciByPVtdLG49MDtuPHQubGVuZ3RoOysrbilyLnB1c2godS5UZXh0dXJlLmZyb21GcmFtZSh0W25dKSk7cmV0dXJuIG5ldyBlKHIpfSxlLmZyb21JbWFnZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciByPVtdLG49MDtuPHQubGVuZ3RoOysrbilyLnB1c2godS5UZXh0dXJlLmZyb21JbWFnZSh0W25dKSk7cmV0dXJuIG5ldyBlKHIpfSxzKGUsW3trZXk6XCJ0b3RhbEZyYW1lc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90ZXh0dXJlcy5sZW5ndGh9fSx7a2V5OlwidGV4dHVyZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGV4dHVyZXN9LHNldDpmdW5jdGlvbih0KXtpZih0WzBdaW5zdGFuY2VvZiB1LlRleHR1cmUpdGhpcy5fdGV4dHVyZXM9dCx0aGlzLl9kdXJhdGlvbnM9bnVsbDtlbHNle3RoaXMuX3RleHR1cmVzPVtdLHRoaXMuX2R1cmF0aW9ucz1bXTtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKyl0aGlzLl90ZXh0dXJlcy5wdXNoKHRbZV0udGV4dHVyZSksdGhpcy5fZHVyYXRpb25zLnB1c2godFtlXS50aW1lKX10aGlzLmdvdG9BbmRTdG9wKDApLHRoaXMudXBkYXRlVGV4dHVyZSgpfX0se2tleTpcImN1cnJlbnRGcmFtZVwiLGdldDpmdW5jdGlvbigpe3ZhciB0PU1hdGguZmxvb3IodGhpcy5fY3VycmVudFRpbWUpJXRoaXMuX3RleHR1cmVzLmxlbmd0aDtyZXR1cm4gdDwwJiYodCs9dGhpcy5fdGV4dHVyZXMubGVuZ3RoKSx0fX1dKSxlfSh1LlNwcml0ZSk7ci5kZWZhdWx0PWh9LHtcIi4uL2NvcmVcIjo2NX1dLDEzNjpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIGkodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBzKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9ci5fX2VzTW9kdWxlPSEwO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksdT10KFwiLi4vY29yZVwiKSxoPWZ1bmN0aW9uKHQpe2lmKHQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT17fTtpZihudWxsIT10KWZvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKTtyZXR1cm4gZS5kZWZhdWx0PXQsZX0odSksbD10KFwiLi4vY29yZS9tYXRoL09ic2VydmFibGVQb2ludFwiKSxjPW4obCksZD10KFwiLi4vY29yZS91dGlsc1wiKSxmPXQoXCIuLi9jb3JlL3NldHRpbmdzXCIpLHA9bihmKSx2PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUocil7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O2kodGhpcyxlKTt2YXIgcz1vKHRoaXMsdC5jYWxsKHRoaXMpKTtyZXR1cm4gcy5fdGV4dFdpZHRoPTAscy5fdGV4dEhlaWdodD0wLHMuX2dseXBocz1bXSxzLl9mb250PXt0aW50OnZvaWQgMCE9PW4udGludD9uLnRpbnQ6MTY3NzcyMTUsYWxpZ246bi5hbGlnbnx8XCJsZWZ0XCIsbmFtZTpudWxsLHNpemU6MH0scy5mb250PW4uZm9udCxzLl90ZXh0PXIscy5fbWF4V2lkdGg9MCxzLl9tYXhMaW5lSGVpZ2h0PTAscy5fbGV0dGVyU3BhY2luZz0wLHMuX2FuY2hvcj1uZXcgYy5kZWZhdWx0KGZ1bmN0aW9uKCl7cy5kaXJ0eT0hMH0scywwLDApLHMuZGlydHk9ITEscy51cGRhdGVUZXh0KCksc31yZXR1cm4gcyhlLHQpLGUucHJvdG90eXBlLnVwZGF0ZVRleHQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9ZS5mb250c1t0aGlzLl9mb250Lm5hbWVdLHI9dGhpcy5fZm9udC5zaXplL3Quc2l6ZSxuPW5ldyBoLlBvaW50LGk9W10sbz1bXSxzPXRoaXMudGV4dC5yZXBsYWNlKC8oPzpcXHJcXG58XFxyKS9nLFwiXFxuXCIpLGE9cy5sZW5ndGgsdT10aGlzLl9tYXhXaWR0aCp0LnNpemUvdGhpcy5fZm9udC5zaXplLGw9bnVsbCxjPTAsZD0wLGY9MCxwPS0xLHY9MCxnPTAseT0wLG09MDttPGE7bSsrKXt2YXIgXz1zLmNoYXJDb2RlQXQobSksYj1zLmNoYXJBdChtKTtpZigvKD86XFxzKS8udGVzdChiKSYmKHA9bSx2PWMpLFwiXFxyXCIhPT1iJiZcIlxcblwiIT09Yil7dmFyIHg9dC5jaGFyc1tfXTt4JiYobCYmeC5rZXJuaW5nW2xdJiYobi54Kz14Lmtlcm5pbmdbbF0pLGkucHVzaCh7dGV4dHVyZTp4LnRleHR1cmUsbGluZTpmLGNoYXJDb2RlOl8scG9zaXRpb246bmV3IGguUG9pbnQobi54K3gueE9mZnNldCt0aGlzLl9sZXR0ZXJTcGFjaW5nLzIsbi55K3gueU9mZnNldCl9KSxuLngrPXgueEFkdmFuY2UrdGhpcy5fbGV0dGVyU3BhY2luZyxjPW4ueCx5PU1hdGgubWF4KHkseC55T2Zmc2V0K3gudGV4dHVyZS5oZWlnaHQpLGw9XywtMSE9PXAmJnU+MCYmbi54PnUmJigrK2csaC51dGlscy5yZW1vdmVJdGVtcyhpLDErcC1nLDErbS1wKSxtPXAscD0tMSxvLnB1c2godiksZD1NYXRoLm1heChkLHYpLGYrKyxuLng9MCxuLnkrPXQubGluZUhlaWdodCxsPW51bGwpKX1lbHNlIG8ucHVzaChjKSxkPU1hdGgubWF4KGQsYyksKytmLCsrZyxuLng9MCxuLnkrPXQubGluZUhlaWdodCxsPW51bGx9dmFyIFQ9cy5jaGFyQXQocy5sZW5ndGgtMSk7XCJcXHJcIiE9PVQmJlwiXFxuXCIhPT1UJiYoLyg/OlxccykvLnRlc3QoVCkmJihjPXYpLG8ucHVzaChjKSxkPU1hdGgubWF4KGQsYykpO2Zvcih2YXIgdz1bXSxFPTA7RTw9ZjtFKyspe3ZhciBTPTA7XCJyaWdodFwiPT09dGhpcy5fZm9udC5hbGlnbj9TPWQtb1tFXTpcImNlbnRlclwiPT09dGhpcy5fZm9udC5hbGlnbiYmKFM9KGQtb1tFXSkvMiksdy5wdXNoKFMpfWZvcih2YXIgTz1pLmxlbmd0aCxNPXRoaXMudGludCxQPTA7UDxPO1ArKyl7dmFyIEM9dGhpcy5fZ2x5cGhzW1BdO0M/Qy50ZXh0dXJlPWlbUF0udGV4dHVyZTooQz1uZXcgaC5TcHJpdGUoaVtQXS50ZXh0dXJlKSx0aGlzLl9nbHlwaHMucHVzaChDKSksQy5wb3NpdGlvbi54PShpW1BdLnBvc2l0aW9uLngrd1tpW1BdLmxpbmVdKSpyLEMucG9zaXRpb24ueT1pW1BdLnBvc2l0aW9uLnkqcixDLnNjYWxlLng9Qy5zY2FsZS55PXIsQy50aW50PU0sQy5wYXJlbnR8fHRoaXMuYWRkQ2hpbGQoQyl9Zm9yKHZhciBSPU87Ujx0aGlzLl9nbHlwaHMubGVuZ3RoOysrUil0aGlzLnJlbW92ZUNoaWxkKHRoaXMuX2dseXBoc1tSXSk7aWYodGhpcy5fdGV4dFdpZHRoPWQqcix0aGlzLl90ZXh0SGVpZ2h0PShuLnkrdC5saW5lSGVpZ2h0KSpyLDAhPT10aGlzLmFuY2hvci54fHwwIT09dGhpcy5hbmNob3IueSlmb3IodmFyIEE9MDtBPE87QSsrKXRoaXMuX2dseXBoc1tBXS54LT10aGlzLl90ZXh0V2lkdGgqdGhpcy5hbmNob3IueCx0aGlzLl9nbHlwaHNbQV0ueS09dGhpcy5fdGV4dEhlaWdodCp0aGlzLmFuY2hvci55O3RoaXMuX21heExpbmVIZWlnaHQ9eSpyfSxlLnByb3RvdHlwZS51cGRhdGVUcmFuc2Zvcm09ZnVuY3Rpb24oKXt0aGlzLnZhbGlkYXRlKCksdGhpcy5jb250YWluZXJVcGRhdGVUcmFuc2Zvcm0oKX0sZS5wcm90b3R5cGUuZ2V0TG9jYWxCb3VuZHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWxpZGF0ZSgpLHQucHJvdG90eXBlLmdldExvY2FsQm91bmRzLmNhbGwodGhpcyl9LGUucHJvdG90eXBlLnZhbGlkYXRlPWZ1bmN0aW9uKCl7dGhpcy5kaXJ0eSYmKHRoaXMudXBkYXRlVGV4dCgpLHRoaXMuZGlydHk9ITEpfSxlLnJlZ2lzdGVyRm9udD1mdW5jdGlvbih0LHIpe3ZhciBuPXt9LGk9dC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImluZm9cIilbMF0sbz10LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiY29tbW9uXCIpWzBdLHM9dC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInBhZ2VcIiksYT0oMCxkLmdldFJlc29sdXRpb25PZlVybCkoc1swXS5nZXRBdHRyaWJ1dGUoXCJmaWxlXCIpLHAuZGVmYXVsdC5SRVNPTFVUSU9OKSx1PXt9O24uZm9udD1pLmdldEF0dHJpYnV0ZShcImZhY2VcIiksbi5zaXplPXBhcnNlSW50KGkuZ2V0QXR0cmlidXRlKFwic2l6ZVwiKSwxMCksbi5saW5lSGVpZ2h0PXBhcnNlSW50KG8uZ2V0QXR0cmlidXRlKFwibGluZUhlaWdodFwiKSwxMCkvYSxuLmNoYXJzPXt9LHIgaW5zdGFuY2VvZiBoLlRleHR1cmUmJihyPVtyXSk7Zm9yKHZhciBsPTA7bDxzLmxlbmd0aDtsKyspe3ZhciBjPXNbbF0uZ2V0QXR0cmlidXRlKFwiaWRcIiksZj1zW2xdLmdldEF0dHJpYnV0ZShcImZpbGVcIik7dVtjXT1yIGluc3RhbmNlb2YgQXJyYXk/cltsXTpyW2ZdfWZvcih2YXIgdj10LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiY2hhclwiKSxnPTA7Zzx2Lmxlbmd0aDtnKyspe3ZhciB5PXZbZ10sbT1wYXJzZUludCh5LmdldEF0dHJpYnV0ZShcImlkXCIpLDEwKSxfPXkuZ2V0QXR0cmlidXRlKFwicGFnZVwiKXx8MCxiPW5ldyBoLlJlY3RhbmdsZShwYXJzZUludCh5LmdldEF0dHJpYnV0ZShcInhcIiksMTApL2ErdVtfXS5mcmFtZS54L2EscGFyc2VJbnQoeS5nZXRBdHRyaWJ1dGUoXCJ5XCIpLDEwKS9hK3VbX10uZnJhbWUueS9hLHBhcnNlSW50KHkuZ2V0QXR0cmlidXRlKFwid2lkdGhcIiksMTApL2EscGFyc2VJbnQoeS5nZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiksMTApL2EpO24uY2hhcnNbbV09e3hPZmZzZXQ6cGFyc2VJbnQoeS5nZXRBdHRyaWJ1dGUoXCJ4b2Zmc2V0XCIpLDEwKS9hLHlPZmZzZXQ6cGFyc2VJbnQoeS5nZXRBdHRyaWJ1dGUoXCJ5b2Zmc2V0XCIpLDEwKS9hLHhBZHZhbmNlOnBhcnNlSW50KHkuZ2V0QXR0cmlidXRlKFwieGFkdmFuY2VcIiksMTApL2Esa2VybmluZzp7fSx0ZXh0dXJlOm5ldyBoLlRleHR1cmUodVtfXS5iYXNlVGV4dHVyZSxiKSxwYWdlOl99fWZvcih2YXIgeD10LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwia2VybmluZ1wiKSxUPTA7VDx4Lmxlbmd0aDtUKyspe3ZhciB3PXhbVF0sRT1wYXJzZUludCh3LmdldEF0dHJpYnV0ZShcImZpcnN0XCIpLDEwKS9hLFM9cGFyc2VJbnQody5nZXRBdHRyaWJ1dGUoXCJzZWNvbmRcIiksMTApL2EsTz1wYXJzZUludCh3LmdldEF0dHJpYnV0ZShcImFtb3VudFwiKSwxMCkvYTtuLmNoYXJzW1NdJiYobi5jaGFyc1tTXS5rZXJuaW5nW0VdPU8pfXJldHVybiBlLmZvbnRzW24uZm9udF09bixufSxhKGUsW3trZXk6XCJ0aW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZvbnQudGludH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2ZvbnQudGludD1cIm51bWJlclwiPT10eXBlb2YgdCYmdD49MD90OjE2Nzc3MjE1LHRoaXMuZGlydHk9ITB9fSx7a2V5OlwiYWxpZ25cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9udC5hbGlnbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2ZvbnQuYWxpZ249dHx8XCJsZWZ0XCIsdGhpcy5kaXJ0eT0hMH19LHtrZXk6XCJhbmNob3JcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYW5jaG9yfSxzZXQ6ZnVuY3Rpb24odCl7XCJudW1iZXJcIj09dHlwZW9mIHQ/dGhpcy5fYW5jaG9yLnNldCh0KTp0aGlzLl9hbmNob3IuY29weSh0KX19LHtrZXk6XCJmb250XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZvbnR9LHNldDpmdW5jdGlvbih0KXt0JiYoXCJzdHJpbmdcIj09dHlwZW9mIHQ/KHQ9dC5zcGxpdChcIiBcIiksdGhpcy5fZm9udC5uYW1lPTE9PT10Lmxlbmd0aD90WzBdOnQuc2xpY2UoMSkuam9pbihcIiBcIiksdGhpcy5fZm9udC5zaXplPXQubGVuZ3RoPj0yP3BhcnNlSW50KHRbMF0sMTApOmUuZm9udHNbdGhpcy5fZm9udC5uYW1lXS5zaXplKToodGhpcy5fZm9udC5uYW1lPXQubmFtZSx0aGlzLl9mb250LnNpemU9XCJudW1iZXJcIj09dHlwZW9mIHQuc2l6ZT90LnNpemU6cGFyc2VJbnQodC5zaXplLDEwKSksdGhpcy5kaXJ0eT0hMCl9fSx7a2V5OlwidGV4dFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90ZXh0fSxzZXQ6ZnVuY3Rpb24odCl7dD10LnRvU3RyaW5nKCl8fFwiIFwiLHRoaXMuX3RleHQhPT10JiYodGhpcy5fdGV4dD10LHRoaXMuZGlydHk9ITApfX0se2tleTpcIm1heFdpZHRoXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21heFdpZHRofSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbWF4V2lkdGghPT10JiYodGhpcy5fbWF4V2lkdGg9dCx0aGlzLmRpcnR5PSEwKX19LHtrZXk6XCJtYXhMaW5lSGVpZ2h0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsaWRhdGUoKSx0aGlzLl9tYXhMaW5lSGVpZ2h0fX0se2tleTpcInRleHRXaWR0aFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbGlkYXRlKCksdGhpcy5fdGV4dFdpZHRofX0se2tleTpcImxldHRlclNwYWNpbmdcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGV0dGVyU3BhY2luZ30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xldHRlclNwYWNpbmchPT10JiYodGhpcy5fbGV0dGVyU3BhY2luZz10LHRoaXMuZGlydHk9ITApfX0se2tleTpcInRleHRIZWlnaHRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWxpZGF0ZSgpLHRoaXMuX3RleHRIZWlnaHR9fV0pLGV9KGguQ29udGFpbmVyKTtyLmRlZmF1bHQ9dix2LmZvbnRzPXt9fSx7XCIuLi9jb3JlXCI6NjUsXCIuLi9jb3JlL21hdGgvT2JzZXJ2YWJsZVBvaW50XCI6NjgsXCIuLi9jb3JlL3NldHRpbmdzXCI6MTAxLFwiLi4vY29yZS91dGlsc1wiOjEyNX1dLDEzNzpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkodCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBvKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9ci5fX2VzTW9kdWxlPSEwO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksYT10KFwiLi4vY29yZVwiKSx1PWZ1bmN0aW9uKHQpe2lmKHQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT17fTtpZihudWxsIT10KWZvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKTtyZXR1cm4gZS5kZWZhdWx0PXQsZX0oYSksaD10KFwiLi4vY29yZS9zcHJpdGVzL2NhbnZhcy9DYW52YXNUaW50ZXJcIiksbD1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KGgpLGM9bmV3IHUuUG9pbnQsZD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHIpe3ZhciBvPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXToxMDAscz1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06MTAwO24odGhpcyxlKTt2YXIgYT1pKHRoaXMsdC5jYWxsKHRoaXMscikpO3JldHVybiBhLnRpbGVUcmFuc2Zvcm09bmV3IHUuVHJhbnNmb3JtU3RhdGljLGEuX3dpZHRoPW8sYS5faGVpZ2h0PXMsYS5fY2FudmFzUGF0dGVybj1udWxsLGEudXZUcmFuc2Zvcm09ci50cmFuc2Zvcm18fG5ldyB1LlRleHR1cmVNYXRyaXgociksYS5wbHVnaW5OYW1lPVwidGlsaW5nU3ByaXRlXCIsYS51dlJlc3BlY3RBbmNob3I9ITEsYX1yZXR1cm4gbyhlLHQpLGUucHJvdG90eXBlLl9vblRleHR1cmVVcGRhdGU9ZnVuY3Rpb24oKXt0aGlzLnV2VHJhbnNmb3JtJiYodGhpcy51dlRyYW5zZm9ybS50ZXh0dXJlPXRoaXMuX3RleHR1cmUpLHRoaXMuY2FjaGVkVGludD0xNjc3NzIxNX0sZS5wcm90b3R5cGUuX3JlbmRlcldlYkdMPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3RleHR1cmU7ZSYmZS52YWxpZCYmKHRoaXMudGlsZVRyYW5zZm9ybS51cGRhdGVMb2NhbFRyYW5zZm9ybSgpLHRoaXMudXZUcmFuc2Zvcm0udXBkYXRlKCksdC5zZXRPYmplY3RSZW5kZXJlcih0LnBsdWdpbnNbdGhpcy5wbHVnaW5OYW1lXSksdC5wbHVnaW5zW3RoaXMucGx1Z2luTmFtZV0ucmVuZGVyKHRoaXMpKX0sZS5wcm90b3R5cGUuX3JlbmRlckNhbnZhcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl90ZXh0dXJlO2lmKGUuYmFzZVRleHR1cmUuaGFzTG9hZGVkKXt2YXIgcj10LmNvbnRleHQsbj10aGlzLndvcmxkVHJhbnNmb3JtLGk9dC5yZXNvbHV0aW9uLG89Mj09PWUucm90YXRlLHM9ZS5iYXNlVGV4dHVyZSxhPXMucmVzb2x1dGlvbixoPXRoaXMudGlsZVBvc2l0aW9uLngvdGhpcy50aWxlU2NhbGUueCVlLm9yaWcud2lkdGgqYSxjPXRoaXMudGlsZVBvc2l0aW9uLnkvdGhpcy50aWxlU2NhbGUueSVlLm9yaWcuaGVpZ2h0KmE7aWYodGhpcy5fdGV4dHVyZUlEIT09dGhpcy5fdGV4dHVyZS5fdXBkYXRlSUR8fHRoaXMuY2FjaGVkVGludCE9PXRoaXMudGludCl7dGhpcy5fdGV4dHVyZUlEPXRoaXMuX3RleHR1cmUuX3VwZGF0ZUlEO3ZhciBkPW5ldyB1LkNhbnZhc1JlbmRlclRhcmdldChlLm9yaWcud2lkdGgsZS5vcmlnLmhlaWdodCxhKTtpZigxNjc3NzIxNSE9PXRoaXMudGludCl0aGlzLnRpbnRlZFRleHR1cmU9bC5kZWZhdWx0LmdldFRpbnRlZFRleHR1cmUodGhpcyx0aGlzLnRpbnQpLGQuY29udGV4dC5kcmF3SW1hZ2UodGhpcy50aW50ZWRUZXh0dXJlLDAsMCk7ZWxzZXt2YXIgZj1lLl9mcmFtZS54KmEscD1lLl9mcmFtZS55KmEsdj1lLl9mcmFtZS53aWR0aCphLGc9ZS5fZnJhbWUuaGVpZ2h0KmEseT0oZS50cmltP2UudHJpbS53aWR0aDplLm9yaWcud2lkdGgpKmEsbT0oZS50cmltP2UudHJpbS5oZWlnaHQ6ZS5vcmlnLmhlaWdodCkqYSxfPShlLnRyaW0/ZS50cmltLng6MCkqYSxiPShlLnRyaW0/ZS50cmltLnk6MCkqYTtvPyhkLmNvbnRleHQucm90YXRlKC1NYXRoLlBJLzIpLGQuY29udGV4dC50cmFuc2xhdGUoLW0sMCksZC5jb250ZXh0LmRyYXdJbWFnZShzLnNvdXJjZSxmLHAsdixnLC1iLF8sbSx5KSk6ZC5jb250ZXh0LmRyYXdJbWFnZShzLnNvdXJjZSxmLHAsdixnLF8sYix5LG0pfXRoaXMuY2FjaGVkVGludD10aGlzLnRpbnQsdGhpcy5fY2FudmFzUGF0dGVybj1kLmNvbnRleHQuY3JlYXRlUGF0dGVybihkLmNhbnZhcyxcInJlcGVhdFwiKX1yLmdsb2JhbEFscGhhPXRoaXMud29ybGRBbHBoYSxyLnNldFRyYW5zZm9ybShuLmEqaSxuLmIqaSxuLmMqaSxuLmQqaSxuLnR4Kmksbi50eSppKSx0LnNldEJsZW5kTW9kZSh0aGlzLmJsZW5kTW9kZSksci5maWxsU3R5bGU9dGhpcy5fY2FudmFzUGF0dGVybixyLnNjYWxlKHRoaXMudGlsZVNjYWxlLngvYSx0aGlzLnRpbGVTY2FsZS55L2EpO3ZhciB4PXRoaXMuYW5jaG9yLngqLXRoaXMuX3dpZHRoKmEsVD10aGlzLmFuY2hvci55Ki10aGlzLl9oZWlnaHQqYTt0aGlzLnV2UmVzcGVjdEFuY2hvcj8oci50cmFuc2xhdGUoaCxjKSxcbnIuZmlsbFJlY3QoLWgreCwtYytULHRoaXMuX3dpZHRoL3RoaXMudGlsZVNjYWxlLngqYSx0aGlzLl9oZWlnaHQvdGhpcy50aWxlU2NhbGUueSphKSk6KHIudHJhbnNsYXRlKGgreCxjK1QpLHIuZmlsbFJlY3QoLWgsLWMsdGhpcy5fd2lkdGgvdGhpcy50aWxlU2NhbGUueCphLHRoaXMuX2hlaWdodC90aGlzLnRpbGVTY2FsZS55KmEpKX19LGUucHJvdG90eXBlLl9jYWxjdWxhdGVCb3VuZHM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl93aWR0aCotdGhpcy5fYW5jaG9yLl94LGU9dGhpcy5faGVpZ2h0Ki10aGlzLl9hbmNob3IuX3kscj10aGlzLl93aWR0aCooMS10aGlzLl9hbmNob3IuX3gpLG49dGhpcy5faGVpZ2h0KigxLXRoaXMuX2FuY2hvci5feSk7dGhpcy5fYm91bmRzLmFkZEZyYW1lKHRoaXMudHJhbnNmb3JtLHQsZSxyLG4pfSxlLnByb3RvdHlwZS5nZXRMb2NhbEJvdW5kcz1mdW5jdGlvbihlKXtyZXR1cm4gMD09PXRoaXMuY2hpbGRyZW4ubGVuZ3RoPyh0aGlzLl9ib3VuZHMubWluWD10aGlzLl93aWR0aCotdGhpcy5fYW5jaG9yLl94LHRoaXMuX2JvdW5kcy5taW5ZPXRoaXMuX2hlaWdodCotdGhpcy5fYW5jaG9yLl95LHRoaXMuX2JvdW5kcy5tYXhYPXRoaXMuX3dpZHRoKigxLXRoaXMuX2FuY2hvci5feCksdGhpcy5fYm91bmRzLm1heFk9dGhpcy5faGVpZ2h0KigxLXRoaXMuX2FuY2hvci5feSksZXx8KHRoaXMuX2xvY2FsQm91bmRzUmVjdHx8KHRoaXMuX2xvY2FsQm91bmRzUmVjdD1uZXcgdS5SZWN0YW5nbGUpLGU9dGhpcy5fbG9jYWxCb3VuZHNSZWN0KSx0aGlzLl9ib3VuZHMuZ2V0UmVjdGFuZ2xlKGUpKTp0LnByb3RvdHlwZS5nZXRMb2NhbEJvdW5kcy5jYWxsKHRoaXMsZSl9LGUucHJvdG90eXBlLmNvbnRhaW5zUG9pbnQ9ZnVuY3Rpb24odCl7dGhpcy53b3JsZFRyYW5zZm9ybS5hcHBseUludmVyc2UodCxjKTt2YXIgZT10aGlzLl93aWR0aCxyPXRoaXMuX2hlaWdodCxuPS1lKnRoaXMuYW5jaG9yLl94O2lmKGMueD49biYmYy54PG4rZSl7dmFyIGk9LXIqdGhpcy5hbmNob3IuX3k7aWYoYy55Pj1pJiZjLnk8aStyKXJldHVybiEwfXJldHVybiExfSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKGUpe3QucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzLGUpLHRoaXMudGlsZVRyYW5zZm9ybT1udWxsLHRoaXMudXZUcmFuc2Zvcm09bnVsbH0sZS5mcm9tPWZ1bmN0aW9uKHQscixuKXtyZXR1cm4gbmV3IGUodS5UZXh0dXJlLmZyb20odCkscixuKX0sZS5mcm9tRnJhbWU9ZnVuY3Rpb24odCxyLG4pe3ZhciBpPXUudXRpbHMuVGV4dHVyZUNhY2hlW3RdO2lmKCFpKXRocm93IG5ldyBFcnJvcignVGhlIGZyYW1lSWQgXCInK3QrJ1wiIGRvZXMgbm90IGV4aXN0IGluIHRoZSB0ZXh0dXJlIGNhY2hlICcrdGhpcyk7cmV0dXJuIG5ldyBlKGkscixuKX0sZS5mcm9tSW1hZ2U9ZnVuY3Rpb24odCxyLG4saSxvKXtyZXR1cm4gbmV3IGUodS5UZXh0dXJlLmZyb21JbWFnZSh0LGksbykscixuKX0scyhlLFt7a2V5OlwiY2xhbXBNYXJnaW5cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51dlRyYW5zZm9ybS5jbGFtcE1hcmdpbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMudXZUcmFuc2Zvcm0uY2xhbXBNYXJnaW49dCx0aGlzLnV2VHJhbnNmb3JtLnVwZGF0ZSghMCl9fSx7a2V5OlwidGlsZVNjYWxlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGlsZVRyYW5zZm9ybS5zY2FsZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMudGlsZVRyYW5zZm9ybS5zY2FsZS5jb3B5KHQpfX0se2tleTpcInRpbGVQb3NpdGlvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRpbGVUcmFuc2Zvcm0ucG9zaXRpb259LHNldDpmdW5jdGlvbih0KXt0aGlzLnRpbGVUcmFuc2Zvcm0ucG9zaXRpb24uY29weSh0KX19LHtrZXk6XCJ3aWR0aFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93aWR0aH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3dpZHRoPXR9fSx7a2V5OlwiaGVpZ2h0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hlaWdodH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2hlaWdodD10fX1dKSxlfSh1LlNwcml0ZSk7ci5kZWZhdWx0PWR9LHtcIi4uL2NvcmVcIjo2NSxcIi4uL2NvcmUvc3ByaXRlcy9jYW52YXMvQ2FudmFzVGludGVyXCI6MTA0fV0sMTM4OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9dmFyIG89dChcIi4uL2NvcmVcIikscz1mdW5jdGlvbih0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9e307aWYobnVsbCE9dClmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSk7cmV0dXJuIGUuZGVmYXVsdD10LGV9KG8pLGE9dChcIi4uL2NvcmUvdGV4dHVyZXMvVGV4dHVyZVwiKSx1PW4oYSksaD10KFwiLi4vY29yZS90ZXh0dXJlcy9CYXNlVGV4dHVyZVwiKSxsPW4oaCksYz10KFwiLi4vY29yZS91dGlsc1wiKSxkPXMuRGlzcGxheU9iamVjdCxmPW5ldyBzLk1hdHJpeDtkLnByb3RvdHlwZS5fY2FjaGVBc0JpdG1hcD0hMSxkLnByb3RvdHlwZS5fY2FjaGVEYXRhPSExO3ZhciBwPWZ1bmN0aW9uIHQoKXtpKHRoaXMsdCksdGhpcy50ZXh0dXJlQ2FjaGVJZD1udWxsLHRoaXMub3JpZ2luYWxSZW5kZXJXZWJHTD1udWxsLHRoaXMub3JpZ2luYWxSZW5kZXJDYW52YXM9bnVsbCx0aGlzLm9yaWdpbmFsQ2FsY3VsYXRlQm91bmRzPW51bGwsdGhpcy5vcmlnaW5hbEdldExvY2FsQm91bmRzPW51bGwsdGhpcy5vcmlnaW5hbFVwZGF0ZVRyYW5zZm9ybT1udWxsLHRoaXMub3JpZ2luYWxIaXRUZXN0PW51bGwsdGhpcy5vcmlnaW5hbERlc3Ryb3k9bnVsbCx0aGlzLm9yaWdpbmFsTWFzaz1udWxsLHRoaXMub3JpZ2luYWxGaWx0ZXJBcmVhPW51bGwsdGhpcy5zcHJpdGU9bnVsbH07T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZC5wcm90b3R5cGUse2NhY2hlQXNCaXRtYXA6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jYWNoZUFzQml0bWFwfSxzZXQ6ZnVuY3Rpb24odCl7aWYodGhpcy5fY2FjaGVBc0JpdG1hcCE9PXQpe3RoaXMuX2NhY2hlQXNCaXRtYXA9dDt2YXIgZT12b2lkIDA7dD8odGhpcy5fY2FjaGVEYXRhfHwodGhpcy5fY2FjaGVEYXRhPW5ldyBwKSxlPXRoaXMuX2NhY2hlRGF0YSxlLm9yaWdpbmFsUmVuZGVyV2ViR0w9dGhpcy5yZW5kZXJXZWJHTCxlLm9yaWdpbmFsUmVuZGVyQ2FudmFzPXRoaXMucmVuZGVyQ2FudmFzLGUub3JpZ2luYWxVcGRhdGVUcmFuc2Zvcm09dGhpcy51cGRhdGVUcmFuc2Zvcm0sZS5vcmlnaW5hbENhbGN1bGF0ZUJvdW5kcz10aGlzLmNhbGN1bGF0ZUJvdW5kcyxlLm9yaWdpbmFsR2V0TG9jYWxCb3VuZHM9dGhpcy5nZXRMb2NhbEJvdW5kcyxlLm9yaWdpbmFsRGVzdHJveT10aGlzLmRlc3Ryb3ksZS5vcmlnaW5hbENvbnRhaW5zUG9pbnQ9dGhpcy5jb250YWluc1BvaW50LGUub3JpZ2luYWxNYXNrPXRoaXMuX21hc2ssZS5vcmlnaW5hbEZpbHRlckFyZWE9dGhpcy5maWx0ZXJBcmVhLHRoaXMucmVuZGVyV2ViR0w9dGhpcy5fcmVuZGVyQ2FjaGVkV2ViR0wsdGhpcy5yZW5kZXJDYW52YXM9dGhpcy5fcmVuZGVyQ2FjaGVkQ2FudmFzLHRoaXMuZGVzdHJveT10aGlzLl9jYWNoZUFzQml0bWFwRGVzdHJveSk6KGU9dGhpcy5fY2FjaGVEYXRhLGUuc3ByaXRlJiZ0aGlzLl9kZXN0cm95Q2FjaGVkRGlzcGxheU9iamVjdCgpLHRoaXMucmVuZGVyV2ViR0w9ZS5vcmlnaW5hbFJlbmRlcldlYkdMLHRoaXMucmVuZGVyQ2FudmFzPWUub3JpZ2luYWxSZW5kZXJDYW52YXMsdGhpcy5jYWxjdWxhdGVCb3VuZHM9ZS5vcmlnaW5hbENhbGN1bGF0ZUJvdW5kcyx0aGlzLmdldExvY2FsQm91bmRzPWUub3JpZ2luYWxHZXRMb2NhbEJvdW5kcyx0aGlzLmRlc3Ryb3k9ZS5vcmlnaW5hbERlc3Ryb3ksdGhpcy51cGRhdGVUcmFuc2Zvcm09ZS5vcmlnaW5hbFVwZGF0ZVRyYW5zZm9ybSx0aGlzLmNvbnRhaW5zUG9pbnQ9ZS5vcmlnaW5hbENvbnRhaW5zUG9pbnQsdGhpcy5fbWFzaz1lLm9yaWdpbmFsTWFzayx0aGlzLmZpbHRlckFyZWE9ZS5vcmlnaW5hbEZpbHRlckFyZWEpfX19fSksZC5wcm90b3R5cGUuX3JlbmRlckNhY2hlZFdlYkdMPWZ1bmN0aW9uKHQpeyF0aGlzLnZpc2libGV8fHRoaXMud29ybGRBbHBoYTw9MHx8IXRoaXMucmVuZGVyYWJsZXx8KHRoaXMuX2luaXRDYWNoZWREaXNwbGF5T2JqZWN0KHQpLHRoaXMuX2NhY2hlRGF0YS5zcHJpdGUudHJhbnNmb3JtLl93b3JsZElEPXRoaXMudHJhbnNmb3JtLl93b3JsZElELHRoaXMuX2NhY2hlRGF0YS5zcHJpdGUud29ybGRBbHBoYT10aGlzLndvcmxkQWxwaGEsdGhpcy5fY2FjaGVEYXRhLnNwcml0ZS5fcmVuZGVyV2ViR0wodCkpfSxkLnByb3RvdHlwZS5faW5pdENhY2hlZERpc3BsYXlPYmplY3Q9ZnVuY3Rpb24odCl7aWYoIXRoaXMuX2NhY2hlRGF0YXx8IXRoaXMuX2NhY2hlRGF0YS5zcHJpdGUpe3ZhciBlPXRoaXMuYWxwaGE7dGhpcy5hbHBoYT0xLHQuY3VycmVudFJlbmRlcmVyLmZsdXNoKCk7dmFyIHI9dGhpcy5nZXRMb2NhbEJvdW5kcygpLmNsb25lKCk7aWYodGhpcy5fZmlsdGVycyYmdGhpcy5fZmlsdGVycy5sZW5ndGgpe3ZhciBuPXRoaXMuX2ZpbHRlcnNbMF0ucGFkZGluZztyLnBhZChuKX1yLmNlaWwocy5zZXR0aW5ncy5SRVNPTFVUSU9OKTt2YXIgaT10Ll9hY3RpdmVSZW5kZXJUYXJnZXQsbz10LmZpbHRlck1hbmFnZXIuZmlsdGVyU3RhY2ssYT1zLlJlbmRlclRleHR1cmUuY3JlYXRlKHIud2lkdGgsci5oZWlnaHQpLGg9XCJjYWNoZUFzQml0bWFwX1wiKygwLGMudWlkKSgpO3RoaXMuX2NhY2hlRGF0YS50ZXh0dXJlQ2FjaGVJZD1oLGwuZGVmYXVsdC5hZGRUb0NhY2hlKGEuYmFzZVRleHR1cmUsaCksdS5kZWZhdWx0LmFkZFRvQ2FjaGUoYSxoKTt2YXIgZD1mO2QudHg9LXIueCxkLnR5PS1yLnksdGhpcy50cmFuc2Zvcm0ud29ybGRUcmFuc2Zvcm0uaWRlbnRpdHkoKSx0aGlzLnJlbmRlcldlYkdMPXRoaXMuX2NhY2hlRGF0YS5vcmlnaW5hbFJlbmRlcldlYkdMLHQucmVuZGVyKHRoaXMsYSwhMCxkLCEwKSx0LmJpbmRSZW5kZXJUYXJnZXQoaSksdC5maWx0ZXJNYW5hZ2VyLmZpbHRlclN0YWNrPW8sdGhpcy5yZW5kZXJXZWJHTD10aGlzLl9yZW5kZXJDYWNoZWRXZWJHTCx0aGlzLnVwZGF0ZVRyYW5zZm9ybT10aGlzLmRpc3BsYXlPYmplY3RVcGRhdGVUcmFuc2Zvcm0sdGhpcy5jYWxjdWxhdGVCb3VuZHM9dGhpcy5fY2FsY3VsYXRlQ2FjaGVkQm91bmRzLHRoaXMuZ2V0TG9jYWxCb3VuZHM9dGhpcy5fZ2V0Q2FjaGVkTG9jYWxCb3VuZHMsdGhpcy5fbWFzaz1udWxsLHRoaXMuZmlsdGVyQXJlYT1udWxsO3ZhciBwPW5ldyBzLlNwcml0ZShhKTtwLnRyYW5zZm9ybS53b3JsZFRyYW5zZm9ybT10aGlzLnRyYW5zZm9ybS53b3JsZFRyYW5zZm9ybSxwLmFuY2hvci54PS1yLngvci53aWR0aCxwLmFuY2hvci55PS1yLnkvci5oZWlnaHQscC5hbHBoYT1lLHAuX2JvdW5kcz10aGlzLl9ib3VuZHMsdGhpcy5fY2FjaGVEYXRhLnNwcml0ZT1wLHRoaXMudHJhbnNmb3JtLl9wYXJlbnRJRD0tMSx0aGlzLnBhcmVudD90aGlzLnVwZGF0ZVRyYW5zZm9ybSgpOih0aGlzLnBhcmVudD10Ll90ZW1wRGlzcGxheU9iamVjdFBhcmVudCx0aGlzLnVwZGF0ZVRyYW5zZm9ybSgpLHRoaXMucGFyZW50PW51bGwpLHRoaXMuY29udGFpbnNQb2ludD1wLmNvbnRhaW5zUG9pbnQuYmluZChwKX19LGQucHJvdG90eXBlLl9yZW5kZXJDYWNoZWRDYW52YXM9ZnVuY3Rpb24odCl7IXRoaXMudmlzaWJsZXx8dGhpcy53b3JsZEFscGhhPD0wfHwhdGhpcy5yZW5kZXJhYmxlfHwodGhpcy5faW5pdENhY2hlZERpc3BsYXlPYmplY3RDYW52YXModCksdGhpcy5fY2FjaGVEYXRhLnNwcml0ZS53b3JsZEFscGhhPXRoaXMud29ybGRBbHBoYSx0aGlzLl9jYWNoZURhdGEuc3ByaXRlLl9yZW5kZXJDYW52YXModCkpfSxkLnByb3RvdHlwZS5faW5pdENhY2hlZERpc3BsYXlPYmplY3RDYW52YXM9ZnVuY3Rpb24odCl7aWYoIXRoaXMuX2NhY2hlRGF0YXx8IXRoaXMuX2NhY2hlRGF0YS5zcHJpdGUpe3ZhciBlPXRoaXMuZ2V0TG9jYWxCb3VuZHMoKSxyPXRoaXMuYWxwaGE7dGhpcy5hbHBoYT0xO3ZhciBuPXQuY29udGV4dDtlLmNlaWwocy5zZXR0aW5ncy5SRVNPTFVUSU9OKTt2YXIgaT1zLlJlbmRlclRleHR1cmUuY3JlYXRlKGUud2lkdGgsZS5oZWlnaHQpLG89XCJjYWNoZUFzQml0bWFwX1wiKygwLGMudWlkKSgpO3RoaXMuX2NhY2hlRGF0YS50ZXh0dXJlQ2FjaGVJZD1vLGwuZGVmYXVsdC5hZGRUb0NhY2hlKGkuYmFzZVRleHR1cmUsbyksdS5kZWZhdWx0LmFkZFRvQ2FjaGUoaSxvKTt2YXIgYT1mO3RoaXMudHJhbnNmb3JtLmxvY2FsVHJhbnNmb3JtLmNvcHkoYSksYS5pbnZlcnQoKSxhLnR4LT1lLngsYS50eS09ZS55LHRoaXMucmVuZGVyQ2FudmFzPXRoaXMuX2NhY2hlRGF0YS5vcmlnaW5hbFJlbmRlckNhbnZhcyx0LnJlbmRlcih0aGlzLGksITAsYSwhMSksdC5jb250ZXh0PW4sdGhpcy5yZW5kZXJDYW52YXM9dGhpcy5fcmVuZGVyQ2FjaGVkQ2FudmFzLHRoaXMudXBkYXRlVHJhbnNmb3JtPXRoaXMuZGlzcGxheU9iamVjdFVwZGF0ZVRyYW5zZm9ybSx0aGlzLmNhbGN1bGF0ZUJvdW5kcz10aGlzLl9jYWxjdWxhdGVDYWNoZWRCb3VuZHMsdGhpcy5nZXRMb2NhbEJvdW5kcz10aGlzLl9nZXRDYWNoZWRMb2NhbEJvdW5kcyx0aGlzLl9tYXNrPW51bGwsdGhpcy5maWx0ZXJBcmVhPW51bGw7dmFyIGg9bmV3IHMuU3ByaXRlKGkpO2gudHJhbnNmb3JtLndvcmxkVHJhbnNmb3JtPXRoaXMudHJhbnNmb3JtLndvcmxkVHJhbnNmb3JtLGguYW5jaG9yLng9LWUueC9lLndpZHRoLGguYW5jaG9yLnk9LWUueS9lLmhlaWdodCxoLmFscGhhPXIsaC5fYm91bmRzPXRoaXMuX2JvdW5kcyx0aGlzLl9jYWNoZURhdGEuc3ByaXRlPWgsdGhpcy50cmFuc2Zvcm0uX3BhcmVudElEPS0xLHRoaXMucGFyZW50P3RoaXMudXBkYXRlVHJhbnNmb3JtKCk6KHRoaXMucGFyZW50PXQuX3RlbXBEaXNwbGF5T2JqZWN0UGFyZW50LHRoaXMudXBkYXRlVHJhbnNmb3JtKCksdGhpcy5wYXJlbnQ9bnVsbCksdGhpcy5jb250YWluc1BvaW50PWguY29udGFpbnNQb2ludC5iaW5kKGgpfX0sZC5wcm90b3R5cGUuX2NhbGN1bGF0ZUNhY2hlZEJvdW5kcz1mdW5jdGlvbigpe3RoaXMuX2JvdW5kcy5jbGVhcigpLHRoaXMuX2NhY2hlRGF0YS5zcHJpdGUudHJhbnNmb3JtLl93b3JsZElEPXRoaXMudHJhbnNmb3JtLl93b3JsZElELHRoaXMuX2NhY2hlRGF0YS5zcHJpdGUuX2NhbGN1bGF0ZUJvdW5kcygpLHRoaXMuX2xhc3RCb3VuZHNJRD10aGlzLl9ib3VuZHNJRH0sZC5wcm90b3R5cGUuX2dldENhY2hlZExvY2FsQm91bmRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NhY2hlRGF0YS5zcHJpdGUuZ2V0TG9jYWxCb3VuZHMoKX0sZC5wcm90b3R5cGUuX2Rlc3Ryb3lDYWNoZWREaXNwbGF5T2JqZWN0PWZ1bmN0aW9uKCl7dGhpcy5fY2FjaGVEYXRhLnNwcml0ZS5fdGV4dHVyZS5kZXN0cm95KCEwKSx0aGlzLl9jYWNoZURhdGEuc3ByaXRlPW51bGwsbC5kZWZhdWx0LnJlbW92ZUZyb21DYWNoZSh0aGlzLl9jYWNoZURhdGEudGV4dHVyZUNhY2hlSWQpLHUuZGVmYXVsdC5yZW1vdmVGcm9tQ2FjaGUodGhpcy5fY2FjaGVEYXRhLnRleHR1cmVDYWNoZUlkKSx0aGlzLl9jYWNoZURhdGEudGV4dHVyZUNhY2hlSWQ9bnVsbH0sZC5wcm90b3R5cGUuX2NhY2hlQXNCaXRtYXBEZXN0cm95PWZ1bmN0aW9uKHQpe3RoaXMuY2FjaGVBc0JpdG1hcD0hMSx0aGlzLmRlc3Ryb3kodCl9fSx7XCIuLi9jb3JlXCI6NjUsXCIuLi9jb3JlL3RleHR1cmVzL0Jhc2VUZXh0dXJlXCI6MTEyLFwiLi4vY29yZS90ZXh0dXJlcy9UZXh0dXJlXCI6MTE1LFwiLi4vY29yZS91dGlsc1wiOjEyNX1dLDEzOTpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXQoXCIuLi9jb3JlXCIpLGk9ZnVuY3Rpb24odCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfShuKTtpLkRpc3BsYXlPYmplY3QucHJvdG90eXBlLm5hbWU9bnVsbCxpLkNvbnRhaW5lci5wcm90b3R5cGUuZ2V0Q2hpbGRCeU5hbWU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLmNoaWxkcmVuLmxlbmd0aDtlKyspaWYodGhpcy5jaGlsZHJlbltlXS5uYW1lPT09dClyZXR1cm4gdGhpcy5jaGlsZHJlbltlXTtyZXR1cm4gbnVsbH19LHtcIi4uL2NvcmVcIjo2NX1dLDE0MDpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXQoXCIuLi9jb3JlXCIpLGk9ZnVuY3Rpb24odCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfShuKTtpLkRpc3BsYXlPYmplY3QucHJvdG90eXBlLmdldEdsb2JhbFBvc2l0aW9uPWZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOm5ldyBpLlBvaW50LGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXTtyZXR1cm4gdGhpcy5wYXJlbnQ/dGhpcy5wYXJlbnQudG9HbG9iYWwodGhpcy5wb3NpdGlvbix0LGUpOih0Lng9dGhpcy5wb3NpdGlvbi54LHQueT10aGlzLnBvc2l0aW9uLnkpLHR9fSx7XCIuLi9jb3JlXCI6NjV9XSwxNDE6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1yLl9fZXNNb2R1bGU9ITAsci5CaXRtYXBUZXh0PXIuVGlsaW5nU3ByaXRlUmVuZGVyZXI9ci5UaWxpbmdTcHJpdGU9ci5BbmltYXRlZFNwcml0ZT12b2lkIDA7dmFyIGk9dChcIi4vQW5pbWF0ZWRTcHJpdGVcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJBbmltYXRlZFNwcml0ZVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBuKGkpLmRlZmF1bHR9fSk7dmFyIG89dChcIi4vVGlsaW5nU3ByaXRlXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiVGlsaW5nU3ByaXRlXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4obykuZGVmYXVsdH19KTt2YXIgcz10KFwiLi93ZWJnbC9UaWxpbmdTcHJpdGVSZW5kZXJlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlRpbGluZ1Nwcml0ZVJlbmRlcmVyXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4ocykuZGVmYXVsdH19KTt2YXIgYT10KFwiLi9CaXRtYXBUZXh0XCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiQml0bWFwVGV4dFwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBuKGEpLmRlZmF1bHR9fSksdChcIi4vY2FjaGVBc0JpdG1hcFwiKSx0KFwiLi9nZXRDaGlsZEJ5TmFtZVwiKSx0KFwiLi9nZXRHbG9iYWxQb3NpdGlvblwiKX0se1wiLi9BbmltYXRlZFNwcml0ZVwiOjEzNSxcIi4vQml0bWFwVGV4dFwiOjEzNixcIi4vVGlsaW5nU3ByaXRlXCI6MTM3LFwiLi9jYWNoZUFzQml0bWFwXCI6MTM4LFwiLi9nZXRDaGlsZEJ5TmFtZVwiOjEzOSxcIi4vZ2V0R2xvYmFsUG9zaXRpb25cIjoxNDAsXCIuL3dlYmdsL1RpbGluZ1Nwcml0ZVJlbmRlcmVyXCI6MTQyfV0sMTQyOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gaSh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIG8odCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1yLl9fZXNNb2R1bGU9ITA7dmFyIHM9dChcIi4uLy4uL2NvcmVcIiksYT1mdW5jdGlvbih0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9e307aWYobnVsbCE9dClmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSk7cmV0dXJuIGUuZGVmYXVsdD10LGV9KHMpLHU9dChcIi4uLy4uL2NvcmUvY29uc3RcIiksaD0odChcInBhdGhcIiksbmV3IGEuTWF0cml4KSxsPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUocil7bih0aGlzLGUpO3ZhciBvPWkodGhpcyx0LmNhbGwodGhpcyxyKSk7cmV0dXJuIG8uc2hhZGVyPW51bGwsby5zaW1wbGVTaGFkZXI9bnVsbCxvLnF1YWQ9bnVsbCxvfXJldHVybiBvKGUsdCksZS5wcm90b3R5cGUub25Db250ZXh0Q2hhbmdlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5yZW5kZXJlci5nbDt0aGlzLnNoYWRlcj1uZXcgYS5TaGFkZXIodCxcImF0dHJpYnV0ZSB2ZWMyIGFWZXJ0ZXhQb3NpdGlvbjtcXG5hdHRyaWJ1dGUgdmVjMiBhVGV4dHVyZUNvb3JkO1xcblxcbnVuaWZvcm0gbWF0MyBwcm9qZWN0aW9uTWF0cml4O1xcbnVuaWZvcm0gbWF0MyB0cmFuc2xhdGlvbk1hdHJpeDtcXG51bmlmb3JtIG1hdDMgdVRyYW5zZm9ybTtcXG5cXG52YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcXG5cXG52b2lkIG1haW4odm9pZClcXG57XFxuICAgIGdsX1Bvc2l0aW9uID0gdmVjNCgocHJvamVjdGlvbk1hdHJpeCAqIHRyYW5zbGF0aW9uTWF0cml4ICogdmVjMyhhVmVydGV4UG9zaXRpb24sIDEuMCkpLnh5LCAwLjAsIDEuMCk7XFxuXFxuICAgIHZUZXh0dXJlQ29vcmQgPSAodVRyYW5zZm9ybSAqIHZlYzMoYVRleHR1cmVDb29yZCwgMS4wKSkueHk7XFxufVxcblwiLFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XFxuXFxudW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XFxudW5pZm9ybSB2ZWM0IHVDb2xvcjtcXG51bmlmb3JtIG1hdDMgdU1hcENvb3JkO1xcbnVuaWZvcm0gdmVjNCB1Q2xhbXBGcmFtZTtcXG51bmlmb3JtIHZlYzIgdUNsYW1wT2Zmc2V0O1xcblxcbnZvaWQgbWFpbih2b2lkKVxcbntcXG4gICAgdmVjMiBjb29yZCA9IG1vZCh2VGV4dHVyZUNvb3JkIC0gdUNsYW1wT2Zmc2V0LCB2ZWMyKDEuMCwgMS4wKSkgKyB1Q2xhbXBPZmZzZXQ7XFxuICAgIGNvb3JkID0gKHVNYXBDb29yZCAqIHZlYzMoY29vcmQsIDEuMCkpLnh5O1xcbiAgICBjb29yZCA9IGNsYW1wKGNvb3JkLCB1Q2xhbXBGcmFtZS54eSwgdUNsYW1wRnJhbWUuencpO1xcblxcbiAgICB2ZWM0IHNhbXBsZSA9IHRleHR1cmUyRCh1U2FtcGxlciwgY29vcmQpO1xcbiAgICBnbF9GcmFnQ29sb3IgPSBzYW1wbGUgKiB1Q29sb3I7XFxufVxcblwiKSx0aGlzLnNpbXBsZVNoYWRlcj1uZXcgYS5TaGFkZXIodCxcImF0dHJpYnV0ZSB2ZWMyIGFWZXJ0ZXhQb3NpdGlvbjtcXG5hdHRyaWJ1dGUgdmVjMiBhVGV4dHVyZUNvb3JkO1xcblxcbnVuaWZvcm0gbWF0MyBwcm9qZWN0aW9uTWF0cml4O1xcbnVuaWZvcm0gbWF0MyB0cmFuc2xhdGlvbk1hdHJpeDtcXG51bmlmb3JtIG1hdDMgdVRyYW5zZm9ybTtcXG5cXG52YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcXG5cXG52b2lkIG1haW4odm9pZClcXG57XFxuICAgIGdsX1Bvc2l0aW9uID0gdmVjNCgocHJvamVjdGlvbk1hdHJpeCAqIHRyYW5zbGF0aW9uTWF0cml4ICogdmVjMyhhVmVydGV4UG9zaXRpb24sIDEuMCkpLnh5LCAwLjAsIDEuMCk7XFxuXFxuICAgIHZUZXh0dXJlQ29vcmQgPSAodVRyYW5zZm9ybSAqIHZlYzMoYVRleHR1cmVDb29yZCwgMS4wKSkueHk7XFxufVxcblwiLFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XFxuXFxudW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XFxudW5pZm9ybSB2ZWM0IHVDb2xvcjtcXG5cXG52b2lkIG1haW4odm9pZClcXG57XFxuICAgIHZlYzQgc2FtcGxlID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKTtcXG4gICAgZ2xfRnJhZ0NvbG9yID0gc2FtcGxlICogdUNvbG9yO1xcbn1cXG5cIiksdGhpcy5yZW5kZXJlci5iaW5kVmFvKG51bGwpLHRoaXMucXVhZD1uZXcgYS5RdWFkKHQsdGhpcy5yZW5kZXJlci5zdGF0ZS5hdHRyaWJTdGF0ZSksdGhpcy5xdWFkLmluaXRWYW8odGhpcy5zaGFkZXIpfSxlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5yZW5kZXJlcixyPXRoaXMucXVhZDtlLmJpbmRWYW8oci52YW8pO3ZhciBuPXIudmVydGljZXM7blswXT1uWzZdPXQuX3dpZHRoKi10LmFuY2hvci54LG5bMV09blszXT10Ll9oZWlnaHQqLXQuYW5jaG9yLnksblsyXT1uWzRdPXQuX3dpZHRoKigxLXQuYW5jaG9yLngpLG5bNV09bls3XT10Ll9oZWlnaHQqKDEtdC5hbmNob3IueSksdC51dlJlc3BlY3RBbmNob3ImJihuPXIudXZzLG5bMF09bls2XT0tdC5hbmNob3IueCxuWzFdPW5bM109LXQuYW5jaG9yLnksblsyXT1uWzRdPTEtdC5hbmNob3IueCxuWzVdPW5bN109MS10LmFuY2hvci55KSxyLnVwbG9hZCgpO3ZhciBpPXQuX3RleHR1cmUsbz1pLmJhc2VUZXh0dXJlLHM9dC50aWxlVHJhbnNmb3JtLmxvY2FsVHJhbnNmb3JtLGw9dC51dlRyYW5zZm9ybSxjPW8uaXNQb3dlck9mVHdvJiZpLmZyYW1lLndpZHRoPT09by53aWR0aCYmaS5mcmFtZS5oZWlnaHQ9PT1vLmhlaWdodDtjJiYoby5fZ2xUZXh0dXJlc1tlLkNPTlRFWFRfVUlEXT9jPW8ud3JhcE1vZGUhPT11LldSQVBfTU9ERVMuQ0xBTVA6by53cmFwTW9kZT09PXUuV1JBUF9NT0RFUy5DTEFNUCYmKG8ud3JhcE1vZGU9dS5XUkFQX01PREVTLlJFUEVBVCkpO3ZhciBkPWM/dGhpcy5zaW1wbGVTaGFkZXI6dGhpcy5zaGFkZXI7ZS5iaW5kU2hhZGVyKGQpO3ZhciBmPWkud2lkdGgscD1pLmhlaWdodCx2PXQuX3dpZHRoLGc9dC5faGVpZ2h0O2guc2V0KHMuYSpmL3Yscy5iKmYvZyxzLmMqcC92LHMuZCpwL2cscy50eC92LHMudHkvZyksaC5pbnZlcnQoKSxjP2gucHJlcGVuZChsLm1hcENvb3JkKTooZC51bmlmb3Jtcy51TWFwQ29vcmQ9bC5tYXBDb29yZC50b0FycmF5KCEwKSxkLnVuaWZvcm1zLnVDbGFtcEZyYW1lPWwudUNsYW1wRnJhbWUsZC51bmlmb3Jtcy51Q2xhbXBPZmZzZXQ9bC51Q2xhbXBPZmZzZXQpLGQudW5pZm9ybXMudVRyYW5zZm9ybT1oLnRvQXJyYXkoITApLGQudW5pZm9ybXMudUNvbG9yPWEudXRpbHMucHJlbXVsdGlwbHlUaW50VG9SZ2JhKHQudGludCx0LndvcmxkQWxwaGEsZC51bmlmb3Jtcy51Q29sb3Isby5wcmVtdWx0aXBsaWVkQWxwaGEpLGQudW5pZm9ybXMudHJhbnNsYXRpb25NYXRyaXg9dC50cmFuc2Zvcm0ud29ybGRUcmFuc2Zvcm0udG9BcnJheSghMCksZC51bmlmb3Jtcy51U2FtcGxlcj1lLmJpbmRUZXh0dXJlKGkpLGUuc2V0QmxlbmRNb2RlKGEudXRpbHMuY29ycmVjdEJsZW5kTW9kZSh0LmJsZW5kTW9kZSxvLnByZW11bHRpcGxpZWRBbHBoYSkpLHIudmFvLmRyYXcodGhpcy5yZW5kZXJlci5nbC5UUklBTkdMRVMsNiwwKX0sZX0oYS5PYmplY3RSZW5kZXJlcik7ci5kZWZhdWx0PWwsYS5XZWJHTFJlbmRlcmVyLnJlZ2lzdGVyUGx1Z2luKFwidGlsaW5nU3ByaXRlXCIsbCl9LHtcIi4uLy4uL2NvcmVcIjo2NSxcIi4uLy4uL2NvcmUvY29uc3RcIjo0NixwYXRoOjh9XSwxNDM6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gbyh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfXIuX19lc01vZHVsZT0hMDt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG49ZVtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbihlLHIsbil7cmV0dXJuIHImJnQoZS5wcm90b3R5cGUsciksbiYmdChlLG4pLGV9fSgpLGE9dChcIi4uLy4uL2NvcmVcIiksdT1mdW5jdGlvbih0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9e307aWYobnVsbCE9dClmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSk7cmV0dXJuIGUuZGVmYXVsdD10LGV9KGEpLGg9KHQoXCJwYXRoXCIpLGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06MTtuKHRoaXMsZSk7dmFyIG89aSh0aGlzLHQuY2FsbCh0aGlzLFwiYXR0cmlidXRlIHZlYzIgYVZlcnRleFBvc2l0aW9uO1xcbmF0dHJpYnV0ZSB2ZWMyIGFUZXh0dXJlQ29vcmQ7XFxuXFxudW5pZm9ybSBtYXQzIHByb2plY3Rpb25NYXRyaXg7XFxuXFxudmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XFxuXFxudm9pZCBtYWluKHZvaWQpXFxue1xcbiAgICBnbF9Qb3NpdGlvbiA9IHZlYzQoKHByb2plY3Rpb25NYXRyaXggKiB2ZWMzKGFWZXJ0ZXhQb3NpdGlvbiwgMS4wKSkueHksIDAuMCwgMS4wKTtcXG4gICAgdlRleHR1cmVDb29yZCA9IGFUZXh0dXJlQ29vcmQ7XFxufVwiLFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XFxuXFxudW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XFxudW5pZm9ybSBmbG9hdCB1QWxwaGE7XFxuXFxudm9pZCBtYWluKHZvaWQpXFxue1xcbiAgIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCh1U2FtcGxlciwgdlRleHR1cmVDb29yZCkgKiB1QWxwaGE7XFxufVxcblwiKSk7cmV0dXJuIG8uYWxwaGE9cixvLmdsU2hhZGVyS2V5PVwiYWxwaGFcIixvfXJldHVybiBvKGUsdCkscyhlLFt7a2V5OlwiYWxwaGFcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51bmlmb3Jtcy51QWxwaGF9LHNldDpmdW5jdGlvbih0KXt0aGlzLnVuaWZvcm1zLnVBbHBoYT10fX1dKSxlfSh1LkZpbHRlcikpO3IuZGVmYXVsdD1ofSx7XCIuLi8uLi9jb3JlXCI6NjUscGF0aDo4fV0sMTQ0OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIHModCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1yLl9fZXNNb2R1bGU9ITA7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBuPWVbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSxyLG4pe3JldHVybiByJiZ0KGUucHJvdG90eXBlLHIpLG4mJnQoZSxuKSxlfX0oKSx1PXQoXCIuLi8uLi9jb3JlXCIpLGg9ZnVuY3Rpb24odCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfSh1KSxsPXQoXCIuL0JsdXJYRmlsdGVyXCIpLGM9bihsKSxkPXQoXCIuL0JsdXJZRmlsdGVyXCIpLGY9bihkKSxwPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUocixuLHMsYSl7aSh0aGlzLGUpO3ZhciB1PW8odGhpcyx0LmNhbGwodGhpcykpO3JldHVybiB1LmJsdXJYRmlsdGVyPW5ldyBjLmRlZmF1bHQocixuLHMsYSksdS5ibHVyWUZpbHRlcj1uZXcgZi5kZWZhdWx0KHIsbixzLGEpLHUucGFkZGluZz0wLHUucmVzb2x1dGlvbj1zfHxoLnNldHRpbmdzLlJFU09MVVRJT04sdS5xdWFsaXR5PW58fDQsdS5ibHVyPXJ8fDgsdX1yZXR1cm4gcyhlLHQpLGUucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj10LmdldFJlbmRlclRhcmdldCghMCk7dGhpcy5ibHVyWEZpbHRlci5hcHBseSh0LGUsbiwhMCksdGhpcy5ibHVyWUZpbHRlci5hcHBseSh0LG4sciwhMSksdC5yZXR1cm5SZW5kZXJUYXJnZXQobil9LGEoZSxbe2tleTpcImJsdXJcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ibHVyWEZpbHRlci5ibHVyfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5ibHVyWEZpbHRlci5ibHVyPXRoaXMuYmx1cllGaWx0ZXIuYmx1cj10LHRoaXMucGFkZGluZz0yKk1hdGgubWF4KE1hdGguYWJzKHRoaXMuYmx1clhGaWx0ZXIuc3RyZW5ndGgpLE1hdGguYWJzKHRoaXMuYmx1cllGaWx0ZXIuc3RyZW5ndGgpKX19LHtrZXk6XCJxdWFsaXR5XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYmx1clhGaWx0ZXIucXVhbGl0eX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuYmx1clhGaWx0ZXIucXVhbGl0eT10aGlzLmJsdXJZRmlsdGVyLnF1YWxpdHk9dH19LHtrZXk6XCJibHVyWFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJsdXJYRmlsdGVyLmJsdXJ9LHNldDpmdW5jdGlvbih0KXt0aGlzLmJsdXJYRmlsdGVyLmJsdXI9dCx0aGlzLnBhZGRpbmc9MipNYXRoLm1heChNYXRoLmFicyh0aGlzLmJsdXJYRmlsdGVyLnN0cmVuZ3RoKSxNYXRoLmFicyh0aGlzLmJsdXJZRmlsdGVyLnN0cmVuZ3RoKSl9fSx7a2V5OlwiYmx1cllcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ibHVyWUZpbHRlci5ibHVyfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5ibHVyWUZpbHRlci5ibHVyPXQsdGhpcy5wYWRkaW5nPTIqTWF0aC5tYXgoTWF0aC5hYnModGhpcy5ibHVyWEZpbHRlci5zdHJlbmd0aCksTWF0aC5hYnModGhpcy5ibHVyWUZpbHRlci5zdHJlbmd0aCkpfX0se2tleTpcImJsZW5kTW9kZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJsdXJZRmlsdGVyLl9ibGVuZE1vZGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLmJsdXJZRmlsdGVyLl9ibGVuZE1vZGU9dH19XSksZX0oaC5GaWx0ZXIpO3IuZGVmYXVsdD1wfSx7XCIuLi8uLi9jb3JlXCI6NjUsXCIuL0JsdXJYRmlsdGVyXCI6MTQ1LFwiLi9CbHVyWUZpbHRlclwiOjE0Nn1dLDE0NTpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIGkodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBzKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9ci5fX2VzTW9kdWxlPSEwO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksdT10KFwiLi4vLi4vY29yZVwiKSxoPWZ1bmN0aW9uKHQpe2lmKHQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT17fTtpZihudWxsIT10KWZvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKTtyZXR1cm4gZS5kZWZhdWx0PXQsZX0odSksbD10KFwiLi9nZW5lcmF0ZUJsdXJWZXJ0U291cmNlXCIpLGM9bihsKSxkPXQoXCIuL2dlbmVyYXRlQmx1ckZyYWdTb3VyY2VcIiksZj1uKGQpLHA9dChcIi4vZ2V0TWF4Qmx1cktlcm5lbFNpemVcIiksdj1uKHApLGc9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShyLG4scyxhKXtpKHRoaXMsZSksYT1hfHw1O3ZhciB1PSgwLGMuZGVmYXVsdCkoYSwhMCksbD0oMCxmLmRlZmF1bHQpKGEpLGQ9byh0aGlzLHQuY2FsbCh0aGlzLHUsbCkpO3JldHVybiBkLnJlc29sdXRpb249c3x8aC5zZXR0aW5ncy5SRVNPTFVUSU9OLGQuX3F1YWxpdHk9MCxkLnF1YWxpdHk9bnx8NCxkLnN0cmVuZ3RoPXJ8fDgsZC5maXJzdFJ1bj0hMCxkfXJldHVybiBzKGUsdCksZS5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24odCxlLHIsbil7aWYodGhpcy5maXJzdFJ1bil7dmFyIGk9dC5yZW5kZXJlci5nbCxvPSgwLHYuZGVmYXVsdCkoaSk7dGhpcy52ZXJ0ZXhTcmM9KDAsYy5kZWZhdWx0KShvLCEwKSx0aGlzLmZyYWdtZW50U3JjPSgwLGYuZGVmYXVsdCkobyksdGhpcy5maXJzdFJ1bj0hMX1pZih0aGlzLnVuaWZvcm1zLnN0cmVuZ3RoPTEvci5zaXplLndpZHRoKihyLnNpemUud2lkdGgvZS5zaXplLndpZHRoKSx0aGlzLnVuaWZvcm1zLnN0cmVuZ3RoKj10aGlzLnN0cmVuZ3RoLHRoaXMudW5pZm9ybXMuc3RyZW5ndGgvPXRoaXMucGFzc2VzLDE9PT10aGlzLnBhc3Nlcyl0LmFwcGx5RmlsdGVyKHRoaXMsZSxyLG4pO2Vsc2V7Zm9yKHZhciBzPXQuZ2V0UmVuZGVyVGFyZ2V0KCEwKSxhPWUsdT1zLGg9MDtoPHRoaXMucGFzc2VzLTE7aCsrKXt0LmFwcGx5RmlsdGVyKHRoaXMsYSx1LCEwKTt2YXIgbD11O3U9YSxhPWx9dC5hcHBseUZpbHRlcih0aGlzLGEscixuKSx0LnJldHVyblJlbmRlclRhcmdldChzKX19LGEoZSxbe2tleTpcImJsdXJcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHJlbmd0aH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMucGFkZGluZz0yKk1hdGguYWJzKHQpLHRoaXMuc3RyZW5ndGg9dH19LHtrZXk6XCJxdWFsaXR5XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3F1YWxpdHl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9xdWFsaXR5PXQsdGhpcy5wYXNzZXM9dH19XSksZX0oaC5GaWx0ZXIpO3IuZGVmYXVsdD1nfSx7XCIuLi8uLi9jb3JlXCI6NjUsXCIuL2dlbmVyYXRlQmx1ckZyYWdTb3VyY2VcIjoxNDcsXCIuL2dlbmVyYXRlQmx1clZlcnRTb3VyY2VcIjoxNDgsXCIuL2dldE1heEJsdXJLZXJuZWxTaXplXCI6MTQ5fV0sMTQ2OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIHModCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1yLl9fZXNNb2R1bGU9ITA7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBuPWVbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSxyLG4pe3JldHVybiByJiZ0KGUucHJvdG90eXBlLHIpLG4mJnQoZSxuKSxlfX0oKSx1PXQoXCIuLi8uLi9jb3JlXCIpLGg9ZnVuY3Rpb24odCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfSh1KSxsPXQoXCIuL2dlbmVyYXRlQmx1clZlcnRTb3VyY2VcIiksYz1uKGwpLGQ9dChcIi4vZ2VuZXJhdGVCbHVyRnJhZ1NvdXJjZVwiKSxmPW4oZCkscD10KFwiLi9nZXRNYXhCbHVyS2VybmVsU2l6ZVwiKSx2PW4ocCksZz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHIsbixzLGEpe2kodGhpcyxlKSxhPWF8fDU7dmFyIHU9KDAsYy5kZWZhdWx0KShhLCExKSxsPSgwLGYuZGVmYXVsdCkoYSksZD1vKHRoaXMsdC5jYWxsKHRoaXMsdSxsKSk7cmV0dXJuIGQucmVzb2x1dGlvbj1zfHxoLnNldHRpbmdzLlJFU09MVVRJT04sZC5fcXVhbGl0eT0wLGQucXVhbGl0eT1ufHw0LGQuc3RyZW5ndGg9cnx8OCxkLmZpcnN0UnVuPSEwLGR9cmV0dXJuIHMoZSx0KSxlLnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0LGUscixuKXtpZih0aGlzLmZpcnN0UnVuKXt2YXIgaT10LnJlbmRlcmVyLmdsLG89KDAsdi5kZWZhdWx0KShpKTt0aGlzLnZlcnRleFNyYz0oMCxjLmRlZmF1bHQpKG8sITEpLHRoaXMuZnJhZ21lbnRTcmM9KDAsZi5kZWZhdWx0KShvKSx0aGlzLmZpcnN0UnVuPSExfWlmKHRoaXMudW5pZm9ybXMuc3RyZW5ndGg9MS9yLnNpemUuaGVpZ2h0KihyLnNpemUuaGVpZ2h0L2Uuc2l6ZS5oZWlnaHQpLHRoaXMudW5pZm9ybXMuc3RyZW5ndGgqPXRoaXMuc3RyZW5ndGgsdGhpcy51bmlmb3Jtcy5zdHJlbmd0aC89dGhpcy5wYXNzZXMsMT09PXRoaXMucGFzc2VzKXQuYXBwbHlGaWx0ZXIodGhpcyxlLHIsbik7ZWxzZXtmb3IodmFyIHM9dC5nZXRSZW5kZXJUYXJnZXQoITApLGE9ZSx1PXMsaD0wO2g8dGhpcy5wYXNzZXMtMTtoKyspe3QuYXBwbHlGaWx0ZXIodGhpcyxhLHUsITApO3ZhciBsPXU7dT1hLGE9bH10LmFwcGx5RmlsdGVyKHRoaXMsYSxyLG4pLHQucmV0dXJuUmVuZGVyVGFyZ2V0KHMpfX0sYShlLFt7a2V5OlwiYmx1clwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0cmVuZ3RofSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5wYWRkaW5nPTIqTWF0aC5hYnModCksdGhpcy5zdHJlbmd0aD10fX0se2tleTpcInF1YWxpdHlcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcXVhbGl0eX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3F1YWxpdHk9dCx0aGlzLnBhc3Nlcz10fX1dKSxlfShoLkZpbHRlcik7ci5kZWZhdWx0PWd9LHtcIi4uLy4uL2NvcmVcIjo2NSxcIi4vZ2VuZXJhdGVCbHVyRnJhZ1NvdXJjZVwiOjE0NyxcIi4vZ2VuZXJhdGVCbHVyVmVydFNvdXJjZVwiOjE0OCxcIi4vZ2V0TWF4Qmx1cktlcm5lbFNpemVcIjoxNDl9XSwxNDc6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe2Zvcih2YXIgZT1pW3RdLHI9ZS5sZW5ndGgsbj1vLHM9XCJcIixhPVwiZ2xfRnJhZ0NvbG9yICs9IHRleHR1cmUyRCh1U2FtcGxlciwgdkJsdXJUZXhDb29yZHNbJWluZGV4JV0pICogJXZhbHVlJTtcIix1PXZvaWQgMCxoPTA7aDx0O2grKyl7dmFyIGw9YS5yZXBsYWNlKFwiJWluZGV4JVwiLGgpO3U9aCxoPj1yJiYodT10LWgtMSksbD1sLnJlcGxhY2UoXCIldmFsdWUlXCIsZVt1XSkscys9bCxzKz1cIlxcblwifXJldHVybiBuPW4ucmVwbGFjZShcIiVibHVyJVwiLHMpLG49bi5yZXBsYWNlKFwiJXNpemUlXCIsdCl9ci5fX2VzTW9kdWxlPSEwLHIuZGVmYXVsdD1uO3ZhciBpPXs1OlsuMTUzMzg4LC4yMjE0NjEsLjI1MDMwMV0sNzpbLjA3MTMwMywuMTMxNTE0LC4xODk4NzksLjIxNDYwN10sOTpbLjAyODUzMiwuMDY3MjM0LC4xMjQwMDksLjE3OTA0NCwuMjAyMzZdLDExOlsuMDA5MywuMDI4MDAyLC4wNjU5ODQsLjEyMTcwMywuMTc1NzEzLC4xOTg1OTZdLDEzOlsuMDAyNDA2LC4wMDkyNTUsLjAyNzg2NywuMDY1NjY2LC4xMjExMTcsLjE3NDg2OCwuMTk3NjQxXSwxNTpbNDg5ZS02LC4wMDI0MDMsLjAwOTI0NiwuMDI3ODQsLjA2NTYwMiwuMTIwOTk5LC4xNzQ2OTcsLjE5NzQ0OF19LG89W1widmFyeWluZyB2ZWMyIHZCbHVyVGV4Q29vcmRzWyVzaXplJV07XCIsXCJ1bmlmb3JtIHNhbXBsZXIyRCB1U2FtcGxlcjtcIixcInZvaWQgbWFpbih2b2lkKVwiLFwie1wiLFwiICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMC4wKTtcIixcIiAgICAlYmx1ciVcIixcIn1cIl0uam9pbihcIlxcblwiKX0se31dLDE0ODpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXt2YXIgcj1NYXRoLmNlaWwodC8yKSxuPWksbz1cIlwiLHM9dm9pZCAwO3M9ZT9cInZCbHVyVGV4Q29vcmRzWyVpbmRleCVdID0gYVRleHR1cmVDb29yZCArIHZlYzIoJXNhbXBsZUluZGV4JSAqIHN0cmVuZ3RoLCAwLjApO1wiOlwidkJsdXJUZXhDb29yZHNbJWluZGV4JV0gPSBhVGV4dHVyZUNvb3JkICsgdmVjMigwLjAsICVzYW1wbGVJbmRleCUgKiBzdHJlbmd0aCk7XCI7Zm9yKHZhciBhPTA7YTx0O2ErKyl7dmFyIHU9cy5yZXBsYWNlKFwiJWluZGV4JVwiLGEpO3U9dS5yZXBsYWNlKFwiJXNhbXBsZUluZGV4JVwiLGEtKHItMSkrXCIuMFwiKSxvKz11LG8rPVwiXFxuXCJ9cmV0dXJuIG49bi5yZXBsYWNlKFwiJWJsdXIlXCIsbyksbj1uLnJlcGxhY2UoXCIlc2l6ZSVcIix0KX1yLl9fZXNNb2R1bGU9ITAsci5kZWZhdWx0PW47dmFyIGk9W1wiYXR0cmlidXRlIHZlYzIgYVZlcnRleFBvc2l0aW9uO1wiLFwiYXR0cmlidXRlIHZlYzIgYVRleHR1cmVDb29yZDtcIixcInVuaWZvcm0gZmxvYXQgc3RyZW5ndGg7XCIsXCJ1bmlmb3JtIG1hdDMgcHJvamVjdGlvbk1hdHJpeDtcIixcInZhcnlpbmcgdmVjMiB2Qmx1clRleENvb3Jkc1slc2l6ZSVdO1wiLFwidm9pZCBtYWluKHZvaWQpXCIsXCJ7XCIsXCJnbF9Qb3NpdGlvbiA9IHZlYzQoKHByb2plY3Rpb25NYXRyaXggKiB2ZWMzKChhVmVydGV4UG9zaXRpb24pLCAxLjApKS54eSwgMC4wLCAxLjApO1wiLFwiJWJsdXIlXCIsXCJ9XCJdLmpvaW4oXCJcXG5cIil9LHt9XSwxNDk6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe2Zvcih2YXIgZT10LmdldFBhcmFtZXRlcih0Lk1BWF9WQVJZSU5HX1ZFQ1RPUlMpLHI9MTU7cj5lOylyLT0yO3JldHVybiByfXIuX19lc01vZHVsZT0hMCxyLmRlZmF1bHQ9bn0se31dLDE1MDpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkodCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBvKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9ci5fX2VzTW9kdWxlPSEwO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksYT10KFwiLi4vLi4vY29yZVwiKSx1PWZ1bmN0aW9uKHQpe2lmKHQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT17fTtpZihudWxsIT10KWZvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKTtyZXR1cm4gZS5kZWZhdWx0PXQsZX0oYSksaD0odChcInBhdGhcIiksZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe24odGhpcyxlKTt2YXIgcj1pKHRoaXMsdC5jYWxsKHRoaXMsXCJhdHRyaWJ1dGUgdmVjMiBhVmVydGV4UG9zaXRpb247XFxuYXR0cmlidXRlIHZlYzIgYVRleHR1cmVDb29yZDtcXG5cXG51bmlmb3JtIG1hdDMgcHJvamVjdGlvbk1hdHJpeDtcXG5cXG52YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcXG5cXG52b2lkIG1haW4odm9pZClcXG57XFxuICAgIGdsX1Bvc2l0aW9uID0gdmVjNCgocHJvamVjdGlvbk1hdHJpeCAqIHZlYzMoYVZlcnRleFBvc2l0aW9uLCAxLjApKS54eSwgMC4wLCAxLjApO1xcbiAgICB2VGV4dHVyZUNvb3JkID0gYVRleHR1cmVDb29yZDtcXG59XCIsXCJ2YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcXG51bmlmb3JtIHNhbXBsZXIyRCB1U2FtcGxlcjtcXG51bmlmb3JtIGZsb2F0IG1bMjBdO1xcbnVuaWZvcm0gZmxvYXQgdUFscGhhO1xcblxcbnZvaWQgbWFpbih2b2lkKVxcbntcXG4gICAgdmVjNCBjID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKTtcXG5cXG4gICAgaWYgKHVBbHBoYSA9PSAwLjApIHtcXG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IGM7XFxuICAgICAgICByZXR1cm47XFxuICAgIH1cXG5cXG4gICAgLy8gVW4tcHJlbXVsdGlwbHkgYWxwaGEgYmVmb3JlIGFwcGx5aW5nIHRoZSBjb2xvciBtYXRyaXguIFNlZSBpc3N1ZSAjMzUzOS5cXG4gICAgaWYgKGMuYSA+IDAuMCkge1xcbiAgICAgIGMucmdiIC89IGMuYTtcXG4gICAgfVxcblxcbiAgICB2ZWM0IHJlc3VsdDtcXG5cXG4gICAgcmVzdWx0LnIgPSAobVswXSAqIGMucik7XFxuICAgICAgICByZXN1bHQuciArPSAobVsxXSAqIGMuZyk7XFxuICAgICAgICByZXN1bHQuciArPSAobVsyXSAqIGMuYik7XFxuICAgICAgICByZXN1bHQuciArPSAobVszXSAqIGMuYSk7XFxuICAgICAgICByZXN1bHQuciArPSBtWzRdO1xcblxcbiAgICByZXN1bHQuZyA9IChtWzVdICogYy5yKTtcXG4gICAgICAgIHJlc3VsdC5nICs9IChtWzZdICogYy5nKTtcXG4gICAgICAgIHJlc3VsdC5nICs9IChtWzddICogYy5iKTtcXG4gICAgICAgIHJlc3VsdC5nICs9IChtWzhdICogYy5hKTtcXG4gICAgICAgIHJlc3VsdC5nICs9IG1bOV07XFxuXFxuICAgIHJlc3VsdC5iID0gKG1bMTBdICogYy5yKTtcXG4gICAgICAgcmVzdWx0LmIgKz0gKG1bMTFdICogYy5nKTtcXG4gICAgICAgcmVzdWx0LmIgKz0gKG1bMTJdICogYy5iKTtcXG4gICAgICAgcmVzdWx0LmIgKz0gKG1bMTNdICogYy5hKTtcXG4gICAgICAgcmVzdWx0LmIgKz0gbVsxNF07XFxuXFxuICAgIHJlc3VsdC5hID0gKG1bMTVdICogYy5yKTtcXG4gICAgICAgcmVzdWx0LmEgKz0gKG1bMTZdICogYy5nKTtcXG4gICAgICAgcmVzdWx0LmEgKz0gKG1bMTddICogYy5iKTtcXG4gICAgICAgcmVzdWx0LmEgKz0gKG1bMThdICogYy5hKTtcXG4gICAgICAgcmVzdWx0LmEgKz0gbVsxOV07XFxuXFxuICAgIHZlYzMgcmdiID0gbWl4KGMucmdiLCByZXN1bHQucmdiLCB1QWxwaGEpO1xcblxcbiAgICAvLyBQcmVtdWx0aXBseSBhbHBoYSBhZ2Fpbi5cXG4gICAgcmdiICo9IHJlc3VsdC5hO1xcblxcbiAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHJnYiwgcmVzdWx0LmEpO1xcbn1cXG5cIikpO3JldHVybiByLnVuaWZvcm1zLm09WzEsMCwwLDAsMCwwLDEsMCwwLDAsMCwwLDEsMCwwLDAsMCwwLDEsMF0sci5hbHBoYT0xLHJ9cmV0dXJuIG8oZSx0KSxlLnByb3RvdHlwZS5fbG9hZE1hdHJpeD1mdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdLHI9dDtlJiYodGhpcy5fbXVsdGlwbHkocix0aGlzLnVuaWZvcm1zLm0sdCkscj10aGlzLl9jb2xvck1hdHJpeChyKSksdGhpcy51bmlmb3Jtcy5tPXJ9LGUucHJvdG90eXBlLl9tdWx0aXBseT1mdW5jdGlvbih0LGUscil7cmV0dXJuIHRbMF09ZVswXSpyWzBdK2VbMV0qcls1XStlWzJdKnJbMTBdK2VbM10qclsxNV0sdFsxXT1lWzBdKnJbMV0rZVsxXSpyWzZdK2VbMl0qclsxMV0rZVszXSpyWzE2XSx0WzJdPWVbMF0qclsyXStlWzFdKnJbN10rZVsyXSpyWzEyXStlWzNdKnJbMTddLHRbM109ZVswXSpyWzNdK2VbMV0qcls4XStlWzJdKnJbMTNdK2VbM10qclsxOF0sdFs0XT1lWzBdKnJbNF0rZVsxXSpyWzldK2VbMl0qclsxNF0rZVszXSpyWzE5XStlWzRdLHRbNV09ZVs1XSpyWzBdK2VbNl0qcls1XStlWzddKnJbMTBdK2VbOF0qclsxNV0sdFs2XT1lWzVdKnJbMV0rZVs2XSpyWzZdK2VbN10qclsxMV0rZVs4XSpyWzE2XSx0WzddPWVbNV0qclsyXStlWzZdKnJbN10rZVs3XSpyWzEyXStlWzhdKnJbMTddLHRbOF09ZVs1XSpyWzNdK2VbNl0qcls4XStlWzddKnJbMTNdK2VbOF0qclsxOF0sdFs5XT1lWzVdKnJbNF0rZVs2XSpyWzldK2VbN10qclsxNF0rZVs4XSpyWzE5XStlWzldLHRbMTBdPWVbMTBdKnJbMF0rZVsxMV0qcls1XStlWzEyXSpyWzEwXStlWzEzXSpyWzE1XSx0WzExXT1lWzEwXSpyWzFdK2VbMTFdKnJbNl0rZVsxMl0qclsxMV0rZVsxM10qclsxNl0sdFsxMl09ZVsxMF0qclsyXStlWzExXSpyWzddK2VbMTJdKnJbMTJdK2VbMTNdKnJbMTddLHRbMTNdPWVbMTBdKnJbM10rZVsxMV0qcls4XStlWzEyXSpyWzEzXStlWzEzXSpyWzE4XSx0WzE0XT1lWzEwXSpyWzRdK2VbMTFdKnJbOV0rZVsxMl0qclsxNF0rZVsxM10qclsxOV0rZVsxNF0sdFsxNV09ZVsxNV0qclswXStlWzE2XSpyWzVdK2VbMTddKnJbMTBdK2VbMThdKnJbMTVdLHRbMTZdPWVbMTVdKnJbMV0rZVsxNl0qcls2XStlWzE3XSpyWzExXStlWzE4XSpyWzE2XSx0WzE3XT1lWzE1XSpyWzJdK2VbMTZdKnJbN10rZVsxN10qclsxMl0rZVsxOF0qclsxN10sdFsxOF09ZVsxNV0qclszXStlWzE2XSpyWzhdK2VbMTddKnJbMTNdK2VbMThdKnJbMThdLHRbMTldPWVbMTVdKnJbNF0rZVsxNl0qcls5XStlWzE3XSpyWzE0XStlWzE4XSpyWzE5XStlWzE5XSx0fSxlLnByb3RvdHlwZS5fY29sb3JNYXRyaXg9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEZsb2F0MzJBcnJheSh0KTtyZXR1cm4gZVs0XS89MjU1LGVbOV0vPTI1NSxlWzE0XS89MjU1LGVbMTldLz0yNTUsZX0sZS5wcm90b3R5cGUuYnJpZ2h0bmVzcz1mdW5jdGlvbih0LGUpe3ZhciByPVt0LDAsMCwwLDAsMCx0LDAsMCwwLDAsMCx0LDAsMCwwLDAsMCwxLDBdO3RoaXMuX2xvYWRNYXRyaXgocixlKX0sZS5wcm90b3R5cGUuZ3JleXNjYWxlPWZ1bmN0aW9uKHQsZSl7dmFyIHI9W3QsdCx0LDAsMCx0LHQsdCwwLDAsdCx0LHQsMCwwLDAsMCwwLDEsMF07dGhpcy5fbG9hZE1hdHJpeChyLGUpfSxlLnByb3RvdHlwZS5ibGFja0FuZFdoaXRlPWZ1bmN0aW9uKHQpe3ZhciBlPVsuMywuNiwuMSwwLDAsLjMsLjYsLjEsMCwwLC4zLC42LC4xLDAsMCwwLDAsMCwxLDBdO3RoaXMuX2xvYWRNYXRyaXgoZSx0KX0sZS5wcm90b3R5cGUuaHVlPWZ1bmN0aW9uKHQsZSl7dD0odHx8MCkvMTgwKk1hdGguUEk7dmFyIHI9TWF0aC5jb3ModCksbj1NYXRoLnNpbih0KSxpPU1hdGguc3FydCxvPTEvMyxzPWkobyksYT1yKygxLXIpKm8sdT1vKigxLXIpLXMqbixoPW8qKDEtcikrcypuLGw9byooMS1yKStzKm4sYz1yK28qKDEtciksZD1vKigxLXIpLXMqbixmPW8qKDEtciktcypuLHA9byooMS1yKStzKm4sdj1yK28qKDEtciksZz1bYSx1LGgsMCwwLGwsYyxkLDAsMCxmLHAsdiwwLDAsMCwwLDAsMSwwXTt0aGlzLl9sb2FkTWF0cml4KGcsZSl9LGUucHJvdG90eXBlLmNvbnRyYXN0PWZ1bmN0aW9uKHQsZSl7dmFyIHI9KHR8fDApKzEsbj0tLjUqKHItMSksaT1bciwwLDAsMCxuLDAsciwwLDAsbiwwLDAsciwwLG4sMCwwLDAsMSwwXTt0aGlzLl9sb2FkTWF0cml4KGksZSl9LGUucHJvdG90eXBlLnNhdHVyYXRlPWZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOjAsZT1hcmd1bWVudHNbMV0scj0yKnQvMysxLG49LS41KihyLTEpLGk9W3IsbixuLDAsMCxuLHIsbiwwLDAsbixuLHIsMCwwLDAsMCwwLDEsMF07dGhpcy5fbG9hZE1hdHJpeChpLGUpfSxlLnByb3RvdHlwZS5kZXNhdHVyYXRlPWZ1bmN0aW9uKCl7dGhpcy5zYXR1cmF0ZSgtMSl9LGUucHJvdG90eXBlLm5lZ2F0aXZlPWZ1bmN0aW9uKHQpe3ZhciBlPVstMSwwLDAsMSwwLDAsLTEsMCwxLDAsMCwwLC0xLDEsMCwwLDAsMCwxLDBdO3RoaXMuX2xvYWRNYXRyaXgoZSx0KX0sZS5wcm90b3R5cGUuc2VwaWE9ZnVuY3Rpb24odCl7dmFyIGU9Wy4zOTMsLjc2ODk5OTksLjE4ODk5OTk5LDAsMCwuMzQ5LC42ODU5OTk5LC4xNjc5OTk5OSwwLDAsLjI3MiwuNTMzOTk5OSwuMTMwOTk5OTksMCwwLDAsMCwwLDEsMF07dGhpcy5fbG9hZE1hdHJpeChlLHQpfSxlLnByb3RvdHlwZS50ZWNobmljb2xvcj1mdW5jdGlvbih0KXt2YXIgZT1bMS45MTI1Mjc3ODkxNDU2MDgzLC0uODU0NTM0NDk3Njk1MTY0NSwtLjA5MTU1NTA4NDgyNzU1NTg1LDAsMTEuNzkzNjAzNDM0Mzc3MzM3LC0uMzA4NzgzMzM4NTkyODA5NywxLjc2NTg5MDg1NTU0NTg0MjgsLS4xMDYwMTc0MzA3NDcyMjI0NSwwLC03MC4zNTIwNTE2MTQ2MTM5OCwtLjIzMTEwMzM3NzU0ODYxNiwtLjc1MDE4OTkxOTc0NDAyMTIsMS44NDc1OTc4MTYxMDgxODksMCwzMC45NTA5NDA4Njk0OTExMzgsMCwwLDAsMSwwXTt0aGlzLl9sb2FkTWF0cml4KGUsdCl9LGUucHJvdG90eXBlLnBvbGFyb2lkPWZ1bmN0aW9uKHQpe3ZhciBlPVsxLjQzOCwtLjA2MiwtLjA2MiwwLDAsLS4xMjIsMS4zNzgsLS4xMjIsMCwwLC0uMDE2LC0uMDE2LDEuNDgzLDAsMCwwLDAsMCwxLDBdO3RoaXMuX2xvYWRNYXRyaXgoZSx0KX0sZS5wcm90b3R5cGUudG9CR1I9ZnVuY3Rpb24odCl7dmFyIGU9WzAsMCwxLDAsMCwwLDEsMCwwLDAsMSwwLDAsMCwwLDAsMCwwLDEsMF07dGhpcy5fbG9hZE1hdHJpeChlLHQpfSxlLnByb3RvdHlwZS5rb2RhY2hyb21lPWZ1bmN0aW9uKHQpe3ZhciBlPVsxLjEyODU1ODIzOTY1OTM1MjUsLS4zOTY3MzgyMjgzNjAxMzQ4LC0uMDM5OTI1NTkxNzI5MjE3OTMsMCw2My43Mjk1ODc2MjE5NjUwMiwtLjE2NDA0MzM5OTYyMjQ0NjE2LDEuMDgzNTI1MTU2NjI5MTMwNCwtLjA1NDk4ODA1MTE1NjMzMTMyLDAsMjQuNzMyNDA3ODk2NzA2MjAzLC0uMTY3ODYwMTA3MDYxNTU3NjMsLS41NjAzNDE2Mjc3Njk1MjQ4LDEuNjAxNDg1MDc2MTk2NDk0MywwLDM1LjYyOTgyODA3NDYwOTQ2LDAsMCwwLDEsMF07dGhpcy5fbG9hZE1hdHJpeChlLHQpfSxlLnByb3RvdHlwZS5icm93bmk9ZnVuY3Rpb24odCl7dmFyIGU9Wy41OTk3MDIzNDk4MTU5NzE1LC4zNDU1MzI0MzA0ODM5MTI2MywtLjI3MDgyOTg2NzQ1MzgwNDIsMCw0Ny40MzE5Mjg1NTYwMDg3MywtLjAzNzcwMzI0OTgzNzc4MzE1NywuODYwOTU3NzU4Nzk5MjY0MSwuMTUwNTk1NTIzODg0NTk5MTMsMCwtMzYuOTY4NDE0OTgzMTkxMjcsLjI0MTEzNjM1MTI4MTUzMzM1LC0uMDc0NDEwMzc5MDg0MjI0OTIsLjQ0OTcyMTgyMDY0ODc3MTUzLDAsLTcuNTYyMDc1Mjc3NTkxMjgzLDAsMCwwLDEsMF07dGhpcy5fbG9hZE1hdHJpeChlLHQpfSxlLnByb3RvdHlwZS52aW50YWdlPWZ1bmN0aW9uKHQpe3ZhciBlPVsuNjI3OTM0NTYzNTYwNTk5NCwuMzIwMjE4MzQyMDgxOTM2NywtLjAzOTY1NDA4MjExMzEyNDUzLDAsOS42NTEyODU4MzUyOTQxMjMsLjAyNTc4Mzk3NzA0ODA4ODY4LC42NDQxMTg4NjQ0Mzc0NzcxLC4wMzI1OTEyNzYxNjE0OTI5NCwwLDcuNDYyODI5MTc2NDcwNTkxLC4wNDY2MDU1NTU2NzgyNzE5LC0uMDg1MTIzMjk4NzI0Nzg5MSwuNTI0MTY0ODAxODcwMDQ2NSwwLDUuMTU5MTkwNTg4MjM1Mjk2LDAsMCwwLDEsMF07dGhpcy5fbG9hZE1hdHJpeChlLHQpfSxlLnByb3RvdHlwZS5jb2xvclRvbmU9ZnVuY3Rpb24odCxlLHIsbixpKXt0PXR8fC4yLGU9ZXx8LjE1LHI9cnx8MTY3NzA0MzIsbj1ufHwzMzc1MTA0O3ZhciBvPShyPj4xNiYyNTUpLzI1NSxzPShyPj44JjI1NSkvMjU1LGE9KDI1NSZyKS8yNTUsdT0obj4+MTYmMjU1KS8yNTUsaD0obj4+OCYyNTUpLzI1NSxsPSgyNTUmbikvMjU1LGM9Wy4zLC41OSwuMTEsMCwwLG8scyxhLHQsMCx1LGgsbCxlLDAsby11LHMtaCxhLWwsMCwwXTt0aGlzLl9sb2FkTWF0cml4KGMsaSl9LGUucHJvdG90eXBlLm5pZ2h0PWZ1bmN0aW9uKHQsZSl7dD10fHwuMTt2YXIgcj1bLTIqdCwtdCwwLDAsMCwtdCwwLHQsMCwwLDAsdCwyKnQsMCwwLDAsMCwwLDEsMF07dGhpcy5fbG9hZE1hdHJpeChyLGUpfSxlLnByb3RvdHlwZS5wcmVkYXRvcj1mdW5jdGlvbih0LGUpe1xudmFyIHI9WzExLjIyNDEzMDYzMDQ5MzE2NCp0LC00Ljc5NDQ4Njk5OTUxMTcxOSp0LC0yLjg3NDYxMTg1NDU1MzIyMjcqdCwwKnQsLjQwMzQyNDM4MjIwOTc3NzgzKnQsLTMuNjMzMDY5NzUzNjQ2ODUwNip0LDkuMTkzMTU3MTk2MDQ0OTIyKnQsLTIuOTUxODEwODM2NzkxOTkyKnQsMCp0LC0xLjMxNjEzNTA0ODg2NjI3Mip0LC0zLjIxODQxOTc5MDI2Nzk0NDMqdCwtNC4yMzc1MDMwNTE3NTc4MTI1KnQsNy40NzY0NDgwNTkwODIwMzEqdCwwKnQsLjgwNDQ0NTkyMjM3NDcyNTMqdCwwLDAsMCwxLDBdO3RoaXMuX2xvYWRNYXRyaXgocixlKX0sZS5wcm90b3R5cGUubHNkPWZ1bmN0aW9uKHQpe3ZhciBlPVsyLC0uNCwuNSwwLDAsLS41LDIsLS40LDAsMCwtLjQsLS41LDMsMCwwLDAsMCwwLDEsMF07dGhpcy5fbG9hZE1hdHJpeChlLHQpfSxlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3ZhciB0PVsxLDAsMCwwLDAsMCwxLDAsMCwwLDAsMCwxLDAsMCwwLDAsMCwxLDBdO3RoaXMuX2xvYWRNYXRyaXgodCwhMSl9LHMoZSxbe2tleTpcIm1hdHJpeFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVuaWZvcm1zLm19LHNldDpmdW5jdGlvbih0KXt0aGlzLnVuaWZvcm1zLm09dH19LHtrZXk6XCJhbHBoYVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVuaWZvcm1zLnVBbHBoYX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMudW5pZm9ybXMudUFscGhhPXR9fV0pLGV9KHUuRmlsdGVyKSk7ci5kZWZhdWx0PWgsaC5wcm90b3R5cGUuZ3JheXNjYWxlPWgucHJvdG90eXBlLmdyZXlzY2FsZX0se1wiLi4vLi4vY29yZVwiOjY1LHBhdGg6OH1dLDE1MTpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkodCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBvKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9ci5fX2VzTW9kdWxlPSEwO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksYT10KFwiLi4vLi4vY29yZVwiKSx1PWZ1bmN0aW9uKHQpe2lmKHQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT17fTtpZihudWxsIT10KWZvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKTtyZXR1cm4gZS5kZWZhdWx0PXQsZX0oYSksaD0odChcInBhdGhcIiksZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShyLG8pe24odGhpcyxlKTt2YXIgcz1uZXcgdS5NYXRyaXg7ci5yZW5kZXJhYmxlPSExO3ZhciBhPWkodGhpcyx0LmNhbGwodGhpcyxcImF0dHJpYnV0ZSB2ZWMyIGFWZXJ0ZXhQb3NpdGlvbjtcXG5hdHRyaWJ1dGUgdmVjMiBhVGV4dHVyZUNvb3JkO1xcblxcbnVuaWZvcm0gbWF0MyBwcm9qZWN0aW9uTWF0cml4O1xcbnVuaWZvcm0gbWF0MyBmaWx0ZXJNYXRyaXg7XFxuXFxudmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XFxudmFyeWluZyB2ZWMyIHZGaWx0ZXJDb29yZDtcXG5cXG52b2lkIG1haW4odm9pZClcXG57XFxuICAgZ2xfUG9zaXRpb24gPSB2ZWM0KChwcm9qZWN0aW9uTWF0cml4ICogdmVjMyhhVmVydGV4UG9zaXRpb24sIDEuMCkpLnh5LCAwLjAsIDEuMCk7XFxuICAgdkZpbHRlckNvb3JkID0gKCBmaWx0ZXJNYXRyaXggKiB2ZWMzKCBhVGV4dHVyZUNvb3JkLCAxLjApICApLnh5O1xcbiAgIHZUZXh0dXJlQ29vcmQgPSBhVGV4dHVyZUNvb3JkO1xcbn1cIixcInZhcnlpbmcgdmVjMiB2RmlsdGVyQ29vcmQ7XFxudmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XFxuXFxudW5pZm9ybSB2ZWMyIHNjYWxlO1xcblxcbnVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1xcbnVuaWZvcm0gc2FtcGxlcjJEIG1hcFNhbXBsZXI7XFxuXFxudW5pZm9ybSB2ZWM0IGZpbHRlckFyZWE7XFxudW5pZm9ybSB2ZWM0IGZpbHRlckNsYW1wO1xcblxcbnZvaWQgbWFpbih2b2lkKVxcbntcXG4gIHZlYzQgbWFwID0gIHRleHR1cmUyRChtYXBTYW1wbGVyLCB2RmlsdGVyQ29vcmQpO1xcblxcbiAgbWFwIC09IDAuNTtcXG4gIG1hcC54eSAqPSBzY2FsZSAvIGZpbHRlckFyZWEueHk7XFxuXFxuICBnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIGNsYW1wKHZlYzIodlRleHR1cmVDb29yZC54ICsgbWFwLngsIHZUZXh0dXJlQ29vcmQueSArIG1hcC55KSwgZmlsdGVyQ2xhbXAueHksIGZpbHRlckNsYW1wLnp3KSk7XFxufVxcblwiKSk7cmV0dXJuIGEubWFza1Nwcml0ZT1yLGEubWFza01hdHJpeD1zLGEudW5pZm9ybXMubWFwU2FtcGxlcj1yLl90ZXh0dXJlLGEudW5pZm9ybXMuZmlsdGVyTWF0cml4PXMsYS51bmlmb3Jtcy5zY2FsZT17eDoxLHk6MX0sbnVsbCE9PW8mJnZvaWQgMCE9PW98fChvPTIwKSxhLnNjYWxlPW5ldyB1LlBvaW50KG8sbyksYX1yZXR1cm4gbyhlLHQpLGUucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHQsZSxyKXt0aGlzLnVuaWZvcm1zLmZpbHRlck1hdHJpeD10LmNhbGN1bGF0ZVNwcml0ZU1hdHJpeCh0aGlzLm1hc2tNYXRyaXgsdGhpcy5tYXNrU3ByaXRlKSx0aGlzLnVuaWZvcm1zLnNjYWxlLng9dGhpcy5zY2FsZS54LHRoaXMudW5pZm9ybXMuc2NhbGUueT10aGlzLnNjYWxlLnksdC5hcHBseUZpbHRlcih0aGlzLGUscil9LHMoZSxbe2tleTpcIm1hcFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVuaWZvcm1zLm1hcFNhbXBsZXJ9LHNldDpmdW5jdGlvbih0KXt0aGlzLnVuaWZvcm1zLm1hcFNhbXBsZXI9dH19XSksZX0odS5GaWx0ZXIpKTtyLmRlZmF1bHQ9aH0se1wiLi4vLi4vY29yZVwiOjY1LHBhdGg6OH1dLDE1MjpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkodCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBvKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9ci5fX2VzTW9kdWxlPSEwO3ZhciBzPXQoXCIuLi8uLi9jb3JlXCIpLGE9ZnVuY3Rpb24odCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfShzKSx1PSh0KFwicGF0aFwiKSxmdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG4odGhpcyxlKSxpKHRoaXMsdC5jYWxsKHRoaXMsXCJcXG5hdHRyaWJ1dGUgdmVjMiBhVmVydGV4UG9zaXRpb247XFxuYXR0cmlidXRlIHZlYzIgYVRleHR1cmVDb29yZDtcXG5cXG51bmlmb3JtIG1hdDMgcHJvamVjdGlvbk1hdHJpeDtcXG5cXG52YXJ5aW5nIHZlYzIgdl9yZ2JOVztcXG52YXJ5aW5nIHZlYzIgdl9yZ2JORTtcXG52YXJ5aW5nIHZlYzIgdl9yZ2JTVztcXG52YXJ5aW5nIHZlYzIgdl9yZ2JTRTtcXG52YXJ5aW5nIHZlYzIgdl9yZ2JNO1xcblxcbnVuaWZvcm0gdmVjNCBmaWx0ZXJBcmVhO1xcblxcbnZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1xcblxcbnZlYzIgbWFwQ29vcmQoIHZlYzIgY29vcmQgKVxcbntcXG4gICAgY29vcmQgKj0gZmlsdGVyQXJlYS54eTtcXG4gICAgY29vcmQgKz0gZmlsdGVyQXJlYS56dztcXG5cXG4gICAgcmV0dXJuIGNvb3JkO1xcbn1cXG5cXG52ZWMyIHVubWFwQ29vcmQoIHZlYzIgY29vcmQgKVxcbntcXG4gICAgY29vcmQgLT0gZmlsdGVyQXJlYS56dztcXG4gICAgY29vcmQgLz0gZmlsdGVyQXJlYS54eTtcXG5cXG4gICAgcmV0dXJuIGNvb3JkO1xcbn1cXG5cXG52b2lkIHRleGNvb3Jkcyh2ZWMyIGZyYWdDb29yZCwgdmVjMiByZXNvbHV0aW9uLFxcbiAgICAgICAgICAgICAgIG91dCB2ZWMyIHZfcmdiTlcsIG91dCB2ZWMyIHZfcmdiTkUsXFxuICAgICAgICAgICAgICAgb3V0IHZlYzIgdl9yZ2JTVywgb3V0IHZlYzIgdl9yZ2JTRSxcXG4gICAgICAgICAgICAgICBvdXQgdmVjMiB2X3JnYk0pIHtcXG4gICAgdmVjMiBpbnZlcnNlVlAgPSAxLjAgLyByZXNvbHV0aW9uLnh5O1xcbiAgICB2X3JnYk5XID0gKGZyYWdDb29yZCArIHZlYzIoLTEuMCwgLTEuMCkpICogaW52ZXJzZVZQO1xcbiAgICB2X3JnYk5FID0gKGZyYWdDb29yZCArIHZlYzIoMS4wLCAtMS4wKSkgKiBpbnZlcnNlVlA7XFxuICAgIHZfcmdiU1cgPSAoZnJhZ0Nvb3JkICsgdmVjMigtMS4wLCAxLjApKSAqIGludmVyc2VWUDtcXG4gICAgdl9yZ2JTRSA9IChmcmFnQ29vcmQgKyB2ZWMyKDEuMCwgMS4wKSkgKiBpbnZlcnNlVlA7XFxuICAgIHZfcmdiTSA9IHZlYzIoZnJhZ0Nvb3JkICogaW52ZXJzZVZQKTtcXG59XFxuXFxudm9pZCBtYWluKHZvaWQpIHtcXG5cXG4gICBnbF9Qb3NpdGlvbiA9IHZlYzQoKHByb2plY3Rpb25NYXRyaXggKiB2ZWMzKGFWZXJ0ZXhQb3NpdGlvbiwgMS4wKSkueHksIDAuMCwgMS4wKTtcXG5cXG4gICB2VGV4dHVyZUNvb3JkID0gYVRleHR1cmVDb29yZDtcXG5cXG4gICB2ZWMyIGZyYWdDb29yZCA9IHZUZXh0dXJlQ29vcmQgKiBmaWx0ZXJBcmVhLnh5O1xcblxcbiAgIHRleGNvb3JkcyhmcmFnQ29vcmQsIGZpbHRlckFyZWEueHksIHZfcmdiTlcsIHZfcmdiTkUsIHZfcmdiU1csIHZfcmdiU0UsIHZfcmdiTSk7XFxufVwiLCd2YXJ5aW5nIHZlYzIgdl9yZ2JOVztcXG52YXJ5aW5nIHZlYzIgdl9yZ2JORTtcXG52YXJ5aW5nIHZlYzIgdl9yZ2JTVztcXG52YXJ5aW5nIHZlYzIgdl9yZ2JTRTtcXG52YXJ5aW5nIHZlYzIgdl9yZ2JNO1xcblxcbnZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1xcbnVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1xcbnVuaWZvcm0gdmVjNCBmaWx0ZXJBcmVhO1xcblxcbi8qKlxcbiBCYXNpYyBGWEFBIGltcGxlbWVudGF0aW9uIGJhc2VkIG9uIHRoZSBjb2RlIG9uIGdlZWtzM2QuY29tIHdpdGggdGhlXFxuIG1vZGlmaWNhdGlvbiB0aGF0IHRoZSB0ZXh0dXJlMkRMb2Qgc3R1ZmYgd2FzIHJlbW92ZWQgc2luY2UgaXRcXCdzXFxuIHVuc3VwcG9ydGVkIGJ5IFdlYkdMLlxcbiBcXG4gLS1cXG4gXFxuIEZyb206XFxuIGh0dHBzOi8vZ2l0aHViLmNvbS9taXRzdWhpa28vd2ViZ2wtbWVpbmNyYWZ0XFxuIFxcbiBDb3B5cmlnaHQgKGMpIDIwMTEgYnkgQXJtaW4gUm9uYWNoZXIuXFxuIFxcbiBTb21lIHJpZ2h0cyByZXNlcnZlZC5cXG4gXFxuIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxcbiBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlXFxuIG1ldDpcXG4gXFxuICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHRcXG4gbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxcbiBcXG4gKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlXFxuIGNvcHlyaWdodCBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nXFxuIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZFxcbiB3aXRoIHRoZSBkaXN0cmlidXRpb24uXFxuIFxcbiAqIFRoZSBuYW1lcyBvZiB0aGUgY29udHJpYnV0b3JzIG1heSBub3QgYmUgdXNlZCB0byBlbmRvcnNlIG9yXFxuIHByb21vdGUgcHJvZHVjdHMgZGVyaXZlZCBmcm9tIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpY1xcbiBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXFxuIFxcbiBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTXFxuIFwiQVMgSVNcIiBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1RcXG4gTElNSVRFRCBUTywgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SXFxuIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUXFxuIE9XTkVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLFxcbiBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UXFxuIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLFxcbiBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTllcXG4gVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxcbiAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0VcXG4gT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cXG4gKi9cXG5cXG4jaWZuZGVmIEZYQUFfUkVEVUNFX01JTlxcbiNkZWZpbmUgRlhBQV9SRURVQ0VfTUlOICAgKDEuMC8gMTI4LjApXFxuI2VuZGlmXFxuI2lmbmRlZiBGWEFBX1JFRFVDRV9NVUxcXG4jZGVmaW5lIEZYQUFfUkVEVUNFX01VTCAgICgxLjAgLyA4LjApXFxuI2VuZGlmXFxuI2lmbmRlZiBGWEFBX1NQQU5fTUFYXFxuI2RlZmluZSBGWEFBX1NQQU5fTUFYICAgICA4LjBcXG4jZW5kaWZcXG5cXG4vL29wdGltaXplZCB2ZXJzaW9uIGZvciBtb2JpbGUsIHdoZXJlIGRlcGVuZGVudFxcbi8vdGV4dHVyZSByZWFkcyBjYW4gYmUgYSBib3R0bGVuZWNrXFxudmVjNCBmeGFhKHNhbXBsZXIyRCB0ZXgsIHZlYzIgZnJhZ0Nvb3JkLCB2ZWMyIHJlc29sdXRpb24sXFxuICAgICAgICAgIHZlYzIgdl9yZ2JOVywgdmVjMiB2X3JnYk5FLFxcbiAgICAgICAgICB2ZWMyIHZfcmdiU1csIHZlYzIgdl9yZ2JTRSxcXG4gICAgICAgICAgdmVjMiB2X3JnYk0pIHtcXG4gICAgdmVjNCBjb2xvcjtcXG4gICAgbWVkaXVtcCB2ZWMyIGludmVyc2VWUCA9IHZlYzIoMS4wIC8gcmVzb2x1dGlvbi54LCAxLjAgLyByZXNvbHV0aW9uLnkpO1xcbiAgICB2ZWMzIHJnYk5XID0gdGV4dHVyZTJEKHRleCwgdl9yZ2JOVykueHl6O1xcbiAgICB2ZWMzIHJnYk5FID0gdGV4dHVyZTJEKHRleCwgdl9yZ2JORSkueHl6O1xcbiAgICB2ZWMzIHJnYlNXID0gdGV4dHVyZTJEKHRleCwgdl9yZ2JTVykueHl6O1xcbiAgICB2ZWMzIHJnYlNFID0gdGV4dHVyZTJEKHRleCwgdl9yZ2JTRSkueHl6O1xcbiAgICB2ZWM0IHRleENvbG9yID0gdGV4dHVyZTJEKHRleCwgdl9yZ2JNKTtcXG4gICAgdmVjMyByZ2JNICA9IHRleENvbG9yLnh5ejtcXG4gICAgdmVjMyBsdW1hID0gdmVjMygwLjI5OSwgMC41ODcsIDAuMTE0KTtcXG4gICAgZmxvYXQgbHVtYU5XID0gZG90KHJnYk5XLCBsdW1hKTtcXG4gICAgZmxvYXQgbHVtYU5FID0gZG90KHJnYk5FLCBsdW1hKTtcXG4gICAgZmxvYXQgbHVtYVNXID0gZG90KHJnYlNXLCBsdW1hKTtcXG4gICAgZmxvYXQgbHVtYVNFID0gZG90KHJnYlNFLCBsdW1hKTtcXG4gICAgZmxvYXQgbHVtYU0gID0gZG90KHJnYk0sICBsdW1hKTtcXG4gICAgZmxvYXQgbHVtYU1pbiA9IG1pbihsdW1hTSwgbWluKG1pbihsdW1hTlcsIGx1bWFORSksIG1pbihsdW1hU1csIGx1bWFTRSkpKTtcXG4gICAgZmxvYXQgbHVtYU1heCA9IG1heChsdW1hTSwgbWF4KG1heChsdW1hTlcsIGx1bWFORSksIG1heChsdW1hU1csIGx1bWFTRSkpKTtcXG4gICAgXFxuICAgIG1lZGl1bXAgdmVjMiBkaXI7XFxuICAgIGRpci54ID0gLSgobHVtYU5XICsgbHVtYU5FKSAtIChsdW1hU1cgKyBsdW1hU0UpKTtcXG4gICAgZGlyLnkgPSAgKChsdW1hTlcgKyBsdW1hU1cpIC0gKGx1bWFORSArIGx1bWFTRSkpO1xcbiAgICBcXG4gICAgZmxvYXQgZGlyUmVkdWNlID0gbWF4KChsdW1hTlcgKyBsdW1hTkUgKyBsdW1hU1cgKyBsdW1hU0UpICpcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICgwLjI1ICogRlhBQV9SRURVQ0VfTVVMKSwgRlhBQV9SRURVQ0VfTUlOKTtcXG4gICAgXFxuICAgIGZsb2F0IHJjcERpck1pbiA9IDEuMCAvIChtaW4oYWJzKGRpci54KSwgYWJzKGRpci55KSkgKyBkaXJSZWR1Y2UpO1xcbiAgICBkaXIgPSBtaW4odmVjMihGWEFBX1NQQU5fTUFYLCBGWEFBX1NQQU5fTUFYKSxcXG4gICAgICAgICAgICAgIG1heCh2ZWMyKC1GWEFBX1NQQU5fTUFYLCAtRlhBQV9TUEFOX01BWCksXFxuICAgICAgICAgICAgICAgICAgZGlyICogcmNwRGlyTWluKSkgKiBpbnZlcnNlVlA7XFxuICAgIFxcbiAgICB2ZWMzIHJnYkEgPSAwLjUgKiAoXFxuICAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlMkQodGV4LCBmcmFnQ29vcmQgKiBpbnZlcnNlVlAgKyBkaXIgKiAoMS4wIC8gMy4wIC0gMC41KSkueHl6ICtcXG4gICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmUyRCh0ZXgsIGZyYWdDb29yZCAqIGludmVyc2VWUCArIGRpciAqICgyLjAgLyAzLjAgLSAwLjUpKS54eXopO1xcbiAgICB2ZWMzIHJnYkIgPSByZ2JBICogMC41ICsgMC4yNSAqIChcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZTJEKHRleCwgZnJhZ0Nvb3JkICogaW52ZXJzZVZQICsgZGlyICogLTAuNSkueHl6ICtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZTJEKHRleCwgZnJhZ0Nvb3JkICogaW52ZXJzZVZQICsgZGlyICogMC41KS54eXopO1xcbiAgICBcXG4gICAgZmxvYXQgbHVtYUIgPSBkb3QocmdiQiwgbHVtYSk7XFxuICAgIGlmICgobHVtYUIgPCBsdW1hTWluKSB8fCAobHVtYUIgPiBsdW1hTWF4KSlcXG4gICAgICAgIGNvbG9yID0gdmVjNChyZ2JBLCB0ZXhDb2xvci5hKTtcXG4gICAgZWxzZVxcbiAgICAgICAgY29sb3IgPSB2ZWM0KHJnYkIsIHRleENvbG9yLmEpO1xcbiAgICByZXR1cm4gY29sb3I7XFxufVxcblxcbnZvaWQgbWFpbigpIHtcXG5cXG4gICAgICB2ZWMyIGZyYWdDb29yZCA9IHZUZXh0dXJlQ29vcmQgKiBmaWx0ZXJBcmVhLnh5O1xcblxcbiAgICAgIHZlYzQgY29sb3I7XFxuXFxuICAgIGNvbG9yID0gZnhhYSh1U2FtcGxlciwgZnJhZ0Nvb3JkLCBmaWx0ZXJBcmVhLnh5LCB2X3JnYk5XLCB2X3JnYk5FLCB2X3JnYlNXLCB2X3JnYlNFLCB2X3JnYk0pO1xcblxcbiAgICAgIGdsX0ZyYWdDb2xvciA9IGNvbG9yO1xcbn1cXG4nKSl9cmV0dXJuIG8oZSx0KSxlfShhLkZpbHRlcikpO3IuZGVmYXVsdD11fSx7XCIuLi8uLi9jb3JlXCI6NjUscGF0aDo4fV0sMTUzOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ci5fX2VzTW9kdWxlPSEwO3ZhciBpPXQoXCIuL2Z4YWEvRlhBQUZpbHRlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkZYQUFGaWx0ZXJcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihpKS5kZWZhdWx0fX0pO3ZhciBvPXQoXCIuL25vaXNlL05vaXNlRmlsdGVyXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiTm9pc2VGaWx0ZXJcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihvKS5kZWZhdWx0fX0pO3ZhciBzPXQoXCIuL2Rpc3BsYWNlbWVudC9EaXNwbGFjZW1lbnRGaWx0ZXJcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJEaXNwbGFjZW1lbnRGaWx0ZXJcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihzKS5kZWZhdWx0fX0pO3ZhciBhPXQoXCIuL2JsdXIvQmx1ckZpbHRlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkJsdXJGaWx0ZXJcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihhKS5kZWZhdWx0fX0pO3ZhciB1PXQoXCIuL2JsdXIvQmx1clhGaWx0ZXJcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJCbHVyWEZpbHRlclwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBuKHUpLmRlZmF1bHR9fSk7dmFyIGg9dChcIi4vYmx1ci9CbHVyWUZpbHRlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkJsdXJZRmlsdGVyXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4oaCkuZGVmYXVsdH19KTt2YXIgbD10KFwiLi9jb2xvcm1hdHJpeC9Db2xvck1hdHJpeEZpbHRlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkNvbG9yTWF0cml4RmlsdGVyXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4obCkuZGVmYXVsdH19KTt2YXIgYz10KFwiLi9hbHBoYS9BbHBoYUZpbHRlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkFscGhhRmlsdGVyXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4oYykuZGVmYXVsdH19KX0se1wiLi9hbHBoYS9BbHBoYUZpbHRlclwiOjE0MyxcIi4vYmx1ci9CbHVyRmlsdGVyXCI6MTQ0LFwiLi9ibHVyL0JsdXJYRmlsdGVyXCI6MTQ1LFwiLi9ibHVyL0JsdXJZRmlsdGVyXCI6MTQ2LFwiLi9jb2xvcm1hdHJpeC9Db2xvck1hdHJpeEZpbHRlclwiOjE1MCxcIi4vZGlzcGxhY2VtZW50L0Rpc3BsYWNlbWVudEZpbHRlclwiOjE1MSxcIi4vZnhhYS9GWEFBRmlsdGVyXCI6MTUyLFwiLi9ub2lzZS9Ob2lzZUZpbHRlclwiOjE1NH1dLDE1NDpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkodCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBvKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9ci5fX2VzTW9kdWxlPSEwO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksYT10KFwiLi4vLi4vY29yZVwiKSx1PWZ1bmN0aW9uKHQpe2lmKHQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT17fTtpZihudWxsIT10KWZvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKTtyZXR1cm4gZS5kZWZhdWx0PXQsZX0oYSksaD0odChcInBhdGhcIiksZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTouNSxvPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpNYXRoLnJhbmRvbSgpO24odGhpcyxlKTt2YXIgcz1pKHRoaXMsdC5jYWxsKHRoaXMsXCJhdHRyaWJ1dGUgdmVjMiBhVmVydGV4UG9zaXRpb247XFxuYXR0cmlidXRlIHZlYzIgYVRleHR1cmVDb29yZDtcXG5cXG51bmlmb3JtIG1hdDMgcHJvamVjdGlvbk1hdHJpeDtcXG5cXG52YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcXG5cXG52b2lkIG1haW4odm9pZClcXG57XFxuICAgIGdsX1Bvc2l0aW9uID0gdmVjNCgocHJvamVjdGlvbk1hdHJpeCAqIHZlYzMoYVZlcnRleFBvc2l0aW9uLCAxLjApKS54eSwgMC4wLCAxLjApO1xcbiAgICB2VGV4dHVyZUNvb3JkID0gYVRleHR1cmVDb29yZDtcXG59XCIsXCJwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxuXFxudmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XFxudmFyeWluZyB2ZWM0IHZDb2xvcjtcXG5cXG51bmlmb3JtIGZsb2F0IHVOb2lzZTtcXG51bmlmb3JtIGZsb2F0IHVTZWVkO1xcbnVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1xcblxcbmZsb2F0IHJhbmQodmVjMiBjbylcXG57XFxuICAgIHJldHVybiBmcmFjdChzaW4oZG90KGNvLnh5LCB2ZWMyKDEyLjk4OTgsIDc4LjIzMykpKSAqIDQzNzU4LjU0NTMpO1xcbn1cXG5cXG52b2lkIG1haW4oKVxcbntcXG4gICAgdmVjNCBjb2xvciA9IHRleHR1cmUyRCh1U2FtcGxlciwgdlRleHR1cmVDb29yZCk7XFxuICAgIGZsb2F0IHJhbmRvbVZhbHVlID0gcmFuZChnbF9GcmFnQ29vcmQueHkgKiB1U2VlZCk7XFxuICAgIGZsb2F0IGRpZmYgPSAocmFuZG9tVmFsdWUgLSAwLjUpICogdU5vaXNlO1xcblxcbiAgICAvLyBVbi1wcmVtdWx0aXBseSBhbHBoYSBiZWZvcmUgYXBwbHlpbmcgdGhlIGNvbG9yIG1hdHJpeC4gU2VlIGlzc3VlICMzNTM5LlxcbiAgICBpZiAoY29sb3IuYSA+IDAuMCkge1xcbiAgICAgICAgY29sb3IucmdiIC89IGNvbG9yLmE7XFxuICAgIH1cXG5cXG4gICAgY29sb3IuciArPSBkaWZmO1xcbiAgICBjb2xvci5nICs9IGRpZmY7XFxuICAgIGNvbG9yLmIgKz0gZGlmZjtcXG5cXG4gICAgLy8gUHJlbXVsdGlwbHkgYWxwaGEgYWdhaW4uXFxuICAgIGNvbG9yLnJnYiAqPSBjb2xvci5hO1xcblxcbiAgICBnbF9GcmFnQ29sb3IgPSBjb2xvcjtcXG59XFxuXCIpKTtyZXR1cm4gcy5ub2lzZT1yLHMuc2VlZD1vLHN9cmV0dXJuIG8oZSx0KSxzKGUsW3trZXk6XCJub2lzZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVuaWZvcm1zLnVOb2lzZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMudW5pZm9ybXMudU5vaXNlPXR9fSx7a2V5Olwic2VlZFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVuaWZvcm1zLnVTZWVkfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy51bmlmb3Jtcy51U2VlZD10fX1dKSxlfSh1LkZpbHRlcikpO3IuZGVmYXVsdD1ofSx7XCIuLi8uLi9jb3JlXCI6NjUscGF0aDo4fV0sMTU1OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ci5fX2VzTW9kdWxlPSEwO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksbz10KFwiLi4vY29yZVwiKSxzPWZ1bmN0aW9uKHQpe2lmKHQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT17fTtpZihudWxsIT10KWZvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKTtyZXR1cm4gZS5kZWZhdWx0PXQsZX0obyksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtuKHRoaXMsdCksdGhpcy5nbG9iYWw9bmV3IHMuUG9pbnQsdGhpcy50YXJnZXQ9bnVsbCx0aGlzLm9yaWdpbmFsRXZlbnQ9bnVsbCx0aGlzLmlkZW50aWZpZXI9bnVsbCx0aGlzLmlzUHJpbWFyeT0hMSx0aGlzLmJ1dHRvbj0wLHRoaXMuYnV0dG9ucz0wLHRoaXMud2lkdGg9MCx0aGlzLmhlaWdodD0wLHRoaXMudGlsdFg9MCx0aGlzLnRpbHRZPTAsdGhpcy5wb2ludGVyVHlwZT1udWxsLHRoaXMucHJlc3N1cmU9MCx0aGlzLnJvdGF0aW9uQW5nbGU9MCx0aGlzLnR3aXN0PTAsdGhpcy50YW5nZW50aWFsUHJlc3N1cmU9MH1yZXR1cm4gdC5wcm90b3R5cGUuZ2V0TG9jYWxQb3NpdGlvbj1mdW5jdGlvbih0LGUscil7cmV0dXJuIHQud29ybGRUcmFuc2Zvcm0uYXBwbHlJbnZlcnNlKHJ8fHRoaXMuZ2xvYmFsLGUpfSx0LnByb3RvdHlwZS5jb3B5RXZlbnQ9ZnVuY3Rpb24odCl7dC5pc1ByaW1hcnkmJih0aGlzLmlzUHJpbWFyeT0hMCksdGhpcy5idXR0b249dC5idXR0b24sdGhpcy5idXR0b25zPU51bWJlci5pc0ludGVnZXIodC5idXR0b25zKT90LmJ1dHRvbnM6dC53aGljaCx0aGlzLndpZHRoPXQud2lkdGgsdGhpcy5oZWlnaHQ9dC5oZWlnaHQsdGhpcy50aWx0WD10LnRpbHRYLHRoaXMudGlsdFk9dC50aWx0WSx0aGlzLnBvaW50ZXJUeXBlPXQucG9pbnRlclR5cGUsdGhpcy5wcmVzc3VyZT10LnByZXNzdXJlLHRoaXMucm90YXRpb25BbmdsZT10LnJvdGF0aW9uQW5nbGUsdGhpcy50d2lzdD10LnR3aXN0fHwwLHRoaXMudGFuZ2VudGlhbFByZXNzdXJlPXQudGFuZ2VudGlhbFByZXNzdXJlfHwwfSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuaXNQcmltYXJ5PSExfSxpKHQsW3trZXk6XCJwb2ludGVySWRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pZGVudGlmaWVyfX1dKSx0fSgpO3IuZGVmYXVsdD1hfSx7XCIuLi9jb3JlXCI6NjV9XSwxNTY6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1yLl9fZXNNb2R1bGU9ITA7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7bih0aGlzLHQpLHRoaXMuc3RvcHBlZD0hMSx0aGlzLnRhcmdldD1udWxsLHRoaXMuY3VycmVudFRhcmdldD1udWxsLHRoaXMudHlwZT1udWxsLHRoaXMuZGF0YT1udWxsfXJldHVybiB0LnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb249ZnVuY3Rpb24oKXt0aGlzLnN0b3BwZWQ9ITB9LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5zdG9wcGVkPSExLHRoaXMuY3VycmVudFRhcmdldD1udWxsLHRoaXMudGFyZ2V0PW51bGx9LHR9KCk7ci5kZWZhdWx0PWl9LHt9XSwxNTc6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBpKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gcyh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfXIuX19lc01vZHVsZT0hMDt2YXIgYT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiB0fSx1PXQoXCIuLi9jb3JlXCIpLGg9ZnVuY3Rpb24odCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfSh1KSxsPXQoXCIuL0ludGVyYWN0aW9uRGF0YVwiKSxjPW4obCksZD10KFwiLi9JbnRlcmFjdGlvbkV2ZW50XCIpLGY9bihkKSxwPXQoXCIuL0ludGVyYWN0aW9uVHJhY2tpbmdEYXRhXCIpLHY9bihwKSxnPXQoXCJldmVudGVtaXR0ZXIzXCIpLHk9bihnKSxtPXQoXCIuL2ludGVyYWN0aXZlVGFyZ2V0XCIpLF89bihtKTtoLnV0aWxzLm1peGlucy5kZWxheU1peGluKGguRGlzcGxheU9iamVjdC5wcm90b3R5cGUsXy5kZWZhdWx0KTt2YXIgYj0xLHg9e3RhcmdldDpudWxsLGRhdGE6e2dsb2JhbDpudWxsfX0sVD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHIsbil7aSh0aGlzLGUpO3ZhciBzPW8odGhpcyx0LmNhbGwodGhpcykpO3JldHVybiBuPW58fHt9LHMucmVuZGVyZXI9cixzLmF1dG9QcmV2ZW50RGVmYXVsdD12b2lkIDA9PT1uLmF1dG9QcmV2ZW50RGVmYXVsdHx8bi5hdXRvUHJldmVudERlZmF1bHQscy5pbnRlcmFjdGlvbkZyZXF1ZW5jeT1uLmludGVyYWN0aW9uRnJlcXVlbmN5fHwxMCxzLm1vdXNlPW5ldyBjLmRlZmF1bHQscy5tb3VzZS5pZGVudGlmaWVyPWIscy5tb3VzZS5nbG9iYWwuc2V0KC05OTk5OTkpLHMuYWN0aXZlSW50ZXJhY3Rpb25EYXRhPXt9LHMuYWN0aXZlSW50ZXJhY3Rpb25EYXRhW2JdPXMubW91c2Uscy5pbnRlcmFjdGlvbkRhdGFQb29sPVtdLHMuZXZlbnREYXRhPW5ldyBmLmRlZmF1bHQscy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQ9bnVsbCxzLm1vdmVXaGVuSW5zaWRlPSExLHMuZXZlbnRzQWRkZWQ9ITEscy5tb3VzZU92ZXJSZW5kZXJlcj0hMSxzLnN1cHBvcnRzVG91Y2hFdmVudHM9XCJvbnRvdWNoc3RhcnRcImluIHdpbmRvdyxzLnN1cHBvcnRzUG9pbnRlckV2ZW50cz0hIXdpbmRvdy5Qb2ludGVyRXZlbnQscy5vblBvaW50ZXJVcD1zLm9uUG9pbnRlclVwLmJpbmQocykscy5wcm9jZXNzUG9pbnRlclVwPXMucHJvY2Vzc1BvaW50ZXJVcC5iaW5kKHMpLHMub25Qb2ludGVyQ2FuY2VsPXMub25Qb2ludGVyQ2FuY2VsLmJpbmQocykscy5wcm9jZXNzUG9pbnRlckNhbmNlbD1zLnByb2Nlc3NQb2ludGVyQ2FuY2VsLmJpbmQocykscy5vblBvaW50ZXJEb3duPXMub25Qb2ludGVyRG93bi5iaW5kKHMpLHMucHJvY2Vzc1BvaW50ZXJEb3duPXMucHJvY2Vzc1BvaW50ZXJEb3duLmJpbmQocykscy5vblBvaW50ZXJNb3ZlPXMub25Qb2ludGVyTW92ZS5iaW5kKHMpLHMucHJvY2Vzc1BvaW50ZXJNb3ZlPXMucHJvY2Vzc1BvaW50ZXJNb3ZlLmJpbmQocykscy5vblBvaW50ZXJPdXQ9cy5vblBvaW50ZXJPdXQuYmluZChzKSxzLnByb2Nlc3NQb2ludGVyT3Zlck91dD1zLnByb2Nlc3NQb2ludGVyT3Zlck91dC5iaW5kKHMpLHMub25Qb2ludGVyT3Zlcj1zLm9uUG9pbnRlck92ZXIuYmluZChzKSxzLmN1cnNvclN0eWxlcz17ZGVmYXVsdDpcImluaGVyaXRcIixwb2ludGVyOlwicG9pbnRlclwifSxzLmN1cnJlbnRDdXJzb3JNb2RlPW51bGwscy5jdXJzb3I9bnVsbCxzLl90ZW1wUG9pbnQ9bmV3IGguUG9pbnQscy5yZXNvbHV0aW9uPTEscy5zZXRUYXJnZXRFbGVtZW50KHMucmVuZGVyZXIudmlldyxzLnJlbmRlcmVyLnJlc29sdXRpb24pLHN9cmV0dXJuIHMoZSx0KSxlLnByb3RvdHlwZS5oaXRUZXN0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHgudGFyZ2V0PW51bGwseC5kYXRhLmdsb2JhbD10LGV8fChlPXRoaXMucmVuZGVyZXIuX2xhc3RPYmplY3RSZW5kZXJlZCksdGhpcy5wcm9jZXNzSW50ZXJhY3RpdmUoeCxlLG51bGwsITApLHgudGFyZ2V0fSxlLnByb3RvdHlwZS5zZXRUYXJnZXRFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXToxO3RoaXMucmVtb3ZlRXZlbnRzKCksdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQ9dCx0aGlzLnJlc29sdXRpb249ZSx0aGlzLmFkZEV2ZW50cygpfSxlLnByb3RvdHlwZS5hZGRFdmVudHM9ZnVuY3Rpb24oKXt0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudCYmKGgudGlja2VyLnNoYXJlZC5hZGQodGhpcy51cGRhdGUsdGhpcyxoLlVQREFURV9QUklPUklUWS5JTlRFUkFDVElPTiksd2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkPyh0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5zdHlsZVtcIi1tcy1jb250ZW50LXpvb21pbmdcIl09XCJub25lXCIsdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuc3R5bGVbXCItbXMtdG91Y2gtYWN0aW9uXCJdPVwibm9uZVwiKTp0aGlzLnN1cHBvcnRzUG9pbnRlckV2ZW50cyYmKHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LnN0eWxlW1widG91Y2gtYWN0aW9uXCJdPVwibm9uZVwiKSx0aGlzLnN1cHBvcnRzUG9pbnRlckV2ZW50cz8od2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLHRoaXMub25Qb2ludGVyTW92ZSwhMCksdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsdGhpcy5vblBvaW50ZXJEb3duLCEwKSx0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmxlYXZlXCIsdGhpcy5vblBvaW50ZXJPdXQsITApLHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyb3ZlclwiLHRoaXMub25Qb2ludGVyT3ZlciwhMCksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyY2FuY2VsXCIsdGhpcy5vblBvaW50ZXJDYW5jZWwsITApLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsdGhpcy5vblBvaW50ZXJVcCwhMCkpOih3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMub25Qb2ludGVyTW92ZSwhMCksdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLHRoaXMub25Qb2ludGVyRG93biwhMCksdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsdGhpcy5vblBvaW50ZXJPdXQsITApLHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIix0aGlzLm9uUG9pbnRlck92ZXIsITApLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLHRoaXMub25Qb2ludGVyVXAsITApKSx0aGlzLnN1cHBvcnRzVG91Y2hFdmVudHMmJih0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLHRoaXMub25Qb2ludGVyRG93biwhMCksdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsdGhpcy5vblBvaW50ZXJDYW5jZWwsITApLHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHRoaXMub25Qb2ludGVyVXAsITApLHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIix0aGlzLm9uUG9pbnRlck1vdmUsITApKSx0aGlzLmV2ZW50c0FkZGVkPSEwKX0sZS5wcm90b3R5cGUucmVtb3ZlRXZlbnRzPWZ1bmN0aW9uKCl7dGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQmJihoLnRpY2tlci5zaGFyZWQucmVtb3ZlKHRoaXMudXBkYXRlLHRoaXMpLHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZD8odGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuc3R5bGVbXCItbXMtY29udGVudC16b29taW5nXCJdPVwiXCIsdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuc3R5bGVbXCItbXMtdG91Y2gtYWN0aW9uXCJdPVwiXCIpOnRoaXMuc3VwcG9ydHNQb2ludGVyRXZlbnRzJiYodGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuc3R5bGVbXCJ0b3VjaC1hY3Rpb25cIl09XCJcIiksdGhpcy5zdXBwb3J0c1BvaW50ZXJFdmVudHM/KHdpbmRvdy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIix0aGlzLm9uUG9pbnRlck1vdmUsITApLHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLHRoaXMub25Qb2ludGVyRG93biwhMCksdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJsZWF2ZVwiLHRoaXMub25Qb2ludGVyT3V0LCEwKSx0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm92ZXJcIix0aGlzLm9uUG9pbnRlck92ZXIsITApLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmNhbmNlbFwiLHRoaXMub25Qb2ludGVyQ2FuY2VsLCEwKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLHRoaXMub25Qb2ludGVyVXAsITApKTood2luZG93LmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLm9uUG9pbnRlck1vdmUsITApLHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIix0aGlzLm9uUG9pbnRlckRvd24sITApLHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLHRoaXMub25Qb2ludGVyT3V0LCEwKSx0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsdGhpcy5vblBvaW50ZXJPdmVyLCEwKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIix0aGlzLm9uUG9pbnRlclVwLCEwKSksdGhpcy5zdXBwb3J0c1RvdWNoRXZlbnRzJiYodGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIix0aGlzLm9uUG9pbnRlckRvd24sITApLHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGNhbmNlbFwiLHRoaXMub25Qb2ludGVyQ2FuY2VsLCEwKSx0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIix0aGlzLm9uUG9pbnRlclVwLCEwKSx0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsdGhpcy5vblBvaW50ZXJNb3ZlLCEwKSksdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQ9bnVsbCx0aGlzLmV2ZW50c0FkZGVkPSExKX0sZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQpe2lmKHRoaXMuX2RlbHRhVGltZSs9dCwhKHRoaXMuX2RlbHRhVGltZTx0aGlzLmludGVyYWN0aW9uRnJlcXVlbmN5KSYmKHRoaXMuX2RlbHRhVGltZT0wLHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50KSl7aWYodGhpcy5kaWRNb3ZlKXJldHVybiB2b2lkKHRoaXMuZGlkTW92ZT0hMSk7dGhpcy5jdXJzb3I9bnVsbDtmb3IodmFyIGUgaW4gdGhpcy5hY3RpdmVJbnRlcmFjdGlvbkRhdGEpaWYodGhpcy5hY3RpdmVJbnRlcmFjdGlvbkRhdGEuaGFzT3duUHJvcGVydHkoZSkpe3ZhciByPXRoaXMuYWN0aXZlSW50ZXJhY3Rpb25EYXRhW2VdO2lmKHIub3JpZ2luYWxFdmVudCYmXCJ0b3VjaFwiIT09ci5wb2ludGVyVHlwZSl7dmFyIG49dGhpcy5jb25maWd1cmVJbnRlcmFjdGlvbkV2ZW50Rm9yRE9NRXZlbnQodGhpcy5ldmVudERhdGEsci5vcmlnaW5hbEV2ZW50LHIpO3RoaXMucHJvY2Vzc0ludGVyYWN0aXZlKG4sdGhpcy5yZW5kZXJlci5fbGFzdE9iamVjdFJlbmRlcmVkLHRoaXMucHJvY2Vzc1BvaW50ZXJPdmVyT3V0LCEwKX19dGhpcy5zZXRDdXJzb3JNb2RlKHRoaXMuY3Vyc29yKX19LGUucHJvdG90eXBlLnNldEN1cnNvck1vZGU9ZnVuY3Rpb24odCl7aWYodD10fHxcImRlZmF1bHRcIix0aGlzLmN1cnJlbnRDdXJzb3JNb2RlIT09dCl7dGhpcy5jdXJyZW50Q3Vyc29yTW9kZT10O3ZhciBlPXRoaXMuY3Vyc29yU3R5bGVzW3RdO2lmKGUpc3dpdGNoKHZvaWQgMD09PWU/XCJ1bmRlZmluZWRcIjphKGUpKXtjYXNlXCJzdHJpbmdcIjp0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5zdHlsZS5jdXJzb3I9ZTticmVhaztjYXNlXCJmdW5jdGlvblwiOmUodCk7YnJlYWs7Y2FzZVwib2JqZWN0XCI6T2JqZWN0LmFzc2lnbih0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5zdHlsZSxlKX1lbHNlXCJzdHJpbmdcIiE9dHlwZW9mIHR8fE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLmN1cnNvclN0eWxlcyx0KXx8KHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LnN0eWxlLmN1cnNvcj10KX19LGUucHJvdG90eXBlLmRpc3BhdGNoRXZlbnQ9ZnVuY3Rpb24odCxlLHIpe3Iuc3RvcHBlZHx8KHIuY3VycmVudFRhcmdldD10LHIudHlwZT1lLHQuZW1pdChlLHIpLHRbZV0mJnRbZV0ocikpfSxlLnByb3RvdHlwZS5tYXBQb3NpdGlvblRvUG9pbnQ9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPXZvaWQgMDtuPXRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LnBhcmVudEVsZW1lbnQ/dGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk6e3g6MCx5OjAsd2lkdGg6MCxoZWlnaHQ6MH07dmFyIGk9bmF2aWdhdG9yLmlzQ29jb29uSlM/dGhpcy5yZXNvbHV0aW9uOjEvdGhpcy5yZXNvbHV0aW9uO3QueD0oZS1uLmxlZnQpKih0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC53aWR0aC9uLndpZHRoKSppLHQueT0oci1uLnRvcCkqKHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LmhlaWdodC9uLmhlaWdodCkqaX0sZS5wcm90b3R5cGUucHJvY2Vzc0ludGVyYWN0aXZlPWZ1bmN0aW9uKHQsZSxyLG4saSl7aWYoIWV8fCFlLnZpc2libGUpcmV0dXJuITE7dmFyIG89dC5kYXRhLmdsb2JhbDtpPWUuaW50ZXJhY3RpdmV8fGk7dmFyIHM9ITEsYT1pLHU9ITA7aWYoZS5oaXRBcmVhPyhuJiYoZS53b3JsZFRyYW5zZm9ybS5hcHBseUludmVyc2Uobyx0aGlzLl90ZW1wUG9pbnQpLGUuaGl0QXJlYS5jb250YWlucyh0aGlzLl90ZW1wUG9pbnQueCx0aGlzLl90ZW1wUG9pbnQueSk/cz0hMDoobj0hMSx1PSExKSksYT0hMSk6ZS5fbWFzayYmbiYmKGUuX21hc2suY29udGFpbnNQb2ludChvKXx8KG49ITEsdT0hMSkpLHUmJmUuaW50ZXJhY3RpdmVDaGlsZHJlbiYmZS5jaGlsZHJlbilmb3IodmFyIGg9ZS5jaGlsZHJlbixsPWgubGVuZ3RoLTE7bD49MDtsLS0pe3ZhciBjPWhbbF0sZD10aGlzLnByb2Nlc3NJbnRlcmFjdGl2ZSh0LGMscixuLGEpO2lmKGQpe2lmKCFjLnBhcmVudCljb250aW51ZTthPSExLGQmJih0LnRhcmdldCYmKG49ITEpLHM9ITApfX1yZXR1cm4gaSYmKG4mJiF0LnRhcmdldCYmIWUuaGl0QXJlYSYmZS5jb250YWluc1BvaW50JiZlLmNvbnRhaW5zUG9pbnQobykmJihzPSEwKSxlLmludGVyYWN0aXZlJiYocyYmIXQudGFyZ2V0JiYodC50YXJnZXQ9ZSksciYmcih0LGUsISFzKSkpLHN9LGUucHJvdG90eXBlLm9uUG9pbnRlckRvd249ZnVuY3Rpb24odCl7aWYoIXRoaXMuc3VwcG9ydHNUb3VjaEV2ZW50c3x8XCJ0b3VjaFwiIT09dC5wb2ludGVyVHlwZSl7dmFyIGU9dGhpcy5ub3JtYWxpemVUb1BvaW50ZXJEYXRhKHQpO3RoaXMuYXV0b1ByZXZlbnREZWZhdWx0JiZlWzBdLmlzTm9ybWFsaXplZCYmdC5wcmV2ZW50RGVmYXVsdCgpO2Zvcih2YXIgcj1lLmxlbmd0aCxuPTA7bjxyO24rKyl7dmFyIGk9ZVtuXSxvPXRoaXMuZ2V0SW50ZXJhY3Rpb25EYXRhRm9yUG9pbnRlcklkKGkpLHM9dGhpcy5jb25maWd1cmVJbnRlcmFjdGlvbkV2ZW50Rm9yRE9NRXZlbnQodGhpcy5ldmVudERhdGEsaSxvKTtpZihzLmRhdGEub3JpZ2luYWxFdmVudD10LHRoaXMucHJvY2Vzc0ludGVyYWN0aXZlKHMsdGhpcy5yZW5kZXJlci5fbGFzdE9iamVjdFJlbmRlcmVkLHRoaXMucHJvY2Vzc1BvaW50ZXJEb3duLCEwKSx0aGlzLmVtaXQoXCJwb2ludGVyZG93blwiLHMpLFwidG91Y2hcIj09PWkucG9pbnRlclR5cGUpdGhpcy5lbWl0KFwidG91Y2hzdGFydFwiLHMpO2Vsc2UgaWYoXCJtb3VzZVwiPT09aS5wb2ludGVyVHlwZXx8XCJwZW5cIj09PWkucG9pbnRlclR5cGUpe3ZhciBhPTI9PT1pLmJ1dHRvbjt0aGlzLmVtaXQoYT9cInJpZ2h0ZG93blwiOlwibW91c2Vkb3duXCIsdGhpcy5ldmVudERhdGEpfX19fSxlLnByb3RvdHlwZS5wcm9jZXNzUG9pbnRlckRvd249ZnVuY3Rpb24odCxlLHIpe3ZhciBuPXQuZGF0YSxpPXQuZGF0YS5pZGVudGlmaWVyO2lmKHIpaWYoZS50cmFja2VkUG9pbnRlcnNbaV18fChlLnRyYWNrZWRQb2ludGVyc1tpXT1uZXcgdi5kZWZhdWx0KGkpKSx0aGlzLmRpc3BhdGNoRXZlbnQoZSxcInBvaW50ZXJkb3duXCIsdCksXCJ0b3VjaFwiPT09bi5wb2ludGVyVHlwZSl0aGlzLmRpc3BhdGNoRXZlbnQoZSxcInRvdWNoc3RhcnRcIix0KTtlbHNlIGlmKFwibW91c2VcIj09PW4ucG9pbnRlclR5cGV8fFwicGVuXCI9PT1uLnBvaW50ZXJUeXBlKXt2YXIgbz0yPT09bi5idXR0b247bz9lLnRyYWNrZWRQb2ludGVyc1tpXS5yaWdodERvd249ITA6ZS50cmFja2VkUG9pbnRlcnNbaV0ubGVmdERvd249ITAsdGhpcy5kaXNwYXRjaEV2ZW50KGUsbz9cInJpZ2h0ZG93blwiOlwibW91c2Vkb3duXCIsdCl9fSxlLnByb3RvdHlwZS5vblBvaW50ZXJDb21wbGV0ZT1mdW5jdGlvbih0LGUscil7Zm9yKHZhciBuPXRoaXMubm9ybWFsaXplVG9Qb2ludGVyRGF0YSh0KSxpPW4ubGVuZ3RoLG89dC50YXJnZXQhPT10aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudD9cIm91dHNpZGVcIjpcIlwiLHM9MDtzPGk7cysrKXt2YXIgYT1uW3NdLHU9dGhpcy5nZXRJbnRlcmFjdGlvbkRhdGFGb3JQb2ludGVySWQoYSksaD10aGlzLmNvbmZpZ3VyZUludGVyYWN0aW9uRXZlbnRGb3JET01FdmVudCh0aGlzLmV2ZW50RGF0YSxhLHUpO2lmKGguZGF0YS5vcmlnaW5hbEV2ZW50PXQsdGhpcy5wcm9jZXNzSW50ZXJhY3RpdmUoaCx0aGlzLnJlbmRlcmVyLl9sYXN0T2JqZWN0UmVuZGVyZWQscixlfHwhbyksdGhpcy5lbWl0KGU/XCJwb2ludGVyY2FuY2VsXCI6XCJwb2ludGVydXBcIitvLGgpLFwibW91c2VcIj09PWEucG9pbnRlclR5cGV8fFwicGVuXCI9PT1hLnBvaW50ZXJUeXBlKXt2YXIgbD0yPT09YS5idXR0b247dGhpcy5lbWl0KGw/XCJyaWdodHVwXCIrbzpcIm1vdXNldXBcIitvLGgpfWVsc2VcInRvdWNoXCI9PT1hLnBvaW50ZXJUeXBlJiYodGhpcy5lbWl0KGU/XCJ0b3VjaGNhbmNlbFwiOlwidG91Y2hlbmRcIitvLGgpLHRoaXMucmVsZWFzZUludGVyYWN0aW9uRGF0YUZvclBvaW50ZXJJZChhLnBvaW50ZXJJZCx1KSl9fSxlLnByb3RvdHlwZS5vblBvaW50ZXJDYW5jZWw9ZnVuY3Rpb24odCl7dGhpcy5zdXBwb3J0c1RvdWNoRXZlbnRzJiZcInRvdWNoXCI9PT10LnBvaW50ZXJUeXBlfHx0aGlzLm9uUG9pbnRlckNvbXBsZXRlKHQsITAsdGhpcy5wcm9jZXNzUG9pbnRlckNhbmNlbCl9LGUucHJvdG90eXBlLnByb2Nlc3NQb2ludGVyQ2FuY2VsPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dC5kYXRhLG49dC5kYXRhLmlkZW50aWZpZXI7dm9pZCAwIT09ZS50cmFja2VkUG9pbnRlcnNbbl0mJihkZWxldGUgZS50cmFja2VkUG9pbnRlcnNbbl0sdGhpcy5kaXNwYXRjaEV2ZW50KGUsXCJwb2ludGVyY2FuY2VsXCIsdCksXCJ0b3VjaFwiPT09ci5wb2ludGVyVHlwZSYmdGhpcy5kaXNwYXRjaEV2ZW50KGUsXCJ0b3VjaGNhbmNlbFwiLHQpKX0sZS5wcm90b3R5cGUub25Qb2ludGVyVXA9ZnVuY3Rpb24odCl7dGhpcy5zdXBwb3J0c1RvdWNoRXZlbnRzJiZcInRvdWNoXCI9PT10LnBvaW50ZXJUeXBlfHx0aGlzLm9uUG9pbnRlckNvbXBsZXRlKHQsITEsdGhpcy5wcm9jZXNzUG9pbnRlclVwKX0sZS5wcm90b3R5cGUucHJvY2Vzc1BvaW50ZXJVcD1mdW5jdGlvbih0LGUscil7dmFyIG49dC5kYXRhLGk9dC5kYXRhLmlkZW50aWZpZXIsbz1lLnRyYWNrZWRQb2ludGVyc1tpXSxzPVwidG91Y2hcIj09PW4ucG9pbnRlclR5cGUsYT1cIm1vdXNlXCI9PT1uLnBvaW50ZXJUeXBlfHxcInBlblwiPT09bi5wb2ludGVyVHlwZSx1PSExO2lmKGEpe3ZhciBoPTI9PT1uLmJ1dHRvbixsPXYuZGVmYXVsdC5GTEFHUyxjPWg/bC5SSUdIVF9ET1dOOmwuTEVGVF9ET1dOLGQ9dm9pZCAwIT09byYmby5mbGFncyZjO3I/KHRoaXMuZGlzcGF0Y2hFdmVudChlLGg/XCJyaWdodHVwXCI6XCJtb3VzZXVwXCIsdCksZCYmKHRoaXMuZGlzcGF0Y2hFdmVudChlLGg/XCJyaWdodGNsaWNrXCI6XCJjbGlja1wiLHQpLHU9ITApKTpkJiZ0aGlzLmRpc3BhdGNoRXZlbnQoZSxoP1wicmlnaHR1cG91dHNpZGVcIjpcIm1vdXNldXBvdXRzaWRlXCIsdCksbyYmKGg/by5yaWdodERvd249ITE6by5sZWZ0RG93bj0hMSl9cj8odGhpcy5kaXNwYXRjaEV2ZW50KGUsXCJwb2ludGVydXBcIix0KSxzJiZ0aGlzLmRpc3BhdGNoRXZlbnQoZSxcInRvdWNoZW5kXCIsdCksbyYmKGEmJiF1fHx0aGlzLmRpc3BhdGNoRXZlbnQoZSxcInBvaW50ZXJ0YXBcIix0KSxzJiYodGhpcy5kaXNwYXRjaEV2ZW50KGUsXCJ0YXBcIix0KSxvLm92ZXI9ITEpKSk6byYmKHRoaXMuZGlzcGF0Y2hFdmVudChlLFwicG9pbnRlcnVwb3V0c2lkZVwiLHQpLHMmJnRoaXMuZGlzcGF0Y2hFdmVudChlLFwidG91Y2hlbmRvdXRzaWRlXCIsdCkpLG8mJm8ubm9uZSYmZGVsZXRlIGUudHJhY2tlZFBvaW50ZXJzW2ldfSxlLnByb3RvdHlwZS5vblBvaW50ZXJNb3ZlPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLnN1cHBvcnRzVG91Y2hFdmVudHN8fFwidG91Y2hcIiE9PXQucG9pbnRlclR5cGUpe3ZhciBlPXRoaXMubm9ybWFsaXplVG9Qb2ludGVyRGF0YSh0KTtcIm1vdXNlXCIhPT1lWzBdLnBvaW50ZXJUeXBlJiZcInBlblwiIT09ZVswXS5wb2ludGVyVHlwZXx8KHRoaXMuZGlkTW92ZT0hMCx0aGlzLmN1cnNvcj1udWxsKTtmb3IodmFyIHI9ZS5sZW5ndGgsbj0wO248cjtuKyspe3ZhciBpPWVbbl0sbz10aGlzLmdldEludGVyYWN0aW9uRGF0YUZvclBvaW50ZXJJZChpKSxzPXRoaXMuY29uZmlndXJlSW50ZXJhY3Rpb25FdmVudEZvckRPTUV2ZW50KHRoaXMuZXZlbnREYXRhLGksbyk7cy5kYXRhLm9yaWdpbmFsRXZlbnQ9dDt2YXIgYT1cInRvdWNoXCIhPT1pLnBvaW50ZXJUeXBlfHx0aGlzLm1vdmVXaGVuSW5zaWRlO3RoaXMucHJvY2Vzc0ludGVyYWN0aXZlKHMsdGhpcy5yZW5kZXJlci5fbGFzdE9iamVjdFJlbmRlcmVkLHRoaXMucHJvY2Vzc1BvaW50ZXJNb3ZlLGEpLHRoaXMuZW1pdChcInBvaW50ZXJtb3ZlXCIscyksXCJ0b3VjaFwiPT09aS5wb2ludGVyVHlwZSYmdGhpcy5lbWl0KFwidG91Y2htb3ZlXCIscyksXCJtb3VzZVwiIT09aS5wb2ludGVyVHlwZSYmXCJwZW5cIiE9PWkucG9pbnRlclR5cGV8fHRoaXMuZW1pdChcIm1vdXNlbW92ZVwiLHMpfVwibW91c2VcIj09PWVbMF0ucG9pbnRlclR5cGUmJnRoaXMuc2V0Q3Vyc29yTW9kZSh0aGlzLmN1cnNvcil9fSxlLnByb3RvdHlwZS5wcm9jZXNzUG9pbnRlck1vdmU9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPXQuZGF0YSxpPVwidG91Y2hcIj09PW4ucG9pbnRlclR5cGUsbz1cIm1vdXNlXCI9PT1uLnBvaW50ZXJUeXBlfHxcInBlblwiPT09bi5wb2ludGVyVHlwZTtvJiZ0aGlzLnByb2Nlc3NQb2ludGVyT3Zlck91dCh0LGUsciksdGhpcy5tb3ZlV2hlbkluc2lkZSYmIXJ8fCh0aGlzLmRpc3BhdGNoRXZlbnQoZSxcInBvaW50ZXJtb3ZlXCIsdCksaSYmdGhpcy5kaXNwYXRjaEV2ZW50KGUsXCJ0b3VjaG1vdmVcIix0KSxvJiZ0aGlzLmRpc3BhdGNoRXZlbnQoZSxcIm1vdXNlbW92ZVwiLHQpKX0sZS5wcm90b3R5cGUub25Qb2ludGVyT3V0PWZ1bmN0aW9uKHQpe2lmKCF0aGlzLnN1cHBvcnRzVG91Y2hFdmVudHN8fFwidG91Y2hcIiE9PXQucG9pbnRlclR5cGUpe3ZhciBlPXRoaXMubm9ybWFsaXplVG9Qb2ludGVyRGF0YSh0KSxyPWVbMF07XCJtb3VzZVwiPT09ci5wb2ludGVyVHlwZSYmKHRoaXMubW91c2VPdmVyUmVuZGVyZXI9ITEsdGhpcy5zZXRDdXJzb3JNb2RlKG51bGwpKTt2YXIgbj10aGlzLmdldEludGVyYWN0aW9uRGF0YUZvclBvaW50ZXJJZChyKSxpPXRoaXMuY29uZmlndXJlSW50ZXJhY3Rpb25FdmVudEZvckRPTUV2ZW50KHRoaXMuZXZlbnREYXRhLHIsbik7aS5kYXRhLm9yaWdpbmFsRXZlbnQ9cix0aGlzLnByb2Nlc3NJbnRlcmFjdGl2ZShpLHRoaXMucmVuZGVyZXIuX2xhc3RPYmplY3RSZW5kZXJlZCx0aGlzLnByb2Nlc3NQb2ludGVyT3Zlck91dCwhMSksdGhpcy5lbWl0KFwicG9pbnRlcm91dFwiLGkpLFwibW91c2VcIj09PXIucG9pbnRlclR5cGV8fFwicGVuXCI9PT1yLnBvaW50ZXJUeXBlP3RoaXMuZW1pdChcIm1vdXNlb3V0XCIsaSk6dGhpcy5yZWxlYXNlSW50ZXJhY3Rpb25EYXRhRm9yUG9pbnRlcklkKG4uaWRlbnRpZmllcil9fSxlLnByb3RvdHlwZS5wcm9jZXNzUG9pbnRlck92ZXJPdXQ9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPXQuZGF0YSxpPXQuZGF0YS5pZGVudGlmaWVyLG89XCJtb3VzZVwiPT09bi5wb2ludGVyVHlwZXx8XCJwZW5cIj09PW4ucG9pbnRlclR5cGUscz1lLnRyYWNrZWRQb2ludGVyc1tpXTtyJiYhcyYmKHM9ZS50cmFja2VkUG9pbnRlcnNbaV09bmV3IHYuZGVmYXVsdChpKSksdm9pZCAwIT09cyYmKHImJnRoaXMubW91c2VPdmVyUmVuZGVyZXI/KHMub3Zlcnx8KHMub3Zlcj0hMCx0aGlzLmRpc3BhdGNoRXZlbnQoZSxcInBvaW50ZXJvdmVyXCIsdCksbyYmdGhpcy5kaXNwYXRjaEV2ZW50KGUsXCJtb3VzZW92ZXJcIix0KSksbyYmbnVsbD09PXRoaXMuY3Vyc29yJiYodGhpcy5jdXJzb3I9ZS5jdXJzb3IpKTpzLm92ZXImJihzLm92ZXI9ITEsdGhpcy5kaXNwYXRjaEV2ZW50KGUsXCJwb2ludGVyb3V0XCIsdGhpcy5ldmVudERhdGEpLG8mJnRoaXMuZGlzcGF0Y2hFdmVudChlLFwibW91c2VvdXRcIix0KSxzLm5vbmUmJmRlbGV0ZSBlLnRyYWNrZWRQb2ludGVyc1tpXSkpfSxlLnByb3RvdHlwZS5vblBvaW50ZXJPdmVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubm9ybWFsaXplVG9Qb2ludGVyRGF0YSh0KSxyPWVbMF0sbj10aGlzLmdldEludGVyYWN0aW9uRGF0YUZvclBvaW50ZXJJZChyKSxpPXRoaXMuY29uZmlndXJlSW50ZXJhY3Rpb25FdmVudEZvckRPTUV2ZW50KHRoaXMuZXZlbnREYXRhLHIsbik7aS5kYXRhLm9yaWdpbmFsRXZlbnQ9cixcIm1vdXNlXCI9PT1yLnBvaW50ZXJUeXBlJiYodGhpcy5tb3VzZU92ZXJSZW5kZXJlcj0hMCksdGhpcy5lbWl0KFwicG9pbnRlcm92ZXJcIixpKSxcIm1vdXNlXCIhPT1yLnBvaW50ZXJUeXBlJiZcInBlblwiIT09ci5wb2ludGVyVHlwZXx8dGhpcy5lbWl0KFwibW91c2VvdmVyXCIsaSl9LGUucHJvdG90eXBlLmdldEludGVyYWN0aW9uRGF0YUZvclBvaW50ZXJJZD1mdW5jdGlvbih0KXt2YXIgZT10LnBvaW50ZXJJZCxyPXZvaWQgMDtyZXR1cm4gZT09PWJ8fFwibW91c2VcIj09PXQucG9pbnRlclR5cGU/cj10aGlzLm1vdXNlOnRoaXMuYWN0aXZlSW50ZXJhY3Rpb25EYXRhW2VdP3I9dGhpcy5hY3RpdmVJbnRlcmFjdGlvbkRhdGFbZV06KHI9dGhpcy5pbnRlcmFjdGlvbkRhdGFQb29sLnBvcCgpfHxuZXcgYy5kZWZhdWx0LHIuaWRlbnRpZmllcj1lLHRoaXMuYWN0aXZlSW50ZXJhY3Rpb25EYXRhW2VdPXIpLHIuY29weUV2ZW50KHQpLHJ9LGUucHJvdG90eXBlLnJlbGVhc2VJbnRlcmFjdGlvbkRhdGFGb3JQb2ludGVySWQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5hY3RpdmVJbnRlcmFjdGlvbkRhdGFbdF07ZSYmKGRlbGV0ZSB0aGlzLmFjdGl2ZUludGVyYWN0aW9uRGF0YVt0XSxlLnJlc2V0KCksdGhpcy5pbnRlcmFjdGlvbkRhdGFQb29sLnB1c2goZSkpfSxlLnByb3RvdHlwZS5jb25maWd1cmVJbnRlcmFjdGlvbkV2ZW50Rm9yRE9NRXZlbnQ9ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0LmRhdGE9cix0aGlzLm1hcFBvc2l0aW9uVG9Qb2ludChyLmdsb2JhbCxlLmNsaWVudFgsZS5jbGllbnRZKSxuYXZpZ2F0b3IuaXNDb2Nvb25KUyYmXCJ0b3VjaFwiPT09ZS5wb2ludGVyVHlwZSYmKHIuZ2xvYmFsLng9ci5nbG9iYWwueC90aGlzLnJlc29sdXRpb24sci5nbG9iYWwueT1yLmdsb2JhbC55L3RoaXMucmVzb2x1dGlvbiksXCJ0b3VjaFwiPT09ZS5wb2ludGVyVHlwZSYmKGUuZ2xvYmFsWD1yLmdsb2JhbC54LGUuZ2xvYmFsWT1yLmdsb2JhbC55KSxyLm9yaWdpbmFsRXZlbnQ9ZSx0LnJlc2V0KCksdH0sZS5wcm90b3R5cGUubm9ybWFsaXplVG9Qb2ludGVyRGF0YT1mdW5jdGlvbih0KXt2YXIgZT1bXTtpZih0aGlzLnN1cHBvcnRzVG91Y2hFdmVudHMmJnQgaW5zdGFuY2VvZiBUb3VjaEV2ZW50KWZvcih2YXIgcj0wLG49dC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7cjxuO3IrKyl7dmFyIGk9dC5jaGFuZ2VkVG91Y2hlc1tyXTt2b2lkIDA9PT1pLmJ1dHRvbiYmKGkuYnV0dG9uPXQudG91Y2hlcy5sZW5ndGg/MTowKSx2b2lkIDA9PT1pLmJ1dHRvbnMmJihpLmJ1dHRvbnM9dC50b3VjaGVzLmxlbmd0aD8xOjApLHZvaWQgMD09PWkuaXNQcmltYXJ5JiYoaS5pc1ByaW1hcnk9MT09PXQudG91Y2hlcy5sZW5ndGgmJlwidG91Y2hzdGFydFwiPT09dC50eXBlKSx2b2lkIDA9PT1pLndpZHRoJiYoaS53aWR0aD1pLnJhZGl1c1h8fDEpLHZvaWQgMD09PWkuaGVpZ2h0JiYoaS5oZWlnaHQ9aS5yYWRpdXNZfHwxKSx2b2lkIDA9PT1pLnRpbHRYJiYoaS50aWx0WD0wKSx2b2lkIDA9PT1pLnRpbHRZJiYoaS50aWx0WT0wKSx2b2lkIDA9PT1pLnBvaW50ZXJUeXBlJiYoaS5wb2ludGVyVHlwZT1cInRvdWNoXCIpLHZvaWQgMD09PWkucG9pbnRlcklkJiYoaS5wb2ludGVySWQ9aS5pZGVudGlmaWVyfHwwKSx2b2lkIDA9PT1pLnByZXNzdXJlJiYoaS5wcmVzc3VyZT1pLmZvcmNlfHwuNSksdm9pZCAwPT09aS50d2lzdCYmKGkudHdpc3Q9MCksdm9pZCAwPT09aS50YW5nZW50aWFsUHJlc3N1cmUmJihpLnRhbmdlbnRpYWxQcmVzc3VyZT0wKSx2b2lkIDA9PT1pLmxheWVyWCYmKGkubGF5ZXJYPWkub2Zmc2V0WD1pLmNsaWVudFgpLHZvaWQgMD09PWkubGF5ZXJZJiYoaS5sYXllclk9aS5vZmZzZXRZPWkuY2xpZW50WSksaS5pc05vcm1hbGl6ZWQ9ITAsZS5wdXNoKGkpfWVsc2UhKHQgaW5zdGFuY2VvZiBNb3VzZUV2ZW50KXx8dGhpcy5zdXBwb3J0c1BvaW50ZXJFdmVudHMmJnQgaW5zdGFuY2VvZiB3aW5kb3cuUG9pbnRlckV2ZW50P2UucHVzaCh0KToodm9pZCAwPT09dC5pc1ByaW1hcnkmJih0LmlzUHJpbWFyeT0hMCksdm9pZCAwPT09dC53aWR0aCYmKHQud2lkdGg9MSksdm9pZCAwPT09dC5oZWlnaHQmJih0LmhlaWdodD0xKSx2b2lkIDA9PT10LnRpbHRYJiYodC50aWx0WD0wKSxcbnZvaWQgMD09PXQudGlsdFkmJih0LnRpbHRZPTApLHZvaWQgMD09PXQucG9pbnRlclR5cGUmJih0LnBvaW50ZXJUeXBlPVwibW91c2VcIiksdm9pZCAwPT09dC5wb2ludGVySWQmJih0LnBvaW50ZXJJZD1iKSx2b2lkIDA9PT10LnByZXNzdXJlJiYodC5wcmVzc3VyZT0uNSksdm9pZCAwPT09dC50d2lzdCYmKHQudHdpc3Q9MCksdm9pZCAwPT09dC50YW5nZW50aWFsUHJlc3N1cmUmJih0LnRhbmdlbnRpYWxQcmVzc3VyZT0wKSx0LmlzTm9ybWFsaXplZD0hMCxlLnB1c2godCkpO3JldHVybiBlfSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVFdmVudHMoKSx0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpLHRoaXMucmVuZGVyZXI9bnVsbCx0aGlzLm1vdXNlPW51bGwsdGhpcy5ldmVudERhdGE9bnVsbCx0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudD1udWxsLHRoaXMub25Qb2ludGVyRG93bj1udWxsLHRoaXMucHJvY2Vzc1BvaW50ZXJEb3duPW51bGwsdGhpcy5vblBvaW50ZXJVcD1udWxsLHRoaXMucHJvY2Vzc1BvaW50ZXJVcD1udWxsLHRoaXMub25Qb2ludGVyQ2FuY2VsPW51bGwsdGhpcy5wcm9jZXNzUG9pbnRlckNhbmNlbD1udWxsLHRoaXMub25Qb2ludGVyTW92ZT1udWxsLHRoaXMucHJvY2Vzc1BvaW50ZXJNb3ZlPW51bGwsdGhpcy5vblBvaW50ZXJPdXQ9bnVsbCx0aGlzLnByb2Nlc3NQb2ludGVyT3Zlck91dD1udWxsLHRoaXMub25Qb2ludGVyT3Zlcj1udWxsLHRoaXMuX3RlbXBQb2ludD1udWxsfSxlfSh5LmRlZmF1bHQpO3IuZGVmYXVsdD1ULGguV2ViR0xSZW5kZXJlci5yZWdpc3RlclBsdWdpbihcImludGVyYWN0aW9uXCIsVCksaC5DYW52YXNSZW5kZXJlci5yZWdpc3RlclBsdWdpbihcImludGVyYWN0aW9uXCIsVCl9LHtcIi4uL2NvcmVcIjo2NSxcIi4vSW50ZXJhY3Rpb25EYXRhXCI6MTU1LFwiLi9JbnRlcmFjdGlvbkV2ZW50XCI6MTU2LFwiLi9JbnRlcmFjdGlvblRyYWNraW5nRGF0YVwiOjE1OCxcIi4vaW50ZXJhY3RpdmVUYXJnZXRcIjoxNjAsZXZlbnRlbWl0dGVyMzozfV0sMTU4OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ci5fX2VzTW9kdWxlPSEwO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7bih0aGlzLHQpLHRoaXMuX3BvaW50ZXJJZD1lLHRoaXMuX2ZsYWdzPXQuRkxBR1MuTk9ORX1yZXR1cm4gdC5wcm90b3R5cGUuX2RvU2V0PWZ1bmN0aW9uKHQsZSl7dGhpcy5fZmxhZ3M9ZT90aGlzLl9mbGFnc3x0OnRoaXMuX2ZsYWdzJn50fSxpKHQsW3trZXk6XCJwb2ludGVySWRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9pbnRlcklkfX0se2tleTpcImZsYWdzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZsYWdzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZmxhZ3M9dH19LHtrZXk6XCJub25lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZsYWdzPT09dGhpcy5jb25zdHJ1Y3Rvci5GTEFHUy5OT05FfX0se2tleTpcIm92ZXJcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMCE9KHRoaXMuX2ZsYWdzJnRoaXMuY29uc3RydWN0b3IuRkxBR1MuT1ZFUil9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kb1NldCh0aGlzLmNvbnN0cnVjdG9yLkZMQUdTLk9WRVIsdCl9fSx7a2V5OlwicmlnaHREb3duXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDAhPSh0aGlzLl9mbGFncyZ0aGlzLmNvbnN0cnVjdG9yLkZMQUdTLlJJR0hUX0RPV04pfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZG9TZXQodGhpcy5jb25zdHJ1Y3Rvci5GTEFHUy5SSUdIVF9ET1dOLHQpfX0se2tleTpcImxlZnREb3duXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDAhPSh0aGlzLl9mbGFncyZ0aGlzLmNvbnN0cnVjdG9yLkZMQUdTLkxFRlRfRE9XTil9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kb1NldCh0aGlzLmNvbnN0cnVjdG9yLkZMQUdTLkxFRlRfRE9XTix0KX19XSksdH0oKTtyLmRlZmF1bHQ9byxvLkZMQUdTPU9iamVjdC5mcmVlemUoe05PTkU6MCxPVkVSOjEsTEVGVF9ET1dOOjIsUklHSFRfRE9XTjo0fSl9LHt9XSwxNTk6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1yLl9fZXNNb2R1bGU9ITA7dmFyIGk9dChcIi4vSW50ZXJhY3Rpb25EYXRhXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiSW50ZXJhY3Rpb25EYXRhXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4oaSkuZGVmYXVsdH19KTt2YXIgbz10KFwiLi9JbnRlcmFjdGlvbk1hbmFnZXJcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJJbnRlcmFjdGlvbk1hbmFnZXJcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihvKS5kZWZhdWx0fX0pO3ZhciBzPXQoXCIuL2ludGVyYWN0aXZlVGFyZ2V0XCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiaW50ZXJhY3RpdmVUYXJnZXRcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihzKS5kZWZhdWx0fX0pO3ZhciBhPXQoXCIuL0ludGVyYWN0aW9uVHJhY2tpbmdEYXRhXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiSW50ZXJhY3Rpb25UcmFja2luZ0RhdGFcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihhKS5kZWZhdWx0fX0pO3ZhciB1PXQoXCIuL0ludGVyYWN0aW9uRXZlbnRcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJJbnRlcmFjdGlvbkV2ZW50XCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4odSkuZGVmYXVsdH19KX0se1wiLi9JbnRlcmFjdGlvbkRhdGFcIjoxNTUsXCIuL0ludGVyYWN0aW9uRXZlbnRcIjoxNTYsXCIuL0ludGVyYWN0aW9uTWFuYWdlclwiOjE1NyxcIi4vSW50ZXJhY3Rpb25UcmFja2luZ0RhdGFcIjoxNTgsXCIuL2ludGVyYWN0aXZlVGFyZ2V0XCI6MTYwfV0sMTYwOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ci5fX2VzTW9kdWxlPSEwLHIuZGVmYXVsdD17aW50ZXJhY3RpdmU6ITEsaW50ZXJhY3RpdmVDaGlsZHJlbjohMCxoaXRBcmVhOm51bGwsZ2V0IGJ1dHRvbk1vZGUoKXtyZXR1cm5cInBvaW50ZXJcIj09PXRoaXMuY3Vyc29yfSxzZXQgYnV0dG9uTW9kZSh0KXt0P3RoaXMuY3Vyc29yPVwicG9pbnRlclwiOlwicG9pbnRlclwiPT09dGhpcy5jdXJzb3ImJih0aGlzLmN1cnNvcj1udWxsKX0sY3Vyc29yOm51bGwsZ2V0IHRyYWNrZWRQb2ludGVycygpe3JldHVybiB2b2lkIDA9PT10aGlzLl90cmFja2VkUG9pbnRlcnMmJih0aGlzLl90cmFja2VkUG9pbnRlcnM9e30pLHRoaXMuX3RyYWNrZWRQb2ludGVyc30sX3RyYWNrZWRQb2ludGVyczp2b2lkIDB9fSx7fV0sMTYxOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe3QuYml0bWFwRm9udD1hLkJpdG1hcFRleHQucmVnaXN0ZXJGb250KHQuZGF0YSxlKX1yLl9fZXNNb2R1bGU9ITAsci5wYXJzZT1uLHIuZGVmYXVsdD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbih0LGUpe2lmKCF0LmRhdGF8fHQudHlwZSE9PXMuUmVzb3VyY2UuVFlQRS5YTUwpcmV0dXJuIHZvaWQgZSgpO2lmKDA9PT10LmRhdGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJwYWdlXCIpLmxlbmd0aHx8MD09PXQuZGF0YS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImluZm9cIikubGVuZ3RofHxudWxsPT09dC5kYXRhLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5mb1wiKVswXS5nZXRBdHRyaWJ1dGUoXCJmYWNlXCIpKXJldHVybiB2b2lkIGUoKTt2YXIgcj10LmlzRGF0YVVybD9cIlwiOm8uZGlybmFtZSh0LnVybCk7dC5pc0RhdGFVcmwmJihcIi5cIj09PXImJihyPVwiXCIpLHRoaXMuYmFzZVVybCYmciYmXCIvXCI9PT10aGlzLmJhc2VVcmwuY2hhckF0KHRoaXMuYmFzZVVybC5sZW5ndGgtMSkmJihyKz1cIi9cIikpLChyPXIucmVwbGFjZSh0aGlzLmJhc2VVcmwsXCJcIikpJiZcIi9cIiE9PXIuY2hhckF0KHIubGVuZ3RoLTEpJiYocis9XCIvXCIpO2Zvcih2YXIgaT10LmRhdGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJwYWdlXCIpLGE9e30sdT1mdW5jdGlvbihyKXthW3IubWV0YWRhdGEucGFnZUZpbGVdPXIudGV4dHVyZSxPYmplY3Qua2V5cyhhKS5sZW5ndGg9PT1pLmxlbmd0aCYmKG4odCxhKSxlKCkpfSxoPTA7aDxpLmxlbmd0aDsrK2gpe3ZhciBsPWlbaF0uZ2V0QXR0cmlidXRlKFwiZmlsZVwiKSxjPXIrbCxkPSExO2Zvcih2YXIgZiBpbiB0aGlzLnJlc291cmNlcyl7dmFyIHA9dGhpcy5yZXNvdXJjZXNbZl07aWYocC51cmw9PT1jKXtwLm1ldGFkYXRhLnBhZ2VGaWxlPWwscC50ZXh0dXJlP3UocCk6cC5vbkFmdGVyTWlkZGxld2FyZS5hZGQodSksZD0hMDticmVha319aWYoIWQpe3ZhciB2PXtjcm9zc09yaWdpbjp0LmNyb3NzT3JpZ2luLGxvYWRUeXBlOnMuUmVzb3VyY2UuTE9BRF9UWVBFLklNQUdFLG1ldGFkYXRhOk9iamVjdC5hc3NpZ24oe3BhZ2VGaWxlOmx9LHQubWV0YWRhdGEuaW1hZ2VNZXRhZGF0YSkscGFyZW50UmVzb3VyY2U6dH07dGhpcy5hZGQoYyx2LHUpfX19fTt2YXIgaT10KFwicGF0aFwiKSxvPWZ1bmN0aW9uKHQpe2lmKHQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT17fTtpZihudWxsIT10KWZvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKTtyZXR1cm4gZS5kZWZhdWx0PXQsZX0oaSkscz10KFwicmVzb3VyY2UtbG9hZGVyXCIpLGE9dChcIi4uL2V4dHJhc1wiKX0se1wiLi4vZXh0cmFzXCI6MTQxLHBhdGg6OCxcInJlc291cmNlLWxvYWRlclwiOjM2fV0sMTYyOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ci5fX2VzTW9kdWxlPSEwLHIuc2hhcmVkPXIuUmVzb3VyY2U9ci50ZXh0dXJlUGFyc2VyPXIuZ2V0UmVzb3VyY2VQYXRoPXIuc3ByaXRlc2hlZXRQYXJzZXI9ci5wYXJzZUJpdG1hcEZvbnREYXRhPXIuYml0bWFwRm9udFBhcnNlcj1yLkxvYWRlcj12b2lkIDA7dmFyIGk9dChcIi4vYml0bWFwRm9udFBhcnNlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcImJpdG1hcEZvbnRQYXJzZXJcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihpKS5kZWZhdWx0fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwicGFyc2VCaXRtYXBGb250RGF0YVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpLnBhcnNlfX0pO3ZhciBvPXQoXCIuL3Nwcml0ZXNoZWV0UGFyc2VyXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwic3ByaXRlc2hlZXRQYXJzZXJcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihvKS5kZWZhdWx0fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiZ2V0UmVzb3VyY2VQYXRoXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG8uZ2V0UmVzb3VyY2VQYXRofX0pO3ZhciBzPXQoXCIuL3RleHR1cmVQYXJzZXJcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJ0ZXh0dXJlUGFyc2VyXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4ocykuZGVmYXVsdH19KTt2YXIgYT10KFwicmVzb3VyY2UtbG9hZGVyXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiUmVzb3VyY2VcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYS5SZXNvdXJjZX19KTt2YXIgdT10KFwiLi4vY29yZS9BcHBsaWNhdGlvblwiKSxoPW4odSksbD10KFwiLi9sb2FkZXJcIiksYz1uKGwpO3IuTG9hZGVyPWMuZGVmYXVsdDt2YXIgZD1uZXcgYy5kZWZhdWx0O2QuZGVzdHJveT1mdW5jdGlvbigpe30sci5zaGFyZWQ9ZDt2YXIgZj1oLmRlZmF1bHQucHJvdG90eXBlO2YuX2xvYWRlcj1udWxsLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmLFwibG9hZGVyXCIse2dldDpmdW5jdGlvbigpe2lmKCF0aGlzLl9sb2FkZXIpe3ZhciB0PXRoaXMuX29wdGlvbnMuc2hhcmVkTG9hZGVyO3RoaXMuX2xvYWRlcj10P2Q6bmV3IGMuZGVmYXVsdH1yZXR1cm4gdGhpcy5fbG9hZGVyfX0pLGYuX3BhcmVudERlc3Ryb3k9Zi5kZXN0cm95LGYuZGVzdHJveT1mdW5jdGlvbih0LGUpe3RoaXMuX2xvYWRlciYmKHRoaXMuX2xvYWRlci5kZXN0cm95KCksdGhpcy5fbG9hZGVyPW51bGwpLHRoaXMuX3BhcmVudERlc3Ryb3kodCxlKX19LHtcIi4uL2NvcmUvQXBwbGljYXRpb25cIjo0MyxcIi4vYml0bWFwRm9udFBhcnNlclwiOjE2MSxcIi4vbG9hZGVyXCI6MTYzLFwiLi9zcHJpdGVzaGVldFBhcnNlclwiOjE2NCxcIi4vdGV4dHVyZVBhcnNlclwiOjE2NSxcInJlc291cmNlLWxvYWRlclwiOjM2fV0sMTYzOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIHModCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1yLl9fZXNNb2R1bGU9ITA7dmFyIGE9dChcInJlc291cmNlLWxvYWRlclwiKSx1PW4oYSksaD10KFwicmVzb3VyY2UtbG9hZGVyL2xpYi9taWRkbGV3YXJlcy9wYXJzaW5nL2Jsb2JcIiksbD10KFwiZXZlbnRlbWl0dGVyM1wiKSxjPW4obCksZD10KFwiLi90ZXh0dXJlUGFyc2VyXCIpLGY9bihkKSxwPXQoXCIuL3Nwcml0ZXNoZWV0UGFyc2VyXCIpLHY9bihwKSxnPXQoXCIuL2JpdG1hcEZvbnRQYXJzZXJcIikseT1uKGcpLG09ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShyLG4pe2kodGhpcyxlKTt2YXIgcz1vKHRoaXMsdC5jYWxsKHRoaXMscixuKSk7Yy5kZWZhdWx0LmNhbGwocyk7Zm9yKHZhciBhPTA7YTxlLl9waXhpTWlkZGxld2FyZS5sZW5ndGg7KythKXMudXNlKGUuX3BpeGlNaWRkbGV3YXJlW2FdKCkpO3JldHVybiBzLm9uU3RhcnQuYWRkKGZ1bmN0aW9uKHQpe3JldHVybiBzLmVtaXQoXCJzdGFydFwiLHQpfSkscy5vblByb2dyZXNzLmFkZChmdW5jdGlvbih0LGUpe3JldHVybiBzLmVtaXQoXCJwcm9ncmVzc1wiLHQsZSl9KSxzLm9uRXJyb3IuYWRkKGZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gcy5lbWl0KFwiZXJyb3JcIix0LGUscil9KSxzLm9uTG9hZC5hZGQoZnVuY3Rpb24odCxlKXtyZXR1cm4gcy5lbWl0KFwibG9hZFwiLHQsZSl9KSxzLm9uQ29tcGxldGUuYWRkKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHMuZW1pdChcImNvbXBsZXRlXCIsdCxlKX0pLHN9cmV0dXJuIHMoZSx0KSxlLmFkZFBpeGlNaWRkbGV3YXJlPWZ1bmN0aW9uKHQpe2UuX3BpeGlNaWRkbGV3YXJlLnB1c2godCl9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpLHRoaXMucmVzZXQoKX0sZX0odS5kZWZhdWx0KTtyLmRlZmF1bHQ9bTtmb3IodmFyIF8gaW4gYy5kZWZhdWx0LnByb3RvdHlwZSltLnByb3RvdHlwZVtfXT1jLmRlZmF1bHQucHJvdG90eXBlW19dO20uX3BpeGlNaWRkbGV3YXJlPVtoLmJsb2JNaWRkbGV3YXJlRmFjdG9yeSxmLmRlZmF1bHQsdi5kZWZhdWx0LHkuZGVmYXVsdF07dmFyIGI9dS5kZWZhdWx0LlJlc291cmNlO2Iuc2V0RXh0ZW5zaW9uWGhyVHlwZShcImZudFwiLGIuWEhSX1JFU1BPTlNFX1RZUEUuRE9DVU1FTlQpfSx7XCIuL2JpdG1hcEZvbnRQYXJzZXJcIjoxNjEsXCIuL3Nwcml0ZXNoZWV0UGFyc2VyXCI6MTY0LFwiLi90ZXh0dXJlUGFyc2VyXCI6MTY1LGV2ZW50ZW1pdHRlcjM6MyxcInJlc291cmNlLWxvYWRlclwiOjM2LFwicmVzb3VyY2UtbG9hZGVyL2xpYi9taWRkbGV3YXJlcy9wYXJzaW5nL2Jsb2JcIjozN31dLDE2NDpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtyZXR1cm4gdC5pc0RhdGFVcmw/dC5kYXRhLm1ldGEuaW1hZ2U6cy5kZWZhdWx0LnJlc29sdmUodC51cmwucmVwbGFjZShlLFwiXCIpLHQuZGF0YS5tZXRhLmltYWdlKX1yLl9fZXNNb2R1bGU9ITAsci5kZWZhdWx0PWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7dmFyIHI9dC5uYW1lK1wiX2ltYWdlXCI7aWYoIXQuZGF0YXx8dC50eXBlIT09aS5SZXNvdXJjZS5UWVBFLkpTT058fCF0LmRhdGEuZnJhbWVzfHx0aGlzLnJlc291cmNlc1tyXSlyZXR1cm4gdm9pZCBlKCk7dmFyIG89e2Nyb3NzT3JpZ2luOnQuY3Jvc3NPcmlnaW4sbWV0YWRhdGE6dC5tZXRhZGF0YS5pbWFnZU1ldGFkYXRhLHBhcmVudFJlc291cmNlOnR9LHM9bih0LHRoaXMuYmFzZVVybCk7dGhpcy5hZGQocixzLG8sZnVuY3Rpb24ocil7aWYoci5lcnJvcilyZXR1cm4gdm9pZCBlKHIuZXJyb3IpO3ZhciBuPW5ldyBhLlNwcml0ZXNoZWV0KHIudGV4dHVyZS5iYXNlVGV4dHVyZSx0LmRhdGEsdC51cmwpO24ucGFyc2UoZnVuY3Rpb24oKXt0LnNwcml0ZXNoZWV0PW4sdC50ZXh0dXJlcz1uLnRleHR1cmVzLGUoKX0pfSl9fSxyLmdldFJlc291cmNlUGF0aD1uO3ZhciBpPXQoXCJyZXNvdXJjZS1sb2FkZXJcIiksbz10KFwidXJsXCIpLHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShvKSxhPXQoXCIuLi9jb3JlXCIpfSx7XCIuLi9jb3JlXCI6NjUsXCJyZXNvdXJjZS1sb2FkZXJcIjozNix1cmw6Mzh9XSwxNjU6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtyLl9fZXNNb2R1bGU9ITAsci5kZWZhdWx0PWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7dC5kYXRhJiZ0LnR5cGU9PT1uLlJlc291cmNlLlRZUEUuSU1BR0UmJih0LnRleHR1cmU9by5kZWZhdWx0LmZyb21Mb2FkZXIodC5kYXRhLHQudXJsLHQubmFtZSkpLGUoKX19O3ZhciBuPXQoXCJyZXNvdXJjZS1sb2FkZXJcIiksaT10KFwiLi4vY29yZS90ZXh0dXJlcy9UZXh0dXJlXCIpLG89ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShpKX0se1wiLi4vY29yZS90ZXh0dXJlcy9UZXh0dXJlXCI6MTE1LFwicmVzb3VyY2UtbG9hZGVyXCI6MzZ9XSwxNjY6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gbyh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfXIuX19lc01vZHVsZT0hMDt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG49ZVtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbihlLHIsbil7cmV0dXJuIHImJnQoZS5wcm90b3R5cGUsciksbiYmdChlLG4pLGV9fSgpLGE9dChcIi4uL2NvcmVcIiksdT1mdW5jdGlvbih0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9e307aWYobnVsbCE9dClmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSk7cmV0dXJuIGUuZGVmYXVsdD10LGV9KGEpLGg9dChcIi4uL2NvcmUvdGV4dHVyZXMvVGV4dHVyZVwiKSxsPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0oaCksYz1uZXcgdS5Qb2ludCxkPW5ldyB1LlBvbHlnb24sZj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHIsbyxzLGEsaCl7bih0aGlzLGUpO3ZhciBjPWkodGhpcyx0LmNhbGwodGhpcykpO3JldHVybiBjLl90ZXh0dXJlPXJ8fGwuZGVmYXVsdC5FTVBUWSxjLnV2cz1zfHxuZXcgRmxvYXQzMkFycmF5KFswLDAsMSwwLDEsMSwwLDFdKSxjLnZlcnRpY2VzPW98fG5ldyBGbG9hdDMyQXJyYXkoWzAsMCwxMDAsMCwxMDAsMTAwLDAsMTAwXSksYy5pbmRpY2VzPWF8fG5ldyBVaW50MTZBcnJheShbMCwxLDMsMl0pLGMuZGlydHk9MCxjLmluZGV4RGlydHk9MCxjLnZlcnRleERpcnR5PTAsYy5hdXRvVXBkYXRlPSEwLGMuYmxlbmRNb2RlPXUuQkxFTkRfTU9ERVMuTk9STUFMLGMuY2FudmFzUGFkZGluZz11LnNldHRpbmdzLk1FU0hfQ0FOVkFTX1BBRERJTkcsYy5kcmF3TW9kZT1ofHxlLkRSQVdfTU9ERVMuVFJJQU5HTEVfTUVTSCxjLnNoYWRlcj1udWxsLGMudGludFJnYj1uZXcgRmxvYXQzMkFycmF5KFsxLDEsMV0pLGMuX2dsRGF0YXM9e30sYy5fdXZUcmFuc2Zvcm09bmV3IHUuVGV4dHVyZU1hdHJpeChjLl90ZXh0dXJlKSxjLnVwbG9hZFV2VHJhbnNmb3JtPSExLGMucGx1Z2luTmFtZT1cIm1lc2hcIixjfXJldHVybiBvKGUsdCksZS5wcm90b3R5cGUuX3JlbmRlcldlYkdMPWZ1bmN0aW9uKHQpe3RoaXMucmVmcmVzaCgpLHQuc2V0T2JqZWN0UmVuZGVyZXIodC5wbHVnaW5zW3RoaXMucGx1Z2luTmFtZV0pLHQucGx1Z2luc1t0aGlzLnBsdWdpbk5hbWVdLnJlbmRlcih0aGlzKX0sZS5wcm90b3R5cGUuX3JlbmRlckNhbnZhcz1mdW5jdGlvbih0KXt0aGlzLnJlZnJlc2goKSx0LnBsdWdpbnNbdGhpcy5wbHVnaW5OYW1lXS5yZW5kZXIodGhpcyl9LGUucHJvdG90eXBlLl9vblRleHR1cmVVcGRhdGU9ZnVuY3Rpb24oKXt0aGlzLl91dlRyYW5zZm9ybS50ZXh0dXJlPXRoaXMuX3RleHR1cmUsdGhpcy5yZWZyZXNoKCl9LGUucHJvdG90eXBlLm11bHRpcGx5VXZzPWZ1bmN0aW9uKCl7dGhpcy51cGxvYWRVdlRyYW5zZm9ybXx8dGhpcy5fdXZUcmFuc2Zvcm0ubXVsdGlwbHlVdnModGhpcy51dnMpfSxlLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKHQpe3RoaXMuYXV0b1VwZGF0ZSYmdGhpcy52ZXJ0ZXhEaXJ0eSsrLHRoaXMuX3V2VHJhbnNmb3JtLnVwZGF0ZSh0KSYmdGhpcy5fcmVmcmVzaCgpfSxlLnByb3RvdHlwZS5fcmVmcmVzaD1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUuX2NhbGN1bGF0ZUJvdW5kcz1mdW5jdGlvbigpe3RoaXMuX2JvdW5kcy5hZGRWZXJ0aWNlcyh0aGlzLnRyYW5zZm9ybSx0aGlzLnZlcnRpY2VzLDAsdGhpcy52ZXJ0aWNlcy5sZW5ndGgpfSxlLnByb3RvdHlwZS5jb250YWluc1BvaW50PWZ1bmN0aW9uKHQpe2lmKCF0aGlzLmdldEJvdW5kcygpLmNvbnRhaW5zKHQueCx0LnkpKXJldHVybiExO3RoaXMud29ybGRUcmFuc2Zvcm0uYXBwbHlJbnZlcnNlKHQsYyk7Zm9yKHZhciByPXRoaXMudmVydGljZXMsbj1kLnBvaW50cyxpPXRoaXMuaW5kaWNlcyxvPXRoaXMuaW5kaWNlcy5sZW5ndGgscz10aGlzLmRyYXdNb2RlPT09ZS5EUkFXX01PREVTLlRSSUFOR0xFUz8zOjEsYT0wO2ErMjxvO2ErPXMpe3ZhciB1PTIqaVthXSxoPTIqaVthKzFdLGw9MippW2ErMl07aWYoblswXT1yW3VdLG5bMV09clt1KzFdLG5bMl09cltoXSxuWzNdPXJbaCsxXSxuWzRdPXJbbF0sbls1XT1yW2wrMV0sZC5jb250YWlucyhjLngsYy55KSlyZXR1cm4hMH1yZXR1cm4hMX0sZS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbihlKXtmb3IodmFyIHIgaW4gdGhpcy5fZ2xEYXRhcyl7dmFyIG49dGhpcy5fZ2xEYXRhc1tyXTtuLmRlc3Ryb3k/bi5kZXN0cm95KCk6KG4udmVydGV4QnVmZmVyJiYobi52ZXJ0ZXhCdWZmZXIuZGVzdHJveSgpLG4udmVydGV4QnVmZmVyPW51bGwpLG4uaW5kZXhCdWZmZXImJihuLmluZGV4QnVmZmVyLmRlc3Ryb3koKSxuLmluZGV4QnVmZmVyPW51bGwpLG4udXZCdWZmZXImJihuLnV2QnVmZmVyLmRlc3Ryb3koKSxuLnV2QnVmZmVyPW51bGwpLG4udmFvJiYobi52YW8uZGVzdHJveSgpLG4udmFvPW51bGwpKX10aGlzLl9nbERhdGFzPW51bGwsdC5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMsZSl9LHMoZSxbe2tleTpcInRleHR1cmVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGV4dHVyZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3RleHR1cmUhPT10JiYodGhpcy5fdGV4dHVyZT10LHQmJih0LmJhc2VUZXh0dXJlLmhhc0xvYWRlZD90aGlzLl9vblRleHR1cmVVcGRhdGUoKTp0Lm9uY2UoXCJ1cGRhdGVcIix0aGlzLl9vblRleHR1cmVVcGRhdGUsdGhpcykpKX19LHtrZXk6XCJ0aW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHUudXRpbHMucmdiMmhleCh0aGlzLnRpbnRSZ2IpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy50aW50UmdiPXUudXRpbHMuaGV4MnJnYih0LHRoaXMudGludFJnYil9fV0pLGV9KHUuQ29udGFpbmVyKTtyLmRlZmF1bHQ9ZixmLkRSQVdfTU9ERVM9e1RSSUFOR0xFX01FU0g6MCxUUklBTkdMRVM6MX19LHtcIi4uL2NvcmVcIjo2NSxcIi4uL2NvcmUvdGV4dHVyZXMvVGV4dHVyZVwiOjExNX1dLDE2NzpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIGkodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBzKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9ci5fX2VzTW9kdWxlPSEwO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gciYmdChlLnByb3RvdHlwZSxyKSxuJiZ0KGUsbiksZX19KCksdT10KFwiLi9QbGFuZVwiKSxoPW4odSksbD10KFwiLi4vY29yZS9zcHJpdGVzL2NhbnZhcy9DYW52YXNUaW50ZXJcIiksYz1uKGwpLGQ9MTAsZj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHIsbixzLGEsdSl7aSh0aGlzLGUpO3ZhciBoPW8odGhpcyx0LmNhbGwodGhpcyxyLDQsNCkpO3JldHVybiBoLl9vcmlnV2lkdGg9ci5vcmlnLndpZHRoLGguX29yaWdIZWlnaHQ9ci5vcmlnLmhlaWdodCxoLl93aWR0aD1oLl9vcmlnV2lkdGgsaC5faGVpZ2h0PWguX29yaWdIZWlnaHQsaC5fbGVmdFdpZHRoPXZvaWQgMCE9PW4/bjpkLGguX3JpZ2h0V2lkdGg9dm9pZCAwIT09YT9hOmQsaC5fdG9wSGVpZ2h0PXZvaWQgMCE9PXM/czpkLGguX2JvdHRvbUhlaWdodD12b2lkIDAhPT11P3U6ZCxoLl9jYWNoZWRUaW50PTE2Nzc3MjE1LGguX3RpbnRlZFRleHR1cmU9bnVsbCxoLl9jYW52YXNVdnM9bnVsbCxoLnJlZnJlc2goITApLGh9cmV0dXJuIHMoZSx0KSxlLnByb3RvdHlwZS51cGRhdGVIb3Jpem9udGFsVmVydGljZXM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnZlcnRpY2VzLGU9dGhpcy5fdG9wSGVpZ2h0K3RoaXMuX2JvdHRvbUhlaWdodCxyPXRoaXMuX2hlaWdodD5lPzE6dGhpcy5faGVpZ2h0L2U7dFs5XT10WzExXT10WzEzXT10WzE1XT10aGlzLl90b3BIZWlnaHQqcix0WzE3XT10WzE5XT10WzIxXT10WzIzXT10aGlzLl9oZWlnaHQtdGhpcy5fYm90dG9tSGVpZ2h0KnIsdFsyNV09dFsyN109dFsyOV09dFszMV09dGhpcy5faGVpZ2h0fSxlLnByb3RvdHlwZS51cGRhdGVWZXJ0aWNhbFZlcnRpY2VzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy52ZXJ0aWNlcyxlPXRoaXMuX2xlZnRXaWR0aCt0aGlzLl9yaWdodFdpZHRoLHI9dGhpcy5fd2lkdGg+ZT8xOnRoaXMuX3dpZHRoL2U7dFsyXT10WzEwXT10WzE4XT10WzI2XT10aGlzLl9sZWZ0V2lkdGgqcix0WzRdPXRbMTJdPXRbMjBdPXRbMjhdPXRoaXMuX3dpZHRoLXRoaXMuX3JpZ2h0V2lkdGgqcix0WzZdPXRbMTRdPXRbMjJdPXRbMzBdPXRoaXMuX3dpZHRofSxlLnByb3RvdHlwZS5fcmVuZGVyQ2FudmFzPWZ1bmN0aW9uKHQpe3ZhciBlPXQuY29udGV4dCxyPXRoaXMud29ybGRUcmFuc2Zvcm0sbj10LnJlc29sdXRpb24saT0xNjc3NzIxNSE9PXRoaXMudGludCxvPXRoaXMuX3RleHR1cmU7aSYmdGhpcy5fY2FjaGVkVGludCE9PXRoaXMudGludCYmKHRoaXMuX2NhY2hlZFRpbnQ9dGhpcy50aW50LHRoaXMuX3RpbnRlZFRleHR1cmU9Yy5kZWZhdWx0LmdldFRpbnRlZFRleHR1cmUodGhpcyx0aGlzLnRpbnQpKTt2YXIgcz1pP3RoaXMuX3RpbnRlZFRleHR1cmU6by5iYXNlVGV4dHVyZS5zb3VyY2U7dGhpcy5fY2FudmFzVXZzfHwodGhpcy5fY2FudmFzVXZzPVswLDAsMCwwLDAsMCwwLDBdKTt2YXIgYT10aGlzLnZlcnRpY2VzLHU9dGhpcy5fY2FudmFzVXZzLGg9aT8wOm8uZnJhbWUueCxsPWk/MDpvLmZyYW1lLnksZD1oK28uZnJhbWUud2lkdGgsZj1sK28uZnJhbWUuaGVpZ2h0O3VbMF09aCx1WzFdPWgrdGhpcy5fbGVmdFdpZHRoLHVbMl09ZC10aGlzLl9yaWdodFdpZHRoLHVbM109ZCx1WzRdPWwsdVs1XT1sK3RoaXMuX3RvcEhlaWdodCx1WzZdPWYtdGhpcy5fYm90dG9tSGVpZ2h0LHVbN109Zjtmb3IodmFyIHA9MDtwPDg7cCsrKXVbcF0qPW8uYmFzZVRleHR1cmUucmVzb2x1dGlvbjtlLmdsb2JhbEFscGhhPXRoaXMud29ybGRBbHBoYSx0LnNldEJsZW5kTW9kZSh0aGlzLmJsZW5kTW9kZSksdC5yb3VuZFBpeGVscz9lLnNldFRyYW5zZm9ybShyLmEqbixyLmIqbixyLmMqbixyLmQqbixyLnR4Km58MCxyLnR5Km58MCk6ZS5zZXRUcmFuc2Zvcm0oci5hKm4sci5iKm4sci5jKm4sci5kKm4sci50eCpuLHIudHkqbik7Zm9yKHZhciB2PTA7djwzO3YrKylmb3IodmFyIGc9MDtnPDM7ZysrKXt2YXIgeT0yKmcrOCp2LG09TWF0aC5tYXgoMSx1W2crMV0tdVtnXSksXz1NYXRoLm1heCgxLHVbdis1XS11W3YrNF0pLGI9TWF0aC5tYXgoMSxhW3krMTBdLWFbeV0pLHg9TWF0aC5tYXgoMSxhW3krMTFdLWFbeSsxXSk7ZS5kcmF3SW1hZ2Uocyx1W2ddLHVbdis0XSxtLF8sYVt5XSxhW3krMV0sYix4KX19LGUucHJvdG90eXBlLl9yZWZyZXNoPWZ1bmN0aW9uKCl7dC5wcm90b3R5cGUuX3JlZnJlc2guY2FsbCh0aGlzKTt2YXIgZT10aGlzLnV2cyxyPXRoaXMuX3RleHR1cmU7dGhpcy5fb3JpZ1dpZHRoPXIub3JpZy53aWR0aCx0aGlzLl9vcmlnSGVpZ2h0PXIub3JpZy5oZWlnaHQ7dmFyIG49MS90aGlzLl9vcmlnV2lkdGgsaT0xL3RoaXMuX29yaWdIZWlnaHQ7ZVswXT1lWzhdPWVbMTZdPWVbMjRdPTAsZVsxXT1lWzNdPWVbNV09ZVs3XT0wLGVbNl09ZVsxNF09ZVsyMl09ZVszMF09MSxlWzI1XT1lWzI3XT1lWzI5XT1lWzMxXT0xLGVbMl09ZVsxMF09ZVsxOF09ZVsyNl09bip0aGlzLl9sZWZ0V2lkdGgsZVs0XT1lWzEyXT1lWzIwXT1lWzI4XT0xLW4qdGhpcy5fcmlnaHRXaWR0aCxlWzldPWVbMTFdPWVbMTNdPWVbMTVdPWkqdGhpcy5fdG9wSGVpZ2h0LGVbMTddPWVbMTldPWVbMjFdPWVbMjNdPTEtaSp0aGlzLl9ib3R0b21IZWlnaHQsdGhpcy51cGRhdGVIb3Jpem9udGFsVmVydGljZXMoKSx0aGlzLnVwZGF0ZVZlcnRpY2FsVmVydGljZXMoKSx0aGlzLmRpcnR5KyssdGhpcy5tdWx0aXBseVV2cygpfSxhKGUsW3trZXk6XCJ3aWR0aFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93aWR0aH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3dpZHRoPXQsdGhpcy5fcmVmcmVzaCgpfX0se2tleTpcImhlaWdodFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oZWlnaHR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9oZWlnaHQ9dCx0aGlzLl9yZWZyZXNoKCl9fSx7a2V5OlwibGVmdFdpZHRoXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xlZnRXaWR0aH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xlZnRXaWR0aD10LHRoaXMuX3JlZnJlc2goKX19LHtrZXk6XCJyaWdodFdpZHRoXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JpZ2h0V2lkdGh9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9yaWdodFdpZHRoPXQsdGhpcy5fcmVmcmVzaCgpfX0se2tleTpcInRvcEhlaWdodFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b3BIZWlnaHR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl90b3BIZWlnaHQ9dCx0aGlzLl9yZWZyZXNoKCl9fSx7a2V5OlwiYm90dG9tSGVpZ2h0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JvdHRvbUhlaWdodH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2JvdHRvbUhlaWdodD10LHRoaXMuX3JlZnJlc2goKX19XSksZX0oaC5kZWZhdWx0KTtyLmRlZmF1bHQ9Zn0se1wiLi4vY29yZS9zcHJpdGVzL2NhbnZhcy9DYW52YXNUaW50ZXJcIjoxMDQsXCIuL1BsYW5lXCI6MTY4fV0sMTY4OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gaSh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIG8odCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1yLl9fZXNNb2R1bGU9ITA7dmFyIHM9dChcIi4vTWVzaFwiKSxhPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0ocyksdT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHIsbyxzKXtuKHRoaXMsZSk7dmFyIHU9aSh0aGlzLHQuY2FsbCh0aGlzLHIpKTtyZXR1cm4gdS5fcmVhZHk9ITAsdS52ZXJ0aWNlc1g9b3x8MTAsdS52ZXJ0aWNlc1k9c3x8MTAsdS5kcmF3TW9kZT1hLmRlZmF1bHQuRFJBV19NT0RFUy5UUklBTkdMRVMsdS5yZWZyZXNoKCksdX1yZXR1cm4gbyhlLHQpLGUucHJvdG90eXBlLl9yZWZyZXNoPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuX3RleHR1cmUsZT10aGlzLnZlcnRpY2VzWCp0aGlzLnZlcnRpY2VzWSxyPVtdLG49W10saT1bXSxvPVtdLHM9dGhpcy52ZXJ0aWNlc1gtMSxhPXRoaXMudmVydGljZXNZLTEsdT10LndpZHRoL3MsaD10LmhlaWdodC9hLGw9MDtsPGU7bCsrKXt2YXIgYz1sJXRoaXMudmVydGljZXNYLGQ9bC90aGlzLnZlcnRpY2VzWHwwO3IucHVzaChjKnUsZCpoKSxpLnB1c2goYy9zLGQvYSl9Zm9yKHZhciBmPXMqYSxwPTA7cDxmO3ArKyl7dmFyIHY9cCVzLGc9cC9zfDAseT1nKnRoaXMudmVydGljZXNYK3YsbT1nKnRoaXMudmVydGljZXNYK3YrMSxfPShnKzEpKnRoaXMudmVydGljZXNYK3YsYj0oZysxKSp0aGlzLnZlcnRpY2VzWCt2KzE7by5wdXNoKHksbSxfKSxvLnB1c2gobSxiLF8pfXRoaXMudmVydGljZXM9bmV3IEZsb2F0MzJBcnJheShyKSx0aGlzLnV2cz1uZXcgRmxvYXQzMkFycmF5KGkpLHRoaXMuY29sb3JzPW5ldyBGbG9hdDMyQXJyYXkobiksdGhpcy5pbmRpY2VzPW5ldyBVaW50MTZBcnJheShvKSx0aGlzLmRpcnR5KyssdGhpcy5pbmRleERpcnR5KyssdGhpcy5tdWx0aXBseVV2cygpfSxlLnByb3RvdHlwZS5fb25UZXh0dXJlVXBkYXRlPWZ1bmN0aW9uKCl7YS5kZWZhdWx0LnByb3RvdHlwZS5fb25UZXh0dXJlVXBkYXRlLmNhbGwodGhpcyksdGhpcy5fcmVhZHkmJnRoaXMucmVmcmVzaCgpfSxlfShhLmRlZmF1bHQpO3IuZGVmYXVsdD11fSx7XCIuL01lc2hcIjoxNjZ9XSwxNjk6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gbyh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfXIuX19lc01vZHVsZT0hMDt2YXIgcz10KFwiLi9NZXNoXCIpLGE9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShzKSx1PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUocixvKXtuKHRoaXMsZSk7dmFyIHM9aSh0aGlzLHQuY2FsbCh0aGlzLHIpKTtyZXR1cm4gcy5wb2ludHM9byxzLnZlcnRpY2VzPW5ldyBGbG9hdDMyQXJyYXkoNCpvLmxlbmd0aCkscy51dnM9bmV3IEZsb2F0MzJBcnJheSg0Km8ubGVuZ3RoKSxzLmNvbG9ycz1uZXcgRmxvYXQzMkFycmF5KDIqby5sZW5ndGgpLHMuaW5kaWNlcz1uZXcgVWludDE2QXJyYXkoMipvLmxlbmd0aCkscy5hdXRvVXBkYXRlPSEwLHMucmVmcmVzaCgpLHN9cmV0dXJuIG8oZSx0KSxlLnByb3RvdHlwZS5fcmVmcmVzaD1mdW5jdGlvbigpe3ZhciB0PXRoaXMucG9pbnRzO2lmKCEodC5sZW5ndGg8MSkmJnRoaXMuX3RleHR1cmUuX3V2cyl7dGhpcy52ZXJ0aWNlcy5sZW5ndGgvNCE9PXQubGVuZ3RoJiYodGhpcy52ZXJ0aWNlcz1uZXcgRmxvYXQzMkFycmF5KDQqdC5sZW5ndGgpLHRoaXMudXZzPW5ldyBGbG9hdDMyQXJyYXkoNCp0Lmxlbmd0aCksdGhpcy5jb2xvcnM9bmV3IEZsb2F0MzJBcnJheSgyKnQubGVuZ3RoKSx0aGlzLmluZGljZXM9bmV3IFVpbnQxNkFycmF5KDIqdC5sZW5ndGgpKTt2YXIgZT10aGlzLnV2cyxyPXRoaXMuaW5kaWNlcyxuPXRoaXMuY29sb3JzO2VbMF09MCxlWzFdPTAsZVsyXT0wLGVbM109MSxuWzBdPTEsblsxXT0xLHJbMF09MCxyWzFdPTE7Zm9yKHZhciBpPXQubGVuZ3RoLG89MTtvPGk7bysrKXt2YXIgcz00Km8sYT1vLyhpLTEpO2Vbc109YSxlW3MrMV09MCxlW3MrMl09YSxlW3MrM109MSxzPTIqbyxuW3NdPTEsbltzKzFdPTEscz0yKm8scltzXT1zLHJbcysxXT1zKzF9dGhpcy5kaXJ0eSsrLHRoaXMuaW5kZXhEaXJ0eSsrLHRoaXMubXVsdGlwbHlVdnMoKSx0aGlzLnJlZnJlc2hWZXJ0aWNlcygpfX0sZS5wcm90b3R5cGUucmVmcmVzaFZlcnRpY2VzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wb2ludHM7aWYoISh0Lmxlbmd0aDwxKSlmb3IodmFyIGU9dFswXSxyPXZvaWQgMCxuPTAsaT0wLG89dGhpcy52ZXJ0aWNlcyxzPXQubGVuZ3RoLGE9MDthPHM7YSsrKXt2YXIgdT10W2FdLGg9NCphO3I9YTx0Lmxlbmd0aC0xP3RbYSsxXTp1LGk9LShyLngtZS54KSxuPXIueS1lLnk7dmFyIGw9MTAqKDEtYS8ocy0xKSk7bD4xJiYobD0xKTt2YXIgYz1NYXRoLnNxcnQobipuK2kqaSksZD10aGlzLl90ZXh0dXJlLmhlaWdodC8yO24vPWMsaS89YyxuKj1kLGkqPWQsb1toXT11LngrbixvW2grMV09dS55K2ksb1toKzJdPXUueC1uLG9baCszXT11LnktaSxlPXV9fSxlLnByb3RvdHlwZS51cGRhdGVUcmFuc2Zvcm09ZnVuY3Rpb24oKXt0aGlzLmF1dG9VcGRhdGUmJnRoaXMucmVmcmVzaFZlcnRpY2VzKCksdGhpcy5jb250YWluZXJVcGRhdGVUcmFuc2Zvcm0oKX0sZX0oYS5kZWZhdWx0KTtyLmRlZmF1bHQ9dX0se1wiLi9NZXNoXCI6MTY2fV0sMTcwOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ci5fX2VzTW9kdWxlPSEwO3ZhciBpPXQoXCIuLi8uLi9jb3JlXCIpLG89ZnVuY3Rpb24odCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfShpKSxzPXQoXCIuLi9NZXNoXCIpLGE9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShzKSx1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtuKHRoaXMsdCksdGhpcy5yZW5kZXJlcj1lfXJldHVybiB0LnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5yZW5kZXJlcixyPWUuY29udGV4dCxuPXQud29ybGRUcmFuc2Zvcm0saT1lLnJlc29sdXRpb247ZS5yb3VuZFBpeGVscz9yLnNldFRyYW5zZm9ybShuLmEqaSxuLmIqaSxuLmMqaSxuLmQqaSxuLnR4Kml8MCxuLnR5Kml8MCk6ci5zZXRUcmFuc2Zvcm0obi5hKmksbi5iKmksbi5jKmksbi5kKmksbi50eCppLG4udHkqaSksZS5jb250ZXh0Lmdsb2JhbEFscGhhPXQud29ybGRBbHBoYSxlLnNldEJsZW5kTW9kZSh0LmJsZW5kTW9kZSksdC5kcmF3TW9kZT09PWEuZGVmYXVsdC5EUkFXX01PREVTLlRSSUFOR0xFX01FU0g/dGhpcy5fcmVuZGVyVHJpYW5nbGVNZXNoKHQpOnRoaXMuX3JlbmRlclRyaWFuZ2xlcyh0KX0sdC5wcm90b3R5cGUuX3JlbmRlclRyaWFuZ2xlTWVzaD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC52ZXJ0aWNlcy5sZW5ndGgvMixyPTA7cjxlLTI7cisrKXt2YXIgbj0yKnI7dGhpcy5fcmVuZGVyRHJhd1RyaWFuZ2xlKHQsbixuKzIsbis0KX19LHQucHJvdG90eXBlLl9yZW5kZXJUcmlhbmdsZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQuaW5kaWNlcyxyPWUubGVuZ3RoLG49MDtuPHI7bis9Myl7dmFyIGk9MiplW25dLG89MiplW24rMV0scz0yKmVbbisyXTt0aGlzLl9yZW5kZXJEcmF3VHJpYW5nbGUodCxpLG8scyl9fSx0LnByb3RvdHlwZS5fcmVuZGVyRHJhd1RyaWFuZ2xlPWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBpPXRoaXMucmVuZGVyZXIuY29udGV4dCxvPXQudXZzLHM9dC52ZXJ0aWNlcyxhPXQuX3RleHR1cmU7aWYoYS52YWxpZCl7dmFyIHU9YS5iYXNlVGV4dHVyZSxoPXUuc291cmNlLGw9dS53aWR0aCxjPXUuaGVpZ2h0LGQ9dm9pZCAwLGY9dm9pZCAwLHA9dm9pZCAwLHY9dm9pZCAwLGc9dm9pZCAwLHk9dm9pZCAwO2lmKHQudXBsb2FkVXZUcmFuc2Zvcm0pe3ZhciBtPXQuX3V2VHJhbnNmb3JtLm1hcENvb3JkO2Q9KG9bZV0qbS5hK29bZSsxXSptLmMrbS50eCkqdS53aWR0aCxmPShvW3JdKm0uYStvW3IrMV0qbS5jK20udHgpKnUud2lkdGgscD0ob1tuXSptLmErb1tuKzFdKm0uYyttLnR4KSp1LndpZHRoLHY9KG9bZV0qbS5iK29bZSsxXSptLmQrbS50eSkqdS5oZWlnaHQsZz0ob1tyXSptLmIrb1tyKzFdKm0uZCttLnR5KSp1LmhlaWdodCx5PShvW25dKm0uYitvW24rMV0qbS5kK20udHkpKnUuaGVpZ2h0fWVsc2UgZD1vW2VdKnUud2lkdGgsZj1vW3JdKnUud2lkdGgscD1vW25dKnUud2lkdGgsdj1vW2UrMV0qdS5oZWlnaHQsZz1vW3IrMV0qdS5oZWlnaHQseT1vW24rMV0qdS5oZWlnaHQ7dmFyIF89c1tlXSxiPXNbcl0seD1zW25dLFQ9c1tlKzFdLHc9c1tyKzFdLEU9c1tuKzFdLFM9dC5jYW52YXNQYWRkaW5nL3RoaXMucmVuZGVyZXIucmVzb2x1dGlvbjtpZihTPjApe3ZhciBPPVMvTWF0aC5hYnModC53b3JsZFRyYW5zZm9ybS5hKSxNPVMvTWF0aC5hYnModC53b3JsZFRyYW5zZm9ybS5kKSxQPShfK2IreCkvMyxDPShUK3crRSkvMyxSPV8tUCxBPVQtQyxJPU1hdGguc3FydChSKlIrQSpBKTtfPVArUi9JKihJK08pLFQ9QytBL0kqKEkrTSksUj1iLVAsQT13LUMsST1NYXRoLnNxcnQoUipSK0EqQSksYj1QK1IvSSooSStPKSx3PUMrQS9JKihJK00pLFI9eC1QLEE9RS1DLEk9TWF0aC5zcXJ0KFIqUitBKkEpLHg9UCtSL0kqKEkrTyksRT1DK0EvSSooSStNKX1pLnNhdmUoKSxpLmJlZ2luUGF0aCgpLGkubW92ZVRvKF8sVCksaS5saW5lVG8oYix3KSxpLmxpbmVUbyh4LEUpLGkuY2xvc2VQYXRoKCksaS5jbGlwKCk7dmFyIEQ9ZCpnK3YqcCtmKnktZypwLXYqZi1kKnksTD1fKmcrdip4K2IqeS1nKngtdipiLV8qeSxOPWQqYitfKnArZip4LWIqcC1fKmYtZCp4LEI9ZCpnKngrdipiKnArXypmKnktXypnKnAtdipmKngtZCpiKnksaz1UKmcrdipFK3cqeS1nKkUtdip3LVQqeSxGPWQqdytUKnArZipFLXcqcC1UKmYtZCpFLGo9ZCpnKkUrdip3KnArVCpmKnktVCpnKnAtdipmKkUtZCp3Knk7aS50cmFuc2Zvcm0oTC9ELGsvRCxOL0QsRi9ELEIvRCxqL0QpLGkuZHJhd0ltYWdlKGgsMCwwLGwqdS5yZXNvbHV0aW9uLGMqdS5yZXNvbHV0aW9uLDAsMCxsLGMpLGkucmVzdG9yZSgpLHRoaXMucmVuZGVyZXIuaW52YWxpZGF0ZUJsZW5kTW9kZSgpfX0sdC5wcm90b3R5cGUucmVuZGVyTWVzaEZsYXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5yZW5kZXJlci5jb250ZXh0LHI9dC52ZXJ0aWNlcyxuPXIubGVuZ3RoLzI7ZS5iZWdpblBhdGgoKTtmb3IodmFyIGk9MTtpPG4tMjsrK2kpe3ZhciBvPTIqaSxzPXJbb10sYT1yW28rMV0sdT1yW28rMl0saD1yW28rM10sbD1yW28rNF0sYz1yW28rNV07ZS5tb3ZlVG8ocyxhKSxlLmxpbmVUbyh1LGgpLGUubGluZVRvKGwsYyl9ZS5maWxsU3R5bGU9XCIjRkYwMDAwXCIsZS5maWxsKCksZS5jbG9zZVBhdGgoKX0sdC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMucmVuZGVyZXI9bnVsbH0sdH0oKTtyLmRlZmF1bHQ9dSxvLkNhbnZhc1JlbmRlcmVyLnJlZ2lzdGVyUGx1Z2luKFwibWVzaFwiLHUpfSx7XCIuLi8uLi9jb3JlXCI6NjUsXCIuLi9NZXNoXCI6MTY2fV0sMTcxOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ci5fX2VzTW9kdWxlPSEwO3ZhciBpPXQoXCIuL01lc2hcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJNZXNoXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4oaSkuZGVmYXVsdH19KTt2YXIgbz10KFwiLi93ZWJnbC9NZXNoUmVuZGVyZXJcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJNZXNoUmVuZGVyZXJcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihvKS5kZWZhdWx0fX0pO3ZhciBzPXQoXCIuL2NhbnZhcy9DYW52YXNNZXNoUmVuZGVyZXJcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJDYW52YXNNZXNoUmVuZGVyZXJcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihzKS5kZWZhdWx0fX0pO3ZhciBhPXQoXCIuL1BsYW5lXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiUGxhbmVcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihhKS5kZWZhdWx0fX0pO3ZhciB1PXQoXCIuL05pbmVTbGljZVBsYW5lXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiTmluZVNsaWNlUGxhbmVcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbih1KS5kZWZhdWx0fX0pO3ZhciBoPXQoXCIuL1JvcGVcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJSb3BlXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4oaCkuZGVmYXVsdH19KX0se1wiLi9NZXNoXCI6MTY2LFwiLi9OaW5lU2xpY2VQbGFuZVwiOjE2NyxcIi4vUGxhbmVcIjoxNjgsXCIuL1JvcGVcIjoxNjksXCIuL2NhbnZhcy9DYW52YXNNZXNoUmVuZGVyZXJcIjoxNzAsXCIuL3dlYmdsL01lc2hSZW5kZXJlclwiOjE3Mn1dLDE3MjpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIGkodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBzKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9ci5fX2VzTW9kdWxlPSEwO3ZhciBhPXQoXCIuLi8uLi9jb3JlXCIpLHU9ZnVuY3Rpb24odCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfShhKSxoPXQoXCJwaXhpLWdsLWNvcmVcIiksbD1uKGgpLGM9dChcIi4uL01lc2hcIiksZD1uKGMpLGY9KHQoXCJwYXRoXCIpLHUuTWF0cml4LklERU5USVRZKSxwPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUocil7aSh0aGlzLGUpO3ZhciBuPW8odGhpcyx0LmNhbGwodGhpcyxyKSk7cmV0dXJuIG4uc2hhZGVyPW51bGwsbn1yZXR1cm4gcyhlLHQpLGUucHJvdG90eXBlLm9uQ29udGV4dENoYW5nZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMucmVuZGVyZXIuZ2w7dGhpcy5zaGFkZXI9bmV3IHUuU2hhZGVyKHQsXCJhdHRyaWJ1dGUgdmVjMiBhVmVydGV4UG9zaXRpb247XFxuYXR0cmlidXRlIHZlYzIgYVRleHR1cmVDb29yZDtcXG5cXG51bmlmb3JtIG1hdDMgcHJvamVjdGlvbk1hdHJpeDtcXG51bmlmb3JtIG1hdDMgdHJhbnNsYXRpb25NYXRyaXg7XFxudW5pZm9ybSBtYXQzIHVUcmFuc2Zvcm07XFxuXFxudmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XFxuXFxudm9pZCBtYWluKHZvaWQpXFxue1xcbiAgICBnbF9Qb3NpdGlvbiA9IHZlYzQoKHByb2plY3Rpb25NYXRyaXggKiB0cmFuc2xhdGlvbk1hdHJpeCAqIHZlYzMoYVZlcnRleFBvc2l0aW9uLCAxLjApKS54eSwgMC4wLCAxLjApO1xcblxcbiAgICB2VGV4dHVyZUNvb3JkID0gKHVUcmFuc2Zvcm0gKiB2ZWMzKGFUZXh0dXJlQ29vcmQsIDEuMCkpLnh5O1xcbn1cXG5cIixcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1xcbnVuaWZvcm0gdmVjNCB1Q29sb3I7XFxuXFxudW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XFxuXFxudm9pZCBtYWluKHZvaWQpXFxue1xcbiAgICBnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZUZXh0dXJlQ29vcmQpICogdUNvbG9yO1xcbn1cXG5cIil9LGUucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnJlbmRlcmVyLHI9ZS5nbCxuPXQuX3RleHR1cmU7aWYobi52YWxpZCl7dmFyIGk9dC5fZ2xEYXRhc1tlLkNPTlRFWFRfVUlEXTtpfHwoZS5iaW5kVmFvKG51bGwpLGk9e3NoYWRlcjp0aGlzLnNoYWRlcix2ZXJ0ZXhCdWZmZXI6bC5kZWZhdWx0LkdMQnVmZmVyLmNyZWF0ZVZlcnRleEJ1ZmZlcihyLHQudmVydGljZXMsci5TVFJFQU1fRFJBVyksdXZCdWZmZXI6bC5kZWZhdWx0LkdMQnVmZmVyLmNyZWF0ZVZlcnRleEJ1ZmZlcihyLHQudXZzLHIuU1RSRUFNX0RSQVcpLGluZGV4QnVmZmVyOmwuZGVmYXVsdC5HTEJ1ZmZlci5jcmVhdGVJbmRleEJ1ZmZlcihyLHQuaW5kaWNlcyxyLlNUQVRJQ19EUkFXKSx2YW86bnVsbCxkaXJ0eTp0LmRpcnR5LGluZGV4RGlydHk6dC5pbmRleERpcnR5LHZlcnRleERpcnR5OnQudmVydGV4RGlydHl9LGkudmFvPW5ldyBsLmRlZmF1bHQuVmVydGV4QXJyYXlPYmplY3QocikuYWRkSW5kZXgoaS5pbmRleEJ1ZmZlcikuYWRkQXR0cmlidXRlKGkudmVydGV4QnVmZmVyLGkuc2hhZGVyLmF0dHJpYnV0ZXMuYVZlcnRleFBvc2l0aW9uLHIuRkxPQVQsITEsOCwwKS5hZGRBdHRyaWJ1dGUoaS51dkJ1ZmZlcixpLnNoYWRlci5hdHRyaWJ1dGVzLmFUZXh0dXJlQ29vcmQsci5GTE9BVCwhMSw4LDApLHQuX2dsRGF0YXNbZS5DT05URVhUX1VJRF09aSksZS5iaW5kVmFvKGkudmFvKSx0LmRpcnR5IT09aS5kaXJ0eSYmKGkuZGlydHk9dC5kaXJ0eSxpLnV2QnVmZmVyLnVwbG9hZCh0LnV2cykpLHQuaW5kZXhEaXJ0eSE9PWkuaW5kZXhEaXJ0eSYmKGkuaW5kZXhEaXJ0eT10LmluZGV4RGlydHksaS5pbmRleEJ1ZmZlci51cGxvYWQodC5pbmRpY2VzKSksdC52ZXJ0ZXhEaXJ0eSE9PWkudmVydGV4RGlydHkmJihpLnZlcnRleERpcnR5PXQudmVydGV4RGlydHksaS52ZXJ0ZXhCdWZmZXIudXBsb2FkKHQudmVydGljZXMpKSxlLmJpbmRTaGFkZXIoaS5zaGFkZXIpLGkuc2hhZGVyLnVuaWZvcm1zLnVTYW1wbGVyPWUuYmluZFRleHR1cmUobiksZS5zdGF0ZS5zZXRCbGVuZE1vZGUodS51dGlscy5jb3JyZWN0QmxlbmRNb2RlKHQuYmxlbmRNb2RlLG4uYmFzZVRleHR1cmUucHJlbXVsdGlwbGllZEFscGhhKSksaS5zaGFkZXIudW5pZm9ybXMudVRyYW5zZm9ybSYmKHQudXBsb2FkVXZUcmFuc2Zvcm0/aS5zaGFkZXIudW5pZm9ybXMudVRyYW5zZm9ybT10Ll91dlRyYW5zZm9ybS5tYXBDb29yZC50b0FycmF5KCEwKTppLnNoYWRlci51bmlmb3Jtcy51VHJhbnNmb3JtPWYudG9BcnJheSghMCkpLGkuc2hhZGVyLnVuaWZvcm1zLnRyYW5zbGF0aW9uTWF0cml4PXQud29ybGRUcmFuc2Zvcm0udG9BcnJheSghMCksaS5zaGFkZXIudW5pZm9ybXMudUNvbG9yPXUudXRpbHMucHJlbXVsdGlwbHlSZ2JhKHQudGludFJnYix0LndvcmxkQWxwaGEsaS5zaGFkZXIudW5pZm9ybXMudUNvbG9yLG4uYmFzZVRleHR1cmUucHJlbXVsdGlwbGllZEFscGhhKTt2YXIgbz10LmRyYXdNb2RlPT09ZC5kZWZhdWx0LkRSQVdfTU9ERVMuVFJJQU5HTEVfTUVTSD9yLlRSSUFOR0xFX1NUUklQOnIuVFJJQU5HTEVTO2kudmFvLmRyYXcobyx0LmluZGljZXMubGVuZ3RoLDApfX0sZX0odS5PYmplY3RSZW5kZXJlcik7ci5kZWZhdWx0PXAsdS5XZWJHTFJlbmRlcmVyLnJlZ2lzdGVyUGx1Z2luKFwibWVzaFwiLHApfSx7XCIuLi8uLi9jb3JlXCI6NjUsXCIuLi9NZXNoXCI6MTY2LHBhdGg6OCxcInBpeGktZ2wtY29yZVwiOjE1fV0sMTczOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gaSh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIG8odCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1yLl9fZXNNb2R1bGU9ITA7dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBuPWVbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSxyLG4pe3JldHVybiByJiZ0KGUucHJvdG90eXBlLHIpLG4mJnQoZSxuKSxlfX0oKSxhPXQoXCIuLi9jb3JlXCIpLHU9ZnVuY3Rpb24odCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfShhKSxoPXQoXCIuLi9jb3JlL3V0aWxzXCIpLGw9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXToxNTAwLG89YXJndW1lbnRzWzFdLHM9YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOjE2Mzg0LGE9YXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10mJmFyZ3VtZW50c1szXTtuKHRoaXMsZSk7dmFyIGg9aSh0aGlzLHQuY2FsbCh0aGlzKSk7cmV0dXJuIHM+MTYzODQmJihzPTE2Mzg0KSxzPnImJihzPXIpLGguX3Byb3BlcnRpZXM9WyExLCEwLCExLCExLCExXSxoLl9tYXhTaXplPXIsaC5fYmF0Y2hTaXplPXMsaC5fZ2xCdWZmZXJzPXt9LGguX2J1ZmZlclVwZGF0ZUlEcz1bXSxoLl91cGRhdGVJRD0wLGguaW50ZXJhY3RpdmVDaGlsZHJlbj0hMSxoLmJsZW5kTW9kZT11LkJMRU5EX01PREVTLk5PUk1BTCxoLmF1dG9SZXNpemU9YSxoLnJvdW5kUGl4ZWxzPSEwLGguYmFzZVRleHR1cmU9bnVsbCxoLnNldFByb3BlcnRpZXMobyksaC5fdGludD0wLGgudGludFJnYj1uZXcgRmxvYXQzMkFycmF5KDQpLGgudGludD0xNjc3NzIxNSxofXJldHVybiBvKGUsdCksZS5wcm90b3R5cGUuc2V0UHJvcGVydGllcz1mdW5jdGlvbih0KXt0JiYodGhpcy5fcHJvcGVydGllc1swXT1cInZlcnRpY2VzXCJpbiB0fHxcInNjYWxlXCJpbiB0PyEhdC52ZXJ0aWNlc3x8ISF0LnNjYWxlOnRoaXMuX3Byb3BlcnRpZXNbMF0sdGhpcy5fcHJvcGVydGllc1sxXT1cInBvc2l0aW9uXCJpbiB0PyEhdC5wb3NpdGlvbjp0aGlzLl9wcm9wZXJ0aWVzWzFdLHRoaXMuX3Byb3BlcnRpZXNbMl09XCJyb3RhdGlvblwiaW4gdD8hIXQucm90YXRpb246dGhpcy5fcHJvcGVydGllc1syXSx0aGlzLl9wcm9wZXJ0aWVzWzNdPVwidXZzXCJpbiB0PyEhdC51dnM6dGhpcy5fcHJvcGVydGllc1szXSx0aGlzLl9wcm9wZXJ0aWVzWzRdPVwidGludFwiaW4gdHx8XCJhbHBoYVwiaW4gdD8hIXQudGludHx8ISF0LmFscGhhOnRoaXMuX3Byb3BlcnRpZXNbNF0pfSxlLnByb3RvdHlwZS51cGRhdGVUcmFuc2Zvcm09ZnVuY3Rpb24oKXt0aGlzLmRpc3BsYXlPYmplY3RVcGRhdGVUcmFuc2Zvcm0oKX0sZS5wcm90b3R5cGUucmVuZGVyV2ViR0w9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLnZpc2libGUmJiEodGhpcy53b3JsZEFscGhhPD0wKSYmdGhpcy5jaGlsZHJlbi5sZW5ndGgmJnRoaXMucmVuZGVyYWJsZSYmKHRoaXMuYmFzZVRleHR1cmV8fCh0aGlzLmJhc2VUZXh0dXJlPXRoaXMuY2hpbGRyZW5bMF0uX3RleHR1cmUuYmFzZVRleHR1cmUsdGhpcy5iYXNlVGV4dHVyZS5oYXNMb2FkZWR8fHRoaXMuYmFzZVRleHR1cmUub25jZShcInVwZGF0ZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIGUub25DaGlsZHJlbkNoYW5nZSgwKX0pKSx0LnNldE9iamVjdFJlbmRlcmVyKHQucGx1Z2lucy5wYXJ0aWNsZSksdC5wbHVnaW5zLnBhcnRpY2xlLnJlbmRlcih0aGlzKSl9LGUucHJvdG90eXBlLm9uQ2hpbGRyZW5DaGFuZ2U9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPU1hdGguZmxvb3IodC90aGlzLl9iYXRjaFNpemUpO3RoaXMuX2J1ZmZlclVwZGF0ZUlEcy5sZW5ndGg8ZTspdGhpcy5fYnVmZmVyVXBkYXRlSURzLnB1c2goMCk7dGhpcy5fYnVmZmVyVXBkYXRlSURzW2VdPSsrdGhpcy5fdXBkYXRlSUR9LGUucHJvdG90eXBlLnJlbmRlckNhbnZhcz1mdW5jdGlvbih0KXtpZih0aGlzLnZpc2libGUmJiEodGhpcy53b3JsZEFscGhhPD0wKSYmdGhpcy5jaGlsZHJlbi5sZW5ndGgmJnRoaXMucmVuZGVyYWJsZSl7dmFyIGU9dC5jb250ZXh0LHI9dGhpcy53b3JsZFRyYW5zZm9ybSxuPSEwLGk9MCxvPTAscz0wLGE9MDt0LnNldEJsZW5kTW9kZSh0aGlzLmJsZW5kTW9kZSksZS5nbG9iYWxBbHBoYT10aGlzLndvcmxkQWxwaGEsdGhpcy5kaXNwbGF5T2JqZWN0VXBkYXRlVHJhbnNmb3JtKCk7Zm9yKHZhciB1PTA7dTx0aGlzLmNoaWxkcmVuLmxlbmd0aDsrK3Upe3ZhciBoPXRoaXMuY2hpbGRyZW5bdV07aWYoaC52aXNpYmxlKXt2YXIgbD1oLl90ZXh0dXJlLmZyYW1lO2lmKGUuZ2xvYmFsQWxwaGE9dGhpcy53b3JsZEFscGhhKmguYWxwaGEsaC5yb3RhdGlvbiUoMipNYXRoLlBJKT09MCluJiYoZS5zZXRUcmFuc2Zvcm0oci5hLHIuYixyLmMsci5kLHIudHgqdC5yZXNvbHV0aW9uLHIudHkqdC5yZXNvbHV0aW9uKSxuPSExKSxpPWguYW5jaG9yLngqKC1sLndpZHRoKmguc2NhbGUueCkraC5wb3NpdGlvbi54Ky41LFxubz1oLmFuY2hvci55KigtbC5oZWlnaHQqaC5zY2FsZS55KStoLnBvc2l0aW9uLnkrLjUscz1sLndpZHRoKmguc2NhbGUueCxhPWwuaGVpZ2h0Kmguc2NhbGUueTtlbHNle258fChuPSEwKSxoLmRpc3BsYXlPYmplY3RVcGRhdGVUcmFuc2Zvcm0oKTt2YXIgYz1oLndvcmxkVHJhbnNmb3JtO3Qucm91bmRQaXhlbHM/ZS5zZXRUcmFuc2Zvcm0oYy5hLGMuYixjLmMsYy5kLGMudHgqdC5yZXNvbHV0aW9ufDAsYy50eSp0LnJlc29sdXRpb258MCk6ZS5zZXRUcmFuc2Zvcm0oYy5hLGMuYixjLmMsYy5kLGMudHgqdC5yZXNvbHV0aW9uLGMudHkqdC5yZXNvbHV0aW9uKSxpPWguYW5jaG9yLngqLWwud2lkdGgrLjUsbz1oLmFuY2hvci55Ki1sLmhlaWdodCsuNSxzPWwud2lkdGgsYT1sLmhlaWdodH12YXIgZD1oLl90ZXh0dXJlLmJhc2VUZXh0dXJlLnJlc29sdXRpb247ZS5kcmF3SW1hZ2UoaC5fdGV4dHVyZS5iYXNlVGV4dHVyZS5zb3VyY2UsbC54KmQsbC55KmQsbC53aWR0aCpkLGwuaGVpZ2h0KmQsaSp0LnJlc29sdXRpb24sbyp0LnJlc29sdXRpb24scyp0LnJlc29sdXRpb24sYSp0LnJlc29sdXRpb24pfX19fSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKGUpe2lmKHQucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzLGUpLHRoaXMuX2J1ZmZlcnMpZm9yKHZhciByPTA7cjx0aGlzLl9idWZmZXJzLmxlbmd0aDsrK3IpdGhpcy5fYnVmZmVyc1tyXS5kZXN0cm95KCk7dGhpcy5fcHJvcGVydGllcz1udWxsLHRoaXMuX2J1ZmZlcnM9bnVsbCx0aGlzLl9idWZmZXJVcGRhdGVJRHM9bnVsbH0scyhlLFt7a2V5OlwidGludFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aW50fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdGludD10LCgwLGguaGV4MnJnYikodCx0aGlzLnRpbnRSZ2IpfX1dKSxlfSh1LkNvbnRhaW5lcik7ci5kZWZhdWx0PWx9LHtcIi4uL2NvcmVcIjo2NSxcIi4uL2NvcmUvdXRpbHNcIjoxMjV9XSwxNzQ6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1yLl9fZXNNb2R1bGU9ITA7dmFyIGk9dChcIi4vUGFydGljbGVDb250YWluZXJcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJQYXJ0aWNsZUNvbnRhaW5lclwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBuKGkpLmRlZmF1bHR9fSk7dmFyIG89dChcIi4vd2ViZ2wvUGFydGljbGVSZW5kZXJlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlBhcnRpY2xlUmVuZGVyZXJcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihvKS5kZWZhdWx0fX0pfSx7XCIuL1BhcnRpY2xlQ29udGFpbmVyXCI6MTczLFwiLi93ZWJnbC9QYXJ0aWNsZVJlbmRlcmVyXCI6MTc2fV0sMTc1OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ci5fX2VzTW9kdWxlPSEwO3ZhciBvPXQoXCJwaXhpLWdsLWNvcmVcIikscz1uKG8pLGE9dChcIi4uLy4uL2NvcmUvdXRpbHMvY3JlYXRlSW5kaWNlc0ZvclF1YWRzXCIpLHU9bihhKSxoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLHIsbixvKXtpKHRoaXMsdCksdGhpcy5nbD1lLHRoaXMuc2l6ZT1vLHRoaXMuZHluYW1pY1Byb3BlcnRpZXM9W10sdGhpcy5zdGF0aWNQcm9wZXJ0aWVzPVtdO2Zvcih2YXIgcz0wO3M8ci5sZW5ndGg7KytzKXt2YXIgYT1yW3NdO2E9e2F0dHJpYnV0ZTphLmF0dHJpYnV0ZSxzaXplOmEuc2l6ZSx1cGxvYWRGdW5jdGlvbjphLnVwbG9hZEZ1bmN0aW9uLHVuc2lnbmVkQnl0ZTphLnVuc2lnbmVkQnl0ZSxvZmZzZXQ6YS5vZmZzZXR9LG5bc10/dGhpcy5keW5hbWljUHJvcGVydGllcy5wdXNoKGEpOnRoaXMuc3RhdGljUHJvcGVydGllcy5wdXNoKGEpfXRoaXMuc3RhdGljU3RyaWRlPTAsdGhpcy5zdGF0aWNCdWZmZXI9bnVsbCx0aGlzLnN0YXRpY0RhdGE9bnVsbCx0aGlzLnN0YXRpY0RhdGFVaW50MzI9bnVsbCx0aGlzLmR5bmFtaWNTdHJpZGU9MCx0aGlzLmR5bmFtaWNCdWZmZXI9bnVsbCx0aGlzLmR5bmFtaWNEYXRhPW51bGwsdGhpcy5keW5hbWljRGF0YVVpbnQzMj1udWxsLHRoaXMuX3VwZGF0ZUlEPTAsdGhpcy5pbml0QnVmZmVycygpfXJldHVybiB0LnByb3RvdHlwZS5pbml0QnVmZmVycz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2wsZT0wO3RoaXMuaW5kaWNlcz0oMCx1LmRlZmF1bHQpKHRoaXMuc2l6ZSksdGhpcy5pbmRleEJ1ZmZlcj1zLmRlZmF1bHQuR0xCdWZmZXIuY3JlYXRlSW5kZXhCdWZmZXIodCx0aGlzLmluZGljZXMsdC5TVEFUSUNfRFJBVyksdGhpcy5keW5hbWljU3RyaWRlPTA7Zm9yKHZhciByPTA7cjx0aGlzLmR5bmFtaWNQcm9wZXJ0aWVzLmxlbmd0aDsrK3Ipe3ZhciBuPXRoaXMuZHluYW1pY1Byb3BlcnRpZXNbcl07bi5vZmZzZXQ9ZSxlKz1uLnNpemUsdGhpcy5keW5hbWljU3RyaWRlKz1uLnNpemV9dmFyIGk9bmV3IEFycmF5QnVmZmVyKHRoaXMuc2l6ZSp0aGlzLmR5bmFtaWNTdHJpZGUqNCo0KTt0aGlzLmR5bmFtaWNEYXRhPW5ldyBGbG9hdDMyQXJyYXkoaSksdGhpcy5keW5hbWljRGF0YVVpbnQzMj1uZXcgVWludDMyQXJyYXkoaSksdGhpcy5keW5hbWljQnVmZmVyPXMuZGVmYXVsdC5HTEJ1ZmZlci5jcmVhdGVWZXJ0ZXhCdWZmZXIodCxpLHQuU1RSRUFNX0RSQVcpO3ZhciBvPTA7dGhpcy5zdGF0aWNTdHJpZGU9MDtmb3IodmFyIGE9MDthPHRoaXMuc3RhdGljUHJvcGVydGllcy5sZW5ndGg7KythKXt2YXIgaD10aGlzLnN0YXRpY1Byb3BlcnRpZXNbYV07aC5vZmZzZXQ9byxvKz1oLnNpemUsdGhpcy5zdGF0aWNTdHJpZGUrPWguc2l6ZX12YXIgbD1uZXcgQXJyYXlCdWZmZXIodGhpcy5zaXplKnRoaXMuc3RhdGljU3RyaWRlKjQqNCk7dGhpcy5zdGF0aWNEYXRhPW5ldyBGbG9hdDMyQXJyYXkobCksdGhpcy5zdGF0aWNEYXRhVWludDMyPW5ldyBVaW50MzJBcnJheShsKSx0aGlzLnN0YXRpY0J1ZmZlcj1zLmRlZmF1bHQuR0xCdWZmZXIuY3JlYXRlVmVydGV4QnVmZmVyKHQsbCx0LlNUQVRJQ19EUkFXKSx0aGlzLnZhbz1uZXcgcy5kZWZhdWx0LlZlcnRleEFycmF5T2JqZWN0KHQpLmFkZEluZGV4KHRoaXMuaW5kZXhCdWZmZXIpO2Zvcih2YXIgYz0wO2M8dGhpcy5keW5hbWljUHJvcGVydGllcy5sZW5ndGg7KytjKXt2YXIgZD10aGlzLmR5bmFtaWNQcm9wZXJ0aWVzW2NdO2QudW5zaWduZWRCeXRlP3RoaXMudmFvLmFkZEF0dHJpYnV0ZSh0aGlzLmR5bmFtaWNCdWZmZXIsZC5hdHRyaWJ1dGUsdC5VTlNJR05FRF9CWVRFLCEwLDQqdGhpcy5keW5hbWljU3RyaWRlLDQqZC5vZmZzZXQpOnRoaXMudmFvLmFkZEF0dHJpYnV0ZSh0aGlzLmR5bmFtaWNCdWZmZXIsZC5hdHRyaWJ1dGUsdC5GTE9BVCwhMSw0KnRoaXMuZHluYW1pY1N0cmlkZSw0KmQub2Zmc2V0KX1mb3IodmFyIGY9MDtmPHRoaXMuc3RhdGljUHJvcGVydGllcy5sZW5ndGg7KytmKXt2YXIgcD10aGlzLnN0YXRpY1Byb3BlcnRpZXNbZl07cC51bnNpZ25lZEJ5dGU/dGhpcy52YW8uYWRkQXR0cmlidXRlKHRoaXMuc3RhdGljQnVmZmVyLHAuYXR0cmlidXRlLHQuVU5TSUdORURfQllURSwhMCw0KnRoaXMuc3RhdGljU3RyaWRlLDQqcC5vZmZzZXQpOnRoaXMudmFvLmFkZEF0dHJpYnV0ZSh0aGlzLnN0YXRpY0J1ZmZlcixwLmF0dHJpYnV0ZSx0LkZMT0FULCExLDQqdGhpcy5zdGF0aWNTdHJpZGUsNCpwLm9mZnNldCl9fSx0LnByb3RvdHlwZS51cGxvYWREeW5hbWljPWZ1bmN0aW9uKHQsZSxyKXtmb3IodmFyIG49MDtuPHRoaXMuZHluYW1pY1Byb3BlcnRpZXMubGVuZ3RoO24rKyl7dmFyIGk9dGhpcy5keW5hbWljUHJvcGVydGllc1tuXTtpLnVwbG9hZEZ1bmN0aW9uKHQsZSxyLGkudW5zaWduZWRCeXRlP3RoaXMuZHluYW1pY0RhdGFVaW50MzI6dGhpcy5keW5hbWljRGF0YSx0aGlzLmR5bmFtaWNTdHJpZGUsaS5vZmZzZXQpfXRoaXMuZHluYW1pY0J1ZmZlci51cGxvYWQoKX0sdC5wcm90b3R5cGUudXBsb2FkU3RhdGljPWZ1bmN0aW9uKHQsZSxyKXtmb3IodmFyIG49MDtuPHRoaXMuc3RhdGljUHJvcGVydGllcy5sZW5ndGg7bisrKXt2YXIgaT10aGlzLnN0YXRpY1Byb3BlcnRpZXNbbl07aS51cGxvYWRGdW5jdGlvbih0LGUscixpLnVuc2lnbmVkQnl0ZT90aGlzLnN0YXRpY0RhdGFVaW50MzI6dGhpcy5zdGF0aWNEYXRhLHRoaXMuc3RhdGljU3RyaWRlLGkub2Zmc2V0KX10aGlzLnN0YXRpY0J1ZmZlci51cGxvYWQoKX0sdC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuZHluYW1pY1Byb3BlcnRpZXM9bnVsbCx0aGlzLmR5bmFtaWNCdWZmZXIuZGVzdHJveSgpLHRoaXMuZHluYW1pY0J1ZmZlcj1udWxsLHRoaXMuZHluYW1pY0RhdGE9bnVsbCx0aGlzLmR5bmFtaWNEYXRhVWludDMyPW51bGwsdGhpcy5zdGF0aWNQcm9wZXJ0aWVzPW51bGwsdGhpcy5zdGF0aWNCdWZmZXIuZGVzdHJveSgpLHRoaXMuc3RhdGljQnVmZmVyPW51bGwsdGhpcy5zdGF0aWNEYXRhPW51bGwsdGhpcy5zdGF0aWNEYXRhVWludDMyPW51bGx9LHR9KCk7ci5kZWZhdWx0PWh9LHtcIi4uLy4uL2NvcmUvdXRpbHMvY3JlYXRlSW5kaWNlc0ZvclF1YWRzXCI6MTIzLFwicGl4aS1nbC1jb3JlXCI6MTV9XSwxNzY6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBpKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gcyh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfXIuX19lc01vZHVsZT0hMDt2YXIgYT10KFwiLi4vLi4vY29yZVwiKSx1PWZ1bmN0aW9uKHQpe2lmKHQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT17fTtpZihudWxsIT10KWZvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKTtyZXR1cm4gZS5kZWZhdWx0PXQsZX0oYSksaD10KFwiLi9QYXJ0aWNsZVNoYWRlclwiKSxsPW4oaCksYz10KFwiLi9QYXJ0aWNsZUJ1ZmZlclwiKSxkPW4oYyksZj10KFwiLi4vLi4vY29yZS91dGlsc1wiKSxwPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUocil7aSh0aGlzLGUpO3ZhciBuPW8odGhpcyx0LmNhbGwodGhpcyxyKSk7cmV0dXJuIG4uc2hhZGVyPW51bGwsbi5pbmRleEJ1ZmZlcj1udWxsLG4ucHJvcGVydGllcz1udWxsLG4udGVtcE1hdHJpeD1uZXcgdS5NYXRyaXgsbi5DT05URVhUX1VJRD0wLG59cmV0dXJuIHMoZSx0KSxlLnByb3RvdHlwZS5vbkNvbnRleHRDaGFuZ2U9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnJlbmRlcmVyLmdsO3RoaXMuQ09OVEVYVF9VSUQ9dGhpcy5yZW5kZXJlci5DT05URVhUX1VJRCx0aGlzLnNoYWRlcj1uZXcgbC5kZWZhdWx0KHQpLHRoaXMucHJvcGVydGllcz1be2F0dHJpYnV0ZTp0aGlzLnNoYWRlci5hdHRyaWJ1dGVzLmFWZXJ0ZXhQb3NpdGlvbixzaXplOjIsdXBsb2FkRnVuY3Rpb246dGhpcy51cGxvYWRWZXJ0aWNlcyxvZmZzZXQ6MH0se2F0dHJpYnV0ZTp0aGlzLnNoYWRlci5hdHRyaWJ1dGVzLmFQb3NpdGlvbkNvb3JkLHNpemU6Mix1cGxvYWRGdW5jdGlvbjp0aGlzLnVwbG9hZFBvc2l0aW9uLG9mZnNldDowfSx7YXR0cmlidXRlOnRoaXMuc2hhZGVyLmF0dHJpYnV0ZXMuYVJvdGF0aW9uLHNpemU6MSx1cGxvYWRGdW5jdGlvbjp0aGlzLnVwbG9hZFJvdGF0aW9uLG9mZnNldDowfSx7YXR0cmlidXRlOnRoaXMuc2hhZGVyLmF0dHJpYnV0ZXMuYVRleHR1cmVDb29yZCxzaXplOjIsdXBsb2FkRnVuY3Rpb246dGhpcy51cGxvYWRVdnMsb2Zmc2V0OjB9LHthdHRyaWJ1dGU6dGhpcy5zaGFkZXIuYXR0cmlidXRlcy5hQ29sb3Isc2l6ZToxLHVuc2lnbmVkQnl0ZTohMCx1cGxvYWRGdW5jdGlvbjp0aGlzLnVwbG9hZFRpbnQsb2Zmc2V0OjB9XX0sZS5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcmVyLmJpbmRTaGFkZXIodGhpcy5zaGFkZXIpfSxlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24odCl7dmFyIGU9dC5jaGlsZHJlbixyPXQuX21heFNpemUsbj10Ll9iYXRjaFNpemUsaT10aGlzLnJlbmRlcmVyLG89ZS5sZW5ndGg7aWYoMCE9PW8pe28+ciYmKG89cik7dmFyIHM9dC5fZ2xCdWZmZXJzW2kuQ09OVEVYVF9VSURdO3N8fChzPXQuX2dsQnVmZmVyc1tpLkNPTlRFWFRfVUlEXT10aGlzLmdlbmVyYXRlQnVmZmVycyh0KSk7dmFyIGE9ZVswXS5fdGV4dHVyZS5iYXNlVGV4dHVyZTt0aGlzLnJlbmRlcmVyLnNldEJsZW5kTW9kZSh1LnV0aWxzLmNvcnJlY3RCbGVuZE1vZGUodC5ibGVuZE1vZGUsYS5wcmVtdWx0aXBsaWVkQWxwaGEpKTt2YXIgaD1pLmdsLGw9dC53b3JsZFRyYW5zZm9ybS5jb3B5KHRoaXMudGVtcE1hdHJpeCk7bC5wcmVwZW5kKGkuX2FjdGl2ZVJlbmRlclRhcmdldC5wcm9qZWN0aW9uTWF0cml4KSx0aGlzLnNoYWRlci51bmlmb3Jtcy5wcm9qZWN0aW9uTWF0cml4PWwudG9BcnJheSghMCksdGhpcy5zaGFkZXIudW5pZm9ybXMudUNvbG9yPXUudXRpbHMucHJlbXVsdGlwbHlSZ2JhKHQudGludFJnYix0LndvcmxkQWxwaGEsdGhpcy5zaGFkZXIudW5pZm9ybXMudUNvbG9yLGEucHJlbXVsdGlwbGllZEFscGhhKSx0aGlzLnNoYWRlci51bmlmb3Jtcy51U2FtcGxlcj1pLmJpbmRUZXh0dXJlKGEpO2Zvcih2YXIgYz0hMSxkPTAsZj0wO2Q8bztkKz1uLGYrPTEpe3ZhciBwPW8tZDtpZihwPm4mJihwPW4pLGY+PXMubGVuZ3RoKXtpZighdC5hdXRvUmVzaXplKWJyZWFrO3MucHVzaCh0aGlzLl9nZW5lcmF0ZU9uZU1vcmVCdWZmZXIodCkpfXZhciB2PXNbZl07di51cGxvYWREeW5hbWljKGUsZCxwKTt2YXIgZz10Ll9idWZmZXJVcGRhdGVJRHNbZl18fDA7Yz1jfHx2Ll91cGRhdGVJRDxnLGMmJih2Ll91cGRhdGVJRD10Ll91cGRhdGVJRCx2LnVwbG9hZFN0YXRpYyhlLGQscCkpLGkuYmluZFZhbyh2LnZhbyksdi52YW8uZHJhdyhoLlRSSUFOR0xFUyw2KnApfX19LGUucHJvdG90eXBlLmdlbmVyYXRlQnVmZmVycz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5yZW5kZXJlci5nbCxyPVtdLG49dC5fbWF4U2l6ZSxpPXQuX2JhdGNoU2l6ZSxvPXQuX3Byb3BlcnRpZXMscz0wO3M8bjtzKz1pKXIucHVzaChuZXcgZC5kZWZhdWx0KGUsdGhpcy5wcm9wZXJ0aWVzLG8saSkpO3JldHVybiByfSxlLnByb3RvdHlwZS5fZ2VuZXJhdGVPbmVNb3JlQnVmZmVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucmVuZGVyZXIuZ2wscj10Ll9iYXRjaFNpemUsbj10Ll9wcm9wZXJ0aWVzO3JldHVybiBuZXcgZC5kZWZhdWx0KGUsdGhpcy5wcm9wZXJ0aWVzLG4scil9LGUucHJvdG90eXBlLnVwbG9hZFZlcnRpY2VzPWZ1bmN0aW9uKHQsZSxyLG4saSxvKXtmb3IodmFyIHM9MCxhPTAsdT0wLGg9MCxsPTA7bDxyOysrbCl7dmFyIGM9dFtlK2xdLGQ9Yy5fdGV4dHVyZSxmPWMuc2NhbGUueCxwPWMuc2NhbGUueSx2PWQudHJpbSxnPWQub3JpZzt2PyhhPXYueC1jLmFuY2hvci54Kmcud2lkdGgscz1hK3Yud2lkdGgsaD12LnktYy5hbmNob3IueSpnLmhlaWdodCx1PWgrdi5oZWlnaHQpOihzPWcud2lkdGgqKDEtYy5hbmNob3IueCksYT1nLndpZHRoKi1jLmFuY2hvci54LHU9Zy5oZWlnaHQqKDEtYy5hbmNob3IueSksaD1nLmhlaWdodCotYy5hbmNob3IueSksbltvXT1hKmYsbltvKzFdPWgqcCxuW28raV09cypmLG5bbytpKzFdPWgqcCxuW28rMippXT1zKmYsbltvKzIqaSsxXT11KnAsbltvKzMqaV09YSpmLG5bbyszKmkrMV09dSpwLG8rPTQqaX19LGUucHJvdG90eXBlLnVwbG9hZFBvc2l0aW9uPWZ1bmN0aW9uKHQsZSxyLG4saSxvKXtmb3IodmFyIHM9MDtzPHI7cysrKXt2YXIgYT10W2Urc10ucG9zaXRpb247bltvXT1hLngsbltvKzFdPWEueSxuW28raV09YS54LG5bbytpKzFdPWEueSxuW28rMippXT1hLngsbltvKzIqaSsxXT1hLnksbltvKzMqaV09YS54LG5bbyszKmkrMV09YS55LG8rPTQqaX19LGUucHJvdG90eXBlLnVwbG9hZFJvdGF0aW9uPWZ1bmN0aW9uKHQsZSxyLG4saSxvKXtmb3IodmFyIHM9MDtzPHI7cysrKXt2YXIgYT10W2Urc10ucm90YXRpb247bltvXT1hLG5bbytpXT1hLG5bbysyKmldPWEsbltvKzMqaV09YSxvKz00Kml9fSxlLnByb3RvdHlwZS51cGxvYWRVdnM9ZnVuY3Rpb24odCxlLHIsbixpLG8pe2Zvcih2YXIgcz0wO3M8cjsrK3Mpe3ZhciBhPXRbZStzXS5fdGV4dHVyZS5fdXZzO2E/KG5bb109YS54MCxuW28rMV09YS55MCxuW28raV09YS54MSxuW28raSsxXT1hLnkxLG5bbysyKmldPWEueDIsbltvKzIqaSsxXT1hLnkyLG5bbyszKmldPWEueDMsbltvKzMqaSsxXT1hLnkzLG8rPTQqaSk6KG5bb109MCxuW28rMV09MCxuW28raV09MCxuW28raSsxXT0wLG5bbysyKmldPTAsbltvKzIqaSsxXT0wLG5bbyszKmldPTAsbltvKzMqaSsxXT0wLG8rPTQqaSl9fSxlLnByb3RvdHlwZS51cGxvYWRUaW50PWZ1bmN0aW9uKHQsZSxyLG4saSxvKXtmb3IodmFyIHM9MDtzPHI7KytzKXt2YXIgYT10W2Urc10sdT1hLl90ZXh0dXJlLmJhc2VUZXh0dXJlLnByZW11bHRpcGxpZWRBbHBoYSxoPWEuYWxwaGEsbD1oPDEmJnU/KDAsZi5wcmVtdWx0aXBseVRpbnQpKGEuX3RpbnRSR0IsaCk6YS5fdGludFJHQisoMjU1Kmg8PDI0KTtuW29dPWwsbltvK2ldPWwsbltvKzIqaV09bCxuW28rMyppXT1sLG8rPTQqaX19LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcmVyLmdsJiZ0aGlzLnJlbmRlcmVyLmdsLmRlbGV0ZUJ1ZmZlcih0aGlzLmluZGV4QnVmZmVyKSx0LnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5zaGFkZXIuZGVzdHJveSgpLHRoaXMuaW5kaWNlcz1udWxsLHRoaXMudGVtcE1hdHJpeD1udWxsfSxlfSh1Lk9iamVjdFJlbmRlcmVyKTtyLmRlZmF1bHQ9cCx1LldlYkdMUmVuZGVyZXIucmVnaXN0ZXJQbHVnaW4oXCJwYXJ0aWNsZVwiLHApfSx7XCIuLi8uLi9jb3JlXCI6NjUsXCIuLi8uLi9jb3JlL3V0aWxzXCI6MTI1LFwiLi9QYXJ0aWNsZUJ1ZmZlclwiOjE3NSxcIi4vUGFydGljbGVTaGFkZXJcIjoxNzd9XSwxNzc6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gbyh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfXIuX19lc01vZHVsZT0hMDt2YXIgcz10KFwiLi4vLi4vY29yZS9TaGFkZXJcIiksYT1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KHMpLHU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShyKXtyZXR1cm4gbih0aGlzLGUpLGkodGhpcyx0LmNhbGwodGhpcyxyLFtcImF0dHJpYnV0ZSB2ZWMyIGFWZXJ0ZXhQb3NpdGlvbjtcIixcImF0dHJpYnV0ZSB2ZWMyIGFUZXh0dXJlQ29vcmQ7XCIsXCJhdHRyaWJ1dGUgdmVjNCBhQ29sb3I7XCIsXCJhdHRyaWJ1dGUgdmVjMiBhUG9zaXRpb25Db29yZDtcIixcImF0dHJpYnV0ZSBmbG9hdCBhUm90YXRpb247XCIsXCJ1bmlmb3JtIG1hdDMgcHJvamVjdGlvbk1hdHJpeDtcIixcInVuaWZvcm0gdmVjNCB1Q29sb3I7XCIsXCJ2YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcIixcInZhcnlpbmcgdmVjNCB2Q29sb3I7XCIsXCJ2b2lkIG1haW4odm9pZCl7XCIsXCIgICBmbG9hdCB4ID0gKGFWZXJ0ZXhQb3NpdGlvbi54KSAqIGNvcyhhUm90YXRpb24pIC0gKGFWZXJ0ZXhQb3NpdGlvbi55KSAqIHNpbihhUm90YXRpb24pO1wiLFwiICAgZmxvYXQgeSA9IChhVmVydGV4UG9zaXRpb24ueCkgKiBzaW4oYVJvdGF0aW9uKSArIChhVmVydGV4UG9zaXRpb24ueSkgKiBjb3MoYVJvdGF0aW9uKTtcIixcIiAgIHZlYzIgdiA9IHZlYzIoeCwgeSk7XCIsXCIgICB2ID0gdiArIGFQb3NpdGlvbkNvb3JkO1wiLFwiICAgZ2xfUG9zaXRpb24gPSB2ZWM0KChwcm9qZWN0aW9uTWF0cml4ICogdmVjMyh2LCAxLjApKS54eSwgMC4wLCAxLjApO1wiLFwiICAgdlRleHR1cmVDb29yZCA9IGFUZXh0dXJlQ29vcmQ7XCIsXCIgICB2Q29sb3IgPSBhQ29sb3IgKiB1Q29sb3I7XCIsXCJ9XCJdLmpvaW4oXCJcXG5cIiksW1widmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXCJ2YXJ5aW5nIHZlYzQgdkNvbG9yO1wiLFwidW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XCIsXCJ2b2lkIG1haW4odm9pZCl7XCIsXCIgIHZlYzQgY29sb3IgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZUZXh0dXJlQ29vcmQpICogdkNvbG9yO1wiLFwiICBnbF9GcmFnQ29sb3IgPSBjb2xvcjtcIixcIn1cIl0uam9pbihcIlxcblwiKSkpfXJldHVybiBvKGUsdCksZX0oYS5kZWZhdWx0KTtyLmRlZmF1bHQ9dX0se1wiLi4vLi4vY29yZS9TaGFkZXJcIjo0NH1dLDE3ODpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO01hdGguc2lnbnx8KE1hdGguc2lnbj1mdW5jdGlvbih0KXtyZXR1cm4gdD1OdW1iZXIodCksMD09PXR8fGlzTmFOKHQpP3Q6dD4wPzE6LTF9KX0se31dLDE3OTpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO051bWJlci5pc0ludGVnZXJ8fChOdW1iZXIuaXNJbnRlZ2VyPWZ1bmN0aW9uKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0JiZpc0Zpbml0ZSh0KSYmTWF0aC5mbG9vcih0KT09PXR9KX0se31dLDE4MDpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXQoXCJvYmplY3QtYXNzaWduXCIpLGk9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShuKTtPYmplY3QuYXNzaWdufHwoT2JqZWN0LmFzc2lnbj1pLmRlZmF1bHQpfSx7XCJvYmplY3QtYXNzaWduXCI6Nn1dLDE4MTpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO3QoXCIuL09iamVjdC5hc3NpZ25cIiksdChcIi4vcmVxdWVzdEFuaW1hdGlvbkZyYW1lXCIpLHQoXCIuL01hdGguc2lnblwiKSx0KFwiLi9OdW1iZXIuaXNJbnRlZ2VyXCIpLHdpbmRvdy5BcnJheUJ1ZmZlcnx8KHdpbmRvdy5BcnJheUJ1ZmZlcj1BcnJheSksd2luZG93LkZsb2F0MzJBcnJheXx8KHdpbmRvdy5GbG9hdDMyQXJyYXk9QXJyYXkpLHdpbmRvdy5VaW50MzJBcnJheXx8KHdpbmRvdy5VaW50MzJBcnJheT1BcnJheSksd2luZG93LlVpbnQxNkFycmF5fHwod2luZG93LlVpbnQxNkFycmF5PUFycmF5KX0se1wiLi9NYXRoLnNpZ25cIjoxNzgsXCIuL051bWJlci5pc0ludGVnZXJcIjoxNzksXCIuL09iamVjdC5hc3NpZ25cIjoxODAsXCIuL3JlcXVlc3RBbmltYXRpb25GcmFtZVwiOjE4Mn1dLDE4MjpbZnVuY3Rpb24odCxlLHIpeyhmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtpZihEYXRlLm5vdyYmRGF0ZS5wcm90b3R5cGUuZ2V0VGltZXx8KERhdGUubm93PWZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9KSwhdC5wZXJmb3JtYW5jZXx8IXQucGVyZm9ybWFuY2Uubm93KXt2YXIgZT1EYXRlLm5vdygpO3QucGVyZm9ybWFuY2V8fCh0LnBlcmZvcm1hbmNlPXt9KSx0LnBlcmZvcm1hbmNlLm5vdz1mdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdygpLWV9fWZvcih2YXIgcj1EYXRlLm5vdygpLG49W1wibXNcIixcIm1velwiLFwid2Via2l0XCIsXCJvXCJdLGk9MDtpPG4ubGVuZ3RoJiYhdC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7KytpKXt2YXIgbz1uW2ldO3QucmVxdWVzdEFuaW1hdGlvbkZyYW1lPXRbbytcIlJlcXVlc3RBbmltYXRpb25GcmFtZVwiXSx0LmNhbmNlbEFuaW1hdGlvbkZyYW1lPXRbbytcIkNhbmNlbEFuaW1hdGlvbkZyYW1lXCJdfHx0W28rXCJDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl19dC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fCh0LnJlcXVlc3RBbmltYXRpb25GcmFtZT1mdW5jdGlvbih0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IodCtcImlzIG5vdCBhIGZ1bmN0aW9uXCIpO3ZhciBlPURhdGUubm93KCksbj0xNityLWU7cmV0dXJuIG48MCYmKG49MCkscj1lLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtyPURhdGUubm93KCksdChwZXJmb3JtYW5jZS5ub3coKSl9LG4pfSksdC5jYW5jZWxBbmltYXRpb25GcmFtZXx8KHQuY2FuY2VsQW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24odCl7cmV0dXJuIGNsZWFyVGltZW91dCh0KX0pfSkuY2FsbCh0aGlzLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7fV0sMTgzOltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gaSh0LGUpe3ZhciByPSExO2lmKHQmJnQuX3RleHR1cmVzJiZ0Ll90ZXh0dXJlcy5sZW5ndGgpZm9yKHZhciBuPTA7bjx0Ll90ZXh0dXJlcy5sZW5ndGg7bisrKWlmKHQuX3RleHR1cmVzW25daW5zdGFuY2VvZiBkLlRleHR1cmUpe3ZhciBpPXQuX3RleHR1cmVzW25dLmJhc2VUZXh0dXJlOy0xPT09ZS5pbmRleE9mKGkpJiYoZS5wdXNoKGkpLHI9ITApfXJldHVybiByfWZ1bmN0aW9uIG8odCxlKXtyZXR1cm4gdCBpbnN0YW5jZW9mIGQuQmFzZVRleHR1cmUmJigtMT09PWUuaW5kZXhPZih0KSYmZS5wdXNoKHQpLCEwKX1mdW5jdGlvbiBzKHQsZSl7aWYodC5fdGV4dHVyZSYmdC5fdGV4dHVyZSBpbnN0YW5jZW9mIGQuVGV4dHVyZSl7dmFyIHI9dC5fdGV4dHVyZS5iYXNlVGV4dHVyZTtyZXR1cm4tMT09PWUuaW5kZXhPZihyKSYmZS5wdXNoKHIpLCEwfXJldHVybiExfWZ1bmN0aW9uIGEodCxlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIGQuVGV4dCYmKGUudXBkYXRlVGV4dCghMCksITApfWZ1bmN0aW9uIHUodCxlKXtpZihlIGluc3RhbmNlb2YgZC5UZXh0U3R5bGUpe3ZhciByPWUudG9Gb250U3RyaW5nKCk7cmV0dXJuIGQuVGV4dE1ldHJpY3MubWVhc3VyZUZvbnQociksITB9cmV0dXJuITF9ZnVuY3Rpb24gaCh0LGUpe2lmKHQgaW5zdGFuY2VvZiBkLlRleHQpey0xPT09ZS5pbmRleE9mKHQuc3R5bGUpJiZlLnB1c2godC5zdHlsZSksLTE9PT1lLmluZGV4T2YodCkmJmUucHVzaCh0KTt2YXIgcj10Ll90ZXh0dXJlLmJhc2VUZXh0dXJlO3JldHVybi0xPT09ZS5pbmRleE9mKHIpJiZlLnB1c2gociksITB9cmV0dXJuITF9ZnVuY3Rpb24gbCh0LGUpe3JldHVybiB0IGluc3RhbmNlb2YgZC5UZXh0U3R5bGUmJigtMT09PWUuaW5kZXhPZih0KSYmZS5wdXNoKHQpLCEwKX1yLl9fZXNNb2R1bGU9ITA7dmFyIGM9dChcIi4uL2NvcmVcIiksZD1mdW5jdGlvbih0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9e307aWYobnVsbCE9dClmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSk7cmV0dXJuIGUuZGVmYXVsdD10LGV9KGMpLGY9dChcIi4vbGltaXRlcnMvQ291bnRMaW1pdGVyXCIpLHA9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShmKSx2PWQudGlja2VyLnNoYXJlZDtkLnNldHRpbmdzLlVQTE9BRFNfUEVSX0ZSQU1FPTQ7dmFyIGc9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3ZhciByPXRoaXM7bih0aGlzLHQpLHRoaXMubGltaXRlcj1uZXcgcC5kZWZhdWx0KGQuc2V0dGluZ3MuVVBMT0FEU19QRVJfRlJBTUUpLHRoaXMucmVuZGVyZXI9ZSx0aGlzLnVwbG9hZEhvb2tIZWxwZXI9bnVsbCx0aGlzLnF1ZXVlPVtdLHRoaXMuYWRkSG9va3M9W10sdGhpcy51cGxvYWRIb29rcz1bXSx0aGlzLmNvbXBsZXRlcz1bXSx0aGlzLnRpY2tpbmc9ITEsdGhpcy5kZWxheWVkVGljaz1mdW5jdGlvbigpe3IucXVldWUmJnIucHJlcGFyZUl0ZW1zKCl9LHRoaXMucmVnaXN0ZXJGaW5kSG9vayhoKSx0aGlzLnJlZ2lzdGVyRmluZEhvb2sobCksdGhpcy5yZWdpc3RlckZpbmRIb29rKGkpLHRoaXMucmVnaXN0ZXJGaW5kSG9vayhvKSx0aGlzLnJlZ2lzdGVyRmluZEhvb2socyksdGhpcy5yZWdpc3RlclVwbG9hZEhvb2soYSksdGhpcy5yZWdpc3RlclVwbG9hZEhvb2sodSl9cmV0dXJuIHQucHJvdG90eXBlLnVwbG9hZD1mdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIHQmJihlPXQsdD1udWxsKSx0JiZ0aGlzLmFkZCh0KSx0aGlzLnF1ZXVlLmxlbmd0aD8oZSYmdGhpcy5jb21wbGV0ZXMucHVzaChlKSx0aGlzLnRpY2tpbmd8fCh0aGlzLnRpY2tpbmc9ITAsdi5hZGRPbmNlKHRoaXMudGljayx0aGlzLGQuVVBEQVRFX1BSSU9SSVRZLlVUSUxJVFkpKSk6ZSYmZSgpfSx0LnByb3RvdHlwZS50aWNrPWZ1bmN0aW9uKCl7c2V0VGltZW91dCh0aGlzLmRlbGF5ZWRUaWNrLDApfSx0LnByb3RvdHlwZS5wcmVwYXJlSXRlbXM9ZnVuY3Rpb24oKXtmb3IodGhpcy5saW1pdGVyLmJlZ2luRnJhbWUoKTt0aGlzLnF1ZXVlLmxlbmd0aCYmdGhpcy5saW1pdGVyLmFsbG93ZWRUb1VwbG9hZCgpOyl7dmFyIHQ9dGhpcy5xdWV1ZVswXSxlPSExO2lmKHQmJiF0Ll9kZXN0cm95ZWQpZm9yKHZhciByPTAsbj10aGlzLnVwbG9hZEhvb2tzLmxlbmd0aDtyPG47cisrKWlmKHRoaXMudXBsb2FkSG9va3Nbcl0odGhpcy51cGxvYWRIb29rSGVscGVyLHQpKXt0aGlzLnF1ZXVlLnNoaWZ0KCksZT0hMDticmVha31lfHx0aGlzLnF1ZXVlLnNoaWZ0KCl9aWYodGhpcy5xdWV1ZS5sZW5ndGgpdi5hZGRPbmNlKHRoaXMudGljayx0aGlzLGQuVVBEQVRFX1BSSU9SSVRZLlVUSUxJVFkpO2Vsc2V7dGhpcy50aWNraW5nPSExO3ZhciBpPXRoaXMuY29tcGxldGVzLnNsaWNlKDApO3RoaXMuY29tcGxldGVzLmxlbmd0aD0wO2Zvcih2YXIgbz0wLHM9aS5sZW5ndGg7bzxzO28rKylpW29dKCl9fSx0LnByb3RvdHlwZS5yZWdpc3RlckZpbmRIb29rPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0aGlzLmFkZEhvb2tzLnB1c2godCksdGhpc30sdC5wcm90b3R5cGUucmVnaXN0ZXJVcGxvYWRIb29rPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0aGlzLnVwbG9hZEhvb2tzLnB1c2godCksdGhpc30sdC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLHI9dGhpcy5hZGRIb29rcy5sZW5ndGg7ZTxyJiYhdGhpcy5hZGRIb29rc1tlXSh0LHRoaXMucXVldWUpO2UrKyk7aWYodCBpbnN0YW5jZW9mIGQuQ29udGFpbmVyKWZvcih2YXIgbj10LmNoaWxkcmVuLmxlbmd0aC0xO24+PTA7bi0tKXRoaXMuYWRkKHQuY2hpbGRyZW5bbl0pO3JldHVybiB0aGlzfSx0LnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy50aWNraW5nJiZ2LnJlbW92ZSh0aGlzLnRpY2ssdGhpcyksdGhpcy50aWNraW5nPSExLHRoaXMuYWRkSG9va3M9bnVsbCx0aGlzLnVwbG9hZEhvb2tzPW51bGwsdGhpcy5yZW5kZXJlcj1udWxsLHRoaXMuY29tcGxldGVzPW51bGwsdGhpcy5xdWV1ZT1udWxsLHRoaXMubGltaXRlcj1udWxsLHRoaXMudXBsb2FkSG9va0hlbHBlcj1udWxsfSx0fSgpO3IuZGVmYXVsdD1nfSx7XCIuLi9jb3JlXCI6NjUsXCIuL2xpbWl0ZXJzL0NvdW50TGltaXRlclwiOjE4Nn1dLDE4NDpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkodCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBvKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9ZnVuY3Rpb24gcyh0LGUpe2lmKGUgaW5zdGFuY2VvZiB1LkJhc2VUZXh0dXJlKXt2YXIgcj1lLnNvdXJjZSxuPTA9PT1yLndpZHRoP3QuY2FudmFzLndpZHRoOk1hdGgubWluKHQuY2FudmFzLndpZHRoLHIud2lkdGgpLGk9MD09PXIuaGVpZ2h0P3QuY2FudmFzLmhlaWdodDpNYXRoLm1pbih0LmNhbnZhcy5oZWlnaHQsci5oZWlnaHQpO3JldHVybiB0LmN0eC5kcmF3SW1hZ2UociwwLDAsbixpLDAsMCx0LmNhbnZhcy53aWR0aCx0LmNhbnZhcy5oZWlnaHQpLCEwfXJldHVybiExfXIuX19lc01vZHVsZT0hMDt2YXIgYT10KFwiLi4vLi4vY29yZVwiKSx1PWZ1bmN0aW9uKHQpe2lmKHQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT17fTtpZihudWxsIT10KWZvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKTtyZXR1cm4gZS5kZWZhdWx0PXQsZX0oYSksaD10KFwiLi4vQmFzZVByZXBhcmVcIiksbD1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KGgpLGM9MTYsZD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHIpe24odGhpcyxlKTt2YXIgbz1pKHRoaXMsdC5jYWxsKHRoaXMscikpO3JldHVybiBvLnVwbG9hZEhvb2tIZWxwZXI9byxvLmNhbnZhcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLG8uY2FudmFzLndpZHRoPWMsby5jYW52YXMuaGVpZ2h0PWMsby5jdHg9by5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLG8ucmVnaXN0ZXJVcGxvYWRIb29rKHMpLG99cmV0dXJuIG8oZSx0KSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dC5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMuY3R4PW51bGwsdGhpcy5jYW52YXM9bnVsbH0sZX0obC5kZWZhdWx0KTtyLmRlZmF1bHQ9ZCx1LkNhbnZhc1JlbmRlcmVyLnJlZ2lzdGVyUGx1Z2luKFwicHJlcGFyZVwiLGQpfSx7XCIuLi8uLi9jb3JlXCI6NjUsXCIuLi9CYXNlUHJlcGFyZVwiOjE4M31dLDE4NTpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fXIuX19lc01vZHVsZT0hMDt2YXIgaT10KFwiLi93ZWJnbC9XZWJHTFByZXBhcmVcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJ3ZWJnbFwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBuKGkpLmRlZmF1bHR9fSk7dmFyIG89dChcIi4vY2FudmFzL0NhbnZhc1ByZXBhcmVcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJjYW52YXNcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihvKS5kZWZhdWx0fX0pO3ZhciBzPXQoXCIuL0Jhc2VQcmVwYXJlXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiQmFzZVByZXBhcmVcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbihzKS5kZWZhdWx0fX0pO3ZhciBhPXQoXCIuL2xpbWl0ZXJzL0NvdW50TGltaXRlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkNvdW50TGltaXRlclwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBuKGEpLmRlZmF1bHR9fSk7dmFyIHU9dChcIi4vbGltaXRlcnMvVGltZUxpbWl0ZXJcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJUaW1lTGltaXRlclwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBuKHUpLmRlZmF1bHR9fSl9LHtcIi4vQmFzZVByZXBhcmVcIjoxODMsXCIuL2NhbnZhcy9DYW52YXNQcmVwYXJlXCI6MTg0LFwiLi9saW1pdGVycy9Db3VudExpbWl0ZXJcIjoxODYsXCIuL2xpbWl0ZXJzL1RpbWVMaW1pdGVyXCI6MTg3LFwiLi93ZWJnbC9XZWJHTFByZXBhcmVcIjoxODh9XSwxODY6W2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1yLl9fZXNNb2R1bGU9ITA7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe24odGhpcyx0KSx0aGlzLm1heEl0ZW1zUGVyRnJhbWU9ZSx0aGlzLml0ZW1zTGVmdD0wfXJldHVybiB0LnByb3RvdHlwZS5iZWdpbkZyYW1lPWZ1bmN0aW9uKCl7dGhpcy5pdGVtc0xlZnQ9dGhpcy5tYXhJdGVtc1BlckZyYW1lfSx0LnByb3RvdHlwZS5hbGxvd2VkVG9VcGxvYWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVtc0xlZnQtLSA+MH0sdH0oKTtyLmRlZmF1bHQ9aX0se31dLDE4NzpbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfXIuX19lc01vZHVsZT0hMDt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7bih0aGlzLHQpLHRoaXMubWF4TWlsbGlzZWNvbmRzPWUsdGhpcy5mcmFtZVN0YXJ0PTB9cmV0dXJuIHQucHJvdG90eXBlLmJlZ2luRnJhbWU9ZnVuY3Rpb24oKXt0aGlzLmZyYW1lU3RhcnQ9RGF0ZS5ub3coKX0sdC5wcm90b3R5cGUuYWxsb3dlZFRvVXBsb2FkPWZ1bmN0aW9uKCl7cmV0dXJuIERhdGUubm93KCktdGhpcy5mcmFtZVN0YXJ0PHRoaXMubWF4TWlsbGlzZWNvbmRzfSx0fSgpO3IuZGVmYXVsdD1pfSx7fV0sMTg4OltmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gaSh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIG8odCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1mdW5jdGlvbiBzKHQsZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBsLkJhc2VUZXh0dXJlJiYoZS5fZ2xUZXh0dXJlc1t0LkNPTlRFWFRfVUlEXXx8dC50ZXh0dXJlTWFuYWdlci51cGRhdGVUZXh0dXJlKGUpLCEwKX1mdW5jdGlvbiBhKHQsZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBsLkdyYXBoaWNzJiYoKGUuZGlydHl8fGUuY2xlYXJEaXJ0eXx8IWUuX3dlYkdMW3QucGx1Z2lucy5ncmFwaGljcy5DT05URVhUX1VJRF0pJiZ0LnBsdWdpbnMuZ3JhcGhpY3MudXBkYXRlR3JhcGhpY3MoZSksITApfWZ1bmN0aW9uIHUodCxlKXtyZXR1cm4gdCBpbnN0YW5jZW9mIGwuR3JhcGhpY3MmJihlLnB1c2godCksITApfXIuX19lc01vZHVsZT0hMDt2YXIgaD10KFwiLi4vLi4vY29yZVwiKSxsPWZ1bmN0aW9uKHQpe2lmKHQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT17fTtpZihudWxsIT10KWZvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKTtyZXR1cm4gZS5kZWZhdWx0PXQsZX0oaCksYz10KFwiLi4vQmFzZVByZXBhcmVcIiksZD1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KGMpLGY9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShyKXtuKHRoaXMsZSk7dmFyIG89aSh0aGlzLHQuY2FsbCh0aGlzLHIpKTtyZXR1cm4gby51cGxvYWRIb29rSGVscGVyPW8ucmVuZGVyZXIsby5yZWdpc3RlckZpbmRIb29rKHUpLG8ucmVnaXN0ZXJVcGxvYWRIb29rKHMpLG8ucmVnaXN0ZXJVcGxvYWRIb29rKGEpLG99cmV0dXJuIG8oZSx0KSxlfShkLmRlZmF1bHQpO3IuZGVmYXVsdD1mLGwuV2ViR0xSZW5kZXJlci5yZWdpc3RlclBsdWdpbihcInByZXBhcmVcIixmKX0se1wiLi4vLi4vY29yZVwiOjY1LFwiLi4vQmFzZVByZXBhcmVcIjoxODN9XSwxODk6W2Z1bmN0aW9uKHQsZSxyKXsoZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9e307aWYobnVsbCE9dClmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSk7cmV0dXJuIGUuZGVmYXVsdD10LGV9ci5fX2VzTW9kdWxlPSEwLHIubG9hZGVyPXIucHJlcGFyZT1yLnBhcnRpY2xlcz1yLm1lc2g9ci5sb2FkZXJzPXIuaW50ZXJhY3Rpb249ci5maWx0ZXJzPXIuZXh0cmFzPXIuZXh0cmFjdD1yLmFjY2Vzc2liaWxpdHk9dm9pZCAwO3ZhciBpPXQoXCIuL3BvbHlmaWxsXCIpO09iamVjdC5rZXlzKGkpLmZvckVhY2goZnVuY3Rpb24odCl7XCJkZWZhdWx0XCIhPT10JiZcIl9fZXNNb2R1bGVcIiE9PXQmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLHQse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGlbdF19fSl9KTt2YXIgbz10KFwiLi9jb3JlXCIpO09iamVjdC5rZXlzKG8pLmZvckVhY2goZnVuY3Rpb24odCl7XCJkZWZhdWx0XCIhPT10JiZcIl9fZXNNb2R1bGVcIiE9PXQmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLHQse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG9bdF19fSl9KTt2YXIgcz10KFwiLi9kZXByZWNhdGlvblwiKSxhPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0ocyksdT10KFwiLi9hY2Nlc3NpYmlsaXR5XCIpLGg9bih1KSxsPXQoXCIuL2V4dHJhY3RcIiksYz1uKGwpLGQ9dChcIi4vZXh0cmFzXCIpLGY9bihkKSxwPXQoXCIuL2ZpbHRlcnNcIiksdj1uKHApLGc9dChcIi4vaW50ZXJhY3Rpb25cIikseT1uKGcpLG09dChcIi4vbG9hZGVyc1wiKSxfPW4obSksYj10KFwiLi9tZXNoXCIpLHg9bihiKSxUPXQoXCIuL3BhcnRpY2xlc1wiKSx3PW4oVCksRT10KFwiLi9wcmVwYXJlXCIpLFM9bihFKTtvLnV0aWxzLm1peGlucy5wZXJmb3JtTWl4aW5zKCk7dmFyIE89Xy5zaGFyZWR8fG51bGw7ci5hY2Nlc3NpYmlsaXR5PWgsci5leHRyYWN0PWMsci5leHRyYXM9ZixyLmZpbHRlcnM9dixyLmludGVyYWN0aW9uPXksci5sb2FkZXJzPV8sci5tZXNoPXgsci5wYXJ0aWNsZXM9dyxyLnByZXBhcmU9UyxyLmxvYWRlcj1PLFwiZnVuY3Rpb25cIj09dHlwZW9mIGEuZGVmYXVsdCYmKDAsYS5kZWZhdWx0KShyKSxlLlBJWEk9cn0pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se1wiLi9hY2Nlc3NpYmlsaXR5XCI6NDIsXCIuL2NvcmVcIjo2NSxcIi4vZGVwcmVjYXRpb25cIjoxMzEsXCIuL2V4dHJhY3RcIjoxMzMsXCIuL2V4dHJhc1wiOjE0MSxcIi4vZmlsdGVyc1wiOjE1MyxcIi4vaW50ZXJhY3Rpb25cIjoxNTksXCIuL2xvYWRlcnNcIjoxNjIsXCIuL21lc2hcIjoxNzEsXCIuL3BhcnRpY2xlc1wiOjE3NCxcIi4vcG9seWZpbGxcIjoxODEsXCIuL3ByZXBhcmVcIjoxODV9XX0se30sWzE4OV0pKDE4OSl9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBpeGkubWluLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5pZiAoIXByb2Nlc3MudmVyc2lvbiB8fFxuICAgIHByb2Nlc3MudmVyc2lvbi5pbmRleE9mKCd2MC4nKSA9PT0gMCB8fFxuICAgIHByb2Nlc3MudmVyc2lvbi5pbmRleE9mKCd2MS4nKSA9PT0gMCAmJiBwcm9jZXNzLnZlcnNpb24uaW5kZXhPZigndjEuOC4nKSAhPT0gMCkge1xuICBtb2R1bGUuZXhwb3J0cyA9IHsgbmV4dFRpY2s6IG5leHRUaWNrIH07XG59IGVsc2Uge1xuICBtb2R1bGUuZXhwb3J0cyA9IHByb2Nlc3Ncbn1cblxuZnVuY3Rpb24gbmV4dFRpY2soZm4sIGFyZzEsIGFyZzIsIGFyZzMpIHtcbiAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiY2FsbGJhY2tcIiBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgfVxuICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgdmFyIGFyZ3MsIGk7XG4gIHN3aXRjaCAobGVuKSB7XG4gIGNhc2UgMDpcbiAgY2FzZSAxOlxuICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZuKTtcbiAgY2FzZSAyOlxuICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uIGFmdGVyVGlja09uZSgpIHtcbiAgICAgIGZuLmNhbGwobnVsbCwgYXJnMSk7XG4gICAgfSk7XG4gIGNhc2UgMzpcbiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiBhZnRlclRpY2tUd28oKSB7XG4gICAgICBmbi5jYWxsKG51bGwsIGFyZzEsIGFyZzIpO1xuICAgIH0pO1xuICBjYXNlIDQ6XG4gICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gYWZ0ZXJUaWNrVGhyZWUoKSB7XG4gICAgICBmbi5jYWxsKG51bGwsIGFyZzEsIGFyZzIsIGFyZzMpO1xuICAgIH0pO1xuICBkZWZhdWx0OlxuICAgIGFyZ3MgPSBuZXcgQXJyYXkobGVuIC0gMSk7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBhcmdzLmxlbmd0aCkge1xuICAgICAgYXJnc1tpKytdID0gYXJndW1lbnRzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiBhZnRlclRpY2soKSB7XG4gICAgICBmbi5hcHBseShudWxsLCBhcmdzKTtcbiAgICB9KTtcbiAgfVxufVxuXG4iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiJ3VzZSBzdHJpY3QnXG5cbmZ1bmN0aW9uIG9sZEJyb3dzZXIgKCkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ1NlY3VyZSByYW5kb20gbnVtYmVyIGdlbmVyYXRpb24gaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIGJyb3dzZXIuXFxuVXNlIENocm9tZSwgRmlyZWZveCBvciBJbnRlcm5ldCBFeHBsb3JlciAxMScpXG59XG5cbnZhciBCdWZmZXIgPSByZXF1aXJlKCdzYWZlLWJ1ZmZlcicpLkJ1ZmZlclxudmFyIGNyeXB0byA9IGdsb2JhbC5jcnlwdG8gfHwgZ2xvYmFsLm1zQ3J5cHRvXG5cbmlmIChjcnlwdG8gJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcykge1xuICBtb2R1bGUuZXhwb3J0cyA9IHJhbmRvbUJ5dGVzXG59IGVsc2Uge1xuICBtb2R1bGUuZXhwb3J0cyA9IG9sZEJyb3dzZXJcbn1cblxuZnVuY3Rpb24gcmFuZG9tQnl0ZXMgKHNpemUsIGNiKSB7XG4gIC8vIHBoYW50b21qcyBuZWVkcyB0byB0aHJvd1xuICBpZiAoc2l6ZSA+IDY1NTM2KSB0aHJvdyBuZXcgRXJyb3IoJ3JlcXVlc3RlZCB0b28gbWFueSByYW5kb20gYnl0ZXMnKVxuICAvLyBpbiBjYXNlIGJyb3dzZXJpZnkgIGlzbid0IHVzaW5nIHRoZSBVaW50OEFycmF5IHZlcnNpb25cbiAgdmFyIHJhd0J5dGVzID0gbmV3IGdsb2JhbC5VaW50OEFycmF5KHNpemUpXG5cbiAgLy8gVGhpcyB3aWxsIG5vdCB3b3JrIGluIG9sZGVyIGJyb3dzZXJzLlxuICAvLyBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL3dpbmRvdy5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzXG4gIGlmIChzaXplID4gMCkgeyAgLy8gZ2V0UmFuZG9tVmFsdWVzIGZhaWxzIG9uIElFIGlmIHNpemUgPT0gMFxuICAgIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMocmF3Qnl0ZXMpXG4gIH1cblxuICAvLyBYWFg6IHBoYW50b21qcyBkb2Vzbid0IGxpa2UgYSBidWZmZXIgYmVpbmcgcGFzc2VkIGhlcmVcbiAgdmFyIGJ5dGVzID0gQnVmZmVyLmZyb20ocmF3Qnl0ZXMuYnVmZmVyKVxuXG4gIGlmICh0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICBjYihudWxsLCBieXRlcylcbiAgICB9KVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVzXG59XG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuLy8gYSBkdXBsZXggc3RyZWFtIGlzIGp1c3QgYSBzdHJlYW0gdGhhdCBpcyBib3RoIHJlYWRhYmxlIGFuZCB3cml0YWJsZS5cbi8vIFNpbmNlIEpTIGRvZXNuJ3QgaGF2ZSBtdWx0aXBsZSBwcm90b3R5cGFsIGluaGVyaXRhbmNlLCB0aGlzIGNsYXNzXG4vLyBwcm90b3R5cGFsbHkgaW5oZXJpdHMgZnJvbSBSZWFkYWJsZSwgYW5kIHRoZW4gcGFyYXNpdGljYWxseSBmcm9tXG4vLyBXcml0YWJsZS5cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xuXG52YXIgcG5hID0gcmVxdWlyZSgncHJvY2Vzcy1uZXh0aWNrLWFyZ3MnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiAob2JqKSB7XG4gIHZhciBrZXlzID0gW107XG4gIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICBrZXlzLnB1c2goa2V5KTtcbiAgfXJldHVybiBrZXlzO1xufTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5tb2R1bGUuZXhwb3J0cyA9IER1cGxleDtcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7XG51dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG52YXIgUmVhZGFibGUgPSByZXF1aXJlKCcuL19zdHJlYW1fcmVhZGFibGUnKTtcbnZhciBXcml0YWJsZSA9IHJlcXVpcmUoJy4vX3N0cmVhbV93cml0YWJsZScpO1xuXG51dGlsLmluaGVyaXRzKER1cGxleCwgUmVhZGFibGUpO1xuXG57XG4gIC8vIGF2b2lkIHNjb3BlIGNyZWVwLCB0aGUga2V5cyBhcnJheSBjYW4gdGhlbiBiZSBjb2xsZWN0ZWRcbiAgdmFyIGtleXMgPSBvYmplY3RLZXlzKFdyaXRhYmxlLnByb3RvdHlwZSk7XG4gIGZvciAodmFyIHYgPSAwOyB2IDwga2V5cy5sZW5ndGg7IHYrKykge1xuICAgIHZhciBtZXRob2QgPSBrZXlzW3ZdO1xuICAgIGlmICghRHVwbGV4LnByb3RvdHlwZVttZXRob2RdKSBEdXBsZXgucHJvdG90eXBlW21ldGhvZF0gPSBXcml0YWJsZS5wcm90b3R5cGVbbWV0aG9kXTtcbiAgfVxufVxuXG5mdW5jdGlvbiBEdXBsZXgob3B0aW9ucykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRHVwbGV4KSkgcmV0dXJuIG5ldyBEdXBsZXgob3B0aW9ucyk7XG5cbiAgUmVhZGFibGUuY2FsbCh0aGlzLCBvcHRpb25zKTtcbiAgV3JpdGFibGUuY2FsbCh0aGlzLCBvcHRpb25zKTtcblxuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnJlYWRhYmxlID09PSBmYWxzZSkgdGhpcy5yZWFkYWJsZSA9IGZhbHNlO1xuXG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMud3JpdGFibGUgPT09IGZhbHNlKSB0aGlzLndyaXRhYmxlID0gZmFsc2U7XG5cbiAgdGhpcy5hbGxvd0hhbGZPcGVuID0gdHJ1ZTtcbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5hbGxvd0hhbGZPcGVuID09PSBmYWxzZSkgdGhpcy5hbGxvd0hhbGZPcGVuID0gZmFsc2U7XG5cbiAgdGhpcy5vbmNlKCdlbmQnLCBvbmVuZCk7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShEdXBsZXgucHJvdG90eXBlLCAnd3JpdGFibGVIaWdoV2F0ZXJNYXJrJywge1xuICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZVxuICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW5cbiAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsXG4gIGVudW1lcmFibGU6IGZhbHNlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZS5oaWdoV2F0ZXJNYXJrO1xuICB9XG59KTtcblxuLy8gdGhlIG5vLWhhbGYtb3BlbiBlbmZvcmNlclxuZnVuY3Rpb24gb25lbmQoKSB7XG4gIC8vIGlmIHdlIGFsbG93IGhhbGYtb3BlbiBzdGF0ZSwgb3IgaWYgdGhlIHdyaXRhYmxlIHNpZGUgZW5kZWQsXG4gIC8vIHRoZW4gd2UncmUgb2suXG4gIGlmICh0aGlzLmFsbG93SGFsZk9wZW4gfHwgdGhpcy5fd3JpdGFibGVTdGF0ZS5lbmRlZCkgcmV0dXJuO1xuXG4gIC8vIG5vIG1vcmUgZGF0YSBjYW4gYmUgd3JpdHRlbi5cbiAgLy8gQnV0IGFsbG93IG1vcmUgd3JpdGVzIHRvIGhhcHBlbiBpbiB0aGlzIHRpY2suXG4gIHBuYS5uZXh0VGljayhvbkVuZE5ULCB0aGlzKTtcbn1cblxuZnVuY3Rpb24gb25FbmROVChzZWxmKSB7XG4gIHNlbGYuZW5kKCk7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShEdXBsZXgucHJvdG90eXBlLCAnZGVzdHJveWVkJywge1xuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX3dyaXRhYmxlU3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQgJiYgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQ7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgLy8gd2UgaWdub3JlIHRoZSB2YWx1ZSBpZiB0aGUgc3RyZWFtXG4gICAgLy8gaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkIHlldFxuICAgIGlmICh0aGlzLl9yZWFkYWJsZVN0YXRlID09PSB1bmRlZmluZWQgfHwgdGhpcy5fd3JpdGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgdGhlIHVzZXIgaXMgZXhwbGljaXRseVxuICAgIC8vIG1hbmFnaW5nIGRlc3Ryb3llZFxuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkID0gdmFsdWU7XG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQgPSB2YWx1ZTtcbiAgfVxufSk7XG5cbkR1cGxleC5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoZXJyLCBjYikge1xuICB0aGlzLnB1c2gobnVsbCk7XG4gIHRoaXMuZW5kKCk7XG5cbiAgcG5hLm5leHRUaWNrKGNiLCBlcnIpO1xufTsiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuLy8gYSBwYXNzdGhyb3VnaCBzdHJlYW0uXG4vLyBiYXNpY2FsbHkganVzdCB0aGUgbW9zdCBtaW5pbWFsIHNvcnQgb2YgVHJhbnNmb3JtIHN0cmVhbS5cbi8vIEV2ZXJ5IHdyaXR0ZW4gY2h1bmsgZ2V0cyBvdXRwdXQgYXMtaXMuXG5cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBQYXNzVGhyb3VnaDtcblxudmFyIFRyYW5zZm9ybSA9IHJlcXVpcmUoJy4vX3N0cmVhbV90cmFuc2Zvcm0nKTtcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7XG51dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG51dGlsLmluaGVyaXRzKFBhc3NUaHJvdWdoLCBUcmFuc2Zvcm0pO1xuXG5mdW5jdGlvbiBQYXNzVGhyb3VnaChvcHRpb25zKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBQYXNzVGhyb3VnaCkpIHJldHVybiBuZXcgUGFzc1Rocm91Z2gob3B0aW9ucyk7XG5cbiAgVHJhbnNmb3JtLmNhbGwodGhpcywgb3B0aW9ucyk7XG59XG5cblBhc3NUaHJvdWdoLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgY2IobnVsbCwgY2h1bmspO1xufTsiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xuXG52YXIgcG5hID0gcmVxdWlyZSgncHJvY2Vzcy1uZXh0aWNrLWFyZ3MnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWRhYmxlO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdpc2FycmF5Jyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciBEdXBsZXg7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuUmVhZGFibGUuUmVhZGFibGVTdGF0ZSA9IFJlYWRhYmxlU3RhdGU7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgRUUgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7XG5cbnZhciBFRWxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbiAoZW1pdHRlciwgdHlwZSkge1xuICByZXR1cm4gZW1pdHRlci5saXN0ZW5lcnModHlwZSkubGVuZ3RoO1xufTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIFN0cmVhbSA9IHJlcXVpcmUoJy4vaW50ZXJuYWwvc3RyZWFtcy9zdHJlYW0nKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xuXG52YXIgQnVmZmVyID0gcmVxdWlyZSgnc2FmZS1idWZmZXInKS5CdWZmZXI7XG52YXIgT3VyVWludDhBcnJheSA9IGdsb2JhbC5VaW50OEFycmF5IHx8IGZ1bmN0aW9uICgpIHt9O1xuZnVuY3Rpb24gX3VpbnQ4QXJyYXlUb0J1ZmZlcihjaHVuaykge1xuICByZXR1cm4gQnVmZmVyLmZyb20oY2h1bmspO1xufVxuZnVuY3Rpb24gX2lzVWludDhBcnJheShvYmopIHtcbiAgcmV0dXJuIEJ1ZmZlci5pc0J1ZmZlcihvYmopIHx8IG9iaiBpbnN0YW5jZW9mIE91clVpbnQ4QXJyYXk7XG59XG5cbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIHV0aWwgPSByZXF1aXJlKCdjb3JlLXV0aWwtaXMnKTtcbnV0aWwuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgZGVidWdVdGlsID0gcmVxdWlyZSgndXRpbCcpO1xudmFyIGRlYnVnID0gdm9pZCAwO1xuaWYgKGRlYnVnVXRpbCAmJiBkZWJ1Z1V0aWwuZGVidWdsb2cpIHtcbiAgZGVidWcgPSBkZWJ1Z1V0aWwuZGVidWdsb2coJ3N0cmVhbScpO1xufSBlbHNlIHtcbiAgZGVidWcgPSBmdW5jdGlvbiAoKSB7fTtcbn1cbi8qPC9yZXBsYWNlbWVudD4qL1xuXG52YXIgQnVmZmVyTGlzdCA9IHJlcXVpcmUoJy4vaW50ZXJuYWwvc3RyZWFtcy9CdWZmZXJMaXN0Jyk7XG52YXIgZGVzdHJveUltcGwgPSByZXF1aXJlKCcuL2ludGVybmFsL3N0cmVhbXMvZGVzdHJveScpO1xudmFyIFN0cmluZ0RlY29kZXI7XG5cbnV0aWwuaW5oZXJpdHMoUmVhZGFibGUsIFN0cmVhbSk7XG5cbnZhciBrUHJveHlFdmVudHMgPSBbJ2Vycm9yJywgJ2Nsb3NlJywgJ2Rlc3Ryb3knLCAncGF1c2UnLCAncmVzdW1lJ107XG5cbmZ1bmN0aW9uIHByZXBlbmRMaXN0ZW5lcihlbWl0dGVyLCBldmVudCwgZm4pIHtcbiAgLy8gU2FkbHkgdGhpcyBpcyBub3QgY2FjaGVhYmxlIGFzIHNvbWUgbGlicmFyaWVzIGJ1bmRsZSB0aGVpciBvd25cbiAgLy8gZXZlbnQgZW1pdHRlciBpbXBsZW1lbnRhdGlvbiB3aXRoIHRoZW0uXG4gIGlmICh0eXBlb2YgZW1pdHRlci5wcmVwZW5kTGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHJldHVybiBlbWl0dGVyLnByZXBlbmRMaXN0ZW5lcihldmVudCwgZm4pO1xuXG4gIC8vIFRoaXMgaXMgYSBoYWNrIHRvIG1ha2Ugc3VyZSB0aGF0IG91ciBlcnJvciBoYW5kbGVyIGlzIGF0dGFjaGVkIGJlZm9yZSBhbnlcbiAgLy8gdXNlcmxhbmQgb25lcy4gIE5FVkVSIERPIFRISVMuIFRoaXMgaXMgaGVyZSBvbmx5IGJlY2F1c2UgdGhpcyBjb2RlIG5lZWRzXG4gIC8vIHRvIGNvbnRpbnVlIHRvIHdvcmsgd2l0aCBvbGRlciB2ZXJzaW9ucyBvZiBOb2RlLmpzIHRoYXQgZG8gbm90IGluY2x1ZGVcbiAgLy8gdGhlIHByZXBlbmRMaXN0ZW5lcigpIG1ldGhvZC4gVGhlIGdvYWwgaXMgdG8gZXZlbnR1YWxseSByZW1vdmUgdGhpcyBoYWNrLlxuICBpZiAoIWVtaXR0ZXIuX2V2ZW50cyB8fCAhZW1pdHRlci5fZXZlbnRzW2V2ZW50XSkgZW1pdHRlci5vbihldmVudCwgZm4pO2Vsc2UgaWYgKGlzQXJyYXkoZW1pdHRlci5fZXZlbnRzW2V2ZW50XSkpIGVtaXR0ZXIuX2V2ZW50c1tldmVudF0udW5zaGlmdChmbik7ZWxzZSBlbWl0dGVyLl9ldmVudHNbZXZlbnRdID0gW2ZuLCBlbWl0dGVyLl9ldmVudHNbZXZlbnRdXTtcbn1cblxuZnVuY3Rpb24gUmVhZGFibGVTdGF0ZShvcHRpb25zLCBzdHJlYW0pIHtcbiAgRHVwbGV4ID0gRHVwbGV4IHx8IHJlcXVpcmUoJy4vX3N0cmVhbV9kdXBsZXgnKTtcblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAvLyBEdXBsZXggc3RyZWFtcyBhcmUgYm90aCByZWFkYWJsZSBhbmQgd3JpdGFibGUsIGJ1dCBzaGFyZVxuICAvLyB0aGUgc2FtZSBvcHRpb25zIG9iamVjdC5cbiAgLy8gSG93ZXZlciwgc29tZSBjYXNlcyByZXF1aXJlIHNldHRpbmcgb3B0aW9ucyB0byBkaWZmZXJlbnRcbiAgLy8gdmFsdWVzIGZvciB0aGUgcmVhZGFibGUgYW5kIHRoZSB3cml0YWJsZSBzaWRlcyBvZiB0aGUgZHVwbGV4IHN0cmVhbS5cbiAgLy8gVGhlc2Ugb3B0aW9ucyBjYW4gYmUgcHJvdmlkZWQgc2VwYXJhdGVseSBhcyByZWFkYWJsZVhYWCBhbmQgd3JpdGFibGVYWFguXG4gIHZhciBpc0R1cGxleCA9IHN0cmVhbSBpbnN0YW5jZW9mIER1cGxleDtcblxuICAvLyBvYmplY3Qgc3RyZWFtIGZsYWcuIFVzZWQgdG8gbWFrZSByZWFkKG4pIGlnbm9yZSBuIGFuZCB0b1xuICAvLyBtYWtlIGFsbCB0aGUgYnVmZmVyIG1lcmdpbmcgYW5kIGxlbmd0aCBjaGVja3MgZ28gYXdheVxuICB0aGlzLm9iamVjdE1vZGUgPSAhIW9wdGlvbnMub2JqZWN0TW9kZTtcblxuICBpZiAoaXNEdXBsZXgpIHRoaXMub2JqZWN0TW9kZSA9IHRoaXMub2JqZWN0TW9kZSB8fCAhIW9wdGlvbnMucmVhZGFibGVPYmplY3RNb2RlO1xuXG4gIC8vIHRoZSBwb2ludCBhdCB3aGljaCBpdCBzdG9wcyBjYWxsaW5nIF9yZWFkKCkgdG8gZmlsbCB0aGUgYnVmZmVyXG4gIC8vIE5vdGU6IDAgaXMgYSB2YWxpZCB2YWx1ZSwgbWVhbnMgXCJkb24ndCBjYWxsIF9yZWFkIHByZWVtcHRpdmVseSBldmVyXCJcbiAgdmFyIGh3bSA9IG9wdGlvbnMuaGlnaFdhdGVyTWFyaztcbiAgdmFyIHJlYWRhYmxlSHdtID0gb3B0aW9ucy5yZWFkYWJsZUhpZ2hXYXRlck1hcms7XG4gIHZhciBkZWZhdWx0SHdtID0gdGhpcy5vYmplY3RNb2RlID8gMTYgOiAxNiAqIDEwMjQ7XG5cbiAgaWYgKGh3bSB8fCBod20gPT09IDApIHRoaXMuaGlnaFdhdGVyTWFyayA9IGh3bTtlbHNlIGlmIChpc0R1cGxleCAmJiAocmVhZGFibGVId20gfHwgcmVhZGFibGVId20gPT09IDApKSB0aGlzLmhpZ2hXYXRlck1hcmsgPSByZWFkYWJsZUh3bTtlbHNlIHRoaXMuaGlnaFdhdGVyTWFyayA9IGRlZmF1bHRId207XG5cbiAgLy8gY2FzdCB0byBpbnRzLlxuICB0aGlzLmhpZ2hXYXRlck1hcmsgPSBNYXRoLmZsb29yKHRoaXMuaGlnaFdhdGVyTWFyayk7XG5cbiAgLy8gQSBsaW5rZWQgbGlzdCBpcyB1c2VkIHRvIHN0b3JlIGRhdGEgY2h1bmtzIGluc3RlYWQgb2YgYW4gYXJyYXkgYmVjYXVzZSB0aGVcbiAgLy8gbGlua2VkIGxpc3QgY2FuIHJlbW92ZSBlbGVtZW50cyBmcm9tIHRoZSBiZWdpbm5pbmcgZmFzdGVyIHRoYW5cbiAgLy8gYXJyYXkuc2hpZnQoKVxuICB0aGlzLmJ1ZmZlciA9IG5ldyBCdWZmZXJMaXN0KCk7XG4gIHRoaXMubGVuZ3RoID0gMDtcbiAgdGhpcy5waXBlcyA9IG51bGw7XG4gIHRoaXMucGlwZXNDb3VudCA9IDA7XG4gIHRoaXMuZmxvd2luZyA9IG51bGw7XG4gIHRoaXMuZW5kZWQgPSBmYWxzZTtcbiAgdGhpcy5lbmRFbWl0dGVkID0gZmFsc2U7XG4gIHRoaXMucmVhZGluZyA9IGZhbHNlO1xuXG4gIC8vIGEgZmxhZyB0byBiZSBhYmxlIHRvIHRlbGwgaWYgdGhlIGV2ZW50ICdyZWFkYWJsZScvJ2RhdGEnIGlzIGVtaXR0ZWRcbiAgLy8gaW1tZWRpYXRlbHksIG9yIG9uIGEgbGF0ZXIgdGljay4gIFdlIHNldCB0aGlzIHRvIHRydWUgYXQgZmlyc3QsIGJlY2F1c2VcbiAgLy8gYW55IGFjdGlvbnMgdGhhdCBzaG91bGRuJ3QgaGFwcGVuIHVudGlsIFwibGF0ZXJcIiBzaG91bGQgZ2VuZXJhbGx5IGFsc29cbiAgLy8gbm90IGhhcHBlbiBiZWZvcmUgdGhlIGZpcnN0IHJlYWQgY2FsbC5cbiAgdGhpcy5zeW5jID0gdHJ1ZTtcblxuICAvLyB3aGVuZXZlciB3ZSByZXR1cm4gbnVsbCwgdGhlbiB3ZSBzZXQgYSBmbGFnIHRvIHNheVxuICAvLyB0aGF0IHdlJ3JlIGF3YWl0aW5nIGEgJ3JlYWRhYmxlJyBldmVudCBlbWlzc2lvbi5cbiAgdGhpcy5uZWVkUmVhZGFibGUgPSBmYWxzZTtcbiAgdGhpcy5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTtcbiAgdGhpcy5yZWFkYWJsZUxpc3RlbmluZyA9IGZhbHNlO1xuICB0aGlzLnJlc3VtZVNjaGVkdWxlZCA9IGZhbHNlO1xuXG4gIC8vIGhhcyBpdCBiZWVuIGRlc3Ryb3llZFxuICB0aGlzLmRlc3Ryb3llZCA9IGZhbHNlO1xuXG4gIC8vIENyeXB0byBpcyBraW5kIG9mIG9sZCBhbmQgY3J1c3R5LiAgSGlzdG9yaWNhbGx5LCBpdHMgZGVmYXVsdCBzdHJpbmdcbiAgLy8gZW5jb2RpbmcgaXMgJ2JpbmFyeScgc28gd2UgaGF2ZSB0byBtYWtlIHRoaXMgY29uZmlndXJhYmxlLlxuICAvLyBFdmVyeXRoaW5nIGVsc2UgaW4gdGhlIHVuaXZlcnNlIHVzZXMgJ3V0ZjgnLCB0aG91Z2guXG4gIHRoaXMuZGVmYXVsdEVuY29kaW5nID0gb3B0aW9ucy5kZWZhdWx0RW5jb2RpbmcgfHwgJ3V0ZjgnO1xuXG4gIC8vIHRoZSBudW1iZXIgb2Ygd3JpdGVycyB0aGF0IGFyZSBhd2FpdGluZyBhIGRyYWluIGV2ZW50IGluIC5waXBlKClzXG4gIHRoaXMuYXdhaXREcmFpbiA9IDA7XG5cbiAgLy8gaWYgdHJ1ZSwgYSBtYXliZVJlYWRNb3JlIGhhcyBiZWVuIHNjaGVkdWxlZFxuICB0aGlzLnJlYWRpbmdNb3JlID0gZmFsc2U7XG5cbiAgdGhpcy5kZWNvZGVyID0gbnVsbDtcbiAgdGhpcy5lbmNvZGluZyA9IG51bGw7XG4gIGlmIChvcHRpb25zLmVuY29kaW5nKSB7XG4gICAgaWYgKCFTdHJpbmdEZWNvZGVyKSBTdHJpbmdEZWNvZGVyID0gcmVxdWlyZSgnc3RyaW5nX2RlY29kZXIvJykuU3RyaW5nRGVjb2RlcjtcbiAgICB0aGlzLmRlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcihvcHRpb25zLmVuY29kaW5nKTtcbiAgICB0aGlzLmVuY29kaW5nID0gb3B0aW9ucy5lbmNvZGluZztcbiAgfVxufVxuXG5mdW5jdGlvbiBSZWFkYWJsZShvcHRpb25zKSB7XG4gIER1cGxleCA9IER1cGxleCB8fCByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7XG5cbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFJlYWRhYmxlKSkgcmV0dXJuIG5ldyBSZWFkYWJsZShvcHRpb25zKTtcblxuICB0aGlzLl9yZWFkYWJsZVN0YXRlID0gbmV3IFJlYWRhYmxlU3RhdGUob3B0aW9ucywgdGhpcyk7XG5cbiAgLy8gbGVnYWN5XG4gIHRoaXMucmVhZGFibGUgPSB0cnVlO1xuXG4gIGlmIChvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnJlYWQgPT09ICdmdW5jdGlvbicpIHRoaXMuX3JlYWQgPSBvcHRpb25zLnJlYWQ7XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuZGVzdHJveSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fZGVzdHJveSA9IG9wdGlvbnMuZGVzdHJveTtcbiAgfVxuXG4gIFN0cmVhbS5jYWxsKHRoaXMpO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhZGFibGUucHJvdG90eXBlLCAnZGVzdHJveWVkJywge1xuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZDtcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAvLyB3ZSBpZ25vcmUgdGhlIHZhbHVlIGlmIHRoZSBzdHJlYW1cbiAgICAvLyBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQgeWV0XG4gICAgaWYgKCF0aGlzLl9yZWFkYWJsZVN0YXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgdGhlIHVzZXIgaXMgZXhwbGljaXRseVxuICAgIC8vIG1hbmFnaW5nIGRlc3Ryb3llZFxuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkID0gdmFsdWU7XG4gIH1cbn0pO1xuXG5SZWFkYWJsZS5wcm90b3R5cGUuZGVzdHJveSA9IGRlc3Ryb3lJbXBsLmRlc3Ryb3k7XG5SZWFkYWJsZS5wcm90b3R5cGUuX3VuZGVzdHJveSA9IGRlc3Ryb3lJbXBsLnVuZGVzdHJveTtcblJlYWRhYmxlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uIChlcnIsIGNiKSB7XG4gIHRoaXMucHVzaChudWxsKTtcbiAgY2IoZXJyKTtcbn07XG5cbi8vIE1hbnVhbGx5IHNob3ZlIHNvbWV0aGluZyBpbnRvIHRoZSByZWFkKCkgYnVmZmVyLlxuLy8gVGhpcyByZXR1cm5zIHRydWUgaWYgdGhlIGhpZ2hXYXRlck1hcmsgaGFzIG5vdCBiZWVuIGhpdCB5ZXQsXG4vLyBzaW1pbGFyIHRvIGhvdyBXcml0YWJsZS53cml0ZSgpIHJldHVybnMgdHJ1ZSBpZiB5b3Ugc2hvdWxkXG4vLyB3cml0ZSgpIHNvbWUgbW9yZS5cblJlYWRhYmxlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZykge1xuICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuICB2YXIgc2tpcENodW5rQ2hlY2s7XG5cbiAgaWYgKCFzdGF0ZS5vYmplY3RNb2RlKSB7XG4gICAgaWYgKHR5cGVvZiBjaHVuayA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVuY29kaW5nID0gZW5jb2RpbmcgfHwgc3RhdGUuZGVmYXVsdEVuY29kaW5nO1xuICAgICAgaWYgKGVuY29kaW5nICE9PSBzdGF0ZS5lbmNvZGluZykge1xuICAgICAgICBjaHVuayA9IEJ1ZmZlci5mcm9tKGNodW5rLCBlbmNvZGluZyk7XG4gICAgICAgIGVuY29kaW5nID0gJyc7XG4gICAgICB9XG4gICAgICBza2lwQ2h1bmtDaGVjayA9IHRydWU7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHNraXBDaHVua0NoZWNrID0gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiByZWFkYWJsZUFkZENodW5rKHRoaXMsIGNodW5rLCBlbmNvZGluZywgZmFsc2UsIHNraXBDaHVua0NoZWNrKTtcbn07XG5cbi8vIFVuc2hpZnQgc2hvdWxkICphbHdheXMqIGJlIHNvbWV0aGluZyBkaXJlY3RseSBvdXQgb2YgcmVhZCgpXG5SZWFkYWJsZS5wcm90b3R5cGUudW5zaGlmdCA9IGZ1bmN0aW9uIChjaHVuaykge1xuICByZXR1cm4gcmVhZGFibGVBZGRDaHVuayh0aGlzLCBjaHVuaywgbnVsbCwgdHJ1ZSwgZmFsc2UpO1xufTtcblxuZnVuY3Rpb24gcmVhZGFibGVBZGRDaHVuayhzdHJlYW0sIGNodW5rLCBlbmNvZGluZywgYWRkVG9Gcm9udCwgc2tpcENodW5rQ2hlY2spIHtcbiAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlO1xuICBpZiAoY2h1bmsgPT09IG51bGwpIHtcbiAgICBzdGF0ZS5yZWFkaW5nID0gZmFsc2U7XG4gICAgb25Fb2ZDaHVuayhzdHJlYW0sIHN0YXRlKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgZXI7XG4gICAgaWYgKCFza2lwQ2h1bmtDaGVjaykgZXIgPSBjaHVua0ludmFsaWQoc3RhdGUsIGNodW5rKTtcbiAgICBpZiAoZXIpIHtcbiAgICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcbiAgICB9IGVsc2UgaWYgKHN0YXRlLm9iamVjdE1vZGUgfHwgY2h1bmsgJiYgY2h1bmsubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKHR5cGVvZiBjaHVuayAhPT0gJ3N0cmluZycgJiYgIXN0YXRlLm9iamVjdE1vZGUgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGNodW5rKSAhPT0gQnVmZmVyLnByb3RvdHlwZSkge1xuICAgICAgICBjaHVuayA9IF91aW50OEFycmF5VG9CdWZmZXIoY2h1bmspO1xuICAgICAgfVxuXG4gICAgICBpZiAoYWRkVG9Gcm9udCkge1xuICAgICAgICBpZiAoc3RhdGUuZW5kRW1pdHRlZCkgc3RyZWFtLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdzdHJlYW0udW5zaGlmdCgpIGFmdGVyIGVuZCBldmVudCcpKTtlbHNlIGFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCB0cnVlKTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdGUuZW5kZWQpIHtcbiAgICAgICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdzdHJlYW0ucHVzaCgpIGFmdGVyIEVPRicpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgaWYgKHN0YXRlLmRlY29kZXIgJiYgIWVuY29kaW5nKSB7XG4gICAgICAgICAgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLndyaXRlKGNodW5rKTtcbiAgICAgICAgICBpZiAoc3RhdGUub2JqZWN0TW9kZSB8fCBjaHVuay5sZW5ndGggIT09IDApIGFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBmYWxzZSk7ZWxzZSBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFhZGRUb0Zyb250KSB7XG4gICAgICBzdGF0ZS5yZWFkaW5nID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5lZWRNb3JlRGF0YShzdGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBhZGRUb0Zyb250KSB7XG4gIGlmIChzdGF0ZS5mbG93aW5nICYmIHN0YXRlLmxlbmd0aCA9PT0gMCAmJiAhc3RhdGUuc3luYykge1xuICAgIHN0cmVhbS5lbWl0KCdkYXRhJywgY2h1bmspO1xuICAgIHN0cmVhbS5yZWFkKDApO1xuICB9IGVsc2Uge1xuICAgIC8vIHVwZGF0ZSB0aGUgYnVmZmVyIGluZm8uXG4gICAgc3RhdGUubGVuZ3RoICs9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoO1xuICAgIGlmIChhZGRUb0Zyb250KSBzdGF0ZS5idWZmZXIudW5zaGlmdChjaHVuayk7ZWxzZSBzdGF0ZS5idWZmZXIucHVzaChjaHVuayk7XG5cbiAgICBpZiAoc3RhdGUubmVlZFJlYWRhYmxlKSBlbWl0UmVhZGFibGUoc3RyZWFtKTtcbiAgfVxuICBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpO1xufVxuXG5mdW5jdGlvbiBjaHVua0ludmFsaWQoc3RhdGUsIGNodW5rKSB7XG4gIHZhciBlcjtcbiAgaWYgKCFfaXNVaW50OEFycmF5KGNodW5rKSAmJiB0eXBlb2YgY2h1bmsgIT09ICdzdHJpbmcnICYmIGNodW5rICE9PSB1bmRlZmluZWQgJiYgIXN0YXRlLm9iamVjdE1vZGUpIHtcbiAgICBlciA9IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsnKTtcbiAgfVxuICByZXR1cm4gZXI7XG59XG5cbi8vIGlmIGl0J3MgcGFzdCB0aGUgaGlnaCB3YXRlciBtYXJrLCB3ZSBjYW4gcHVzaCBpbiBzb21lIG1vcmUuXG4vLyBBbHNvLCBpZiB3ZSBoYXZlIG5vIGRhdGEgeWV0LCB3ZSBjYW4gc3RhbmQgc29tZVxuLy8gbW9yZSBieXRlcy4gIFRoaXMgaXMgdG8gd29yayBhcm91bmQgY2FzZXMgd2hlcmUgaHdtPTAsXG4vLyBzdWNoIGFzIHRoZSByZXBsLiAgQWxzbywgaWYgdGhlIHB1c2goKSB0cmlnZ2VyZWQgYVxuLy8gcmVhZGFibGUgZXZlbnQsIGFuZCB0aGUgdXNlciBjYWxsZWQgcmVhZChsYXJnZU51bWJlcikgc3VjaCB0aGF0XG4vLyBuZWVkUmVhZGFibGUgd2FzIHNldCwgdGhlbiB3ZSBvdWdodCB0byBwdXNoIG1vcmUsIHNvIHRoYXQgYW5vdGhlclxuLy8gJ3JlYWRhYmxlJyBldmVudCB3aWxsIGJlIHRyaWdnZXJlZC5cbmZ1bmN0aW9uIG5lZWRNb3JlRGF0YShzdGF0ZSkge1xuICByZXR1cm4gIXN0YXRlLmVuZGVkICYmIChzdGF0ZS5uZWVkUmVhZGFibGUgfHwgc3RhdGUubGVuZ3RoIDwgc3RhdGUuaGlnaFdhdGVyTWFyayB8fCBzdGF0ZS5sZW5ndGggPT09IDApO1xufVxuXG5SZWFkYWJsZS5wcm90b3R5cGUuaXNQYXVzZWQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcgPT09IGZhbHNlO1xufTtcblxuLy8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG5SZWFkYWJsZS5wcm90b3R5cGUuc2V0RW5jb2RpbmcgPSBmdW5jdGlvbiAoZW5jKSB7XG4gIGlmICghU3RyaW5nRGVjb2RlcikgU3RyaW5nRGVjb2RlciA9IHJlcXVpcmUoJ3N0cmluZ19kZWNvZGVyLycpLlN0cmluZ0RlY29kZXI7XG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyKGVuYyk7XG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5jb2RpbmcgPSBlbmM7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLy8gRG9uJ3QgcmFpc2UgdGhlIGh3bSA+IDhNQlxudmFyIE1BWF9IV00gPSAweDgwMDAwMDtcbmZ1bmN0aW9uIGNvbXB1dGVOZXdIaWdoV2F0ZXJNYXJrKG4pIHtcbiAgaWYgKG4gPj0gTUFYX0hXTSkge1xuICAgIG4gPSBNQVhfSFdNO1xuICB9IGVsc2Uge1xuICAgIC8vIEdldCB0aGUgbmV4dCBoaWdoZXN0IHBvd2VyIG9mIDIgdG8gcHJldmVudCBpbmNyZWFzaW5nIGh3bSBleGNlc3NpdmVseSBpblxuICAgIC8vIHRpbnkgYW1vdW50c1xuICAgIG4tLTtcbiAgICBuIHw9IG4gPj4+IDE7XG4gICAgbiB8PSBuID4+PiAyO1xuICAgIG4gfD0gbiA+Pj4gNDtcbiAgICBuIHw9IG4gPj4+IDg7XG4gICAgbiB8PSBuID4+PiAxNjtcbiAgICBuKys7XG4gIH1cbiAgcmV0dXJuIG47XG59XG5cbi8vIFRoaXMgZnVuY3Rpb24gaXMgZGVzaWduZWQgdG8gYmUgaW5saW5hYmxlLCBzbyBwbGVhc2UgdGFrZSBjYXJlIHdoZW4gbWFraW5nXG4vLyBjaGFuZ2VzIHRvIHRoZSBmdW5jdGlvbiBib2R5LlxuZnVuY3Rpb24gaG93TXVjaFRvUmVhZChuLCBzdGF0ZSkge1xuICBpZiAobiA8PSAwIHx8IHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5lbmRlZCkgcmV0dXJuIDA7XG4gIGlmIChzdGF0ZS5vYmplY3RNb2RlKSByZXR1cm4gMTtcbiAgaWYgKG4gIT09IG4pIHtcbiAgICAvLyBPbmx5IGZsb3cgb25lIGJ1ZmZlciBhdCBhIHRpbWVcbiAgICBpZiAoc3RhdGUuZmxvd2luZyAmJiBzdGF0ZS5sZW5ndGgpIHJldHVybiBzdGF0ZS5idWZmZXIuaGVhZC5kYXRhLmxlbmd0aDtlbHNlIHJldHVybiBzdGF0ZS5sZW5ndGg7XG4gIH1cbiAgLy8gSWYgd2UncmUgYXNraW5nIGZvciBtb3JlIHRoYW4gdGhlIGN1cnJlbnQgaHdtLCB0aGVuIHJhaXNlIHRoZSBod20uXG4gIGlmIChuID4gc3RhdGUuaGlnaFdhdGVyTWFyaykgc3RhdGUuaGlnaFdhdGVyTWFyayA9IGNvbXB1dGVOZXdIaWdoV2F0ZXJNYXJrKG4pO1xuICBpZiAobiA8PSBzdGF0ZS5sZW5ndGgpIHJldHVybiBuO1xuICAvLyBEb24ndCBoYXZlIGVub3VnaFxuICBpZiAoIXN0YXRlLmVuZGVkKSB7XG4gICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcbiAgICByZXR1cm4gMDtcbiAgfVxuICByZXR1cm4gc3RhdGUubGVuZ3RoO1xufVxuXG4vLyB5b3UgY2FuIG92ZXJyaWRlIGVpdGhlciB0aGlzIG1ldGhvZCwgb3IgdGhlIGFzeW5jIF9yZWFkKG4pIGJlbG93LlxuUmVhZGFibGUucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAobikge1xuICBkZWJ1ZygncmVhZCcsIG4pO1xuICBuID0gcGFyc2VJbnQobiwgMTApO1xuICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuICB2YXIgbk9yaWcgPSBuO1xuXG4gIGlmIChuICE9PSAwKSBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTtcblxuICAvLyBpZiB3ZSdyZSBkb2luZyByZWFkKDApIHRvIHRyaWdnZXIgYSByZWFkYWJsZSBldmVudCwgYnV0IHdlXG4gIC8vIGFscmVhZHkgaGF2ZSBhIGJ1bmNoIG9mIGRhdGEgaW4gdGhlIGJ1ZmZlciwgdGhlbiBqdXN0IHRyaWdnZXJcbiAgLy8gdGhlICdyZWFkYWJsZScgZXZlbnQgYW5kIG1vdmUgb24uXG4gIGlmIChuID09PSAwICYmIHN0YXRlLm5lZWRSZWFkYWJsZSAmJiAoc3RhdGUubGVuZ3RoID49IHN0YXRlLmhpZ2hXYXRlck1hcmsgfHwgc3RhdGUuZW5kZWQpKSB7XG4gICAgZGVidWcoJ3JlYWQ6IGVtaXRSZWFkYWJsZScsIHN0YXRlLmxlbmd0aCwgc3RhdGUuZW5kZWQpO1xuICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUuZW5kZWQpIGVuZFJlYWRhYmxlKHRoaXMpO2Vsc2UgZW1pdFJlYWRhYmxlKHRoaXMpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgbiA9IGhvd011Y2hUb1JlYWQobiwgc3RhdGUpO1xuXG4gIC8vIGlmIHdlJ3ZlIGVuZGVkLCBhbmQgd2UncmUgbm93IGNsZWFyLCB0aGVuIGZpbmlzaCBpdCB1cC5cbiAgaWYgKG4gPT09IDAgJiYgc3RhdGUuZW5kZWQpIHtcbiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSBlbmRSZWFkYWJsZSh0aGlzKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIEFsbCB0aGUgYWN0dWFsIGNodW5rIGdlbmVyYXRpb24gbG9naWMgbmVlZHMgdG8gYmVcbiAgLy8gKmJlbG93KiB0aGUgY2FsbCB0byBfcmVhZC4gIFRoZSByZWFzb24gaXMgdGhhdCBpbiBjZXJ0YWluXG4gIC8vIHN5bnRoZXRpYyBzdHJlYW0gY2FzZXMsIHN1Y2ggYXMgcGFzc3Rocm91Z2ggc3RyZWFtcywgX3JlYWRcbiAgLy8gbWF5IGJlIGEgY29tcGxldGVseSBzeW5jaHJvbm91cyBvcGVyYXRpb24gd2hpY2ggbWF5IGNoYW5nZVxuICAvLyB0aGUgc3RhdGUgb2YgdGhlIHJlYWQgYnVmZmVyLCBwcm92aWRpbmcgZW5vdWdoIGRhdGEgd2hlblxuICAvLyBiZWZvcmUgdGhlcmUgd2FzICpub3QqIGVub3VnaC5cbiAgLy9cbiAgLy8gU28sIHRoZSBzdGVwcyBhcmU6XG4gIC8vIDEuIEZpZ3VyZSBvdXQgd2hhdCB0aGUgc3RhdGUgb2YgdGhpbmdzIHdpbGwgYmUgYWZ0ZXIgd2UgZG9cbiAgLy8gYSByZWFkIGZyb20gdGhlIGJ1ZmZlci5cbiAgLy9cbiAgLy8gMi4gSWYgdGhhdCByZXN1bHRpbmcgc3RhdGUgd2lsbCB0cmlnZ2VyIGEgX3JlYWQsIHRoZW4gY2FsbCBfcmVhZC5cbiAgLy8gTm90ZSB0aGF0IHRoaXMgbWF5IGJlIGFzeW5jaHJvbm91cywgb3Igc3luY2hyb25vdXMuICBZZXMsIGl0IGlzXG4gIC8vIGRlZXBseSB1Z2x5IHRvIHdyaXRlIEFQSXMgdGhpcyB3YXksIGJ1dCB0aGF0IHN0aWxsIGRvZXNuJ3QgbWVhblxuICAvLyB0aGF0IHRoZSBSZWFkYWJsZSBjbGFzcyBzaG91bGQgYmVoYXZlIGltcHJvcGVybHksIGFzIHN0cmVhbXMgYXJlXG4gIC8vIGRlc2lnbmVkIHRvIGJlIHN5bmMvYXN5bmMgYWdub3N0aWMuXG4gIC8vIFRha2Ugbm90ZSBpZiB0aGUgX3JlYWQgY2FsbCBpcyBzeW5jIG9yIGFzeW5jIChpZSwgaWYgdGhlIHJlYWQgY2FsbFxuICAvLyBoYXMgcmV0dXJuZWQgeWV0KSwgc28gdGhhdCB3ZSBrbm93IHdoZXRoZXIgb3Igbm90IGl0J3Mgc2FmZSB0byBlbWl0XG4gIC8vICdyZWFkYWJsZScgZXRjLlxuICAvL1xuICAvLyAzLiBBY3R1YWxseSBwdWxsIHRoZSByZXF1ZXN0ZWQgY2h1bmtzIG91dCBvZiB0aGUgYnVmZmVyIGFuZCByZXR1cm4uXG5cbiAgLy8gaWYgd2UgbmVlZCBhIHJlYWRhYmxlIGV2ZW50LCB0aGVuIHdlIG5lZWQgdG8gZG8gc29tZSByZWFkaW5nLlxuICB2YXIgZG9SZWFkID0gc3RhdGUubmVlZFJlYWRhYmxlO1xuICBkZWJ1ZygnbmVlZCByZWFkYWJsZScsIGRvUmVhZCk7XG5cbiAgLy8gaWYgd2UgY3VycmVudGx5IGhhdmUgbGVzcyB0aGFuIHRoZSBoaWdoV2F0ZXJNYXJrLCB0aGVuIGFsc28gcmVhZCBzb21lXG4gIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgfHwgc3RhdGUubGVuZ3RoIC0gbiA8IHN0YXRlLmhpZ2hXYXRlck1hcmspIHtcbiAgICBkb1JlYWQgPSB0cnVlO1xuICAgIGRlYnVnKCdsZW5ndGggbGVzcyB0aGFuIHdhdGVybWFyaycsIGRvUmVhZCk7XG4gIH1cblxuICAvLyBob3dldmVyLCBpZiB3ZSd2ZSBlbmRlZCwgdGhlbiB0aGVyZSdzIG5vIHBvaW50LCBhbmQgaWYgd2UncmUgYWxyZWFkeVxuICAvLyByZWFkaW5nLCB0aGVuIGl0J3MgdW5uZWNlc3NhcnkuXG4gIGlmIChzdGF0ZS5lbmRlZCB8fCBzdGF0ZS5yZWFkaW5nKSB7XG4gICAgZG9SZWFkID0gZmFsc2U7XG4gICAgZGVidWcoJ3JlYWRpbmcgb3IgZW5kZWQnLCBkb1JlYWQpO1xuICB9IGVsc2UgaWYgKGRvUmVhZCkge1xuICAgIGRlYnVnKCdkbyByZWFkJyk7XG4gICAgc3RhdGUucmVhZGluZyA9IHRydWU7XG4gICAgc3RhdGUuc3luYyA9IHRydWU7XG4gICAgLy8gaWYgdGhlIGxlbmd0aCBpcyBjdXJyZW50bHkgemVybywgdGhlbiB3ZSAqbmVlZCogYSByZWFkYWJsZSBldmVudC5cbiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuICAgIC8vIGNhbGwgaW50ZXJuYWwgcmVhZCBtZXRob2RcbiAgICB0aGlzLl9yZWFkKHN0YXRlLmhpZ2hXYXRlck1hcmspO1xuICAgIHN0YXRlLnN5bmMgPSBmYWxzZTtcbiAgICAvLyBJZiBfcmVhZCBwdXNoZWQgZGF0YSBzeW5jaHJvbm91c2x5LCB0aGVuIGByZWFkaW5nYCB3aWxsIGJlIGZhbHNlLFxuICAgIC8vIGFuZCB3ZSBuZWVkIHRvIHJlLWV2YWx1YXRlIGhvdyBtdWNoIGRhdGEgd2UgY2FuIHJldHVybiB0byB0aGUgdXNlci5cbiAgICBpZiAoIXN0YXRlLnJlYWRpbmcpIG4gPSBob3dNdWNoVG9SZWFkKG5PcmlnLCBzdGF0ZSk7XG4gIH1cblxuICB2YXIgcmV0O1xuICBpZiAobiA+IDApIHJldCA9IGZyb21MaXN0KG4sIHN0YXRlKTtlbHNlIHJldCA9IG51bGw7XG5cbiAgaWYgKHJldCA9PT0gbnVsbCkge1xuICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgbiA9IDA7XG4gIH0gZWxzZSB7XG4gICAgc3RhdGUubGVuZ3RoIC09IG47XG4gIH1cblxuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSB7XG4gICAgLy8gSWYgd2UgaGF2ZSBub3RoaW5nIGluIHRoZSBidWZmZXIsIHRoZW4gd2Ugd2FudCB0byBrbm93XG4gICAgLy8gYXMgc29vbiBhcyB3ZSAqZG8qIGdldCBzb21ldGhpbmcgaW50byB0aGUgYnVmZmVyLlxuICAgIGlmICghc3RhdGUuZW5kZWQpIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG5cbiAgICAvLyBJZiB3ZSB0cmllZCB0byByZWFkKCkgcGFzdCB0aGUgRU9GLCB0aGVuIGVtaXQgZW5kIG9uIHRoZSBuZXh0IHRpY2suXG4gICAgaWYgKG5PcmlnICE9PSBuICYmIHN0YXRlLmVuZGVkKSBlbmRSZWFkYWJsZSh0aGlzKTtcbiAgfVxuXG4gIGlmIChyZXQgIT09IG51bGwpIHRoaXMuZW1pdCgnZGF0YScsIHJldCk7XG5cbiAgcmV0dXJuIHJldDtcbn07XG5cbmZ1bmN0aW9uIG9uRW9mQ2h1bmsoc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoc3RhdGUuZW5kZWQpIHJldHVybjtcbiAgaWYgKHN0YXRlLmRlY29kZXIpIHtcbiAgICB2YXIgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLmVuZCgpO1xuICAgIGlmIChjaHVuayAmJiBjaHVuay5sZW5ndGgpIHtcbiAgICAgIHN0YXRlLmJ1ZmZlci5wdXNoKGNodW5rKTtcbiAgICAgIHN0YXRlLmxlbmd0aCArPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDtcbiAgICB9XG4gIH1cbiAgc3RhdGUuZW5kZWQgPSB0cnVlO1xuXG4gIC8vIGVtaXQgJ3JlYWRhYmxlJyBub3cgdG8gbWFrZSBzdXJlIGl0IGdldHMgcGlja2VkIHVwLlxuICBlbWl0UmVhZGFibGUoc3RyZWFtKTtcbn1cblxuLy8gRG9uJ3QgZW1pdCByZWFkYWJsZSByaWdodCBhd2F5IGluIHN5bmMgbW9kZSwgYmVjYXVzZSB0aGlzIGNhbiB0cmlnZ2VyXG4vLyBhbm90aGVyIHJlYWQoKSBjYWxsID0+IHN0YWNrIG92ZXJmbG93LiAgVGhpcyB3YXksIGl0IG1pZ2h0IHRyaWdnZXJcbi8vIGEgbmV4dFRpY2sgcmVjdXJzaW9uIHdhcm5pbmcsIGJ1dCB0aGF0J3Mgbm90IHNvIGJhZC5cbmZ1bmN0aW9uIGVtaXRSZWFkYWJsZShzdHJlYW0pIHtcbiAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlO1xuICBzdGF0ZS5uZWVkUmVhZGFibGUgPSBmYWxzZTtcbiAgaWYgKCFzdGF0ZS5lbWl0dGVkUmVhZGFibGUpIHtcbiAgICBkZWJ1ZygnZW1pdFJlYWRhYmxlJywgc3RhdGUuZmxvd2luZyk7XG4gICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gdHJ1ZTtcbiAgICBpZiAoc3RhdGUuc3luYykgcG5hLm5leHRUaWNrKGVtaXRSZWFkYWJsZV8sIHN0cmVhbSk7ZWxzZSBlbWl0UmVhZGFibGVfKHN0cmVhbSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZW1pdFJlYWRhYmxlXyhzdHJlYW0pIHtcbiAgZGVidWcoJ2VtaXQgcmVhZGFibGUnKTtcbiAgc3RyZWFtLmVtaXQoJ3JlYWRhYmxlJyk7XG4gIGZsb3coc3RyZWFtKTtcbn1cblxuLy8gYXQgdGhpcyBwb2ludCwgdGhlIHVzZXIgaGFzIHByZXN1bWFibHkgc2VlbiB0aGUgJ3JlYWRhYmxlJyBldmVudCxcbi8vIGFuZCBjYWxsZWQgcmVhZCgpIHRvIGNvbnN1bWUgc29tZSBkYXRhLiAgdGhhdCBtYXkgaGF2ZSB0cmlnZ2VyZWRcbi8vIGluIHR1cm4gYW5vdGhlciBfcmVhZChuKSBjYWxsLCBpbiB3aGljaCBjYXNlIHJlYWRpbmcgPSB0cnVlIGlmXG4vLyBpdCdzIGluIHByb2dyZXNzLlxuLy8gSG93ZXZlciwgaWYgd2UncmUgbm90IGVuZGVkLCBvciByZWFkaW5nLCBhbmQgdGhlIGxlbmd0aCA8IGh3bSxcbi8vIHRoZW4gZ28gYWhlYWQgYW5kIHRyeSB0byByZWFkIHNvbWUgbW9yZSBwcmVlbXB0aXZlbHkuXG5mdW5jdGlvbiBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKCFzdGF0ZS5yZWFkaW5nTW9yZSkge1xuICAgIHN0YXRlLnJlYWRpbmdNb3JlID0gdHJ1ZTtcbiAgICBwbmEubmV4dFRpY2sobWF5YmVSZWFkTW9yZV8sIHN0cmVhbSwgc3RhdGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1heWJlUmVhZE1vcmVfKHN0cmVhbSwgc3RhdGUpIHtcbiAgdmFyIGxlbiA9IHN0YXRlLmxlbmd0aDtcbiAgd2hpbGUgKCFzdGF0ZS5yZWFkaW5nICYmICFzdGF0ZS5mbG93aW5nICYmICFzdGF0ZS5lbmRlZCAmJiBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSB7XG4gICAgZGVidWcoJ21heWJlUmVhZE1vcmUgcmVhZCAwJyk7XG4gICAgc3RyZWFtLnJlYWQoMCk7XG4gICAgaWYgKGxlbiA9PT0gc3RhdGUubGVuZ3RoKVxuICAgICAgLy8gZGlkbid0IGdldCBhbnkgZGF0YSwgc3RvcCBzcGlubmluZy5cbiAgICAgIGJyZWFrO2Vsc2UgbGVuID0gc3RhdGUubGVuZ3RoO1xuICB9XG4gIHN0YXRlLnJlYWRpbmdNb3JlID0gZmFsc2U7XG59XG5cbi8vIGFic3RyYWN0IG1ldGhvZC4gIHRvIGJlIG92ZXJyaWRkZW4gaW4gc3BlY2lmaWMgaW1wbGVtZW50YXRpb24gY2xhc3Nlcy5cbi8vIGNhbGwgY2IoZXIsIGRhdGEpIHdoZXJlIGRhdGEgaXMgPD0gbiBpbiBsZW5ndGguXG4vLyBmb3IgdmlydHVhbCAobm9uLXN0cmluZywgbm9uLWJ1ZmZlcikgc3RyZWFtcywgXCJsZW5ndGhcIiBpcyBzb21ld2hhdFxuLy8gYXJiaXRyYXJ5LCBhbmQgcGVyaGFwcyBub3QgdmVyeSBtZWFuaW5nZnVsLlxuUmVhZGFibGUucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24gKG4pIHtcbiAgdGhpcy5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignX3JlYWQoKSBpcyBub3QgaW1wbGVtZW50ZWQnKSk7XG59O1xuXG5SZWFkYWJsZS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uIChkZXN0LCBwaXBlT3B0cykge1xuICB2YXIgc3JjID0gdGhpcztcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcblxuICBzd2l0Y2ggKHN0YXRlLnBpcGVzQ291bnQpIHtcbiAgICBjYXNlIDA6XG4gICAgICBzdGF0ZS5waXBlcyA9IGRlc3Q7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDE6XG4gICAgICBzdGF0ZS5waXBlcyA9IFtzdGF0ZS5waXBlcywgZGVzdF07XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgc3RhdGUucGlwZXMucHVzaChkZXN0KTtcbiAgICAgIGJyZWFrO1xuICB9XG4gIHN0YXRlLnBpcGVzQ291bnQgKz0gMTtcbiAgZGVidWcoJ3BpcGUgY291bnQ9JWQgb3B0cz0laicsIHN0YXRlLnBpcGVzQ291bnQsIHBpcGVPcHRzKTtcblxuICB2YXIgZG9FbmQgPSAoIXBpcGVPcHRzIHx8IHBpcGVPcHRzLmVuZCAhPT0gZmFsc2UpICYmIGRlc3QgIT09IHByb2Nlc3Muc3Rkb3V0ICYmIGRlc3QgIT09IHByb2Nlc3Muc3RkZXJyO1xuXG4gIHZhciBlbmRGbiA9IGRvRW5kID8gb25lbmQgOiB1bnBpcGU7XG4gIGlmIChzdGF0ZS5lbmRFbWl0dGVkKSBwbmEubmV4dFRpY2soZW5kRm4pO2Vsc2Ugc3JjLm9uY2UoJ2VuZCcsIGVuZEZuKTtcblxuICBkZXN0Lm9uKCd1bnBpcGUnLCBvbnVucGlwZSk7XG4gIGZ1bmN0aW9uIG9udW5waXBlKHJlYWRhYmxlLCB1bnBpcGVJbmZvKSB7XG4gICAgZGVidWcoJ29udW5waXBlJyk7XG4gICAgaWYgKHJlYWRhYmxlID09PSBzcmMpIHtcbiAgICAgIGlmICh1bnBpcGVJbmZvICYmIHVucGlwZUluZm8uaGFzVW5waXBlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgdW5waXBlSW5mby5oYXNVbnBpcGVkID0gdHJ1ZTtcbiAgICAgICAgY2xlYW51cCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uZW5kKCkge1xuICAgIGRlYnVnKCdvbmVuZCcpO1xuICAgIGRlc3QuZW5kKCk7XG4gIH1cblxuICAvLyB3aGVuIHRoZSBkZXN0IGRyYWlucywgaXQgcmVkdWNlcyB0aGUgYXdhaXREcmFpbiBjb3VudGVyXG4gIC8vIG9uIHRoZSBzb3VyY2UuICBUaGlzIHdvdWxkIGJlIG1vcmUgZWxlZ2FudCB3aXRoIGEgLm9uY2UoKVxuICAvLyBoYW5kbGVyIGluIGZsb3coKSwgYnV0IGFkZGluZyBhbmQgcmVtb3ZpbmcgcmVwZWF0ZWRseSBpc1xuICAvLyB0b28gc2xvdy5cbiAgdmFyIG9uZHJhaW4gPSBwaXBlT25EcmFpbihzcmMpO1xuICBkZXN0Lm9uKCdkcmFpbicsIG9uZHJhaW4pO1xuXG4gIHZhciBjbGVhbmVkVXAgPSBmYWxzZTtcbiAgZnVuY3Rpb24gY2xlYW51cCgpIHtcbiAgICBkZWJ1ZygnY2xlYW51cCcpO1xuICAgIC8vIGNsZWFudXAgZXZlbnQgaGFuZGxlcnMgb25jZSB0aGUgcGlwZSBpcyBicm9rZW5cbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2ZpbmlzaCcsIG9uZmluaXNoKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdkcmFpbicsIG9uZHJhaW4pO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcigndW5waXBlJywgb251bnBpcGUpO1xuICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZW5kJywgb25lbmQpO1xuICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZW5kJywgdW5waXBlKTtcbiAgICBzcmMucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBvbmRhdGEpO1xuXG4gICAgY2xlYW5lZFVwID0gdHJ1ZTtcblxuICAgIC8vIGlmIHRoZSByZWFkZXIgaXMgd2FpdGluZyBmb3IgYSBkcmFpbiBldmVudCBmcm9tIHRoaXNcbiAgICAvLyBzcGVjaWZpYyB3cml0ZXIsIHRoZW4gaXQgd291bGQgY2F1c2UgaXQgdG8gbmV2ZXIgc3RhcnRcbiAgICAvLyBmbG93aW5nIGFnYWluLlxuICAgIC8vIFNvLCBpZiB0aGlzIGlzIGF3YWl0aW5nIGEgZHJhaW4sIHRoZW4gd2UganVzdCBjYWxsIGl0IG5vdy5cbiAgICAvLyBJZiB3ZSBkb24ndCBrbm93LCB0aGVuIGFzc3VtZSB0aGF0IHdlIGFyZSB3YWl0aW5nIGZvciBvbmUuXG4gICAgaWYgKHN0YXRlLmF3YWl0RHJhaW4gJiYgKCFkZXN0Ll93cml0YWJsZVN0YXRlIHx8IGRlc3QuX3dyaXRhYmxlU3RhdGUubmVlZERyYWluKSkgb25kcmFpbigpO1xuICB9XG5cbiAgLy8gSWYgdGhlIHVzZXIgcHVzaGVzIG1vcmUgZGF0YSB3aGlsZSB3ZSdyZSB3cml0aW5nIHRvIGRlc3QgdGhlbiB3ZSdsbCBlbmQgdXBcbiAgLy8gaW4gb25kYXRhIGFnYWluLiBIb3dldmVyLCB3ZSBvbmx5IHdhbnQgdG8gaW5jcmVhc2UgYXdhaXREcmFpbiBvbmNlIGJlY2F1c2VcbiAgLy8gZGVzdCB3aWxsIG9ubHkgZW1pdCBvbmUgJ2RyYWluJyBldmVudCBmb3IgdGhlIG11bHRpcGxlIHdyaXRlcy5cbiAgLy8gPT4gSW50cm9kdWNlIGEgZ3VhcmQgb24gaW5jcmVhc2luZyBhd2FpdERyYWluLlxuICB2YXIgaW5jcmVhc2VkQXdhaXREcmFpbiA9IGZhbHNlO1xuICBzcmMub24oJ2RhdGEnLCBvbmRhdGEpO1xuICBmdW5jdGlvbiBvbmRhdGEoY2h1bmspIHtcbiAgICBkZWJ1Zygnb25kYXRhJyk7XG4gICAgaW5jcmVhc2VkQXdhaXREcmFpbiA9IGZhbHNlO1xuICAgIHZhciByZXQgPSBkZXN0LndyaXRlKGNodW5rKTtcbiAgICBpZiAoZmFsc2UgPT09IHJldCAmJiAhaW5jcmVhc2VkQXdhaXREcmFpbikge1xuICAgICAgLy8gSWYgdGhlIHVzZXIgdW5waXBlZCBkdXJpbmcgYGRlc3Qud3JpdGUoKWAsIGl0IGlzIHBvc3NpYmxlXG4gICAgICAvLyB0byBnZXQgc3R1Y2sgaW4gYSBwZXJtYW5lbnRseSBwYXVzZWQgc3RhdGUgaWYgdGhhdCB3cml0ZVxuICAgICAgLy8gYWxzbyByZXR1cm5lZCBmYWxzZS5cbiAgICAgIC8vID0+IENoZWNrIHdoZXRoZXIgYGRlc3RgIGlzIHN0aWxsIGEgcGlwaW5nIGRlc3RpbmF0aW9uLlxuICAgICAgaWYgKChzdGF0ZS5waXBlc0NvdW50ID09PSAxICYmIHN0YXRlLnBpcGVzID09PSBkZXN0IHx8IHN0YXRlLnBpcGVzQ291bnQgPiAxICYmIGluZGV4T2Yoc3RhdGUucGlwZXMsIGRlc3QpICE9PSAtMSkgJiYgIWNsZWFuZWRVcCkge1xuICAgICAgICBkZWJ1ZygnZmFsc2Ugd3JpdGUgcmVzcG9uc2UsIHBhdXNlJywgc3JjLl9yZWFkYWJsZVN0YXRlLmF3YWl0RHJhaW4pO1xuICAgICAgICBzcmMuX3JlYWRhYmxlU3RhdGUuYXdhaXREcmFpbisrO1xuICAgICAgICBpbmNyZWFzZWRBd2FpdERyYWluID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHNyYy5wYXVzZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGlmIHRoZSBkZXN0IGhhcyBhbiBlcnJvciwgdGhlbiBzdG9wIHBpcGluZyBpbnRvIGl0LlxuICAvLyBob3dldmVyLCBkb24ndCBzdXBwcmVzcyB0aGUgdGhyb3dpbmcgYmVoYXZpb3IgZm9yIHRoaXMuXG4gIGZ1bmN0aW9uIG9uZXJyb3IoZXIpIHtcbiAgICBkZWJ1Zygnb25lcnJvcicsIGVyKTtcbiAgICB1bnBpcGUoKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpO1xuICAgIGlmIChFRWxpc3RlbmVyQ291bnQoZGVzdCwgJ2Vycm9yJykgPT09IDApIGRlc3QuZW1pdCgnZXJyb3InLCBlcik7XG4gIH1cblxuICAvLyBNYWtlIHN1cmUgb3VyIGVycm9yIGhhbmRsZXIgaXMgYXR0YWNoZWQgYmVmb3JlIHVzZXJsYW5kIG9uZXMuXG4gIHByZXBlbmRMaXN0ZW5lcihkZXN0LCAnZXJyb3InLCBvbmVycm9yKTtcblxuICAvLyBCb3RoIGNsb3NlIGFuZCBmaW5pc2ggc2hvdWxkIHRyaWdnZXIgdW5waXBlLCBidXQgb25seSBvbmNlLlxuICBmdW5jdGlvbiBvbmNsb3NlKCkge1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2ZpbmlzaCcsIG9uZmluaXNoKTtcbiAgICB1bnBpcGUoKTtcbiAgfVxuICBkZXN0Lm9uY2UoJ2Nsb3NlJywgb25jbG9zZSk7XG4gIGZ1bmN0aW9uIG9uZmluaXNoKCkge1xuICAgIGRlYnVnKCdvbmZpbmlzaCcpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7XG4gICAgdW5waXBlKCk7XG4gIH1cbiAgZGVzdC5vbmNlKCdmaW5pc2gnLCBvbmZpbmlzaCk7XG5cbiAgZnVuY3Rpb24gdW5waXBlKCkge1xuICAgIGRlYnVnKCd1bnBpcGUnKTtcbiAgICBzcmMudW5waXBlKGRlc3QpO1xuICB9XG5cbiAgLy8gdGVsbCB0aGUgZGVzdCB0aGF0IGl0J3MgYmVpbmcgcGlwZWQgdG9cbiAgZGVzdC5lbWl0KCdwaXBlJywgc3JjKTtcblxuICAvLyBzdGFydCB0aGUgZmxvdyBpZiBpdCBoYXNuJ3QgYmVlbiBzdGFydGVkIGFscmVhZHkuXG4gIGlmICghc3RhdGUuZmxvd2luZykge1xuICAgIGRlYnVnKCdwaXBlIHJlc3VtZScpO1xuICAgIHNyYy5yZXN1bWUoKTtcbiAgfVxuXG4gIHJldHVybiBkZXN0O1xufTtcblxuZnVuY3Rpb24gcGlwZU9uRHJhaW4oc3JjKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHN0YXRlID0gc3JjLl9yZWFkYWJsZVN0YXRlO1xuICAgIGRlYnVnKCdwaXBlT25EcmFpbicsIHN0YXRlLmF3YWl0RHJhaW4pO1xuICAgIGlmIChzdGF0ZS5hd2FpdERyYWluKSBzdGF0ZS5hd2FpdERyYWluLS07XG4gICAgaWYgKHN0YXRlLmF3YWl0RHJhaW4gPT09IDAgJiYgRUVsaXN0ZW5lckNvdW50KHNyYywgJ2RhdGEnKSkge1xuICAgICAgc3RhdGUuZmxvd2luZyA9IHRydWU7XG4gICAgICBmbG93KHNyYyk7XG4gICAgfVxuICB9O1xufVxuXG5SZWFkYWJsZS5wcm90b3R5cGUudW5waXBlID0gZnVuY3Rpb24gKGRlc3QpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgdmFyIHVucGlwZUluZm8gPSB7IGhhc1VucGlwZWQ6IGZhbHNlIH07XG5cbiAgLy8gaWYgd2UncmUgbm90IHBpcGluZyBhbnl3aGVyZSwgdGhlbiBkbyBub3RoaW5nLlxuICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMCkgcmV0dXJuIHRoaXM7XG5cbiAgLy8ganVzdCBvbmUgZGVzdGluYXRpb24uICBtb3N0IGNvbW1vbiBjYXNlLlxuICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMSkge1xuICAgIC8vIHBhc3NlZCBpbiBvbmUsIGJ1dCBpdCdzIG5vdCB0aGUgcmlnaHQgb25lLlxuICAgIGlmIChkZXN0ICYmIGRlc3QgIT09IHN0YXRlLnBpcGVzKSByZXR1cm4gdGhpcztcblxuICAgIGlmICghZGVzdCkgZGVzdCA9IHN0YXRlLnBpcGVzO1xuXG4gICAgLy8gZ290IGEgbWF0Y2guXG4gICAgc3RhdGUucGlwZXMgPSBudWxsO1xuICAgIHN0YXRlLnBpcGVzQ291bnQgPSAwO1xuICAgIHN0YXRlLmZsb3dpbmcgPSBmYWxzZTtcbiAgICBpZiAoZGVzdCkgZGVzdC5lbWl0KCd1bnBpcGUnLCB0aGlzLCB1bnBpcGVJbmZvKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIHNsb3cgY2FzZS4gbXVsdGlwbGUgcGlwZSBkZXN0aW5hdGlvbnMuXG5cbiAgaWYgKCFkZXN0KSB7XG4gICAgLy8gcmVtb3ZlIGFsbC5cbiAgICB2YXIgZGVzdHMgPSBzdGF0ZS5waXBlcztcbiAgICB2YXIgbGVuID0gc3RhdGUucGlwZXNDb3VudDtcbiAgICBzdGF0ZS5waXBlcyA9IG51bGw7XG4gICAgc3RhdGUucGlwZXNDb3VudCA9IDA7XG4gICAgc3RhdGUuZmxvd2luZyA9IGZhbHNlO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgZGVzdHNbaV0uZW1pdCgndW5waXBlJywgdGhpcywgdW5waXBlSW5mbyk7XG4gICAgfXJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gdHJ5IHRvIGZpbmQgdGhlIHJpZ2h0IG9uZS5cbiAgdmFyIGluZGV4ID0gaW5kZXhPZihzdGF0ZS5waXBlcywgZGVzdCk7XG4gIGlmIChpbmRleCA9PT0gLTEpIHJldHVybiB0aGlzO1xuXG4gIHN0YXRlLnBpcGVzLnNwbGljZShpbmRleCwgMSk7XG4gIHN0YXRlLnBpcGVzQ291bnQgLT0gMTtcbiAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDEpIHN0YXRlLnBpcGVzID0gc3RhdGUucGlwZXNbMF07XG5cbiAgZGVzdC5lbWl0KCd1bnBpcGUnLCB0aGlzLCB1bnBpcGVJbmZvKTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIHNldCB1cCBkYXRhIGV2ZW50cyBpZiB0aGV5IGFyZSBhc2tlZCBmb3Jcbi8vIEVuc3VyZSByZWFkYWJsZSBsaXN0ZW5lcnMgZXZlbnR1YWxseSBnZXQgc29tZXRoaW5nXG5SZWFkYWJsZS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXYsIGZuKSB7XG4gIHZhciByZXMgPSBTdHJlYW0ucHJvdG90eXBlLm9uLmNhbGwodGhpcywgZXYsIGZuKTtcblxuICBpZiAoZXYgPT09ICdkYXRhJykge1xuICAgIC8vIFN0YXJ0IGZsb3dpbmcgb24gbmV4dCB0aWNrIGlmIHN0cmVhbSBpc24ndCBleHBsaWNpdGx5IHBhdXNlZFxuICAgIGlmICh0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcgIT09IGZhbHNlKSB0aGlzLnJlc3VtZSgpO1xuICB9IGVsc2UgaWYgKGV2ID09PSAncmVhZGFibGUnKSB7XG4gICAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgICBpZiAoIXN0YXRlLmVuZEVtaXR0ZWQgJiYgIXN0YXRlLnJlYWRhYmxlTGlzdGVuaW5nKSB7XG4gICAgICBzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZyA9IHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgICBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTtcbiAgICAgIGlmICghc3RhdGUucmVhZGluZykge1xuICAgICAgICBwbmEubmV4dFRpY2soblJlYWRpbmdOZXh0VGljaywgdGhpcyk7XG4gICAgICB9IGVsc2UgaWYgKHN0YXRlLmxlbmd0aCkge1xuICAgICAgICBlbWl0UmVhZGFibGUodGhpcyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlcztcbn07XG5SZWFkYWJsZS5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBSZWFkYWJsZS5wcm90b3R5cGUub247XG5cbmZ1bmN0aW9uIG5SZWFkaW5nTmV4dFRpY2soc2VsZikge1xuICBkZWJ1ZygncmVhZGFibGUgbmV4dHRpY2sgcmVhZCAwJyk7XG4gIHNlbGYucmVhZCgwKTtcbn1cblxuLy8gcGF1c2UoKSBhbmQgcmVzdW1lKCkgYXJlIHJlbW5hbnRzIG9mIHRoZSBsZWdhY3kgcmVhZGFibGUgc3RyZWFtIEFQSVxuLy8gSWYgdGhlIHVzZXIgdXNlcyB0aGVtLCB0aGVuIHN3aXRjaCBpbnRvIG9sZCBtb2RlLlxuUmVhZGFibGUucHJvdG90eXBlLnJlc3VtZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgaWYgKCFzdGF0ZS5mbG93aW5nKSB7XG4gICAgZGVidWcoJ3Jlc3VtZScpO1xuICAgIHN0YXRlLmZsb3dpbmcgPSB0cnVlO1xuICAgIHJlc3VtZSh0aGlzLCBzdGF0ZSk7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5mdW5jdGlvbiByZXN1bWUoc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoIXN0YXRlLnJlc3VtZVNjaGVkdWxlZCkge1xuICAgIHN0YXRlLnJlc3VtZVNjaGVkdWxlZCA9IHRydWU7XG4gICAgcG5hLm5leHRUaWNrKHJlc3VtZV8sIHN0cmVhbSwgc3RhdGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlc3VtZV8oc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoIXN0YXRlLnJlYWRpbmcpIHtcbiAgICBkZWJ1ZygncmVzdW1lIHJlYWQgMCcpO1xuICAgIHN0cmVhbS5yZWFkKDApO1xuICB9XG5cbiAgc3RhdGUucmVzdW1lU2NoZWR1bGVkID0gZmFsc2U7XG4gIHN0YXRlLmF3YWl0RHJhaW4gPSAwO1xuICBzdHJlYW0uZW1pdCgncmVzdW1lJyk7XG4gIGZsb3coc3RyZWFtKTtcbiAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgIXN0YXRlLnJlYWRpbmcpIHN0cmVhbS5yZWFkKDApO1xufVxuXG5SZWFkYWJsZS5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiAoKSB7XG4gIGRlYnVnKCdjYWxsIHBhdXNlIGZsb3dpbmc9JWonLCB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcpO1xuICBpZiAoZmFsc2UgIT09IHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZykge1xuICAgIGRlYnVnKCdwYXVzZScpO1xuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyA9IGZhbHNlO1xuICAgIHRoaXMuZW1pdCgncGF1c2UnKTtcbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbmZ1bmN0aW9uIGZsb3coc3RyZWFtKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTtcbiAgZGVidWcoJ2Zsb3cnLCBzdGF0ZS5mbG93aW5nKTtcbiAgd2hpbGUgKHN0YXRlLmZsb3dpbmcgJiYgc3RyZWFtLnJlYWQoKSAhPT0gbnVsbCkge31cbn1cblxuLy8gd3JhcCBhbiBvbGQtc3R5bGUgc3RyZWFtIGFzIHRoZSBhc3luYyBkYXRhIHNvdXJjZS5cbi8vIFRoaXMgaXMgKm5vdCogcGFydCBvZiB0aGUgcmVhZGFibGUgc3RyZWFtIGludGVyZmFjZS5cbi8vIEl0IGlzIGFuIHVnbHkgdW5mb3J0dW5hdGUgbWVzcyBvZiBoaXN0b3J5LlxuUmVhZGFibGUucHJvdG90eXBlLndyYXAgPSBmdW5jdGlvbiAoc3RyZWFtKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgdmFyIHBhdXNlZCA9IGZhbHNlO1xuXG4gIHN0cmVhbS5vbignZW5kJywgZnVuY3Rpb24gKCkge1xuICAgIGRlYnVnKCd3cmFwcGVkIGVuZCcpO1xuICAgIGlmIChzdGF0ZS5kZWNvZGVyICYmICFzdGF0ZS5lbmRlZCkge1xuICAgICAgdmFyIGNodW5rID0gc3RhdGUuZGVjb2Rlci5lbmQoKTtcbiAgICAgIGlmIChjaHVuayAmJiBjaHVuay5sZW5ndGgpIF90aGlzLnB1c2goY2h1bmspO1xuICAgIH1cblxuICAgIF90aGlzLnB1c2gobnVsbCk7XG4gIH0pO1xuXG4gIHN0cmVhbS5vbignZGF0YScsIGZ1bmN0aW9uIChjaHVuaykge1xuICAgIGRlYnVnKCd3cmFwcGVkIGRhdGEnKTtcbiAgICBpZiAoc3RhdGUuZGVjb2RlcikgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLndyaXRlKGNodW5rKTtcblxuICAgIC8vIGRvbid0IHNraXAgb3ZlciBmYWxzeSB2YWx1ZXMgaW4gb2JqZWN0TW9kZVxuICAgIGlmIChzdGF0ZS5vYmplY3RNb2RlICYmIChjaHVuayA9PT0gbnVsbCB8fCBjaHVuayA9PT0gdW5kZWZpbmVkKSkgcmV0dXJuO2Vsc2UgaWYgKCFzdGF0ZS5vYmplY3RNb2RlICYmICghY2h1bmsgfHwgIWNodW5rLmxlbmd0aCkpIHJldHVybjtcblxuICAgIHZhciByZXQgPSBfdGhpcy5wdXNoKGNodW5rKTtcbiAgICBpZiAoIXJldCkge1xuICAgICAgcGF1c2VkID0gdHJ1ZTtcbiAgICAgIHN0cmVhbS5wYXVzZSgpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gcHJveHkgYWxsIHRoZSBvdGhlciBtZXRob2RzLlxuICAvLyBpbXBvcnRhbnQgd2hlbiB3cmFwcGluZyBmaWx0ZXJzIGFuZCBkdXBsZXhlcy5cbiAgZm9yICh2YXIgaSBpbiBzdHJlYW0pIHtcbiAgICBpZiAodGhpc1tpXSA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBzdHJlYW1baV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXNbaV0gPSBmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHN0cmVhbVttZXRob2RdLmFwcGx5KHN0cmVhbSwgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICAgIH0oaSk7XG4gICAgfVxuICB9XG5cbiAgLy8gcHJveHkgY2VydGFpbiBpbXBvcnRhbnQgZXZlbnRzLlxuICBmb3IgKHZhciBuID0gMDsgbiA8IGtQcm94eUV2ZW50cy5sZW5ndGg7IG4rKykge1xuICAgIHN0cmVhbS5vbihrUHJveHlFdmVudHNbbl0sIHRoaXMuZW1pdC5iaW5kKHRoaXMsIGtQcm94eUV2ZW50c1tuXSkpO1xuICB9XG5cbiAgLy8gd2hlbiB3ZSB0cnkgdG8gY29uc3VtZSBzb21lIG1vcmUgYnl0ZXMsIHNpbXBseSB1bnBhdXNlIHRoZVxuICAvLyB1bmRlcmx5aW5nIHN0cmVhbS5cbiAgdGhpcy5fcmVhZCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgZGVidWcoJ3dyYXBwZWQgX3JlYWQnLCBuKTtcbiAgICBpZiAocGF1c2VkKSB7XG4gICAgICBwYXVzZWQgPSBmYWxzZTtcbiAgICAgIHN0cmVhbS5yZXN1bWUoKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhZGFibGUucHJvdG90eXBlLCAncmVhZGFibGVIaWdoV2F0ZXJNYXJrJywge1xuICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZVxuICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW5cbiAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsXG4gIGVudW1lcmFibGU6IGZhbHNlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5oaWdoV2F0ZXJNYXJrO1xuICB9XG59KTtcblxuLy8gZXhwb3NlZCBmb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5LlxuUmVhZGFibGUuX2Zyb21MaXN0ID0gZnJvbUxpc3Q7XG5cbi8vIFBsdWNrIG9mZiBuIGJ5dGVzIGZyb20gYW4gYXJyYXkgb2YgYnVmZmVycy5cbi8vIExlbmd0aCBpcyB0aGUgY29tYmluZWQgbGVuZ3RocyBvZiBhbGwgdGhlIGJ1ZmZlcnMgaW4gdGhlIGxpc3QuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGJlIGlubGluYWJsZSwgc28gcGxlYXNlIHRha2UgY2FyZSB3aGVuIG1ha2luZ1xuLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS5cbmZ1bmN0aW9uIGZyb21MaXN0KG4sIHN0YXRlKSB7XG4gIC8vIG5vdGhpbmcgYnVmZmVyZWRcbiAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG5cbiAgdmFyIHJldDtcbiAgaWYgKHN0YXRlLm9iamVjdE1vZGUpIHJldCA9IHN0YXRlLmJ1ZmZlci5zaGlmdCgpO2Vsc2UgaWYgKCFuIHx8IG4gPj0gc3RhdGUubGVuZ3RoKSB7XG4gICAgLy8gcmVhZCBpdCBhbGwsIHRydW5jYXRlIHRoZSBsaXN0XG4gICAgaWYgKHN0YXRlLmRlY29kZXIpIHJldCA9IHN0YXRlLmJ1ZmZlci5qb2luKCcnKTtlbHNlIGlmIChzdGF0ZS5idWZmZXIubGVuZ3RoID09PSAxKSByZXQgPSBzdGF0ZS5idWZmZXIuaGVhZC5kYXRhO2Vsc2UgcmV0ID0gc3RhdGUuYnVmZmVyLmNvbmNhdChzdGF0ZS5sZW5ndGgpO1xuICAgIHN0YXRlLmJ1ZmZlci5jbGVhcigpO1xuICB9IGVsc2Uge1xuICAgIC8vIHJlYWQgcGFydCBvZiBsaXN0XG4gICAgcmV0ID0gZnJvbUxpc3RQYXJ0aWFsKG4sIHN0YXRlLmJ1ZmZlciwgc3RhdGUuZGVjb2Rlcik7XG4gIH1cblxuICByZXR1cm4gcmV0O1xufVxuXG4vLyBFeHRyYWN0cyBvbmx5IGVub3VnaCBidWZmZXJlZCBkYXRhIHRvIHNhdGlzZnkgdGhlIGFtb3VudCByZXF1ZXN0ZWQuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGJlIGlubGluYWJsZSwgc28gcGxlYXNlIHRha2UgY2FyZSB3aGVuIG1ha2luZ1xuLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS5cbmZ1bmN0aW9uIGZyb21MaXN0UGFydGlhbChuLCBsaXN0LCBoYXNTdHJpbmdzKSB7XG4gIHZhciByZXQ7XG4gIGlmIChuIDwgbGlzdC5oZWFkLmRhdGEubGVuZ3RoKSB7XG4gICAgLy8gc2xpY2UgaXMgdGhlIHNhbWUgZm9yIGJ1ZmZlcnMgYW5kIHN0cmluZ3NcbiAgICByZXQgPSBsaXN0LmhlYWQuZGF0YS5zbGljZSgwLCBuKTtcbiAgICBsaXN0LmhlYWQuZGF0YSA9IGxpc3QuaGVhZC5kYXRhLnNsaWNlKG4pO1xuICB9IGVsc2UgaWYgKG4gPT09IGxpc3QuaGVhZC5kYXRhLmxlbmd0aCkge1xuICAgIC8vIGZpcnN0IGNodW5rIGlzIGEgcGVyZmVjdCBtYXRjaFxuICAgIHJldCA9IGxpc3Quc2hpZnQoKTtcbiAgfSBlbHNlIHtcbiAgICAvLyByZXN1bHQgc3BhbnMgbW9yZSB0aGFuIG9uZSBidWZmZXJcbiAgICByZXQgPSBoYXNTdHJpbmdzID8gY29weUZyb21CdWZmZXJTdHJpbmcobiwgbGlzdCkgOiBjb3B5RnJvbUJ1ZmZlcihuLCBsaXN0KTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG4vLyBDb3BpZXMgYSBzcGVjaWZpZWQgYW1vdW50IG9mIGNoYXJhY3RlcnMgZnJvbSB0aGUgbGlzdCBvZiBidWZmZXJlZCBkYXRhXG4vLyBjaHVua3MuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGJlIGlubGluYWJsZSwgc28gcGxlYXNlIHRha2UgY2FyZSB3aGVuIG1ha2luZ1xuLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS5cbmZ1bmN0aW9uIGNvcHlGcm9tQnVmZmVyU3RyaW5nKG4sIGxpc3QpIHtcbiAgdmFyIHAgPSBsaXN0LmhlYWQ7XG4gIHZhciBjID0gMTtcbiAgdmFyIHJldCA9IHAuZGF0YTtcbiAgbiAtPSByZXQubGVuZ3RoO1xuICB3aGlsZSAocCA9IHAubmV4dCkge1xuICAgIHZhciBzdHIgPSBwLmRhdGE7XG4gICAgdmFyIG5iID0gbiA+IHN0ci5sZW5ndGggPyBzdHIubGVuZ3RoIDogbjtcbiAgICBpZiAobmIgPT09IHN0ci5sZW5ndGgpIHJldCArPSBzdHI7ZWxzZSByZXQgKz0gc3RyLnNsaWNlKDAsIG4pO1xuICAgIG4gLT0gbmI7XG4gICAgaWYgKG4gPT09IDApIHtcbiAgICAgIGlmIChuYiA9PT0gc3RyLmxlbmd0aCkge1xuICAgICAgICArK2M7XG4gICAgICAgIGlmIChwLm5leHQpIGxpc3QuaGVhZCA9IHAubmV4dDtlbHNlIGxpc3QuaGVhZCA9IGxpc3QudGFpbCA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaXN0LmhlYWQgPSBwO1xuICAgICAgICBwLmRhdGEgPSBzdHIuc2xpY2UobmIpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgICsrYztcbiAgfVxuICBsaXN0Lmxlbmd0aCAtPSBjO1xuICByZXR1cm4gcmV0O1xufVxuXG4vLyBDb3BpZXMgYSBzcGVjaWZpZWQgYW1vdW50IG9mIGJ5dGVzIGZyb20gdGhlIGxpc3Qgb2YgYnVmZmVyZWQgZGF0YSBjaHVua3MuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGJlIGlubGluYWJsZSwgc28gcGxlYXNlIHRha2UgY2FyZSB3aGVuIG1ha2luZ1xuLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS5cbmZ1bmN0aW9uIGNvcHlGcm9tQnVmZmVyKG4sIGxpc3QpIHtcbiAgdmFyIHJldCA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShuKTtcbiAgdmFyIHAgPSBsaXN0LmhlYWQ7XG4gIHZhciBjID0gMTtcbiAgcC5kYXRhLmNvcHkocmV0KTtcbiAgbiAtPSBwLmRhdGEubGVuZ3RoO1xuICB3aGlsZSAocCA9IHAubmV4dCkge1xuICAgIHZhciBidWYgPSBwLmRhdGE7XG4gICAgdmFyIG5iID0gbiA+IGJ1Zi5sZW5ndGggPyBidWYubGVuZ3RoIDogbjtcbiAgICBidWYuY29weShyZXQsIHJldC5sZW5ndGggLSBuLCAwLCBuYik7XG4gICAgbiAtPSBuYjtcbiAgICBpZiAobiA9PT0gMCkge1xuICAgICAgaWYgKG5iID09PSBidWYubGVuZ3RoKSB7XG4gICAgICAgICsrYztcbiAgICAgICAgaWYgKHAubmV4dCkgbGlzdC5oZWFkID0gcC5uZXh0O2Vsc2UgbGlzdC5oZWFkID0gbGlzdC50YWlsID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpc3QuaGVhZCA9IHA7XG4gICAgICAgIHAuZGF0YSA9IGJ1Zi5zbGljZShuYik7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgKytjO1xuICB9XG4gIGxpc3QubGVuZ3RoIC09IGM7XG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGVuZFJlYWRhYmxlKHN0cmVhbSkge1xuICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG5cbiAgLy8gSWYgd2UgZ2V0IGhlcmUgYmVmb3JlIGNvbnN1bWluZyBhbGwgdGhlIGJ5dGVzLCB0aGVuIHRoYXQgaXMgYVxuICAvLyBidWcgaW4gbm9kZS4gIFNob3VsZCBuZXZlciBoYXBwZW4uXG4gIGlmIChzdGF0ZS5sZW5ndGggPiAwKSB0aHJvdyBuZXcgRXJyb3IoJ1wiZW5kUmVhZGFibGUoKVwiIGNhbGxlZCBvbiBub24tZW1wdHkgc3RyZWFtJyk7XG5cbiAgaWYgKCFzdGF0ZS5lbmRFbWl0dGVkKSB7XG4gICAgc3RhdGUuZW5kZWQgPSB0cnVlO1xuICAgIHBuYS5uZXh0VGljayhlbmRSZWFkYWJsZU5ULCBzdGF0ZSwgc3RyZWFtKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBlbmRSZWFkYWJsZU5UKHN0YXRlLCBzdHJlYW0pIHtcbiAgLy8gQ2hlY2sgdGhhdCB3ZSBkaWRuJ3QgZ2V0IG9uZSBsYXN0IHVuc2hpZnQuXG4gIGlmICghc3RhdGUuZW5kRW1pdHRlZCAmJiBzdGF0ZS5sZW5ndGggPT09IDApIHtcbiAgICBzdGF0ZS5lbmRFbWl0dGVkID0gdHJ1ZTtcbiAgICBzdHJlYW0ucmVhZGFibGUgPSBmYWxzZTtcbiAgICBzdHJlYW0uZW1pdCgnZW5kJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5kZXhPZih4cywgeCkge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGlmICh4c1tpXSA9PT0geCkgcmV0dXJuIGk7XG4gIH1cbiAgcmV0dXJuIC0xO1xufSIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4vLyBhIHRyYW5zZm9ybSBzdHJlYW0gaXMgYSByZWFkYWJsZS93cml0YWJsZSBzdHJlYW0gd2hlcmUgeW91IGRvXG4vLyBzb21ldGhpbmcgd2l0aCB0aGUgZGF0YS4gIFNvbWV0aW1lcyBpdCdzIGNhbGxlZCBhIFwiZmlsdGVyXCIsXG4vLyBidXQgdGhhdCdzIG5vdCBhIGdyZWF0IG5hbWUgZm9yIGl0LCBzaW5jZSB0aGF0IGltcGxpZXMgYSB0aGluZyB3aGVyZVxuLy8gc29tZSBiaXRzIHBhc3MgdGhyb3VnaCwgYW5kIG90aGVycyBhcmUgc2ltcGx5IGlnbm9yZWQuICAoVGhhdCB3b3VsZFxuLy8gYmUgYSB2YWxpZCBleGFtcGxlIG9mIGEgdHJhbnNmb3JtLCBvZiBjb3Vyc2UuKVxuLy9cbi8vIFdoaWxlIHRoZSBvdXRwdXQgaXMgY2F1c2FsbHkgcmVsYXRlZCB0byB0aGUgaW5wdXQsIGl0J3Mgbm90IGFcbi8vIG5lY2Vzc2FyaWx5IHN5bW1ldHJpYyBvciBzeW5jaHJvbm91cyB0cmFuc2Zvcm1hdGlvbi4gIEZvciBleGFtcGxlLFxuLy8gYSB6bGliIHN0cmVhbSBtaWdodCB0YWtlIG11bHRpcGxlIHBsYWluLXRleHQgd3JpdGVzKCksIGFuZCB0aGVuXG4vLyBlbWl0IGEgc2luZ2xlIGNvbXByZXNzZWQgY2h1bmsgc29tZSB0aW1lIGluIHRoZSBmdXR1cmUuXG4vL1xuLy8gSGVyZSdzIGhvdyB0aGlzIHdvcmtzOlxuLy9cbi8vIFRoZSBUcmFuc2Zvcm0gc3RyZWFtIGhhcyBhbGwgdGhlIGFzcGVjdHMgb2YgdGhlIHJlYWRhYmxlIGFuZCB3cml0YWJsZVxuLy8gc3RyZWFtIGNsYXNzZXMuICBXaGVuIHlvdSB3cml0ZShjaHVuayksIHRoYXQgY2FsbHMgX3dyaXRlKGNodW5rLGNiKVxuLy8gaW50ZXJuYWxseSwgYW5kIHJldHVybnMgZmFsc2UgaWYgdGhlcmUncyBhIGxvdCBvZiBwZW5kaW5nIHdyaXRlc1xuLy8gYnVmZmVyZWQgdXAuICBXaGVuIHlvdSBjYWxsIHJlYWQoKSwgdGhhdCBjYWxscyBfcmVhZChuKSB1bnRpbFxuLy8gdGhlcmUncyBlbm91Z2ggcGVuZGluZyByZWFkYWJsZSBkYXRhIGJ1ZmZlcmVkIHVwLlxuLy9cbi8vIEluIGEgdHJhbnNmb3JtIHN0cmVhbSwgdGhlIHdyaXR0ZW4gZGF0YSBpcyBwbGFjZWQgaW4gYSBidWZmZXIuICBXaGVuXG4vLyBfcmVhZChuKSBpcyBjYWxsZWQsIGl0IHRyYW5zZm9ybXMgdGhlIHF1ZXVlZCB1cCBkYXRhLCBjYWxsaW5nIHRoZVxuLy8gYnVmZmVyZWQgX3dyaXRlIGNiJ3MgYXMgaXQgY29uc3VtZXMgY2h1bmtzLiAgSWYgY29uc3VtaW5nIGEgc2luZ2xlXG4vLyB3cml0dGVuIGNodW5rIHdvdWxkIHJlc3VsdCBpbiBtdWx0aXBsZSBvdXRwdXQgY2h1bmtzLCB0aGVuIHRoZSBmaXJzdFxuLy8gb3V0cHV0dGVkIGJpdCBjYWxscyB0aGUgcmVhZGNiLCBhbmQgc3Vic2VxdWVudCBjaHVua3MganVzdCBnbyBpbnRvXG4vLyB0aGUgcmVhZCBidWZmZXIsIGFuZCB3aWxsIGNhdXNlIGl0IHRvIGVtaXQgJ3JlYWRhYmxlJyBpZiBuZWNlc3NhcnkuXG4vL1xuLy8gVGhpcyB3YXksIGJhY2stcHJlc3N1cmUgaXMgYWN0dWFsbHkgZGV0ZXJtaW5lZCBieSB0aGUgcmVhZGluZyBzaWRlLFxuLy8gc2luY2UgX3JlYWQgaGFzIHRvIGJlIGNhbGxlZCB0byBzdGFydCBwcm9jZXNzaW5nIGEgbmV3IGNodW5rLiAgSG93ZXZlcixcbi8vIGEgcGF0aG9sb2dpY2FsIGluZmxhdGUgdHlwZSBvZiB0cmFuc2Zvcm0gY2FuIGNhdXNlIGV4Y2Vzc2l2ZSBidWZmZXJpbmdcbi8vIGhlcmUuICBGb3IgZXhhbXBsZSwgaW1hZ2luZSBhIHN0cmVhbSB3aGVyZSBldmVyeSBieXRlIG9mIGlucHV0IGlzXG4vLyBpbnRlcnByZXRlZCBhcyBhbiBpbnRlZ2VyIGZyb20gMC0yNTUsIGFuZCB0aGVuIHJlc3VsdHMgaW4gdGhhdCBtYW55XG4vLyBieXRlcyBvZiBvdXRwdXQuICBXcml0aW5nIHRoZSA0IGJ5dGVzIHtmZixmZixmZixmZn0gd291bGQgcmVzdWx0IGluXG4vLyAxa2Igb2YgZGF0YSBiZWluZyBvdXRwdXQuICBJbiB0aGlzIGNhc2UsIHlvdSBjb3VsZCB3cml0ZSBhIHZlcnkgc21hbGxcbi8vIGFtb3VudCBvZiBpbnB1dCwgYW5kIGVuZCB1cCB3aXRoIGEgdmVyeSBsYXJnZSBhbW91bnQgb2Ygb3V0cHV0LiAgSW5cbi8vIHN1Y2ggYSBwYXRob2xvZ2ljYWwgaW5mbGF0aW5nIG1lY2hhbmlzbSwgdGhlcmUnZCBiZSBubyB3YXkgdG8gdGVsbFxuLy8gdGhlIHN5c3RlbSB0byBzdG9wIGRvaW5nIHRoZSB0cmFuc2Zvcm0uICBBIHNpbmdsZSA0TUIgd3JpdGUgY291bGRcbi8vIGNhdXNlIHRoZSBzeXN0ZW0gdG8gcnVuIG91dCBvZiBtZW1vcnkuXG4vL1xuLy8gSG93ZXZlciwgZXZlbiBpbiBzdWNoIGEgcGF0aG9sb2dpY2FsIGNhc2UsIG9ubHkgYSBzaW5nbGUgd3JpdHRlbiBjaHVua1xuLy8gd291bGQgYmUgY29uc3VtZWQsIGFuZCB0aGVuIHRoZSByZXN0IHdvdWxkIHdhaXQgKHVuLXRyYW5zZm9ybWVkKSB1bnRpbFxuLy8gdGhlIHJlc3VsdHMgb2YgdGhlIHByZXZpb3VzIHRyYW5zZm9ybWVkIGNodW5rIHdlcmUgY29uc3VtZWQuXG5cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBUcmFuc2Zvcm07XG5cbnZhciBEdXBsZXggPSByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpO1xudXRpbC5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxudXRpbC5pbmhlcml0cyhUcmFuc2Zvcm0sIER1cGxleCk7XG5cbmZ1bmN0aW9uIGFmdGVyVHJhbnNmb3JtKGVyLCBkYXRhKSB7XG4gIHZhciB0cyA9IHRoaXMuX3RyYW5zZm9ybVN0YXRlO1xuICB0cy50cmFuc2Zvcm1pbmcgPSBmYWxzZTtcblxuICB2YXIgY2IgPSB0cy53cml0ZWNiO1xuXG4gIGlmICghY2IpIHtcbiAgICByZXR1cm4gdGhpcy5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignd3JpdGUgY2FsbGJhY2sgY2FsbGVkIG11bHRpcGxlIHRpbWVzJykpO1xuICB9XG5cbiAgdHMud3JpdGVjaHVuayA9IG51bGw7XG4gIHRzLndyaXRlY2IgPSBudWxsO1xuXG4gIGlmIChkYXRhICE9IG51bGwpIC8vIHNpbmdsZSBlcXVhbHMgY2hlY2sgZm9yIGJvdGggYG51bGxgIGFuZCBgdW5kZWZpbmVkYFxuICAgIHRoaXMucHVzaChkYXRhKTtcblxuICBjYihlcik7XG5cbiAgdmFyIHJzID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgcnMucmVhZGluZyA9IGZhbHNlO1xuICBpZiAocnMubmVlZFJlYWRhYmxlIHx8IHJzLmxlbmd0aCA8IHJzLmhpZ2hXYXRlck1hcmspIHtcbiAgICB0aGlzLl9yZWFkKHJzLmhpZ2hXYXRlck1hcmspO1xuICB9XG59XG5cbmZ1bmN0aW9uIFRyYW5zZm9ybShvcHRpb25zKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBUcmFuc2Zvcm0pKSByZXR1cm4gbmV3IFRyYW5zZm9ybShvcHRpb25zKTtcblxuICBEdXBsZXguY2FsbCh0aGlzLCBvcHRpb25zKTtcblxuICB0aGlzLl90cmFuc2Zvcm1TdGF0ZSA9IHtcbiAgICBhZnRlclRyYW5zZm9ybTogYWZ0ZXJUcmFuc2Zvcm0uYmluZCh0aGlzKSxcbiAgICBuZWVkVHJhbnNmb3JtOiBmYWxzZSxcbiAgICB0cmFuc2Zvcm1pbmc6IGZhbHNlLFxuICAgIHdyaXRlY2I6IG51bGwsXG4gICAgd3JpdGVjaHVuazogbnVsbCxcbiAgICB3cml0ZWVuY29kaW5nOiBudWxsXG4gIH07XG5cbiAgLy8gc3RhcnQgb3V0IGFza2luZyBmb3IgYSByZWFkYWJsZSBldmVudCBvbmNlIGRhdGEgaXMgdHJhbnNmb3JtZWQuXG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcblxuICAvLyB3ZSBoYXZlIGltcGxlbWVudGVkIHRoZSBfcmVhZCBtZXRob2QsIGFuZCBkb25lIHRoZSBvdGhlciB0aGluZ3NcbiAgLy8gdGhhdCBSZWFkYWJsZSB3YW50cyBiZWZvcmUgdGhlIGZpcnN0IF9yZWFkIGNhbGwsIHNvIHVuc2V0IHRoZVxuICAvLyBzeW5jIGd1YXJkIGZsYWcuXG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUuc3luYyA9IGZhbHNlO1xuXG4gIGlmIChvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnRyYW5zZm9ybSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fdHJhbnNmb3JtID0gb3B0aW9ucy50cmFuc2Zvcm07XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuZmx1c2ggPT09ICdmdW5jdGlvbicpIHRoaXMuX2ZsdXNoID0gb3B0aW9ucy5mbHVzaDtcbiAgfVxuXG4gIC8vIFdoZW4gdGhlIHdyaXRhYmxlIHNpZGUgZmluaXNoZXMsIHRoZW4gZmx1c2ggb3V0IGFueXRoaW5nIHJlbWFpbmluZy5cbiAgdGhpcy5vbigncHJlZmluaXNoJywgcHJlZmluaXNoKTtcbn1cblxuZnVuY3Rpb24gcHJlZmluaXNoKCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIGlmICh0eXBlb2YgdGhpcy5fZmx1c2ggPT09ICdmdW5jdGlvbicpIHtcbiAgICB0aGlzLl9mbHVzaChmdW5jdGlvbiAoZXIsIGRhdGEpIHtcbiAgICAgIGRvbmUoX3RoaXMsIGVyLCBkYXRhKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBkb25lKHRoaXMsIG51bGwsIG51bGwpO1xuICB9XG59XG5cblRyYW5zZm9ybS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcpIHtcbiAgdGhpcy5fdHJhbnNmb3JtU3RhdGUubmVlZFRyYW5zZm9ybSA9IGZhbHNlO1xuICByZXR1cm4gRHVwbGV4LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcywgY2h1bmssIGVuY29kaW5nKTtcbn07XG5cbi8vIFRoaXMgaXMgdGhlIHBhcnQgd2hlcmUgeW91IGRvIHN0dWZmIVxuLy8gb3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiBpbiBpbXBsZW1lbnRhdGlvbiBjbGFzc2VzLlxuLy8gJ2NodW5rJyBpcyBhbiBpbnB1dCBjaHVuay5cbi8vXG4vLyBDYWxsIGBwdXNoKG5ld0NodW5rKWAgdG8gcGFzcyBhbG9uZyB0cmFuc2Zvcm1lZCBvdXRwdXRcbi8vIHRvIHRoZSByZWFkYWJsZSBzaWRlLiAgWW91IG1heSBjYWxsICdwdXNoJyB6ZXJvIG9yIG1vcmUgdGltZXMuXG4vL1xuLy8gQ2FsbCBgY2IoZXJyKWAgd2hlbiB5b3UgYXJlIGRvbmUgd2l0aCB0aGlzIGNodW5rLiAgSWYgeW91IHBhc3Ncbi8vIGFuIGVycm9yLCB0aGVuIHRoYXQnbGwgcHV0IHRoZSBodXJ0IG9uIHRoZSB3aG9sZSBvcGVyYXRpb24uICBJZiB5b3Vcbi8vIG5ldmVyIGNhbGwgY2IoKSwgdGhlbiB5b3UnbGwgbmV2ZXIgZ2V0IGFub3RoZXIgY2h1bmsuXG5UcmFuc2Zvcm0ucHJvdG90eXBlLl90cmFuc2Zvcm0gPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB0aHJvdyBuZXcgRXJyb3IoJ190cmFuc2Zvcm0oKSBpcyBub3QgaW1wbGVtZW50ZWQnKTtcbn07XG5cblRyYW5zZm9ybS5wcm90b3R5cGUuX3dyaXRlID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgdmFyIHRzID0gdGhpcy5fdHJhbnNmb3JtU3RhdGU7XG4gIHRzLndyaXRlY2IgPSBjYjtcbiAgdHMud3JpdGVjaHVuayA9IGNodW5rO1xuICB0cy53cml0ZWVuY29kaW5nID0gZW5jb2Rpbmc7XG4gIGlmICghdHMudHJhbnNmb3JtaW5nKSB7XG4gICAgdmFyIHJzID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgICBpZiAodHMubmVlZFRyYW5zZm9ybSB8fCBycy5uZWVkUmVhZGFibGUgfHwgcnMubGVuZ3RoIDwgcnMuaGlnaFdhdGVyTWFyaykgdGhpcy5fcmVhZChycy5oaWdoV2F0ZXJNYXJrKTtcbiAgfVxufTtcblxuLy8gRG9lc24ndCBtYXR0ZXIgd2hhdCB0aGUgYXJncyBhcmUgaGVyZS5cbi8vIF90cmFuc2Zvcm0gZG9lcyBhbGwgdGhlIHdvcmsuXG4vLyBUaGF0IHdlIGdvdCBoZXJlIG1lYW5zIHRoYXQgdGhlIHJlYWRhYmxlIHNpZGUgd2FudHMgbW9yZSBkYXRhLlxuVHJhbnNmb3JtLnByb3RvdHlwZS5fcmVhZCA9IGZ1bmN0aW9uIChuKSB7XG4gIHZhciB0cyA9IHRoaXMuX3RyYW5zZm9ybVN0YXRlO1xuXG4gIGlmICh0cy53cml0ZWNodW5rICE9PSBudWxsICYmIHRzLndyaXRlY2IgJiYgIXRzLnRyYW5zZm9ybWluZykge1xuICAgIHRzLnRyYW5zZm9ybWluZyA9IHRydWU7XG4gICAgdGhpcy5fdHJhbnNmb3JtKHRzLndyaXRlY2h1bmssIHRzLndyaXRlZW5jb2RpbmcsIHRzLmFmdGVyVHJhbnNmb3JtKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBtYXJrIHRoYXQgd2UgbmVlZCBhIHRyYW5zZm9ybSwgc28gdGhhdCBhbnkgZGF0YSB0aGF0IGNvbWVzIGluXG4gICAgLy8gd2lsbCBnZXQgcHJvY2Vzc2VkLCBub3cgdGhhdCB3ZSd2ZSBhc2tlZCBmb3IgaXQuXG4gICAgdHMubmVlZFRyYW5zZm9ybSA9IHRydWU7XG4gIH1cbn07XG5cblRyYW5zZm9ybS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoZXJyLCBjYikge1xuICB2YXIgX3RoaXMyID0gdGhpcztcblxuICBEdXBsZXgucHJvdG90eXBlLl9kZXN0cm95LmNhbGwodGhpcywgZXJyLCBmdW5jdGlvbiAoZXJyMikge1xuICAgIGNiKGVycjIpO1xuICAgIF90aGlzMi5lbWl0KCdjbG9zZScpO1xuICB9KTtcbn07XG5cbmZ1bmN0aW9uIGRvbmUoc3RyZWFtLCBlciwgZGF0YSkge1xuICBpZiAoZXIpIHJldHVybiBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG5cbiAgaWYgKGRhdGEgIT0gbnVsbCkgLy8gc2luZ2xlIGVxdWFscyBjaGVjayBmb3IgYm90aCBgbnVsbGAgYW5kIGB1bmRlZmluZWRgXG4gICAgc3RyZWFtLnB1c2goZGF0YSk7XG5cbiAgLy8gaWYgdGhlcmUncyBub3RoaW5nIGluIHRoZSB3cml0ZSBidWZmZXIsIHRoZW4gdGhhdCBtZWFuc1xuICAvLyB0aGF0IG5vdGhpbmcgbW9yZSB3aWxsIGV2ZXIgYmUgcHJvdmlkZWRcbiAgaWYgKHN0cmVhbS5fd3JpdGFibGVTdGF0ZS5sZW5ndGgpIHRocm93IG5ldyBFcnJvcignQ2FsbGluZyB0cmFuc2Zvcm0gZG9uZSB3aGVuIHdzLmxlbmd0aCAhPSAwJyk7XG5cbiAgaWYgKHN0cmVhbS5fdHJhbnNmb3JtU3RhdGUudHJhbnNmb3JtaW5nKSB0aHJvdyBuZXcgRXJyb3IoJ0NhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiBzdGlsbCB0cmFuc2Zvcm1pbmcnKTtcblxuICByZXR1cm4gc3RyZWFtLnB1c2gobnVsbCk7XG59IiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbi8vIEEgYml0IHNpbXBsZXIgdGhhbiByZWFkYWJsZSBzdHJlYW1zLlxuLy8gSW1wbGVtZW50IGFuIGFzeW5jIC5fd3JpdGUoY2h1bmssIGVuY29kaW5nLCBjYiksIGFuZCBpdCdsbCBoYW5kbGUgYWxsXG4vLyB0aGUgZHJhaW4gZXZlbnQgZW1pc3Npb24gYW5kIGJ1ZmZlcmluZy5cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xuXG52YXIgcG5hID0gcmVxdWlyZSgncHJvY2Vzcy1uZXh0aWNrLWFyZ3MnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFdyaXRhYmxlO1xuXG4vKiA8cmVwbGFjZW1lbnQ+ICovXG5mdW5jdGlvbiBXcml0ZVJlcShjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIHRoaXMuY2h1bmsgPSBjaHVuaztcbiAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nO1xuICB0aGlzLmNhbGxiYWNrID0gY2I7XG4gIHRoaXMubmV4dCA9IG51bGw7XG59XG5cbi8vIEl0IHNlZW1zIGEgbGlua2VkIGxpc3QgYnV0IGl0IGlzIG5vdFxuLy8gdGhlcmUgd2lsbCBiZSBvbmx5IDIgb2YgdGhlc2UgZm9yIGVhY2ggc3RyZWFtXG5mdW5jdGlvbiBDb3JrZWRSZXF1ZXN0KHN0YXRlKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgdGhpcy5uZXh0ID0gbnVsbDtcbiAgdGhpcy5lbnRyeSA9IG51bGw7XG4gIHRoaXMuZmluaXNoID0gZnVuY3Rpb24gKCkge1xuICAgIG9uQ29ya2VkRmluaXNoKF90aGlzLCBzdGF0ZSk7XG4gIH07XG59XG4vKiA8L3JlcGxhY2VtZW50PiAqL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIGFzeW5jV3JpdGUgPSAhcHJvY2Vzcy5icm93c2VyICYmIFsndjAuMTAnLCAndjAuOS4nXS5pbmRleE9mKHByb2Nlc3MudmVyc2lvbi5zbGljZSgwLCA1KSkgPiAtMSA/IHNldEltbWVkaWF0ZSA6IHBuYS5uZXh0VGljaztcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIER1cGxleDtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5Xcml0YWJsZS5Xcml0YWJsZVN0YXRlID0gV3JpdGFibGVTdGF0ZTtcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7XG51dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIGludGVybmFsVXRpbCA9IHtcbiAgZGVwcmVjYXRlOiByZXF1aXJlKCd1dGlsLWRlcHJlY2F0ZScpXG59O1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgU3RyZWFtID0gcmVxdWlyZSgnLi9pbnRlcm5hbC9zdHJlYW1zL3N0cmVhbScpO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbi8qPHJlcGxhY2VtZW50PiovXG5cbnZhciBCdWZmZXIgPSByZXF1aXJlKCdzYWZlLWJ1ZmZlcicpLkJ1ZmZlcjtcbnZhciBPdXJVaW50OEFycmF5ID0gZ2xvYmFsLlVpbnQ4QXJyYXkgfHwgZnVuY3Rpb24gKCkge307XG5mdW5jdGlvbiBfdWludDhBcnJheVRvQnVmZmVyKGNodW5rKSB7XG4gIHJldHVybiBCdWZmZXIuZnJvbShjaHVuayk7XG59XG5mdW5jdGlvbiBfaXNVaW50OEFycmF5KG9iaikge1xuICByZXR1cm4gQnVmZmVyLmlzQnVmZmVyKG9iaikgfHwgb2JqIGluc3RhbmNlb2YgT3VyVWludDhBcnJheTtcbn1cblxuLyo8L3JlcGxhY2VtZW50PiovXG5cbnZhciBkZXN0cm95SW1wbCA9IHJlcXVpcmUoJy4vaW50ZXJuYWwvc3RyZWFtcy9kZXN0cm95Jyk7XG5cbnV0aWwuaW5oZXJpdHMoV3JpdGFibGUsIFN0cmVhbSk7XG5cbmZ1bmN0aW9uIG5vcCgpIHt9XG5cbmZ1bmN0aW9uIFdyaXRhYmxlU3RhdGUob3B0aW9ucywgc3RyZWFtKSB7XG4gIER1cGxleCA9IER1cGxleCB8fCByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgLy8gRHVwbGV4IHN0cmVhbXMgYXJlIGJvdGggcmVhZGFibGUgYW5kIHdyaXRhYmxlLCBidXQgc2hhcmVcbiAgLy8gdGhlIHNhbWUgb3B0aW9ucyBvYmplY3QuXG4gIC8vIEhvd2V2ZXIsIHNvbWUgY2FzZXMgcmVxdWlyZSBzZXR0aW5nIG9wdGlvbnMgdG8gZGlmZmVyZW50XG4gIC8vIHZhbHVlcyBmb3IgdGhlIHJlYWRhYmxlIGFuZCB0aGUgd3JpdGFibGUgc2lkZXMgb2YgdGhlIGR1cGxleCBzdHJlYW0uXG4gIC8vIFRoZXNlIG9wdGlvbnMgY2FuIGJlIHByb3ZpZGVkIHNlcGFyYXRlbHkgYXMgcmVhZGFibGVYWFggYW5kIHdyaXRhYmxlWFhYLlxuICB2YXIgaXNEdXBsZXggPSBzdHJlYW0gaW5zdGFuY2VvZiBEdXBsZXg7XG5cbiAgLy8gb2JqZWN0IHN0cmVhbSBmbGFnIHRvIGluZGljYXRlIHdoZXRoZXIgb3Igbm90IHRoaXMgc3RyZWFtXG4gIC8vIGNvbnRhaW5zIGJ1ZmZlcnMgb3Igb2JqZWN0cy5cbiAgdGhpcy5vYmplY3RNb2RlID0gISFvcHRpb25zLm9iamVjdE1vZGU7XG5cbiAgaWYgKGlzRHVwbGV4KSB0aGlzLm9iamVjdE1vZGUgPSB0aGlzLm9iamVjdE1vZGUgfHwgISFvcHRpb25zLndyaXRhYmxlT2JqZWN0TW9kZTtcblxuICAvLyB0aGUgcG9pbnQgYXQgd2hpY2ggd3JpdGUoKSBzdGFydHMgcmV0dXJuaW5nIGZhbHNlXG4gIC8vIE5vdGU6IDAgaXMgYSB2YWxpZCB2YWx1ZSwgbWVhbnMgdGhhdCB3ZSBhbHdheXMgcmV0dXJuIGZhbHNlIGlmXG4gIC8vIHRoZSBlbnRpcmUgYnVmZmVyIGlzIG5vdCBmbHVzaGVkIGltbWVkaWF0ZWx5IG9uIHdyaXRlKClcbiAgdmFyIGh3bSA9IG9wdGlvbnMuaGlnaFdhdGVyTWFyaztcbiAgdmFyIHdyaXRhYmxlSHdtID0gb3B0aW9ucy53cml0YWJsZUhpZ2hXYXRlck1hcms7XG4gIHZhciBkZWZhdWx0SHdtID0gdGhpcy5vYmplY3RNb2RlID8gMTYgOiAxNiAqIDEwMjQ7XG5cbiAgaWYgKGh3bSB8fCBod20gPT09IDApIHRoaXMuaGlnaFdhdGVyTWFyayA9IGh3bTtlbHNlIGlmIChpc0R1cGxleCAmJiAod3JpdGFibGVId20gfHwgd3JpdGFibGVId20gPT09IDApKSB0aGlzLmhpZ2hXYXRlck1hcmsgPSB3cml0YWJsZUh3bTtlbHNlIHRoaXMuaGlnaFdhdGVyTWFyayA9IGRlZmF1bHRId207XG5cbiAgLy8gY2FzdCB0byBpbnRzLlxuICB0aGlzLmhpZ2hXYXRlck1hcmsgPSBNYXRoLmZsb29yKHRoaXMuaGlnaFdhdGVyTWFyayk7XG5cbiAgLy8gaWYgX2ZpbmFsIGhhcyBiZWVuIGNhbGxlZFxuICB0aGlzLmZpbmFsQ2FsbGVkID0gZmFsc2U7XG5cbiAgLy8gZHJhaW4gZXZlbnQgZmxhZy5cbiAgdGhpcy5uZWVkRHJhaW4gPSBmYWxzZTtcbiAgLy8gYXQgdGhlIHN0YXJ0IG9mIGNhbGxpbmcgZW5kKClcbiAgdGhpcy5lbmRpbmcgPSBmYWxzZTtcbiAgLy8gd2hlbiBlbmQoKSBoYXMgYmVlbiBjYWxsZWQsIGFuZCByZXR1cm5lZFxuICB0aGlzLmVuZGVkID0gZmFsc2U7XG4gIC8vIHdoZW4gJ2ZpbmlzaCcgaXMgZW1pdHRlZFxuICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7XG5cbiAgLy8gaGFzIGl0IGJlZW4gZGVzdHJveWVkXG4gIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7XG5cbiAgLy8gc2hvdWxkIHdlIGRlY29kZSBzdHJpbmdzIGludG8gYnVmZmVycyBiZWZvcmUgcGFzc2luZyB0byBfd3JpdGU/XG4gIC8vIHRoaXMgaXMgaGVyZSBzbyB0aGF0IHNvbWUgbm9kZS1jb3JlIHN0cmVhbXMgY2FuIG9wdGltaXplIHN0cmluZ1xuICAvLyBoYW5kbGluZyBhdCBhIGxvd2VyIGxldmVsLlxuICB2YXIgbm9EZWNvZGUgPSBvcHRpb25zLmRlY29kZVN0cmluZ3MgPT09IGZhbHNlO1xuICB0aGlzLmRlY29kZVN0cmluZ3MgPSAhbm9EZWNvZGU7XG5cbiAgLy8gQ3J5cHRvIGlzIGtpbmQgb2Ygb2xkIGFuZCBjcnVzdHkuICBIaXN0b3JpY2FsbHksIGl0cyBkZWZhdWx0IHN0cmluZ1xuICAvLyBlbmNvZGluZyBpcyAnYmluYXJ5JyBzbyB3ZSBoYXZlIHRvIG1ha2UgdGhpcyBjb25maWd1cmFibGUuXG4gIC8vIEV2ZXJ5dGhpbmcgZWxzZSBpbiB0aGUgdW5pdmVyc2UgdXNlcyAndXRmOCcsIHRob3VnaC5cbiAgdGhpcy5kZWZhdWx0RW5jb2RpbmcgPSBvcHRpb25zLmRlZmF1bHRFbmNvZGluZyB8fCAndXRmOCc7XG5cbiAgLy8gbm90IGFuIGFjdHVhbCBidWZmZXIgd2Uga2VlcCB0cmFjayBvZiwgYnV0IGEgbWVhc3VyZW1lbnRcbiAgLy8gb2YgaG93IG11Y2ggd2UncmUgd2FpdGluZyB0byBnZXQgcHVzaGVkIHRvIHNvbWUgdW5kZXJseWluZ1xuICAvLyBzb2NrZXQgb3IgZmlsZS5cbiAgdGhpcy5sZW5ndGggPSAwO1xuXG4gIC8vIGEgZmxhZyB0byBzZWUgd2hlbiB3ZSdyZSBpbiB0aGUgbWlkZGxlIG9mIGEgd3JpdGUuXG4gIHRoaXMud3JpdGluZyA9IGZhbHNlO1xuXG4gIC8vIHdoZW4gdHJ1ZSBhbGwgd3JpdGVzIHdpbGwgYmUgYnVmZmVyZWQgdW50aWwgLnVuY29yaygpIGNhbGxcbiAgdGhpcy5jb3JrZWQgPSAwO1xuXG4gIC8vIGEgZmxhZyB0byBiZSBhYmxlIHRvIHRlbGwgaWYgdGhlIG9ud3JpdGUgY2IgaXMgY2FsbGVkIGltbWVkaWF0ZWx5LFxuICAvLyBvciBvbiBhIGxhdGVyIHRpY2suICBXZSBzZXQgdGhpcyB0byB0cnVlIGF0IGZpcnN0LCBiZWNhdXNlIGFueVxuICAvLyBhY3Rpb25zIHRoYXQgc2hvdWxkbid0IGhhcHBlbiB1bnRpbCBcImxhdGVyXCIgc2hvdWxkIGdlbmVyYWxseSBhbHNvXG4gIC8vIG5vdCBoYXBwZW4gYmVmb3JlIHRoZSBmaXJzdCB3cml0ZSBjYWxsLlxuICB0aGlzLnN5bmMgPSB0cnVlO1xuXG4gIC8vIGEgZmxhZyB0byBrbm93IGlmIHdlJ3JlIHByb2Nlc3NpbmcgcHJldmlvdXNseSBidWZmZXJlZCBpdGVtcywgd2hpY2hcbiAgLy8gbWF5IGNhbGwgdGhlIF93cml0ZSgpIGNhbGxiYWNrIGluIHRoZSBzYW1lIHRpY2ssIHNvIHRoYXQgd2UgZG9uJ3RcbiAgLy8gZW5kIHVwIGluIGFuIG92ZXJsYXBwZWQgb253cml0ZSBzaXR1YXRpb24uXG4gIHRoaXMuYnVmZmVyUHJvY2Vzc2luZyA9IGZhbHNlO1xuXG4gIC8vIHRoZSBjYWxsYmFjayB0aGF0J3MgcGFzc2VkIHRvIF93cml0ZShjaHVuayxjYilcbiAgdGhpcy5vbndyaXRlID0gZnVuY3Rpb24gKGVyKSB7XG4gICAgb253cml0ZShzdHJlYW0sIGVyKTtcbiAgfTtcblxuICAvLyB0aGUgY2FsbGJhY2sgdGhhdCB0aGUgdXNlciBzdXBwbGllcyB0byB3cml0ZShjaHVuayxlbmNvZGluZyxjYilcbiAgdGhpcy53cml0ZWNiID0gbnVsbDtcblxuICAvLyB0aGUgYW1vdW50IHRoYXQgaXMgYmVpbmcgd3JpdHRlbiB3aGVuIF93cml0ZSBpcyBjYWxsZWQuXG4gIHRoaXMud3JpdGVsZW4gPSAwO1xuXG4gIHRoaXMuYnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDtcbiAgdGhpcy5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDtcblxuICAvLyBudW1iZXIgb2YgcGVuZGluZyB1c2VyLXN1cHBsaWVkIHdyaXRlIGNhbGxiYWNrc1xuICAvLyB0aGlzIG11c3QgYmUgMCBiZWZvcmUgJ2ZpbmlzaCcgY2FuIGJlIGVtaXR0ZWRcbiAgdGhpcy5wZW5kaW5nY2IgPSAwO1xuXG4gIC8vIGVtaXQgcHJlZmluaXNoIGlmIHRoZSBvbmx5IHRoaW5nIHdlJ3JlIHdhaXRpbmcgZm9yIGlzIF93cml0ZSBjYnNcbiAgLy8gVGhpcyBpcyByZWxldmFudCBmb3Igc3luY2hyb25vdXMgVHJhbnNmb3JtIHN0cmVhbXNcbiAgdGhpcy5wcmVmaW5pc2hlZCA9IGZhbHNlO1xuXG4gIC8vIFRydWUgaWYgdGhlIGVycm9yIHdhcyBhbHJlYWR5IGVtaXR0ZWQgYW5kIHNob3VsZCBub3QgYmUgdGhyb3duIGFnYWluXG4gIHRoaXMuZXJyb3JFbWl0dGVkID0gZmFsc2U7XG5cbiAgLy8gY291bnQgYnVmZmVyZWQgcmVxdWVzdHNcbiAgdGhpcy5idWZmZXJlZFJlcXVlc3RDb3VudCA9IDA7XG5cbiAgLy8gYWxsb2NhdGUgdGhlIGZpcnN0IENvcmtlZFJlcXVlc3QsIHRoZXJlIGlzIGFsd2F5c1xuICAvLyBvbmUgYWxsb2NhdGVkIGFuZCBmcmVlIHRvIHVzZSwgYW5kIHdlIG1haW50YWluIGF0IG1vc3QgdHdvXG4gIHRoaXMuY29ya2VkUmVxdWVzdHNGcmVlID0gbmV3IENvcmtlZFJlcXVlc3QodGhpcyk7XG59XG5cbldyaXRhYmxlU3RhdGUucHJvdG90eXBlLmdldEJ1ZmZlciA9IGZ1bmN0aW9uIGdldEJ1ZmZlcigpIHtcbiAgdmFyIGN1cnJlbnQgPSB0aGlzLmJ1ZmZlcmVkUmVxdWVzdDtcbiAgdmFyIG91dCA9IFtdO1xuICB3aGlsZSAoY3VycmVudCkge1xuICAgIG91dC5wdXNoKGN1cnJlbnQpO1xuICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHQ7XG4gIH1cbiAgcmV0dXJuIG91dDtcbn07XG5cbihmdW5jdGlvbiAoKSB7XG4gIHRyeSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdyaXRhYmxlU3RhdGUucHJvdG90eXBlLCAnYnVmZmVyJywge1xuICAgICAgZ2V0OiBpbnRlcm5hbFV0aWwuZGVwcmVjYXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QnVmZmVyKCk7XG4gICAgICB9LCAnX3dyaXRhYmxlU3RhdGUuYnVmZmVyIGlzIGRlcHJlY2F0ZWQuIFVzZSBfd3JpdGFibGVTdGF0ZS5nZXRCdWZmZXIgJyArICdpbnN0ZWFkLicsICdERVAwMDAzJylcbiAgICB9KTtcbiAgfSBjYXRjaCAoXykge31cbn0pKCk7XG5cbi8vIFRlc3QgX3dyaXRhYmxlU3RhdGUgZm9yIGluaGVyaXRhbmNlIHRvIGFjY291bnQgZm9yIER1cGxleCBzdHJlYW1zLFxuLy8gd2hvc2UgcHJvdG90eXBlIGNoYWluIG9ubHkgcG9pbnRzIHRvIFJlYWRhYmxlLlxudmFyIHJlYWxIYXNJbnN0YW5jZTtcbmlmICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5oYXNJbnN0YW5jZSAmJiB0eXBlb2YgRnVuY3Rpb24ucHJvdG90eXBlW1N5bWJvbC5oYXNJbnN0YW5jZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgcmVhbEhhc0luc3RhbmNlID0gRnVuY3Rpb24ucHJvdG90eXBlW1N5bWJvbC5oYXNJbnN0YW5jZV07XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZSwgU3ltYm9sLmhhc0luc3RhbmNlLCB7XG4gICAgdmFsdWU6IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICAgIGlmIChyZWFsSGFzSW5zdGFuY2UuY2FsbCh0aGlzLCBvYmplY3QpKSByZXR1cm4gdHJ1ZTtcbiAgICAgIGlmICh0aGlzICE9PSBXcml0YWJsZSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICByZXR1cm4gb2JqZWN0ICYmIG9iamVjdC5fd3JpdGFibGVTdGF0ZSBpbnN0YW5jZW9mIFdyaXRhYmxlU3RhdGU7XG4gICAgfVxuICB9KTtcbn0gZWxzZSB7XG4gIHJlYWxIYXNJbnN0YW5jZSA9IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgdGhpcztcbiAgfTtcbn1cblxuZnVuY3Rpb24gV3JpdGFibGUob3B0aW9ucykge1xuICBEdXBsZXggPSBEdXBsZXggfHwgcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpO1xuXG4gIC8vIFdyaXRhYmxlIGN0b3IgaXMgYXBwbGllZCB0byBEdXBsZXhlcywgdG9vLlxuICAvLyBgcmVhbEhhc0luc3RhbmNlYCBpcyBuZWNlc3NhcnkgYmVjYXVzZSB1c2luZyBwbGFpbiBgaW5zdGFuY2VvZmBcbiAgLy8gd291bGQgcmV0dXJuIGZhbHNlLCBhcyBubyBgX3dyaXRhYmxlU3RhdGVgIHByb3BlcnR5IGlzIGF0dGFjaGVkLlxuXG4gIC8vIFRyeWluZyB0byB1c2UgdGhlIGN1c3RvbSBgaW5zdGFuY2VvZmAgZm9yIFdyaXRhYmxlIGhlcmUgd2lsbCBhbHNvIGJyZWFrIHRoZVxuICAvLyBOb2RlLmpzIExhenlUcmFuc2Zvcm0gaW1wbGVtZW50YXRpb24sIHdoaWNoIGhhcyBhIG5vbi10cml2aWFsIGdldHRlciBmb3JcbiAgLy8gYF93cml0YWJsZVN0YXRlYCB0aGF0IHdvdWxkIGxlYWQgdG8gaW5maW5pdGUgcmVjdXJzaW9uLlxuICBpZiAoIXJlYWxIYXNJbnN0YW5jZS5jYWxsKFdyaXRhYmxlLCB0aGlzKSAmJiAhKHRoaXMgaW5zdGFuY2VvZiBEdXBsZXgpKSB7XG4gICAgcmV0dXJuIG5ldyBXcml0YWJsZShvcHRpb25zKTtcbiAgfVxuXG4gIHRoaXMuX3dyaXRhYmxlU3RhdGUgPSBuZXcgV3JpdGFibGVTdGF0ZShvcHRpb25zLCB0aGlzKTtcblxuICAvLyBsZWdhY3kuXG4gIHRoaXMud3JpdGFibGUgPSB0cnVlO1xuXG4gIGlmIChvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLndyaXRlID09PSAnZnVuY3Rpb24nKSB0aGlzLl93cml0ZSA9IG9wdGlvbnMud3JpdGU7XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMud3JpdGV2ID09PSAnZnVuY3Rpb24nKSB0aGlzLl93cml0ZXYgPSBvcHRpb25zLndyaXRldjtcblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5kZXN0cm95ID09PSAnZnVuY3Rpb24nKSB0aGlzLl9kZXN0cm95ID0gb3B0aW9ucy5kZXN0cm95O1xuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmZpbmFsID09PSAnZnVuY3Rpb24nKSB0aGlzLl9maW5hbCA9IG9wdGlvbnMuZmluYWw7XG4gIH1cblxuICBTdHJlYW0uY2FsbCh0aGlzKTtcbn1cblxuLy8gT3RoZXJ3aXNlIHBlb3BsZSBjYW4gcGlwZSBXcml0YWJsZSBzdHJlYW1zLCB3aGljaCBpcyBqdXN0IHdyb25nLlxuV3JpdGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ0Nhbm5vdCBwaXBlLCBub3QgcmVhZGFibGUnKSk7XG59O1xuXG5mdW5jdGlvbiB3cml0ZUFmdGVyRW5kKHN0cmVhbSwgY2IpIHtcbiAgdmFyIGVyID0gbmV3IEVycm9yKCd3cml0ZSBhZnRlciBlbmQnKTtcbiAgLy8gVE9ETzogZGVmZXIgZXJyb3IgZXZlbnRzIGNvbnNpc3RlbnRseSBldmVyeXdoZXJlLCBub3QganVzdCB0aGUgY2JcbiAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpO1xuICBwbmEubmV4dFRpY2soY2IsIGVyKTtcbn1cblxuLy8gQ2hlY2tzIHRoYXQgYSB1c2VyLXN1cHBsaWVkIGNodW5rIGlzIHZhbGlkLCBlc3BlY2lhbGx5IGZvciB0aGUgcGFydGljdWxhclxuLy8gbW9kZSB0aGUgc3RyZWFtIGlzIGluLiBDdXJyZW50bHkgdGhpcyBtZWFucyB0aGF0IGBudWxsYCBpcyBuZXZlciBhY2NlcHRlZFxuLy8gYW5kIHVuZGVmaW5lZC9ub24tc3RyaW5nIHZhbHVlcyBhcmUgb25seSBhbGxvd2VkIGluIG9iamVjdCBtb2RlLlxuZnVuY3Rpb24gdmFsaWRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgY2IpIHtcbiAgdmFyIHZhbGlkID0gdHJ1ZTtcbiAgdmFyIGVyID0gZmFsc2U7XG5cbiAgaWYgKGNodW5rID09PSBudWxsKSB7XG4gICAgZXIgPSBuZXcgVHlwZUVycm9yKCdNYXkgbm90IHdyaXRlIG51bGwgdmFsdWVzIHRvIHN0cmVhbScpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBjaHVuayAhPT0gJ3N0cmluZycgJiYgY2h1bmsgIT09IHVuZGVmaW5lZCAmJiAhc3RhdGUub2JqZWN0TW9kZSkge1xuICAgIGVyID0gbmV3IFR5cGVFcnJvcignSW52YWxpZCBub24tc3RyaW5nL2J1ZmZlciBjaHVuaycpO1xuICB9XG4gIGlmIChlcikge1xuICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcbiAgICBwbmEubmV4dFRpY2soY2IsIGVyKTtcbiAgICB2YWxpZCA9IGZhbHNlO1xuICB9XG4gIHJldHVybiB2YWxpZDtcbn1cblxuV3JpdGFibGUucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcbiAgdmFyIHJldCA9IGZhbHNlO1xuICB2YXIgaXNCdWYgPSAhc3RhdGUub2JqZWN0TW9kZSAmJiBfaXNVaW50OEFycmF5KGNodW5rKTtcblxuICBpZiAoaXNCdWYgJiYgIUJ1ZmZlci5pc0J1ZmZlcihjaHVuaykpIHtcbiAgICBjaHVuayA9IF91aW50OEFycmF5VG9CdWZmZXIoY2h1bmspO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNiID0gZW5jb2Rpbmc7XG4gICAgZW5jb2RpbmcgPSBudWxsO1xuICB9XG5cbiAgaWYgKGlzQnVmKSBlbmNvZGluZyA9ICdidWZmZXInO2Vsc2UgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSBzdGF0ZS5kZWZhdWx0RW5jb2Rpbmc7XG5cbiAgaWYgKHR5cGVvZiBjYiAhPT0gJ2Z1bmN0aW9uJykgY2IgPSBub3A7XG5cbiAgaWYgKHN0YXRlLmVuZGVkKSB3cml0ZUFmdGVyRW5kKHRoaXMsIGNiKTtlbHNlIGlmIChpc0J1ZiB8fCB2YWxpZENodW5rKHRoaXMsIHN0YXRlLCBjaHVuaywgY2IpKSB7XG4gICAgc3RhdGUucGVuZGluZ2NiKys7XG4gICAgcmV0ID0gd3JpdGVPckJ1ZmZlcih0aGlzLCBzdGF0ZSwgaXNCdWYsIGNodW5rLCBlbmNvZGluZywgY2IpO1xuICB9XG5cbiAgcmV0dXJuIHJldDtcbn07XG5cbldyaXRhYmxlLnByb3RvdHlwZS5jb3JrID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlO1xuXG4gIHN0YXRlLmNvcmtlZCsrO1xufTtcblxuV3JpdGFibGUucHJvdG90eXBlLnVuY29yayA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcblxuICBpZiAoc3RhdGUuY29ya2VkKSB7XG4gICAgc3RhdGUuY29ya2VkLS07XG5cbiAgICBpZiAoIXN0YXRlLndyaXRpbmcgJiYgIXN0YXRlLmNvcmtlZCAmJiAhc3RhdGUuZmluaXNoZWQgJiYgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiYgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0KSBjbGVhckJ1ZmZlcih0aGlzLCBzdGF0ZSk7XG4gIH1cbn07XG5cbldyaXRhYmxlLnByb3RvdHlwZS5zZXREZWZhdWx0RW5jb2RpbmcgPSBmdW5jdGlvbiBzZXREZWZhdWx0RW5jb2RpbmcoZW5jb2RpbmcpIHtcbiAgLy8gbm9kZTo6UGFyc2VFbmNvZGluZygpIHJlcXVpcmVzIGxvd2VyIGNhc2UuXG4gIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnKSBlbmNvZGluZyA9IGVuY29kaW5nLnRvTG93ZXJDYXNlKCk7XG4gIGlmICghKFsnaGV4JywgJ3V0ZjgnLCAndXRmLTgnLCAnYXNjaWknLCAnYmluYXJ5JywgJ2Jhc2U2NCcsICd1Y3MyJywgJ3Vjcy0yJywgJ3V0ZjE2bGUnLCAndXRmLTE2bGUnLCAncmF3J10uaW5kZXhPZigoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKSkgPiAtMSkpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZyk7XG4gIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVmYXVsdEVuY29kaW5nID0gZW5jb2Rpbmc7XG4gIHJldHVybiB0aGlzO1xufTtcblxuZnVuY3Rpb24gZGVjb2RlQ2h1bmsoc3RhdGUsIGNodW5rLCBlbmNvZGluZykge1xuICBpZiAoIXN0YXRlLm9iamVjdE1vZGUgJiYgc3RhdGUuZGVjb2RlU3RyaW5ncyAhPT0gZmFsc2UgJiYgdHlwZW9mIGNodW5rID09PSAnc3RyaW5nJykge1xuICAgIGNodW5rID0gQnVmZmVyLmZyb20oY2h1bmssIGVuY29kaW5nKTtcbiAgfVxuICByZXR1cm4gY2h1bms7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZS5wcm90b3R5cGUsICd3cml0YWJsZUhpZ2hXYXRlck1hcmsnLCB7XG4gIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlXG4gIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpblxuICAvLyB1c2VybGFuZCB3aWxsIGZhaWxcbiAgZW51bWVyYWJsZTogZmFsc2UsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl93cml0YWJsZVN0YXRlLmhpZ2hXYXRlck1hcms7XG4gIH1cbn0pO1xuXG4vLyBpZiB3ZSdyZSBhbHJlYWR5IHdyaXRpbmcgc29tZXRoaW5nLCB0aGVuIGp1c3QgcHV0IHRoaXNcbi8vIGluIHRoZSBxdWV1ZSwgYW5kIHdhaXQgb3VyIHR1cm4uICBPdGhlcndpc2UsIGNhbGwgX3dyaXRlXG4vLyBJZiB3ZSByZXR1cm4gZmFsc2UsIHRoZW4gd2UgbmVlZCBhIGRyYWluIGV2ZW50LCBzbyBzZXQgdGhhdCBmbGFnLlxuZnVuY3Rpb24gd3JpdGVPckJ1ZmZlcihzdHJlYW0sIHN0YXRlLCBpc0J1ZiwgY2h1bmssIGVuY29kaW5nLCBjYikge1xuICBpZiAoIWlzQnVmKSB7XG4gICAgdmFyIG5ld0NodW5rID0gZGVjb2RlQ2h1bmsoc3RhdGUsIGNodW5rLCBlbmNvZGluZyk7XG4gICAgaWYgKGNodW5rICE9PSBuZXdDaHVuaykge1xuICAgICAgaXNCdWYgPSB0cnVlO1xuICAgICAgZW5jb2RpbmcgPSAnYnVmZmVyJztcbiAgICAgIGNodW5rID0gbmV3Q2h1bms7XG4gICAgfVxuICB9XG4gIHZhciBsZW4gPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDtcblxuICBzdGF0ZS5sZW5ndGggKz0gbGVuO1xuXG4gIHZhciByZXQgPSBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrO1xuICAvLyB3ZSBtdXN0IGVuc3VyZSB0aGF0IHByZXZpb3VzIG5lZWREcmFpbiB3aWxsIG5vdCBiZSByZXNldCB0byBmYWxzZS5cbiAgaWYgKCFyZXQpIHN0YXRlLm5lZWREcmFpbiA9IHRydWU7XG5cbiAgaWYgKHN0YXRlLndyaXRpbmcgfHwgc3RhdGUuY29ya2VkKSB7XG4gICAgdmFyIGxhc3QgPSBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0O1xuICAgIHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSB7XG4gICAgICBjaHVuazogY2h1bmssXG4gICAgICBlbmNvZGluZzogZW5jb2RpbmcsXG4gICAgICBpc0J1ZjogaXNCdWYsXG4gICAgICBjYWxsYmFjazogY2IsXG4gICAgICBuZXh0OiBudWxsXG4gICAgfTtcbiAgICBpZiAobGFzdCkge1xuICAgICAgbGFzdC5uZXh0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDtcbiAgICB9XG4gICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0Q291bnQgKz0gMTtcbiAgfSBlbHNlIHtcbiAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIGZhbHNlLCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpO1xuICB9XG5cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCB3cml0ZXYsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYikge1xuICBzdGF0ZS53cml0ZWxlbiA9IGxlbjtcbiAgc3RhdGUud3JpdGVjYiA9IGNiO1xuICBzdGF0ZS53cml0aW5nID0gdHJ1ZTtcbiAgc3RhdGUuc3luYyA9IHRydWU7XG4gIGlmICh3cml0ZXYpIHN0cmVhbS5fd3JpdGV2KGNodW5rLCBzdGF0ZS5vbndyaXRlKTtlbHNlIHN0cmVhbS5fd3JpdGUoY2h1bmssIGVuY29kaW5nLCBzdGF0ZS5vbndyaXRlKTtcbiAgc3RhdGUuc3luYyA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBvbndyaXRlRXJyb3Ioc3RyZWFtLCBzdGF0ZSwgc3luYywgZXIsIGNiKSB7XG4gIC0tc3RhdGUucGVuZGluZ2NiO1xuXG4gIGlmIChzeW5jKSB7XG4gICAgLy8gZGVmZXIgdGhlIGNhbGxiYWNrIGlmIHdlIGFyZSBiZWluZyBjYWxsZWQgc3luY2hyb25vdXNseVxuICAgIC8vIHRvIGF2b2lkIHBpbGluZyB1cCB0aGluZ3Mgb24gdGhlIHN0YWNrXG4gICAgcG5hLm5leHRUaWNrKGNiLCBlcik7XG4gICAgLy8gdGhpcyBjYW4gZW1pdCBmaW5pc2gsIGFuZCBpdCB3aWxsIGFsd2F5cyBoYXBwZW5cbiAgICAvLyBhZnRlciBlcnJvclxuICAgIHBuYS5uZXh0VGljayhmaW5pc2hNYXliZSwgc3RyZWFtLCBzdGF0ZSk7XG4gICAgc3RyZWFtLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCA9IHRydWU7XG4gICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpO1xuICB9IGVsc2Uge1xuICAgIC8vIHRoZSBjYWxsZXIgZXhwZWN0IHRoaXMgdG8gaGFwcGVuIGJlZm9yZSBpZlxuICAgIC8vIGl0IGlzIGFzeW5jXG4gICAgY2IoZXIpO1xuICAgIHN0cmVhbS5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQgPSB0cnVlO1xuICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcbiAgICAvLyB0aGlzIGNhbiBlbWl0IGZpbmlzaCwgYnV0IGZpbmlzaCBtdXN0XG4gICAgLy8gYWx3YXlzIGZvbGxvdyBlcnJvclxuICAgIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSkge1xuICBzdGF0ZS53cml0aW5nID0gZmFsc2U7XG4gIHN0YXRlLndyaXRlY2IgPSBudWxsO1xuICBzdGF0ZS5sZW5ndGggLT0gc3RhdGUud3JpdGVsZW47XG4gIHN0YXRlLndyaXRlbGVuID0gMDtcbn1cblxuZnVuY3Rpb24gb253cml0ZShzdHJlYW0sIGVyKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTtcbiAgdmFyIHN5bmMgPSBzdGF0ZS5zeW5jO1xuICB2YXIgY2IgPSBzdGF0ZS53cml0ZWNiO1xuXG4gIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSk7XG5cbiAgaWYgKGVyKSBvbndyaXRlRXJyb3Ioc3RyZWFtLCBzdGF0ZSwgc3luYywgZXIsIGNiKTtlbHNlIHtcbiAgICAvLyBDaGVjayBpZiB3ZSdyZSBhY3R1YWxseSByZWFkeSB0byBmaW5pc2gsIGJ1dCBkb24ndCBlbWl0IHlldFxuICAgIHZhciBmaW5pc2hlZCA9IG5lZWRGaW5pc2goc3RhdGUpO1xuXG4gICAgaWYgKCFmaW5pc2hlZCAmJiAhc3RhdGUuY29ya2VkICYmICFzdGF0ZS5idWZmZXJQcm9jZXNzaW5nICYmIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCkge1xuICAgICAgY2xlYXJCdWZmZXIoc3RyZWFtLCBzdGF0ZSk7XG4gICAgfVxuXG4gICAgaWYgKHN5bmMpIHtcbiAgICAgIC8qPHJlcGxhY2VtZW50PiovXG4gICAgICBhc3luY1dyaXRlKGFmdGVyV3JpdGUsIHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYik7XG4gICAgICAvKjwvcmVwbGFjZW1lbnQ+Ki9cbiAgICB9IGVsc2Uge1xuICAgICAgYWZ0ZXJXcml0ZShzdHJlYW0sIHN0YXRlLCBmaW5pc2hlZCwgY2IpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYikge1xuICBpZiAoIWZpbmlzaGVkKSBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSk7XG4gIHN0YXRlLnBlbmRpbmdjYi0tO1xuICBjYigpO1xuICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTtcbn1cblxuLy8gTXVzdCBmb3JjZSBjYWxsYmFjayB0byBiZSBjYWxsZWQgb24gbmV4dFRpY2ssIHNvIHRoYXQgd2UgZG9uJ3Rcbi8vIGVtaXQgJ2RyYWluJyBiZWZvcmUgdGhlIHdyaXRlKCkgY29uc3VtZXIgZ2V0cyB0aGUgJ2ZhbHNlJyByZXR1cm5cbi8vIHZhbHVlLCBhbmQgaGFzIGEgY2hhbmNlIHRvIGF0dGFjaCBhICdkcmFpbicgbGlzdGVuZXIuXG5mdW5jdGlvbiBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLm5lZWREcmFpbikge1xuICAgIHN0YXRlLm5lZWREcmFpbiA9IGZhbHNlO1xuICAgIHN0cmVhbS5lbWl0KCdkcmFpbicpO1xuICB9XG59XG5cbi8vIGlmIHRoZXJlJ3Mgc29tZXRoaW5nIGluIHRoZSBidWZmZXIgd2FpdGluZywgdGhlbiBwcm9jZXNzIGl0XG5mdW5jdGlvbiBjbGVhckJ1ZmZlcihzdHJlYW0sIHN0YXRlKSB7XG4gIHN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgPSB0cnVlO1xuICB2YXIgZW50cnkgPSBzdGF0ZS5idWZmZXJlZFJlcXVlc3Q7XG5cbiAgaWYgKHN0cmVhbS5fd3JpdGV2ICYmIGVudHJ5ICYmIGVudHJ5Lm5leHQpIHtcbiAgICAvLyBGYXN0IGNhc2UsIHdyaXRlIGV2ZXJ5dGhpbmcgdXNpbmcgX3dyaXRldigpXG4gICAgdmFyIGwgPSBzdGF0ZS5idWZmZXJlZFJlcXVlc3RDb3VudDtcbiAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5KGwpO1xuICAgIHZhciBob2xkZXIgPSBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWU7XG4gICAgaG9sZGVyLmVudHJ5ID0gZW50cnk7XG5cbiAgICB2YXIgY291bnQgPSAwO1xuICAgIHZhciBhbGxCdWZmZXJzID0gdHJ1ZTtcbiAgICB3aGlsZSAoZW50cnkpIHtcbiAgICAgIGJ1ZmZlcltjb3VudF0gPSBlbnRyeTtcbiAgICAgIGlmICghZW50cnkuaXNCdWYpIGFsbEJ1ZmZlcnMgPSBmYWxzZTtcbiAgICAgIGVudHJ5ID0gZW50cnkubmV4dDtcbiAgICAgIGNvdW50ICs9IDE7XG4gICAgfVxuICAgIGJ1ZmZlci5hbGxCdWZmZXJzID0gYWxsQnVmZmVycztcblxuICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgdHJ1ZSwgc3RhdGUubGVuZ3RoLCBidWZmZXIsICcnLCBob2xkZXIuZmluaXNoKTtcblxuICAgIC8vIGRvV3JpdGUgaXMgYWxtb3N0IGFsd2F5cyBhc3luYywgZGVmZXIgdGhlc2UgdG8gc2F2ZSBhIGJpdCBvZiB0aW1lXG4gICAgLy8gYXMgdGhlIGhvdCBwYXRoIGVuZHMgd2l0aCBkb1dyaXRlXG4gICAgc3RhdGUucGVuZGluZ2NiKys7XG4gICAgc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7XG4gICAgaWYgKGhvbGRlci5uZXh0KSB7XG4gICAgICBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBob2xkZXIubmV4dDtcbiAgICAgIGhvbGRlci5uZXh0ID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdGUuY29ya2VkUmVxdWVzdHNGcmVlID0gbmV3IENvcmtlZFJlcXVlc3Qoc3RhdGUpO1xuICAgIH1cbiAgICBzdGF0ZS5idWZmZXJlZFJlcXVlc3RDb3VudCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgLy8gU2xvdyBjYXNlLCB3cml0ZSBjaHVua3Mgb25lLWJ5LW9uZVxuICAgIHdoaWxlIChlbnRyeSkge1xuICAgICAgdmFyIGNodW5rID0gZW50cnkuY2h1bms7XG4gICAgICB2YXIgZW5jb2RpbmcgPSBlbnRyeS5lbmNvZGluZztcbiAgICAgIHZhciBjYiA9IGVudHJ5LmNhbGxiYWNrO1xuICAgICAgdmFyIGxlbiA9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoO1xuXG4gICAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIGZhbHNlLCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpO1xuICAgICAgZW50cnkgPSBlbnRyeS5uZXh0O1xuICAgICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0Q291bnQtLTtcbiAgICAgIC8vIGlmIHdlIGRpZG4ndCBjYWxsIHRoZSBvbndyaXRlIGltbWVkaWF0ZWx5LCB0aGVuXG4gICAgICAvLyBpdCBtZWFucyB0aGF0IHdlIG5lZWQgdG8gd2FpdCB1bnRpbCBpdCBkb2VzLlxuICAgICAgLy8gYWxzbywgdGhhdCBtZWFucyB0aGF0IHRoZSBjaHVuayBhbmQgY2IgYXJlIGN1cnJlbnRseVxuICAgICAgLy8gYmVpbmcgcHJvY2Vzc2VkLCBzbyBtb3ZlIHRoZSBidWZmZXIgY291bnRlciBwYXN0IHRoZW0uXG4gICAgICBpZiAoc3RhdGUud3JpdGluZykge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZW50cnkgPT09IG51bGwpIHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBudWxsO1xuICB9XG5cbiAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0ID0gZW50cnk7XG4gIHN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgPSBmYWxzZTtcbn1cblxuV3JpdGFibGUucHJvdG90eXBlLl93cml0ZSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIGNiKG5ldyBFcnJvcignX3dyaXRlKCkgaXMgbm90IGltcGxlbWVudGVkJykpO1xufTtcblxuV3JpdGFibGUucHJvdG90eXBlLl93cml0ZXYgPSBudWxsO1xuXG5Xcml0YWJsZS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcblxuICBpZiAodHlwZW9mIGNodW5rID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2IgPSBjaHVuaztcbiAgICBjaHVuayA9IG51bGw7XG4gICAgZW5jb2RpbmcgPSBudWxsO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNiID0gZW5jb2Rpbmc7XG4gICAgZW5jb2RpbmcgPSBudWxsO1xuICB9XG5cbiAgaWYgKGNodW5rICE9PSBudWxsICYmIGNodW5rICE9PSB1bmRlZmluZWQpIHRoaXMud3JpdGUoY2h1bmssIGVuY29kaW5nKTtcblxuICAvLyAuZW5kKCkgZnVsbHkgdW5jb3Jrc1xuICBpZiAoc3RhdGUuY29ya2VkKSB7XG4gICAgc3RhdGUuY29ya2VkID0gMTtcbiAgICB0aGlzLnVuY29yaygpO1xuICB9XG5cbiAgLy8gaWdub3JlIHVubmVjZXNzYXJ5IGVuZCgpIGNhbGxzLlxuICBpZiAoIXN0YXRlLmVuZGluZyAmJiAhc3RhdGUuZmluaXNoZWQpIGVuZFdyaXRhYmxlKHRoaXMsIHN0YXRlLCBjYik7XG59O1xuXG5mdW5jdGlvbiBuZWVkRmluaXNoKHN0YXRlKSB7XG4gIHJldHVybiBzdGF0ZS5lbmRpbmcgJiYgc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCA9PT0gbnVsbCAmJiAhc3RhdGUuZmluaXNoZWQgJiYgIXN0YXRlLndyaXRpbmc7XG59XG5mdW5jdGlvbiBjYWxsRmluYWwoc3RyZWFtLCBzdGF0ZSkge1xuICBzdHJlYW0uX2ZpbmFsKGZ1bmN0aW9uIChlcnIpIHtcbiAgICBzdGF0ZS5wZW5kaW5nY2ItLTtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgIH1cbiAgICBzdGF0ZS5wcmVmaW5pc2hlZCA9IHRydWU7XG4gICAgc3RyZWFtLmVtaXQoJ3ByZWZpbmlzaCcpO1xuICAgIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHByZWZpbmlzaChzdHJlYW0sIHN0YXRlKSB7XG4gIGlmICghc3RhdGUucHJlZmluaXNoZWQgJiYgIXN0YXRlLmZpbmFsQ2FsbGVkKSB7XG4gICAgaWYgKHR5cGVvZiBzdHJlYW0uX2ZpbmFsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBzdGF0ZS5wZW5kaW5nY2IrKztcbiAgICAgIHN0YXRlLmZpbmFsQ2FsbGVkID0gdHJ1ZTtcbiAgICAgIHBuYS5uZXh0VGljayhjYWxsRmluYWwsIHN0cmVhbSwgc3RhdGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZS5wcmVmaW5pc2hlZCA9IHRydWU7XG4gICAgICBzdHJlYW0uZW1pdCgncHJlZmluaXNoJyk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpIHtcbiAgdmFyIG5lZWQgPSBuZWVkRmluaXNoKHN0YXRlKTtcbiAgaWYgKG5lZWQpIHtcbiAgICBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSk7XG4gICAgaWYgKHN0YXRlLnBlbmRpbmdjYiA9PT0gMCkge1xuICAgICAgc3RhdGUuZmluaXNoZWQgPSB0cnVlO1xuICAgICAgc3RyZWFtLmVtaXQoJ2ZpbmlzaCcpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbmVlZDtcbn1cblxuZnVuY3Rpb24gZW5kV3JpdGFibGUoc3RyZWFtLCBzdGF0ZSwgY2IpIHtcbiAgc3RhdGUuZW5kaW5nID0gdHJ1ZTtcbiAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7XG4gIGlmIChjYikge1xuICAgIGlmIChzdGF0ZS5maW5pc2hlZCkgcG5hLm5leHRUaWNrKGNiKTtlbHNlIHN0cmVhbS5vbmNlKCdmaW5pc2gnLCBjYik7XG4gIH1cbiAgc3RhdGUuZW5kZWQgPSB0cnVlO1xuICBzdHJlYW0ud3JpdGFibGUgPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gb25Db3JrZWRGaW5pc2goY29ya1JlcSwgc3RhdGUsIGVycikge1xuICB2YXIgZW50cnkgPSBjb3JrUmVxLmVudHJ5O1xuICBjb3JrUmVxLmVudHJ5ID0gbnVsbDtcbiAgd2hpbGUgKGVudHJ5KSB7XG4gICAgdmFyIGNiID0gZW50cnkuY2FsbGJhY2s7XG4gICAgc3RhdGUucGVuZGluZ2NiLS07XG4gICAgY2IoZXJyKTtcbiAgICBlbnRyeSA9IGVudHJ5Lm5leHQ7XG4gIH1cbiAgaWYgKHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZSkge1xuICAgIHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZS5uZXh0ID0gY29ya1JlcTtcbiAgfSBlbHNlIHtcbiAgICBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBjb3JrUmVxO1xuICB9XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZS5wcm90b3R5cGUsICdkZXN0cm95ZWQnLCB7XG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl93cml0YWJsZVN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkO1xuICB9LFxuICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIC8vIHdlIGlnbm9yZSB0aGUgdmFsdWUgaWYgdGhlIHN0cmVhbVxuICAgIC8vIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZCB5ZXRcbiAgICBpZiAoIXRoaXMuX3dyaXRhYmxlU3RhdGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LCB0aGUgdXNlciBpcyBleHBsaWNpdGx5XG4gICAgLy8gbWFuYWdpbmcgZGVzdHJveWVkXG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQgPSB2YWx1ZTtcbiAgfVxufSk7XG5cbldyaXRhYmxlLnByb3RvdHlwZS5kZXN0cm95ID0gZGVzdHJveUltcGwuZGVzdHJveTtcbldyaXRhYmxlLnByb3RvdHlwZS5fdW5kZXN0cm95ID0gZGVzdHJveUltcGwudW5kZXN0cm95O1xuV3JpdGFibGUucHJvdG90eXBlLl9kZXN0cm95ID0gZnVuY3Rpb24gKGVyciwgY2IpIHtcbiAgdGhpcy5lbmQoKTtcbiAgY2IoZXJyKTtcbn07IiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgQnVmZmVyID0gcmVxdWlyZSgnc2FmZS1idWZmZXInKS5CdWZmZXI7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcblxuZnVuY3Rpb24gY29weUJ1ZmZlcihzcmMsIHRhcmdldCwgb2Zmc2V0KSB7XG4gIHNyYy5jb3B5KHRhcmdldCwgb2Zmc2V0KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEJ1ZmZlckxpc3QoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJ1ZmZlckxpc3QpO1xuXG4gICAgdGhpcy5oZWFkID0gbnVsbDtcbiAgICB0aGlzLnRhaWwgPSBudWxsO1xuICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgfVxuXG4gIEJ1ZmZlckxpc3QucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiBwdXNoKHYpIHtcbiAgICB2YXIgZW50cnkgPSB7IGRhdGE6IHYsIG5leHQ6IG51bGwgfTtcbiAgICBpZiAodGhpcy5sZW5ndGggPiAwKSB0aGlzLnRhaWwubmV4dCA9IGVudHJ5O2Vsc2UgdGhpcy5oZWFkID0gZW50cnk7XG4gICAgdGhpcy50YWlsID0gZW50cnk7XG4gICAgKyt0aGlzLmxlbmd0aDtcbiAgfTtcblxuICBCdWZmZXJMaXN0LnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24gdW5zaGlmdCh2KSB7XG4gICAgdmFyIGVudHJ5ID0geyBkYXRhOiB2LCBuZXh0OiB0aGlzLmhlYWQgfTtcbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHRoaXMudGFpbCA9IGVudHJ5O1xuICAgIHRoaXMuaGVhZCA9IGVudHJ5O1xuICAgICsrdGhpcy5sZW5ndGg7XG4gIH07XG5cbiAgQnVmZmVyTGlzdC5wcm90b3R5cGUuc2hpZnQgPSBmdW5jdGlvbiBzaGlmdCgpIHtcbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICB2YXIgcmV0ID0gdGhpcy5oZWFkLmRhdGE7XG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAxKSB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSBudWxsO2Vsc2UgdGhpcy5oZWFkID0gdGhpcy5oZWFkLm5leHQ7XG4gICAgLS10aGlzLmxlbmd0aDtcbiAgICByZXR1cm4gcmV0O1xuICB9O1xuXG4gIEJ1ZmZlckxpc3QucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbnVsbDtcbiAgICB0aGlzLmxlbmd0aCA9IDA7XG4gIH07XG5cbiAgQnVmZmVyTGlzdC5wcm90b3R5cGUuam9pbiA9IGZ1bmN0aW9uIGpvaW4ocykge1xuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuICcnO1xuICAgIHZhciBwID0gdGhpcy5oZWFkO1xuICAgIHZhciByZXQgPSAnJyArIHAuZGF0YTtcbiAgICB3aGlsZSAocCA9IHAubmV4dCkge1xuICAgICAgcmV0ICs9IHMgKyBwLmRhdGE7XG4gICAgfXJldHVybiByZXQ7XG4gIH07XG5cbiAgQnVmZmVyTGlzdC5wcm90b3R5cGUuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0KG4pIHtcbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybiBCdWZmZXIuYWxsb2MoMCk7XG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAxKSByZXR1cm4gdGhpcy5oZWFkLmRhdGE7XG4gICAgdmFyIHJldCA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShuID4+PiAwKTtcbiAgICB2YXIgcCA9IHRoaXMuaGVhZDtcbiAgICB2YXIgaSA9IDA7XG4gICAgd2hpbGUgKHApIHtcbiAgICAgIGNvcHlCdWZmZXIocC5kYXRhLCByZXQsIGkpO1xuICAgICAgaSArPSBwLmRhdGEubGVuZ3RoO1xuICAgICAgcCA9IHAubmV4dDtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfTtcblxuICByZXR1cm4gQnVmZmVyTGlzdDtcbn0oKTtcblxuaWYgKHV0aWwgJiYgdXRpbC5pbnNwZWN0ICYmIHV0aWwuaW5zcGVjdC5jdXN0b20pIHtcbiAgbW9kdWxlLmV4cG9ydHMucHJvdG90eXBlW3V0aWwuaW5zcGVjdC5jdXN0b21dID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvYmogPSB1dGlsLmluc3BlY3QoeyBsZW5ndGg6IHRoaXMubGVuZ3RoIH0pO1xuICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLm5hbWUgKyAnICcgKyBvYmo7XG4gIH07XG59IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xuXG52YXIgcG5hID0gcmVxdWlyZSgncHJvY2Vzcy1uZXh0aWNrLWFyZ3MnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vLyB1bmRvY3VtZW50ZWQgY2IoKSBBUEksIG5lZWRlZCBmb3IgY29yZSwgbm90IGZvciBwdWJsaWMgQVBJXG5mdW5jdGlvbiBkZXN0cm95KGVyciwgY2IpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB2YXIgcmVhZGFibGVEZXN0cm95ZWQgPSB0aGlzLl9yZWFkYWJsZVN0YXRlICYmIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkO1xuICB2YXIgd3JpdGFibGVEZXN0cm95ZWQgPSB0aGlzLl93cml0YWJsZVN0YXRlICYmIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkO1xuXG4gIGlmIChyZWFkYWJsZURlc3Ryb3llZCB8fCB3cml0YWJsZURlc3Ryb3llZCkge1xuICAgIGlmIChjYikge1xuICAgICAgY2IoZXJyKTtcbiAgICB9IGVsc2UgaWYgKGVyciAmJiAoIXRoaXMuX3dyaXRhYmxlU3RhdGUgfHwgIXRoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkKSkge1xuICAgICAgcG5hLm5leHRUaWNrKGVtaXRFcnJvck5ULCB0aGlzLCBlcnIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIHdlIHNldCBkZXN0cm95ZWQgdG8gdHJ1ZSBiZWZvcmUgZmlyaW5nIGVycm9yIGNhbGxiYWNrcyBpbiBvcmRlclxuICAvLyB0byBtYWtlIGl0IHJlLWVudHJhbmNlIHNhZmUgaW4gY2FzZSBkZXN0cm95KCkgaXMgY2FsbGVkIHdpdGhpbiBjYWxsYmFja3NcblxuICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSkge1xuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkID0gdHJ1ZTtcbiAgfVxuXG4gIC8vIGlmIHRoaXMgaXMgYSBkdXBsZXggc3RyZWFtIG1hcmsgdGhlIHdyaXRhYmxlIHBhcnQgYXMgZGVzdHJveWVkIGFzIHdlbGxcbiAgaWYgKHRoaXMuX3dyaXRhYmxlU3RhdGUpIHtcbiAgICB0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZCA9IHRydWU7XG4gIH1cblxuICB0aGlzLl9kZXN0cm95KGVyciB8fCBudWxsLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgaWYgKCFjYiAmJiBlcnIpIHtcbiAgICAgIHBuYS5uZXh0VGljayhlbWl0RXJyb3JOVCwgX3RoaXMsIGVycik7XG4gICAgICBpZiAoX3RoaXMuX3dyaXRhYmxlU3RhdGUpIHtcbiAgICAgICAgX3RoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNiKSB7XG4gICAgICBjYihlcnIpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIHVuZGVzdHJveSgpIHtcbiAgaWYgKHRoaXMuX3JlYWRhYmxlU3RhdGUpIHtcbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZCA9IGZhbHNlO1xuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUucmVhZGluZyA9IGZhbHNlO1xuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5kZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmVuZEVtaXR0ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGlmICh0aGlzLl93cml0YWJsZVN0YXRlKSB7XG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQgPSBmYWxzZTtcbiAgICB0aGlzLl93cml0YWJsZVN0YXRlLmVuZGVkID0gZmFsc2U7XG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5lbmRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl93cml0YWJsZVN0YXRlLmZpbmlzaGVkID0gZmFsc2U7XG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQgPSBmYWxzZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBlbWl0RXJyb3JOVChzZWxmLCBlcnIpIHtcbiAgc2VsZi5lbWl0KCdlcnJvcicsIGVycik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBkZXN0cm95OiBkZXN0cm95LFxuICB1bmRlc3Ryb3k6IHVuZGVzdHJveVxufTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjtcbiIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fcmVhZGFibGUuanMnKTtcbmV4cG9ydHMuU3RyZWFtID0gZXhwb3J0cztcbmV4cG9ydHMuUmVhZGFibGUgPSBleHBvcnRzO1xuZXhwb3J0cy5Xcml0YWJsZSA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fd3JpdGFibGUuanMnKTtcbmV4cG9ydHMuRHVwbGV4ID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV9kdXBsZXguanMnKTtcbmV4cG9ydHMuVHJhbnNmb3JtID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV90cmFuc2Zvcm0uanMnKTtcbmV4cG9ydHMuUGFzc1Rocm91Z2ggPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX3Bhc3N0aHJvdWdoLmpzJyk7XG4iLCJmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQ7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcInVuZGVmaW5lZFwiIHx8IG9bU3ltYm9sLml0ZXJhdG9yXSA9PSBudWxsKSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH0gaXQgPSBvW1N5bWJvbC5pdGVyYXRvcl0oKTsgcmV0dXJuIGl0Lm5leHQuYmluZChpdCk7IH1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gZmFjdG9yeShleHBvcnRzKSA6IHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbJ2V4cG9ydHMnXSwgZmFjdG9yeSkgOiBmYWN0b3J5KGdsb2JhbC5ST1QgPSB7fSk7XG59KSh0aGlzLCBmdW5jdGlvbiAoZXhwb3J0cykge1xuICAndXNlIHN0cmljdCc7XG4gIC8qKlxuICAgKiBUaGlzIGNvZGUgaXMgYW4gaW1wbGVtZW50YXRpb24gb2YgQWxlYSBhbGdvcml0aG07IChDKSAyMDEwIEpvaGFubmVzIEJhYWfDuGUuXG4gICAqIEFsZWEgaXMgbGljZW5zZWQgYWNjb3JkaW5nIHRvIHRoZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL01JVF9MaWNlbnNlLlxuICAgKi9cblxuICB2YXIgRlJBQyA9IDIuMzI4MzA2NDM2NTM4Njk2M2UtMTA7XG4gIC8qIDJeLTMyICovXG5cbiAgdmFyIFJORyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUk5HKCkge1xuICAgICAgdGhpcy5fc2VlZCA9IDA7XG4gICAgICB0aGlzLl9zMCA9IDA7XG4gICAgICB0aGlzLl9zMSA9IDA7XG4gICAgICB0aGlzLl9zMiA9IDA7XG4gICAgICB0aGlzLl9jID0gMDtcbiAgICB9XG5cbiAgICB2YXIgX3Byb3RvID0gUk5HLnByb3RvdHlwZTtcblxuICAgIF9wcm90by5nZXRTZWVkID0gZnVuY3Rpb24gZ2V0U2VlZCgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zZWVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZWVkIHRoZSBudW1iZXIgZ2VuZXJhdG9yXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnNldFNlZWQgPSBmdW5jdGlvbiBzZXRTZWVkKHNlZWQpIHtcbiAgICAgIHNlZWQgPSBzZWVkIDwgMSA/IDEgLyBzZWVkIDogc2VlZDtcbiAgICAgIHRoaXMuX3NlZWQgPSBzZWVkO1xuICAgICAgdGhpcy5fczAgPSAoc2VlZCA+Pj4gMCkgKiBGUkFDO1xuICAgICAgc2VlZCA9IHNlZWQgKiA2OTA2OSArIDEgPj4+IDA7XG4gICAgICB0aGlzLl9zMSA9IHNlZWQgKiBGUkFDO1xuICAgICAgc2VlZCA9IHNlZWQgKiA2OTA2OSArIDEgPj4+IDA7XG4gICAgICB0aGlzLl9zMiA9IHNlZWQgKiBGUkFDO1xuICAgICAgdGhpcy5fYyA9IDE7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgUHNldWRvcmFuZG9tIHZhbHVlIFswLDEpLCB1bmlmb3JtbHkgZGlzdHJpYnV0ZWRcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZ2V0VW5pZm9ybSA9IGZ1bmN0aW9uIGdldFVuaWZvcm0oKSB7XG4gICAgICB2YXIgdCA9IDIwOTE2MzkgKiB0aGlzLl9zMCArIHRoaXMuX2MgKiBGUkFDO1xuICAgICAgdGhpcy5fczAgPSB0aGlzLl9zMTtcbiAgICAgIHRoaXMuX3MxID0gdGhpcy5fczI7XG4gICAgICB0aGlzLl9jID0gdCB8IDA7XG4gICAgICB0aGlzLl9zMiA9IHQgLSB0aGlzLl9jO1xuICAgICAgcmV0dXJuIHRoaXMuX3MyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gbG93ZXJCb3VuZCBUaGUgbG93ZXIgZW5kIG9mIHRoZSByYW5nZSB0byByZXR1cm4gYSB2YWx1ZSBmcm9tLCBpbmNsdXNpdmVcbiAgICAgKiBAcGFyYW0gdXBwZXJCb3VuZCBUaGUgdXBwZXIgZW5kIG9mIHRoZSByYW5nZSB0byByZXR1cm4gYSB2YWx1ZSBmcm9tLCBpbmNsdXNpdmVcbiAgICAgKiBAcmV0dXJucyBQc2V1ZG9yYW5kb20gdmFsdWUgW2xvd2VyQm91bmQsIHVwcGVyQm91bmRdLCB1c2luZyBST1QuUk5HLmdldFVuaWZvcm0oKSB0byBkaXN0cmlidXRlIHRoZSB2YWx1ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5nZXRVbmlmb3JtSW50ID0gZnVuY3Rpb24gZ2V0VW5pZm9ybUludChsb3dlckJvdW5kLCB1cHBlckJvdW5kKSB7XG4gICAgICB2YXIgbWF4ID0gTWF0aC5tYXgobG93ZXJCb3VuZCwgdXBwZXJCb3VuZCk7XG4gICAgICB2YXIgbWluID0gTWF0aC5taW4obG93ZXJCb3VuZCwgdXBwZXJCb3VuZCk7XG4gICAgICByZXR1cm4gTWF0aC5mbG9vcih0aGlzLmdldFVuaWZvcm0oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBtZWFuIE1lYW4gdmFsdWVcbiAgICAgKiBAcGFyYW0gc3RkZGV2IFN0YW5kYXJkIGRldmlhdGlvbi4gfjk1JSBvZiB0aGUgYWJzb2x1dGUgdmFsdWVzIHdpbGwgYmUgbG93ZXIgdGhhbiAyKnN0ZGRldi5cbiAgICAgKiBAcmV0dXJucyBBIG5vcm1hbGx5IGRpc3RyaWJ1dGVkIHBzZXVkb3JhbmRvbSB2YWx1ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5nZXROb3JtYWwgPSBmdW5jdGlvbiBnZXROb3JtYWwobWVhbiwgc3RkZGV2KSB7XG4gICAgICBpZiAobWVhbiA9PT0gdm9pZCAwKSB7XG4gICAgICAgIG1lYW4gPSAwO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RkZGV2ID09PSB2b2lkIDApIHtcbiAgICAgICAgc3RkZGV2ID0gMTtcbiAgICAgIH1cblxuICAgICAgdmFyIHUsIHYsIHI7XG5cbiAgICAgIGRvIHtcbiAgICAgICAgdSA9IDIgKiB0aGlzLmdldFVuaWZvcm0oKSAtIDE7XG4gICAgICAgIHYgPSAyICogdGhpcy5nZXRVbmlmb3JtKCkgLSAxO1xuICAgICAgICByID0gdSAqIHUgKyB2ICogdjtcbiAgICAgIH0gd2hpbGUgKHIgPiAxIHx8IHIgPT0gMCk7XG5cbiAgICAgIHZhciBnYXVzcyA9IHUgKiBNYXRoLnNxcnQoLTIgKiBNYXRoLmxvZyhyKSAvIHIpO1xuICAgICAgcmV0dXJuIG1lYW4gKyBnYXVzcyAqIHN0ZGRldjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgUHNldWRvcmFuZG9tIHZhbHVlIFsxLDEwMF0gaW5jbHVzaXZlLCB1bmlmb3JtbHkgZGlzdHJpYnV0ZWRcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZ2V0UGVyY2VudGFnZSA9IGZ1bmN0aW9uIGdldFBlcmNlbnRhZ2UoKSB7XG4gICAgICByZXR1cm4gMSArIE1hdGguZmxvb3IodGhpcy5nZXRVbmlmb3JtKCkgKiAxMDApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBSYW5kb21seSBwaWNrZWQgaXRlbSwgbnVsbCB3aGVuIGxlbmd0aD0wXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmdldEl0ZW0gPSBmdW5jdGlvbiBnZXRJdGVtKGFycmF5KSB7XG4gICAgICBpZiAoIWFycmF5Lmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFycmF5W01hdGguZmxvb3IodGhpcy5nZXRVbmlmb3JtKCkgKiBhcnJheS5sZW5ndGgpXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgTmV3IGFycmF5IHdpdGggcmFuZG9taXplZCBpdGVtc1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5zaHVmZmxlID0gZnVuY3Rpb24gc2h1ZmZsZShhcnJheSkge1xuICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgdmFyIGNsb25lID0gYXJyYXkuc2xpY2UoKTtcblxuICAgICAgd2hpbGUgKGNsb25lLmxlbmd0aCkge1xuICAgICAgICB2YXIgX2luZGV4ID0gY2xvbmUuaW5kZXhPZih0aGlzLmdldEl0ZW0oY2xvbmUpKTtcblxuICAgICAgICByZXN1bHQucHVzaChjbG9uZS5zcGxpY2UoX2luZGV4LCAxKVswXSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBkYXRhIGtleT13aGF0ZXZlciwgdmFsdWU9d2VpZ2h0IChyZWxhdGl2ZSBwcm9iYWJpbGl0eSlcbiAgICAgKiBAcmV0dXJucyB3aGF0ZXZlclxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5nZXRXZWlnaHRlZFZhbHVlID0gZnVuY3Rpb24gZ2V0V2VpZ2h0ZWRWYWx1ZShkYXRhKSB7XG4gICAgICB2YXIgdG90YWwgPSAwO1xuXG4gICAgICBmb3IgKHZhciBfaWQgaW4gZGF0YSkge1xuICAgICAgICB0b3RhbCArPSBkYXRhW19pZF07XG4gICAgICB9XG5cbiAgICAgIHZhciByYW5kb20gPSB0aGlzLmdldFVuaWZvcm0oKSAqIHRvdGFsO1xuICAgICAgdmFyIGlkLFxuICAgICAgICAgIHBhcnQgPSAwO1xuXG4gICAgICBmb3IgKGlkIGluIGRhdGEpIHtcbiAgICAgICAgcGFydCArPSBkYXRhW2lkXTtcblxuICAgICAgICBpZiAocmFuZG9tIDwgcGFydCkge1xuICAgICAgICAgIHJldHVybiBpZDtcbiAgICAgICAgfVxuICAgICAgfSAvLyBJZiBieSBzb21lIGZsb2F0aW5nLXBvaW50IGFubm95YW5jZSB3ZSBoYXZlXG4gICAgICAvLyByYW5kb20gPj0gdG90YWwsIGp1c3QgcmV0dXJuIHRoZSBsYXN0IGlkLlxuXG5cbiAgICAgIHJldHVybiBpZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IFJORyBzdGF0ZS4gVXNlZnVsIGZvciBzdG9yaW5nIHRoZSBzdGF0ZSBhbmQgcmUtc2V0dGluZyBpdCB2aWEgc2V0U3RhdGUuXG4gICAgICogQHJldHVybnMgSW50ZXJuYWwgc3RhdGVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZ2V0U3RhdGUgPSBmdW5jdGlvbiBnZXRTdGF0ZSgpIHtcbiAgICAgIHJldHVybiBbdGhpcy5fczAsIHRoaXMuX3MxLCB0aGlzLl9zMiwgdGhpcy5fY107XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBhIHByZXZpb3VzbHkgcmV0cmlldmVkIHN0YXRlLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5zZXRTdGF0ZSA9IGZ1bmN0aW9uIHNldFN0YXRlKHN0YXRlKSB7XG4gICAgICB0aGlzLl9zMCA9IHN0YXRlWzBdO1xuICAgICAgdGhpcy5fczEgPSBzdGF0ZVsxXTtcbiAgICAgIHRoaXMuX3MyID0gc3RhdGVbMl07XG4gICAgICB0aGlzLl9jID0gc3RhdGVbM107XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGNsb25lZCBSTkdcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSgpIHtcbiAgICAgIHZhciBjbG9uZSA9IG5ldyBSTkcoKTtcbiAgICAgIHJldHVybiBjbG9uZS5zZXRTdGF0ZSh0aGlzLmdldFN0YXRlKCkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gUk5HO1xuICB9KCk7XG5cbiAgdmFyIFJORyQxID0gbmV3IFJORygpLnNldFNlZWQoRGF0ZS5ub3coKSk7XG4gIC8qKlxuICAgKiBAY2xhc3MgQWJzdHJhY3QgZGlzcGxheSBiYWNrZW5kIG1vZHVsZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICB2YXIgQmFja2VuZCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQmFja2VuZCgpIHt9XG5cbiAgICB2YXIgX3Byb3RvMiA9IEJhY2tlbmQucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvMi5nZXRDb250YWluZXIgPSBmdW5jdGlvbiBnZXRDb250YWluZXIoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgX3Byb3RvMi5zZXRPcHRpb25zID0gZnVuY3Rpb24gc2V0T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcbiAgICB9O1xuXG4gICAgcmV0dXJuIEJhY2tlbmQ7XG4gIH0oKTtcblxuICB2YXIgQ2FudmFzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQmFja2VuZCkge1xuICAgIF9pbmhlcml0c0xvb3NlKENhbnZhcywgX0JhY2tlbmQpO1xuXG4gICAgZnVuY3Rpb24gQ2FudmFzKCkge1xuICAgICAgdmFyIF90aGlzO1xuXG4gICAgICBfdGhpcyA9IF9CYWNrZW5kLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgIF90aGlzLl9jdHggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICB2YXIgX3Byb3RvMyA9IENhbnZhcy5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8zLnNjaGVkdWxlID0gZnVuY3Rpb24gc2NoZWR1bGUoY2IpIHtcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYik7XG4gICAgfTtcblxuICAgIF9wcm90bzMuZ2V0Q29udGFpbmVyID0gZnVuY3Rpb24gZ2V0Q29udGFpbmVyKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2N0eC5jYW52YXM7XG4gICAgfTtcblxuICAgIF9wcm90bzMuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0cykge1xuICAgICAgX0JhY2tlbmQucHJvdG90eXBlLnNldE9wdGlvbnMuY2FsbCh0aGlzLCBvcHRzKTtcblxuICAgICAgdmFyIHN0eWxlID0gb3B0cy5mb250U3R5bGUgPyBvcHRzLmZvbnRTdHlsZSArIFwiIFwiIDogXCJcIjtcbiAgICAgIHZhciBmb250ID0gc3R5bGUgKyBcIiBcIiArIG9wdHMuZm9udFNpemUgKyBcInB4IFwiICsgb3B0cy5mb250RmFtaWx5O1xuICAgICAgdGhpcy5fY3R4LmZvbnQgPSBmb250O1xuXG4gICAgICB0aGlzLl91cGRhdGVTaXplKCk7XG5cbiAgICAgIHRoaXMuX2N0eC5mb250ID0gZm9udDtcbiAgICAgIHRoaXMuX2N0eC50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xuICAgICAgdGhpcy5fY3R4LnRleHRCYXNlbGluZSA9IFwibWlkZGxlXCI7XG4gICAgfTtcblxuICAgIF9wcm90bzMuY2xlYXIgPSBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9vcHRpb25zLmJnO1xuXG4gICAgICB0aGlzLl9jdHguZmlsbFJlY3QoMCwgMCwgdGhpcy5fY3R4LmNhbnZhcy53aWR0aCwgdGhpcy5fY3R4LmNhbnZhcy5oZWlnaHQpO1xuICAgIH07XG5cbiAgICBfcHJvdG8zLmV2ZW50VG9Qb3NpdGlvbiA9IGZ1bmN0aW9uIGV2ZW50VG9Qb3NpdGlvbih4LCB5KSB7XG4gICAgICB2YXIgY2FudmFzID0gdGhpcy5fY3R4LmNhbnZhcztcbiAgICAgIHZhciByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgeCAtPSByZWN0LmxlZnQ7XG4gICAgICB5IC09IHJlY3QudG9wO1xuICAgICAgeCAqPSBjYW52YXMud2lkdGggLyByZWN0LndpZHRoO1xuICAgICAgeSAqPSBjYW52YXMuaGVpZ2h0IC8gcmVjdC5oZWlnaHQ7XG5cbiAgICAgIGlmICh4IDwgMCB8fCB5IDwgMCB8fCB4ID49IGNhbnZhcy53aWR0aCB8fCB5ID49IGNhbnZhcy5oZWlnaHQpIHtcbiAgICAgICAgcmV0dXJuIFstMSwgLTFdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5fbm9ybWFsaXplZEV2ZW50VG9Qb3NpdGlvbih4LCB5KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENhbnZhcztcbiAgfShCYWNrZW5kKTtcbiAgLyoqXG4gICAqIEFsd2F5cyBwb3NpdGl2ZSBtb2R1bHVzXG4gICAqIEBwYXJhbSB4IE9wZXJhbmRcbiAgICogQHBhcmFtIG4gTW9kdWx1c1xuICAgKiBAcmV0dXJucyB4IG1vZHVsbyBuXG4gICAqL1xuXG5cbiAgZnVuY3Rpb24gbW9kKHgsIG4pIHtcbiAgICByZXR1cm4gKHggJSBuICsgbikgJSBuO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xhbXAodmFsLCBtaW4sIG1heCkge1xuICAgIGlmIChtaW4gPT09IHZvaWQgMCkge1xuICAgICAgbWluID0gMDtcbiAgICB9XG5cbiAgICBpZiAobWF4ID09PSB2b2lkIDApIHtcbiAgICAgIG1heCA9IDE7XG4gICAgfVxuXG4gICAgaWYgKHZhbCA8IG1pbikgcmV0dXJuIG1pbjtcbiAgICBpZiAodmFsID4gbWF4KSByZXR1cm4gbWF4O1xuICAgIHJldHVybiB2YWw7XG4gIH1cblxuICBmdW5jdGlvbiBjYXBpdGFsaXplKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHJpbmcuc3Vic3RyaW5nKDEpO1xuICB9XG4gIC8qKlxuICAgKiBGb3JtYXQgYSBzdHJpbmcgaW4gYSBmbGV4aWJsZSB3YXkuIFNjYW5zIGZvciAlcyBzdHJpbmdzIGFuZCByZXBsYWNlcyB0aGVtIHdpdGggYXJndW1lbnRzLiBMaXN0IG9mIHBhdHRlcm5zIGlzIG1vZGlmaWFibGUgdmlhIFN0cmluZy5mb3JtYXQubWFwLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGVtcGxhdGVcbiAgICogQHBhcmFtIHthbnl9IFthcmd2XVxuICAgKi9cblxuXG4gIGZ1bmN0aW9uIGZvcm1hdCh0ZW1wbGF0ZSkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHZhciBtYXAgPSBmb3JtYXQubWFwO1xuXG4gICAgdmFyIHJlcGxhY2VyID0gZnVuY3Rpb24gcmVwbGFjZXIobWF0Y2gsIGdyb3VwMSwgZ3JvdXAyLCBpbmRleCkge1xuICAgICAgaWYgKHRlbXBsYXRlLmNoYXJBdChpbmRleCAtIDEpID09IFwiJVwiKSB7XG4gICAgICAgIHJldHVybiBtYXRjaC5zdWJzdHJpbmcoMSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghYXJncy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgfVxuXG4gICAgICB2YXIgb2JqID0gYXJnc1swXTtcbiAgICAgIHZhciBncm91cCA9IGdyb3VwMSB8fCBncm91cDI7XG4gICAgICB2YXIgcGFydHMgPSBncm91cC5zcGxpdChcIixcIik7XG4gICAgICB2YXIgbmFtZSA9IHBhcnRzLnNoaWZ0KCkgfHwgXCJcIjtcbiAgICAgIHZhciBtZXRob2QgPSBtYXBbbmFtZS50b0xvd2VyQ2FzZSgpXTtcblxuICAgICAgaWYgKCFtZXRob2QpIHtcbiAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgfVxuXG4gICAgICBvYmogPSBhcmdzLnNoaWZ0KCk7XG4gICAgICB2YXIgcmVwbGFjZWQgPSBvYmpbbWV0aG9kXS5hcHBseShvYmosIHBhcnRzKTtcbiAgICAgIHZhciBmaXJzdCA9IG5hbWUuY2hhckF0KDApO1xuXG4gICAgICBpZiAoZmlyc3QgIT0gZmlyc3QudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICByZXBsYWNlZCA9IGNhcGl0YWxpemUocmVwbGFjZWQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVwbGFjZWQ7XG4gICAgfTtcblxuICAgIHJldHVybiB0ZW1wbGF0ZS5yZXBsYWNlKC8lKD86KFthLXpdKyl8KD86eyhbXn1dKyl9KSkvZ2ksIHJlcGxhY2VyKTtcbiAgfVxuXG4gIGZvcm1hdC5tYXAgPSB7XG4gICAgXCJzXCI6IFwidG9TdHJpbmdcIlxuICB9O1xuICB2YXIgdXRpbCA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgICBtb2Q6IG1vZCxcbiAgICBjbGFtcDogY2xhbXAsXG4gICAgY2FwaXRhbGl6ZTogY2FwaXRhbGl6ZSxcbiAgICBmb3JtYXQ6IGZvcm1hdFxuICB9KTtcbiAgLyoqXG4gICAqIEBjbGFzcyBIZXhhZ29uYWwgYmFja2VuZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICB2YXIgSGV4ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQ2FudmFzKSB7XG4gICAgX2luaGVyaXRzTG9vc2UoSGV4LCBfQ2FudmFzKTtcblxuICAgIGZ1bmN0aW9uIEhleCgpIHtcbiAgICAgIHZhciBfdGhpczI7XG5cbiAgICAgIF90aGlzMiA9IF9DYW52YXMuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgX3RoaXMyLl9zcGFjaW5nWCA9IDA7XG4gICAgICBfdGhpczIuX3NwYWNpbmdZID0gMDtcbiAgICAgIF90aGlzMi5faGV4U2l6ZSA9IDA7XG4gICAgICByZXR1cm4gX3RoaXMyO1xuICAgIH1cblxuICAgIHZhciBfcHJvdG80ID0gSGV4LnByb3RvdHlwZTtcblxuICAgIF9wcm90bzQuZHJhdyA9IGZ1bmN0aW9uIGRyYXcoZGF0YSwgY2xlYXJCZWZvcmUpIHtcbiAgICAgIHZhciB4ID0gZGF0YVswXSxcbiAgICAgICAgICB5ID0gZGF0YVsxXSxcbiAgICAgICAgICBjaCA9IGRhdGFbMl0sXG4gICAgICAgICAgZmcgPSBkYXRhWzNdLFxuICAgICAgICAgIGJnID0gZGF0YVs0XTtcbiAgICAgIHZhciBweCA9IFsoeCArIDEpICogdGhpcy5fc3BhY2luZ1gsIHkgKiB0aGlzLl9zcGFjaW5nWSArIHRoaXMuX2hleFNpemVdO1xuXG4gICAgICBpZiAodGhpcy5fb3B0aW9ucy50cmFuc3Bvc2UpIHtcbiAgICAgICAgcHgucmV2ZXJzZSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2xlYXJCZWZvcmUpIHtcbiAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IGJnO1xuXG4gICAgICAgIHRoaXMuX2ZpbGwocHhbMF0sIHB4WzFdKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFjaCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSBmZztcbiAgICAgIHZhciBjaGFycyA9IFtdLmNvbmNhdChjaCk7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5fY3R4LmZpbGxUZXh0KGNoYXJzW2ldLCBweFswXSwgTWF0aC5jZWlsKHB4WzFdKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90bzQuY29tcHV0ZVNpemUgPSBmdW5jdGlvbiBjb21wdXRlU2l6ZShhdmFpbFdpZHRoLCBhdmFpbEhlaWdodCkge1xuICAgICAgaWYgKHRoaXMuX29wdGlvbnMudHJhbnNwb3NlKSB7XG4gICAgICAgIGF2YWlsV2lkdGggKz0gYXZhaWxIZWlnaHQ7XG4gICAgICAgIGF2YWlsSGVpZ2h0ID0gYXZhaWxXaWR0aCAtIGF2YWlsSGVpZ2h0O1xuICAgICAgICBhdmFpbFdpZHRoIC09IGF2YWlsSGVpZ2h0O1xuICAgICAgfVxuXG4gICAgICB2YXIgd2lkdGggPSBNYXRoLmZsb29yKGF2YWlsV2lkdGggLyB0aGlzLl9zcGFjaW5nWCkgLSAxO1xuICAgICAgdmFyIGhlaWdodCA9IE1hdGguZmxvb3IoKGF2YWlsSGVpZ2h0IC0gMiAqIHRoaXMuX2hleFNpemUpIC8gdGhpcy5fc3BhY2luZ1kgKyAxKTtcbiAgICAgIHJldHVybiBbd2lkdGgsIGhlaWdodF07XG4gICAgfTtcblxuICAgIF9wcm90bzQuY29tcHV0ZUZvbnRTaXplID0gZnVuY3Rpb24gY29tcHV0ZUZvbnRTaXplKGF2YWlsV2lkdGgsIGF2YWlsSGVpZ2h0KSB7XG4gICAgICBpZiAodGhpcy5fb3B0aW9ucy50cmFuc3Bvc2UpIHtcbiAgICAgICAgYXZhaWxXaWR0aCArPSBhdmFpbEhlaWdodDtcbiAgICAgICAgYXZhaWxIZWlnaHQgPSBhdmFpbFdpZHRoIC0gYXZhaWxIZWlnaHQ7XG4gICAgICAgIGF2YWlsV2lkdGggLT0gYXZhaWxIZWlnaHQ7XG4gICAgICB9XG5cbiAgICAgIHZhciBoZXhTaXplV2lkdGggPSAyICogYXZhaWxXaWR0aCAvICgodGhpcy5fb3B0aW9ucy53aWR0aCArIDEpICogTWF0aC5zcXJ0KDMpKSAtIDE7XG4gICAgICB2YXIgaGV4U2l6ZUhlaWdodCA9IGF2YWlsSGVpZ2h0IC8gKDIgKyAxLjUgKiAodGhpcy5fb3B0aW9ucy5oZWlnaHQgLSAxKSk7XG4gICAgICB2YXIgaGV4U2l6ZSA9IE1hdGgubWluKGhleFNpemVXaWR0aCwgaGV4U2l6ZUhlaWdodCk7IC8vIGNvbXB1dGUgY2hhciByYXRpb1xuXG4gICAgICB2YXIgb2xkRm9udCA9IHRoaXMuX2N0eC5mb250O1xuICAgICAgdGhpcy5fY3R4LmZvbnQgPSBcIjEwMHB4IFwiICsgdGhpcy5fb3B0aW9ucy5mb250RmFtaWx5O1xuICAgICAgdmFyIHdpZHRoID0gTWF0aC5jZWlsKHRoaXMuX2N0eC5tZWFzdXJlVGV4dChcIldcIikud2lkdGgpO1xuICAgICAgdGhpcy5fY3R4LmZvbnQgPSBvbGRGb250O1xuICAgICAgdmFyIHJhdGlvID0gd2lkdGggLyAxMDA7XG4gICAgICBoZXhTaXplID0gTWF0aC5mbG9vcihoZXhTaXplKSArIDE7IC8vIGNsb3Nlc3QgbGFyZ2VyIGhleFNpemVcbiAgICAgIC8vIEZJWE1FIGNoYXIgc2l6ZSBjb21wdXRhdGlvbiBkb2VzIG5vdCByZXNwZWN0IHRyYW5zcG9zZWQgaGV4ZXNcblxuICAgICAgdmFyIGZvbnRTaXplID0gMiAqIGhleFNpemUgLyAodGhpcy5fb3B0aW9ucy5zcGFjaW5nICogKDEgKyByYXRpbyAvIE1hdGguc3FydCgzKSkpOyAvLyBjbG9zZXN0IHNtYWxsZXIgZm9udFNpemVcblxuICAgICAgcmV0dXJuIE1hdGguY2VpbChmb250U2l6ZSkgLSAxO1xuICAgIH07XG5cbiAgICBfcHJvdG80Ll9ub3JtYWxpemVkRXZlbnRUb1Bvc2l0aW9uID0gZnVuY3Rpb24gX25vcm1hbGl6ZWRFdmVudFRvUG9zaXRpb24oeCwgeSkge1xuICAgICAgdmFyIG5vZGVTaXplO1xuXG4gICAgICBpZiAodGhpcy5fb3B0aW9ucy50cmFuc3Bvc2UpIHtcbiAgICAgICAgeCArPSB5O1xuICAgICAgICB5ID0geCAtIHk7XG4gICAgICAgIHggLT0geTtcbiAgICAgICAgbm9kZVNpemUgPSB0aGlzLl9jdHguY2FudmFzLndpZHRoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9kZVNpemUgPSB0aGlzLl9jdHguY2FudmFzLmhlaWdodDtcbiAgICAgIH1cblxuICAgICAgdmFyIHNpemUgPSBub2RlU2l6ZSAvIHRoaXMuX29wdGlvbnMuaGVpZ2h0O1xuICAgICAgeSA9IE1hdGguZmxvb3IoeSAvIHNpemUpO1xuXG4gICAgICBpZiAobW9kKHksIDIpKSB7XG4gICAgICAgIC8qIG9kZCByb3cgKi9cbiAgICAgICAgeCAtPSB0aGlzLl9zcGFjaW5nWDtcbiAgICAgICAgeCA9IDEgKyAyICogTWF0aC5mbG9vcih4IC8gKDIgKiB0aGlzLl9zcGFjaW5nWCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgeCA9IDIgKiBNYXRoLmZsb29yKHggLyAoMiAqIHRoaXMuX3NwYWNpbmdYKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbeCwgeV07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFyZ3VtZW50cyBhcmUgcGl4ZWwgdmFsdWVzLiBJZiBcInRyYW5zcG9zZWRcIiBtb2RlIGlzIGVuYWJsZWQsIHRoZW4gdGhlc2UgdHdvIGFyZSBhbHJlYWR5IHN3YXBwZWQuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvNC5fZmlsbCA9IGZ1bmN0aW9uIF9maWxsKGN4LCBjeSkge1xuICAgICAgdmFyIGEgPSB0aGlzLl9oZXhTaXplO1xuICAgICAgdmFyIGIgPSB0aGlzLl9vcHRpb25zLmJvcmRlcjtcbiAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICBjdHguYmVnaW5QYXRoKCk7XG5cbiAgICAgIGlmICh0aGlzLl9vcHRpb25zLnRyYW5zcG9zZSkge1xuICAgICAgICBjdHgubW92ZVRvKGN4IC0gYSArIGIsIGN5KTtcbiAgICAgICAgY3R4LmxpbmVUbyhjeCAtIGEgLyAyICsgYiwgY3kgKyB0aGlzLl9zcGFjaW5nWCAtIGIpO1xuICAgICAgICBjdHgubGluZVRvKGN4ICsgYSAvIDIgLSBiLCBjeSArIHRoaXMuX3NwYWNpbmdYIC0gYik7XG4gICAgICAgIGN0eC5saW5lVG8oY3ggKyBhIC0gYiwgY3kpO1xuICAgICAgICBjdHgubGluZVRvKGN4ICsgYSAvIDIgLSBiLCBjeSAtIHRoaXMuX3NwYWNpbmdYICsgYik7XG4gICAgICAgIGN0eC5saW5lVG8oY3ggLSBhIC8gMiArIGIsIGN5IC0gdGhpcy5fc3BhY2luZ1ggKyBiKTtcbiAgICAgICAgY3R4LmxpbmVUbyhjeCAtIGEgKyBiLCBjeSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdHgubW92ZVRvKGN4LCBjeSAtIGEgKyBiKTtcbiAgICAgICAgY3R4LmxpbmVUbyhjeCArIHRoaXMuX3NwYWNpbmdYIC0gYiwgY3kgLSBhIC8gMiArIGIpO1xuICAgICAgICBjdHgubGluZVRvKGN4ICsgdGhpcy5fc3BhY2luZ1ggLSBiLCBjeSArIGEgLyAyIC0gYik7XG4gICAgICAgIGN0eC5saW5lVG8oY3gsIGN5ICsgYSAtIGIpO1xuICAgICAgICBjdHgubGluZVRvKGN4IC0gdGhpcy5fc3BhY2luZ1ggKyBiLCBjeSArIGEgLyAyIC0gYik7XG4gICAgICAgIGN0eC5saW5lVG8oY3ggLSB0aGlzLl9zcGFjaW5nWCArIGIsIGN5IC0gYSAvIDIgKyBiKTtcbiAgICAgICAgY3R4LmxpbmVUbyhjeCwgY3kgLSBhICsgYik7XG4gICAgICB9XG5cbiAgICAgIGN0eC5maWxsKCk7XG4gICAgfTtcblxuICAgIF9wcm90bzQuX3VwZGF0ZVNpemUgPSBmdW5jdGlvbiBfdXBkYXRlU2l6ZSgpIHtcbiAgICAgIHZhciBvcHRzID0gdGhpcy5fb3B0aW9ucztcbiAgICAgIHZhciBjaGFyV2lkdGggPSBNYXRoLmNlaWwodGhpcy5fY3R4Lm1lYXN1cmVUZXh0KFwiV1wiKS53aWR0aCk7XG4gICAgICB0aGlzLl9oZXhTaXplID0gTWF0aC5mbG9vcihvcHRzLnNwYWNpbmcgKiAob3B0cy5mb250U2l6ZSArIGNoYXJXaWR0aCAvIE1hdGguc3FydCgzKSkgLyAyKTtcbiAgICAgIHRoaXMuX3NwYWNpbmdYID0gdGhpcy5faGV4U2l6ZSAqIE1hdGguc3FydCgzKSAvIDI7XG4gICAgICB0aGlzLl9zcGFjaW5nWSA9IHRoaXMuX2hleFNpemUgKiAxLjU7XG4gICAgICB2YXIgeHByb3A7XG4gICAgICB2YXIgeXByb3A7XG5cbiAgICAgIGlmIChvcHRzLnRyYW5zcG9zZSkge1xuICAgICAgICB4cHJvcCA9IFwiaGVpZ2h0XCI7XG4gICAgICAgIHlwcm9wID0gXCJ3aWR0aFwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgeHByb3AgPSBcIndpZHRoXCI7XG4gICAgICAgIHlwcm9wID0gXCJoZWlnaHRcIjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fY3R4LmNhbnZhc1t4cHJvcF0gPSBNYXRoLmNlaWwoKG9wdHMud2lkdGggKyAxKSAqIHRoaXMuX3NwYWNpbmdYKTtcbiAgICAgIHRoaXMuX2N0eC5jYW52YXNbeXByb3BdID0gTWF0aC5jZWlsKChvcHRzLmhlaWdodCAtIDEpICogdGhpcy5fc3BhY2luZ1kgKyAyICogdGhpcy5faGV4U2l6ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBIZXg7XG4gIH0oQ2FudmFzKTtcbiAgLyoqXG4gICAqIEBjbGFzcyBSZWN0YW5ndWxhciBiYWNrZW5kXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG5cbiAgdmFyIFJlY3QgPVxuICAvKiogQGNsYXNzICovXG4gIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgUmVjdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NhbnZhczIpIHtcbiAgICAgIF9pbmhlcml0c0xvb3NlKFJlY3QsIF9DYW52YXMyKTtcblxuICAgICAgZnVuY3Rpb24gUmVjdCgpIHtcbiAgICAgICAgdmFyIF90aGlzMztcblxuICAgICAgICBfdGhpczMgPSBfQ2FudmFzMi5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzMy5fc3BhY2luZ1ggPSAwO1xuICAgICAgICBfdGhpczMuX3NwYWNpbmdZID0gMDtcbiAgICAgICAgX3RoaXMzLl9jYW52YXNDYWNoZSA9IHt9O1xuICAgICAgICByZXR1cm4gX3RoaXMzO1xuICAgICAgfVxuXG4gICAgICB2YXIgX3Byb3RvNSA9IFJlY3QucHJvdG90eXBlO1xuXG4gICAgICBfcHJvdG81LnNldE9wdGlvbnMgPSBmdW5jdGlvbiBzZXRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgX0NhbnZhczIucHJvdG90eXBlLnNldE9wdGlvbnMuY2FsbCh0aGlzLCBvcHRpb25zKTtcblxuICAgICAgICB0aGlzLl9jYW52YXNDYWNoZSA9IHt9O1xuICAgICAgfTtcblxuICAgICAgX3Byb3RvNS5kcmF3ID0gZnVuY3Rpb24gZHJhdyhkYXRhLCBjbGVhckJlZm9yZSkge1xuICAgICAgICBpZiAoUmVjdC5jYWNoZSkge1xuICAgICAgICAgIHRoaXMuX2RyYXdXaXRoQ2FjaGUoZGF0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fZHJhd05vQ2FjaGUoZGF0YSwgY2xlYXJCZWZvcmUpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBfcHJvdG81Ll9kcmF3V2l0aENhY2hlID0gZnVuY3Rpb24gX2RyYXdXaXRoQ2FjaGUoZGF0YSkge1xuICAgICAgICB2YXIgeCA9IGRhdGFbMF0sXG4gICAgICAgICAgICB5ID0gZGF0YVsxXSxcbiAgICAgICAgICAgIGNoID0gZGF0YVsyXSxcbiAgICAgICAgICAgIGZnID0gZGF0YVszXSxcbiAgICAgICAgICAgIGJnID0gZGF0YVs0XTtcbiAgICAgICAgdmFyIGhhc2ggPSBcIlwiICsgY2ggKyBmZyArIGJnO1xuICAgICAgICB2YXIgY2FudmFzO1xuXG4gICAgICAgIGlmIChoYXNoIGluIHRoaXMuX2NhbnZhc0NhY2hlKSB7XG4gICAgICAgICAgY2FudmFzID0gdGhpcy5fY2FudmFzQ2FjaGVbaGFzaF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGIgPSB0aGlzLl9vcHRpb25zLmJvcmRlcjtcbiAgICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICAgIGNhbnZhcy53aWR0aCA9IHRoaXMuX3NwYWNpbmdYO1xuICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSB0aGlzLl9zcGFjaW5nWTtcbiAgICAgICAgICBjdHguZmlsbFN0eWxlID0gYmc7XG4gICAgICAgICAgY3R4LmZpbGxSZWN0KGIsIGIsIGNhbnZhcy53aWR0aCAtIGIsIGNhbnZhcy5oZWlnaHQgLSBiKTtcblxuICAgICAgICAgIGlmIChjaCkge1xuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGZnO1xuICAgICAgICAgICAgY3R4LmZvbnQgPSB0aGlzLl9jdHguZm9udDtcbiAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xuICAgICAgICAgICAgY3R4LnRleHRCYXNlbGluZSA9IFwibWlkZGxlXCI7XG4gICAgICAgICAgICB2YXIgY2hhcnMgPSBbXS5jb25jYXQoY2gpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGN0eC5maWxsVGV4dChjaGFyc1tpXSwgdGhpcy5fc3BhY2luZ1ggLyAyLCBNYXRoLmNlaWwodGhpcy5fc3BhY2luZ1kgLyAyKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5fY2FudmFzQ2FjaGVbaGFzaF0gPSBjYW52YXM7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9jdHguZHJhd0ltYWdlKGNhbnZhcywgeCAqIHRoaXMuX3NwYWNpbmdYLCB5ICogdGhpcy5fc3BhY2luZ1kpO1xuICAgICAgfTtcblxuICAgICAgX3Byb3RvNS5fZHJhd05vQ2FjaGUgPSBmdW5jdGlvbiBfZHJhd05vQ2FjaGUoZGF0YSwgY2xlYXJCZWZvcmUpIHtcbiAgICAgICAgdmFyIHggPSBkYXRhWzBdLFxuICAgICAgICAgICAgeSA9IGRhdGFbMV0sXG4gICAgICAgICAgICBjaCA9IGRhdGFbMl0sXG4gICAgICAgICAgICBmZyA9IGRhdGFbM10sXG4gICAgICAgICAgICBiZyA9IGRhdGFbNF07XG5cbiAgICAgICAgaWYgKGNsZWFyQmVmb3JlKSB7XG4gICAgICAgICAgdmFyIGIgPSB0aGlzLl9vcHRpb25zLmJvcmRlcjtcbiAgICAgICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gYmc7XG5cbiAgICAgICAgICB0aGlzLl9jdHguZmlsbFJlY3QoeCAqIHRoaXMuX3NwYWNpbmdYICsgYiwgeSAqIHRoaXMuX3NwYWNpbmdZICsgYiwgdGhpcy5fc3BhY2luZ1ggLSBiLCB0aGlzLl9zcGFjaW5nWSAtIGIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjaCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSBmZztcbiAgICAgICAgdmFyIGNoYXJzID0gW10uY29uY2F0KGNoKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5fY3R4LmZpbGxUZXh0KGNoYXJzW2ldLCAoeCArIDAuNSkgKiB0aGlzLl9zcGFjaW5nWCwgTWF0aC5jZWlsKCh5ICsgMC41KSAqIHRoaXMuX3NwYWNpbmdZKSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIF9wcm90bzUuY29tcHV0ZVNpemUgPSBmdW5jdGlvbiBjb21wdXRlU2l6ZShhdmFpbFdpZHRoLCBhdmFpbEhlaWdodCkge1xuICAgICAgICB2YXIgd2lkdGggPSBNYXRoLmZsb29yKGF2YWlsV2lkdGggLyB0aGlzLl9zcGFjaW5nWCk7XG4gICAgICAgIHZhciBoZWlnaHQgPSBNYXRoLmZsb29yKGF2YWlsSGVpZ2h0IC8gdGhpcy5fc3BhY2luZ1kpO1xuICAgICAgICByZXR1cm4gW3dpZHRoLCBoZWlnaHRdO1xuICAgICAgfTtcblxuICAgICAgX3Byb3RvNS5jb21wdXRlRm9udFNpemUgPSBmdW5jdGlvbiBjb21wdXRlRm9udFNpemUoYXZhaWxXaWR0aCwgYXZhaWxIZWlnaHQpIHtcbiAgICAgICAgdmFyIGJveFdpZHRoID0gTWF0aC5mbG9vcihhdmFpbFdpZHRoIC8gdGhpcy5fb3B0aW9ucy53aWR0aCk7XG4gICAgICAgIHZhciBib3hIZWlnaHQgPSBNYXRoLmZsb29yKGF2YWlsSGVpZ2h0IC8gdGhpcy5fb3B0aW9ucy5oZWlnaHQpO1xuICAgICAgICAvKiBjb21wdXRlIGNoYXIgcmF0aW8gKi9cblxuICAgICAgICB2YXIgb2xkRm9udCA9IHRoaXMuX2N0eC5mb250O1xuICAgICAgICB0aGlzLl9jdHguZm9udCA9IFwiMTAwcHggXCIgKyB0aGlzLl9vcHRpb25zLmZvbnRGYW1pbHk7XG4gICAgICAgIHZhciB3aWR0aCA9IE1hdGguY2VpbCh0aGlzLl9jdHgubWVhc3VyZVRleHQoXCJXXCIpLndpZHRoKTtcbiAgICAgICAgdGhpcy5fY3R4LmZvbnQgPSBvbGRGb250O1xuICAgICAgICB2YXIgcmF0aW8gPSB3aWR0aCAvIDEwMDtcbiAgICAgICAgdmFyIHdpZHRoRnJhY3Rpb24gPSByYXRpbyAqIGJveEhlaWdodCAvIGJveFdpZHRoO1xuXG4gICAgICAgIGlmICh3aWR0aEZyYWN0aW9uID4gMSkge1xuICAgICAgICAgIC8qIHRvbyB3aWRlIHdpdGggY3VycmVudCBhc3BlY3QgcmF0aW8gKi9cbiAgICAgICAgICBib3hIZWlnaHQgPSBNYXRoLmZsb29yKGJveEhlaWdodCAvIHdpZHRoRnJhY3Rpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoYm94SGVpZ2h0IC8gdGhpcy5fb3B0aW9ucy5zcGFjaW5nKTtcbiAgICAgIH07XG5cbiAgICAgIF9wcm90bzUuX25vcm1hbGl6ZWRFdmVudFRvUG9zaXRpb24gPSBmdW5jdGlvbiBfbm9ybWFsaXplZEV2ZW50VG9Qb3NpdGlvbih4LCB5KSB7XG4gICAgICAgIHJldHVybiBbTWF0aC5mbG9vcih4IC8gdGhpcy5fc3BhY2luZ1gpLCBNYXRoLmZsb29yKHkgLyB0aGlzLl9zcGFjaW5nWSldO1xuICAgICAgfTtcblxuICAgICAgX3Byb3RvNS5fdXBkYXRlU2l6ZSA9IGZ1bmN0aW9uIF91cGRhdGVTaXplKCkge1xuICAgICAgICB2YXIgb3B0cyA9IHRoaXMuX29wdGlvbnM7XG4gICAgICAgIHZhciBjaGFyV2lkdGggPSBNYXRoLmNlaWwodGhpcy5fY3R4Lm1lYXN1cmVUZXh0KFwiV1wiKS53aWR0aCk7XG4gICAgICAgIHRoaXMuX3NwYWNpbmdYID0gTWF0aC5jZWlsKG9wdHMuc3BhY2luZyAqIGNoYXJXaWR0aCk7XG4gICAgICAgIHRoaXMuX3NwYWNpbmdZID0gTWF0aC5jZWlsKG9wdHMuc3BhY2luZyAqIG9wdHMuZm9udFNpemUpO1xuXG4gICAgICAgIGlmIChvcHRzLmZvcmNlU3F1YXJlUmF0aW8pIHtcbiAgICAgICAgICB0aGlzLl9zcGFjaW5nWCA9IHRoaXMuX3NwYWNpbmdZID0gTWF0aC5tYXgodGhpcy5fc3BhY2luZ1gsIHRoaXMuX3NwYWNpbmdZKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2N0eC5jYW52YXMud2lkdGggPSBvcHRzLndpZHRoICogdGhpcy5fc3BhY2luZ1g7XG4gICAgICAgIHRoaXMuX2N0eC5jYW52YXMuaGVpZ2h0ID0gb3B0cy5oZWlnaHQgKiB0aGlzLl9zcGFjaW5nWTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBSZWN0O1xuICAgIH0oQ2FudmFzKTtcblxuICAgIFJlY3QuY2FjaGUgPSBmYWxzZTtcbiAgICByZXR1cm4gUmVjdDtcbiAgfSgpO1xuICAvKipcbiAgICogQGNsYXNzIFRpbGUgYmFja2VuZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuXG4gIHZhciBUaWxlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQ2FudmFzMykge1xuICAgIF9pbmhlcml0c0xvb3NlKFRpbGUsIF9DYW52YXMzKTtcblxuICAgIGZ1bmN0aW9uIFRpbGUoKSB7XG4gICAgICB2YXIgX3RoaXM0O1xuXG4gICAgICBfdGhpczQgPSBfQ2FudmFzMy5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICBfdGhpczQuX2NvbG9yQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICAgIHJldHVybiBfdGhpczQ7XG4gICAgfVxuXG4gICAgdmFyIF9wcm90bzYgPSBUaWxlLnByb3RvdHlwZTtcblxuICAgIF9wcm90bzYuZHJhdyA9IGZ1bmN0aW9uIGRyYXcoZGF0YSwgY2xlYXJCZWZvcmUpIHtcbiAgICAgIHZhciB4ID0gZGF0YVswXSxcbiAgICAgICAgICB5ID0gZGF0YVsxXSxcbiAgICAgICAgICBjaCA9IGRhdGFbMl0sXG4gICAgICAgICAgZmcgPSBkYXRhWzNdLFxuICAgICAgICAgIGJnID0gZGF0YVs0XTtcbiAgICAgIHZhciB0aWxlV2lkdGggPSB0aGlzLl9vcHRpb25zLnRpbGVXaWR0aDtcbiAgICAgIHZhciB0aWxlSGVpZ2h0ID0gdGhpcy5fb3B0aW9ucy50aWxlSGVpZ2h0O1xuXG4gICAgICBpZiAoY2xlYXJCZWZvcmUpIHtcbiAgICAgICAgaWYgKHRoaXMuX29wdGlvbnMudGlsZUNvbG9yaXplKSB7XG4gICAgICAgICAgdGhpcy5fY3R4LmNsZWFyUmVjdCh4ICogdGlsZVdpZHRoLCB5ICogdGlsZUhlaWdodCwgdGlsZVdpZHRoLCB0aWxlSGVpZ2h0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gYmc7XG5cbiAgICAgICAgICB0aGlzLl9jdHguZmlsbFJlY3QoeCAqIHRpbGVXaWR0aCwgeSAqIHRpbGVIZWlnaHQsIHRpbGVXaWR0aCwgdGlsZUhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFjaCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBjaGFycyA9IFtdLmNvbmNhdChjaCk7XG4gICAgICB2YXIgZmdzID0gW10uY29uY2F0KGZnKTtcbiAgICAgIHZhciBiZ3MgPSBbXS5jb25jYXQoYmcpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0aWxlID0gdGhpcy5fb3B0aW9ucy50aWxlTWFwW2NoYXJzW2ldXTtcblxuICAgICAgICBpZiAoIXRpbGUpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDaGFyIFxcXCJcIiArIGNoYXJzW2ldICsgXCJcXFwiIG5vdCBmb3VuZCBpbiB0aWxlTWFwXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX29wdGlvbnMudGlsZUNvbG9yaXplKSB7XG4gICAgICAgICAgLy8gYXBwbHkgY29sb3JpemF0aW9uXG4gICAgICAgICAgdmFyIGNhbnZhcyA9IHRoaXMuX2NvbG9yQ2FudmFzO1xuICAgICAgICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgICBjb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwic291cmNlLW92ZXJcIjtcbiAgICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aWxlV2lkdGgsIHRpbGVIZWlnaHQpO1xuICAgICAgICAgIHZhciBfZmcgPSBmZ3NbaV07XG4gICAgICAgICAgdmFyIF9iZyA9IGJnc1tpXTtcbiAgICAgICAgICBjb250ZXh0LmRyYXdJbWFnZSh0aGlzLl9vcHRpb25zLnRpbGVTZXQsIHRpbGVbMF0sIHRpbGVbMV0sIHRpbGVXaWR0aCwgdGlsZUhlaWdodCwgMCwgMCwgdGlsZVdpZHRoLCB0aWxlSGVpZ2h0KTtcblxuICAgICAgICAgIGlmIChfZmcgIT0gXCJ0cmFuc3BhcmVudFwiKSB7XG4gICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IF9mZztcbiAgICAgICAgICAgIGNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJzb3VyY2UtYXRvcFwiO1xuICAgICAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCB0aWxlV2lkdGgsIHRpbGVIZWlnaHQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChfYmcgIT0gXCJ0cmFuc3BhcmVudFwiKSB7XG4gICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IF9iZztcbiAgICAgICAgICAgIGNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJkZXN0aW5hdGlvbi1vdmVyXCI7XG4gICAgICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIHRpbGVXaWR0aCwgdGlsZUhlaWdodCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5fY3R4LmRyYXdJbWFnZShjYW52YXMsIHggKiB0aWxlV2lkdGgsIHkgKiB0aWxlSGVpZ2h0LCB0aWxlV2lkdGgsIHRpbGVIZWlnaHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIG5vIGNvbG9yaXppbmcsIGVhc3lcbiAgICAgICAgICB0aGlzLl9jdHguZHJhd0ltYWdlKHRoaXMuX29wdGlvbnMudGlsZVNldCwgdGlsZVswXSwgdGlsZVsxXSwgdGlsZVdpZHRoLCB0aWxlSGVpZ2h0LCB4ICogdGlsZVdpZHRoLCB5ICogdGlsZUhlaWdodCwgdGlsZVdpZHRoLCB0aWxlSGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG82LmNvbXB1dGVTaXplID0gZnVuY3Rpb24gY29tcHV0ZVNpemUoYXZhaWxXaWR0aCwgYXZhaWxIZWlnaHQpIHtcbiAgICAgIHZhciB3aWR0aCA9IE1hdGguZmxvb3IoYXZhaWxXaWR0aCAvIHRoaXMuX29wdGlvbnMudGlsZVdpZHRoKTtcbiAgICAgIHZhciBoZWlnaHQgPSBNYXRoLmZsb29yKGF2YWlsSGVpZ2h0IC8gdGhpcy5fb3B0aW9ucy50aWxlSGVpZ2h0KTtcbiAgICAgIHJldHVybiBbd2lkdGgsIGhlaWdodF07XG4gICAgfTtcblxuICAgIF9wcm90bzYuY29tcHV0ZUZvbnRTaXplID0gZnVuY3Rpb24gY29tcHV0ZUZvbnRTaXplKCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGlsZSBiYWNrZW5kIGRvZXMgbm90IHVuZGVyc3RhbmQgZm9udCBzaXplXCIpO1xuICAgIH07XG5cbiAgICBfcHJvdG82Ll9ub3JtYWxpemVkRXZlbnRUb1Bvc2l0aW9uID0gZnVuY3Rpb24gX25vcm1hbGl6ZWRFdmVudFRvUG9zaXRpb24oeCwgeSkge1xuICAgICAgcmV0dXJuIFtNYXRoLmZsb29yKHggLyB0aGlzLl9vcHRpb25zLnRpbGVXaWR0aCksIE1hdGguZmxvb3IoeSAvIHRoaXMuX29wdGlvbnMudGlsZUhlaWdodCldO1xuICAgIH07XG5cbiAgICBfcHJvdG82Ll91cGRhdGVTaXplID0gZnVuY3Rpb24gX3VwZGF0ZVNpemUoKSB7XG4gICAgICB2YXIgb3B0cyA9IHRoaXMuX29wdGlvbnM7XG4gICAgICB0aGlzLl9jdHguY2FudmFzLndpZHRoID0gb3B0cy53aWR0aCAqIG9wdHMudGlsZVdpZHRoO1xuICAgICAgdGhpcy5fY3R4LmNhbnZhcy5oZWlnaHQgPSBvcHRzLmhlaWdodCAqIG9wdHMudGlsZUhlaWdodDtcbiAgICAgIHRoaXMuX2NvbG9yQ2FudmFzLndpZHRoID0gb3B0cy50aWxlV2lkdGg7XG4gICAgICB0aGlzLl9jb2xvckNhbnZhcy5oZWlnaHQgPSBvcHRzLnRpbGVIZWlnaHQ7XG4gICAgfTtcblxuICAgIHJldHVybiBUaWxlO1xuICB9KENhbnZhcyk7XG5cbiAgZnVuY3Rpb24gZnJvbVN0cmluZyhzdHIpIHtcbiAgICB2YXIgY2FjaGVkLCByO1xuXG4gICAgaWYgKHN0ciBpbiBDQUNIRSkge1xuICAgICAgY2FjaGVkID0gQ0FDSEVbc3RyXTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHN0ci5jaGFyQXQoMCkgPT0gXCIjXCIpIHtcbiAgICAgICAgLy8gaGV4IHJnYlxuICAgICAgICB2YXIgbWF0Y2hlZCA9IHN0ci5tYXRjaCgvWzAtOWEtZl0vZ2kpIHx8IFtdO1xuICAgICAgICB2YXIgdmFsdWVzID0gbWF0Y2hlZC5tYXAoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoeCwgMTYpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodmFsdWVzLmxlbmd0aCA9PSAzKSB7XG4gICAgICAgICAgY2FjaGVkID0gdmFsdWVzLm1hcChmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgcmV0dXJuIHggKiAxNztcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICAgICAgdmFsdWVzW2kgKyAxXSArPSAxNiAqIHZhbHVlc1tpXTtcbiAgICAgICAgICAgIHZhbHVlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2FjaGVkID0gdmFsdWVzO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHIgPSBzdHIubWF0Y2goL3JnYlxcKChbMC05LCBdKylcXCkvaSkpIHtcbiAgICAgICAgLy8gZGVjaW1hbCByZ2JcbiAgICAgICAgY2FjaGVkID0gclsxXS5zcGxpdCgvXFxzKixcXHMqLykubWFwKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHgpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGh0bWwgbmFtZVxuICAgICAgICBjYWNoZWQgPSBbMCwgMCwgMF07XG4gICAgICB9XG5cbiAgICAgIENBQ0hFW3N0cl0gPSBjYWNoZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNhY2hlZC5zbGljZSgpO1xuICB9XG4gIC8qKlxuICAgKiBBZGQgdHdvIG9yIG1vcmUgY29sb3JzXG4gICAqL1xuXG5cbiAgZnVuY3Rpb24gYWRkKGNvbG9yMSkge1xuICAgIHZhciByZXN1bHQgPSBjb2xvcjEuc2xpY2UoKTtcblxuICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgY29sb3JzID0gbmV3IEFycmF5KF9sZW4yID4gMSA/IF9sZW4yIC0gMSA6IDApLCBfa2V5MiA9IDE7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgIGNvbG9yc1tfa2V5MiAtIDFdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjb2xvcnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgcmVzdWx0W2ldICs9IGNvbG9yc1tqXVtpXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIC8qKlxuICAgKiBBZGQgdHdvIG9yIG1vcmUgY29sb3JzLCBNT0RJRklFUyBGSVJTVCBBUkdVTUVOVFxuICAgKi9cblxuXG4gIGZ1bmN0aW9uIGFkZF8oY29sb3IxKSB7XG4gICAgZm9yICh2YXIgX2xlbjMgPSBhcmd1bWVudHMubGVuZ3RoLCBjb2xvcnMgPSBuZXcgQXJyYXkoX2xlbjMgPiAxID8gX2xlbjMgLSAxIDogMCksIF9rZXkzID0gMTsgX2tleTMgPCBfbGVuMzsgX2tleTMrKykge1xuICAgICAgY29sb3JzW19rZXkzIC0gMV0gPSBhcmd1bWVudHNbX2tleTNdO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNvbG9ycy5sZW5ndGg7IGorKykge1xuICAgICAgICBjb2xvcjFbaV0gKz0gY29sb3JzW2pdW2ldO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjb2xvcjE7XG4gIH1cbiAgLyoqXG4gICAqIE11bHRpcGx5IChtaXgpIHR3byBvciBtb3JlIGNvbG9yc1xuICAgKi9cblxuXG4gIGZ1bmN0aW9uIG11bHRpcGx5KGNvbG9yMSkge1xuICAgIHZhciByZXN1bHQgPSBjb2xvcjEuc2xpY2UoKTtcblxuICAgIGZvciAodmFyIF9sZW40ID0gYXJndW1lbnRzLmxlbmd0aCwgY29sb3JzID0gbmV3IEFycmF5KF9sZW40ID4gMSA/IF9sZW40IC0gMSA6IDApLCBfa2V5NCA9IDE7IF9rZXk0IDwgX2xlbjQ7IF9rZXk0KyspIHtcbiAgICAgIGNvbG9yc1tfa2V5NCAtIDFdID0gYXJndW1lbnRzW19rZXk0XTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjb2xvcnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgcmVzdWx0W2ldICo9IGNvbG9yc1tqXVtpXSAvIDI1NTtcbiAgICAgIH1cblxuICAgICAgcmVzdWx0W2ldID0gTWF0aC5yb3VuZChyZXN1bHRbaV0pO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgLyoqXG4gICAqIE11bHRpcGx5IChtaXgpIHR3byBvciBtb3JlIGNvbG9ycywgTU9ESUZJRVMgRklSU1QgQVJHVU1FTlRcbiAgICovXG5cblxuICBmdW5jdGlvbiBtdWx0aXBseV8oY29sb3IxKSB7XG4gICAgZm9yICh2YXIgX2xlbjUgPSBhcmd1bWVudHMubGVuZ3RoLCBjb2xvcnMgPSBuZXcgQXJyYXkoX2xlbjUgPiAxID8gX2xlbjUgLSAxIDogMCksIF9rZXk1ID0gMTsgX2tleTUgPCBfbGVuNTsgX2tleTUrKykge1xuICAgICAgY29sb3JzW19rZXk1IC0gMV0gPSBhcmd1bWVudHNbX2tleTVdO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNvbG9ycy5sZW5ndGg7IGorKykge1xuICAgICAgICBjb2xvcjFbaV0gKj0gY29sb3JzW2pdW2ldIC8gMjU1O1xuICAgICAgfVxuXG4gICAgICBjb2xvcjFbaV0gPSBNYXRoLnJvdW5kKGNvbG9yMVtpXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbG9yMTtcbiAgfVxuICAvKipcbiAgICogSW50ZXJwb2xhdGUgKGJsZW5kKSB0d28gY29sb3JzIHdpdGggYSBnaXZlbiBmYWN0b3JcbiAgICovXG5cblxuICBmdW5jdGlvbiBpbnRlcnBvbGF0ZShjb2xvcjEsIGNvbG9yMiwgZmFjdG9yKSB7XG4gICAgaWYgKGZhY3RvciA9PT0gdm9pZCAwKSB7XG4gICAgICBmYWN0b3IgPSAwLjU7XG4gICAgfVxuXG4gICAgdmFyIHJlc3VsdCA9IGNvbG9yMS5zbGljZSgpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgIHJlc3VsdFtpXSA9IE1hdGgucm91bmQocmVzdWx0W2ldICsgZmFjdG9yICogKGNvbG9yMltpXSAtIGNvbG9yMVtpXSkpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICB2YXIgbGVycCA9IGludGVycG9sYXRlO1xuICAvKipcbiAgICogSW50ZXJwb2xhdGUgKGJsZW5kKSB0d28gY29sb3JzIHdpdGggYSBnaXZlbiBmYWN0b3IgaW4gSFNMIG1vZGVcbiAgICovXG5cbiAgZnVuY3Rpb24gaW50ZXJwb2xhdGVIU0woY29sb3IxLCBjb2xvcjIsIGZhY3Rvcikge1xuICAgIGlmIChmYWN0b3IgPT09IHZvaWQgMCkge1xuICAgICAgZmFjdG9yID0gMC41O1xuICAgIH1cblxuICAgIHZhciBoc2wxID0gcmdiMmhzbChjb2xvcjEpO1xuICAgIHZhciBoc2wyID0gcmdiMmhzbChjb2xvcjIpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgIGhzbDFbaV0gKz0gZmFjdG9yICogKGhzbDJbaV0gLSBoc2wxW2ldKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaHNsMnJnYihoc2wxKTtcbiAgfVxuXG4gIHZhciBsZXJwSFNMID0gaW50ZXJwb2xhdGVIU0w7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgcmFuZG9tIGNvbG9yIGJhc2VkIG9uIHRoaXMgb25lXG4gICAqIEBwYXJhbSBjb2xvclxuICAgKiBAcGFyYW0gZGlmZiBTZXQgb2Ygc3RhbmRhcmQgZGV2aWF0aW9uc1xuICAgKi9cblxuICBmdW5jdGlvbiByYW5kb21pemUoY29sb3IsIGRpZmYpIHtcbiAgICBpZiAoIShkaWZmIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICBkaWZmID0gTWF0aC5yb3VuZChSTkckMS5nZXROb3JtYWwoMCwgZGlmZikpO1xuICAgIH1cblxuICAgIHZhciByZXN1bHQgPSBjb2xvci5zbGljZSgpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgIHJlc3VsdFtpXSArPSBkaWZmIGluc3RhbmNlb2YgQXJyYXkgPyBNYXRoLnJvdW5kKFJORyQxLmdldE5vcm1hbCgwLCBkaWZmW2ldKSkgOiBkaWZmO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgLyoqXG4gICAqIENvbnZlcnRzIGFuIFJHQiBjb2xvciB2YWx1ZSB0byBIU0wuIEV4cGVjdHMgMC4uMjU1IGlucHV0cywgcHJvZHVjZXMgMC4uMSBvdXRwdXRzLlxuICAgKi9cblxuXG4gIGZ1bmN0aW9uIHJnYjJoc2woY29sb3IpIHtcbiAgICB2YXIgciA9IGNvbG9yWzBdIC8gMjU1O1xuICAgIHZhciBnID0gY29sb3JbMV0gLyAyNTU7XG4gICAgdmFyIGIgPSBjb2xvclsyXSAvIDI1NTtcbiAgICB2YXIgbWF4ID0gTWF0aC5tYXgociwgZywgYiksXG4gICAgICAgIG1pbiA9IE1hdGgubWluKHIsIGcsIGIpO1xuICAgIHZhciBoID0gMCxcbiAgICAgICAgcyxcbiAgICAgICAgbCA9IChtYXggKyBtaW4pIC8gMjtcblxuICAgIGlmIChtYXggPT0gbWluKSB7XG4gICAgICBzID0gMDsgLy8gYWNocm9tYXRpY1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZCA9IG1heCAtIG1pbjtcbiAgICAgIHMgPSBsID4gMC41ID8gZCAvICgyIC0gbWF4IC0gbWluKSA6IGQgLyAobWF4ICsgbWluKTtcblxuICAgICAgc3dpdGNoIChtYXgpIHtcbiAgICAgICAgY2FzZSByOlxuICAgICAgICAgIGggPSAoZyAtIGIpIC8gZCArIChnIDwgYiA/IDYgOiAwKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIGc6XG4gICAgICAgICAgaCA9IChiIC0gcikgLyBkICsgMjtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIGI6XG4gICAgICAgICAgaCA9IChyIC0gZykgLyBkICsgNDtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgaCAvPSA2O1xuICAgIH1cblxuICAgIHJldHVybiBbaCwgcywgbF07XG4gIH1cblxuICBmdW5jdGlvbiBodWUycmdiKHAsIHEsIHQpIHtcbiAgICBpZiAodCA8IDApIHQgKz0gMTtcbiAgICBpZiAodCA+IDEpIHQgLT0gMTtcbiAgICBpZiAodCA8IDEgLyA2KSByZXR1cm4gcCArIChxIC0gcCkgKiA2ICogdDtcbiAgICBpZiAodCA8IDEgLyAyKSByZXR1cm4gcTtcbiAgICBpZiAodCA8IDIgLyAzKSByZXR1cm4gcCArIChxIC0gcCkgKiAoMiAvIDMgLSB0KSAqIDY7XG4gICAgcmV0dXJuIHA7XG4gIH1cbiAgLyoqXG4gICAqIENvbnZlcnRzIGFuIEhTTCBjb2xvciB2YWx1ZSB0byBSR0IuIEV4cGVjdHMgMC4uMSBpbnB1dHMsIHByb2R1Y2VzIDAuLjI1NSBvdXRwdXRzLlxuICAgKi9cblxuXG4gIGZ1bmN0aW9uIGhzbDJyZ2IoY29sb3IpIHtcbiAgICB2YXIgbCA9IGNvbG9yWzJdO1xuXG4gICAgaWYgKGNvbG9yWzFdID09IDApIHtcbiAgICAgIGwgPSBNYXRoLnJvdW5kKGwgKiAyNTUpO1xuICAgICAgcmV0dXJuIFtsLCBsLCBsXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHMgPSBjb2xvclsxXTtcbiAgICAgIHZhciBxID0gbCA8IDAuNSA/IGwgKiAoMSArIHMpIDogbCArIHMgLSBsICogcztcbiAgICAgIHZhciBwID0gMiAqIGwgLSBxO1xuICAgICAgdmFyIHIgPSBodWUycmdiKHAsIHEsIGNvbG9yWzBdICsgMSAvIDMpO1xuICAgICAgdmFyIGcgPSBodWUycmdiKHAsIHEsIGNvbG9yWzBdKTtcbiAgICAgIHZhciBiID0gaHVlMnJnYihwLCBxLCBjb2xvclswXSAtIDEgLyAzKTtcbiAgICAgIHJldHVybiBbTWF0aC5yb3VuZChyICogMjU1KSwgTWF0aC5yb3VuZChnICogMjU1KSwgTWF0aC5yb3VuZChiICogMjU1KV07XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdG9SR0IoY29sb3IpIHtcbiAgICB2YXIgY2xhbXBlZCA9IGNvbG9yLm1hcChmdW5jdGlvbiAoeCkge1xuICAgICAgcmV0dXJuIGNsYW1wKHgsIDAsIDI1NSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIFwicmdiKFwiICsgY2xhbXBlZC5qb2luKFwiLFwiKSArIFwiKVwiO1xuICB9XG5cbiAgZnVuY3Rpb24gdG9IZXgoY29sb3IpIHtcbiAgICB2YXIgY2xhbXBlZCA9IGNvbG9yLm1hcChmdW5jdGlvbiAoeCkge1xuICAgICAgcmV0dXJuIGNsYW1wKHgsIDAsIDI1NSkudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbiAgICB9KTtcbiAgICByZXR1cm4gXCIjXCIgKyBjbGFtcGVkLmpvaW4oXCJcIik7XG4gIH1cblxuICB2YXIgQ0FDSEUgPSB7XG4gICAgXCJibGFja1wiOiBbMCwgMCwgMF0sXG4gICAgXCJuYXZ5XCI6IFswLCAwLCAxMjhdLFxuICAgIFwiZGFya2JsdWVcIjogWzAsIDAsIDEzOV0sXG4gICAgXCJtZWRpdW1ibHVlXCI6IFswLCAwLCAyMDVdLFxuICAgIFwiYmx1ZVwiOiBbMCwgMCwgMjU1XSxcbiAgICBcImRhcmtncmVlblwiOiBbMCwgMTAwLCAwXSxcbiAgICBcImdyZWVuXCI6IFswLCAxMjgsIDBdLFxuICAgIFwidGVhbFwiOiBbMCwgMTI4LCAxMjhdLFxuICAgIFwiZGFya2N5YW5cIjogWzAsIDEzOSwgMTM5XSxcbiAgICBcImRlZXBza3libHVlXCI6IFswLCAxOTEsIDI1NV0sXG4gICAgXCJkYXJrdHVycXVvaXNlXCI6IFswLCAyMDYsIDIwOV0sXG4gICAgXCJtZWRpdW1zcHJpbmdncmVlblwiOiBbMCwgMjUwLCAxNTRdLFxuICAgIFwibGltZVwiOiBbMCwgMjU1LCAwXSxcbiAgICBcInNwcmluZ2dyZWVuXCI6IFswLCAyNTUsIDEyN10sXG4gICAgXCJhcXVhXCI6IFswLCAyNTUsIDI1NV0sXG4gICAgXCJjeWFuXCI6IFswLCAyNTUsIDI1NV0sXG4gICAgXCJtaWRuaWdodGJsdWVcIjogWzI1LCAyNSwgMTEyXSxcbiAgICBcImRvZGdlcmJsdWVcIjogWzMwLCAxNDQsIDI1NV0sXG4gICAgXCJmb3Jlc3RncmVlblwiOiBbMzQsIDEzOSwgMzRdLFxuICAgIFwic2VhZ3JlZW5cIjogWzQ2LCAxMzksIDg3XSxcbiAgICBcImRhcmtzbGF0ZWdyYXlcIjogWzQ3LCA3OSwgNzldLFxuICAgIFwiZGFya3NsYXRlZ3JleVwiOiBbNDcsIDc5LCA3OV0sXG4gICAgXCJsaW1lZ3JlZW5cIjogWzUwLCAyMDUsIDUwXSxcbiAgICBcIm1lZGl1bXNlYWdyZWVuXCI6IFs2MCwgMTc5LCAxMTNdLFxuICAgIFwidHVycXVvaXNlXCI6IFs2NCwgMjI0LCAyMDhdLFxuICAgIFwicm95YWxibHVlXCI6IFs2NSwgMTA1LCAyMjVdLFxuICAgIFwic3RlZWxibHVlXCI6IFs3MCwgMTMwLCAxODBdLFxuICAgIFwiZGFya3NsYXRlYmx1ZVwiOiBbNzIsIDYxLCAxMzldLFxuICAgIFwibWVkaXVtdHVycXVvaXNlXCI6IFs3MiwgMjA5LCAyMDRdLFxuICAgIFwiaW5kaWdvXCI6IFs3NSwgMCwgMTMwXSxcbiAgICBcImRhcmtvbGl2ZWdyZWVuXCI6IFs4NSwgMTA3LCA0N10sXG4gICAgXCJjYWRldGJsdWVcIjogWzk1LCAxNTgsIDE2MF0sXG4gICAgXCJjb3JuZmxvd2VyYmx1ZVwiOiBbMTAwLCAxNDksIDIzN10sXG4gICAgXCJtZWRpdW1hcXVhbWFyaW5lXCI6IFsxMDIsIDIwNSwgMTcwXSxcbiAgICBcImRpbWdyYXlcIjogWzEwNSwgMTA1LCAxMDVdLFxuICAgIFwiZGltZ3JleVwiOiBbMTA1LCAxMDUsIDEwNV0sXG4gICAgXCJzbGF0ZWJsdWVcIjogWzEwNiwgOTAsIDIwNV0sXG4gICAgXCJvbGl2ZWRyYWJcIjogWzEwNywgMTQyLCAzNV0sXG4gICAgXCJzbGF0ZWdyYXlcIjogWzExMiwgMTI4LCAxNDRdLFxuICAgIFwic2xhdGVncmV5XCI6IFsxMTIsIDEyOCwgMTQ0XSxcbiAgICBcImxpZ2h0c2xhdGVncmF5XCI6IFsxMTksIDEzNiwgMTUzXSxcbiAgICBcImxpZ2h0c2xhdGVncmV5XCI6IFsxMTksIDEzNiwgMTUzXSxcbiAgICBcIm1lZGl1bXNsYXRlYmx1ZVwiOiBbMTIzLCAxMDQsIDIzOF0sXG4gICAgXCJsYXduZ3JlZW5cIjogWzEyNCwgMjUyLCAwXSxcbiAgICBcImNoYXJ0cmV1c2VcIjogWzEyNywgMjU1LCAwXSxcbiAgICBcImFxdWFtYXJpbmVcIjogWzEyNywgMjU1LCAyMTJdLFxuICAgIFwibWFyb29uXCI6IFsxMjgsIDAsIDBdLFxuICAgIFwicHVycGxlXCI6IFsxMjgsIDAsIDEyOF0sXG4gICAgXCJvbGl2ZVwiOiBbMTI4LCAxMjgsIDBdLFxuICAgIFwiZ3JheVwiOiBbMTI4LCAxMjgsIDEyOF0sXG4gICAgXCJncmV5XCI6IFsxMjgsIDEyOCwgMTI4XSxcbiAgICBcInNreWJsdWVcIjogWzEzNSwgMjA2LCAyMzVdLFxuICAgIFwibGlnaHRza3libHVlXCI6IFsxMzUsIDIwNiwgMjUwXSxcbiAgICBcImJsdWV2aW9sZXRcIjogWzEzOCwgNDMsIDIyNl0sXG4gICAgXCJkYXJrcmVkXCI6IFsxMzksIDAsIDBdLFxuICAgIFwiZGFya21hZ2VudGFcIjogWzEzOSwgMCwgMTM5XSxcbiAgICBcInNhZGRsZWJyb3duXCI6IFsxMzksIDY5LCAxOV0sXG4gICAgXCJkYXJrc2VhZ3JlZW5cIjogWzE0MywgMTg4LCAxNDNdLFxuICAgIFwibGlnaHRncmVlblwiOiBbMTQ0LCAyMzgsIDE0NF0sXG4gICAgXCJtZWRpdW1wdXJwbGVcIjogWzE0NywgMTEyLCAyMTZdLFxuICAgIFwiZGFya3Zpb2xldFwiOiBbMTQ4LCAwLCAyMTFdLFxuICAgIFwicGFsZWdyZWVuXCI6IFsxNTIsIDI1MSwgMTUyXSxcbiAgICBcImRhcmtvcmNoaWRcIjogWzE1MywgNTAsIDIwNF0sXG4gICAgXCJ5ZWxsb3dncmVlblwiOiBbMTU0LCAyMDUsIDUwXSxcbiAgICBcInNpZW5uYVwiOiBbMTYwLCA4MiwgNDVdLFxuICAgIFwiYnJvd25cIjogWzE2NSwgNDIsIDQyXSxcbiAgICBcImRhcmtncmF5XCI6IFsxNjksIDE2OSwgMTY5XSxcbiAgICBcImRhcmtncmV5XCI6IFsxNjksIDE2OSwgMTY5XSxcbiAgICBcImxpZ2h0Ymx1ZVwiOiBbMTczLCAyMTYsIDIzMF0sXG4gICAgXCJncmVlbnllbGxvd1wiOiBbMTczLCAyNTUsIDQ3XSxcbiAgICBcInBhbGV0dXJxdW9pc2VcIjogWzE3NSwgMjM4LCAyMzhdLFxuICAgIFwibGlnaHRzdGVlbGJsdWVcIjogWzE3NiwgMTk2LCAyMjJdLFxuICAgIFwicG93ZGVyYmx1ZVwiOiBbMTc2LCAyMjQsIDIzMF0sXG4gICAgXCJmaXJlYnJpY2tcIjogWzE3OCwgMzQsIDM0XSxcbiAgICBcImRhcmtnb2xkZW5yb2RcIjogWzE4NCwgMTM0LCAxMV0sXG4gICAgXCJtZWRpdW1vcmNoaWRcIjogWzE4NiwgODUsIDIxMV0sXG4gICAgXCJyb3N5YnJvd25cIjogWzE4OCwgMTQzLCAxNDNdLFxuICAgIFwiZGFya2toYWtpXCI6IFsxODksIDE4MywgMTA3XSxcbiAgICBcInNpbHZlclwiOiBbMTkyLCAxOTIsIDE5Ml0sXG4gICAgXCJtZWRpdW12aW9sZXRyZWRcIjogWzE5OSwgMjEsIDEzM10sXG4gICAgXCJpbmRpYW5yZWRcIjogWzIwNSwgOTIsIDkyXSxcbiAgICBcInBlcnVcIjogWzIwNSwgMTMzLCA2M10sXG4gICAgXCJjaG9jb2xhdGVcIjogWzIxMCwgMTA1LCAzMF0sXG4gICAgXCJ0YW5cIjogWzIxMCwgMTgwLCAxNDBdLFxuICAgIFwibGlnaHRncmF5XCI6IFsyMTEsIDIxMSwgMjExXSxcbiAgICBcImxpZ2h0Z3JleVwiOiBbMjExLCAyMTEsIDIxMV0sXG4gICAgXCJwYWxldmlvbGV0cmVkXCI6IFsyMTYsIDExMiwgMTQ3XSxcbiAgICBcInRoaXN0bGVcIjogWzIxNiwgMTkxLCAyMTZdLFxuICAgIFwib3JjaGlkXCI6IFsyMTgsIDExMiwgMjE0XSxcbiAgICBcImdvbGRlbnJvZFwiOiBbMjE4LCAxNjUsIDMyXSxcbiAgICBcImNyaW1zb25cIjogWzIyMCwgMjAsIDYwXSxcbiAgICBcImdhaW5zYm9yb1wiOiBbMjIwLCAyMjAsIDIyMF0sXG4gICAgXCJwbHVtXCI6IFsyMjEsIDE2MCwgMjIxXSxcbiAgICBcImJ1cmx5d29vZFwiOiBbMjIyLCAxODQsIDEzNV0sXG4gICAgXCJsaWdodGN5YW5cIjogWzIyNCwgMjU1LCAyNTVdLFxuICAgIFwibGF2ZW5kZXJcIjogWzIzMCwgMjMwLCAyNTBdLFxuICAgIFwiZGFya3NhbG1vblwiOiBbMjMzLCAxNTAsIDEyMl0sXG4gICAgXCJ2aW9sZXRcIjogWzIzOCwgMTMwLCAyMzhdLFxuICAgIFwicGFsZWdvbGRlbnJvZFwiOiBbMjM4LCAyMzIsIDE3MF0sXG4gICAgXCJsaWdodGNvcmFsXCI6IFsyNDAsIDEyOCwgMTI4XSxcbiAgICBcImtoYWtpXCI6IFsyNDAsIDIzMCwgMTQwXSxcbiAgICBcImFsaWNlYmx1ZVwiOiBbMjQwLCAyNDgsIDI1NV0sXG4gICAgXCJob25leWRld1wiOiBbMjQwLCAyNTUsIDI0MF0sXG4gICAgXCJhenVyZVwiOiBbMjQwLCAyNTUsIDI1NV0sXG4gICAgXCJzYW5keWJyb3duXCI6IFsyNDQsIDE2NCwgOTZdLFxuICAgIFwid2hlYXRcIjogWzI0NSwgMjIyLCAxNzldLFxuICAgIFwiYmVpZ2VcIjogWzI0NSwgMjQ1LCAyMjBdLFxuICAgIFwid2hpdGVzbW9rZVwiOiBbMjQ1LCAyNDUsIDI0NV0sXG4gICAgXCJtaW50Y3JlYW1cIjogWzI0NSwgMjU1LCAyNTBdLFxuICAgIFwiZ2hvc3R3aGl0ZVwiOiBbMjQ4LCAyNDgsIDI1NV0sXG4gICAgXCJzYWxtb25cIjogWzI1MCwgMTI4LCAxMTRdLFxuICAgIFwiYW50aXF1ZXdoaXRlXCI6IFsyNTAsIDIzNSwgMjE1XSxcbiAgICBcImxpbmVuXCI6IFsyNTAsIDI0MCwgMjMwXSxcbiAgICBcImxpZ2h0Z29sZGVucm9keWVsbG93XCI6IFsyNTAsIDI1MCwgMjEwXSxcbiAgICBcIm9sZGxhY2VcIjogWzI1MywgMjQ1LCAyMzBdLFxuICAgIFwicmVkXCI6IFsyNTUsIDAsIDBdLFxuICAgIFwiZnVjaHNpYVwiOiBbMjU1LCAwLCAyNTVdLFxuICAgIFwibWFnZW50YVwiOiBbMjU1LCAwLCAyNTVdLFxuICAgIFwiZGVlcHBpbmtcIjogWzI1NSwgMjAsIDE0N10sXG4gICAgXCJvcmFuZ2VyZWRcIjogWzI1NSwgNjksIDBdLFxuICAgIFwidG9tYXRvXCI6IFsyNTUsIDk5LCA3MV0sXG4gICAgXCJob3RwaW5rXCI6IFsyNTUsIDEwNSwgMTgwXSxcbiAgICBcImNvcmFsXCI6IFsyNTUsIDEyNywgODBdLFxuICAgIFwiZGFya29yYW5nZVwiOiBbMjU1LCAxNDAsIDBdLFxuICAgIFwibGlnaHRzYWxtb25cIjogWzI1NSwgMTYwLCAxMjJdLFxuICAgIFwib3JhbmdlXCI6IFsyNTUsIDE2NSwgMF0sXG4gICAgXCJsaWdodHBpbmtcIjogWzI1NSwgMTgyLCAxOTNdLFxuICAgIFwicGlua1wiOiBbMjU1LCAxOTIsIDIwM10sXG4gICAgXCJnb2xkXCI6IFsyNTUsIDIxNSwgMF0sXG4gICAgXCJwZWFjaHB1ZmZcIjogWzI1NSwgMjE4LCAxODVdLFxuICAgIFwibmF2YWpvd2hpdGVcIjogWzI1NSwgMjIyLCAxNzNdLFxuICAgIFwibW9jY2FzaW5cIjogWzI1NSwgMjI4LCAxODFdLFxuICAgIFwiYmlzcXVlXCI6IFsyNTUsIDIyOCwgMTk2XSxcbiAgICBcIm1pc3R5cm9zZVwiOiBbMjU1LCAyMjgsIDIyNV0sXG4gICAgXCJibGFuY2hlZGFsbW9uZFwiOiBbMjU1LCAyMzUsIDIwNV0sXG4gICAgXCJwYXBheWF3aGlwXCI6IFsyNTUsIDIzOSwgMjEzXSxcbiAgICBcImxhdmVuZGVyYmx1c2hcIjogWzI1NSwgMjQwLCAyNDVdLFxuICAgIFwic2Vhc2hlbGxcIjogWzI1NSwgMjQ1LCAyMzhdLFxuICAgIFwiY29ybnNpbGtcIjogWzI1NSwgMjQ4LCAyMjBdLFxuICAgIFwibGVtb25jaGlmZm9uXCI6IFsyNTUsIDI1MCwgMjA1XSxcbiAgICBcImZsb3JhbHdoaXRlXCI6IFsyNTUsIDI1MCwgMjQwXSxcbiAgICBcInNub3dcIjogWzI1NSwgMjUwLCAyNTBdLFxuICAgIFwieWVsbG93XCI6IFsyNTUsIDI1NSwgMF0sXG4gICAgXCJsaWdodHllbGxvd1wiOiBbMjU1LCAyNTUsIDIyNF0sXG4gICAgXCJpdm9yeVwiOiBbMjU1LCAyNTUsIDI0MF0sXG4gICAgXCJ3aGl0ZVwiOiBbMjU1LCAyNTUsIDI1NV1cbiAgfTtcbiAgdmFyIGNvbG9yID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICAgIGZyb21TdHJpbmc6IGZyb21TdHJpbmcsXG4gICAgYWRkOiBhZGQsXG4gICAgYWRkXzogYWRkXyxcbiAgICBtdWx0aXBseTogbXVsdGlwbHksXG4gICAgbXVsdGlwbHlfOiBtdWx0aXBseV8sXG4gICAgaW50ZXJwb2xhdGU6IGludGVycG9sYXRlLFxuICAgIGxlcnA6IGxlcnAsXG4gICAgaW50ZXJwb2xhdGVIU0w6IGludGVycG9sYXRlSFNMLFxuICAgIGxlcnBIU0w6IGxlcnBIU0wsXG4gICAgcmFuZG9taXplOiByYW5kb21pemUsXG4gICAgcmdiMmhzbDogcmdiMmhzbCxcbiAgICBoc2wycmdiOiBoc2wycmdiLFxuICAgIHRvUkdCOiB0b1JHQixcbiAgICB0b0hleDogdG9IZXhcbiAgfSk7XG4gIC8qKlxuICAgKiBAY2xhc3MgVGlsZSBiYWNrZW5kXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG4gIHZhciBUaWxlR0wgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9CYWNrZW5kMikge1xuICAgIF9pbmhlcml0c0xvb3NlKFRpbGVHTCwgX0JhY2tlbmQyKTtcblxuICAgIGZ1bmN0aW9uIFRpbGVHTCgpIHtcbiAgICAgIHZhciBfdGhpczU7XG5cbiAgICAgIF90aGlzNSA9IF9CYWNrZW5kMi5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICBfdGhpczUuX3VuaWZvcm1zID0ge307XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIF90aGlzNS5fZ2wgPSBfdGhpczUuX2luaXRXZWJHTCgpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBhbGVydChlLm1lc3NhZ2UpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3RoaXM1O1xuICAgIH1cblxuICAgIFRpbGVHTC5pc1N1cHBvcnRlZCA9IGZ1bmN0aW9uIGlzU3VwcG9ydGVkKCkge1xuICAgICAgcmV0dXJuICEhZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKS5nZXRDb250ZXh0KFwid2ViZ2wyXCIsIHtcbiAgICAgICAgcHJlc2VydmVEcmF3aW5nQnVmZmVyOiB0cnVlXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIF9wcm90bzcgPSBUaWxlR0wucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvNy5zY2hlZHVsZSA9IGZ1bmN0aW9uIHNjaGVkdWxlKGNiKSB7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2IpO1xuICAgIH07XG5cbiAgICBfcHJvdG83LmdldENvbnRhaW5lciA9IGZ1bmN0aW9uIGdldENvbnRhaW5lcigpIHtcbiAgICAgIHJldHVybiB0aGlzLl9nbC5jYW52YXM7XG4gICAgfTtcblxuICAgIF9wcm90bzcuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0cykge1xuICAgICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICAgIF9CYWNrZW5kMi5wcm90b3R5cGUuc2V0T3B0aW9ucy5jYWxsKHRoaXMsIG9wdHMpO1xuXG4gICAgICB0aGlzLl91cGRhdGVTaXplKCk7XG5cbiAgICAgIHZhciB0aWxlU2V0ID0gdGhpcy5fb3B0aW9ucy50aWxlU2V0O1xuXG4gICAgICBpZiAodGlsZVNldCAmJiBcImNvbXBsZXRlXCIgaW4gdGlsZVNldCAmJiAhdGlsZVNldC5jb21wbGV0ZSkge1xuICAgICAgICB0aWxlU2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXM2Ll91cGRhdGVUZXh0dXJlKHRpbGVTZXQpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVRleHR1cmUodGlsZVNldCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90bzcuZHJhdyA9IGZ1bmN0aW9uIGRyYXcoZGF0YSwgY2xlYXJCZWZvcmUpIHtcbiAgICAgIHZhciBnbCA9IHRoaXMuX2dsO1xuICAgICAgdmFyIG9wdHMgPSB0aGlzLl9vcHRpb25zO1xuICAgICAgdmFyIHggPSBkYXRhWzBdLFxuICAgICAgICAgIHkgPSBkYXRhWzFdLFxuICAgICAgICAgIGNoID0gZGF0YVsyXSxcbiAgICAgICAgICBmZyA9IGRhdGFbM10sXG4gICAgICAgICAgYmcgPSBkYXRhWzRdO1xuICAgICAgdmFyIHNjaXNzb3JZID0gZ2wuY2FudmFzLmhlaWdodCAtICh5ICsgMSkgKiBvcHRzLnRpbGVIZWlnaHQ7XG4gICAgICBnbC5zY2lzc29yKHggKiBvcHRzLnRpbGVXaWR0aCwgc2Npc3NvclksIG9wdHMudGlsZVdpZHRoLCBvcHRzLnRpbGVIZWlnaHQpO1xuXG4gICAgICBpZiAoY2xlYXJCZWZvcmUpIHtcbiAgICAgICAgaWYgKG9wdHMudGlsZUNvbG9yaXplKSB7XG4gICAgICAgICAgZ2wuY2xlYXJDb2xvcigwLCAwLCAwLCAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBnbC5jbGVhckNvbG9yLmFwcGx5KGdsLCBwYXJzZUNvbG9yKGJnKSk7XG4gICAgICAgIH1cblxuICAgICAgICBnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFjaCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBjaGFycyA9IFtdLmNvbmNhdChjaCk7XG4gICAgICB2YXIgYmdzID0gW10uY29uY2F0KGJnKTtcbiAgICAgIHZhciBmZ3MgPSBbXS5jb25jYXQoZmcpO1xuICAgICAgZ2wudW5pZm9ybTJmdih0aGlzLl91bmlmb3Jtc1tcInRhcmdldFBvc1JlbFwiXSwgW3gsIHldKTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdGlsZSA9IHRoaXMuX29wdGlvbnMudGlsZU1hcFtjaGFyc1tpXV07XG5cbiAgICAgICAgaWYgKCF0aWxlKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2hhciBcXFwiXCIgKyBjaGFyc1tpXSArIFwiXFxcIiBub3QgZm91bmQgaW4gdGlsZU1hcFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGdsLnVuaWZvcm0xZih0aGlzLl91bmlmb3Jtc1tcImNvbG9yaXplXCJdLCBvcHRzLnRpbGVDb2xvcml6ZSA/IDEgOiAwKTtcbiAgICAgICAgZ2wudW5pZm9ybTJmdih0aGlzLl91bmlmb3Jtc1tcInRpbGVzZXRQb3NBYnNcIl0sIHRpbGUpO1xuXG4gICAgICAgIGlmIChvcHRzLnRpbGVDb2xvcml6ZSkge1xuICAgICAgICAgIGdsLnVuaWZvcm00ZnYodGhpcy5fdW5pZm9ybXNbXCJ0aW50XCJdLCBwYXJzZUNvbG9yKGZnc1tpXSkpO1xuICAgICAgICAgIGdsLnVuaWZvcm00ZnYodGhpcy5fdW5pZm9ybXNbXCJiZ1wiXSwgcGFyc2VDb2xvcihiZ3NbaV0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVfU1RSSVAsIDAsIDQpO1xuICAgICAgfVxuICAgICAgLypcbiAgICAgIFxuICAgICAgXG4gICAgICAgICAgICAgIGZvciAobGV0IGk9MDtpPGNoYXJzLmxlbmd0aDtpKyspIHtcbiAgICAgIFxuICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX29wdGlvbnMudGlsZUNvbG9yaXplKSB7IC8vIGFwcGx5IGNvbG9yaXphdGlvblxuICAgICAgICAgICAgICAgICAgICAgIGxldCBjYW52YXMgPSB0aGlzLl9jb2xvckNhbnZhcztcbiAgICAgICAgICAgICAgICAgICAgICBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIikgYXMgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJzb3VyY2Utb3ZlclwiO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRpbGVXaWR0aCwgdGlsZUhlaWdodCk7XG4gICAgICBcbiAgICAgICAgICAgICAgICAgICAgICBsZXQgZmcgPSBmZ3NbaV07XG4gICAgICAgICAgICAgICAgICAgICAgbGV0IGJnID0gYmdzW2ldO1xuICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29wdGlvbnMudGlsZVNldCEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVbMF0sIHRpbGVbMV0sIHRpbGVXaWR0aCwgdGlsZUhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgMCwgMCwgdGlsZVdpZHRoLCB0aWxlSGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgIGlmIChmZyAhPSBcInRyYW5zcGFyZW50XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcInNvdXJjZS1hdG9wXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgdGlsZVdpZHRoLCB0aWxlSGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICBcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoYmcgIT0gXCJ0cmFuc3BhcmVudFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gYmc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJkZXN0aW5hdGlvbi1vdmVyXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgdGlsZVdpZHRoLCB0aWxlSGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICBcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jdHguZHJhd0ltYWdlKGNhbnZhcywgeCp0aWxlV2lkdGgsIHkqdGlsZUhlaWdodCwgdGlsZVdpZHRoLCB0aWxlSGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIG5vIGNvbG9yaXppbmcsIGVhc3lcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jdHguZHJhd0ltYWdlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vcHRpb25zLnRpbGVTZXQhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlWzBdLCB0aWxlWzFdLCB0aWxlV2lkdGgsIHRpbGVIZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHgqdGlsZVdpZHRoLCB5KnRpbGVIZWlnaHQsIHRpbGVXaWR0aCwgdGlsZUhlaWdodFxuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgIFxuICAgICAgKi9cblxuICAgIH07XG5cbiAgICBfcHJvdG83LmNsZWFyID0gZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICB2YXIgZ2wgPSB0aGlzLl9nbDtcbiAgICAgIGdsLmNsZWFyQ29sb3IuYXBwbHkoZ2wsIHBhcnNlQ29sb3IodGhpcy5fb3B0aW9ucy5iZykpO1xuICAgICAgZ2wuc2Npc3NvcigwLCAwLCBnbC5jYW52YXMud2lkdGgsIGdsLmNhbnZhcy5oZWlnaHQpO1xuICAgICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XG4gICAgfTtcblxuICAgIF9wcm90bzcuY29tcHV0ZVNpemUgPSBmdW5jdGlvbiBjb21wdXRlU2l6ZShhdmFpbFdpZHRoLCBhdmFpbEhlaWdodCkge1xuICAgICAgdmFyIHdpZHRoID0gTWF0aC5mbG9vcihhdmFpbFdpZHRoIC8gdGhpcy5fb3B0aW9ucy50aWxlV2lkdGgpO1xuICAgICAgdmFyIGhlaWdodCA9IE1hdGguZmxvb3IoYXZhaWxIZWlnaHQgLyB0aGlzLl9vcHRpb25zLnRpbGVIZWlnaHQpO1xuICAgICAgcmV0dXJuIFt3aWR0aCwgaGVpZ2h0XTtcbiAgICB9O1xuXG4gICAgX3Byb3RvNy5jb21wdXRlRm9udFNpemUgPSBmdW5jdGlvbiBjb21wdXRlRm9udFNpemUoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaWxlIGJhY2tlbmQgZG9lcyBub3QgdW5kZXJzdGFuZCBmb250IHNpemVcIik7XG4gICAgfTtcblxuICAgIF9wcm90bzcuZXZlbnRUb1Bvc2l0aW9uID0gZnVuY3Rpb24gZXZlbnRUb1Bvc2l0aW9uKHgsIHkpIHtcbiAgICAgIHZhciBjYW52YXMgPSB0aGlzLl9nbC5jYW52YXM7XG4gICAgICB2YXIgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHggLT0gcmVjdC5sZWZ0O1xuICAgICAgeSAtPSByZWN0LnRvcDtcbiAgICAgIHggKj0gY2FudmFzLndpZHRoIC8gcmVjdC53aWR0aDtcbiAgICAgIHkgKj0gY2FudmFzLmhlaWdodCAvIHJlY3QuaGVpZ2h0O1xuXG4gICAgICBpZiAoeCA8IDAgfHwgeSA8IDAgfHwgeCA+PSBjYW52YXMud2lkdGggfHwgeSA+PSBjYW52YXMuaGVpZ2h0KSB7XG4gICAgICAgIHJldHVybiBbLTEsIC0xXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuX25vcm1hbGl6ZWRFdmVudFRvUG9zaXRpb24oeCwgeSk7XG4gICAgfTtcblxuICAgIF9wcm90bzcuX2luaXRXZWJHTCA9IGZ1bmN0aW9uIF9pbml0V2ViR0woKSB7XG4gICAgICB2YXIgX3RoaXM3ID0gdGhpcztcblxuICAgICAgdmFyIGdsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKS5nZXRDb250ZXh0KFwid2ViZ2wyXCIsIHtcbiAgICAgICAgcHJlc2VydmVEcmF3aW5nQnVmZmVyOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIHdpbmRvdy5nbCA9IGdsO1xuICAgICAgdmFyIHByb2dyYW0gPSBjcmVhdGVQcm9ncmFtKGdsLCBWUywgRlMpO1xuICAgICAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTtcbiAgICAgIGNyZWF0ZVF1YWQoZ2wpO1xuICAgICAgVU5JRk9STVMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gX3RoaXM3Ll91bmlmb3Jtc1tuYW1lXSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBuYW1lKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fcHJvZ3JhbSA9IHByb2dyYW07XG4gICAgICBnbC5lbmFibGUoZ2wuQkxFTkQpO1xuICAgICAgZ2wuYmxlbmRGdW5jU2VwYXJhdGUoZ2wuU1JDX0FMUEhBLCBnbC5PTkVfTUlOVVNfU1JDX0FMUEhBLCBnbC5PTkUsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEEpO1xuICAgICAgZ2wuZW5hYmxlKGdsLlNDSVNTT1JfVEVTVCk7XG4gICAgICByZXR1cm4gZ2w7XG4gICAgfTtcblxuICAgIF9wcm90bzcuX25vcm1hbGl6ZWRFdmVudFRvUG9zaXRpb24gPSBmdW5jdGlvbiBfbm9ybWFsaXplZEV2ZW50VG9Qb3NpdGlvbih4LCB5KSB7XG4gICAgICByZXR1cm4gW01hdGguZmxvb3IoeCAvIHRoaXMuX29wdGlvbnMudGlsZVdpZHRoKSwgTWF0aC5mbG9vcih5IC8gdGhpcy5fb3B0aW9ucy50aWxlSGVpZ2h0KV07XG4gICAgfTtcblxuICAgIF9wcm90bzcuX3VwZGF0ZVNpemUgPSBmdW5jdGlvbiBfdXBkYXRlU2l6ZSgpIHtcbiAgICAgIHZhciBnbCA9IHRoaXMuX2dsO1xuICAgICAgdmFyIG9wdHMgPSB0aGlzLl9vcHRpb25zO1xuICAgICAgdmFyIGNhbnZhc1NpemUgPSBbb3B0cy53aWR0aCAqIG9wdHMudGlsZVdpZHRoLCBvcHRzLmhlaWdodCAqIG9wdHMudGlsZUhlaWdodF07XG4gICAgICBnbC5jYW52YXMud2lkdGggPSBjYW52YXNTaXplWzBdO1xuICAgICAgZ2wuY2FudmFzLmhlaWdodCA9IGNhbnZhc1NpemVbMV07XG4gICAgICBnbC52aWV3cG9ydCgwLCAwLCBjYW52YXNTaXplWzBdLCBjYW52YXNTaXplWzFdKTtcbiAgICAgIGdsLnVuaWZvcm0yZnYodGhpcy5fdW5pZm9ybXNbXCJ0aWxlU2l6ZVwiXSwgW29wdHMudGlsZVdpZHRoLCBvcHRzLnRpbGVIZWlnaHRdKTtcbiAgICAgIGdsLnVuaWZvcm0yZnYodGhpcy5fdW5pZm9ybXNbXCJ0YXJnZXRTaXplXCJdLCBjYW52YXNTaXplKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvNy5fdXBkYXRlVGV4dHVyZSA9IGZ1bmN0aW9uIF91cGRhdGVUZXh0dXJlKHRpbGVTZXQpIHtcbiAgICAgIGNyZWF0ZVRleHR1cmUodGhpcy5fZ2wsIHRpbGVTZXQpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGlsZUdMO1xuICB9KEJhY2tlbmQpO1xuXG4gIHZhciBVTklGT1JNUyA9IFtcInRhcmdldFBvc1JlbFwiLCBcInRpbGVzZXRQb3NBYnNcIiwgXCJ0aWxlU2l6ZVwiLCBcInRhcmdldFNpemVcIiwgXCJjb2xvcml6ZVwiLCBcImJnXCIsIFwidGludFwiXTtcbiAgdmFyIFZTID0gXCJcXG4jdmVyc2lvbiAzMDAgZXNcXG5cXG5pbiB2ZWMyIHRpbGVQb3NSZWw7XFxub3V0IHZlYzIgdGlsZXNldFBvc1B4O1xcblxcbnVuaWZvcm0gdmVjMiB0aWxlc2V0UG9zQWJzO1xcbnVuaWZvcm0gdmVjMiB0aWxlU2l6ZTtcXG51bmlmb3JtIHZlYzIgdGFyZ2V0U2l6ZTtcXG51bmlmb3JtIHZlYzIgdGFyZ2V0UG9zUmVsO1xcblxcbnZvaWQgbWFpbigpIHtcXG5cXHR2ZWMyIHRhcmdldFBvc1B4ID0gKHRhcmdldFBvc1JlbCArIHRpbGVQb3NSZWwpICogdGlsZVNpemU7XFxuXFx0dmVjMiB0YXJnZXRQb3NOZGMgPSAoKHRhcmdldFBvc1B4IC8gdGFyZ2V0U2l6ZSktMC41KSoyLjA7XFxuXFx0dGFyZ2V0UG9zTmRjLnkgKj0gLTEuMDtcXG5cXG5cXHRnbF9Qb3NpdGlvbiA9IHZlYzQodGFyZ2V0UG9zTmRjLCAwLjAsIDEuMCk7XFxuXFx0dGlsZXNldFBvc1B4ID0gdGlsZXNldFBvc0FicyArIHRpbGVQb3NSZWwgKiB0aWxlU2l6ZTtcXG59XCIudHJpbSgpO1xuICB2YXIgRlMgPSBcIlxcbiN2ZXJzaW9uIDMwMCBlc1xcbnByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG5cXG5pbiB2ZWMyIHRpbGVzZXRQb3NQeDtcXG5vdXQgdmVjNCBmcmFnQ29sb3I7XFxudW5pZm9ybSBzYW1wbGVyMkQgaW1hZ2U7XFxudW5pZm9ybSBib29sIGNvbG9yaXplO1xcbnVuaWZvcm0gdmVjNCBiZztcXG51bmlmb3JtIHZlYzQgdGludDtcXG5cXG52b2lkIG1haW4oKSB7XFxuXFx0ZnJhZ0NvbG9yID0gdmVjNCgwLCAwLCAwLCAxKTtcXG5cXG5cXHR2ZWM0IHRleGVsID0gdGV4ZWxGZXRjaChpbWFnZSwgaXZlYzIodGlsZXNldFBvc1B4KSwgMCk7XFxuXFxuXFx0aWYgKGNvbG9yaXplKSB7XFxuXFx0XFx0dGV4ZWwucmdiID0gdGludC5hICogdGludC5yZ2IgKyAoMS4wLXRpbnQuYSkgKiB0ZXhlbC5yZ2I7XFxuXFx0XFx0ZnJhZ0NvbG9yLnJnYiA9IHRleGVsLmEqdGV4ZWwucmdiICsgKDEuMC10ZXhlbC5hKSpiZy5yZ2I7XFxuXFx0XFx0ZnJhZ0NvbG9yLmEgPSB0ZXhlbC5hICsgKDEuMC10ZXhlbC5hKSpiZy5hO1xcblxcdH0gZWxzZSB7XFxuXFx0XFx0ZnJhZ0NvbG9yID0gdGV4ZWw7XFxuXFx0fVxcbn1cIi50cmltKCk7XG5cbiAgZnVuY3Rpb24gY3JlYXRlUHJvZ3JhbShnbCwgdnNzLCBmc3MpIHtcbiAgICB2YXIgdnMgPSBnbC5jcmVhdGVTaGFkZXIoZ2wuVkVSVEVYX1NIQURFUik7XG4gICAgZ2wuc2hhZGVyU291cmNlKHZzLCB2c3MpO1xuICAgIGdsLmNvbXBpbGVTaGFkZXIodnMpO1xuXG4gICAgaWYgKCFnbC5nZXRTaGFkZXJQYXJhbWV0ZXIodnMsIGdsLkNPTVBJTEVfU1RBVFVTKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGdsLmdldFNoYWRlckluZm9Mb2codnMpIHx8IFwiXCIpO1xuICAgIH1cblxuICAgIHZhciBmcyA9IGdsLmNyZWF0ZVNoYWRlcihnbC5GUkFHTUVOVF9TSEFERVIpO1xuICAgIGdsLnNoYWRlclNvdXJjZShmcywgZnNzKTtcbiAgICBnbC5jb21waWxlU2hhZGVyKGZzKTtcblxuICAgIGlmICghZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKGZzLCBnbC5DT01QSUxFX1NUQVRVUykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihnbC5nZXRTaGFkZXJJbmZvTG9nKGZzKSB8fCBcIlwiKTtcbiAgICB9XG5cbiAgICB2YXIgcCA9IGdsLmNyZWF0ZVByb2dyYW0oKTtcbiAgICBnbC5hdHRhY2hTaGFkZXIocCwgdnMpO1xuICAgIGdsLmF0dGFjaFNoYWRlcihwLCBmcyk7XG4gICAgZ2wubGlua1Byb2dyYW0ocCk7XG5cbiAgICBpZiAoIWdsLmdldFByb2dyYW1QYXJhbWV0ZXIocCwgZ2wuTElOS19TVEFUVVMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZ2wuZ2V0UHJvZ3JhbUluZm9Mb2cocCkgfHwgXCJcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHA7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVRdWFkKGdsKSB7XG4gICAgdmFyIHBvcyA9IG5ldyBGbG9hdDMyQXJyYXkoWzAsIDAsIDEsIDAsIDAsIDEsIDEsIDFdKTtcbiAgICB2YXIgYnVmID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGJ1Zik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHBvcywgZ2wuU1RBVElDX0RSQVcpO1xuICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KDApO1xuICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoMCwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVRleHR1cmUoZ2wsIGRhdGEpIHtcbiAgICB2YXIgdCA9IGdsLmNyZWF0ZVRleHR1cmUoKTtcbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0KTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTkVBUkVTVCk7XG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01JTl9GSUxURVIsIGdsLk5FQVJFU1QpO1xuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1MsIGdsLlJFUEVBVCk7XG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfVCwgZ2wuUkVQRUFUKTtcbiAgICBnbC5waXhlbFN0b3JlaShnbC5VTlBBQ0tfRkxJUF9ZX1dFQkdMLCAwKTtcbiAgICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIGRhdGEpO1xuICAgIHJldHVybiB0O1xuICB9XG5cbiAgdmFyIGNvbG9yQ2FjaGUgPSB7fTtcblxuICBmdW5jdGlvbiBwYXJzZUNvbG9yKGNvbG9yKSB7XG4gICAgaWYgKCEoY29sb3IgaW4gY29sb3JDYWNoZSkpIHtcbiAgICAgIHZhciBwYXJzZWQ7XG5cbiAgICAgIGlmIChjb2xvciA9PSBcInRyYW5zcGFyZW50XCIpIHtcbiAgICAgICAgcGFyc2VkID0gWzAsIDAsIDAsIDBdO1xuICAgICAgfSBlbHNlIGlmIChjb2xvci5pbmRleE9mKFwicmdiYVwiKSA+IC0xKSB7XG4gICAgICAgIHBhcnNlZCA9IChjb2xvci5tYXRjaCgvW1xcZC5dKy9nKSB8fCBbXSkubWFwKE51bWJlcik7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICBwYXJzZWRbaV0gPSBwYXJzZWRbaV0gLyAyNTU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnNlZCA9IGZyb21TdHJpbmcoY29sb3IpLm1hcChmdW5jdGlvbiAoJCkge1xuICAgICAgICAgIHJldHVybiAkIC8gMjU1O1xuICAgICAgICB9KTtcbiAgICAgICAgcGFyc2VkLnB1c2goMSk7XG4gICAgICB9XG5cbiAgICAgIGNvbG9yQ2FjaGVbY29sb3JdID0gcGFyc2VkO1xuICAgIH1cblxuICAgIHJldHVybiBjb2xvckNhY2hlW2NvbG9yXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyVG9BbnNpKGJnKSB7XG4gICAgcmV0dXJuIFwiXFx4MUJbMDs0ODs1O1wiICsgdGVybWNvbG9yKGJnKSArIFwibVxceDFCWzJKXCI7XG4gIH1cblxuICBmdW5jdGlvbiBjb2xvclRvQW5zaShmZywgYmcpIHtcbiAgICByZXR1cm4gXCJcXHgxQlswOzM4OzU7XCIgKyB0ZXJtY29sb3IoZmcpICsgXCI7NDg7NTtcIiArIHRlcm1jb2xvcihiZykgKyBcIm1cIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBvc2l0aW9uVG9BbnNpKHgsIHkpIHtcbiAgICByZXR1cm4gXCJcXHgxQltcIiArICh5ICsgMSkgKyBcIjtcIiArICh4ICsgMSkgKyBcIkhcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRlcm1jb2xvcihjb2xvcikge1xuICAgIHZhciBTUkNfQ09MT1JTID0gMjU2LjA7XG4gICAgdmFyIERTVF9DT0xPUlMgPSA2LjA7XG4gICAgdmFyIENPTE9SX1JBVElPID0gRFNUX0NPTE9SUyAvIFNSQ19DT0xPUlM7XG4gICAgdmFyIHJnYiA9IGZyb21TdHJpbmcoY29sb3IpO1xuICAgIHZhciByID0gTWF0aC5mbG9vcihyZ2JbMF0gKiBDT0xPUl9SQVRJTyk7XG4gICAgdmFyIGcgPSBNYXRoLmZsb29yKHJnYlsxXSAqIENPTE9SX1JBVElPKTtcbiAgICB2YXIgYiA9IE1hdGguZmxvb3IocmdiWzJdICogQ09MT1JfUkFUSU8pO1xuICAgIHJldHVybiByICogMzYgKyBnICogNiArIGIgKiAxICsgMTY7XG4gIH1cblxuICB2YXIgVGVybSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0JhY2tlbmQzKSB7XG4gICAgX2luaGVyaXRzTG9vc2UoVGVybSwgX0JhY2tlbmQzKTtcblxuICAgIGZ1bmN0aW9uIFRlcm0oKSB7XG4gICAgICB2YXIgX3RoaXM4O1xuXG4gICAgICBfdGhpczggPSBfQmFja2VuZDMuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgX3RoaXM4Ll9vZmZzZXQgPSBbMCwgMF07XG4gICAgICBfdGhpczguX2N1cnNvciA9IFstMSwgLTFdO1xuICAgICAgX3RoaXM4Ll9sYXN0Q29sb3IgPSBcIlwiO1xuICAgICAgcmV0dXJuIF90aGlzODtcbiAgICB9XG5cbiAgICB2YXIgX3Byb3RvOCA9IFRlcm0ucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvOC5zY2hlZHVsZSA9IGZ1bmN0aW9uIHNjaGVkdWxlKGNiKSB7XG4gICAgICBzZXRUaW1lb3V0KGNiLCAxMDAwIC8gNjApO1xuICAgIH07XG5cbiAgICBfcHJvdG84LnNldE9wdGlvbnMgPSBmdW5jdGlvbiBzZXRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgIF9CYWNrZW5kMy5wcm90b3R5cGUuc2V0T3B0aW9ucy5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuXG4gICAgICB2YXIgc2l6ZSA9IFtvcHRpb25zLndpZHRoLCBvcHRpb25zLmhlaWdodF07XG4gICAgICB2YXIgYXZhaWwgPSB0aGlzLmNvbXB1dGVTaXplKCk7XG4gICAgICB0aGlzLl9vZmZzZXQgPSBhdmFpbC5tYXAoZnVuY3Rpb24gKHZhbCwgaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHZhbCAtIHNpemVbaW5kZXhdKSAvIDIpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF9wcm90bzguY2xlYXIgPSBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICAgIHByb2Nlc3Muc3Rkb3V0LndyaXRlKGNsZWFyVG9BbnNpKHRoaXMuX29wdGlvbnMuYmcpKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvOC5kcmF3ID0gZnVuY3Rpb24gZHJhdyhkYXRhLCBjbGVhckJlZm9yZSkge1xuICAgICAgLy8gZGV0ZXJtaW5lIHdoZXJlIHRvIGRyYXcgd2hhdCB3aXRoIHdoYXQgY29sb3JzXG4gICAgICB2YXIgeCA9IGRhdGFbMF0sXG4gICAgICAgICAgeSA9IGRhdGFbMV0sXG4gICAgICAgICAgY2ggPSBkYXRhWzJdLFxuICAgICAgICAgIGZnID0gZGF0YVszXSxcbiAgICAgICAgICBiZyA9IGRhdGFbNF07IC8vIGRldGVybWluZSBpZiB3ZSBuZWVkIHRvIG1vdmUgdGhlIHRlcm1pbmFsIGN1cnNvclxuXG4gICAgICB2YXIgZHggPSB0aGlzLl9vZmZzZXRbMF0gKyB4O1xuICAgICAgdmFyIGR5ID0gdGhpcy5fb2Zmc2V0WzFdICsgeTtcbiAgICAgIHZhciBzaXplID0gdGhpcy5jb21wdXRlU2l6ZSgpO1xuXG4gICAgICBpZiAoZHggPCAwIHx8IGR4ID49IHNpemVbMF0pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoZHkgPCAwIHx8IGR5ID49IHNpemVbMV0pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoZHggIT09IHRoaXMuX2N1cnNvclswXSB8fCBkeSAhPT0gdGhpcy5fY3Vyc29yWzFdKSB7XG4gICAgICAgIHByb2Nlc3Muc3Rkb3V0LndyaXRlKHBvc2l0aW9uVG9BbnNpKGR4LCBkeSkpO1xuICAgICAgICB0aGlzLl9jdXJzb3JbMF0gPSBkeDtcbiAgICAgICAgdGhpcy5fY3Vyc29yWzFdID0gZHk7XG4gICAgICB9IC8vIHRlcm1pbmFscyBhdXRvbWF0aWNhbGx5IGNsZWFyLCBidXQgaWYgd2UncmUgY2xlYXJpbmcgd2hlbiB3ZSdyZVxuICAgICAgLy8gbm90IG90aGVyd2lzZSBwcm92aWRlZCB3aXRoIGEgY2hhcmFjdGVyLCBqdXN0IHVzZSBhIHNwYWNlIGluc3RlYWRcblxuXG4gICAgICBpZiAoY2xlYXJCZWZvcmUpIHtcbiAgICAgICAgaWYgKCFjaCkge1xuICAgICAgICAgIGNoID0gXCIgXCI7XG4gICAgICAgIH1cbiAgICAgIH0gLy8gaWYgd2UncmUgbm90IGNsZWFyaW5nIGFuZCBub3QgcHJvdmlkZWQgd2l0aCBhIGNoYXJhY3RlciwgZG8gbm90aGluZ1xuXG5cbiAgICAgIGlmICghY2gpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBkZXRlcm1pbmUgaWYgd2UgbmVlZCB0byBjaGFuZ2UgY29sb3JzXG5cblxuICAgICAgdmFyIG5ld0NvbG9yID0gY29sb3JUb0Fuc2koZmcsIGJnKTtcblxuICAgICAgaWYgKG5ld0NvbG9yICE9PSB0aGlzLl9sYXN0Q29sb3IpIHtcbiAgICAgICAgcHJvY2Vzcy5zdGRvdXQud3JpdGUobmV3Q29sb3IpO1xuICAgICAgICB0aGlzLl9sYXN0Q29sb3IgPSBuZXdDb2xvcjtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoICE9ICdcXHQnKSB7XG4gICAgICAgIC8vIHdyaXRlIHRoZSBwcm92aWRlZCBzeW1ib2wgdG8gdGhlIGRpc3BsYXlcbiAgICAgICAgdmFyIGNoYXJzID0gW10uY29uY2F0KGNoKTtcbiAgICAgICAgcHJvY2Vzcy5zdGRvdXQud3JpdGUoY2hhcnNbMF0pO1xuICAgICAgfSAvLyB1cGRhdGUgb3VyIHBvc2l0aW9uLCBnaXZlbiB0aGF0IHdlIHdyb3RlIGEgY2hhcmFjdGVyXG5cblxuICAgICAgdGhpcy5fY3Vyc29yWzBdKys7XG5cbiAgICAgIGlmICh0aGlzLl9jdXJzb3JbMF0gPj0gc2l6ZVswXSkge1xuICAgICAgICB0aGlzLl9jdXJzb3JbMF0gPSAwO1xuICAgICAgICB0aGlzLl9jdXJzb3JbMV0rKztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvOC5jb21wdXRlRm9udFNpemUgPSBmdW5jdGlvbiBjb21wdXRlRm9udFNpemUoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUZXJtaW5hbCBiYWNrZW5kIGhhcyBubyBub3Rpb24gb2YgZm9udCBzaXplXCIpO1xuICAgIH07XG5cbiAgICBfcHJvdG84LmV2ZW50VG9Qb3NpdGlvbiA9IGZ1bmN0aW9uIGV2ZW50VG9Qb3NpdGlvbih4LCB5KSB7XG4gICAgICByZXR1cm4gW3gsIHldO1xuICAgIH07XG5cbiAgICBfcHJvdG84LmNvbXB1dGVTaXplID0gZnVuY3Rpb24gY29tcHV0ZVNpemUoKSB7XG4gICAgICByZXR1cm4gW3Byb2Nlc3Muc3Rkb3V0LmNvbHVtbnMsIHByb2Nlc3Muc3Rkb3V0LnJvd3NdO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGVybTtcbiAgfShCYWNrZW5kKTtcbiAgLyoqXG4gICAqIEBuYW1lc3BhY2VcbiAgICogQ29udGFpbnMgdGV4dCB0b2tlbml6YXRpb24gYW5kIGJyZWFraW5nIHJvdXRpbmVzXG4gICAqL1xuXG5cbiAgdmFyIFJFX0NPTE9SUyA9IC8lKFtiY10peyhbXn1dKil9L2c7IC8vIHRva2VuIHR5cGVzXG5cbiAgdmFyIFRZUEVfVEVYVCA9IDA7XG4gIHZhciBUWVBFX05FV0xJTkUgPSAxO1xuICB2YXIgVFlQRV9GRyA9IDI7XG4gIHZhciBUWVBFX0JHID0gMztcbiAgLyoqXG4gICAqIE1lYXN1cmUgc2l6ZSBvZiBhIHJlc3VsdGluZyB0ZXh0IGJsb2NrXG4gICAqL1xuXG4gIGZ1bmN0aW9uIG1lYXN1cmUoc3RyLCBtYXhXaWR0aCkge1xuICAgIHZhciByZXN1bHQgPSB7XG4gICAgICB3aWR0aDogMCxcbiAgICAgIGhlaWdodDogMVxuICAgIH07XG4gICAgdmFyIHRva2VucyA9IHRva2VuaXplKHN0ciwgbWF4V2lkdGgpO1xuICAgIHZhciBsaW5lV2lkdGggPSAwO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB0b2tlbiA9IHRva2Vuc1tpXTtcblxuICAgICAgc3dpdGNoICh0b2tlbi50eXBlKSB7XG4gICAgICAgIGNhc2UgVFlQRV9URVhUOlxuICAgICAgICAgIGxpbmVXaWR0aCArPSB0b2tlbi52YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBUWVBFX05FV0xJTkU6XG4gICAgICAgICAgcmVzdWx0LmhlaWdodCsrO1xuICAgICAgICAgIHJlc3VsdC53aWR0aCA9IE1hdGgubWF4KHJlc3VsdC53aWR0aCwgbGluZVdpZHRoKTtcbiAgICAgICAgICBsaW5lV2lkdGggPSAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJlc3VsdC53aWR0aCA9IE1hdGgubWF4KHJlc3VsdC53aWR0aCwgbGluZVdpZHRoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIC8qKlxuICAgKiBDb252ZXJ0IHN0cmluZyB0byBhIHNlcmllcyBvZiBhIGZvcm1hdHRpbmcgY29tbWFuZHNcbiAgICovXG5cblxuICBmdW5jdGlvbiB0b2tlbml6ZShzdHIsIG1heFdpZHRoKSB7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIC8qIGZpcnN0IHRva2VuaXphdGlvbiBwYXNzIC0gc3BsaXQgdGV4dHMgYW5kIGNvbG9yIGZvcm1hdHRpbmcgY29tbWFuZHMgKi9cblxuICAgIHZhciBvZmZzZXQgPSAwO1xuICAgIHN0ci5yZXBsYWNlKFJFX0NPTE9SUywgZnVuY3Rpb24gKG1hdGNoLCB0eXBlLCBuYW1lLCBpbmRleCkge1xuICAgICAgLyogc3RyaW5nIGJlZm9yZSAqL1xuICAgICAgdmFyIHBhcnQgPSBzdHIuc3Vic3RyaW5nKG9mZnNldCwgaW5kZXgpO1xuXG4gICAgICBpZiAocGFydC5sZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgIHR5cGU6IFRZUEVfVEVYVCxcbiAgICAgICAgICB2YWx1ZTogcGFydFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8qIGNvbG9yIGNvbW1hbmQgKi9cblxuXG4gICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgIHR5cGU6IHR5cGUgPT0gXCJjXCIgPyBUWVBFX0ZHIDogVFlQRV9CRyxcbiAgICAgICAgdmFsdWU6IG5hbWUudHJpbSgpXG4gICAgICB9KTtcbiAgICAgIG9mZnNldCA9IGluZGV4ICsgbWF0Y2gubGVuZ3RoO1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfSk7XG4gICAgLyogbGFzdCByZW1haW5pbmcgcGFydCAqL1xuXG4gICAgdmFyIHBhcnQgPSBzdHIuc3Vic3RyaW5nKG9mZnNldCk7XG5cbiAgICBpZiAocGFydC5sZW5ndGgpIHtcbiAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgdHlwZTogVFlQRV9URVhULFxuICAgICAgICB2YWx1ZTogcGFydFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJyZWFrTGluZXMocmVzdWx0LCBtYXhXaWR0aCk7XG4gIH1cbiAgLyogaW5zZXJ0IGxpbmUgYnJlYWtzIGludG8gZmlyc3QtcGFzcyB0b2tlbml6ZWQgZGF0YSAqL1xuXG5cbiAgZnVuY3Rpb24gYnJlYWtMaW5lcyh0b2tlbnMsIG1heFdpZHRoKSB7XG4gICAgaWYgKCFtYXhXaWR0aCkge1xuICAgICAgbWF4V2lkdGggPSBJbmZpbml0eTtcbiAgICB9XG5cbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGxpbmVMZW5ndGggPSAwO1xuICAgIHZhciBsYXN0VG9rZW5XaXRoU3BhY2UgPSAtMTtcblxuICAgIHdoaWxlIChpIDwgdG9rZW5zLmxlbmd0aCkge1xuICAgICAgLyogdGFrZSBhbGwgdGV4dCB0b2tlbnMsIHJlbW92ZSBzcGFjZSwgYXBwbHkgbGluZWJyZWFrcyAqL1xuICAgICAgdmFyIHRva2VuID0gdG9rZW5zW2ldO1xuXG4gICAgICBpZiAodG9rZW4udHlwZSA9PSBUWVBFX05FV0xJTkUpIHtcbiAgICAgICAgLyogcmVzZXQgKi9cbiAgICAgICAgbGluZUxlbmd0aCA9IDA7XG4gICAgICAgIGxhc3RUb2tlbldpdGhTcGFjZSA9IC0xO1xuICAgICAgfVxuXG4gICAgICBpZiAodG9rZW4udHlwZSAhPSBUWVBFX1RFWFQpIHtcbiAgICAgICAgLyogc2tpcCBub24tdGV4dCB0b2tlbnMgKi9cbiAgICAgICAgaSsrO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIC8qIHJlbW92ZSBzcGFjZXMgYXQgdGhlIGJlZ2lubmluZyBvZiBsaW5lICovXG5cblxuICAgICAgd2hpbGUgKGxpbmVMZW5ndGggPT0gMCAmJiB0b2tlbi52YWx1ZS5jaGFyQXQoMCkgPT0gXCIgXCIpIHtcbiAgICAgICAgdG9rZW4udmFsdWUgPSB0b2tlbi52YWx1ZS5zdWJzdHJpbmcoMSk7XG4gICAgICB9XG4gICAgICAvKiBmb3JjZWQgbmV3bGluZT8gaW5zZXJ0IHR3byBuZXcgdG9rZW5zIGFmdGVyIHRoaXMgb25lICovXG5cblxuICAgICAgdmFyIF9pbmRleDIgPSB0b2tlbi52YWx1ZS5pbmRleE9mKFwiXFxuXCIpO1xuXG4gICAgICBpZiAoX2luZGV4MiAhPSAtMSkge1xuICAgICAgICB0b2tlbi52YWx1ZSA9IGJyZWFrSW5zaWRlVG9rZW4odG9rZW5zLCBpLCBfaW5kZXgyLCB0cnVlKTtcbiAgICAgICAgLyogaWYgdGhlcmUgYXJlIHNwYWNlcyBhdCB0aGUgZW5kLCB3ZSBtdXN0IHJlbW92ZSB0aGVtICh3ZSBkbyBub3Qgd2FudCB0aGUgbGluZSB0b28gbG9uZykgKi9cblxuICAgICAgICB2YXIgYXJyID0gdG9rZW4udmFsdWUuc3BsaXQoXCJcIik7XG5cbiAgICAgICAgd2hpbGUgKGFyci5sZW5ndGggJiYgYXJyW2Fyci5sZW5ndGggLSAxXSA9PSBcIiBcIikge1xuICAgICAgICAgIGFyci5wb3AoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRva2VuLnZhbHVlID0gYXJyLmpvaW4oXCJcIik7XG4gICAgICB9XG4gICAgICAvKiB0b2tlbiBkZWdlbmVyYXRlZD8gKi9cblxuXG4gICAgICBpZiAoIXRva2VuLnZhbHVlLmxlbmd0aCkge1xuICAgICAgICB0b2tlbnMuc3BsaWNlKGksIDEpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGxpbmVMZW5ndGggKyB0b2tlbi52YWx1ZS5sZW5ndGggPiBtYXhXaWR0aCkge1xuICAgICAgICAvKiBsaW5lIHRvbyBsb25nLCBmaW5kIGEgc3VpdGFibGUgYnJlYWtpbmcgc3BvdCAqL1xuXG4gICAgICAgIC8qIGlzIGl0IHBvc3NpYmxlIHRvIGJyZWFrIHdpdGhpbiB0aGlzIHRva2VuPyAqL1xuICAgICAgICB2YXIgX2luZGV4MyA9IC0xO1xuXG4gICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgdmFyIG5leHRJbmRleCA9IHRva2VuLnZhbHVlLmluZGV4T2YoXCIgXCIsIF9pbmRleDMgKyAxKTtcblxuICAgICAgICAgIGlmIChuZXh0SW5kZXggPT0gLTEpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChsaW5lTGVuZ3RoICsgbmV4dEluZGV4ID4gbWF4V2lkdGgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF9pbmRleDMgPSBuZXh0SW5kZXg7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoX2luZGV4MyAhPSAtMSkge1xuICAgICAgICAgIC8qIGJyZWFrIGF0IHNwYWNlIHdpdGhpbiB0aGlzIG9uZSAqL1xuICAgICAgICAgIHRva2VuLnZhbHVlID0gYnJlYWtJbnNpZGVUb2tlbih0b2tlbnMsIGksIF9pbmRleDMsIHRydWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGxhc3RUb2tlbldpdGhTcGFjZSAhPSAtMSkge1xuICAgICAgICAgIC8qIGlzIHRoZXJlIGEgcHJldmlvdXMgdG9rZW4gd2hlcmUgYSBicmVhayBjYW4gb2NjdXI/ICovXG4gICAgICAgICAgdmFyIF90b2tlbiA9IHRva2Vuc1tsYXN0VG9rZW5XaXRoU3BhY2VdO1xuXG4gICAgICAgICAgdmFyIGJyZWFrSW5kZXggPSBfdG9rZW4udmFsdWUubGFzdEluZGV4T2YoXCIgXCIpO1xuXG4gICAgICAgICAgX3Rva2VuLnZhbHVlID0gYnJlYWtJbnNpZGVUb2tlbih0b2tlbnMsIGxhc3RUb2tlbldpdGhTcGFjZSwgYnJlYWtJbmRleCwgdHJ1ZSk7XG4gICAgICAgICAgaSA9IGxhc3RUb2tlbldpdGhTcGFjZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvKiBmb3JjZSBicmVhayBpbiB0aGlzIHRva2VuICovXG4gICAgICAgICAgdG9rZW4udmFsdWUgPSBicmVha0luc2lkZVRva2VuKHRva2VucywgaSwgbWF4V2lkdGggLSBsaW5lTGVuZ3RoLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8qIGxpbmUgbm90IGxvbmcsIGNvbnRpbnVlICovXG4gICAgICAgIGxpbmVMZW5ndGggKz0gdG9rZW4udmFsdWUubGVuZ3RoO1xuXG4gICAgICAgIGlmICh0b2tlbi52YWx1ZS5pbmRleE9mKFwiIFwiKSAhPSAtMSkge1xuICAgICAgICAgIGxhc3RUb2tlbldpdGhTcGFjZSA9IGk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaSsrO1xuICAgICAgLyogYWR2YW5jZSB0byBuZXh0IHRva2VuICovXG4gICAgfVxuXG4gICAgdG9rZW5zLnB1c2goe1xuICAgICAgdHlwZTogVFlQRV9ORVdMSU5FXG4gICAgfSk7XG4gICAgLyogaW5zZXJ0IGZha2UgbmV3bGluZSB0byBmaXggdGhlIGxhc3QgdGV4dCBsaW5lICovXG5cbiAgICAvKiByZW1vdmUgdHJhaWxpbmcgc3BhY2UgZnJvbSB0ZXh0IHRva2VucyBiZWZvcmUgbmV3bGluZXMgKi9cblxuICAgIHZhciBsYXN0VGV4dFRva2VuID0gbnVsbDtcblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCB0b2tlbnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX3Rva2VuMiA9IHRva2Vuc1tfaV07XG5cbiAgICAgIHN3aXRjaCAoX3Rva2VuMi50eXBlKSB7XG4gICAgICAgIGNhc2UgVFlQRV9URVhUOlxuICAgICAgICAgIGxhc3RUZXh0VG9rZW4gPSBfdG9rZW4yO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgVFlQRV9ORVdMSU5FOlxuICAgICAgICAgIGlmIChsYXN0VGV4dFRva2VuKSB7XG4gICAgICAgICAgICAvKiByZW1vdmUgdHJhaWxpbmcgc3BhY2UgKi9cbiAgICAgICAgICAgIHZhciBfYXJyID0gbGFzdFRleHRUb2tlbi52YWx1ZS5zcGxpdChcIlwiKTtcblxuICAgICAgICAgICAgd2hpbGUgKF9hcnIubGVuZ3RoICYmIF9hcnJbX2Fyci5sZW5ndGggLSAxXSA9PSBcIiBcIikge1xuICAgICAgICAgICAgICBfYXJyLnBvcCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsYXN0VGV4dFRva2VuLnZhbHVlID0gX2Fyci5qb2luKFwiXCIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxhc3RUZXh0VG9rZW4gPSBudWxsO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRva2Vucy5wb3AoKTtcbiAgICAvKiByZW1vdmUgZmFrZSB0b2tlbiAqL1xuXG4gICAgcmV0dXJuIHRva2VucztcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIG5ldyB0b2tlbnMgYW5kIGluc2VydCB0aGVtIGludG8gdGhlIHN0cmVhbVxuICAgKiBAcGFyYW0ge29iamVjdFtdfSB0b2tlbnNcbiAgICogQHBhcmFtIHtpbnR9IHRva2VuSW5kZXggVG9rZW4gYmVpbmcgcHJvY2Vzc2VkXG4gICAqIEBwYXJhbSB7aW50fSBicmVha0luZGV4IEluZGV4IHdpdGhpbiBjdXJyZW50IHRva2VuJ3MgdmFsdWVcbiAgICogQHBhcmFtIHtib29sfSByZW1vdmVCcmVha0NoYXIgRG8gd2Ugd2FudCB0byByZW1vdmUgdGhlIGJyZWFraW5nIGNoYXJhY3Rlcj9cbiAgICogQHJldHVybnMge3N0cmluZ30gcmVtYWluaW5nIHVuYnJva2VuIHRva2VuIHZhbHVlXG4gICAqL1xuXG5cbiAgZnVuY3Rpb24gYnJlYWtJbnNpZGVUb2tlbih0b2tlbnMsIHRva2VuSW5kZXgsIGJyZWFrSW5kZXgsIHJlbW92ZUJyZWFrQ2hhcikge1xuICAgIHZhciBuZXdCcmVha1Rva2VuID0ge1xuICAgICAgdHlwZTogVFlQRV9ORVdMSU5FXG4gICAgfTtcbiAgICB2YXIgbmV3VGV4dFRva2VuID0ge1xuICAgICAgdHlwZTogVFlQRV9URVhULFxuICAgICAgdmFsdWU6IHRva2Vuc1t0b2tlbkluZGV4XS52YWx1ZS5zdWJzdHJpbmcoYnJlYWtJbmRleCArIChyZW1vdmVCcmVha0NoYXIgPyAxIDogMCkpXG4gICAgfTtcbiAgICB0b2tlbnMuc3BsaWNlKHRva2VuSW5kZXggKyAxLCAwLCBuZXdCcmVha1Rva2VuLCBuZXdUZXh0VG9rZW4pO1xuICAgIHJldHVybiB0b2tlbnNbdG9rZW5JbmRleF0udmFsdWUuc3Vic3RyaW5nKDAsIGJyZWFrSW5kZXgpO1xuICB9XG5cbiAgdmFyIHRleHQgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gICAgVFlQRV9URVhUOiBUWVBFX1RFWFQsXG4gICAgVFlQRV9ORVdMSU5FOiBUWVBFX05FV0xJTkUsXG4gICAgVFlQRV9GRzogVFlQRV9GRyxcbiAgICBUWVBFX0JHOiBUWVBFX0JHLFxuICAgIG1lYXN1cmU6IG1lYXN1cmUsXG4gICAgdG9rZW5pemU6IHRva2VuaXplXG4gIH0pO1xuICAvKiogRGVmYXVsdCB3aXRoIGZvciBkaXNwbGF5IGFuZCBtYXAgZ2VuZXJhdG9ycyAqL1xuXG4gIHZhciBERUZBVUxUX1dJRFRIID0gODA7XG4gIC8qKiBEZWZhdWx0IGhlaWdodCBmb3IgZGlzcGxheSBhbmQgbWFwIGdlbmVyYXRvcnMgKi9cblxuICB2YXIgREVGQVVMVF9IRUlHSFQgPSAyNTtcbiAgdmFyIERJUlMgPSB7XG4gICAgNDogW1swLCAtMV0sIFsxLCAwXSwgWzAsIDFdLCBbLTEsIDBdXSxcbiAgICA4OiBbWzAsIC0xXSwgWzEsIC0xXSwgWzEsIDBdLCBbMSwgMV0sIFswLCAxXSwgWy0xLCAxXSwgWy0xLCAwXSwgWy0xLCAtMV1dLFxuICAgIDY6IFtbLTEsIC0xXSwgWzEsIC0xXSwgWzIsIDBdLCBbMSwgMV0sIFstMSwgMV0sIFstMiwgMF1dXG4gIH07XG4gIHZhciBLRVlTID0ge1xuICAgIC8qKiBDYW5jZWwga2V5LiAqL1xuICAgIFZLX0NBTkNFTDogMyxcblxuICAgIC8qKiBIZWxwIGtleS4gKi9cbiAgICBWS19IRUxQOiA2LFxuXG4gICAgLyoqIEJhY2tzcGFjZSBrZXkuICovXG4gICAgVktfQkFDS19TUEFDRTogOCxcblxuICAgIC8qKiBUYWIga2V5LiAqL1xuICAgIFZLX1RBQjogOSxcblxuICAgIC8qKiA1IGtleSBvbiBOdW1wYWQgd2hlbiBOdW1Mb2NrIGlzIHVubG9ja2VkLiBPciBvbiBNYWMsIGNsZWFyIGtleSB3aGljaCBpcyBwb3NpdGlvbmVkIGF0IE51bUxvY2sga2V5LiAqL1xuICAgIFZLX0NMRUFSOiAxMixcblxuICAgIC8qKiBSZXR1cm4vZW50ZXIga2V5IG9uIHRoZSBtYWluIGtleWJvYXJkLiAqL1xuICAgIFZLX1JFVFVSTjogMTMsXG5cbiAgICAvKiogUmVzZXJ2ZWQsIGJ1dCBub3QgdXNlZC4gKi9cbiAgICBWS19FTlRFUjogMTQsXG5cbiAgICAvKiogU2hpZnQga2V5LiAqL1xuICAgIFZLX1NISUZUOiAxNixcblxuICAgIC8qKiBDb250cm9sIGtleS4gKi9cbiAgICBWS19DT05UUk9MOiAxNyxcblxuICAgIC8qKiBBbHQgKE9wdGlvbiBvbiBNYWMpIGtleS4gKi9cbiAgICBWS19BTFQ6IDE4LFxuXG4gICAgLyoqIFBhdXNlIGtleS4gKi9cbiAgICBWS19QQVVTRTogMTksXG5cbiAgICAvKiogQ2FwcyBsb2NrLiAqL1xuICAgIFZLX0NBUFNfTE9DSzogMjAsXG5cbiAgICAvKiogRXNjYXBlIGtleS4gKi9cbiAgICBWS19FU0NBUEU6IDI3LFxuXG4gICAgLyoqIFNwYWNlIGJhci4gKi9cbiAgICBWS19TUEFDRTogMzIsXG5cbiAgICAvKiogUGFnZSBVcCBrZXkuICovXG4gICAgVktfUEFHRV9VUDogMzMsXG5cbiAgICAvKiogUGFnZSBEb3duIGtleS4gKi9cbiAgICBWS19QQUdFX0RPV046IDM0LFxuXG4gICAgLyoqIEVuZCBrZXkuICovXG4gICAgVktfRU5EOiAzNSxcblxuICAgIC8qKiBIb21lIGtleS4gKi9cbiAgICBWS19IT01FOiAzNixcblxuICAgIC8qKiBMZWZ0IGFycm93LiAqL1xuICAgIFZLX0xFRlQ6IDM3LFxuXG4gICAgLyoqIFVwIGFycm93LiAqL1xuICAgIFZLX1VQOiAzOCxcblxuICAgIC8qKiBSaWdodCBhcnJvdy4gKi9cbiAgICBWS19SSUdIVDogMzksXG5cbiAgICAvKiogRG93biBhcnJvdy4gKi9cbiAgICBWS19ET1dOOiA0MCxcblxuICAgIC8qKiBQcmludCBTY3JlZW4ga2V5LiAqL1xuICAgIFZLX1BSSU5UU0NSRUVOOiA0NCxcblxuICAgIC8qKiBJbnMoZXJ0KSBrZXkuICovXG4gICAgVktfSU5TRVJUOiA0NSxcblxuICAgIC8qKiBEZWwoZXRlKSBrZXkuICovXG4gICAgVktfREVMRVRFOiA0NixcblxuICAgIC8qKiovXG4gICAgVktfMDogNDgsXG5cbiAgICAvKioqL1xuICAgIFZLXzE6IDQ5LFxuXG4gICAgLyoqKi9cbiAgICBWS18yOiA1MCxcblxuICAgIC8qKiovXG4gICAgVktfMzogNTEsXG5cbiAgICAvKioqL1xuICAgIFZLXzQ6IDUyLFxuXG4gICAgLyoqKi9cbiAgICBWS181OiA1MyxcblxuICAgIC8qKiovXG4gICAgVktfNjogNTQsXG5cbiAgICAvKioqL1xuICAgIFZLXzc6IDU1LFxuXG4gICAgLyoqKi9cbiAgICBWS184OiA1NixcblxuICAgIC8qKiovXG4gICAgVktfOTogNTcsXG5cbiAgICAvKiogQ29sb24gKDopIGtleS4gUmVxdWlyZXMgR2Vja28gMTUuMCAqL1xuICAgIFZLX0NPTE9OOiA1OCxcblxuICAgIC8qKiBTZW1pY29sb24gKDspIGtleS4gKi9cbiAgICBWS19TRU1JQ09MT046IDU5LFxuXG4gICAgLyoqIExlc3MtdGhhbiAoPCkga2V5LiBSZXF1aXJlcyBHZWNrbyAxNS4wICovXG4gICAgVktfTEVTU19USEFOOiA2MCxcblxuICAgIC8qKiBFcXVhbHMgKD0pIGtleS4gKi9cbiAgICBWS19FUVVBTFM6IDYxLFxuXG4gICAgLyoqIEdyZWF0ZXItdGhhbiAoPikga2V5LiBSZXF1aXJlcyBHZWNrbyAxNS4wICovXG4gICAgVktfR1JFQVRFUl9USEFOOiA2MixcblxuICAgIC8qKiBRdWVzdGlvbiBtYXJrICg/KSBrZXkuIFJlcXVpcmVzIEdlY2tvIDE1LjAgKi9cbiAgICBWS19RVUVTVElPTl9NQVJLOiA2MyxcblxuICAgIC8qKiBBdG1hcmsgKEApIGtleS4gUmVxdWlyZXMgR2Vja28gMTUuMCAqL1xuICAgIFZLX0FUOiA2NCxcblxuICAgIC8qKiovXG4gICAgVktfQTogNjUsXG5cbiAgICAvKioqL1xuICAgIFZLX0I6IDY2LFxuXG4gICAgLyoqKi9cbiAgICBWS19DOiA2NyxcblxuICAgIC8qKiovXG4gICAgVktfRDogNjgsXG5cbiAgICAvKioqL1xuICAgIFZLX0U6IDY5LFxuXG4gICAgLyoqKi9cbiAgICBWS19GOiA3MCxcblxuICAgIC8qKiovXG4gICAgVktfRzogNzEsXG5cbiAgICAvKioqL1xuICAgIFZLX0g6IDcyLFxuXG4gICAgLyoqKi9cbiAgICBWS19JOiA3MyxcblxuICAgIC8qKiovXG4gICAgVktfSjogNzQsXG5cbiAgICAvKioqL1xuICAgIFZLX0s6IDc1LFxuXG4gICAgLyoqKi9cbiAgICBWS19MOiA3NixcblxuICAgIC8qKiovXG4gICAgVktfTTogNzcsXG5cbiAgICAvKioqL1xuICAgIFZLX046IDc4LFxuXG4gICAgLyoqKi9cbiAgICBWS19POiA3OSxcblxuICAgIC8qKiovXG4gICAgVktfUDogODAsXG5cbiAgICAvKioqL1xuICAgIFZLX1E6IDgxLFxuXG4gICAgLyoqKi9cbiAgICBWS19SOiA4MixcblxuICAgIC8qKiovXG4gICAgVktfUzogODMsXG5cbiAgICAvKioqL1xuICAgIFZLX1Q6IDg0LFxuXG4gICAgLyoqKi9cbiAgICBWS19VOiA4NSxcblxuICAgIC8qKiovXG4gICAgVktfVjogODYsXG5cbiAgICAvKioqL1xuICAgIFZLX1c6IDg3LFxuXG4gICAgLyoqKi9cbiAgICBWS19YOiA4OCxcblxuICAgIC8qKiovXG4gICAgVktfWTogODksXG5cbiAgICAvKioqL1xuICAgIFZLX1o6IDkwLFxuXG4gICAgLyoqKi9cbiAgICBWS19DT05URVhUX01FTlU6IDkzLFxuXG4gICAgLyoqIDAgb24gdGhlIG51bWVyaWMga2V5cGFkLiAqL1xuICAgIFZLX05VTVBBRDA6IDk2LFxuXG4gICAgLyoqIDEgb24gdGhlIG51bWVyaWMga2V5cGFkLiAqL1xuICAgIFZLX05VTVBBRDE6IDk3LFxuXG4gICAgLyoqIDIgb24gdGhlIG51bWVyaWMga2V5cGFkLiAqL1xuICAgIFZLX05VTVBBRDI6IDk4LFxuXG4gICAgLyoqIDMgb24gdGhlIG51bWVyaWMga2V5cGFkLiAqL1xuICAgIFZLX05VTVBBRDM6IDk5LFxuXG4gICAgLyoqIDQgb24gdGhlIG51bWVyaWMga2V5cGFkLiAqL1xuICAgIFZLX05VTVBBRDQ6IDEwMCxcblxuICAgIC8qKiA1IG9uIHRoZSBudW1lcmljIGtleXBhZC4gKi9cbiAgICBWS19OVU1QQUQ1OiAxMDEsXG5cbiAgICAvKiogNiBvbiB0aGUgbnVtZXJpYyBrZXlwYWQuICovXG4gICAgVktfTlVNUEFENjogMTAyLFxuXG4gICAgLyoqIDcgb24gdGhlIG51bWVyaWMga2V5cGFkLiAqL1xuICAgIFZLX05VTVBBRDc6IDEwMyxcblxuICAgIC8qKiA4IG9uIHRoZSBudW1lcmljIGtleXBhZC4gKi9cbiAgICBWS19OVU1QQUQ4OiAxMDQsXG5cbiAgICAvKiogOSBvbiB0aGUgbnVtZXJpYyBrZXlwYWQuICovXG4gICAgVktfTlVNUEFEOTogMTA1LFxuXG4gICAgLyoqICogb24gdGhlIG51bWVyaWMga2V5cGFkLiAqL1xuICAgIFZLX01VTFRJUExZOiAxMDYsXG5cbiAgICAvKiogKyBvbiB0aGUgbnVtZXJpYyBrZXlwYWQuICovXG4gICAgVktfQUREOiAxMDcsXG5cbiAgICAvKioqL1xuICAgIFZLX1NFUEFSQVRPUjogMTA4LFxuXG4gICAgLyoqIC0gb24gdGhlIG51bWVyaWMga2V5cGFkLiAqL1xuICAgIFZLX1NVQlRSQUNUOiAxMDksXG5cbiAgICAvKiogRGVjaW1hbCBwb2ludCBvbiB0aGUgbnVtZXJpYyBrZXlwYWQuICovXG4gICAgVktfREVDSU1BTDogMTEwLFxuXG4gICAgLyoqIC8gb24gdGhlIG51bWVyaWMga2V5cGFkLiAqL1xuICAgIFZLX0RJVklERTogMTExLFxuXG4gICAgLyoqIEYxIGtleS4gKi9cbiAgICBWS19GMTogMTEyLFxuXG4gICAgLyoqIEYyIGtleS4gKi9cbiAgICBWS19GMjogMTEzLFxuXG4gICAgLyoqIEYzIGtleS4gKi9cbiAgICBWS19GMzogMTE0LFxuXG4gICAgLyoqIEY0IGtleS4gKi9cbiAgICBWS19GNDogMTE1LFxuXG4gICAgLyoqIEY1IGtleS4gKi9cbiAgICBWS19GNTogMTE2LFxuXG4gICAgLyoqIEY2IGtleS4gKi9cbiAgICBWS19GNjogMTE3LFxuXG4gICAgLyoqIEY3IGtleS4gKi9cbiAgICBWS19GNzogMTE4LFxuXG4gICAgLyoqIEY4IGtleS4gKi9cbiAgICBWS19GODogMTE5LFxuXG4gICAgLyoqIEY5IGtleS4gKi9cbiAgICBWS19GOTogMTIwLFxuXG4gICAgLyoqIEYxMCBrZXkuICovXG4gICAgVktfRjEwOiAxMjEsXG5cbiAgICAvKiogRjExIGtleS4gKi9cbiAgICBWS19GMTE6IDEyMixcblxuICAgIC8qKiBGMTIga2V5LiAqL1xuICAgIFZLX0YxMjogMTIzLFxuXG4gICAgLyoqIEYxMyBrZXkuICovXG4gICAgVktfRjEzOiAxMjQsXG5cbiAgICAvKiogRjE0IGtleS4gKi9cbiAgICBWS19GMTQ6IDEyNSxcblxuICAgIC8qKiBGMTUga2V5LiAqL1xuICAgIFZLX0YxNTogMTI2LFxuXG4gICAgLyoqIEYxNiBrZXkuICovXG4gICAgVktfRjE2OiAxMjcsXG5cbiAgICAvKiogRjE3IGtleS4gKi9cbiAgICBWS19GMTc6IDEyOCxcblxuICAgIC8qKiBGMTgga2V5LiAqL1xuICAgIFZLX0YxODogMTI5LFxuXG4gICAgLyoqIEYxOSBrZXkuICovXG4gICAgVktfRjE5OiAxMzAsXG5cbiAgICAvKiogRjIwIGtleS4gKi9cbiAgICBWS19GMjA6IDEzMSxcblxuICAgIC8qKiBGMjEga2V5LiAqL1xuICAgIFZLX0YyMTogMTMyLFxuXG4gICAgLyoqIEYyMiBrZXkuICovXG4gICAgVktfRjIyOiAxMzMsXG5cbiAgICAvKiogRjIzIGtleS4gKi9cbiAgICBWS19GMjM6IDEzNCxcblxuICAgIC8qKiBGMjQga2V5LiAqL1xuICAgIFZLX0YyNDogMTM1LFxuXG4gICAgLyoqIE51bSBMb2NrIGtleS4gKi9cbiAgICBWS19OVU1fTE9DSzogMTQ0LFxuXG4gICAgLyoqIFNjcm9sbCBMb2NrIGtleS4gKi9cbiAgICBWS19TQ1JPTExfTE9DSzogMTQ1LFxuXG4gICAgLyoqIENpcmN1bWZsZXggKF4pIGtleS4gUmVxdWlyZXMgR2Vja28gMTUuMCAqL1xuICAgIFZLX0NJUkNVTUZMRVg6IDE2MCxcblxuICAgIC8qKiBFeGNsYW1hdGlvbiAoISkga2V5LiBSZXF1aXJlcyBHZWNrbyAxNS4wICovXG4gICAgVktfRVhDTEFNQVRJT046IDE2MSxcblxuICAgIC8qKiBEb3VibGUgcXVvdGUgKCkga2V5LiBSZXF1aXJlcyBHZWNrbyAxNS4wICovXG4gICAgVktfRE9VQkxFX1FVT1RFOiAxNjIsXG5cbiAgICAvKiogSGFzaCAoIykga2V5LiBSZXF1aXJlcyBHZWNrbyAxNS4wICovXG4gICAgVktfSEFTSDogMTYzLFxuXG4gICAgLyoqIERvbGxhciBzaWduICgkKSBrZXkuIFJlcXVpcmVzIEdlY2tvIDE1LjAgKi9cbiAgICBWS19ET0xMQVI6IDE2NCxcblxuICAgIC8qKiBQZXJjZW50ICglKSBrZXkuIFJlcXVpcmVzIEdlY2tvIDE1LjAgKi9cbiAgICBWS19QRVJDRU5UOiAxNjUsXG5cbiAgICAvKiogQW1wZXJzYW5kICgmKSBrZXkuIFJlcXVpcmVzIEdlY2tvIDE1LjAgKi9cbiAgICBWS19BTVBFUlNBTkQ6IDE2NixcblxuICAgIC8qKiBVbmRlcnNjb3JlIChfKSBrZXkuIFJlcXVpcmVzIEdlY2tvIDE1LjAgKi9cbiAgICBWS19VTkRFUlNDT1JFOiAxNjcsXG5cbiAgICAvKiogT3BlbiBwYXJlbnRoZXNpcyAoKCkga2V5LiBSZXF1aXJlcyBHZWNrbyAxNS4wICovXG4gICAgVktfT1BFTl9QQVJFTjogMTY4LFxuXG4gICAgLyoqIENsb3NlIHBhcmVudGhlc2lzICgpKSBrZXkuIFJlcXVpcmVzIEdlY2tvIDE1LjAgKi9cbiAgICBWS19DTE9TRV9QQVJFTjogMTY5LFxuXG4gICAgLyogQXN0ZXJpc2sgKCopIGtleS4gUmVxdWlyZXMgR2Vja28gMTUuMCAqL1xuICAgIFZLX0FTVEVSSVNLOiAxNzAsXG5cbiAgICAvKiogUGx1cyAoKykga2V5LiBSZXF1aXJlcyBHZWNrbyAxNS4wICovXG4gICAgVktfUExVUzogMTcxLFxuXG4gICAgLyoqIFBpcGUgKHwpIGtleS4gUmVxdWlyZXMgR2Vja28gMTUuMCAqL1xuICAgIFZLX1BJUEU6IDE3MixcblxuICAgIC8qKiBIeXBoZW4tVVMvZG9jcy9NaW51cyAoLSkga2V5LiBSZXF1aXJlcyBHZWNrbyAxNS4wICovXG4gICAgVktfSFlQSEVOX01JTlVTOiAxNzMsXG5cbiAgICAvKiogT3BlbiBjdXJseSBicmFja2V0ICh7KSBrZXkuIFJlcXVpcmVzIEdlY2tvIDE1LjAgKi9cbiAgICBWS19PUEVOX0NVUkxZX0JSQUNLRVQ6IDE3NCxcblxuICAgIC8qKiBDbG9zZSBjdXJseSBicmFja2V0ICh9KSBrZXkuIFJlcXVpcmVzIEdlY2tvIDE1LjAgKi9cbiAgICBWS19DTE9TRV9DVVJMWV9CUkFDS0VUOiAxNzUsXG5cbiAgICAvKiogVGlsZGUgKH4pIGtleS4gUmVxdWlyZXMgR2Vja28gMTUuMCAqL1xuICAgIFZLX1RJTERFOiAxNzYsXG5cbiAgICAvKiogQ29tbWEgKCwpIGtleS4gKi9cbiAgICBWS19DT01NQTogMTg4LFxuXG4gICAgLyoqIFBlcmlvZCAoLikga2V5LiAqL1xuICAgIFZLX1BFUklPRDogMTkwLFxuXG4gICAgLyoqIFNsYXNoICgvKSBrZXkuICovXG4gICAgVktfU0xBU0g6IDE5MSxcblxuICAgIC8qKiBCYWNrIHRpY2sgKGApIGtleS4gKi9cbiAgICBWS19CQUNLX1FVT1RFOiAxOTIsXG5cbiAgICAvKiogT3BlbiBzcXVhcmUgYnJhY2tldCAoWykga2V5LiAqL1xuICAgIFZLX09QRU5fQlJBQ0tFVDogMjE5LFxuXG4gICAgLyoqIEJhY2sgc2xhc2ggKFxcKSBrZXkuICovXG4gICAgVktfQkFDS19TTEFTSDogMjIwLFxuXG4gICAgLyoqIENsb3NlIHNxdWFyZSBicmFja2V0IChdKSBrZXkuICovXG4gICAgVktfQ0xPU0VfQlJBQ0tFVDogMjIxLFxuXG4gICAgLyoqIFF1b3RlICgnJycpIGtleS4gKi9cbiAgICBWS19RVU9URTogMjIyLFxuXG4gICAgLyoqIE1ldGEga2V5IG9uIExpbnV4LCBDb21tYW5kIGtleSBvbiBNYWMuICovXG4gICAgVktfTUVUQTogMjI0LFxuXG4gICAgLyoqIEFsdEdyIGtleSBvbiBMaW51eC4gUmVxdWlyZXMgR2Vja28gMTUuMCAqL1xuICAgIFZLX0FMVEdSOiAyMjUsXG5cbiAgICAvKiogV2luZG93cyBsb2dvIGtleSBvbiBXaW5kb3dzLiBPciBTdXBlciBvciBIeXBlciBrZXkgb24gTGludXguIFJlcXVpcmVzIEdlY2tvIDE1LjAgKi9cbiAgICBWS19XSU46IDkxLFxuXG4gICAgLyoqIExpbnV4IHN1cHBvcnQgZm9yIHRoaXMga2V5Y29kZSB3YXMgYWRkZWQgaW4gR2Vja28gNC4wLiAqL1xuICAgIFZLX0tBTkE6IDIxLFxuXG4gICAgLyoqIExpbnV4IHN1cHBvcnQgZm9yIHRoaXMga2V5Y29kZSB3YXMgYWRkZWQgaW4gR2Vja28gNC4wLiAqL1xuICAgIFZLX0hBTkdVTDogMjEsXG5cbiAgICAvKiog6Iux5pWwIGtleSBvbiBKYXBhbmVzZSBNYWMga2V5Ym9hcmQuIFJlcXVpcmVzIEdlY2tvIDE1LjAgKi9cbiAgICBWS19FSVNVOiAyMixcblxuICAgIC8qKiBMaW51eCBzdXBwb3J0IGZvciB0aGlzIGtleWNvZGUgd2FzIGFkZGVkIGluIEdlY2tvIDQuMC4gKi9cbiAgICBWS19KVU5KQTogMjMsXG5cbiAgICAvKiogTGludXggc3VwcG9ydCBmb3IgdGhpcyBrZXljb2RlIHdhcyBhZGRlZCBpbiBHZWNrbyA0LjAuICovXG4gICAgVktfRklOQUw6IDI0LFxuXG4gICAgLyoqIExpbnV4IHN1cHBvcnQgZm9yIHRoaXMga2V5Y29kZSB3YXMgYWRkZWQgaW4gR2Vja28gNC4wLiAqL1xuICAgIFZLX0hBTkpBOiAyNSxcblxuICAgIC8qKiBMaW51eCBzdXBwb3J0IGZvciB0aGlzIGtleWNvZGUgd2FzIGFkZGVkIGluIEdlY2tvIDQuMC4gKi9cbiAgICBWS19LQU5KSTogMjUsXG5cbiAgICAvKiogTGludXggc3VwcG9ydCBmb3IgdGhpcyBrZXljb2RlIHdhcyBhZGRlZCBpbiBHZWNrbyA0LjAuICovXG4gICAgVktfQ09OVkVSVDogMjgsXG5cbiAgICAvKiogTGludXggc3VwcG9ydCBmb3IgdGhpcyBrZXljb2RlIHdhcyBhZGRlZCBpbiBHZWNrbyA0LjAuICovXG4gICAgVktfTk9OQ09OVkVSVDogMjksXG5cbiAgICAvKiogTGludXggc3VwcG9ydCBmb3IgdGhpcyBrZXljb2RlIHdhcyBhZGRlZCBpbiBHZWNrbyA0LjAuICovXG4gICAgVktfQUNDRVBUOiAzMCxcblxuICAgIC8qKiBMaW51eCBzdXBwb3J0IGZvciB0aGlzIGtleWNvZGUgd2FzIGFkZGVkIGluIEdlY2tvIDQuMC4gKi9cbiAgICBWS19NT0RFQ0hBTkdFOiAzMSxcblxuICAgIC8qKiBMaW51eCBzdXBwb3J0IGZvciB0aGlzIGtleWNvZGUgd2FzIGFkZGVkIGluIEdlY2tvIDQuMC4gKi9cbiAgICBWS19TRUxFQ1Q6IDQxLFxuXG4gICAgLyoqIExpbnV4IHN1cHBvcnQgZm9yIHRoaXMga2V5Y29kZSB3YXMgYWRkZWQgaW4gR2Vja28gNC4wLiAqL1xuICAgIFZLX1BSSU5UOiA0MixcblxuICAgIC8qKiBMaW51eCBzdXBwb3J0IGZvciB0aGlzIGtleWNvZGUgd2FzIGFkZGVkIGluIEdlY2tvIDQuMC4gKi9cbiAgICBWS19FWEVDVVRFOiA0MyxcblxuICAgIC8qKiBMaW51eCBzdXBwb3J0IGZvciB0aGlzIGtleWNvZGUgd2FzIGFkZGVkIGluIEdlY2tvIDQuMC5cdCAqL1xuICAgIFZLX1NMRUVQOiA5NVxuICB9O1xuICB2YXIgQkFDS0VORFMgPSB7XG4gICAgXCJoZXhcIjogSGV4LFxuICAgIFwicmVjdFwiOiBSZWN0LFxuICAgIFwidGlsZVwiOiBUaWxlLFxuICAgIFwidGlsZS1nbFwiOiBUaWxlR0wsXG4gICAgXCJ0ZXJtXCI6IFRlcm1cbiAgfTtcbiAgdmFyIERFRkFVTFRfT1BUSU9OUyA9IHtcbiAgICB3aWR0aDogREVGQVVMVF9XSURUSCxcbiAgICBoZWlnaHQ6IERFRkFVTFRfSEVJR0hULFxuICAgIHRyYW5zcG9zZTogZmFsc2UsXG4gICAgbGF5b3V0OiBcInJlY3RcIixcbiAgICBmb250U2l6ZTogMTUsXG4gICAgc3BhY2luZzogMSxcbiAgICBib3JkZXI6IDAsXG4gICAgZm9yY2VTcXVhcmVSYXRpbzogZmFsc2UsXG4gICAgZm9udEZhbWlseTogXCJtb25vc3BhY2VcIixcbiAgICBmb250U3R5bGU6IFwiXCIsXG4gICAgZmc6IFwiI2NjY1wiLFxuICAgIGJnOiBcIiMwMDBcIixcbiAgICB0aWxlV2lkdGg6IDMyLFxuICAgIHRpbGVIZWlnaHQ6IDMyLFxuICAgIHRpbGVNYXA6IHt9LFxuICAgIHRpbGVTZXQ6IG51bGwsXG4gICAgdGlsZUNvbG9yaXplOiBmYWxzZVxuICB9O1xuICAvKipcbiAgICogQGNsYXNzIFZpc3VhbCBtYXAgZGlzcGxheVxuICAgKi9cblxuICB2YXIgRGlzcGxheSA9XG4gIC8qKiBAY2xhc3MgKi9cbiAgZnVuY3Rpb24gKCkge1xuICAgIHZhciBEaXNwbGF5ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgICAgIGZ1bmN0aW9uIERpc3BsYXkob3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZGF0YSA9IHt9O1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IGZhbHNlOyAvLyBmYWxzZSA9IG5vdGhpbmcsIHRydWUgPSBhbGwsIG9iamVjdCA9IGRpcnR5IGNlbGxzXG5cbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IHt9O1xuICAgICAgICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9PUFRJT05TLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLkRFQlVHID0gdGhpcy5ERUJVRy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl90aWNrID0gdGhpcy5fdGljay5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuX2JhY2tlbmQuc2NoZWR1bGUodGhpcy5fdGljayk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIERlYnVnIGhlbHBlciwgaWRlYWwgYXMgYSBtYXAgZ2VuZXJhdG9yIGNhbGxiYWNrLiBBbHdheXMgYm91bmQgdG8gdGhpcy5cbiAgICAgICAqIEBwYXJhbSB7aW50fSB4XG4gICAgICAgKiBAcGFyYW0ge2ludH0geVxuICAgICAgICogQHBhcmFtIHtpbnR9IHdoYXRcbiAgICAgICAqL1xuXG5cbiAgICAgIHZhciBfcHJvdG85ID0gRGlzcGxheS5wcm90b3R5cGU7XG5cbiAgICAgIF9wcm90bzkuREVCVUcgPSBmdW5jdGlvbiBERUJVRyh4LCB5LCB3aGF0KSB7XG4gICAgICAgIHZhciBjb2xvcnMgPSBbdGhpcy5fb3B0aW9ucy5iZywgdGhpcy5fb3B0aW9ucy5mZ107XG4gICAgICAgIHRoaXMuZHJhdyh4LCB5LCBudWxsLCBudWxsLCBjb2xvcnNbd2hhdCAlIGNvbG9ycy5sZW5ndGhdKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogQ2xlYXIgdGhlIHdob2xlIGRpc3BsYXkgKGNvdmVyIGl0IHdpdGggYmFja2dyb3VuZCBjb2xvcilcbiAgICAgICAqL1xuICAgICAgO1xuXG4gICAgICBfcHJvdG85LmNsZWFyID0gZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuX2RhdGEgPSB7fTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBAc2VlIFJPVC5EaXNwbGF5XG4gICAgICAgKi9cbiAgICAgIDtcblxuICAgICAgX3Byb3RvOS5zZXRPcHRpb25zID0gZnVuY3Rpb24gc2V0T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5fb3B0aW9ucywgb3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMud2lkdGggfHwgb3B0aW9ucy5oZWlnaHQgfHwgb3B0aW9ucy5mb250U2l6ZSB8fCBvcHRpb25zLmZvbnRGYW1pbHkgfHwgb3B0aW9ucy5zcGFjaW5nIHx8IG9wdGlvbnMubGF5b3V0KSB7XG4gICAgICAgICAgaWYgKG9wdGlvbnMubGF5b3V0KSB7XG4gICAgICAgICAgICB2YXIgY3RvciA9IEJBQ0tFTkRTW29wdGlvbnMubGF5b3V0XTtcbiAgICAgICAgICAgIHRoaXMuX2JhY2tlbmQgPSBuZXcgY3RvcigpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuX2JhY2tlbmQuc2V0T3B0aW9ucyh0aGlzLl9vcHRpb25zKTtcblxuICAgICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBSZXR1cm5zIGN1cnJlbnRseSBzZXQgb3B0aW9uc1xuICAgICAgICovXG4gICAgICA7XG5cbiAgICAgIF9wcm90bzkuZ2V0T3B0aW9ucyA9IGZ1bmN0aW9uIGdldE9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBSZXR1cm5zIHRoZSBET00gbm9kZSBvZiB0aGlzIGRpc3BsYXlcbiAgICAgICAqL1xuICAgICAgO1xuXG4gICAgICBfcHJvdG85LmdldENvbnRhaW5lciA9IGZ1bmN0aW9uIGdldENvbnRhaW5lcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JhY2tlbmQuZ2V0Q29udGFpbmVyKCk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIENvbXB1dGUgdGhlIG1heGltdW0gd2lkdGgvaGVpZ2h0IHRvIGZpdCBpbnRvIGEgc2V0IG9mIGdpdmVuIGNvbnN0cmFpbnRzXG4gICAgICAgKiBAcGFyYW0ge2ludH0gYXZhaWxXaWR0aCBNYXhpbXVtIGFsbG93ZWQgcGl4ZWwgd2lkdGhcbiAgICAgICAqIEBwYXJhbSB7aW50fSBhdmFpbEhlaWdodCBNYXhpbXVtIGFsbG93ZWQgcGl4ZWwgaGVpZ2h0XG4gICAgICAgKiBAcmV0dXJucyB7aW50WzJdfSBjZWxsV2lkdGgsY2VsbEhlaWdodFxuICAgICAgICovXG4gICAgICA7XG5cbiAgICAgIF9wcm90bzkuY29tcHV0ZVNpemUgPSBmdW5jdGlvbiBjb21wdXRlU2l6ZShhdmFpbFdpZHRoLCBhdmFpbEhlaWdodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmFja2VuZC5jb21wdXRlU2l6ZShhdmFpbFdpZHRoLCBhdmFpbEhlaWdodCk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIENvbXB1dGUgdGhlIG1heGltdW0gZm9udCBzaXplIHRvIGZpdCBpbnRvIGEgc2V0IG9mIGdpdmVuIGNvbnN0cmFpbnRzXG4gICAgICAgKiBAcGFyYW0ge2ludH0gYXZhaWxXaWR0aCBNYXhpbXVtIGFsbG93ZWQgcGl4ZWwgd2lkdGhcbiAgICAgICAqIEBwYXJhbSB7aW50fSBhdmFpbEhlaWdodCBNYXhpbXVtIGFsbG93ZWQgcGl4ZWwgaGVpZ2h0XG4gICAgICAgKiBAcmV0dXJucyB7aW50fSBmb250U2l6ZVxuICAgICAgICovXG4gICAgICA7XG5cbiAgICAgIF9wcm90bzkuY29tcHV0ZUZvbnRTaXplID0gZnVuY3Rpb24gY29tcHV0ZUZvbnRTaXplKGF2YWlsV2lkdGgsIGF2YWlsSGVpZ2h0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iYWNrZW5kLmNvbXB1dGVGb250U2l6ZShhdmFpbFdpZHRoLCBhdmFpbEhlaWdodCk7XG4gICAgICB9O1xuXG4gICAgICBfcHJvdG85LmNvbXB1dGVUaWxlU2l6ZSA9IGZ1bmN0aW9uIGNvbXB1dGVUaWxlU2l6ZShhdmFpbFdpZHRoLCBhdmFpbEhlaWdodCkge1xuICAgICAgICB2YXIgd2lkdGggPSBNYXRoLmZsb29yKGF2YWlsV2lkdGggLyB0aGlzLl9vcHRpb25zLndpZHRoKTtcbiAgICAgICAgdmFyIGhlaWdodCA9IE1hdGguZmxvb3IoYXZhaWxIZWlnaHQgLyB0aGlzLl9vcHRpb25zLmhlaWdodCk7XG4gICAgICAgIHJldHVybiBbd2lkdGgsIGhlaWdodF07XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIENvbnZlcnQgYSBET00gZXZlbnQgKG1vdXNlIG9yIHRvdWNoKSB0byBtYXAgY29vcmRpbmF0ZXMuIFVzZXMgZmlyc3QgdG91Y2ggZm9yIG11bHRpLXRvdWNoLlxuICAgICAgICogQHBhcmFtIHtFdmVudH0gZSBldmVudFxuICAgICAgICogQHJldHVybnMge2ludFsyXX0gLTEgZm9yIHZhbHVlcyBvdXRzaWRlIG9mIHRoZSBjYW52YXNcbiAgICAgICAqL1xuICAgICAgO1xuXG4gICAgICBfcHJvdG85LmV2ZW50VG9Qb3NpdGlvbiA9IGZ1bmN0aW9uIGV2ZW50VG9Qb3NpdGlvbihlKSB7XG4gICAgICAgIHZhciB4LCB5O1xuXG4gICAgICAgIGlmIChcInRvdWNoZXNcIiBpbiBlKSB7XG4gICAgICAgICAgeCA9IGUudG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgICAgIHkgPSBlLnRvdWNoZXNbMF0uY2xpZW50WTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB4ID0gZS5jbGllbnRYO1xuICAgICAgICAgIHkgPSBlLmNsaWVudFk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fYmFja2VuZC5ldmVudFRvUG9zaXRpb24oeCwgeSk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7aW50fSB4XG4gICAgICAgKiBAcGFyYW0ge2ludH0geVxuICAgICAgICogQHBhcmFtIHtzdHJpbmcgfHwgc3RyaW5nW119IGNoIE9uZSBvciBtb3JlIGNoYXJzICh3aWxsIGJlIG92ZXJsYXBwaW5nIHRoZW1zZWx2ZXMpXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2ZnXSBmb3JlZ3JvdW5kIGNvbG9yXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2JnXSBiYWNrZ3JvdW5kIGNvbG9yXG4gICAgICAgKi9cbiAgICAgIDtcblxuICAgICAgX3Byb3RvOS5kcmF3ID0gZnVuY3Rpb24gZHJhdyh4LCB5LCBjaCwgZmcsIGJnKSB7XG4gICAgICAgIGlmICghZmcpIHtcbiAgICAgICAgICBmZyA9IHRoaXMuX29wdGlvbnMuZmc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWJnKSB7XG4gICAgICAgICAgYmcgPSB0aGlzLl9vcHRpb25zLmJnO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGtleSA9IHggKyBcIixcIiArIHk7XG4gICAgICAgIHRoaXMuX2RhdGFba2V5XSA9IFt4LCB5LCBjaCwgZmcsIGJnXTtcblxuICAgICAgICBpZiAodGhpcy5fZGlydHkgPT09IHRydWUpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gLy8gd2lsbCBhbHJlYWR5IHJlZHJhdyBldmVyeXRoaW5nIFxuXG5cbiAgICAgICAgaWYgKCF0aGlzLl9kaXJ0eSkge1xuICAgICAgICAgIHRoaXMuX2RpcnR5ID0ge307XG4gICAgICAgIH0gLy8gZmlyc3QhXG5cblxuICAgICAgICB0aGlzLl9kaXJ0eVtrZXldID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogRHJhd3MgYSB0ZXh0IGF0IGdpdmVuIHBvc2l0aW9uLiBPcHRpb25hbGx5IHdyYXBzIGF0IGEgbWF4aW11bSBsZW5ndGguIEN1cnJlbnRseSBkb2VzIG5vdCB3b3JrIHdpdGggaGV4IGxheW91dC5cbiAgICAgICAqIEBwYXJhbSB7aW50fSB4XG4gICAgICAgKiBAcGFyYW0ge2ludH0geVxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgTWF5IGNvbnRhaW4gY29sb3IvYmFja2dyb3VuZCBmb3JtYXQgc3BlY2lmaWVycywgJWN7bmFtZX0vJWJ7bmFtZX0sIGJvdGggb3B0aW9uYWwuICVje30vJWJ7fSByZXNldHMgdG8gZGVmYXVsdC5cbiAgICAgICAqIEBwYXJhbSB7aW50fSBbbWF4V2lkdGhdIHdyYXAgYXQgd2hhdCB3aWR0aD9cbiAgICAgICAqIEByZXR1cm5zIHtpbnR9IGxpbmVzIGRyYXduXG4gICAgICAgKi9cbiAgICAgIDtcblxuICAgICAgX3Byb3RvOS5kcmF3VGV4dCA9IGZ1bmN0aW9uIGRyYXdUZXh0KHgsIHksIHRleHQsIG1heFdpZHRoKSB7XG4gICAgICAgIHZhciBmZyA9IG51bGw7XG4gICAgICAgIHZhciBiZyA9IG51bGw7XG4gICAgICAgIHZhciBjeCA9IHg7XG4gICAgICAgIHZhciBjeSA9IHk7XG4gICAgICAgIHZhciBsaW5lcyA9IDE7XG5cbiAgICAgICAgaWYgKCFtYXhXaWR0aCkge1xuICAgICAgICAgIG1heFdpZHRoID0gdGhpcy5fb3B0aW9ucy53aWR0aCAtIHg7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdG9rZW5zID0gdG9rZW5pemUodGV4dCwgbWF4V2lkdGgpO1xuXG4gICAgICAgIHdoaWxlICh0b2tlbnMubGVuZ3RoKSB7XG4gICAgICAgICAgLy8gaW50ZXJwcmV0IHRva2VuaXplZCBvcGNvZGUgc3RyZWFtXG4gICAgICAgICAgdmFyIHRva2VuID0gdG9rZW5zLnNoaWZ0KCk7XG5cbiAgICAgICAgICBzd2l0Y2ggKHRva2VuLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgVFlQRV9URVhUOlxuICAgICAgICAgICAgICB2YXIgaXNTcGFjZSA9IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgaXNQcmV2U3BhY2UgPSBmYWxzZSxcbiAgICAgICAgICAgICAgICAgIGlzRnVsbFdpZHRoID0gZmFsc2UsXG4gICAgICAgICAgICAgICAgICBpc1ByZXZGdWxsV2lkdGggPSBmYWxzZTtcblxuICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRva2VuLnZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNjID0gdG9rZW4udmFsdWUuY2hhckNvZGVBdChpKTtcbiAgICAgICAgICAgICAgICB2YXIgYyA9IHRva2VuLnZhbHVlLmNoYXJBdChpKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vcHRpb25zLmxheW91dCA9PT0gXCJ0ZXJtXCIpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBjY2ggPSBjYyA+PiA4O1xuICAgICAgICAgICAgICAgICAgdmFyIGlzQ0pLID0gY2NoID09PSAweDExIHx8IGNjaCA+PSAweDJlICYmIGNjaCA8PSAweDlmIHx8IGNjaCA+PSAweGFjICYmIGNjaCA8PSAweGQ3IHx8IGNjID49IDB4QTk2MCAmJiBjYyA8PSAweEE5N0Y7XG5cbiAgICAgICAgICAgICAgICAgIGlmIChpc0NKSykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoY3ggKyAwLCBjeSwgYywgZmcsIGJnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3KGN4ICsgMSwgY3ksIFwiXFx0XCIsIGZnLCBiZyk7XG4gICAgICAgICAgICAgICAgICAgIGN4ICs9IDI7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gLy8gQXNzaWduIHRvIGB0cnVlYCB3aGVuIHRoZSBjdXJyZW50IGNoYXIgaXMgZnVsbC13aWR0aC5cblxuXG4gICAgICAgICAgICAgICAgaXNGdWxsV2lkdGggPSBjYyA+IDB4ZmYwMCAmJiBjYyA8IDB4ZmY2MSB8fCBjYyA+IDB4ZmZkYyAmJiBjYyA8IDB4ZmZlOCB8fCBjYyA+IDB4ZmZlZTsgLy8gQ3VycmVudCBjaGFyIGlzIHNwYWNlLCB3aGF0ZXZlciBmdWxsLXdpZHRoIG9yIGhhbGYtd2lkdGggYm90aCBhcmUgT0suXG5cbiAgICAgICAgICAgICAgICBpc1NwYWNlID0gYy5jaGFyQ29kZUF0KDApID09IDB4MjAgfHwgYy5jaGFyQ29kZUF0KDApID09IDB4MzAwMDsgLy8gVGhlIHByZXZpb3VzIGNoYXIgaXMgZnVsbC13aWR0aCBhbmRcbiAgICAgICAgICAgICAgICAvLyBjdXJyZW50IGNoYXIgaXMgbmV0aGVyIGhhbGYtd2lkdGggbm9yIGEgc3BhY2UuXG5cbiAgICAgICAgICAgICAgICBpZiAoaXNQcmV2RnVsbFdpZHRoICYmICFpc0Z1bGxXaWR0aCAmJiAhaXNTcGFjZSkge1xuICAgICAgICAgICAgICAgICAgY3grKztcbiAgICAgICAgICAgICAgICB9IC8vIGFkZCBhbiBleHRyYSBwb3NpdGlvblxuICAgICAgICAgICAgICAgIC8vIFRoZSBjdXJyZW50IGNoYXIgaXMgZnVsbC13aWR0aCBhbmRcbiAgICAgICAgICAgICAgICAvLyB0aGUgcHJldmlvdXMgY2hhciBpcyBub3QgYSBzcGFjZS5cblxuXG4gICAgICAgICAgICAgICAgaWYgKGlzRnVsbFdpZHRoICYmICFpc1ByZXZTcGFjZSkge1xuICAgICAgICAgICAgICAgICAgY3grKztcbiAgICAgICAgICAgICAgICB9IC8vIGFkZCBhbiBleHRyYSBwb3NpdGlvblxuXG5cbiAgICAgICAgICAgICAgICB0aGlzLmRyYXcoY3grKywgY3ksIGMsIGZnLCBiZyk7XG4gICAgICAgICAgICAgICAgaXNQcmV2U3BhY2UgPSBpc1NwYWNlO1xuICAgICAgICAgICAgICAgIGlzUHJldkZ1bGxXaWR0aCA9IGlzRnVsbFdpZHRoO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgVFlQRV9GRzpcbiAgICAgICAgICAgICAgZmcgPSB0b2tlbi52YWx1ZSB8fCBudWxsO1xuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBUWVBFX0JHOlxuICAgICAgICAgICAgICBiZyA9IHRva2VuLnZhbHVlIHx8IG51bGw7XG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFRZUEVfTkVXTElORTpcbiAgICAgICAgICAgICAgY3ggPSB4O1xuICAgICAgICAgICAgICBjeSsrO1xuICAgICAgICAgICAgICBsaW5lcysrO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbGluZXM7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFRpbWVyIHRpY2s6IHVwZGF0ZSBkaXJ0eSBwYXJ0c1xuICAgICAgICovXG4gICAgICA7XG5cbiAgICAgIF9wcm90bzkuX3RpY2sgPSBmdW5jdGlvbiBfdGljaygpIHtcbiAgICAgICAgdGhpcy5fYmFja2VuZC5zY2hlZHVsZSh0aGlzLl90aWNrKTtcblxuICAgICAgICBpZiAoIXRoaXMuX2RpcnR5KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2RpcnR5ID09PSB0cnVlKSB7XG4gICAgICAgICAgLy8gZHJhdyBhbGxcbiAgICAgICAgICB0aGlzLl9iYWNrZW5kLmNsZWFyKCk7XG5cbiAgICAgICAgICBmb3IgKHZhciBpZCBpbiB0aGlzLl9kYXRhKSB7XG4gICAgICAgICAgICB0aGlzLl9kcmF3KGlkLCBmYWxzZSk7XG4gICAgICAgICAgfSAvLyByZWRyYXcgY2FjaGVkIGRhdGEgXG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBkcmF3IG9ubHkgZGlydHkgXG4gICAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuX2RpcnR5KSB7XG4gICAgICAgICAgICB0aGlzLl9kcmF3KGtleSwgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZGlydHkgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBXaGF0IHRvIGRyYXdcbiAgICAgICAqIEBwYXJhbSB7Ym9vbH0gY2xlYXJCZWZvcmUgSXMgaXQgbmVjZXNzYXJ5IHRvIGNsZWFuIGJlZm9yZT9cbiAgICAgICAqL1xuICAgICAgO1xuXG4gICAgICBfcHJvdG85Ll9kcmF3ID0gZnVuY3Rpb24gX2RyYXcoa2V5LCBjbGVhckJlZm9yZSkge1xuICAgICAgICB2YXIgZGF0YSA9IHRoaXMuX2RhdGFba2V5XTtcblxuICAgICAgICBpZiAoZGF0YVs0XSAhPSB0aGlzLl9vcHRpb25zLmJnKSB7XG4gICAgICAgICAgY2xlYXJCZWZvcmUgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fYmFja2VuZC5kcmF3KGRhdGEsIGNsZWFyQmVmb3JlKTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBEaXNwbGF5O1xuICAgIH0oKTtcblxuICAgIERpc3BsYXkuUmVjdCA9IFJlY3Q7XG4gICAgRGlzcGxheS5IZXggPSBIZXg7XG4gICAgRGlzcGxheS5UaWxlID0gVGlsZTtcbiAgICBEaXNwbGF5LlRpbGVHTCA9IFRpbGVHTDtcbiAgICBEaXNwbGF5LlRlcm0gPSBUZXJtO1xuICAgIHJldHVybiBEaXNwbGF5O1xuICB9KCk7XG4gIC8qKlxuICAgKiBAY2xhc3MgKE1hcmtvdiBwcm9jZXNzKS1iYXNlZCBzdHJpbmcgZ2VuZXJhdG9yLlxuICAgKiBDb3BpZWQgZnJvbSBhIDxhIGhyZWY9XCJodHRwOi8vd3d3LnJvZ3VlYmFzaW4ucm9ndWVsaWtlZGV2ZWxvcG1lbnQub3JnL2luZGV4LnBocD90aXRsZT1OYW1lc19mcm9tX2FfaGlnaF9vcmRlcl9NYXJrb3ZfUHJvY2Vzc19hbmRfYV9zaW1wbGlmaWVkX0thdHpfYmFjay1vZmZfc2NoZW1lXCI+Um9ndWVCYXNpbiBhcnRpY2xlPC9hPi5cbiAgICogT2ZmZXJzIGNvbmZpZ3VyYWJsZSBvcmRlciBhbmQgcHJpb3IuXG4gICAqL1xuXG5cbiAgdmFyIFN0cmluZ0dlbmVyYXRvciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3RyaW5nR2VuZXJhdG9yKG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuX29wdGlvbnMgPSB7XG4gICAgICAgIHdvcmRzOiBmYWxzZSxcbiAgICAgICAgb3JkZXI6IDMsXG4gICAgICAgIHByaW9yOiAwLjAwMVxuICAgICAgfTtcbiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5fb3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICB0aGlzLl9ib3VuZGFyeSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMCk7XG4gICAgICB0aGlzLl9zdWZmaXggPSB0aGlzLl9ib3VuZGFyeTtcbiAgICAgIHRoaXMuX3ByZWZpeCA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX29wdGlvbnMub3JkZXI7IGkrKykge1xuICAgICAgICB0aGlzLl9wcmVmaXgucHVzaCh0aGlzLl9ib3VuZGFyeSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3ByaW9yVmFsdWVzID0ge307XG4gICAgICB0aGlzLl9wcmlvclZhbHVlc1t0aGlzLl9ib3VuZGFyeV0gPSB0aGlzLl9vcHRpb25zLnByaW9yO1xuICAgICAgdGhpcy5fZGF0YSA9IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYWxsIGxlYXJuaW5nIGRhdGFcbiAgICAgKi9cblxuXG4gICAgdmFyIF9wcm90bzEwID0gU3RyaW5nR2VuZXJhdG9yLnByb3RvdHlwZTtcblxuICAgIF9wcm90bzEwLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICB0aGlzLl9kYXRhID0ge307XG4gICAgICB0aGlzLl9wcmlvclZhbHVlcyA9IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBHZW5lcmF0ZWQgc3RyaW5nXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvMTAuZ2VuZXJhdGUgPSBmdW5jdGlvbiBnZW5lcmF0ZSgpIHtcbiAgICAgIHZhciByZXN1bHQgPSBbdGhpcy5fc2FtcGxlKHRoaXMuX3ByZWZpeCldO1xuXG4gICAgICB3aGlsZSAocmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSAhPSB0aGlzLl9ib3VuZGFyeSkge1xuICAgICAgICByZXN1bHQucHVzaCh0aGlzLl9zYW1wbGUocmVzdWx0KSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLl9qb2luKHJlc3VsdC5zbGljZSgwLCAtMSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPYnNlcnZlIChsZWFybikgYSBzdHJpbmcgZnJvbSBhIHRyYWluaW5nIHNldFxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90bzEwLm9ic2VydmUgPSBmdW5jdGlvbiBvYnNlcnZlKHN0cmluZykge1xuICAgICAgdmFyIHRva2VucyA9IHRoaXMuX3NwbGl0KHN0cmluZyk7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuX3ByaW9yVmFsdWVzW3Rva2Vuc1tpXV0gPSB0aGlzLl9vcHRpb25zLnByaW9yO1xuICAgICAgfVxuXG4gICAgICB0b2tlbnMgPSB0aGlzLl9wcmVmaXguY29uY2F0KHRva2VucykuY29uY2F0KHRoaXMuX3N1ZmZpeCk7XG4gICAgICAvKiBhZGQgYm91bmRhcnkgc3ltYm9scyAqL1xuXG4gICAgICBmb3IgKHZhciBfaTIgPSB0aGlzLl9vcHRpb25zLm9yZGVyOyBfaTIgPCB0b2tlbnMubGVuZ3RoOyBfaTIrKykge1xuICAgICAgICB2YXIgY29udGV4dCA9IHRva2Vucy5zbGljZShfaTIgLSB0aGlzLl9vcHRpb25zLm9yZGVyLCBfaTIpO1xuICAgICAgICB2YXIgZXZlbnQgPSB0b2tlbnNbX2kyXTtcblxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNvbnRleHQubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICB2YXIgc3ViY29udGV4dCA9IGNvbnRleHQuc2xpY2Uoaik7XG5cbiAgICAgICAgICB0aGlzLl9vYnNlcnZlRXZlbnQoc3ViY29udGV4dCwgZXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90bzEwLmdldFN0YXRzID0gZnVuY3Rpb24gZ2V0U3RhdHMoKSB7XG4gICAgICB2YXIgcGFydHMgPSBbXTtcbiAgICAgIHZhciBwcmlvckNvdW50ID0gT2JqZWN0LmtleXModGhpcy5fcHJpb3JWYWx1ZXMpLmxlbmd0aDtcbiAgICAgIHByaW9yQ291bnQtLTsgLy8gYm91bmRhcnlcblxuICAgICAgcGFydHMucHVzaChcImRpc3RpbmN0IHNhbXBsZXM6IFwiICsgcHJpb3JDb3VudCk7XG4gICAgICB2YXIgZGF0YUNvdW50ID0gT2JqZWN0LmtleXModGhpcy5fZGF0YSkubGVuZ3RoO1xuICAgICAgdmFyIGV2ZW50Q291bnQgPSAwO1xuXG4gICAgICBmb3IgKHZhciBwIGluIHRoaXMuX2RhdGEpIHtcbiAgICAgICAgZXZlbnRDb3VudCArPSBPYmplY3Qua2V5cyh0aGlzLl9kYXRhW3BdKS5sZW5ndGg7XG4gICAgICB9XG5cbiAgICAgIHBhcnRzLnB1c2goXCJkaWN0aW9uYXJ5IHNpemUgKGNvbnRleHRzKTogXCIgKyBkYXRhQ291bnQpO1xuICAgICAgcGFydHMucHVzaChcImRpY3Rpb25hcnkgc2l6ZSAoZXZlbnRzKTogXCIgKyBldmVudENvdW50KTtcbiAgICAgIHJldHVybiBwYXJ0cy5qb2luKFwiLCBcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmdbXX1cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8xMC5fc3BsaXQgPSBmdW5jdGlvbiBfc3BsaXQoc3RyKSB7XG4gICAgICByZXR1cm4gc3RyLnNwbGl0KHRoaXMuX29wdGlvbnMud29yZHMgPyAvXFxzKy8gOiBcIlwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX1cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90bzEwLl9qb2luID0gZnVuY3Rpb24gX2pvaW4oYXJyKSB7XG4gICAgICByZXR1cm4gYXJyLmpvaW4odGhpcy5fb3B0aW9ucy53b3JkcyA/IFwiIFwiIDogXCJcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IGNvbnRleHRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8xMC5fb2JzZXJ2ZUV2ZW50ID0gZnVuY3Rpb24gX29ic2VydmVFdmVudChjb250ZXh0LCBldmVudCkge1xuICAgICAgdmFyIGtleSA9IHRoaXMuX2pvaW4oY29udGV4dCk7XG5cbiAgICAgIGlmICghKGtleSBpbiB0aGlzLl9kYXRhKSkge1xuICAgICAgICB0aGlzLl9kYXRhW2tleV0gPSB7fTtcbiAgICAgIH1cblxuICAgICAgdmFyIGRhdGEgPSB0aGlzLl9kYXRhW2tleV07XG5cbiAgICAgIGlmICghKGV2ZW50IGluIGRhdGEpKSB7XG4gICAgICAgIGRhdGFbZXZlbnRdID0gMDtcbiAgICAgIH1cblxuICAgICAgZGF0YVtldmVudF0rKztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX1cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90bzEwLl9zYW1wbGUgPSBmdW5jdGlvbiBfc2FtcGxlKGNvbnRleHQpIHtcbiAgICAgIGNvbnRleHQgPSB0aGlzLl9iYWNrb2ZmKGNvbnRleHQpO1xuXG4gICAgICB2YXIga2V5ID0gdGhpcy5fam9pbihjb250ZXh0KTtcblxuICAgICAgdmFyIGRhdGEgPSB0aGlzLl9kYXRhW2tleV07XG4gICAgICB2YXIgYXZhaWxhYmxlID0ge307XG5cbiAgICAgIGlmICh0aGlzLl9vcHRpb25zLnByaW9yKSB7XG4gICAgICAgIGZvciAodmFyIGV2ZW50IGluIHRoaXMuX3ByaW9yVmFsdWVzKSB7XG4gICAgICAgICAgYXZhaWxhYmxlW2V2ZW50XSA9IHRoaXMuX3ByaW9yVmFsdWVzW2V2ZW50XTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIF9ldmVudCBpbiBkYXRhKSB7XG4gICAgICAgICAgYXZhaWxhYmxlW19ldmVudF0gKz0gZGF0YVtfZXZlbnRdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhdmFpbGFibGUgPSBkYXRhO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gUk5HJDEuZ2V0V2VpZ2h0ZWRWYWx1ZShhdmFpbGFibGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmdbXX1cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8xMC5fYmFja29mZiA9IGZ1bmN0aW9uIF9iYWNrb2ZmKGNvbnRleHQpIHtcbiAgICAgIGlmIChjb250ZXh0Lmxlbmd0aCA+IHRoaXMuX29wdGlvbnMub3JkZXIpIHtcbiAgICAgICAgY29udGV4dCA9IGNvbnRleHQuc2xpY2UoLXRoaXMuX29wdGlvbnMub3JkZXIpO1xuICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lmxlbmd0aCA8IHRoaXMuX29wdGlvbnMub3JkZXIpIHtcbiAgICAgICAgY29udGV4dCA9IHRoaXMuX3ByZWZpeC5zbGljZSgwLCB0aGlzLl9vcHRpb25zLm9yZGVyIC0gY29udGV4dC5sZW5ndGgpLmNvbmNhdChjb250ZXh0KTtcbiAgICAgIH1cblxuICAgICAgd2hpbGUgKCEodGhpcy5fam9pbihjb250ZXh0KSBpbiB0aGlzLl9kYXRhKSAmJiBjb250ZXh0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29udGV4dCA9IGNvbnRleHQuc2xpY2UoMSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb250ZXh0O1xuICAgIH07XG5cbiAgICByZXR1cm4gU3RyaW5nR2VuZXJhdG9yO1xuICB9KCk7XG5cbiAgdmFyIE1pbkhlYXAgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1pbkhlYXAoKSB7XG4gICAgICB0aGlzLmhlYXAgPSBbXTtcbiAgICAgIHRoaXMudGltZXN0YW1wID0gMDtcbiAgICB9XG5cbiAgICB2YXIgX3Byb3RvMTEgPSBNaW5IZWFwLnByb3RvdHlwZTtcblxuICAgIF9wcm90bzExLmxlc3NUaGFuID0gZnVuY3Rpb24gbGVzc1RoYW4oYSwgYikge1xuICAgICAgcmV0dXJuIGEua2V5ID09IGIua2V5ID8gYS50aW1lc3RhbXAgPCBiLnRpbWVzdGFtcCA6IGEua2V5IDwgYi5rZXk7XG4gICAgfTtcblxuICAgIF9wcm90bzExLnNoaWZ0ID0gZnVuY3Rpb24gc2hpZnQodikge1xuICAgICAgdGhpcy5oZWFwID0gdGhpcy5oZWFwLm1hcChmdW5jdGlvbiAoX3JlZikge1xuICAgICAgICB2YXIga2V5ID0gX3JlZi5rZXksXG4gICAgICAgICAgICB2YWx1ZSA9IF9yZWYudmFsdWUsXG4gICAgICAgICAgICB0aW1lc3RhbXAgPSBfcmVmLnRpbWVzdGFtcDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBrZXk6IGtleSArIHYsXG4gICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgIHRpbWVzdGFtcDogdGltZXN0YW1wXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3Byb3RvMTEubGVuID0gZnVuY3Rpb24gbGVuKCkge1xuICAgICAgcmV0dXJuIHRoaXMuaGVhcC5sZW5ndGg7XG4gICAgfTtcblxuICAgIF9wcm90bzExLnB1c2ggPSBmdW5jdGlvbiBwdXNoKHZhbHVlLCBrZXkpIHtcbiAgICAgIHRoaXMudGltZXN0YW1wICs9IDE7XG4gICAgICB2YXIgbG9jID0gdGhpcy5sZW4oKTtcbiAgICAgIHRoaXMuaGVhcC5wdXNoKHtcbiAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICB0aW1lc3RhbXA6IHRoaXMudGltZXN0YW1wLFxuICAgICAgICBrZXk6IGtleVxuICAgICAgfSk7XG4gICAgICB0aGlzLnVwZGF0ZVVwKGxvYyk7XG4gICAgfTtcblxuICAgIF9wcm90bzExLnBvcCA9IGZ1bmN0aW9uIHBvcCgpIHtcbiAgICAgIGlmICh0aGlzLmxlbigpID09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm8gZWxlbWVudCB0byBwb3BcIik7XG4gICAgICB9XG5cbiAgICAgIHZhciB0b3AgPSB0aGlzLmhlYXBbMF07XG5cbiAgICAgIGlmICh0aGlzLmxlbigpID4gMSkge1xuICAgICAgICB0aGlzLmhlYXBbMF0gPSB0aGlzLmhlYXAucG9wKCk7XG4gICAgICAgIHRoaXMudXBkYXRlRG93bigwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaGVhcC5wb3AoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRvcDtcbiAgICB9O1xuXG4gICAgX3Byb3RvMTEuZmluZCA9IGZ1bmN0aW9uIGZpbmQodikge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbigpOyBpKyspIHtcbiAgICAgICAgaWYgKHYgPT0gdGhpcy5oZWFwW2ldLnZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuaGVhcFtpXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgX3Byb3RvMTEucmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKHYpIHtcbiAgICAgIHZhciBpbmRleCA9IG51bGw7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW4oKTsgaSsrKSB7XG4gICAgICAgIGlmICh2ID09IHRoaXMuaGVhcFtpXS52YWx1ZSkge1xuICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoaW5kZXggPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5sZW4oKSA+IDEpIHtcbiAgICAgICAgdmFyIGxhc3QgPSB0aGlzLmhlYXAucG9wKCk7XG5cbiAgICAgICAgaWYgKGxhc3QudmFsdWUgIT0gdikge1xuICAgICAgICAgIC8vIGlmIHRoZSBsYXN0IG9uZSBpcyBiZWluZyByZW1vdmVkLCBkbyBub3RoaW5nXG4gICAgICAgICAgdGhpcy5oZWFwW2luZGV4XSA9IGxhc3Q7XG4gICAgICAgICAgdGhpcy51cGRhdGVEb3duKGluZGV4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5oZWFwLnBvcCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgX3Byb3RvMTEucGFyZW50Tm9kZSA9IGZ1bmN0aW9uIHBhcmVudE5vZGUoeCkge1xuICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHggLSAxKSAvIDIpO1xuICAgIH07XG5cbiAgICBfcHJvdG8xMS5sZWZ0Q2hpbGROb2RlID0gZnVuY3Rpb24gbGVmdENoaWxkTm9kZSh4KSB7XG4gICAgICByZXR1cm4gMiAqIHggKyAxO1xuICAgIH07XG5cbiAgICBfcHJvdG8xMS5yaWdodENoaWxkTm9kZSA9IGZ1bmN0aW9uIHJpZ2h0Q2hpbGROb2RlKHgpIHtcbiAgICAgIHJldHVybiAyICogeCArIDI7XG4gICAgfTtcblxuICAgIF9wcm90bzExLmV4aXN0Tm9kZSA9IGZ1bmN0aW9uIGV4aXN0Tm9kZSh4KSB7XG4gICAgICByZXR1cm4geCA+PSAwICYmIHggPCB0aGlzLmhlYXAubGVuZ3RoO1xuICAgIH07XG5cbiAgICBfcHJvdG8xMS5zd2FwID0gZnVuY3Rpb24gc3dhcCh4LCB5KSB7XG4gICAgICB2YXIgdCA9IHRoaXMuaGVhcFt4XTtcbiAgICAgIHRoaXMuaGVhcFt4XSA9IHRoaXMuaGVhcFt5XTtcbiAgICAgIHRoaXMuaGVhcFt5XSA9IHQ7XG4gICAgfTtcblxuICAgIF9wcm90bzExLm1pbk5vZGUgPSBmdW5jdGlvbiBtaW5Ob2RlKG51bWJlcnMpIHtcbiAgICAgIHZhciB2YWxpZG51bWJlcnMgPSBudW1iZXJzLmZpbHRlcih0aGlzLmV4aXN0Tm9kZS5iaW5kKHRoaXMpKTtcbiAgICAgIHZhciBtaW5pbWFsID0gdmFsaWRudW1iZXJzWzBdO1xuXG4gICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHZhbGlkbnVtYmVycyksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yKCkpLmRvbmU7KSB7XG4gICAgICAgIHZhciBpID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgICAgaWYgKHRoaXMubGVzc1RoYW4odGhpcy5oZWFwW2ldLCB0aGlzLmhlYXBbbWluaW1hbF0pKSB7XG4gICAgICAgICAgbWluaW1hbCA9IGk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG1pbmltYWw7XG4gICAgfTtcblxuICAgIF9wcm90bzExLnVwZGF0ZVVwID0gZnVuY3Rpb24gdXBkYXRlVXAoeCkge1xuICAgICAgaWYgKHggPT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBwYXJlbnQgPSB0aGlzLnBhcmVudE5vZGUoeCk7XG5cbiAgICAgIGlmICh0aGlzLmV4aXN0Tm9kZShwYXJlbnQpICYmIHRoaXMubGVzc1RoYW4odGhpcy5oZWFwW3hdLCB0aGlzLmhlYXBbcGFyZW50XSkpIHtcbiAgICAgICAgdGhpcy5zd2FwKHgsIHBhcmVudCk7XG4gICAgICAgIHRoaXMudXBkYXRlVXAocGFyZW50KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvMTEudXBkYXRlRG93biA9IGZ1bmN0aW9uIHVwZGF0ZURvd24oeCkge1xuICAgICAgdmFyIGxlZnRDaGlsZCA9IHRoaXMubGVmdENoaWxkTm9kZSh4KTtcbiAgICAgIHZhciByaWdodENoaWxkID0gdGhpcy5yaWdodENoaWxkTm9kZSh4KTtcblxuICAgICAgaWYgKCF0aGlzLmV4aXN0Tm9kZShsZWZ0Q2hpbGQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIG0gPSB0aGlzLm1pbk5vZGUoW3gsIGxlZnRDaGlsZCwgcmlnaHRDaGlsZF0pO1xuXG4gICAgICBpZiAobSAhPSB4KSB7XG4gICAgICAgIHRoaXMuc3dhcCh4LCBtKTtcbiAgICAgICAgdGhpcy51cGRhdGVEb3duKG0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8xMS5kZWJ1Z1ByaW50ID0gZnVuY3Rpb24gZGVidWdQcmludCgpIHtcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMuaGVhcCk7XG4gICAgfTtcblxuICAgIHJldHVybiBNaW5IZWFwO1xuICB9KCk7XG5cbiAgdmFyIEV2ZW50UXVldWUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBjbGFzcyBHZW5lcmljIGV2ZW50IHF1ZXVlOiBzdG9yZXMgZXZlbnRzIGFuZCByZXRyaWV2ZXMgdGhlbSBiYXNlZCBvbiB0aGVpciB0aW1lXG4gICAgICovXG4gICAgZnVuY3Rpb24gRXZlbnRRdWV1ZSgpIHtcbiAgICAgIHRoaXMuX3RpbWUgPSAwO1xuICAgICAgdGhpcy5fZXZlbnRzID0gbmV3IE1pbkhlYXAoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMge251bWJlcn0gRWxhcHNlZCB0aW1lXG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8xMiA9IEV2ZW50UXVldWUucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvMTIuZ2V0VGltZSA9IGZ1bmN0aW9uIGdldFRpbWUoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdGltZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYXIgYWxsIHNjaGVkdWxlZCBldmVudHNcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8xMi5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgICAgdGhpcy5fZXZlbnRzID0gbmV3IE1pbkhlYXAoKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gez99IGV2ZW50XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8xMi5hZGQgPSBmdW5jdGlvbiBhZGQoZXZlbnQsIHRpbWUpIHtcbiAgICAgIHRoaXMuX2V2ZW50cy5wdXNoKGV2ZW50LCB0aW1lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9jYXRlcyB0aGUgbmVhcmVzdCBldmVudCwgYWR2YW5jZXMgdGltZSBpZiBuZWNlc3NhcnkuIFJldHVybnMgdGhhdCBldmVudCBhbmQgcmVtb3ZlcyBpdCBmcm9tIHRoZSBxdWV1ZS5cbiAgICAgKiBAcmV0dXJucyB7PyB8fCBudWxsfSBUaGUgZXZlbnQgcHJldmlvdXNseSBhZGRlZCBieSBhZGRFdmVudCwgbnVsbCBpZiBubyBldmVudCBhdmFpbGFibGVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8xMi5nZXQgPSBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICBpZiAoIXRoaXMuX2V2ZW50cy5sZW4oKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdmFyIF90aGlzJF9ldmVudHMkcG9wID0gdGhpcy5fZXZlbnRzLnBvcCgpLFxuICAgICAgICAgIHRpbWUgPSBfdGhpcyRfZXZlbnRzJHBvcC5rZXksXG4gICAgICAgICAgZXZlbnQgPSBfdGhpcyRfZXZlbnRzJHBvcC52YWx1ZTtcblxuICAgICAgaWYgKHRpbWUgPiAwKSB7XG4gICAgICAgIC8qIGFkdmFuY2UgKi9cbiAgICAgICAgdGhpcy5fdGltZSArPSB0aW1lO1xuXG4gICAgICAgIHRoaXMuX2V2ZW50cy5zaGlmdCgtdGltZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBldmVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0aW1lIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gZXZlbnRcbiAgICAgKiBAcGFyYW0gez99IGV2ZW50XG4gICAgICogQHJldHVybnMge251bWJlcn0gdGltZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90bzEyLmdldEV2ZW50VGltZSA9IGZ1bmN0aW9uIGdldEV2ZW50VGltZShldmVudCkge1xuICAgICAgdmFyIHIgPSB0aGlzLl9ldmVudHMuZmluZChldmVudCk7XG5cbiAgICAgIGlmIChyKSB7XG4gICAgICAgIHZhciBrZXkgPSByLmtleTtcbiAgICAgICAgcmV0dXJuIGtleTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFuIGV2ZW50IGZyb20gdGhlIHF1ZXVlXG4gICAgICogQHBhcmFtIHs/fSBldmVudFxuICAgICAqIEByZXR1cm5zIHtib29sfSBzdWNjZXNzP1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90bzEyLnJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZShldmVudCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2V2ZW50cy5yZW1vdmUoZXZlbnQpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRXZlbnRRdWV1ZTtcbiAgfSgpO1xuXG4gIHZhciBTY2hlZHVsZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBjbGFzcyBBYnN0cmFjdCBzY2hlZHVsZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTY2hlZHVsZXIoKSB7XG4gICAgICB0aGlzLl9xdWV1ZSA9IG5ldyBFdmVudFF1ZXVlKCk7XG4gICAgICB0aGlzLl9yZXBlYXQgPSBbXTtcbiAgICAgIHRoaXMuX2N1cnJlbnQgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAc2VlIFJPVC5FdmVudFF1ZXVlI2dldFRpbWVcbiAgICAgKi9cblxuXG4gICAgdmFyIF9wcm90bzEzID0gU2NoZWR1bGVyLnByb3RvdHlwZTtcblxuICAgIF9wcm90bzEzLmdldFRpbWUgPSBmdW5jdGlvbiBnZXRUaW1lKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3F1ZXVlLmdldFRpbWUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHs/fSBpdGVtXG4gICAgICogQHBhcmFtIHtib29sfSByZXBlYXRcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8xMy5hZGQgPSBmdW5jdGlvbiBhZGQoaXRlbSwgcmVwZWF0KSB7XG4gICAgICBpZiAocmVwZWF0KSB7XG4gICAgICAgIHRoaXMuX3JlcGVhdC5wdXNoKGl0ZW0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0aW1lIHRoZSBnaXZlbiBpdGVtIGlzIHNjaGVkdWxlZCBmb3JcbiAgICAgKiBAcGFyYW0gez99IGl0ZW1cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSB0aW1lXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvMTMuZ2V0VGltZU9mID0gZnVuY3Rpb24gZ2V0VGltZU9mKGl0ZW0pIHtcbiAgICAgIHJldHVybiB0aGlzLl9xdWV1ZS5nZXRFdmVudFRpbWUoaXRlbSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFyIGFsbCBpdGVtc1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90bzEzLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICB0aGlzLl9xdWV1ZS5jbGVhcigpO1xuXG4gICAgICB0aGlzLl9yZXBlYXQgPSBbXTtcbiAgICAgIHRoaXMuX2N1cnJlbnQgPSBudWxsO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIHByZXZpb3VzbHkgYWRkZWQgaXRlbVxuICAgICAqIEBwYXJhbSB7P30gaXRlbVxuICAgICAqIEByZXR1cm5zIHtib29sfSBzdWNjZXNzZnVsP1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90bzEzLnJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZShpdGVtKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdGhpcy5fcXVldWUucmVtb3ZlKGl0ZW0pO1xuXG4gICAgICB2YXIgaW5kZXggPSB0aGlzLl9yZXBlYXQuaW5kZXhPZihpdGVtKTtcblxuICAgICAgaWYgKGluZGV4ICE9IC0xKSB7XG4gICAgICAgIHRoaXMuX3JlcGVhdC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fY3VycmVudCA9PSBpdGVtKSB7XG4gICAgICAgIHRoaXMuX2N1cnJlbnQgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZSBuZXh0IGl0ZW1cbiAgICAgKiBAcmV0dXJucyB7P31cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8xMy5uZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgIHRoaXMuX2N1cnJlbnQgPSB0aGlzLl9xdWV1ZS5nZXQoKTtcbiAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50O1xuICAgIH07XG5cbiAgICByZXR1cm4gU2NoZWR1bGVyO1xuICB9KCk7XG4gIC8qKlxuICAgKiBAY2xhc3MgU2ltcGxlIGZhaXIgc2NoZWR1bGVyIChyb3VuZC1yb2JpbiBzdHlsZSlcbiAgICovXG5cblxuICB2YXIgU2ltcGxlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfU2NoZWR1bGVyKSB7XG4gICAgX2luaGVyaXRzTG9vc2UoU2ltcGxlLCBfU2NoZWR1bGVyKTtcblxuICAgIGZ1bmN0aW9uIFNpbXBsZSgpIHtcbiAgICAgIHJldHVybiBfU2NoZWR1bGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG5cbiAgICB2YXIgX3Byb3RvMTQgPSBTaW1wbGUucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvMTQuYWRkID0gZnVuY3Rpb24gYWRkKGl0ZW0sIHJlcGVhdCkge1xuICAgICAgdGhpcy5fcXVldWUuYWRkKGl0ZW0sIDApO1xuXG4gICAgICByZXR1cm4gX1NjaGVkdWxlci5wcm90b3R5cGUuYWRkLmNhbGwodGhpcywgaXRlbSwgcmVwZWF0KTtcbiAgICB9O1xuXG4gICAgX3Byb3RvMTQubmV4dCA9IGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICBpZiAodGhpcy5fY3VycmVudCAhPT0gbnVsbCAmJiB0aGlzLl9yZXBlYXQuaW5kZXhPZih0aGlzLl9jdXJyZW50KSAhPSAtMSkge1xuICAgICAgICB0aGlzLl9xdWV1ZS5hZGQodGhpcy5fY3VycmVudCwgMCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfU2NoZWR1bGVyLnByb3RvdHlwZS5uZXh0LmNhbGwodGhpcyk7XG4gICAgfTtcblxuICAgIHJldHVybiBTaW1wbGU7XG4gIH0oU2NoZWR1bGVyKTtcbiAgLyoqXG4gICAqIEBjbGFzcyBTcGVlZC1iYXNlZCBzY2hlZHVsZXJcbiAgICovXG5cblxuICB2YXIgU3BlZWQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9TY2hlZHVsZXIyKSB7XG4gICAgX2luaGVyaXRzTG9vc2UoU3BlZWQsIF9TY2hlZHVsZXIyKTtcblxuICAgIGZ1bmN0aW9uIFNwZWVkKCkge1xuICAgICAgcmV0dXJuIF9TY2hlZHVsZXIyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG5cbiAgICB2YXIgX3Byb3RvMTUgPSBTcGVlZC5wcm90b3R5cGU7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gaXRlbSBhbnl0aGluZyB3aXRoIFwiZ2V0U3BlZWRcIiBtZXRob2RcbiAgICAgKiBAcGFyYW0ge2Jvb2x9IHJlcGVhdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbdGltZT0xL2l0ZW0uZ2V0U3BlZWQoKV1cbiAgICAgKiBAc2VlIFJPVC5TY2hlZHVsZXIjYWRkXG4gICAgICovXG4gICAgX3Byb3RvMTUuYWRkID0gZnVuY3Rpb24gYWRkKGl0ZW0sIHJlcGVhdCwgdGltZSkge1xuICAgICAgdGhpcy5fcXVldWUuYWRkKGl0ZW0sIHRpbWUgIT09IHVuZGVmaW5lZCA/IHRpbWUgOiAxIC8gaXRlbS5nZXRTcGVlZCgpKTtcblxuICAgICAgcmV0dXJuIF9TY2hlZHVsZXIyLnByb3RvdHlwZS5hZGQuY2FsbCh0aGlzLCBpdGVtLCByZXBlYXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAc2VlIFJPVC5TY2hlZHVsZXIjbmV4dFxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90bzE1Lm5leHQgPSBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgaWYgKHRoaXMuX2N1cnJlbnQgJiYgdGhpcy5fcmVwZWF0LmluZGV4T2YodGhpcy5fY3VycmVudCkgIT0gLTEpIHtcbiAgICAgICAgdGhpcy5fcXVldWUuYWRkKHRoaXMuX2N1cnJlbnQsIDEgLyB0aGlzLl9jdXJyZW50LmdldFNwZWVkKCkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX1NjaGVkdWxlcjIucHJvdG90eXBlLm5leHQuY2FsbCh0aGlzKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNwZWVkO1xuICB9KFNjaGVkdWxlcik7XG4gIC8qKlxuICAgKiBAY2xhc3MgQWN0aW9uLWJhc2VkIHNjaGVkdWxlclxuICAgKiBAYXVnbWVudHMgUk9ULlNjaGVkdWxlclxuICAgKi9cblxuXG4gIHZhciBBY3Rpb24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9TY2hlZHVsZXIzKSB7XG4gICAgX2luaGVyaXRzTG9vc2UoQWN0aW9uLCBfU2NoZWR1bGVyMyk7XG5cbiAgICBmdW5jdGlvbiBBY3Rpb24oKSB7XG4gICAgICB2YXIgX3RoaXM5O1xuXG4gICAgICBfdGhpczkgPSBfU2NoZWR1bGVyMy5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICBfdGhpczkuX2RlZmF1bHREdXJhdGlvbiA9IDE7XG4gICAgICAvKiBmb3IgbmV3bHkgYWRkZWQgKi9cblxuICAgICAgX3RoaXM5Ll9kdXJhdGlvbiA9IF90aGlzOS5fZGVmYXVsdER1cmF0aW9uO1xuICAgICAgLyogZm9yIHRoaXMuX2N1cnJlbnQgKi9cblxuICAgICAgcmV0dXJuIF90aGlzOTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGl0ZW1cbiAgICAgKiBAcGFyYW0ge2Jvb2x9IHJlcGVhdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbdGltZT0xXVxuICAgICAqIEBzZWUgUk9ULlNjaGVkdWxlciNhZGRcbiAgICAgKi9cblxuXG4gICAgdmFyIF9wcm90bzE2ID0gQWN0aW9uLnByb3RvdHlwZTtcblxuICAgIF9wcm90bzE2LmFkZCA9IGZ1bmN0aW9uIGFkZChpdGVtLCByZXBlYXQsIHRpbWUpIHtcbiAgICAgIHRoaXMuX3F1ZXVlLmFkZChpdGVtLCB0aW1lIHx8IHRoaXMuX2RlZmF1bHREdXJhdGlvbik7XG5cbiAgICAgIHJldHVybiBfU2NoZWR1bGVyMy5wcm90b3R5cGUuYWRkLmNhbGwodGhpcywgaXRlbSwgcmVwZWF0KTtcbiAgICB9O1xuXG4gICAgX3Byb3RvMTYuY2xlYXIgPSBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICAgIHRoaXMuX2R1cmF0aW9uID0gdGhpcy5fZGVmYXVsdER1cmF0aW9uO1xuICAgICAgcmV0dXJuIF9TY2hlZHVsZXIzLnByb3RvdHlwZS5jbGVhci5jYWxsKHRoaXMpO1xuICAgIH07XG5cbiAgICBfcHJvdG8xNi5yZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoaXRlbSkge1xuICAgICAgaWYgKGl0ZW0gPT0gdGhpcy5fY3VycmVudCkge1xuICAgICAgICB0aGlzLl9kdXJhdGlvbiA9IHRoaXMuX2RlZmF1bHREdXJhdGlvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF9TY2hlZHVsZXIzLnByb3RvdHlwZS5yZW1vdmUuY2FsbCh0aGlzLCBpdGVtKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHNlZSBST1QuU2NoZWR1bGVyI25leHRcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8xNi5uZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgIGlmICh0aGlzLl9jdXJyZW50ICE9PSBudWxsICYmIHRoaXMuX3JlcGVhdC5pbmRleE9mKHRoaXMuX2N1cnJlbnQpICE9IC0xKSB7XG4gICAgICAgIHRoaXMuX3F1ZXVlLmFkZCh0aGlzLl9jdXJyZW50LCB0aGlzLl9kdXJhdGlvbiB8fCB0aGlzLl9kZWZhdWx0RHVyYXRpb24pO1xuXG4gICAgICAgIHRoaXMuX2R1cmF0aW9uID0gdGhpcy5fZGVmYXVsdER1cmF0aW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX1NjaGVkdWxlcjMucHJvdG90eXBlLm5leHQuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGR1cmF0aW9uIGZvciB0aGUgYWN0aXZlIGl0ZW1cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8xNi5zZXREdXJhdGlvbiA9IGZ1bmN0aW9uIHNldER1cmF0aW9uKHRpbWUpIHtcbiAgICAgIGlmICh0aGlzLl9jdXJyZW50KSB7XG4gICAgICAgIHRoaXMuX2R1cmF0aW9uID0gdGltZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIHJldHVybiBBY3Rpb247XG4gIH0oU2NoZWR1bGVyKTtcblxuICB2YXIgaW5kZXggPSB7XG4gICAgU2ltcGxlOiBTaW1wbGUsXG4gICAgU3BlZWQ6IFNwZWVkLFxuICAgIEFjdGlvbjogQWN0aW9uXG4gIH07XG5cbiAgdmFyIEZPViA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQGNsYXNzIEFic3RyYWN0IEZPViBhbGdvcml0aG1cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBsaWdodFBhc3Nlc0NhbGxiYWNrIERvZXMgdGhlIGxpZ2h0IHBhc3MgdGhyb3VnaCB4LHk/XG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxuICAgICAqIEBwYXJhbSB7aW50fSBbb3B0aW9ucy50b3BvbG9neT04XSA0LzYvOFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEZPVihsaWdodFBhc3Nlc0NhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fbGlnaHRQYXNzZXMgPSBsaWdodFBhc3Nlc0NhbGxiYWNrO1xuICAgICAgdGhpcy5fb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICB0b3BvbG9neTogOFxuICAgICAgfSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiBhbGwgbmVpZ2hib3JzIGluIGEgY29uY2VudHJpYyByaW5nXG4gICAgICogQHBhcmFtIHtpbnR9IGN4IGNlbnRlci14XG4gICAgICogQHBhcmFtIHtpbnR9IGN5IGNlbnRlci15XG4gICAgICogQHBhcmFtIHtpbnR9IHIgcmFuZ2VcbiAgICAgKi9cblxuXG4gICAgdmFyIF9wcm90bzE3ID0gRk9WLnByb3RvdHlwZTtcblxuICAgIF9wcm90bzE3Ll9nZXRDaXJjbGUgPSBmdW5jdGlvbiBfZ2V0Q2lyY2xlKGN4LCBjeSwgcikge1xuICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgdmFyIGRpcnMsIGNvdW50RmFjdG9yLCBzdGFydE9mZnNldDtcblxuICAgICAgc3dpdGNoICh0aGlzLl9vcHRpb25zLnRvcG9sb2d5KSB7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICBjb3VudEZhY3RvciA9IDE7XG4gICAgICAgICAgc3RhcnRPZmZzZXQgPSBbMCwgMV07XG4gICAgICAgICAgZGlycyA9IFtESVJTWzhdWzddLCBESVJTWzhdWzFdLCBESVJTWzhdWzNdLCBESVJTWzhdWzVdXTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgZGlycyA9IERJUlNbNl07XG4gICAgICAgICAgY291bnRGYWN0b3IgPSAxO1xuICAgICAgICAgIHN0YXJ0T2Zmc2V0ID0gWy0xLCAxXTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgZGlycyA9IERJUlNbNF07XG4gICAgICAgICAgY291bnRGYWN0b3IgPSAyO1xuICAgICAgICAgIHN0YXJ0T2Zmc2V0ID0gWy0xLCAxXTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkluY29ycmVjdCB0b3BvbG9neSBmb3IgRk9WIGNvbXB1dGF0aW9uXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLyogc3RhcnRpbmcgbmVpZ2hib3IgKi9cblxuXG4gICAgICB2YXIgeCA9IGN4ICsgc3RhcnRPZmZzZXRbMF0gKiByO1xuICAgICAgdmFyIHkgPSBjeSArIHN0YXJ0T2Zmc2V0WzFdICogcjtcbiAgICAgIC8qIGNpcmNsZSAqL1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCByICogY291bnRGYWN0b3I7IGorKykge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKFt4LCB5XSk7XG4gICAgICAgICAgeCArPSBkaXJzW2ldWzBdO1xuICAgICAgICAgIHkgKz0gZGlyc1tpXVsxXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbiAgICByZXR1cm4gRk9WO1xuICB9KCk7XG4gIC8qKlxuICAgKiBAY2xhc3MgRGlzY3JldGUgc2hhZG93Y2FzdGluZyBhbGdvcml0aG0uIE9ic29sZXRlZCBieSBQcmVjaXNlIHNoYWRvd2Nhc3RpbmcuXG4gICAqIEBhdWdtZW50cyBST1QuRk9WXG4gICAqL1xuXG5cbiAgdmFyIERpc2NyZXRlU2hhZG93Y2FzdGluZyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0ZPVikge1xuICAgIF9pbmhlcml0c0xvb3NlKERpc2NyZXRlU2hhZG93Y2FzdGluZywgX0ZPVik7XG5cbiAgICBmdW5jdGlvbiBEaXNjcmV0ZVNoYWRvd2Nhc3RpbmcoKSB7XG4gICAgICByZXR1cm4gX0ZPVi5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuXG4gICAgdmFyIF9wcm90bzE4ID0gRGlzY3JldGVTaGFkb3djYXN0aW5nLnByb3RvdHlwZTtcblxuICAgIF9wcm90bzE4LmNvbXB1dGUgPSBmdW5jdGlvbiBjb21wdXRlKHgsIHksIFIsIGNhbGxiYWNrKSB7XG4gICAgICAvKiB0aGlzIHBsYWNlIGlzIGFsd2F5cyB2aXNpYmxlICovXG4gICAgICBjYWxsYmFjayh4LCB5LCAwLCAxKTtcbiAgICAgIC8qIHN0YW5kaW5nIGluIGEgZGFyayBwbGFjZS4gRklYTUUgaXMgdGhpcyBhIGdvb2QgaWRlYT8gICovXG5cbiAgICAgIGlmICghdGhpcy5fbGlnaHRQYXNzZXMoeCwgeSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLyogc3RhcnQgYW5kIGVuZCBhbmdsZXMgKi9cblxuXG4gICAgICB2YXIgREFUQSA9IFtdO1xuICAgICAgdmFyIEEsIEIsIGN4LCBjeSwgYmxvY2tzO1xuICAgICAgLyogYW5hbHl6ZSBzdXJyb3VuZGluZyBjZWxscyBpbiBjb25jZW50cmljIHJpbmdzLCBzdGFydGluZyBmcm9tIHRoZSBjZW50ZXIgKi9cblxuICAgICAgZm9yICh2YXIgciA9IDE7IHIgPD0gUjsgcisrKSB7XG4gICAgICAgIHZhciBuZWlnaGJvcnMgPSB0aGlzLl9nZXRDaXJjbGUoeCwgeSwgcik7XG5cbiAgICAgICAgdmFyIGFuZ2xlID0gMzYwIC8gbmVpZ2hib3JzLmxlbmd0aDtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5laWdoYm9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGN4ID0gbmVpZ2hib3JzW2ldWzBdO1xuICAgICAgICAgIGN5ID0gbmVpZ2hib3JzW2ldWzFdO1xuICAgICAgICAgIEEgPSBhbmdsZSAqIChpIC0gMC41KTtcbiAgICAgICAgICBCID0gQSArIGFuZ2xlO1xuICAgICAgICAgIGJsb2NrcyA9ICF0aGlzLl9saWdodFBhc3NlcyhjeCwgY3kpO1xuXG4gICAgICAgICAgaWYgKHRoaXMuX3Zpc2libGVDb29yZHMoTWF0aC5mbG9vcihBKSwgTWF0aC5jZWlsKEIpLCBibG9ja3MsIERBVEEpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhjeCwgY3ksIHIsIDEpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChEQVRBLmxlbmd0aCA9PSAyICYmIERBVEFbMF0gPT0gMCAmJiBEQVRBWzFdID09IDM2MCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvKiBjdXRvZmY/ICovXG5cbiAgICAgICAgfVxuICAgICAgICAvKiBmb3IgYWxsIGNlbGxzIGluIHRoaXMgcmluZyAqL1xuXG4gICAgICB9XG4gICAgICAvKiBmb3IgYWxsIHJpbmdzICovXG5cbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbnR9IEEgc3RhcnQgYW5nbGVcbiAgICAgKiBAcGFyYW0ge2ludH0gQiBlbmQgYW5nbGVcbiAgICAgKiBAcGFyYW0ge2Jvb2x9IGJsb2NrcyBEb2VzIGN1cnJlbnQgY2VsbCBibG9jayB2aXNpYmlsaXR5P1xuICAgICAqIEBwYXJhbSB7aW50W11bXX0gREFUQSBzaGFkb3dlZCBhbmdsZSBwYWlyc1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90bzE4Ll92aXNpYmxlQ29vcmRzID0gZnVuY3Rpb24gX3Zpc2libGVDb29yZHMoQSwgQiwgYmxvY2tzLCBEQVRBKSB7XG4gICAgICBpZiAoQSA8IDApIHtcbiAgICAgICAgdmFyIHYxID0gdGhpcy5fdmlzaWJsZUNvb3JkcygwLCBCLCBibG9ja3MsIERBVEEpO1xuXG4gICAgICAgIHZhciB2MiA9IHRoaXMuX3Zpc2libGVDb29yZHMoMzYwICsgQSwgMzYwLCBibG9ja3MsIERBVEEpO1xuXG4gICAgICAgIHJldHVybiB2MSB8fCB2MjtcbiAgICAgIH1cblxuICAgICAgdmFyIGluZGV4ID0gMDtcblxuICAgICAgd2hpbGUgKGluZGV4IDwgREFUQS5sZW5ndGggJiYgREFUQVtpbmRleF0gPCBBKSB7XG4gICAgICAgIGluZGV4Kys7XG4gICAgICB9XG5cbiAgICAgIGlmIChpbmRleCA9PSBEQVRBLmxlbmd0aCkge1xuICAgICAgICAvKiBjb21wbGV0ZWx5IG5ldyBzaGFkb3cgKi9cbiAgICAgICAgaWYgKGJsb2Nrcykge1xuICAgICAgICAgIERBVEEucHVzaChBLCBCKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICB2YXIgY291bnQgPSAwO1xuXG4gICAgICBpZiAoaW5kZXggJSAyKSB7XG4gICAgICAgIC8qIHRoaXMgc2hhZG93IHN0YXJ0cyBpbiBhbiBleGlzdGluZyBzaGFkb3csIG9yIHdpdGhpbiBpdHMgZW5kaW5nIGJvdW5kYXJ5ICovXG4gICAgICAgIHdoaWxlIChpbmRleCA8IERBVEEubGVuZ3RoICYmIERBVEFbaW5kZXhdIDwgQikge1xuICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgY291bnQrKztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb3VudCA9PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGJsb2Nrcykge1xuICAgICAgICAgIGlmIChjb3VudCAlIDIpIHtcbiAgICAgICAgICAgIERBVEEuc3BsaWNlKGluZGV4IC0gY291bnQsIGNvdW50LCBCKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgREFUQS5zcGxpY2UoaW5kZXggLSBjb3VudCwgY291bnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLyogdGhpcyBzaGFkb3cgc3RhcnRzIG91dHNpZGUgYW4gZXhpc3Rpbmcgc2hhZG93LCBvciB3aXRoaW4gYSBzdGFydGluZyBib3VuZGFyeSAqL1xuICAgICAgICB3aGlsZSAoaW5kZXggPCBEQVRBLmxlbmd0aCAmJiBEQVRBW2luZGV4XSA8IEIpIHtcbiAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgIH1cbiAgICAgICAgLyogdmlzaWJsZSB3aGVuIG91dHNpZGUgYW4gZXhpc3Rpbmcgc2hhZG93LCBvciB3aGVuIG92ZXJsYXBwaW5nICovXG5cblxuICAgICAgICBpZiAoQSA9PSBEQVRBW2luZGV4IC0gY291bnRdICYmIGNvdW50ID09IDEpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYmxvY2tzKSB7XG4gICAgICAgICAgaWYgKGNvdW50ICUgMikge1xuICAgICAgICAgICAgREFUQS5zcGxpY2UoaW5kZXggLSBjb3VudCwgY291bnQsIEEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBEQVRBLnNwbGljZShpbmRleCAtIGNvdW50LCBjb3VudCwgQSwgQik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBEaXNjcmV0ZVNoYWRvd2Nhc3Rpbmc7XG4gIH0oRk9WKTtcbiAgLyoqXG4gICAqIEBjbGFzcyBQcmVjaXNlIHNoYWRvd2Nhc3RpbmcgYWxnb3JpdGhtXG4gICAqIEBhdWdtZW50cyBST1QuRk9WXG4gICAqL1xuXG5cbiAgdmFyIFByZWNpc2VTaGFkb3djYXN0aW5nID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfRk9WMikge1xuICAgIF9pbmhlcml0c0xvb3NlKFByZWNpc2VTaGFkb3djYXN0aW5nLCBfRk9WMik7XG5cbiAgICBmdW5jdGlvbiBQcmVjaXNlU2hhZG93Y2FzdGluZygpIHtcbiAgICAgIHJldHVybiBfRk9WMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuXG4gICAgdmFyIF9wcm90bzE5ID0gUHJlY2lzZVNoYWRvd2Nhc3RpbmcucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvMTkuY29tcHV0ZSA9IGZ1bmN0aW9uIGNvbXB1dGUoeCwgeSwgUiwgY2FsbGJhY2spIHtcbiAgICAgIC8qIHRoaXMgcGxhY2UgaXMgYWx3YXlzIHZpc2libGUgKi9cbiAgICAgIGNhbGxiYWNrKHgsIHksIDAsIDEpO1xuICAgICAgLyogc3RhbmRpbmcgaW4gYSBkYXJrIHBsYWNlLiBGSVhNRSBpcyB0aGlzIGEgZ29vZCBpZGVhPyAgKi9cblxuICAgICAgaWYgKCF0aGlzLl9saWdodFBhc3Nlcyh4LCB5KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvKiBsaXN0IG9mIGFsbCBzaGFkb3dzICovXG5cblxuICAgICAgdmFyIFNIQURPV1MgPSBbXTtcbiAgICAgIHZhciBjeCwgY3ksIGJsb2NrcywgQTEsIEEyLCB2aXNpYmlsaXR5O1xuICAgICAgLyogYW5hbHl6ZSBzdXJyb3VuZGluZyBjZWxscyBpbiBjb25jZW50cmljIHJpbmdzLCBzdGFydGluZyBmcm9tIHRoZSBjZW50ZXIgKi9cblxuICAgICAgZm9yICh2YXIgciA9IDE7IHIgPD0gUjsgcisrKSB7XG4gICAgICAgIHZhciBuZWlnaGJvcnMgPSB0aGlzLl9nZXRDaXJjbGUoeCwgeSwgcik7XG5cbiAgICAgICAgdmFyIG5laWdoYm9yQ291bnQgPSBuZWlnaGJvcnMubGVuZ3RoO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmVpZ2hib3JDb3VudDsgaSsrKSB7XG4gICAgICAgICAgY3ggPSBuZWlnaGJvcnNbaV1bMF07XG4gICAgICAgICAgY3kgPSBuZWlnaGJvcnNbaV1bMV07XG4gICAgICAgICAgLyogc2hpZnQgaGFsZi1hbi1hbmdsZSBiYWNrd2FyZHMgdG8gbWFpbnRhaW4gY29uc2lzdGVuY3kgb2YgMC10aCBjZWxscyAqL1xuXG4gICAgICAgICAgQTEgPSBbaSA/IDIgKiBpIC0gMSA6IDIgKiBuZWlnaGJvckNvdW50IC0gMSwgMiAqIG5laWdoYm9yQ291bnRdO1xuICAgICAgICAgIEEyID0gWzIgKiBpICsgMSwgMiAqIG5laWdoYm9yQ291bnRdO1xuICAgICAgICAgIGJsb2NrcyA9ICF0aGlzLl9saWdodFBhc3NlcyhjeCwgY3kpO1xuICAgICAgICAgIHZpc2liaWxpdHkgPSB0aGlzLl9jaGVja1Zpc2liaWxpdHkoQTEsIEEyLCBibG9ja3MsIFNIQURPV1MpO1xuXG4gICAgICAgICAgaWYgKHZpc2liaWxpdHkpIHtcbiAgICAgICAgICAgIC8vY2FsbGJhY2soY3gsIGN5LCByLCB2aXNpYmlsaXR5KTtcblx0XHRcdGlmIChjYWxsYmFjayhjeCwgY3ksIHIsIHZpc2liaWxpdHkpKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoU0hBRE9XUy5sZW5ndGggPT0gMiAmJiBTSEFET1dTWzBdWzBdID09IDAgJiYgU0hBRE9XU1sxXVswXSA9PSBTSEFET1dTWzFdWzFdKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIC8qIGN1dG9mZj8gKi9cblxuICAgICAgICB9XG4gICAgICAgIC8qIGZvciBhbGwgY2VsbHMgaW4gdGhpcyByaW5nICovXG5cbiAgICAgIH1cbiAgICAgIC8qIGZvciBhbGwgcmluZ3MgKi9cblxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ludFsyXX0gQTEgYXJjIHN0YXJ0XG4gICAgICogQHBhcmFtIHtpbnRbMl19IEEyIGFyYyBlbmRcbiAgICAgKiBAcGFyYW0ge2Jvb2x9IGJsb2NrcyBEb2VzIGN1cnJlbnQgYXJjIGJsb2NrIHZpc2liaWxpdHk/XG4gICAgICogQHBhcmFtIHtpbnRbXVtdfSBTSEFET1dTIGxpc3Qgb2YgYWN0aXZlIHNoYWRvd3NcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8xOS5fY2hlY2tWaXNpYmlsaXR5ID0gZnVuY3Rpb24gX2NoZWNrVmlzaWJpbGl0eShBMSwgQTIsIGJsb2NrcywgU0hBRE9XUykge1xuICAgICAgaWYgKEExWzBdID4gQTJbMF0pIHtcbiAgICAgICAgLyogc3BsaXQgaW50byB0d28gc3ViLWFyY3MgKi9cbiAgICAgICAgdmFyIHYxID0gdGhpcy5fY2hlY2tWaXNpYmlsaXR5KEExLCBbQTFbMV0sIEExWzFdXSwgYmxvY2tzLCBTSEFET1dTKTtcblxuICAgICAgICB2YXIgdjIgPSB0aGlzLl9jaGVja1Zpc2liaWxpdHkoWzAsIDFdLCBBMiwgYmxvY2tzLCBTSEFET1dTKTtcblxuICAgICAgICByZXR1cm4gKHYxICsgdjIpIC8gMjtcbiAgICAgIH1cbiAgICAgIC8qIGluZGV4MTogZmlyc3Qgc2hhZG93ID49IEExICovXG5cblxuICAgICAgdmFyIGluZGV4MSA9IDAsXG4gICAgICAgICAgZWRnZTEgPSBmYWxzZTtcblxuICAgICAgd2hpbGUgKGluZGV4MSA8IFNIQURPV1MubGVuZ3RoKSB7XG4gICAgICAgIHZhciBvbGQgPSBTSEFET1dTW2luZGV4MV07XG4gICAgICAgIHZhciBkaWZmID0gb2xkWzBdICogQTFbMV0gLSBBMVswXSAqIG9sZFsxXTtcblxuICAgICAgICBpZiAoZGlmZiA+PSAwKSB7XG4gICAgICAgICAgLyogb2xkID49IEExICovXG4gICAgICAgICAgaWYgKGRpZmYgPT0gMCAmJiAhKGluZGV4MSAlIDIpKSB7XG4gICAgICAgICAgICBlZGdlMSA9IHRydWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpbmRleDErKztcbiAgICAgIH1cbiAgICAgIC8qIGluZGV4MjogbGFzdCBzaGFkb3cgPD0gQTIgKi9cblxuXG4gICAgICB2YXIgaW5kZXgyID0gU0hBRE9XUy5sZW5ndGgsXG4gICAgICAgICAgZWRnZTIgPSBmYWxzZTtcblxuICAgICAgd2hpbGUgKGluZGV4Mi0tKSB7XG4gICAgICAgIHZhciBfb2xkID0gU0hBRE9XU1tpbmRleDJdO1xuXG4gICAgICAgIHZhciBfZGlmZiA9IEEyWzBdICogX29sZFsxXSAtIF9vbGRbMF0gKiBBMlsxXTtcblxuICAgICAgICBpZiAoX2RpZmYgPj0gMCkge1xuICAgICAgICAgIC8qIG9sZCA8PSBBMiAqL1xuICAgICAgICAgIGlmIChfZGlmZiA9PSAwICYmIGluZGV4MiAlIDIpIHtcbiAgICAgICAgICAgIGVkZ2UyID0gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgdmlzaWJsZSA9IHRydWU7XG5cbiAgICAgIGlmIChpbmRleDEgPT0gaW5kZXgyICYmIChlZGdlMSB8fCBlZGdlMikpIHtcbiAgICAgICAgLyogc3Vic2V0IG9mIGV4aXN0aW5nIHNoYWRvdywgb25lIG9mIHRoZSBlZGdlcyBtYXRjaCAqL1xuICAgICAgICB2aXNpYmxlID0gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKGVkZ2UxICYmIGVkZ2UyICYmIGluZGV4MSArIDEgPT0gaW5kZXgyICYmIGluZGV4MiAlIDIpIHtcbiAgICAgICAgLyogY29tcGxldGVseSBlcXVpdmFsZW50IHdpdGggZXhpc3Rpbmcgc2hhZG93ICovXG4gICAgICAgIHZpc2libGUgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoaW5kZXgxID4gaW5kZXgyICYmIGluZGV4MSAlIDIpIHtcbiAgICAgICAgLyogc3Vic2V0IG9mIGV4aXN0aW5nIHNoYWRvdywgbm90IHRvdWNoaW5nICovXG4gICAgICAgIHZpc2libGUgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF2aXNpYmxlKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgLyogZmFzdCBjYXNlOiBub3QgdmlzaWJsZSAqL1xuXG5cbiAgICAgIHZhciB2aXNpYmxlTGVuZ3RoO1xuICAgICAgLyogY29tcHV0ZSB0aGUgbGVuZ3RoIG9mIHZpc2libGUgYXJjLCBhZGp1c3QgbGlzdCBvZiBzaGFkb3dzIChpZiBibG9ja2luZykgKi9cblxuICAgICAgdmFyIHJlbW92ZSA9IGluZGV4MiAtIGluZGV4MSArIDE7XG5cbiAgICAgIGlmIChyZW1vdmUgJSAyKSB7XG4gICAgICAgIGlmIChpbmRleDEgJSAyKSB7XG4gICAgICAgICAgLyogZmlyc3QgZWRnZSB3aXRoaW4gZXhpc3Rpbmcgc2hhZG93LCBzZWNvbmQgb3V0c2lkZSAqL1xuICAgICAgICAgIHZhciBQID0gU0hBRE9XU1tpbmRleDFdO1xuICAgICAgICAgIHZpc2libGVMZW5ndGggPSAoQTJbMF0gKiBQWzFdIC0gUFswXSAqIEEyWzFdKSAvIChQWzFdICogQTJbMV0pO1xuXG4gICAgICAgICAgaWYgKGJsb2Nrcykge1xuICAgICAgICAgICAgU0hBRE9XUy5zcGxpY2UoaW5kZXgxLCByZW1vdmUsIEEyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLyogc2Vjb25kIGVkZ2Ugd2l0aGluIGV4aXN0aW5nIHNoYWRvdywgZmlyc3Qgb3V0c2lkZSAqL1xuICAgICAgICAgIHZhciBfUCA9IFNIQURPV1NbaW5kZXgyXTtcbiAgICAgICAgICB2aXNpYmxlTGVuZ3RoID0gKF9QWzBdICogQTFbMV0gLSBBMVswXSAqIF9QWzFdKSAvIChBMVsxXSAqIF9QWzFdKTtcblxuICAgICAgICAgIGlmIChibG9ja3MpIHtcbiAgICAgICAgICAgIFNIQURPV1Muc3BsaWNlKGluZGV4MSwgcmVtb3ZlLCBBMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaW5kZXgxICUgMikge1xuICAgICAgICAgIC8qIGJvdGggZWRnZXMgd2l0aGluIGV4aXN0aW5nIHNoYWRvd3MgKi9cbiAgICAgICAgICB2YXIgUDEgPSBTSEFET1dTW2luZGV4MV07XG4gICAgICAgICAgdmFyIFAyID0gU0hBRE9XU1tpbmRleDJdO1xuICAgICAgICAgIHZpc2libGVMZW5ndGggPSAoUDJbMF0gKiBQMVsxXSAtIFAxWzBdICogUDJbMV0pIC8gKFAxWzFdICogUDJbMV0pO1xuXG4gICAgICAgICAgaWYgKGJsb2Nrcykge1xuICAgICAgICAgICAgU0hBRE9XUy5zcGxpY2UoaW5kZXgxLCByZW1vdmUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvKiBib3RoIGVkZ2VzIG91dHNpZGUgZXhpc3Rpbmcgc2hhZG93cyAqL1xuICAgICAgICAgIGlmIChibG9ja3MpIHtcbiAgICAgICAgICAgIFNIQURPV1Muc3BsaWNlKGluZGV4MSwgcmVtb3ZlLCBBMSwgQTIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgIC8qIHdob2xlIGFyYyB2aXNpYmxlISAqL1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBhcmNMZW5ndGggPSAoQTJbMF0gKiBBMVsxXSAtIEExWzBdICogQTJbMV0pIC8gKEExWzFdICogQTJbMV0pO1xuICAgICAgcmV0dXJuIHZpc2libGVMZW5ndGggLyBhcmNMZW5ndGg7XG4gICAgfTtcblxuICAgIHJldHVybiBQcmVjaXNlU2hhZG93Y2FzdGluZztcbiAgfShGT1YpO1xuICAvKiogT2N0YW50cyB1c2VkIGZvciB0cmFuc2xhdGluZyByZWN1cnNpdmUgc2hhZG93Y2FzdGluZyBvZmZzZXRzICovXG5cblxuICB2YXIgT0NUQU5UUyA9IFtbLTEsIDAsIDAsIDFdLCBbMCwgLTEsIDEsIDBdLCBbMCwgLTEsIC0xLCAwXSwgWy0xLCAwLCAwLCAtMV0sIFsxLCAwLCAwLCAtMV0sIFswLCAxLCAtMSwgMF0sIFswLCAxLCAxLCAwXSwgWzEsIDAsIDAsIDFdXTtcbiAgLyoqXG4gICAqIEBjbGFzcyBSZWN1cnNpdmUgc2hhZG93Y2FzdGluZyBhbGdvcml0aG1cbiAgICogQ3VycmVudGx5IG9ubHkgc3VwcG9ydHMgNC84IHRvcG9sb2dpZXMsIG5vdCBoZXhhZ29uYWwuXG4gICAqIEJhc2VkIG9uIFBldGVyIEhhcmtpbnMnIGltcGxlbWVudGF0aW9uIG9mIEJqw7ZybiBCZXJnc3Ryw7ZtJ3MgYWxnb3JpdGhtIGRlc2NyaWJlZCBoZXJlOiBodHRwOi8vd3d3LnJvZ3VlYmFzaW4uY29tL2luZGV4LnBocD90aXRsZT1GT1ZfdXNpbmdfcmVjdXJzaXZlX3NoYWRvd2Nhc3RpbmdcbiAgICogQGF1Z21lbnRzIFJPVC5GT1ZcbiAgICovXG5cbiAgdmFyIFJlY3Vyc2l2ZVNoYWRvd2Nhc3RpbmcgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9GT1YzKSB7XG4gICAgX2luaGVyaXRzTG9vc2UoUmVjdXJzaXZlU2hhZG93Y2FzdGluZywgX0ZPVjMpO1xuXG4gICAgZnVuY3Rpb24gUmVjdXJzaXZlU2hhZG93Y2FzdGluZygpIHtcbiAgICAgIHJldHVybiBfRk9WMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuXG4gICAgdmFyIF9wcm90bzIwID0gUmVjdXJzaXZlU2hhZG93Y2FzdGluZy5wcm90b3R5cGU7XG5cbiAgICAvKipcbiAgICAgKiBDb21wdXRlIHZpc2liaWxpdHkgZm9yIGEgMzYwLWRlZ3JlZSBjaXJjbGVcbiAgICAgKiBAcGFyYW0ge2ludH0geFxuICAgICAqIEBwYXJhbSB7aW50fSB5XG4gICAgICogQHBhcmFtIHtpbnR9IFIgTWF4aW11bSB2aXNpYmlsaXR5IHJhZGl1c1xuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICovXG4gICAgX3Byb3RvMjAuY29tcHV0ZSA9IGZ1bmN0aW9uIGNvbXB1dGUoeCwgeSwgUiwgY2FsbGJhY2spIHtcbiAgICAgIC8vWW91IGNhbiBhbHdheXMgc2VlIHlvdXIgb3duIHRpbGVcbiAgICAgIGNhbGxiYWNrKHgsIHksIDAsIDEpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE9DVEFOVFMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyT2N0YW50KHgsIHksIE9DVEFOVFNbaV0sIFIsIGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcHV0ZSB2aXNpYmlsaXR5IGZvciBhIDE4MC1kZWdyZWUgYXJjXG4gICAgICogQHBhcmFtIHtpbnR9IHhcbiAgICAgKiBAcGFyYW0ge2ludH0geVxuICAgICAqIEBwYXJhbSB7aW50fSBSIE1heGltdW0gdmlzaWJpbGl0eSByYWRpdXNcbiAgICAgKiBAcGFyYW0ge2ludH0gZGlyIERpcmVjdGlvbiB0byBsb29rIGluIChleHByZXNzZWQgaW4gYSBST1QuRElSUyB2YWx1ZSk7XG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8yMC5jb21wdXRlMTgwID0gZnVuY3Rpb24gY29tcHV0ZTE4MCh4LCB5LCBSLCBkaXIsIGNhbGxiYWNrKSB7XG4gICAgICAvL1lvdSBjYW4gYWx3YXlzIHNlZSB5b3VyIG93biB0aWxlXG4gICAgICBjYWxsYmFjayh4LCB5LCAwLCAxKTtcbiAgICAgIHZhciBwcmV2aW91c09jdGFudCA9IChkaXIgLSAxICsgOCkgJSA4OyAvL05lZWQgdG8gcmV0cmlldmUgdGhlIHByZXZpb3VzIG9jdGFudCB0byByZW5kZXIgYSBmdWxsIDE4MCBkZWdyZWVzXG5cbiAgICAgIHZhciBuZXh0UHJldmlvdXNPY3RhbnQgPSAoZGlyIC0gMiArIDgpICUgODsgLy9OZWVkIHRvIHJldHJpZXZlIHRoZSBwcmV2aW91cyB0d28gb2N0YW50cyB0byByZW5kZXIgYSBmdWxsIDE4MCBkZWdyZWVzXG5cbiAgICAgIHZhciBuZXh0T2N0YW50ID0gKGRpciArIDEgKyA4KSAlIDg7IC8vTmVlZCB0byBncmFiIHRvIG5leHQgb2N0YW50IHRvIHJlbmRlciBhIGZ1bGwgMTgwIGRlZ3JlZXNcblxuICAgICAgdGhpcy5fcmVuZGVyT2N0YW50KHgsIHksIE9DVEFOVFNbbmV4dFByZXZpb3VzT2N0YW50XSwgUiwgY2FsbGJhY2spO1xuXG4gICAgICB0aGlzLl9yZW5kZXJPY3RhbnQoeCwgeSwgT0NUQU5UU1twcmV2aW91c09jdGFudF0sIFIsIGNhbGxiYWNrKTtcblxuICAgICAgdGhpcy5fcmVuZGVyT2N0YW50KHgsIHksIE9DVEFOVFNbZGlyXSwgUiwgY2FsbGJhY2spO1xuXG4gICAgICB0aGlzLl9yZW5kZXJPY3RhbnQoeCwgeSwgT0NUQU5UU1tuZXh0T2N0YW50XSwgUiwgY2FsbGJhY2spO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDb21wdXRlIHZpc2liaWxpdHkgZm9yIGEgOTAtZGVncmVlIGFyY1xuICAgICAqIEBwYXJhbSB7aW50fSB4XG4gICAgICogQHBhcmFtIHtpbnR9IHlcbiAgICAgKiBAcGFyYW0ge2ludH0gUiBNYXhpbXVtIHZpc2liaWxpdHkgcmFkaXVzXG4gICAgICogQHBhcmFtIHtpbnR9IGRpciBEaXJlY3Rpb24gdG8gbG9vayBpbiAoZXhwcmVzc2VkIGluIGEgUk9ULkRJUlMgdmFsdWUpO1xuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICovXG4gICAgX3Byb3RvMjAuY29tcHV0ZTkwID0gZnVuY3Rpb24gY29tcHV0ZTkwKHgsIHksIFIsIGRpciwgY2FsbGJhY2spIHtcbiAgICAgIC8vWW91IGNhbiBhbHdheXMgc2VlIHlvdXIgb3duIHRpbGVcbiAgICAgIGNhbGxiYWNrKHgsIHksIDAsIDEpO1xuICAgICAgdmFyIHByZXZpb3VzT2N0YW50ID0gKGRpciAtIDEgKyA4KSAlIDg7IC8vTmVlZCB0byByZXRyaWV2ZSB0aGUgcHJldmlvdXMgb2N0YW50IHRvIHJlbmRlciBhIGZ1bGwgOTAgZGVncmVlc1xuXG4gICAgICB0aGlzLl9yZW5kZXJPY3RhbnQoeCwgeSwgT0NUQU5UU1tkaXJdLCBSLCBjYWxsYmFjayk7XG5cbiAgICAgIHRoaXMuX3JlbmRlck9jdGFudCh4LCB5LCBPQ1RBTlRTW3ByZXZpb3VzT2N0YW50XSwgUiwgY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW5kZXIgb25lIG9jdGFudCAoNDUtZGVncmVlIGFyYykgb2YgdGhlIHZpZXdzaGVkXG4gICAgICogQHBhcmFtIHtpbnR9IHhcbiAgICAgKiBAcGFyYW0ge2ludH0geVxuICAgICAqIEBwYXJhbSB7aW50fSBvY3RhbnQgT2N0YW50IHRvIGJlIHJlbmRlcmVkXG4gICAgICogQHBhcmFtIHtpbnR9IFIgTWF4aW11bSB2aXNpYmlsaXR5IHJhZGl1c1xuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvMjAuX3JlbmRlck9jdGFudCA9IGZ1bmN0aW9uIF9yZW5kZXJPY3RhbnQoeCwgeSwgb2N0YW50LCBSLCBjYWxsYmFjaykge1xuICAgICAgLy9SYWRpdXMgaW5jcmVtZW50ZWQgYnkgMSB0byBwcm92aWRlIHNhbWUgY292ZXJhZ2UgYXJlYSBhcyBvdGhlciBzaGFkb3djYXN0aW5nIHJhZGl1c2VzXG4gICAgICB0aGlzLl9jYXN0VmlzaWJpbGl0eSh4LCB5LCAxLCAxLjAsIDAuMCwgUiArIDEsIG9jdGFudFswXSwgb2N0YW50WzFdLCBvY3RhbnRbMl0sIG9jdGFudFszXSwgY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBY3R1YWxseSBjYWxjdWxhdGVzIHRoZSB2aXNpYmlsaXR5XG4gICAgICogQHBhcmFtIHtpbnR9IHN0YXJ0WCBUaGUgc3RhcnRpbmcgWCBjb29yZGluYXRlXG4gICAgICogQHBhcmFtIHtpbnR9IHN0YXJ0WSBUaGUgc3RhcnRpbmcgWSBjb29yZGluYXRlXG4gICAgICogQHBhcmFtIHtpbnR9IHJvdyBUaGUgcm93IHRvIHJlbmRlclxuICAgICAqIEBwYXJhbSB7ZmxvYXR9IHZpc1Nsb3BlU3RhcnQgVGhlIHNsb3BlIHRvIHN0YXJ0IGF0XG4gICAgICogQHBhcmFtIHtmbG9hdH0gdmlzU2xvcGVFbmQgVGhlIHNsb3BlIHRvIGVuZCBhdFxuICAgICAqIEBwYXJhbSB7aW50fSByYWRpdXMgVGhlIHJhZGl1cyB0byByZWFjaCBvdXQgdG9cbiAgICAgKiBAcGFyYW0ge2ludH0geHhcbiAgICAgKiBAcGFyYW0ge2ludH0geHlcbiAgICAgKiBAcGFyYW0ge2ludH0geXhcbiAgICAgKiBAcGFyYW0ge2ludH0geXlcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdG8gdXNlIHdoZW4gd2UgaGl0IGEgYmxvY2sgdGhhdCBpcyB2aXNpYmxlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvMjAuX2Nhc3RWaXNpYmlsaXR5ID0gZnVuY3Rpb24gX2Nhc3RWaXNpYmlsaXR5KHN0YXJ0WCwgc3RhcnRZLCByb3csIHZpc1Nsb3BlU3RhcnQsIHZpc1Nsb3BlRW5kLCByYWRpdXMsIHh4LCB4eSwgeXgsIHl5LCBjYWxsYmFjaykge1xuICAgICAgaWYgKHZpc1Nsb3BlU3RhcnQgPCB2aXNTbG9wZUVuZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSByb3c7IGkgPD0gcmFkaXVzOyBpKyspIHtcbiAgICAgICAgdmFyIGR4ID0gLWkgLSAxO1xuICAgICAgICB2YXIgZHkgPSAtaTtcbiAgICAgICAgdmFyIGJsb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIG5ld1N0YXJ0ID0gMDsgLy8nUm93JyBjb3VsZCBiZSBjb2x1bW4sIG5hbWVzIGhlcmUgYXNzdW1lIG9jdGFudCAwIGFuZCB3b3VsZCBiZSBmbGlwcGVkIGZvciBoYWxmIHRoZSBvY3RhbnRzXG5cbiAgICAgICAgd2hpbGUgKGR4IDw9IDApIHtcbiAgICAgICAgICBkeCArPSAxOyAvL1RyYW5zbGF0ZSBmcm9tIHJlbGF0aXZlIGNvb3JkaW5hdGVzIHRvIG1hcCBjb29yZGluYXRlc1xuXG4gICAgICAgICAgdmFyIG1hcFggPSBzdGFydFggKyBkeCAqIHh4ICsgZHkgKiB4eTtcbiAgICAgICAgICB2YXIgbWFwWSA9IHN0YXJ0WSArIGR4ICogeXggKyBkeSAqIHl5OyAvL1JhbmdlIG9mIHRoZSByb3dcblxuICAgICAgICAgIHZhciBzbG9wZVN0YXJ0ID0gKGR4IC0gMC41KSAvIChkeSArIDAuNSk7XG4gICAgICAgICAgdmFyIHNsb3BlRW5kID0gKGR4ICsgMC41KSAvIChkeSAtIDAuNSk7IC8vSWdub3JlIGlmIG5vdCB5ZXQgYXQgbGVmdCBlZGdlIG9mIE9jdGFudFxuXG4gICAgICAgICAgaWYgKHNsb3BlRW5kID4gdmlzU2xvcGVTdGFydCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfSAvL0RvbmUgaWYgcGFzdCByaWdodCBlZGdlXG5cblxuICAgICAgICAgIGlmIChzbG9wZVN0YXJ0IDwgdmlzU2xvcGVFbmQpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH0gLy9JZiBpdCdzIGluIHJhbmdlLCBpdCdzIHZpc2libGVcblxuXG4gICAgICAgICAgaWYgKGR4ICogZHggKyBkeSAqIGR5IDwgcmFkaXVzICogcmFkaXVzKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhtYXBYLCBtYXBZLCBpLCAxKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWJsb2NrZWQpIHtcbiAgICAgICAgICAgIC8vSWYgdGlsZSBpcyBhIGJsb2NraW5nIHRpbGUsIGNhc3QgYXJvdW5kIGl0XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2xpZ2h0UGFzc2VzKG1hcFgsIG1hcFkpICYmIGkgPCByYWRpdXMpIHtcbiAgICAgICAgICAgICAgYmxvY2tlZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgdGhpcy5fY2FzdFZpc2liaWxpdHkoc3RhcnRYLCBzdGFydFksIGkgKyAxLCB2aXNTbG9wZVN0YXJ0LCBzbG9wZVN0YXJ0LCByYWRpdXMsIHh4LCB4eSwgeXgsIHl5LCBjYWxsYmFjayk7XG5cbiAgICAgICAgICAgICAgbmV3U3RhcnQgPSBzbG9wZUVuZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy9LZWVwIG5hcnJvd2luZyBpZiBzY2FubmluZyBhY3Jvc3MgYSBibG9ja1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9saWdodFBhc3NlcyhtYXBYLCBtYXBZKSkge1xuICAgICAgICAgICAgICBuZXdTdGFydCA9IHNsb3BlRW5kO1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH0gLy9CbG9jayBoYXMgZW5kZWRcblxuXG4gICAgICAgICAgICBibG9ja2VkID0gZmFsc2U7XG4gICAgICAgICAgICB2aXNTbG9wZVN0YXJ0ID0gbmV3U3RhcnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGJsb2NrZWQpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gUmVjdXJzaXZlU2hhZG93Y2FzdGluZztcbiAgfShGT1YpO1xuXG4gIHZhciBpbmRleCQxID0ge1xuICAgIERpc2NyZXRlU2hhZG93Y2FzdGluZzogRGlzY3JldGVTaGFkb3djYXN0aW5nLFxuICAgIFByZWNpc2VTaGFkb3djYXN0aW5nOiBQcmVjaXNlU2hhZG93Y2FzdGluZyxcbiAgICBSZWN1cnNpdmVTaGFkb3djYXN0aW5nOiBSZWN1cnNpdmVTaGFkb3djYXN0aW5nXG4gIH07XG5cbiAgdmFyIE1hcCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQGNsYXNzIEJhc2UgbWFwIGdlbmVyYXRvclxuICAgICAqIEBwYXJhbSB7aW50fSBbd2lkdGg9Uk9ULkRFRkFVTFRfV0lEVEhdXG4gICAgICogQHBhcmFtIHtpbnR9IFtoZWlnaHQ9Uk9ULkRFRkFVTFRfSEVJR0hUXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1hcCh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICBpZiAod2lkdGggPT09IHZvaWQgMCkge1xuICAgICAgICB3aWR0aCA9IERFRkFVTFRfV0lEVEg7XG4gICAgICB9XG5cbiAgICAgIGlmIChoZWlnaHQgPT09IHZvaWQgMCkge1xuICAgICAgICBoZWlnaHQgPSBERUZBVUxUX0hFSUdIVDtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fd2lkdGggPSB3aWR0aDtcbiAgICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcbiAgICB9XG5cbiAgICB2YXIgX3Byb3RvMjEgPSBNYXAucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvMjEuX2ZpbGxNYXAgPSBmdW5jdGlvbiBfZmlsbE1hcCh2YWx1ZSkge1xuICAgICAgdmFyIG1hcCA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3dpZHRoOyBpKyspIHtcbiAgICAgICAgbWFwLnB1c2goW10pO1xuXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5faGVpZ2h0OyBqKyspIHtcbiAgICAgICAgICBtYXBbaV0ucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG1hcDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE1hcDtcbiAgfSgpO1xuICAvKipcbiAgICogQGNsYXNzIFNpbXBsZSBlbXB0eSByZWN0YW5ndWxhciByb29tXG4gICAqIEBhdWdtZW50cyBST1QuTWFwXG4gICAqL1xuXG5cbiAgdmFyIEFyZW5hID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfTWFwKSB7XG4gICAgX2luaGVyaXRzTG9vc2UoQXJlbmEsIF9NYXApO1xuXG4gICAgZnVuY3Rpb24gQXJlbmEoKSB7XG4gICAgICByZXR1cm4gX01hcC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuXG4gICAgdmFyIF9wcm90bzIyID0gQXJlbmEucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvMjIuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGNhbGxiYWNrKSB7XG4gICAgICB2YXIgdyA9IHRoaXMuX3dpZHRoIC0gMTtcbiAgICAgIHZhciBoID0gdGhpcy5faGVpZ2h0IC0gMTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gdzsgaSsrKSB7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDw9IGg7IGorKykge1xuICAgICAgICAgIHZhciBlbXB0eSA9IGkgJiYgaiAmJiBpIDwgdyAmJiBqIDwgaDtcbiAgICAgICAgICBjYWxsYmFjayhpLCBqLCBlbXB0eSA/IDAgOiAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgcmV0dXJuIEFyZW5hO1xuICB9KE1hcCk7XG4gIC8qKlxuICAgKiBAY2xhc3MgRHVuZ2VvbiBtYXA6IGhhcyByb29tcyBhbmQgY29ycmlkb3JzXG4gICAqIEBhdWdtZW50cyBST1QuTWFwXG4gICAqL1xuXG5cbiAgdmFyIER1bmdlb24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9NYXAyKSB7XG4gICAgX2luaGVyaXRzTG9vc2UoRHVuZ2VvbiwgX01hcDIpO1xuXG4gICAgZnVuY3Rpb24gRHVuZ2Vvbih3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB2YXIgX3RoaXMxMDtcblxuICAgICAgX3RoaXMxMCA9IF9NYXAyLmNhbGwodGhpcywgd2lkdGgsIGhlaWdodCkgfHwgdGhpcztcbiAgICAgIF90aGlzMTAuX3Jvb21zID0gW107XG4gICAgICBfdGhpczEwLl9jb3JyaWRvcnMgPSBbXTtcbiAgICAgIHJldHVybiBfdGhpczEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIGdlbmVyYXRlZCByb29tc1xuICAgICAqIEByZXR1cm5zIHtST1QuTWFwLkZlYXR1cmUuUm9vbVtdfVxuICAgICAqL1xuXG5cbiAgICB2YXIgX3Byb3RvMjMgPSBEdW5nZW9uLnByb3RvdHlwZTtcblxuICAgIF9wcm90bzIzLmdldFJvb21zID0gZnVuY3Rpb24gZ2V0Um9vbXMoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcm9vbXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgZ2VuZXJhdGVkIGNvcnJpZG9yc1xuICAgICAqIEByZXR1cm5zIHtST1QuTWFwLkZlYXR1cmUuQ29ycmlkb3JbXX1cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8yMy5nZXRDb3JyaWRvcnMgPSBmdW5jdGlvbiBnZXRDb3JyaWRvcnMoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY29ycmlkb3JzO1xuICAgIH07XG5cbiAgICByZXR1cm4gRHVuZ2VvbjtcbiAgfShNYXApO1xuICAvKipcbiAgICogQGNsYXNzIER1bmdlb24gZmVhdHVyZTsgaGFzIG93biAuY3JlYXRlKCkgbWV0aG9kXG4gICAqL1xuXG5cbiAgdmFyIEZlYXR1cmUgPSBmdW5jdGlvbiBGZWF0dXJlKCkge307XG4gIC8qKlxuICAgKiBAY2xhc3MgUm9vbVxuICAgKiBAYXVnbWVudHMgUk9ULk1hcC5GZWF0dXJlXG4gICAqIEBwYXJhbSB7aW50fSB4MVxuICAgKiBAcGFyYW0ge2ludH0geTFcbiAgICogQHBhcmFtIHtpbnR9IHgyXG4gICAqIEBwYXJhbSB7aW50fSB5MlxuICAgKiBAcGFyYW0ge2ludH0gW2Rvb3JYXVxuICAgKiBAcGFyYW0ge2ludH0gW2Rvb3JZXVxuICAgKi9cblxuXG4gIHZhciBSb29tID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfRmVhdHVyZSkge1xuICAgIF9pbmhlcml0c0xvb3NlKFJvb20sIF9GZWF0dXJlKTtcblxuICAgIGZ1bmN0aW9uIFJvb20oeDEsIHkxLCB4MiwgeTIsIGRvb3JYLCBkb29yWSkge1xuICAgICAgdmFyIF90aGlzMTE7XG5cbiAgICAgIF90aGlzMTEgPSBfRmVhdHVyZS5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICBfdGhpczExLl94MSA9IHgxO1xuICAgICAgX3RoaXMxMS5feTEgPSB5MTtcbiAgICAgIF90aGlzMTEuX3gyID0geDI7XG4gICAgICBfdGhpczExLl95MiA9IHkyO1xuICAgICAgX3RoaXMxMS5fZG9vcnMgPSB7fTtcblxuICAgICAgaWYgKGRvb3JYICE9PSB1bmRlZmluZWQgJiYgZG9vclkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBfdGhpczExLmFkZERvb3IoZG9vclgsIGRvb3JZKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF90aGlzMTE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUm9vbSBvZiByYW5kb20gc2l6ZSwgd2l0aCBhIGdpdmVuIGRvb3JzIGFuZCBkaXJlY3Rpb25cbiAgICAgKi9cbiAgICBSb29tLmNyZWF0ZVJhbmRvbUF0ID0gZnVuY3Rpb24gY3JlYXRlUmFuZG9tQXQoeCwgeSwgZHgsIGR5LCBvcHRpb25zKSB7XG4gICAgICB2YXIgbWluID0gb3B0aW9ucy5yb29tV2lkdGhbMF07XG4gICAgICB2YXIgbWF4ID0gb3B0aW9ucy5yb29tV2lkdGhbMV07XG4gICAgICB2YXIgd2lkdGggPSBSTkckMS5nZXRVbmlmb3JtSW50KG1pbiwgbWF4KTtcbiAgICAgIG1pbiA9IG9wdGlvbnMucm9vbUhlaWdodFswXTtcbiAgICAgIG1heCA9IG9wdGlvbnMucm9vbUhlaWdodFsxXTtcbiAgICAgIHZhciBoZWlnaHQgPSBSTkckMS5nZXRVbmlmb3JtSW50KG1pbiwgbWF4KTtcblxuICAgICAgaWYgKGR4ID09IDEpIHtcbiAgICAgICAgLyogdG8gdGhlIHJpZ2h0ICovXG4gICAgICAgIHZhciB5MiA9IHkgLSBNYXRoLmZsb29yKFJORyQxLmdldFVuaWZvcm0oKSAqIGhlaWdodCk7XG4gICAgICAgIHJldHVybiBuZXcgdGhpcyh4ICsgMSwgeTIsIHggKyB3aWR0aCwgeTIgKyBoZWlnaHQgLSAxLCB4LCB5KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGR4ID09IC0xKSB7XG4gICAgICAgIC8qIHRvIHRoZSBsZWZ0ICovXG4gICAgICAgIHZhciBfeSA9IHkgLSBNYXRoLmZsb29yKFJORyQxLmdldFVuaWZvcm0oKSAqIGhlaWdodCk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzKHggLSB3aWR0aCwgX3ksIHggLSAxLCBfeSArIGhlaWdodCAtIDEsIHgsIHkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZHkgPT0gMSkge1xuICAgICAgICAvKiB0byB0aGUgYm90dG9tICovXG4gICAgICAgIHZhciB4MiA9IHggLSBNYXRoLmZsb29yKFJORyQxLmdldFVuaWZvcm0oKSAqIHdpZHRoKTtcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzKHgyLCB5ICsgMSwgeDIgKyB3aWR0aCAtIDEsIHkgKyBoZWlnaHQsIHgsIHkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZHkgPT0gLTEpIHtcbiAgICAgICAgLyogdG8gdGhlIHRvcCAqL1xuICAgICAgICB2YXIgX3ggPSB4IC0gTWF0aC5mbG9vcihSTkckMS5nZXRVbmlmb3JtKCkgKiB3aWR0aCk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzKF94LCB5IC0gaGVpZ2h0LCBfeCArIHdpZHRoIC0gMSwgeSAtIDEsIHgsIHkpO1xuICAgICAgfVxuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJkeCBvciBkeSBtdXN0IGJlIDEgb3IgLTFcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJvb20gb2YgcmFuZG9tIHNpemUsIHBvc2l0aW9uZWQgYXJvdW5kIGNlbnRlciBjb29yZHNcbiAgICAgKi9cbiAgICA7XG5cbiAgICBSb29tLmNyZWF0ZVJhbmRvbUNlbnRlciA9IGZ1bmN0aW9uIGNyZWF0ZVJhbmRvbUNlbnRlcihjeCwgY3ksIG9wdGlvbnMpIHtcbiAgICAgIHZhciBtaW4gPSBvcHRpb25zLnJvb21XaWR0aFswXTtcbiAgICAgIHZhciBtYXggPSBvcHRpb25zLnJvb21XaWR0aFsxXTtcbiAgICAgIHZhciB3aWR0aCA9IFJORyQxLmdldFVuaWZvcm1JbnQobWluLCBtYXgpO1xuICAgICAgbWluID0gb3B0aW9ucy5yb29tSGVpZ2h0WzBdO1xuICAgICAgbWF4ID0gb3B0aW9ucy5yb29tSGVpZ2h0WzFdO1xuICAgICAgdmFyIGhlaWdodCA9IFJORyQxLmdldFVuaWZvcm1JbnQobWluLCBtYXgpO1xuICAgICAgdmFyIHgxID0gY3ggLSBNYXRoLmZsb29yKFJORyQxLmdldFVuaWZvcm0oKSAqIHdpZHRoKTtcbiAgICAgIHZhciB5MSA9IGN5IC0gTWF0aC5mbG9vcihSTkckMS5nZXRVbmlmb3JtKCkgKiBoZWlnaHQpO1xuICAgICAgdmFyIHgyID0geDEgKyB3aWR0aCAtIDE7XG4gICAgICB2YXIgeTIgPSB5MSArIGhlaWdodCAtIDE7XG4gICAgICByZXR1cm4gbmV3IHRoaXMoeDEsIHkxLCB4MiwgeTIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSb29tIG9mIHJhbmRvbSBzaXplIHdpdGhpbiBhIGdpdmVuIGRpbWVuc2lvbnNcbiAgICAgKi9cbiAgICA7XG5cbiAgICBSb29tLmNyZWF0ZVJhbmRvbSA9IGZ1bmN0aW9uIGNyZWF0ZVJhbmRvbShhdmFpbFdpZHRoLCBhdmFpbEhlaWdodCwgb3B0aW9ucykge1xuICAgICAgdmFyIG1pbiA9IG9wdGlvbnMucm9vbVdpZHRoWzBdO1xuICAgICAgdmFyIG1heCA9IG9wdGlvbnMucm9vbVdpZHRoWzFdO1xuICAgICAgdmFyIHdpZHRoID0gUk5HJDEuZ2V0VW5pZm9ybUludChtaW4sIG1heCk7XG4gICAgICBtaW4gPSBvcHRpb25zLnJvb21IZWlnaHRbMF07XG4gICAgICBtYXggPSBvcHRpb25zLnJvb21IZWlnaHRbMV07XG4gICAgICB2YXIgaGVpZ2h0ID0gUk5HJDEuZ2V0VW5pZm9ybUludChtaW4sIG1heCk7XG4gICAgICB2YXIgbGVmdCA9IGF2YWlsV2lkdGggLSB3aWR0aCAtIDE7XG4gICAgICB2YXIgdG9wID0gYXZhaWxIZWlnaHQgLSBoZWlnaHQgLSAxO1xuICAgICAgdmFyIHgxID0gMSArIE1hdGguZmxvb3IoUk5HJDEuZ2V0VW5pZm9ybSgpICogbGVmdCk7XG4gICAgICB2YXIgeTEgPSAxICsgTWF0aC5mbG9vcihSTkckMS5nZXRVbmlmb3JtKCkgKiB0b3ApO1xuICAgICAgdmFyIHgyID0geDEgKyB3aWR0aCAtIDE7XG4gICAgICB2YXIgeTIgPSB5MSArIGhlaWdodCAtIDE7XG4gICAgICByZXR1cm4gbmV3IHRoaXMoeDEsIHkxLCB4MiwgeTIpO1xuICAgIH07XG5cbiAgICB2YXIgX3Byb3RvMjQgPSBSb29tLnByb3RvdHlwZTtcblxuICAgIF9wcm90bzI0LmFkZERvb3IgPSBmdW5jdGlvbiBhZGREb29yKHgsIHkpIHtcbiAgICAgIHRoaXMuX2Rvb3JzW3ggKyBcIixcIiArIHldID0gMTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90bzI0LmdldERvb3JzID0gZnVuY3Rpb24gZ2V0RG9vcnMoY2IpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLl9kb29ycykge1xuICAgICAgICB2YXIgcGFydHMgPSBrZXkuc3BsaXQoXCIsXCIpO1xuICAgICAgICBjYihwYXJzZUludChwYXJ0c1swXSksIHBhcnNlSW50KHBhcnRzWzFdKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBfcHJvdG8yNC5jbGVhckRvb3JzID0gZnVuY3Rpb24gY2xlYXJEb29ycygpIHtcbiAgICAgIHRoaXMuX2Rvb3JzID0ge307XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgX3Byb3RvMjQuYWRkRG9vcnMgPSBmdW5jdGlvbiBhZGREb29ycyhpc1dhbGxDYWxsYmFjaykge1xuICAgICAgdmFyIGxlZnQgPSB0aGlzLl94MSAtIDE7XG4gICAgICB2YXIgcmlnaHQgPSB0aGlzLl94MiArIDE7XG4gICAgICB2YXIgdG9wID0gdGhpcy5feTEgLSAxO1xuICAgICAgdmFyIGJvdHRvbSA9IHRoaXMuX3kyICsgMTtcblxuICAgICAgZm9yICh2YXIgeCA9IGxlZnQ7IHggPD0gcmlnaHQ7IHgrKykge1xuICAgICAgICBmb3IgKHZhciB5ID0gdG9wOyB5IDw9IGJvdHRvbTsgeSsrKSB7XG4gICAgICAgICAgaWYgKHggIT0gbGVmdCAmJiB4ICE9IHJpZ2h0ICYmIHkgIT0gdG9wICYmIHkgIT0gYm90dG9tKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoaXNXYWxsQ2FsbGJhY2soeCwgeSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuYWRkRG9vcih4LCB5KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgX3Byb3RvMjQuZGVidWcgPSBmdW5jdGlvbiBkZWJ1ZygpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwicm9vbVwiLCB0aGlzLl94MSwgdGhpcy5feTEsIHRoaXMuX3gyLCB0aGlzLl95Mik7XG4gICAgfTtcblxuICAgIF9wcm90bzI0LmlzVmFsaWQgPSBmdW5jdGlvbiBpc1ZhbGlkKGlzV2FsbENhbGxiYWNrLCBjYW5CZUR1Z0NhbGxiYWNrKSB7XG4gICAgICB2YXIgbGVmdCA9IHRoaXMuX3gxIC0gMTtcbiAgICAgIHZhciByaWdodCA9IHRoaXMuX3gyICsgMTtcbiAgICAgIHZhciB0b3AgPSB0aGlzLl95MSAtIDE7XG4gICAgICB2YXIgYm90dG9tID0gdGhpcy5feTIgKyAxO1xuXG4gICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8PSByaWdodDsgeCsrKSB7XG4gICAgICAgIGZvciAodmFyIHkgPSB0b3A7IHkgPD0gYm90dG9tOyB5KyspIHtcbiAgICAgICAgICBpZiAoeCA9PSBsZWZ0IHx8IHggPT0gcmlnaHQgfHwgeSA9PSB0b3AgfHwgeSA9PSBib3R0b20pIHtcbiAgICAgICAgICAgIGlmICghaXNXYWxsQ2FsbGJhY2soeCwgeSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoIWNhbkJlRHVnQ2FsbGJhY2soeCwgeSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gZGlnQ2FsbGJhY2sgRGlnIGNhbGxiYWNrIHdpdGggYSBzaWduYXR1cmUgKHgsIHksIHZhbHVlKS4gVmFsdWVzOiAwID0gZW1wdHksIDEgPSB3YWxsLCAyID0gZG9vci4gTXVsdGlwbGUgZG9vcnMgYXJlIGFsbG93ZWQuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvMjQuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGRpZ0NhbGxiYWNrKSB7XG4gICAgICB2YXIgbGVmdCA9IHRoaXMuX3gxIC0gMTtcbiAgICAgIHZhciByaWdodCA9IHRoaXMuX3gyICsgMTtcbiAgICAgIHZhciB0b3AgPSB0aGlzLl95MSAtIDE7XG4gICAgICB2YXIgYm90dG9tID0gdGhpcy5feTIgKyAxO1xuICAgICAgdmFyIHZhbHVlID0gMDtcblxuICAgICAgZm9yICh2YXIgeCA9IGxlZnQ7IHggPD0gcmlnaHQ7IHgrKykge1xuICAgICAgICBmb3IgKHZhciB5ID0gdG9wOyB5IDw9IGJvdHRvbTsgeSsrKSB7XG4gICAgICAgICAgaWYgKHggKyBcIixcIiArIHkgaW4gdGhpcy5fZG9vcnMpIHtcbiAgICAgICAgICAgIHZhbHVlID0gMjtcbiAgICAgICAgICB9IGVsc2UgaWYgKHggPT0gbGVmdCB8fCB4ID09IHJpZ2h0IHx8IHkgPT0gdG9wIHx8IHkgPT0gYm90dG9tKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IDE7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhbHVlID0gMDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkaWdDYWxsYmFjayh4LCB5LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvMjQuZ2V0Q2VudGVyID0gZnVuY3Rpb24gZ2V0Q2VudGVyKCkge1xuICAgICAgcmV0dXJuIFtNYXRoLnJvdW5kKCh0aGlzLl94MSArIHRoaXMuX3gyKSAvIDIpLCBNYXRoLnJvdW5kKCh0aGlzLl95MSArIHRoaXMuX3kyKSAvIDIpXTtcbiAgICB9O1xuXG4gICAgX3Byb3RvMjQuZ2V0TGVmdCA9IGZ1bmN0aW9uIGdldExlZnQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5feDE7XG4gICAgfTtcblxuICAgIF9wcm90bzI0LmdldFJpZ2h0ID0gZnVuY3Rpb24gZ2V0UmlnaHQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5feDI7XG4gICAgfTtcblxuICAgIF9wcm90bzI0LmdldFRvcCA9IGZ1bmN0aW9uIGdldFRvcCgpIHtcbiAgICAgIHJldHVybiB0aGlzLl95MTtcbiAgICB9O1xuXG4gICAgX3Byb3RvMjQuZ2V0Qm90dG9tID0gZnVuY3Rpb24gZ2V0Qm90dG9tKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3kyO1xuICAgIH07XG5cbiAgICByZXR1cm4gUm9vbTtcbiAgfShGZWF0dXJlKTtcbiAgLyoqXG4gICAqIEBjbGFzcyBDb3JyaWRvclxuICAgKiBAYXVnbWVudHMgUk9ULk1hcC5GZWF0dXJlXG4gICAqIEBwYXJhbSB7aW50fSBzdGFydFhcbiAgICogQHBhcmFtIHtpbnR9IHN0YXJ0WVxuICAgKiBAcGFyYW0ge2ludH0gZW5kWFxuICAgKiBAcGFyYW0ge2ludH0gZW5kWVxuICAgKi9cblxuXG4gIHZhciBDb3JyaWRvciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0ZlYXR1cmUyKSB7XG4gICAgX2luaGVyaXRzTG9vc2UoQ29ycmlkb3IsIF9GZWF0dXJlMik7XG5cbiAgICBmdW5jdGlvbiBDb3JyaWRvcihzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSkge1xuICAgICAgdmFyIF90aGlzMTI7XG5cbiAgICAgIF90aGlzMTIgPSBfRmVhdHVyZTIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgX3RoaXMxMi5fc3RhcnRYID0gc3RhcnRYO1xuICAgICAgX3RoaXMxMi5fc3RhcnRZID0gc3RhcnRZO1xuICAgICAgX3RoaXMxMi5fZW5kWCA9IGVuZFg7XG4gICAgICBfdGhpczEyLl9lbmRZID0gZW5kWTtcbiAgICAgIF90aGlzMTIuX2VuZHNXaXRoQVdhbGwgPSB0cnVlO1xuICAgICAgcmV0dXJuIF90aGlzMTI7XG4gICAgfVxuXG4gICAgQ29ycmlkb3IuY3JlYXRlUmFuZG9tQXQgPSBmdW5jdGlvbiBjcmVhdGVSYW5kb21BdCh4LCB5LCBkeCwgZHksIG9wdGlvbnMpIHtcbiAgICAgIHZhciBtaW4gPSBvcHRpb25zLmNvcnJpZG9yTGVuZ3RoWzBdO1xuICAgICAgdmFyIG1heCA9IG9wdGlvbnMuY29ycmlkb3JMZW5ndGhbMV07XG4gICAgICB2YXIgbGVuZ3RoID0gUk5HJDEuZ2V0VW5pZm9ybUludChtaW4sIG1heCk7XG4gICAgICByZXR1cm4gbmV3IHRoaXMoeCwgeSwgeCArIGR4ICogbGVuZ3RoLCB5ICsgZHkgKiBsZW5ndGgpO1xuICAgIH07XG5cbiAgICB2YXIgX3Byb3RvMjUgPSBDb3JyaWRvci5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8yNS5kZWJ1ZyA9IGZ1bmN0aW9uIGRlYnVnKCkge1xuICAgICAgY29uc29sZS5sb2coXCJjb3JyaWRvclwiLCB0aGlzLl9zdGFydFgsIHRoaXMuX3N0YXJ0WSwgdGhpcy5fZW5kWCwgdGhpcy5fZW5kWSk7XG4gICAgfTtcblxuICAgIF9wcm90bzI1LmlzVmFsaWQgPSBmdW5jdGlvbiBpc1ZhbGlkKGlzV2FsbENhbGxiYWNrLCBjYW5CZUR1Z0NhbGxiYWNrKSB7XG4gICAgICB2YXIgc3ggPSB0aGlzLl9zdGFydFg7XG4gICAgICB2YXIgc3kgPSB0aGlzLl9zdGFydFk7XG4gICAgICB2YXIgZHggPSB0aGlzLl9lbmRYIC0gc3g7XG4gICAgICB2YXIgZHkgPSB0aGlzLl9lbmRZIC0gc3k7XG4gICAgICB2YXIgbGVuZ3RoID0gMSArIE1hdGgubWF4KE1hdGguYWJzKGR4KSwgTWF0aC5hYnMoZHkpKTtcblxuICAgICAgaWYgKGR4KSB7XG4gICAgICAgIGR4ID0gZHggLyBNYXRoLmFicyhkeCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkeSkge1xuICAgICAgICBkeSA9IGR5IC8gTWF0aC5hYnMoZHkpO1xuICAgICAgfVxuXG4gICAgICB2YXIgbnggPSBkeTtcbiAgICAgIHZhciBueSA9IC1keDtcbiAgICAgIHZhciBvayA9IHRydWU7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHggPSBzeCArIGkgKiBkeDtcbiAgICAgICAgdmFyIHkgPSBzeSArIGkgKiBkeTtcblxuICAgICAgICBpZiAoIWNhbkJlRHVnQ2FsbGJhY2soeCwgeSkpIHtcbiAgICAgICAgICBvayA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc1dhbGxDYWxsYmFjayh4ICsgbngsIHkgKyBueSkpIHtcbiAgICAgICAgICBvayA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc1dhbGxDYWxsYmFjayh4IC0gbngsIHkgLSBueSkpIHtcbiAgICAgICAgICBvayA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFvaykge1xuICAgICAgICAgIGxlbmd0aCA9IGk7XG4gICAgICAgICAgdGhpcy5fZW5kWCA9IHggLSBkeDtcbiAgICAgICAgICB0aGlzLl9lbmRZID0geSAtIGR5O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIElmIHRoZSBsZW5ndGggZGVnZW5lcmF0ZWQsIHRoaXMgY29ycmlkb3IgbWlnaHQgYmUgaW52YWxpZFxuICAgICAgICovXG5cbiAgICAgIC8qIG5vdCBzdXBwb3J0ZWQgKi9cblxuXG4gICAgICBpZiAobGVuZ3RoID09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgLyogbGVuZ3RoIDEgYWxsb3dlZCBvbmx5IGlmIHRoZSBuZXh0IHNwYWNlIGlzIGVtcHR5ICovXG5cblxuICAgICAgaWYgKGxlbmd0aCA9PSAxICYmIGlzV2FsbENhbGxiYWNrKHRoaXMuX2VuZFggKyBkeCwgdGhpcy5fZW5kWSArIGR5KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFdlIGRvIG5vdCB3YW50IHRoZSBjb3JyaWRvciB0byBjcmFzaCBpbnRvIGEgY29ybmVyIG9mIGEgcm9vbTtcbiAgICAgICAqIGlmIGFueSBvZiB0aGUgZW5kaW5nIGNvcm5lcnMgaXMgZW1wdHksIHRoZSBOKzF0aCBjZWxsIG9mIHRoaXMgY29ycmlkb3IgbXVzdCBiZSBlbXB0eSB0b28uXG4gICAgICAgKlxuICAgICAgICogU2l0dWF0aW9uOlxuICAgICAgICogIyMjIyMjIzFcbiAgICAgICAqIC4uLi4uLi4/XG4gICAgICAgKiAjIyMjIyMjMlxuICAgICAgICpcbiAgICAgICAqIFRoZSBjb3JyaWRvciB3YXMgZHVnIGZyb20gbGVmdCB0byByaWdodC5cbiAgICAgICAqIDEsIDIgLSBwcm9ibGVtYXRpYyBjb3JuZXJzLCA/ID0gTisxdGggY2VsbCAobm90IGR1ZylcbiAgICAgICAqL1xuXG5cbiAgICAgIHZhciBmaXJzdENvcm5lckJhZCA9ICFpc1dhbGxDYWxsYmFjayh0aGlzLl9lbmRYICsgZHggKyBueCwgdGhpcy5fZW5kWSArIGR5ICsgbnkpO1xuICAgICAgdmFyIHNlY29uZENvcm5lckJhZCA9ICFpc1dhbGxDYWxsYmFjayh0aGlzLl9lbmRYICsgZHggLSBueCwgdGhpcy5fZW5kWSArIGR5IC0gbnkpO1xuICAgICAgdGhpcy5fZW5kc1dpdGhBV2FsbCA9IGlzV2FsbENhbGxiYWNrKHRoaXMuX2VuZFggKyBkeCwgdGhpcy5fZW5kWSArIGR5KTtcblxuICAgICAgaWYgKChmaXJzdENvcm5lckJhZCB8fCBzZWNvbmRDb3JuZXJCYWQpICYmIHRoaXMuX2VuZHNXaXRoQVdhbGwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gZGlnQ2FsbGJhY2sgRGlnIGNhbGxiYWNrIHdpdGggYSBzaWduYXR1cmUgKHgsIHksIHZhbHVlKS4gVmFsdWVzOiAwID0gZW1wdHkuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvMjUuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGRpZ0NhbGxiYWNrKSB7XG4gICAgICB2YXIgc3ggPSB0aGlzLl9zdGFydFg7XG4gICAgICB2YXIgc3kgPSB0aGlzLl9zdGFydFk7XG4gICAgICB2YXIgZHggPSB0aGlzLl9lbmRYIC0gc3g7XG4gICAgICB2YXIgZHkgPSB0aGlzLl9lbmRZIC0gc3k7XG4gICAgICB2YXIgbGVuZ3RoID0gMSArIE1hdGgubWF4KE1hdGguYWJzKGR4KSwgTWF0aC5hYnMoZHkpKTtcblxuICAgICAgaWYgKGR4KSB7XG4gICAgICAgIGR4ID0gZHggLyBNYXRoLmFicyhkeCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkeSkge1xuICAgICAgICBkeSA9IGR5IC8gTWF0aC5hYnMoZHkpO1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB4ID0gc3ggKyBpICogZHg7XG4gICAgICAgIHZhciB5ID0gc3kgKyBpICogZHk7XG4gICAgICAgIGRpZ0NhbGxiYWNrKHgsIHksIDApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgX3Byb3RvMjUuY3JlYXRlUHJpb3JpdHlXYWxscyA9IGZ1bmN0aW9uIGNyZWF0ZVByaW9yaXR5V2FsbHMocHJpb3JpdHlXYWxsQ2FsbGJhY2spIHtcbiAgICAgIGlmICghdGhpcy5fZW5kc1dpdGhBV2FsbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBzeCA9IHRoaXMuX3N0YXJ0WDtcbiAgICAgIHZhciBzeSA9IHRoaXMuX3N0YXJ0WTtcbiAgICAgIHZhciBkeCA9IHRoaXMuX2VuZFggLSBzeDtcbiAgICAgIHZhciBkeSA9IHRoaXMuX2VuZFkgLSBzeTtcblxuICAgICAgaWYgKGR4KSB7XG4gICAgICAgIGR4ID0gZHggLyBNYXRoLmFicyhkeCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkeSkge1xuICAgICAgICBkeSA9IGR5IC8gTWF0aC5hYnMoZHkpO1xuICAgICAgfVxuXG4gICAgICB2YXIgbnggPSBkeTtcbiAgICAgIHZhciBueSA9IC1keDtcbiAgICAgIHByaW9yaXR5V2FsbENhbGxiYWNrKHRoaXMuX2VuZFggKyBkeCwgdGhpcy5fZW5kWSArIGR5KTtcbiAgICAgIHByaW9yaXR5V2FsbENhbGxiYWNrKHRoaXMuX2VuZFggKyBueCwgdGhpcy5fZW5kWSArIG55KTtcbiAgICAgIHByaW9yaXR5V2FsbENhbGxiYWNrKHRoaXMuX2VuZFggLSBueCwgdGhpcy5fZW5kWSAtIG55KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENvcnJpZG9yO1xuICB9KEZlYXR1cmUpO1xuICAvKipcbiAgICogQGNsYXNzIER1bmdlb24gZ2VuZXJhdG9yIHdoaWNoIHRyaWVzIHRvIGZpbGwgdGhlIHNwYWNlIGV2ZW5seS4gR2VuZXJhdGVzIGluZGVwZW5kZW50IHJvb21zIGFuZCB0cmllcyB0byBjb25uZWN0IHRoZW0uXG4gICAqIEBhdWdtZW50cyBST1QuTWFwLkR1bmdlb25cbiAgICovXG5cblxuICB2YXIgVW5pZm9ybSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0R1bmdlb24pIHtcbiAgICBfaW5oZXJpdHNMb29zZShVbmlmb3JtLCBfRHVuZ2Vvbik7XG5cbiAgICBmdW5jdGlvbiBVbmlmb3JtKHdpZHRoLCBoZWlnaHQsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBfdGhpczEzO1xuXG4gICAgICBfdGhpczEzID0gX0R1bmdlb24uY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzO1xuICAgICAgX3RoaXMxMy5fb3B0aW9ucyA9IHtcbiAgICAgICAgcm9vbVdpZHRoOiBbMywgOV0sXG4gICAgICAgIHJvb21IZWlnaHQ6IFszLCA1XSxcbiAgICAgICAgcm9vbUR1Z1BlcmNlbnRhZ2U6IDAuMSxcbiAgICAgICAgdGltZUxpbWl0OiAxMDAwXG4gICAgICAgIC8qIHdlIHN0b3AgYWZ0ZXIgdGhpcyBtdWNoIHRpbWUgaGFzIHBhc3NlZCAobXNlYykgKi9cblxuICAgICAgfTtcbiAgICAgIE9iamVjdC5hc3NpZ24oX3RoaXMxMy5fb3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICBfdGhpczEzLl9tYXAgPSBbXTtcbiAgICAgIF90aGlzMTMuX2R1ZyA9IDA7XG4gICAgICBfdGhpczEzLl9yb29tQXR0ZW1wdHMgPSAyMDtcbiAgICAgIC8qIG5ldyByb29tIGlzIGNyZWF0ZWQgTi10aW1lcyB1bnRpbCBpcyBjb25zaWRlcmVkIGFzIGltcG9zc2libGUgdG8gZ2VuZXJhdGUgKi9cblxuICAgICAgX3RoaXMxMy5fY29ycmlkb3JBdHRlbXB0cyA9IDIwO1xuICAgICAgLyogY29ycmlkb3JzIGFyZSB0cmllZCBOLXRpbWVzIHVudGlsIHRoZSBsZXZlbCBpcyBjb25zaWRlcmVkIGFzIGltcG9zc2libGUgdG8gY29ubmVjdCAqL1xuXG4gICAgICBfdGhpczEzLl9jb25uZWN0ZWQgPSBbXTtcbiAgICAgIC8qIGxpc3Qgb2YgYWxyZWFkeSBjb25uZWN0ZWQgcm9vbXMgKi9cblxuICAgICAgX3RoaXMxMy5fdW5jb25uZWN0ZWQgPSBbXTtcbiAgICAgIC8qIGxpc3Qgb2YgcmVtYWluaW5nIHVuY29ubmVjdGVkIHJvb21zICovXG5cbiAgICAgIF90aGlzMTMuX2RpZ0NhbGxiYWNrID0gX3RoaXMxMy5fZGlnQ2FsbGJhY2suYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzMTMpKTtcbiAgICAgIF90aGlzMTMuX2NhbkJlRHVnQ2FsbGJhY2sgPSBfdGhpczEzLl9jYW5CZUR1Z0NhbGxiYWNrLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczEzKSk7XG4gICAgICBfdGhpczEzLl9pc1dhbGxDYWxsYmFjayA9IF90aGlzMTMuX2lzV2FsbENhbGxiYWNrLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczEzKSk7XG4gICAgICByZXR1cm4gX3RoaXMxMztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbWFwLiBJZiB0aGUgdGltZSBsaW1pdCBoYXMgYmVlbiBoaXQsIHJldHVybnMgbnVsbC5cbiAgICAgKiBAc2VlIFJPVC5NYXAjY3JlYXRlXG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8yNiA9IFVuaWZvcm0ucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvMjYuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGNhbGxiYWNrKSB7XG4gICAgICB2YXIgdDEgPSBEYXRlLm5vdygpO1xuXG4gICAgICB3aGlsZSAoMSkge1xuICAgICAgICB2YXIgdDIgPSBEYXRlLm5vdygpO1xuXG4gICAgICAgIGlmICh0MiAtIHQxID4gdGhpcy5fb3B0aW9ucy50aW1lTGltaXQpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvKiB0aW1lIGxpbWl0ISAqL1xuXG5cbiAgICAgICAgdGhpcy5fbWFwID0gdGhpcy5fZmlsbE1hcCgxKTtcbiAgICAgICAgdGhpcy5fZHVnID0gMDtcbiAgICAgICAgdGhpcy5fcm9vbXMgPSBbXTtcbiAgICAgICAgdGhpcy5fdW5jb25uZWN0ZWQgPSBbXTtcblxuICAgICAgICB0aGlzLl9nZW5lcmF0ZVJvb21zKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuX3Jvb21zLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9nZW5lcmF0ZUNvcnJpZG9ycygpKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fd2lkdGg7IGkrKykge1xuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5faGVpZ2h0OyBqKyspIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGksIGosIHRoaXMuX21hcFtpXVtqXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSBzdWl0YWJsZSBhbW91bnQgb2Ygcm9vbXNcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8yNi5fZ2VuZXJhdGVSb29tcyA9IGZ1bmN0aW9uIF9nZW5lcmF0ZVJvb21zKCkge1xuICAgICAgdmFyIHcgPSB0aGlzLl93aWR0aCAtIDI7XG4gICAgICB2YXIgaCA9IHRoaXMuX2hlaWdodCAtIDI7XG4gICAgICB2YXIgcm9vbTtcblxuICAgICAgZG8ge1xuICAgICAgICByb29tID0gdGhpcy5fZ2VuZXJhdGVSb29tKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuX2R1ZyAvICh3ICogaCkgPiB0aGlzLl9vcHRpb25zLnJvb21EdWdQZXJjZW50YWdlKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLyogYWNoaWV2ZWQgcmVxdWVzdGVkIGFtb3VudCBvZiBmcmVlIHNwYWNlICovXG5cbiAgICAgIH0gd2hpbGUgKHJvb20pO1xuICAgICAgLyogZWl0aGVyIGVub3VnaCByb29tcywgb3Igbm90IGFibGUgdG8gZ2VuZXJhdGUgbW9yZSBvZiB0aGVtIDopICovXG5cbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJ5IHRvIGdlbmVyYXRlIG9uZSByb29tXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvMjYuX2dlbmVyYXRlUm9vbSA9IGZ1bmN0aW9uIF9nZW5lcmF0ZVJvb20oKSB7XG4gICAgICB2YXIgY291bnQgPSAwO1xuXG4gICAgICB3aGlsZSAoY291bnQgPCB0aGlzLl9yb29tQXR0ZW1wdHMpIHtcbiAgICAgICAgY291bnQrKztcbiAgICAgICAgdmFyIHJvb20gPSBSb29tLmNyZWF0ZVJhbmRvbSh0aGlzLl93aWR0aCwgdGhpcy5faGVpZ2h0LCB0aGlzLl9vcHRpb25zKTtcblxuICAgICAgICBpZiAoIXJvb20uaXNWYWxpZCh0aGlzLl9pc1dhbGxDYWxsYmFjaywgdGhpcy5fY2FuQmVEdWdDYWxsYmFjaykpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJvb20uY3JlYXRlKHRoaXMuX2RpZ0NhbGxiYWNrKTtcblxuICAgICAgICB0aGlzLl9yb29tcy5wdXNoKHJvb20pO1xuXG4gICAgICAgIHJldHVybiByb29tO1xuICAgICAgfVxuICAgICAgLyogbm8gcm9vbSB3YXMgZ2VuZXJhdGVkIGluIGEgZ2l2ZW4gbnVtYmVyIG9mIGF0dGVtcHRzICovXG5cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBjb25uZWN0b3JzIGJld2VlbiByb29tc1xuICAgICAqIEByZXR1cm5zIHtib29sfSBzdWNjZXNzIFdhcyB0aGlzIGF0dGVtcHQgc3VjY2Vzc2Z1bGw/XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvMjYuX2dlbmVyYXRlQ29ycmlkb3JzID0gZnVuY3Rpb24gX2dlbmVyYXRlQ29ycmlkb3JzKCkge1xuICAgICAgdmFyIGNudCA9IDA7XG5cbiAgICAgIHdoaWxlIChjbnQgPCB0aGlzLl9jb3JyaWRvckF0dGVtcHRzKSB7XG4gICAgICAgIGNudCsrO1xuICAgICAgICB0aGlzLl9jb3JyaWRvcnMgPSBbXTtcbiAgICAgICAgLyogZGlnIHJvb21zIGludG8gYSBjbGVhciBtYXAgKi9cblxuICAgICAgICB0aGlzLl9tYXAgPSB0aGlzLl9maWxsTWFwKDEpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fcm9vbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgcm9vbSA9IHRoaXMuX3Jvb21zW2ldO1xuICAgICAgICAgIHJvb20uY2xlYXJEb29ycygpO1xuICAgICAgICAgIHJvb20uY3JlYXRlKHRoaXMuX2RpZ0NhbGxiYWNrKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3VuY29ubmVjdGVkID0gUk5HJDEuc2h1ZmZsZSh0aGlzLl9yb29tcy5zbGljZSgpKTtcbiAgICAgICAgdGhpcy5fY29ubmVjdGVkID0gW107XG5cbiAgICAgICAgaWYgKHRoaXMuX3VuY29ubmVjdGVkLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuX2Nvbm5lY3RlZC5wdXNoKHRoaXMuX3VuY29ubmVjdGVkLnBvcCgpKTtcbiAgICAgICAgfVxuICAgICAgICAvKiBmaXJzdCBvbmUgaXMgYWx3YXlzIGNvbm5lY3RlZCAqL1xuXG5cbiAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAvKiAxLiBwaWNrIHJhbmRvbSBjb25uZWN0ZWQgcm9vbSAqL1xuICAgICAgICAgIHZhciBjb25uZWN0ZWQgPSBSTkckMS5nZXRJdGVtKHRoaXMuX2Nvbm5lY3RlZCk7XG5cbiAgICAgICAgICBpZiAoIWNvbm5lY3RlZCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8qIDIuIGZpbmQgY2xvc2VzdCB1bmNvbm5lY3RlZCAqL1xuXG5cbiAgICAgICAgICB2YXIgcm9vbTEgPSB0aGlzLl9jbG9zZXN0Um9vbSh0aGlzLl91bmNvbm5lY3RlZCwgY29ubmVjdGVkKTtcblxuICAgICAgICAgIGlmICghcm9vbTEpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvKiAzLiBjb25uZWN0IGl0IHRvIGNsb3Nlc3QgY29ubmVjdGVkICovXG5cblxuICAgICAgICAgIHZhciByb29tMiA9IHRoaXMuX2Nsb3Nlc3RSb29tKHRoaXMuX2Nvbm5lY3RlZCwgcm9vbTEpO1xuXG4gICAgICAgICAgaWYgKCFyb29tMikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIG9rID0gdGhpcy5fY29ubmVjdFJvb21zKHJvb20xLCByb29tMik7XG5cbiAgICAgICAgICBpZiAoIW9rKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgLyogc3RvcCBjb25uZWN0aW5nLCByZS1zaHVmZmxlICovXG5cblxuICAgICAgICAgIGlmICghdGhpcy5fdW5jb25uZWN0ZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLyogZG9uZTsgbm8gcm9vbXMgcmVtYWluICovXG5cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEZvciBhIGdpdmVuIHJvb20sIGZpbmQgdGhlIGNsb3Nlc3Qgb25lIGZyb20gdGhlIGxpc3RcbiAgICAgKi9cbiAgICBfcHJvdG8yNi5fY2xvc2VzdFJvb20gPSBmdW5jdGlvbiBfY2xvc2VzdFJvb20ocm9vbXMsIHJvb20pIHtcbiAgICAgIHZhciBkaXN0ID0gSW5maW5pdHk7XG4gICAgICB2YXIgY2VudGVyID0gcm9vbS5nZXRDZW50ZXIoKTtcbiAgICAgIHZhciByZXN1bHQgPSBudWxsO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJvb21zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciByID0gcm9vbXNbaV07XG4gICAgICAgIHZhciBjID0gci5nZXRDZW50ZXIoKTtcbiAgICAgICAgdmFyIGR4ID0gY1swXSAtIGNlbnRlclswXTtcbiAgICAgICAgdmFyIGR5ID0gY1sxXSAtIGNlbnRlclsxXTtcbiAgICAgICAgdmFyIGQgPSBkeCAqIGR4ICsgZHkgKiBkeTtcblxuICAgICAgICBpZiAoZCA8IGRpc3QpIHtcbiAgICAgICAgICBkaXN0ID0gZDtcbiAgICAgICAgICByZXN1bHQgPSByO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIF9wcm90bzI2Ll9jb25uZWN0Um9vbXMgPSBmdW5jdGlvbiBfY29ubmVjdFJvb21zKHJvb20xLCByb29tMikge1xuICAgICAgLypcbiAgICAgICAgICByb29tMS5kZWJ1ZygpO1xuICAgICAgICAgIHJvb20yLmRlYnVnKCk7XG4gICAgICAqL1xuICAgICAgdmFyIGNlbnRlcjEgPSByb29tMS5nZXRDZW50ZXIoKTtcbiAgICAgIHZhciBjZW50ZXIyID0gcm9vbTIuZ2V0Q2VudGVyKCk7XG4gICAgICB2YXIgZGlmZlggPSBjZW50ZXIyWzBdIC0gY2VudGVyMVswXTtcbiAgICAgIHZhciBkaWZmWSA9IGNlbnRlcjJbMV0gLSBjZW50ZXIxWzFdO1xuICAgICAgdmFyIHN0YXJ0O1xuICAgICAgdmFyIGVuZDtcbiAgICAgIHZhciBkaXJJbmRleDEsIGRpckluZGV4MiwgbWluLCBtYXgsIGluZGV4O1xuXG4gICAgICBpZiAoTWF0aC5hYnMoZGlmZlgpIDwgTWF0aC5hYnMoZGlmZlkpKSB7XG4gICAgICAgIC8qIGZpcnN0IHRyeSBjb25uZWN0aW5nIG5vcnRoLXNvdXRoIHdhbGxzICovXG4gICAgICAgIGRpckluZGV4MSA9IGRpZmZZID4gMCA/IDIgOiAwO1xuICAgICAgICBkaXJJbmRleDIgPSAoZGlySW5kZXgxICsgMikgJSA0O1xuICAgICAgICBtaW4gPSByb29tMi5nZXRMZWZ0KCk7XG4gICAgICAgIG1heCA9IHJvb20yLmdldFJpZ2h0KCk7XG4gICAgICAgIGluZGV4ID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8qIGZpcnN0IHRyeSBjb25uZWN0aW5nIGVhc3Qtd2VzdCB3YWxscyAqL1xuICAgICAgICBkaXJJbmRleDEgPSBkaWZmWCA+IDAgPyAxIDogMztcbiAgICAgICAgZGlySW5kZXgyID0gKGRpckluZGV4MSArIDIpICUgNDtcbiAgICAgICAgbWluID0gcm9vbTIuZ2V0VG9wKCk7XG4gICAgICAgIG1heCA9IHJvb20yLmdldEJvdHRvbSgpO1xuICAgICAgICBpbmRleCA9IDE7XG4gICAgICB9XG5cbiAgICAgIHN0YXJ0ID0gdGhpcy5fcGxhY2VJbldhbGwocm9vbTEsIGRpckluZGV4MSk7XG4gICAgICAvKiBjb3JyaWRvciB3aWxsIHN0YXJ0IGhlcmUgKi9cblxuICAgICAgaWYgKCFzdGFydCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGFydFtpbmRleF0gPj0gbWluICYmIHN0YXJ0W2luZGV4XSA8PSBtYXgpIHtcbiAgICAgICAgLyogcG9zc2libGUgdG8gY29ubmVjdCB3aXRoIHN0cmFpZ2h0IGxpbmUgKEktbGlrZSkgKi9cbiAgICAgICAgZW5kID0gc3RhcnQuc2xpY2UoKTtcbiAgICAgICAgdmFyIHZhbHVlID0gMDtcblxuICAgICAgICBzd2l0Y2ggKGRpckluZGV4Mikge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHZhbHVlID0gcm9vbTIuZ2V0VG9wKCkgLSAxO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICB2YWx1ZSA9IHJvb20yLmdldFJpZ2h0KCkgKyAxO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICB2YWx1ZSA9IHJvb20yLmdldEJvdHRvbSgpICsgMTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgdmFsdWUgPSByb29tMi5nZXRMZWZ0KCkgLSAxO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBlbmRbKGluZGV4ICsgMSkgJSAyXSA9IHZhbHVlO1xuXG4gICAgICAgIHRoaXMuX2RpZ0xpbmUoW3N0YXJ0LCBlbmRdKTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhcnRbaW5kZXhdIDwgbWluIC0gMSB8fCBzdGFydFtpbmRleF0gPiBtYXggKyAxKSB7XG4gICAgICAgIC8qIG5lZWQgdG8gc3dpdGNoIHRhcmdldCB3YWxsIChMLWxpa2UpICovXG4gICAgICAgIHZhciBkaWZmID0gc3RhcnRbaW5kZXhdIC0gY2VudGVyMltpbmRleF07XG4gICAgICAgIHZhciByb3RhdGlvbiA9IDA7XG5cbiAgICAgICAgc3dpdGNoIChkaXJJbmRleDIpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcm90YXRpb24gPSBkaWZmIDwgMCA/IDMgOiAxO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcm90YXRpb24gPSBkaWZmIDwgMCA/IDEgOiAzO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBkaXJJbmRleDIgPSAoZGlySW5kZXgyICsgcm90YXRpb24pICUgNDtcbiAgICAgICAgZW5kID0gdGhpcy5fcGxhY2VJbldhbGwocm9vbTIsIGRpckluZGV4Mik7XG5cbiAgICAgICAgaWYgKCFlbmQpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbWlkID0gWzAsIDBdO1xuICAgICAgICBtaWRbaW5kZXhdID0gc3RhcnRbaW5kZXhdO1xuICAgICAgICB2YXIgaW5kZXgyID0gKGluZGV4ICsgMSkgJSAyO1xuICAgICAgICBtaWRbaW5kZXgyXSA9IGVuZFtpbmRleDJdO1xuXG4gICAgICAgIHRoaXMuX2RpZ0xpbmUoW3N0YXJ0LCBtaWQsIGVuZF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLyogdXNlIGN1cnJlbnQgd2FsbCBwYWlyLCBidXQgYWRqdXN0IHRoZSBsaW5lIGluIHRoZSBtaWRkbGUgKFMtbGlrZSkgKi9cbiAgICAgICAgdmFyIF9pbmRleDQgPSAoaW5kZXggKyAxKSAlIDI7XG5cbiAgICAgICAgZW5kID0gdGhpcy5fcGxhY2VJbldhbGwocm9vbTIsIGRpckluZGV4Mik7XG5cbiAgICAgICAgaWYgKCFlbmQpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgX21pZCA9IE1hdGgucm91bmQoKGVuZFtfaW5kZXg0XSArIHN0YXJ0W19pbmRleDRdKSAvIDIpO1xuXG4gICAgICAgIHZhciBtaWQxID0gWzAsIDBdO1xuICAgICAgICB2YXIgbWlkMiA9IFswLCAwXTtcbiAgICAgICAgbWlkMVtpbmRleF0gPSBzdGFydFtpbmRleF07XG4gICAgICAgIG1pZDFbX2luZGV4NF0gPSBfbWlkO1xuICAgICAgICBtaWQyW2luZGV4XSA9IGVuZFtpbmRleF07XG4gICAgICAgIG1pZDJbX2luZGV4NF0gPSBfbWlkO1xuXG4gICAgICAgIHRoaXMuX2RpZ0xpbmUoW3N0YXJ0LCBtaWQxLCBtaWQyLCBlbmRdKTtcbiAgICAgIH1cblxuICAgICAgcm9vbTEuYWRkRG9vcihzdGFydFswXSwgc3RhcnRbMV0pO1xuICAgICAgcm9vbTIuYWRkRG9vcihlbmRbMF0sIGVuZFsxXSk7XG4gICAgICBpbmRleCA9IHRoaXMuX3VuY29ubmVjdGVkLmluZGV4T2Yocm9vbTEpO1xuXG4gICAgICBpZiAoaW5kZXggIT0gLTEpIHtcbiAgICAgICAgdGhpcy5fdW5jb25uZWN0ZWQuc3BsaWNlKGluZGV4LCAxKTtcblxuICAgICAgICB0aGlzLl9jb25uZWN0ZWQucHVzaChyb29tMSk7XG4gICAgICB9XG5cbiAgICAgIGluZGV4ID0gdGhpcy5fdW5jb25uZWN0ZWQuaW5kZXhPZihyb29tMik7XG5cbiAgICAgIGlmIChpbmRleCAhPSAtMSkge1xuICAgICAgICB0aGlzLl91bmNvbm5lY3RlZC5zcGxpY2UoaW5kZXgsIDEpO1xuXG4gICAgICAgIHRoaXMuX2Nvbm5lY3RlZC5wdXNoKHJvb20yKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIF9wcm90bzI2Ll9wbGFjZUluV2FsbCA9IGZ1bmN0aW9uIF9wbGFjZUluV2FsbChyb29tLCBkaXJJbmRleCkge1xuICAgICAgdmFyIHN0YXJ0ID0gWzAsIDBdO1xuICAgICAgdmFyIGRpciA9IFswLCAwXTtcbiAgICAgIHZhciBsZW5ndGggPSAwO1xuXG4gICAgICBzd2l0Y2ggKGRpckluZGV4KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBkaXIgPSBbMSwgMF07XG4gICAgICAgICAgc3RhcnQgPSBbcm9vbS5nZXRMZWZ0KCksIHJvb20uZ2V0VG9wKCkgLSAxXTtcbiAgICAgICAgICBsZW5ndGggPSByb29tLmdldFJpZ2h0KCkgLSByb29tLmdldExlZnQoKSArIDE7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGRpciA9IFswLCAxXTtcbiAgICAgICAgICBzdGFydCA9IFtyb29tLmdldFJpZ2h0KCkgKyAxLCByb29tLmdldFRvcCgpXTtcbiAgICAgICAgICBsZW5ndGggPSByb29tLmdldEJvdHRvbSgpIC0gcm9vbS5nZXRUb3AoKSArIDE7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIGRpciA9IFsxLCAwXTtcbiAgICAgICAgICBzdGFydCA9IFtyb29tLmdldExlZnQoKSwgcm9vbS5nZXRCb3R0b20oKSArIDFdO1xuICAgICAgICAgIGxlbmd0aCA9IHJvb20uZ2V0UmlnaHQoKSAtIHJvb20uZ2V0TGVmdCgpICsgMTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgZGlyID0gWzAsIDFdO1xuICAgICAgICAgIHN0YXJ0ID0gW3Jvb20uZ2V0TGVmdCgpIC0gMSwgcm9vbS5nZXRUb3AoKV07XG4gICAgICAgICAgbGVuZ3RoID0gcm9vbS5nZXRCb3R0b20oKSAtIHJvb20uZ2V0VG9wKCkgKyAxO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICB2YXIgYXZhaWwgPSBbXTtcbiAgICAgIHZhciBsYXN0QmFkSW5kZXggPSAtMjtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgeCA9IHN0YXJ0WzBdICsgaSAqIGRpclswXTtcbiAgICAgICAgdmFyIHkgPSBzdGFydFsxXSArIGkgKiBkaXJbMV07XG4gICAgICAgIGF2YWlsLnB1c2gobnVsbCk7XG4gICAgICAgIHZhciBpc1dhbGwgPSB0aGlzLl9tYXBbeF1beV0gPT0gMTtcblxuICAgICAgICBpZiAoaXNXYWxsKSB7XG4gICAgICAgICAgaWYgKGxhc3RCYWRJbmRleCAhPSBpIC0gMSkge1xuICAgICAgICAgICAgYXZhaWxbaV0gPSBbeCwgeV07XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxhc3RCYWRJbmRleCA9IGk7XG5cbiAgICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgYXZhaWxbaSAtIDFdID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgX2kzID0gYXZhaWwubGVuZ3RoIC0gMTsgX2kzID49IDA7IF9pMy0tKSB7XG4gICAgICAgIGlmICghYXZhaWxbX2kzXSkge1xuICAgICAgICAgIGF2YWlsLnNwbGljZShfaTMsIDEpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhdmFpbC5sZW5ndGggPyBSTkckMS5nZXRJdGVtKGF2YWlsKSA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpZyBhIHBvbHlsaW5lLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90bzI2Ll9kaWdMaW5lID0gZnVuY3Rpb24gX2RpZ0xpbmUocG9pbnRzKSB7XG4gICAgICBmb3IgKHZhciBpID0gMTsgaSA8IHBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgc3RhcnQgPSBwb2ludHNbaSAtIDFdO1xuICAgICAgICB2YXIgZW5kID0gcG9pbnRzW2ldO1xuICAgICAgICB2YXIgY29ycmlkb3IgPSBuZXcgQ29ycmlkb3Ioc3RhcnRbMF0sIHN0YXJ0WzFdLCBlbmRbMF0sIGVuZFsxXSk7XG4gICAgICAgIGNvcnJpZG9yLmNyZWF0ZSh0aGlzLl9kaWdDYWxsYmFjayk7XG5cbiAgICAgICAgdGhpcy5fY29ycmlkb3JzLnB1c2goY29ycmlkb3IpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8yNi5fZGlnQ2FsbGJhY2sgPSBmdW5jdGlvbiBfZGlnQ2FsbGJhY2soeCwgeSwgdmFsdWUpIHtcbiAgICAgIHRoaXMuX21hcFt4XVt5XSA9IHZhbHVlO1xuXG4gICAgICBpZiAodmFsdWUgPT0gMCkge1xuICAgICAgICB0aGlzLl9kdWcrKztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvMjYuX2lzV2FsbENhbGxiYWNrID0gZnVuY3Rpb24gX2lzV2FsbENhbGxiYWNrKHgsIHkpIHtcbiAgICAgIGlmICh4IDwgMCB8fCB5IDwgMCB8fCB4ID49IHRoaXMuX3dpZHRoIHx8IHkgPj0gdGhpcy5faGVpZ2h0KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuX21hcFt4XVt5XSA9PSAxO1xuICAgIH07XG5cbiAgICBfcHJvdG8yNi5fY2FuQmVEdWdDYWxsYmFjayA9IGZ1bmN0aW9uIF9jYW5CZUR1Z0NhbGxiYWNrKHgsIHkpIHtcbiAgICAgIGlmICh4IDwgMSB8fCB5IDwgMSB8fCB4ICsgMSA+PSB0aGlzLl93aWR0aCB8fCB5ICsgMSA+PSB0aGlzLl9oZWlnaHQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5fbWFwW3hdW3ldID09IDE7XG4gICAgfTtcblxuICAgIHJldHVybiBVbmlmb3JtO1xuICB9KER1bmdlb24pO1xuICAvKipcbiAgICogQGNsYXNzIENlbGx1bGFyIGF1dG9tYXRvbiBtYXAgZ2VuZXJhdG9yXG4gICAqIEBhdWdtZW50cyBST1QuTWFwXG4gICAqIEBwYXJhbSB7aW50fSBbd2lkdGg9Uk9ULkRFRkFVTFRfV0lEVEhdXG4gICAqIEBwYXJhbSB7aW50fSBbaGVpZ2h0PVJPVC5ERUZBVUxUX0hFSUdIVF1cbiAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSBPcHRpb25zXG4gICAqIEBwYXJhbSB7aW50W119IFtvcHRpb25zLmJvcm5dIExpc3Qgb2YgbmVpZ2hib3IgY291bnRzIGZvciBhIG5ldyBjZWxsIHRvIGJlIGJvcm4gaW4gZW1wdHkgc3BhY2VcbiAgICogQHBhcmFtIHtpbnRbXX0gW29wdGlvbnMuc3Vydml2ZV0gTGlzdCBvZiBuZWlnaGJvciBjb3VudHMgZm9yIGFuIGV4aXN0aW5nICBjZWxsIHRvIHN1cnZpdmVcbiAgICogQHBhcmFtIHtpbnR9IFtvcHRpb25zLnRvcG9sb2d5XSBUb3BvbG9neSA0IG9yIDYgb3IgOFxuICAgKi9cblxuXG4gIHZhciBDZWxsdWxhciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX01hcDMpIHtcbiAgICBfaW5oZXJpdHNMb29zZShDZWxsdWxhciwgX01hcDMpO1xuXG4gICAgZnVuY3Rpb24gQ2VsbHVsYXIod2lkdGgsIGhlaWdodCwgb3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzMTQ7XG5cbiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuXG4gICAgICBfdGhpczE0ID0gX01hcDMuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzO1xuICAgICAgX3RoaXMxNC5fb3B0aW9ucyA9IHtcbiAgICAgICAgYm9ybjogWzUsIDYsIDcsIDhdLFxuICAgICAgICBzdXJ2aXZlOiBbNCwgNSwgNiwgNywgOF0sXG4gICAgICAgIHRvcG9sb2d5OiA4XG4gICAgICB9O1xuXG4gICAgICBfdGhpczE0LnNldE9wdGlvbnMob3B0aW9ucyk7XG5cbiAgICAgIF90aGlzMTQuX2RpcnMgPSBESVJTW190aGlzMTQuX29wdGlvbnMudG9wb2xvZ3ldO1xuICAgICAgX3RoaXMxNC5fbWFwID0gX3RoaXMxNC5fZmlsbE1hcCgwKTtcbiAgICAgIHJldHVybiBfdGhpczE0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaWxsIHRoZSBtYXAgd2l0aCByYW5kb20gdmFsdWVzXG4gICAgICogQHBhcmFtIHtmbG9hdH0gcHJvYmFiaWxpdHkgUHJvYmFiaWxpdHkgZm9yIGEgY2VsbCB0byBiZWNvbWUgYWxpdmU7IDAgPSBhbGwgZW1wdHksIDEgPSBhbGwgZnVsbFxuICAgICAqL1xuXG5cbiAgICB2YXIgX3Byb3RvMjcgPSBDZWxsdWxhci5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8yNy5yYW5kb21pemUgPSBmdW5jdGlvbiByYW5kb21pemUocHJvYmFiaWxpdHkpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fd2lkdGg7IGkrKykge1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuX2hlaWdodDsgaisrKSB7XG4gICAgICAgICAgdGhpcy5fbWFwW2ldW2pdID0gUk5HJDEuZ2V0VW5pZm9ybSgpIDwgcHJvYmFiaWxpdHkgPyAxIDogMDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlIG9wdGlvbnMuXG4gICAgICogQHNlZSBST1QuTWFwLkNlbGx1bGFyXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvMjcuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykge1xuICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLl9vcHRpb25zLCBvcHRpb25zKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvMjcuc2V0ID0gZnVuY3Rpb24gc2V0KHgsIHksIHZhbHVlKSB7XG4gICAgICB0aGlzLl9tYXBbeF1beV0gPSB2YWx1ZTtcbiAgICB9O1xuXG4gICAgX3Byb3RvMjcuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGNhbGxiYWNrKSB7XG4gICAgICB2YXIgbmV3TWFwID0gdGhpcy5fZmlsbE1hcCgwKTtcblxuICAgICAgdmFyIGJvcm4gPSB0aGlzLl9vcHRpb25zLmJvcm47XG4gICAgICB2YXIgc3Vydml2ZSA9IHRoaXMuX29wdGlvbnMuc3Vydml2ZTtcblxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLl9oZWlnaHQ7IGorKykge1xuICAgICAgICB2YXIgd2lkdGhTdGVwID0gMTtcbiAgICAgICAgdmFyIHdpZHRoU3RhcnQgPSAwO1xuXG4gICAgICAgIGlmICh0aGlzLl9vcHRpb25zLnRvcG9sb2d5ID09IDYpIHtcbiAgICAgICAgICB3aWR0aFN0ZXAgPSAyO1xuICAgICAgICAgIHdpZHRoU3RhcnQgPSBqICUgMjtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGkgPSB3aWR0aFN0YXJ0OyBpIDwgdGhpcy5fd2lkdGg7IGkgKz0gd2lkdGhTdGVwKSB7XG4gICAgICAgICAgdmFyIGN1ciA9IHRoaXMuX21hcFtpXVtqXTtcblxuICAgICAgICAgIHZhciBuY291bnQgPSB0aGlzLl9nZXROZWlnaGJvcnMoaSwgaik7XG5cbiAgICAgICAgICBpZiAoY3VyICYmIHN1cnZpdmUuaW5kZXhPZihuY291bnQpICE9IC0xKSB7XG4gICAgICAgICAgICAvKiBzdXJ2aXZlICovXG4gICAgICAgICAgICBuZXdNYXBbaV1bal0gPSAxO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIWN1ciAmJiBib3JuLmluZGV4T2YobmNvdW50KSAhPSAtMSkge1xuICAgICAgICAgICAgLyogYm9ybiAqL1xuICAgICAgICAgICAgbmV3TWFwW2ldW2pdID0gMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5fbWFwID0gbmV3TWFwO1xuICAgICAgY2FsbGJhY2sgJiYgdGhpcy5fc2VydmljZUNhbGxiYWNrKGNhbGxiYWNrKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvMjcuX3NlcnZpY2VDYWxsYmFjayA9IGZ1bmN0aW9uIF9zZXJ2aWNlQ2FsbGJhY2soY2FsbGJhY2spIHtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5faGVpZ2h0OyBqKyspIHtcbiAgICAgICAgdmFyIHdpZHRoU3RlcCA9IDE7XG4gICAgICAgIHZhciB3aWR0aFN0YXJ0ID0gMDtcblxuICAgICAgICBpZiAodGhpcy5fb3B0aW9ucy50b3BvbG9neSA9PSA2KSB7XG4gICAgICAgICAgd2lkdGhTdGVwID0gMjtcbiAgICAgICAgICB3aWR0aFN0YXJ0ID0gaiAlIDI7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gd2lkdGhTdGFydDsgaSA8IHRoaXMuX3dpZHRoOyBpICs9IHdpZHRoU3RlcCkge1xuICAgICAgICAgIGNhbGxiYWNrKGksIGosIHRoaXMuX21hcFtpXVtqXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IG5laWdoYm9yIGNvdW50IGF0IFtpLGpdIGluIHRoaXMuX21hcFxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90bzI3Ll9nZXROZWlnaGJvcnMgPSBmdW5jdGlvbiBfZ2V0TmVpZ2hib3JzKGN4LCBjeSkge1xuICAgICAgdmFyIHJlc3VsdCA9IDA7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fZGlycy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZGlyID0gdGhpcy5fZGlyc1tpXTtcbiAgICAgICAgdmFyIHggPSBjeCArIGRpclswXTtcbiAgICAgICAgdmFyIHkgPSBjeSArIGRpclsxXTtcblxuICAgICAgICBpZiAoeCA8IDAgfHwgeCA+PSB0aGlzLl93aWR0aCB8fCB5IDwgMCB8fCB5ID49IHRoaXMuX2hlaWdodCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVzdWx0ICs9IHRoaXMuX21hcFt4XVt5XSA9PSAxID8gMSA6IDA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ha2Ugc3VyZSBldmVyeSBub24td2FsbCBzcGFjZSBpcyBhY2Nlc3NpYmxlLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIHRvIGNhbGwgdG8gZGlzcGxheSBtYXAgd2hlbiBkb1xuICAgICAqIEBwYXJhbSB7aW50fSB2YWx1ZSB0byBjb25zaWRlciBlbXB0eSBzcGFjZSAtIGRlZmF1bHRzIHRvIDBcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayB0byBjYWxsIHdoZW4gYSBuZXcgY29ubmVjdGlvbiBpcyBtYWRlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvMjcuY29ubmVjdCA9IGZ1bmN0aW9uIGNvbm5lY3QoY2FsbGJhY2ssIHZhbHVlLCBjb25uZWN0aW9uQ2FsbGJhY2spIHtcbiAgICAgIGlmICghdmFsdWUpIHZhbHVlID0gMDtcbiAgICAgIHZhciBhbGxGcmVlU3BhY2UgPSBbXTtcbiAgICAgIHZhciBub3RDb25uZWN0ZWQgPSB7fTsgLy8gZmluZCBhbGwgZnJlZSBzcGFjZVxuXG4gICAgICB2YXIgd2lkdGhTdGVwID0gMTtcbiAgICAgIHZhciB3aWR0aFN0YXJ0cyA9IFswLCAwXTtcblxuICAgICAgaWYgKHRoaXMuX29wdGlvbnMudG9wb2xvZ3kgPT0gNikge1xuICAgICAgICB3aWR0aFN0ZXAgPSAyO1xuICAgICAgICB3aWR0aFN0YXJ0cyA9IFswLCAxXTtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLl9oZWlnaHQ7IHkrKykge1xuICAgICAgICBmb3IgKHZhciB4ID0gd2lkdGhTdGFydHNbeSAlIDJdOyB4IDwgdGhpcy5fd2lkdGg7IHggKz0gd2lkdGhTdGVwKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX2ZyZWVTcGFjZSh4LCB5LCB2YWx1ZSkpIHtcbiAgICAgICAgICAgIHZhciBwID0gW3gsIHldO1xuICAgICAgICAgICAgbm90Q29ubmVjdGVkW3RoaXMuX3BvaW50S2V5KHApXSA9IHA7XG4gICAgICAgICAgICBhbGxGcmVlU3BhY2UucHVzaChbeCwgeV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgc3RhcnQgPSBhbGxGcmVlU3BhY2VbUk5HJDEuZ2V0VW5pZm9ybUludCgwLCBhbGxGcmVlU3BhY2UubGVuZ3RoIC0gMSldO1xuXG4gICAgICB2YXIga2V5ID0gdGhpcy5fcG9pbnRLZXkoc3RhcnQpO1xuXG4gICAgICB2YXIgY29ubmVjdGVkID0ge307XG4gICAgICBjb25uZWN0ZWRba2V5XSA9IHN0YXJ0O1xuICAgICAgZGVsZXRlIG5vdENvbm5lY3RlZFtrZXldOyAvLyBmaW5kIHdoYXQncyBjb25uZWN0ZWQgdG8gdGhlIHN0YXJ0aW5nIHBvaW50XG5cbiAgICAgIHRoaXMuX2ZpbmRDb25uZWN0ZWQoY29ubmVjdGVkLCBub3RDb25uZWN0ZWQsIFtzdGFydF0sIGZhbHNlLCB2YWx1ZSk7XG5cbiAgICAgIHdoaWxlIChPYmplY3Qua2V5cyhub3RDb25uZWN0ZWQpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gZmluZCB0d28gcG9pbnRzIGZyb20gbm90Q29ubmVjdGVkIHRvIGNvbm5lY3RlZFxuICAgICAgICB2YXIgX3AgPSB0aGlzLl9nZXRGcm9tVG8oY29ubmVjdGVkLCBub3RDb25uZWN0ZWQpO1xuXG4gICAgICAgIHZhciBmcm9tID0gX3BbMF07IC8vIG5vdENvbm5lY3RlZFxuXG4gICAgICAgIHZhciB0byA9IF9wWzFdOyAvLyBjb25uZWN0ZWRcbiAgICAgICAgLy8gZmluZCBldmVyeXRoaW5nIGNvbm5lY3RlZCB0byB0aGUgc3RhcnRpbmcgcG9pbnRcblxuICAgICAgICB2YXIgbG9jYWwgPSB7fTtcbiAgICAgICAgbG9jYWxbdGhpcy5fcG9pbnRLZXkoZnJvbSldID0gZnJvbTtcblxuICAgICAgICB0aGlzLl9maW5kQ29ubmVjdGVkKGxvY2FsLCBub3RDb25uZWN0ZWQsIFtmcm9tXSwgdHJ1ZSwgdmFsdWUpOyAvLyBjb25uZWN0IHRvIGEgY29ubmVjdGVkIGNlbGxcblxuXG4gICAgICAgIHZhciB0dW5uZWxGbiA9IHRoaXMuX29wdGlvbnMudG9wb2xvZ3kgPT0gNiA/IHRoaXMuX3R1bm5lbFRvQ29ubmVjdGVkNiA6IHRoaXMuX3R1bm5lbFRvQ29ubmVjdGVkO1xuICAgICAgICB0dW5uZWxGbi5jYWxsKHRoaXMsIHRvLCBmcm9tLCBjb25uZWN0ZWQsIG5vdENvbm5lY3RlZCwgdmFsdWUsIGNvbm5lY3Rpb25DYWxsYmFjayk7IC8vIG5vdyBhbGwgb2YgbG9jYWwgaXMgY29ubmVjdGVkXG5cbiAgICAgICAgZm9yICh2YXIgayBpbiBsb2NhbCkge1xuICAgICAgICAgIHZhciBwcCA9IGxvY2FsW2tdO1xuICAgICAgICAgIHRoaXMuX21hcFtwcFswXV1bcHBbMV1dID0gdmFsdWU7XG4gICAgICAgICAgY29ubmVjdGVkW2tdID0gcHA7XG4gICAgICAgICAgZGVsZXRlIG5vdENvbm5lY3RlZFtrXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjYWxsYmFjayAmJiB0aGlzLl9zZXJ2aWNlQ2FsbGJhY2soY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kIHJhbmRvbSBwb2ludHMgdG8gY29ubmVjdC4gU2VhcmNoIGZvciB0aGUgY2xvc2VzdCBwb2ludCBpbiB0aGUgbGFyZ2VyIHNwYWNlLlxuICAgICAqIFRoaXMgaXMgdG8gbWluaW1pemUgdGhlIGxlbmd0aCBvZiB0aGUgcGFzc2FnZSB3aGlsZSBtYWludGFpbmluZyBnb29kIHBlcmZvcm1hbmNlLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90bzI3Ll9nZXRGcm9tVG8gPSBmdW5jdGlvbiBfZ2V0RnJvbVRvKGNvbm5lY3RlZCwgbm90Q29ubmVjdGVkKSB7XG4gICAgICB2YXIgZnJvbSA9IFswLCAwXSxcbiAgICAgICAgICB0byA9IFswLCAwXSxcbiAgICAgICAgICBkO1xuICAgICAgdmFyIGNvbm5lY3RlZEtleXMgPSBPYmplY3Qua2V5cyhjb25uZWN0ZWQpO1xuICAgICAgdmFyIG5vdENvbm5lY3RlZEtleXMgPSBPYmplY3Qua2V5cyhub3RDb25uZWN0ZWQpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICAgICBpZiAoY29ubmVjdGVkS2V5cy5sZW5ndGggPCBub3RDb25uZWN0ZWRLZXlzLmxlbmd0aCkge1xuICAgICAgICAgIHZhciBrZXlzID0gY29ubmVjdGVkS2V5cztcbiAgICAgICAgICB0byA9IGNvbm5lY3RlZFtrZXlzW1JORyQxLmdldFVuaWZvcm1JbnQoMCwga2V5cy5sZW5ndGggLSAxKV1dO1xuICAgICAgICAgIGZyb20gPSB0aGlzLl9nZXRDbG9zZXN0KHRvLCBub3RDb25uZWN0ZWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBfa2V5cyA9IG5vdENvbm5lY3RlZEtleXM7XG4gICAgICAgICAgZnJvbSA9IG5vdENvbm5lY3RlZFtfa2V5c1tSTkckMS5nZXRVbmlmb3JtSW50KDAsIF9rZXlzLmxlbmd0aCAtIDEpXV07XG4gICAgICAgICAgdG8gPSB0aGlzLl9nZXRDbG9zZXN0KGZyb20sIGNvbm5lY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBkID0gKGZyb21bMF0gLSB0b1swXSkgKiAoZnJvbVswXSAtIHRvWzBdKSArIChmcm9tWzFdIC0gdG9bMV0pICogKGZyb21bMV0gLSB0b1sxXSk7XG5cbiAgICAgICAgaWYgKGQgPCA2NCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9IC8vIGNvbnNvbGUubG9nKFwiPj4+IGNvbm5lY3RlZD1cIiArIHRvICsgXCIgbm90Q29ubmVjdGVkPVwiICsgZnJvbSArIFwiIGRpc3Q9XCIgKyBkKTtcblxuXG4gICAgICByZXR1cm4gW2Zyb20sIHRvXTtcbiAgICB9O1xuXG4gICAgX3Byb3RvMjcuX2dldENsb3Nlc3QgPSBmdW5jdGlvbiBfZ2V0Q2xvc2VzdChwb2ludCwgc3BhY2UpIHtcbiAgICAgIHZhciBtaW5Qb2ludCA9IG51bGw7XG4gICAgICB2YXIgbWluRGlzdCA9IG51bGw7XG5cbiAgICAgIGZvciAodmFyIGsgaW4gc3BhY2UpIHtcbiAgICAgICAgdmFyIHAgPSBzcGFjZVtrXTtcbiAgICAgICAgdmFyIGQgPSAocFswXSAtIHBvaW50WzBdKSAqIChwWzBdIC0gcG9pbnRbMF0pICsgKHBbMV0gLSBwb2ludFsxXSkgKiAocFsxXSAtIHBvaW50WzFdKTtcblxuICAgICAgICBpZiAobWluRGlzdCA9PSBudWxsIHx8IGQgPCBtaW5EaXN0KSB7XG4gICAgICAgICAgbWluRGlzdCA9IGQ7XG4gICAgICAgICAgbWluUG9pbnQgPSBwO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBtaW5Qb2ludDtcbiAgICB9O1xuXG4gICAgX3Byb3RvMjcuX2ZpbmRDb25uZWN0ZWQgPSBmdW5jdGlvbiBfZmluZENvbm5lY3RlZChjb25uZWN0ZWQsIG5vdENvbm5lY3RlZCwgc3RhY2ssIGtlZXBOb3RDb25uZWN0ZWQsIHZhbHVlKSB7XG4gICAgICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgcCA9IHN0YWNrLnNwbGljZSgwLCAxKVswXTtcbiAgICAgICAgdmFyIHRlc3RzID0gdm9pZCAwO1xuXG4gICAgICAgIGlmICh0aGlzLl9vcHRpb25zLnRvcG9sb2d5ID09IDYpIHtcbiAgICAgICAgICB0ZXN0cyA9IFtbcFswXSArIDIsIHBbMV1dLCBbcFswXSArIDEsIHBbMV0gLSAxXSwgW3BbMF0gLSAxLCBwWzFdIC0gMV0sIFtwWzBdIC0gMiwgcFsxXV0sIFtwWzBdIC0gMSwgcFsxXSArIDFdLCBbcFswXSArIDEsIHBbMV0gKyAxXV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGVzdHMgPSBbW3BbMF0gKyAxLCBwWzFdXSwgW3BbMF0gLSAxLCBwWzFdXSwgW3BbMF0sIHBbMV0gKyAxXSwgW3BbMF0sIHBbMV0gLSAxXV07XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlc3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGtleSA9IHRoaXMuX3BvaW50S2V5KHRlc3RzW2ldKTtcblxuICAgICAgICAgIGlmIChjb25uZWN0ZWRba2V5XSA9PSBudWxsICYmIHRoaXMuX2ZyZWVTcGFjZSh0ZXN0c1tpXVswXSwgdGVzdHNbaV1bMV0sIHZhbHVlKSkge1xuICAgICAgICAgICAgY29ubmVjdGVkW2tleV0gPSB0ZXN0c1tpXTtcblxuICAgICAgICAgICAgaWYgKCFrZWVwTm90Q29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgIGRlbGV0ZSBub3RDb25uZWN0ZWRba2V5XTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3RhY2sucHVzaCh0ZXN0c1tpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90bzI3Ll90dW5uZWxUb0Nvbm5lY3RlZCA9IGZ1bmN0aW9uIF90dW5uZWxUb0Nvbm5lY3RlZCh0bywgZnJvbSwgY29ubmVjdGVkLCBub3RDb25uZWN0ZWQsIHZhbHVlLCBjb25uZWN0aW9uQ2FsbGJhY2spIHtcbiAgICAgIHZhciBhLCBiO1xuXG4gICAgICBpZiAoZnJvbVswXSA8IHRvWzBdKSB7XG4gICAgICAgIGEgPSBmcm9tO1xuICAgICAgICBiID0gdG87XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhID0gdG87XG4gICAgICAgIGIgPSBmcm9tO1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciB4eCA9IGFbMF07IHh4IDw9IGJbMF07IHh4KyspIHtcbiAgICAgICAgdGhpcy5fbWFwW3h4XVthWzFdXSA9IHZhbHVlO1xuICAgICAgICB2YXIgcCA9IFt4eCwgYVsxXV07XG5cbiAgICAgICAgdmFyIHBrZXkgPSB0aGlzLl9wb2ludEtleShwKTtcblxuICAgICAgICBjb25uZWN0ZWRbcGtleV0gPSBwO1xuICAgICAgICBkZWxldGUgbm90Q29ubmVjdGVkW3BrZXldO1xuICAgICAgfVxuXG4gICAgICBpZiAoY29ubmVjdGlvbkNhbGxiYWNrICYmIGFbMF0gPCBiWzBdKSB7XG4gICAgICAgIGNvbm5lY3Rpb25DYWxsYmFjayhhLCBbYlswXSwgYVsxXV0pO1xuICAgICAgfSAvLyB4IGlzIG5vdyBmaXhlZFxuXG5cbiAgICAgIHZhciB4ID0gYlswXTtcblxuICAgICAgaWYgKGZyb21bMV0gPCB0b1sxXSkge1xuICAgICAgICBhID0gZnJvbTtcbiAgICAgICAgYiA9IHRvO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYSA9IHRvO1xuICAgICAgICBiID0gZnJvbTtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgeXkgPSBhWzFdOyB5eSA8IGJbMV07IHl5KyspIHtcbiAgICAgICAgdGhpcy5fbWFwW3hdW3l5XSA9IHZhbHVlO1xuICAgICAgICB2YXIgX3AyID0gW3gsIHl5XTtcblxuICAgICAgICB2YXIgX3BrZXkgPSB0aGlzLl9wb2ludEtleShfcDIpO1xuXG4gICAgICAgIGNvbm5lY3RlZFtfcGtleV0gPSBfcDI7XG4gICAgICAgIGRlbGV0ZSBub3RDb25uZWN0ZWRbX3BrZXldO1xuICAgICAgfVxuXG4gICAgICBpZiAoY29ubmVjdGlvbkNhbGxiYWNrICYmIGFbMV0gPCBiWzFdKSB7XG4gICAgICAgIGNvbm5lY3Rpb25DYWxsYmFjayhbYlswXSwgYVsxXV0sIFtiWzBdLCBiWzFdXSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90bzI3Ll90dW5uZWxUb0Nvbm5lY3RlZDYgPSBmdW5jdGlvbiBfdHVubmVsVG9Db25uZWN0ZWQ2KHRvLCBmcm9tLCBjb25uZWN0ZWQsIG5vdENvbm5lY3RlZCwgdmFsdWUsIGNvbm5lY3Rpb25DYWxsYmFjaykge1xuICAgICAgdmFyIGEsIGI7XG5cbiAgICAgIGlmIChmcm9tWzBdIDwgdG9bMF0pIHtcbiAgICAgICAgYSA9IGZyb207XG4gICAgICAgIGIgPSB0bztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGEgPSB0bztcbiAgICAgICAgYiA9IGZyb207XG4gICAgICB9IC8vIHR1bm5lbCBkaWFnb25hbGx5IHVudGlsIGhvcml6b250YWxseSBsZXZlbFxuXG5cbiAgICAgIHZhciB4eCA9IGFbMF07XG4gICAgICB2YXIgeXkgPSBhWzFdO1xuXG4gICAgICB3aGlsZSAoISh4eCA9PSBiWzBdICYmIHl5ID09IGJbMV0pKSB7XG4gICAgICAgIHZhciBzdGVwV2lkdGggPSAyO1xuXG4gICAgICAgIGlmICh5eSA8IGJbMV0pIHtcbiAgICAgICAgICB5eSsrO1xuICAgICAgICAgIHN0ZXBXaWR0aCA9IDE7XG4gICAgICAgIH0gZWxzZSBpZiAoeXkgPiBiWzFdKSB7XG4gICAgICAgICAgeXktLTtcbiAgICAgICAgICBzdGVwV2lkdGggPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHh4IDwgYlswXSkge1xuICAgICAgICAgIHh4ICs9IHN0ZXBXaWR0aDtcbiAgICAgICAgfSBlbHNlIGlmICh4eCA+IGJbMF0pIHtcbiAgICAgICAgICB4eCAtPSBzdGVwV2lkdGg7XG4gICAgICAgIH0gZWxzZSBpZiAoYlsxXSAlIDIpIHtcbiAgICAgICAgICAvLyBXb24ndCBzdGVwIG91dHNpZGUgbWFwIGlmIGRlc3RpbmF0aW9uIG9uIGlzIG1hcCdzIHJpZ2h0IGVkZ2VcbiAgICAgICAgICB4eCAtPSBzdGVwV2lkdGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gZGl0dG8gZm9yIGxlZnQgZWRnZVxuICAgICAgICAgIHh4ICs9IHN0ZXBXaWR0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX21hcFt4eF1beXldID0gdmFsdWU7XG4gICAgICAgIHZhciBwID0gW3h4LCB5eV07XG5cbiAgICAgICAgdmFyIHBrZXkgPSB0aGlzLl9wb2ludEtleShwKTtcblxuICAgICAgICBjb25uZWN0ZWRbcGtleV0gPSBwO1xuICAgICAgICBkZWxldGUgbm90Q29ubmVjdGVkW3BrZXldO1xuICAgICAgfVxuXG4gICAgICBpZiAoY29ubmVjdGlvbkNhbGxiYWNrKSB7XG4gICAgICAgIGNvbm5lY3Rpb25DYWxsYmFjayhmcm9tLCB0byk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90bzI3Ll9mcmVlU3BhY2UgPSBmdW5jdGlvbiBfZnJlZVNwYWNlKHgsIHksIHZhbHVlKSB7XG4gICAgICByZXR1cm4geCA+PSAwICYmIHggPCB0aGlzLl93aWR0aCAmJiB5ID49IDAgJiYgeSA8IHRoaXMuX2hlaWdodCAmJiB0aGlzLl9tYXBbeF1beV0gPT0gdmFsdWU7XG4gICAgfTtcblxuICAgIF9wcm90bzI3Ll9wb2ludEtleSA9IGZ1bmN0aW9uIF9wb2ludEtleShwKSB7XG4gICAgICByZXR1cm4gcFswXSArIFwiLlwiICsgcFsxXTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENlbGx1bGFyO1xuICB9KE1hcCk7XG5cbiAgdmFyIEZFQVRVUkVTID0ge1xuICAgIFwicm9vbVwiOiBSb29tLFxuICAgIFwiY29ycmlkb3JcIjogQ29ycmlkb3JcbiAgfTtcbiAgLyoqXG4gICAqIFJhbmRvbSBkdW5nZW9uIGdlbmVyYXRvciB1c2luZyBodW1hbi1saWtlIGRpZ2dpbmcgcGF0dGVybnMuXG4gICAqIEhlYXZpbHkgYmFzZWQgb24gTWlrZSBBbmRlcnNvbidzIGlkZWFzIGZyb20gdGhlIFwiVHlyYW50XCIgYWxnbywgbWVudGlvbmVkIGF0XG4gICAqIGh0dHA6Ly93d3cucm9ndWViYXNpbi5yb2d1ZWxpa2VkZXZlbG9wbWVudC5vcmcvaW5kZXgucGhwP3RpdGxlPUR1bmdlb24tQnVpbGRpbmdfQWxnb3JpdGhtLlxuICAgKi9cblxuICB2YXIgRGlnZ2VyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfRHVuZ2VvbjIpIHtcbiAgICBfaW5oZXJpdHNMb29zZShEaWdnZXIsIF9EdW5nZW9uMik7XG5cbiAgICBmdW5jdGlvbiBEaWdnZXIod2lkdGgsIGhlaWdodCwgb3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzMTU7XG5cbiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuXG4gICAgICBfdGhpczE1ID0gX0R1bmdlb24yLmNhbGwodGhpcywgd2lkdGgsIGhlaWdodCkgfHwgdGhpcztcbiAgICAgIF90aGlzMTUuX29wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgcm9vbVdpZHRoOiBbMywgOV0sXG4gICAgICAgIHJvb21IZWlnaHQ6IFszLCA1XSxcbiAgICAgICAgY29ycmlkb3JMZW5ndGg6IFszLCAxMF0sXG4gICAgICAgIGR1Z1BlcmNlbnRhZ2U6IDAuMixcbiAgICAgICAgdGltZUxpbWl0OiAxMDAwXG4gICAgICAgIC8qIHdlIHN0b3AgYWZ0ZXIgdGhpcyBtdWNoIHRpbWUgaGFzIHBhc3NlZCAobXNlYykgKi9cblxuICAgICAgfSwgb3B0aW9ucyk7XG4gICAgICBfdGhpczE1Ll9mZWF0dXJlcyA9IHtcbiAgICAgICAgXCJyb29tXCI6IDQsXG4gICAgICAgIFwiY29ycmlkb3JcIjogNFxuICAgICAgfTtcbiAgICAgIF90aGlzMTUuX21hcCA9IFtdO1xuICAgICAgX3RoaXMxNS5fZmVhdHVyZUF0dGVtcHRzID0gMjA7XG4gICAgICAvKiBob3cgbWFueSB0aW1lcyBkbyB3ZSB0cnkgdG8gY3JlYXRlIGEgZmVhdHVyZSBvbiBhIHN1aXRhYmxlIHdhbGwgKi9cblxuICAgICAgX3RoaXMxNS5fd2FsbHMgPSB7fTtcbiAgICAgIC8qIHRoZXNlIGFyZSBhdmFpbGFibGUgZm9yIGRpZ2dpbmcgKi9cblxuICAgICAgX3RoaXMxNS5fZHVnID0gMDtcbiAgICAgIF90aGlzMTUuX2RpZ0NhbGxiYWNrID0gX3RoaXMxNS5fZGlnQ2FsbGJhY2suYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzMTUpKTtcbiAgICAgIF90aGlzMTUuX2NhbkJlRHVnQ2FsbGJhY2sgPSBfdGhpczE1Ll9jYW5CZUR1Z0NhbGxiYWNrLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczE1KSk7XG4gICAgICBfdGhpczE1Ll9pc1dhbGxDYWxsYmFjayA9IF90aGlzMTUuX2lzV2FsbENhbGxiYWNrLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczE1KSk7XG4gICAgICBfdGhpczE1Ll9wcmlvcml0eVdhbGxDYWxsYmFjayA9IF90aGlzMTUuX3ByaW9yaXR5V2FsbENhbGxiYWNrLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczE1KSk7XG4gICAgICByZXR1cm4gX3RoaXMxNTtcbiAgICB9XG5cbiAgICB2YXIgX3Byb3RvMjggPSBEaWdnZXIucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvMjguY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGNhbGxiYWNrKSB7XG4gICAgICB0aGlzLl9yb29tcyA9IFtdO1xuICAgICAgdGhpcy5fY29ycmlkb3JzID0gW107XG4gICAgICB0aGlzLl9tYXAgPSB0aGlzLl9maWxsTWFwKDEpO1xuICAgICAgdGhpcy5fd2FsbHMgPSB7fTtcbiAgICAgIHRoaXMuX2R1ZyA9IDA7XG4gICAgICB2YXIgYXJlYSA9ICh0aGlzLl93aWR0aCAtIDIpICogKHRoaXMuX2hlaWdodCAtIDIpO1xuXG4gICAgICB0aGlzLl9maXJzdFJvb20oKTtcblxuICAgICAgdmFyIHQxID0gRGF0ZS5ub3coKTtcbiAgICAgIHZhciBwcmlvcml0eVdhbGxzO1xuXG4gICAgICBkbyB7XG4gICAgICAgIHByaW9yaXR5V2FsbHMgPSAwO1xuICAgICAgICB2YXIgdDIgPSBEYXRlLm5vdygpO1xuXG4gICAgICAgIGlmICh0MiAtIHQxID4gdGhpcy5fb3B0aW9ucy50aW1lTGltaXQpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvKiBmaW5kIGEgZ29vZCB3YWxsICovXG5cblxuICAgICAgICB2YXIgd2FsbCA9IHRoaXMuX2ZpbmRXYWxsKCk7XG5cbiAgICAgICAgaWYgKCF3YWxsKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLyogbm8gbW9yZSB3YWxscyAqL1xuXG5cbiAgICAgICAgdmFyIHBhcnRzID0gd2FsbC5zcGxpdChcIixcIik7XG4gICAgICAgIHZhciB4ID0gcGFyc2VJbnQocGFydHNbMF0pO1xuICAgICAgICB2YXIgeSA9IHBhcnNlSW50KHBhcnRzWzFdKTtcblxuICAgICAgICB2YXIgZGlyID0gdGhpcy5fZ2V0RGlnZ2luZ0RpcmVjdGlvbih4LCB5KTtcblxuICAgICAgICBpZiAoIWRpcikge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8qIHRoaXMgd2FsbCBpcyBub3Qgc3VpdGFibGUgKi9cbiAgICAgICAgLy9cdFx0Y29uc29sZS5sb2coXCJ3YWxsXCIsIHgsIHkpO1xuXG4gICAgICAgIC8qIHRyeSBhZGRpbmcgYSBmZWF0dXJlICovXG5cblxuICAgICAgICB2YXIgZmVhdHVyZUF0dGVtcHRzID0gMDtcblxuICAgICAgICBkbyB7XG4gICAgICAgICAgZmVhdHVyZUF0dGVtcHRzKys7XG5cbiAgICAgICAgICBpZiAodGhpcy5fdHJ5RmVhdHVyZSh4LCB5LCBkaXJbMF0sIGRpclsxXSkpIHtcbiAgICAgICAgICAgIC8qIGZlYXR1cmUgYWRkZWQgKi9cbiAgICAgICAgICAgIC8vaWYgKHRoaXMuX3Jvb21zLmxlbmd0aCArIHRoaXMuX2NvcnJpZG9ycy5sZW5ndGggPT0gMikgeyB0aGlzLl9yb29tc1swXS5hZGREb29yKHgsIHkpOyB9IC8qIGZpcnN0IHJvb20gb2ZpY2lhbGx5IGhhcyBkb29ycyAqL1xuICAgICAgICAgICAgdGhpcy5fcmVtb3ZlU3Vycm91bmRpbmdXYWxscyh4LCB5KTtcblxuICAgICAgICAgICAgdGhpcy5fcmVtb3ZlU3Vycm91bmRpbmdXYWxscyh4IC0gZGlyWzBdLCB5IC0gZGlyWzFdKTtcblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChmZWF0dXJlQXR0ZW1wdHMgPCB0aGlzLl9mZWF0dXJlQXR0ZW1wdHMpO1xuXG4gICAgICAgIGZvciAodmFyIGlkIGluIHRoaXMuX3dhbGxzKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX3dhbGxzW2lkXSA+IDEpIHtcbiAgICAgICAgICAgIHByaW9yaXR5V2FsbHMrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gd2hpbGUgKHRoaXMuX2R1ZyAvIGFyZWEgPCB0aGlzLl9vcHRpb25zLmR1Z1BlcmNlbnRhZ2UgfHwgcHJpb3JpdHlXYWxscyk7XG4gICAgICAvKiBmaXhtZSBudW1iZXIgb2YgcHJpb3JpdHkgd2FsbHMgKi9cblxuXG4gICAgICB0aGlzLl9hZGREb29ycygpO1xuXG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl93aWR0aDsgaSsrKSB7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLl9oZWlnaHQ7IGorKykge1xuICAgICAgICAgICAgY2FsbGJhY2soaSwgaiwgdGhpcy5fbWFwW2ldW2pdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5fd2FsbHMgPSB7fTtcbiAgICAgIHRoaXMuX21hcCA9IFtdO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIF9wcm90bzI4Ll9kaWdDYWxsYmFjayA9IGZ1bmN0aW9uIF9kaWdDYWxsYmFjayh4LCB5LCB2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09IDAgfHwgdmFsdWUgPT0gMikge1xuICAgICAgICAvKiBlbXB0eSAqL1xuICAgICAgICB0aGlzLl9tYXBbeF1beV0gPSAwO1xuICAgICAgICB0aGlzLl9kdWcrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8qIHdhbGwgKi9cbiAgICAgICAgdGhpcy5fd2FsbHNbeCArIFwiLFwiICsgeV0gPSAxO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8yOC5faXNXYWxsQ2FsbGJhY2sgPSBmdW5jdGlvbiBfaXNXYWxsQ2FsbGJhY2soeCwgeSkge1xuICAgICAgaWYgKHggPCAwIHx8IHkgPCAwIHx8IHggPj0gdGhpcy5fd2lkdGggfHwgeSA+PSB0aGlzLl9oZWlnaHQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5fbWFwW3hdW3ldID09IDE7XG4gICAgfTtcblxuICAgIF9wcm90bzI4Ll9jYW5CZUR1Z0NhbGxiYWNrID0gZnVuY3Rpb24gX2NhbkJlRHVnQ2FsbGJhY2soeCwgeSkge1xuICAgICAgaWYgKHggPCAxIHx8IHkgPCAxIHx8IHggKyAxID49IHRoaXMuX3dpZHRoIHx8IHkgKyAxID49IHRoaXMuX2hlaWdodCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLl9tYXBbeF1beV0gPT0gMTtcbiAgICB9O1xuXG4gICAgX3Byb3RvMjguX3ByaW9yaXR5V2FsbENhbGxiYWNrID0gZnVuY3Rpb24gX3ByaW9yaXR5V2FsbENhbGxiYWNrKHgsIHkpIHtcbiAgICAgIHRoaXMuX3dhbGxzW3ggKyBcIixcIiArIHldID0gMjtcbiAgICB9O1xuXG4gICAgX3Byb3RvMjguX2ZpcnN0Um9vbSA9IGZ1bmN0aW9uIF9maXJzdFJvb20oKSB7XG4gICAgICB2YXIgY3ggPSBNYXRoLmZsb29yKHRoaXMuX3dpZHRoIC8gMik7XG4gICAgICB2YXIgY3kgPSBNYXRoLmZsb29yKHRoaXMuX2hlaWdodCAvIDIpO1xuICAgICAgdmFyIHJvb20gPSBSb29tLmNyZWF0ZVJhbmRvbUNlbnRlcihjeCwgY3ksIHRoaXMuX29wdGlvbnMpO1xuXG4gICAgICB0aGlzLl9yb29tcy5wdXNoKHJvb20pO1xuXG4gICAgICByb29tLmNyZWF0ZSh0aGlzLl9kaWdDYWxsYmFjayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhIHN1aXRhYmxlIHdhbGxcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8yOC5fZmluZFdhbGwgPSBmdW5jdGlvbiBfZmluZFdhbGwoKSB7XG4gICAgICB2YXIgcHJpbzEgPSBbXTtcbiAgICAgIHZhciBwcmlvMiA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBfaWQyIGluIHRoaXMuX3dhbGxzKSB7XG4gICAgICAgIHZhciBwcmlvID0gdGhpcy5fd2FsbHNbX2lkMl07XG5cbiAgICAgICAgaWYgKHByaW8gPT0gMikge1xuICAgICAgICAgIHByaW8yLnB1c2goX2lkMik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJpbzEucHVzaChfaWQyKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgYXJyID0gcHJpbzIubGVuZ3RoID8gcHJpbzIgOiBwcmlvMTtcblxuICAgICAgaWYgKCFhcnIubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgLyogbm8gd2FsbHMgOi8gKi9cblxuXG4gICAgICB2YXIgaWQgPSBSTkckMS5nZXRJdGVtKGFyci5zb3J0KCkpOyAvLyBzb3J0IHRvIG1ha2UgdGhlIG9yZGVyIGRldGVybWluaXN0aWNcblxuICAgICAgZGVsZXRlIHRoaXMuX3dhbGxzW2lkXTtcbiAgICAgIHJldHVybiBpZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJpZXMgYWRkaW5nIGEgZmVhdHVyZVxuICAgICAqIEByZXR1cm5zIHtib29sfSB3YXMgdGhpcyBhIHN1Y2Nlc3NmdWwgdHJ5P1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90bzI4Ll90cnlGZWF0dXJlID0gZnVuY3Rpb24gX3RyeUZlYXR1cmUoeCwgeSwgZHgsIGR5KSB7XG4gICAgICB2YXIgZmVhdHVyZU5hbWUgPSBSTkckMS5nZXRXZWlnaHRlZFZhbHVlKHRoaXMuX2ZlYXR1cmVzKTtcbiAgICAgIHZhciBjdG9yID0gRkVBVFVSRVNbZmVhdHVyZU5hbWVdO1xuICAgICAgdmFyIGZlYXR1cmUgPSBjdG9yLmNyZWF0ZVJhbmRvbUF0KHgsIHksIGR4LCBkeSwgdGhpcy5fb3B0aW9ucyk7XG5cbiAgICAgIGlmICghZmVhdHVyZS5pc1ZhbGlkKHRoaXMuX2lzV2FsbENhbGxiYWNrLCB0aGlzLl9jYW5CZUR1Z0NhbGxiYWNrKSkge1xuICAgICAgICAvL1x0XHRjb25zb2xlLmxvZyhcIm5vdCB2YWxpZFwiKTtcbiAgICAgICAgLy9cdFx0ZmVhdHVyZS5kZWJ1ZygpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGZlYXR1cmUuY3JlYXRlKHRoaXMuX2RpZ0NhbGxiYWNrKTsgLy9cdGZlYXR1cmUuZGVidWcoKTtcblxuICAgICAgaWYgKGZlYXR1cmUgaW5zdGFuY2VvZiBSb29tKSB7XG4gICAgICAgIHRoaXMuX3Jvb21zLnB1c2goZmVhdHVyZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChmZWF0dXJlIGluc3RhbmNlb2YgQ29ycmlkb3IpIHtcbiAgICAgICAgZmVhdHVyZS5jcmVhdGVQcmlvcml0eVdhbGxzKHRoaXMuX3ByaW9yaXR5V2FsbENhbGxiYWNrKTtcblxuICAgICAgICB0aGlzLl9jb3JyaWRvcnMucHVzaChmZWF0dXJlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIF9wcm90bzI4Ll9yZW1vdmVTdXJyb3VuZGluZ1dhbGxzID0gZnVuY3Rpb24gX3JlbW92ZVN1cnJvdW5kaW5nV2FsbHMoY3gsIGN5KSB7XG4gICAgICB2YXIgZGVsdGFzID0gRElSU1s0XTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkZWx0YXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGRlbHRhID0gZGVsdGFzW2ldO1xuICAgICAgICB2YXIgeCA9IGN4ICsgZGVsdGFbMF07XG4gICAgICAgIHZhciB5ID0gY3kgKyBkZWx0YVsxXTtcbiAgICAgICAgZGVsZXRlIHRoaXMuX3dhbGxzW3ggKyBcIixcIiArIHldO1xuICAgICAgICB4ID0gY3ggKyAyICogZGVsdGFbMF07XG4gICAgICAgIHkgPSBjeSArIDIgKiBkZWx0YVsxXTtcbiAgICAgICAgZGVsZXRlIHRoaXMuX3dhbGxzW3ggKyBcIixcIiArIHldO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHZlY3RvciBpbiBcImRpZ2dpbmdcIiBkaXJlY3Rpb24sIG9yIGZhbHNlLCBpZiB0aGlzIGRvZXMgbm90IGV4aXN0IChvciBpcyBub3QgdW5pcXVlKVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90bzI4Ll9nZXREaWdnaW5nRGlyZWN0aW9uID0gZnVuY3Rpb24gX2dldERpZ2dpbmdEaXJlY3Rpb24oY3gsIGN5KSB7XG4gICAgICBpZiAoY3ggPD0gMCB8fCBjeSA8PSAwIHx8IGN4ID49IHRoaXMuX3dpZHRoIC0gMSB8fCBjeSA+PSB0aGlzLl9oZWlnaHQgLSAxKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVzdWx0ID0gbnVsbDtcbiAgICAgIHZhciBkZWx0YXMgPSBESVJTWzRdO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRlbHRhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZGVsdGEgPSBkZWx0YXNbaV07XG4gICAgICAgIHZhciB4ID0gY3ggKyBkZWx0YVswXTtcbiAgICAgICAgdmFyIHkgPSBjeSArIGRlbHRhWzFdO1xuXG4gICAgICAgIGlmICghdGhpcy5fbWFwW3hdW3ldKSB7XG4gICAgICAgICAgLyogdGhlcmUgYWxyZWFkeSBpcyBhbm90aGVyIGVtcHR5IG5laWdoYm9yISAqL1xuICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJlc3VsdCA9IGRlbHRhO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvKiBubyBlbXB0eSBuZWlnaGJvciAqL1xuXG5cbiAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gWy1yZXN1bHRbMF0sIC1yZXN1bHRbMV1dO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kIGVtcHR5IHNwYWNlcyBzdXJyb3VuZGluZyByb29tcywgYW5kIGFwcGx5IGRvb3JzLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90bzI4Ll9hZGREb29ycyA9IGZ1bmN0aW9uIF9hZGREb29ycygpIHtcbiAgICAgIHZhciBkYXRhID0gdGhpcy5fbWFwO1xuXG4gICAgICBmdW5jdGlvbiBpc1dhbGxDYWxsYmFjayh4LCB5KSB7XG4gICAgICAgIHJldHVybiBkYXRhW3hdW3ldID09IDE7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fcm9vbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHJvb20gPSB0aGlzLl9yb29tc1tpXTtcbiAgICAgICAgcm9vbS5jbGVhckRvb3JzKCk7XG4gICAgICAgIHJvb20uYWRkRG9vcnMoaXNXYWxsQ2FsbGJhY2spO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gRGlnZ2VyO1xuICB9KER1bmdlb24pO1xuICAvKipcbiAgICogSm9pbiBsaXN0cyB3aXRoIFwiaVwiIGFuZCBcImkrMVwiXG4gICAqL1xuXG5cbiAgZnVuY3Rpb24gYWRkVG9MaXN0KGksIEwsIFIpIHtcbiAgICBSW0xbaSArIDFdXSA9IFJbaV07XG4gICAgTFtSW2ldXSA9IExbaSArIDFdO1xuICAgIFJbaV0gPSBpICsgMTtcbiAgICBMW2kgKyAxXSA9IGk7XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZSBcImlcIiBmcm9tIGl0cyBsaXN0XG4gICAqL1xuXG5cbiAgZnVuY3Rpb24gcmVtb3ZlRnJvbUxpc3QoaSwgTCwgUikge1xuICAgIFJbTFtpXV0gPSBSW2ldO1xuICAgIExbUltpXV0gPSBMW2ldO1xuICAgIFJbaV0gPSBpO1xuICAgIExbaV0gPSBpO1xuICB9XG4gIC8qKlxuICAgKiBNYXplIGdlbmVyYXRvciAtIEVsbGVyJ3MgYWxnb3JpdGhtXG4gICAqIFNlZSBodHRwOi8vaG9tZXBhZ2VzLmN3aS5ubC9+dHJvbXAvbWF6ZS5odG1sIGZvciBleHBsYW5hdGlvblxuICAgKi9cblxuXG4gIHZhciBFbGxlck1hemUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9NYXA0KSB7XG4gICAgX2luaGVyaXRzTG9vc2UoRWxsZXJNYXplLCBfTWFwNCk7XG5cbiAgICBmdW5jdGlvbiBFbGxlck1hemUoKSB7XG4gICAgICByZXR1cm4gX01hcDQuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cblxuICAgIHZhciBfcHJvdG8yOSA9IEVsbGVyTWF6ZS5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8yOS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoY2FsbGJhY2spIHtcbiAgICAgIHZhciBtYXAgPSB0aGlzLl9maWxsTWFwKDEpO1xuXG4gICAgICB2YXIgdyA9IE1hdGguY2VpbCgodGhpcy5fd2lkdGggLSAyKSAvIDIpO1xuICAgICAgdmFyIHJhbmQgPSA5IC8gMjQ7XG4gICAgICB2YXIgTCA9IFtdO1xuICAgICAgdmFyIFIgPSBbXTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3OyBpKyspIHtcbiAgICAgICAgTC5wdXNoKGkpO1xuICAgICAgICBSLnB1c2goaSk7XG4gICAgICB9XG5cbiAgICAgIEwucHVzaCh3IC0gMSk7XG4gICAgICAvKiBmYWtlIHN0b3AtYmxvY2sgYXQgdGhlIHJpZ2h0IHNpZGUgKi9cblxuICAgICAgdmFyIGo7XG5cbiAgICAgIGZvciAoaiA9IDE7IGogKyAzIDwgdGhpcy5faGVpZ2h0OyBqICs9IDIpIHtcbiAgICAgICAgLyogb25lIHJvdyAqL1xuICAgICAgICBmb3IgKHZhciBfaTQgPSAwOyBfaTQgPCB3OyBfaTQrKykge1xuICAgICAgICAgIC8qIGNlbGwgY29vcmRzICh3aWxsIGJlIGFsd2F5cyBlbXB0eSkgKi9cbiAgICAgICAgICB2YXIgeCA9IDIgKiBfaTQgKyAxO1xuICAgICAgICAgIHZhciB5ID0gajtcbiAgICAgICAgICBtYXBbeF1beV0gPSAwO1xuICAgICAgICAgIC8qIHJpZ2h0IGNvbm5lY3Rpb24gKi9cblxuICAgICAgICAgIGlmIChfaTQgIT0gTFtfaTQgKyAxXSAmJiBSTkckMS5nZXRVbmlmb3JtKCkgPiByYW5kKSB7XG4gICAgICAgICAgICBhZGRUb0xpc3QoX2k0LCBMLCBSKTtcbiAgICAgICAgICAgIG1hcFt4ICsgMV1beV0gPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvKiBib3R0b20gY29ubmVjdGlvbiAqL1xuXG5cbiAgICAgICAgICBpZiAoX2k0ICE9IExbX2k0XSAmJiBSTkckMS5nZXRVbmlmb3JtKCkgPiByYW5kKSB7XG4gICAgICAgICAgICAvKiByZW1vdmUgY29ubmVjdGlvbiAqL1xuICAgICAgICAgICAgcmVtb3ZlRnJvbUxpc3QoX2k0LCBMLCBSKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLyogY3JlYXRlIGNvbm5lY3Rpb24gKi9cbiAgICAgICAgICAgIG1hcFt4XVt5ICsgMV0gPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLyogbGFzdCByb3cgKi9cblxuXG4gICAgICBmb3IgKHZhciBfaTUgPSAwOyBfaTUgPCB3OyBfaTUrKykge1xuICAgICAgICAvKiBjZWxsIGNvb3JkcyAod2lsbCBiZSBhbHdheXMgZW1wdHkpICovXG4gICAgICAgIHZhciBfeDIgPSAyICogX2k1ICsgMTtcblxuICAgICAgICB2YXIgX3kyID0gajtcbiAgICAgICAgbWFwW194Ml1bX3kyXSA9IDA7XG4gICAgICAgIC8qIHJpZ2h0IGNvbm5lY3Rpb24gKi9cblxuICAgICAgICBpZiAoX2k1ICE9IExbX2k1ICsgMV0gJiYgKF9pNSA9PSBMW19pNV0gfHwgUk5HJDEuZ2V0VW5pZm9ybSgpID4gcmFuZCkpIHtcbiAgICAgICAgICAvKiBkaWcgcmlnaHQgYWxzbyBpZiB0aGUgY2VsbCBpcyBzZXBhcmF0ZWQsIHNvIGl0IGdldHMgY29ubmVjdGVkIHRvIHRoZSByZXN0IG9mIG1hemUgKi9cbiAgICAgICAgICBhZGRUb0xpc3QoX2k1LCBMLCBSKTtcbiAgICAgICAgICBtYXBbX3gyICsgMV1bX3kyXSA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICByZW1vdmVGcm9tTGlzdChfaTUsIEwsIFIpO1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBfaTYgPSAwOyBfaTYgPCB0aGlzLl93aWR0aDsgX2k2KyspIHtcbiAgICAgICAgZm9yICh2YXIgX2ogPSAwOyBfaiA8IHRoaXMuX2hlaWdodDsgX2orKykge1xuICAgICAgICAgIGNhbGxiYWNrKF9pNiwgX2osIG1hcFtfaTZdW19qXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIHJldHVybiBFbGxlck1hemU7XG4gIH0oTWFwKTtcbiAgLyoqXG4gICAqIEBjbGFzcyBSZWN1cnNpdmVseSBkaXZpZGVkIG1hemUsIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTWF6ZV9nZW5lcmF0aW9uX2FsZ29yaXRobSNSZWN1cnNpdmVfZGl2aXNpb25fbWV0aG9kXG4gICAqIEBhdWdtZW50cyBST1QuTWFwXG4gICAqL1xuXG5cbiAgdmFyIERpdmlkZWRNYXplID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfTWFwNSkge1xuICAgIF9pbmhlcml0c0xvb3NlKERpdmlkZWRNYXplLCBfTWFwNSk7XG5cbiAgICBmdW5jdGlvbiBEaXZpZGVkTWF6ZSgpIHtcbiAgICAgIHZhciBfdGhpczE2O1xuXG4gICAgICBfdGhpczE2ID0gX01hcDUuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgX3RoaXMxNi5fc3RhY2sgPSBbXTtcbiAgICAgIF90aGlzMTYuX21hcCA9IFtdO1xuICAgICAgcmV0dXJuIF90aGlzMTY7XG4gICAgfVxuXG4gICAgdmFyIF9wcm90bzMwID0gRGl2aWRlZE1hemUucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvMzAuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGNhbGxiYWNrKSB7XG4gICAgICB2YXIgdyA9IHRoaXMuX3dpZHRoO1xuICAgICAgdmFyIGggPSB0aGlzLl9oZWlnaHQ7XG4gICAgICB0aGlzLl9tYXAgPSBbXTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3OyBpKyspIHtcbiAgICAgICAgdGhpcy5fbWFwLnB1c2goW10pO1xuXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaDsgaisrKSB7XG4gICAgICAgICAgdmFyIGJvcmRlciA9IGkgPT0gMCB8fCBqID09IDAgfHwgaSArIDEgPT0gdyB8fCBqICsgMSA9PSBoO1xuXG4gICAgICAgICAgdGhpcy5fbWFwW2ldLnB1c2goYm9yZGVyID8gMSA6IDApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3N0YWNrID0gW1sxLCAxLCB3IC0gMiwgaCAtIDJdXTtcblxuICAgICAgdGhpcy5fcHJvY2VzcygpO1xuXG4gICAgICBmb3IgKHZhciBfaTcgPSAwOyBfaTcgPCB3OyBfaTcrKykge1xuICAgICAgICBmb3IgKHZhciBfajIgPSAwOyBfajIgPCBoOyBfajIrKykge1xuICAgICAgICAgIGNhbGxiYWNrKF9pNywgX2oyLCB0aGlzLl9tYXBbX2k3XVtfajJdKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLl9tYXAgPSBbXTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBfcHJvdG8zMC5fcHJvY2VzcyA9IGZ1bmN0aW9uIF9wcm9jZXNzKCkge1xuICAgICAgd2hpbGUgKHRoaXMuX3N0YWNrLmxlbmd0aCkge1xuICAgICAgICB2YXIgcm9vbSA9IHRoaXMuX3N0YWNrLnNoaWZ0KCk7XG4gICAgICAgIC8qIFtsZWZ0LCB0b3AsIHJpZ2h0LCBib3R0b21dICovXG5cblxuICAgICAgICB0aGlzLl9wYXJ0aXRpb25Sb29tKHJvb20pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8zMC5fcGFydGl0aW9uUm9vbSA9IGZ1bmN0aW9uIF9wYXJ0aXRpb25Sb29tKHJvb20pIHtcbiAgICAgIHZhciBhdmFpbFggPSBbXTtcbiAgICAgIHZhciBhdmFpbFkgPSBbXTtcblxuICAgICAgZm9yICh2YXIgaSA9IHJvb21bMF0gKyAxOyBpIDwgcm9vbVsyXTsgaSsrKSB7XG4gICAgICAgIHZhciB0b3AgPSB0aGlzLl9tYXBbaV1bcm9vbVsxXSAtIDFdO1xuICAgICAgICB2YXIgYm90dG9tID0gdGhpcy5fbWFwW2ldW3Jvb21bM10gKyAxXTtcblxuICAgICAgICBpZiAodG9wICYmIGJvdHRvbSAmJiAhKGkgJSAyKSkge1xuICAgICAgICAgIGF2YWlsWC5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGogPSByb29tWzFdICsgMTsgaiA8IHJvb21bM107IGorKykge1xuICAgICAgICB2YXIgbGVmdCA9IHRoaXMuX21hcFtyb29tWzBdIC0gMV1bal07XG4gICAgICAgIHZhciByaWdodCA9IHRoaXMuX21hcFtyb29tWzJdICsgMV1bal07XG5cbiAgICAgICAgaWYgKGxlZnQgJiYgcmlnaHQgJiYgIShqICUgMikpIHtcbiAgICAgICAgICBhdmFpbFkucHVzaChqKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIWF2YWlsWC5sZW5ndGggfHwgIWF2YWlsWS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgeCA9IFJORyQxLmdldEl0ZW0oYXZhaWxYKTtcbiAgICAgIHZhciB5ID0gUk5HJDEuZ2V0SXRlbShhdmFpbFkpO1xuICAgICAgdGhpcy5fbWFwW3hdW3ldID0gMTtcbiAgICAgIHZhciB3YWxscyA9IFtdO1xuICAgICAgdmFyIHcgPSBbXTtcbiAgICAgIHdhbGxzLnB1c2godyk7XG4gICAgICAvKiBsZWZ0IHBhcnQgKi9cblxuICAgICAgZm9yICh2YXIgX2k4ID0gcm9vbVswXTsgX2k4IDwgeDsgX2k4KyspIHtcbiAgICAgICAgdGhpcy5fbWFwW19pOF1beV0gPSAxO1xuICAgICAgICBpZiAoX2k4ICUgMikgdy5wdXNoKFtfaTgsIHldKTtcbiAgICAgIH1cblxuICAgICAgdyA9IFtdO1xuICAgICAgd2FsbHMucHVzaCh3KTtcbiAgICAgIC8qIHJpZ2h0IHBhcnQgKi9cblxuICAgICAgZm9yICh2YXIgX2k5ID0geCArIDE7IF9pOSA8PSByb29tWzJdOyBfaTkrKykge1xuICAgICAgICB0aGlzLl9tYXBbX2k5XVt5XSA9IDE7XG4gICAgICAgIGlmIChfaTkgJSAyKSB3LnB1c2goW19pOSwgeV0pO1xuICAgICAgfVxuXG4gICAgICB3ID0gW107XG4gICAgICB3YWxscy5wdXNoKHcpO1xuICAgICAgLyogdG9wIHBhcnQgKi9cblxuICAgICAgZm9yICh2YXIgX2ozID0gcm9vbVsxXTsgX2ozIDwgeTsgX2ozKyspIHtcbiAgICAgICAgdGhpcy5fbWFwW3hdW19qM10gPSAxO1xuICAgICAgICBpZiAoX2ozICUgMikgdy5wdXNoKFt4LCBfajNdKTtcbiAgICAgIH1cblxuICAgICAgdyA9IFtdO1xuICAgICAgd2FsbHMucHVzaCh3KTtcbiAgICAgIC8qIGJvdHRvbSBwYXJ0ICovXG5cbiAgICAgIGZvciAodmFyIF9qNCA9IHkgKyAxOyBfajQgPD0gcm9vbVszXTsgX2o0KyspIHtcbiAgICAgICAgdGhpcy5fbWFwW3hdW19qNF0gPSAxO1xuICAgICAgICBpZiAoX2o0ICUgMikgdy5wdXNoKFt4LCBfajRdKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNvbGlkID0gUk5HJDEuZ2V0SXRlbSh3YWxscyk7XG5cbiAgICAgIGZvciAodmFyIF9pMTAgPSAwOyBfaTEwIDwgd2FsbHMubGVuZ3RoOyBfaTEwKyspIHtcbiAgICAgICAgdmFyIF93ID0gd2FsbHNbX2kxMF07XG5cbiAgICAgICAgaWYgKF93ID09IHNvbGlkKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaG9sZSA9IFJORyQxLmdldEl0ZW0oX3cpO1xuICAgICAgICB0aGlzLl9tYXBbaG9sZVswXV1baG9sZVsxXV0gPSAwO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9zdGFjay5wdXNoKFtyb29tWzBdLCByb29tWzFdLCB4IC0gMSwgeSAtIDFdKTtcbiAgICAgIC8qIGxlZnQgdG9wICovXG5cblxuICAgICAgdGhpcy5fc3RhY2sucHVzaChbeCArIDEsIHJvb21bMV0sIHJvb21bMl0sIHkgLSAxXSk7XG4gICAgICAvKiByaWdodCB0b3AgKi9cblxuXG4gICAgICB0aGlzLl9zdGFjay5wdXNoKFtyb29tWzBdLCB5ICsgMSwgeCAtIDEsIHJvb21bM11dKTtcbiAgICAgIC8qIGxlZnQgYm90dG9tICovXG5cblxuICAgICAgdGhpcy5fc3RhY2sucHVzaChbeCArIDEsIHkgKyAxLCByb29tWzJdLCByb29tWzNdXSk7XG4gICAgICAvKiByaWdodCBib3R0b20gKi9cblxuICAgIH07XG5cbiAgICByZXR1cm4gRGl2aWRlZE1hemU7XG4gIH0oTWFwKTtcbiAgLyoqXG4gICAqIEljZXkncyBNYXplIGdlbmVyYXRvclxuICAgKiBTZWUgaHR0cDovL3d3dy5yb2d1ZWJhc2luLnJvZ3VlbGlrZWRldmVsb3BtZW50Lm9yZy9pbmRleC5waHA/dGl0bGU9U2ltcGxlX21hemUgZm9yIGV4cGxhbmF0aW9uXG4gICAqL1xuXG5cbiAgdmFyIEljZXlNYXplID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfTWFwNikge1xuICAgIF9pbmhlcml0c0xvb3NlKEljZXlNYXplLCBfTWFwNik7XG5cbiAgICBmdW5jdGlvbiBJY2V5TWF6ZSh3aWR0aCwgaGVpZ2h0LCByZWd1bGFyaXR5KSB7XG4gICAgICB2YXIgX3RoaXMxNztcblxuICAgICAgaWYgKHJlZ3VsYXJpdHkgPT09IHZvaWQgMCkge1xuICAgICAgICByZWd1bGFyaXR5ID0gMDtcbiAgICAgIH1cblxuICAgICAgX3RoaXMxNyA9IF9NYXA2LmNhbGwodGhpcywgd2lkdGgsIGhlaWdodCkgfHwgdGhpcztcbiAgICAgIF90aGlzMTcuX3JlZ3VsYXJpdHkgPSByZWd1bGFyaXR5O1xuICAgICAgX3RoaXMxNy5fbWFwID0gW107XG4gICAgICByZXR1cm4gX3RoaXMxNztcbiAgICB9XG5cbiAgICB2YXIgX3Byb3RvMzEgPSBJY2V5TWF6ZS5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8zMS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoY2FsbGJhY2spIHtcbiAgICAgIHZhciB3aWR0aCA9IHRoaXMuX3dpZHRoO1xuICAgICAgdmFyIGhlaWdodCA9IHRoaXMuX2hlaWdodDtcblxuICAgICAgdmFyIG1hcCA9IHRoaXMuX2ZpbGxNYXAoMSk7XG5cbiAgICAgIHdpZHRoIC09IHdpZHRoICUgMiA/IDEgOiAyO1xuICAgICAgaGVpZ2h0IC09IGhlaWdodCAlIDIgPyAxIDogMjtcbiAgICAgIHZhciBjeCA9IDA7XG4gICAgICB2YXIgY3kgPSAwO1xuICAgICAgdmFyIG54ID0gMDtcbiAgICAgIHZhciBueSA9IDA7XG4gICAgICB2YXIgZG9uZSA9IDA7XG4gICAgICB2YXIgYmxvY2tlZCA9IGZhbHNlO1xuICAgICAgdmFyIGRpcnMgPSBbWzAsIDBdLCBbMCwgMF0sIFswLCAwXSwgWzAsIDBdXTtcblxuICAgICAgZG8ge1xuICAgICAgICBjeCA9IDEgKyAyICogTWF0aC5mbG9vcihSTkckMS5nZXRVbmlmb3JtKCkgKiAod2lkdGggLSAxKSAvIDIpO1xuICAgICAgICBjeSA9IDEgKyAyICogTWF0aC5mbG9vcihSTkckMS5nZXRVbmlmb3JtKCkgKiAoaGVpZ2h0IC0gMSkgLyAyKTtcblxuICAgICAgICBpZiAoIWRvbmUpIHtcbiAgICAgICAgICBtYXBbY3hdW2N5XSA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIW1hcFtjeF1bY3ldKSB7XG4gICAgICAgICAgdGhpcy5fcmFuZG9taXplKGRpcnMpO1xuXG4gICAgICAgICAgZG8ge1xuICAgICAgICAgICAgaWYgKE1hdGguZmxvb3IoUk5HJDEuZ2V0VW5pZm9ybSgpICogKHRoaXMuX3JlZ3VsYXJpdHkgKyAxKSkgPT0gMCkge1xuICAgICAgICAgICAgICB0aGlzLl9yYW5kb21pemUoZGlycyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJsb2NrZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICAgICAgICBueCA9IGN4ICsgZGlyc1tpXVswXSAqIDI7XG4gICAgICAgICAgICAgIG55ID0gY3kgKyBkaXJzW2ldWzFdICogMjtcblxuICAgICAgICAgICAgICBpZiAodGhpcy5faXNGcmVlKG1hcCwgbngsIG55LCB3aWR0aCwgaGVpZ2h0KSkge1xuICAgICAgICAgICAgICAgIG1hcFtueF1bbnldID0gMDtcbiAgICAgICAgICAgICAgICBtYXBbY3ggKyBkaXJzW2ldWzBdXVtjeSArIGRpcnNbaV1bMV1dID0gMDtcbiAgICAgICAgICAgICAgICBjeCA9IG54O1xuICAgICAgICAgICAgICAgIGN5ID0gbnk7XG4gICAgICAgICAgICAgICAgYmxvY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGRvbmUrKztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gd2hpbGUgKCFibG9ja2VkKTtcbiAgICAgICAgfVxuICAgICAgfSB3aGlsZSAoZG9uZSArIDEgPCB3aWR0aCAqIGhlaWdodCAvIDQpO1xuXG4gICAgICBmb3IgKHZhciBfaTExID0gMDsgX2kxMSA8IHRoaXMuX3dpZHRoOyBfaTExKyspIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLl9oZWlnaHQ7IGorKykge1xuICAgICAgICAgIGNhbGxiYWNrKF9pMTEsIGosIG1hcFtfaTExXVtqXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5fbWFwID0gW107XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgX3Byb3RvMzEuX3JhbmRvbWl6ZSA9IGZ1bmN0aW9uIF9yYW5kb21pemUoZGlycykge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgICAgZGlyc1tpXVswXSA9IDA7XG4gICAgICAgIGRpcnNbaV1bMV0gPSAwO1xuICAgICAgfVxuXG4gICAgICBzd2l0Y2ggKE1hdGguZmxvb3IoUk5HJDEuZ2V0VW5pZm9ybSgpICogNCkpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIGRpcnNbMF1bMF0gPSAtMTtcbiAgICAgICAgICBkaXJzWzFdWzBdID0gMTtcbiAgICAgICAgICBkaXJzWzJdWzFdID0gLTE7XG4gICAgICAgICAgZGlyc1szXVsxXSA9IDE7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGRpcnNbM11bMF0gPSAtMTtcbiAgICAgICAgICBkaXJzWzJdWzBdID0gMTtcbiAgICAgICAgICBkaXJzWzFdWzFdID0gLTE7XG4gICAgICAgICAgZGlyc1swXVsxXSA9IDE7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIGRpcnNbMl1bMF0gPSAtMTtcbiAgICAgICAgICBkaXJzWzNdWzBdID0gMTtcbiAgICAgICAgICBkaXJzWzBdWzFdID0gLTE7XG4gICAgICAgICAgZGlyc1sxXVsxXSA9IDE7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIGRpcnNbMV1bMF0gPSAtMTtcbiAgICAgICAgICBkaXJzWzBdWzBdID0gMTtcbiAgICAgICAgICBkaXJzWzNdWzFdID0gLTE7XG4gICAgICAgICAgZGlyc1syXVsxXSA9IDE7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90bzMxLl9pc0ZyZWUgPSBmdW5jdGlvbiBfaXNGcmVlKG1hcCwgeCwgeSwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgaWYgKHggPCAxIHx8IHkgPCAxIHx8IHggPj0gd2lkdGggfHwgeSA+PSBoZWlnaHQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbWFwW3hdW3ldO1xuICAgIH07XG5cbiAgICByZXR1cm4gSWNleU1hemU7XG4gIH0oTWFwKTtcbiAgLyoqXG4gICAqIER1bmdlb24gZ2VuZXJhdG9yIHdoaWNoIHVzZXMgdGhlIFwib3JnaW5hbFwiIFJvZ3VlIGR1bmdlb24gZ2VuZXJhdGlvbiBhbGdvcml0aG0uIFNlZSBodHRwOi8va3VvaS5jb20vfmthbWlrYXplL0dhbWVEZXNpZ24vYXJ0MDdfcm9ndWVfZHVuZ2Vvbi5waHBcbiAgICogQGF1dGhvciBoeWFrdWdlaVxuICAgKi9cblxuXG4gIHZhciBSb2d1ZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX01hcDcpIHtcbiAgICBfaW5oZXJpdHNMb29zZShSb2d1ZSwgX01hcDcpO1xuXG4gICAgZnVuY3Rpb24gUm9ndWUod2lkdGgsIGhlaWdodCwgb3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzMTg7XG5cbiAgICAgIF90aGlzMTggPSBfTWFwNy5jYWxsKHRoaXMsIHdpZHRoLCBoZWlnaHQpIHx8IHRoaXM7XG4gICAgICBfdGhpczE4Lm1hcCA9IFtdO1xuICAgICAgX3RoaXMxOC5yb29tcyA9IFtdO1xuICAgICAgX3RoaXMxOC5jb25uZWN0ZWRDZWxscyA9IFtdO1xuICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICBjZWxsV2lkdGg6IDMsXG4gICAgICAgIGNlbGxIZWlnaHQ6IDMgLy8gICAgIGllLiBhcyBhbiBhcnJheSB3aXRoIG1pbi1tYXggdmFsdWVzIGZvciBlYWNoIGRpcmVjdGlvbi4uLi5cblxuICAgICAgfSwgb3B0aW9ucyk7XG4gICAgICAvKlxuICAgICAgU2V0IHRoZSByb29tIHNpemVzIGFjY29yZGluZyB0byB0aGUgb3Zlci1hbGwgd2lkdGggb2YgdGhlIG1hcCxcbiAgICAgIGFuZCB0aGUgY2VsbCBzaXplcy5cbiAgICAgICovXG5cbiAgICAgIGlmICghb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShcInJvb21XaWR0aFwiKSkge1xuICAgICAgICBvcHRpb25zW1wicm9vbVdpZHRoXCJdID0gX3RoaXMxOC5fY2FsY3VsYXRlUm9vbVNpemUoX3RoaXMxOC5fd2lkdGgsIG9wdGlvbnNbXCJjZWxsV2lkdGhcIl0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoIW9wdGlvbnMuaGFzT3duUHJvcGVydHkoXCJyb29tSGVpZ2h0XCIpKSB7XG4gICAgICAgIG9wdGlvbnNbXCJyb29tSGVpZ2h0XCJdID0gX3RoaXMxOC5fY2FsY3VsYXRlUm9vbVNpemUoX3RoaXMxOC5faGVpZ2h0LCBvcHRpb25zW1wiY2VsbEhlaWdodFwiXSk7XG4gICAgICB9XG5cbiAgICAgIF90aGlzMTguX29wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgcmV0dXJuIF90aGlzMTg7XG4gICAgfVxuXG4gICAgdmFyIF9wcm90bzMyID0gUm9ndWUucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvMzIuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGNhbGxiYWNrKSB7XG4gICAgICB0aGlzLm1hcCA9IHRoaXMuX2ZpbGxNYXAoMSk7XG4gICAgICB0aGlzLnJvb21zID0gW107XG4gICAgICB0aGlzLmNvbm5lY3RlZENlbGxzID0gW107XG5cbiAgICAgIHRoaXMuX2luaXRSb29tcygpO1xuXG4gICAgICB0aGlzLl9jb25uZWN0Um9vbXMoKTtcblxuICAgICAgdGhpcy5fY29ubmVjdFVuY29ubmVjdGVkUm9vbXMoKTtcblxuICAgICAgdGhpcy5fY3JlYXRlUmFuZG9tUm9vbUNvbm5lY3Rpb25zKCk7XG5cbiAgICAgIHRoaXMuX2NyZWF0ZVJvb21zKCk7XG5cbiAgICAgIHRoaXMuX2NyZWF0ZUNvcnJpZG9ycygpO1xuXG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl93aWR0aDsgaSsrKSB7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLl9oZWlnaHQ7IGorKykge1xuICAgICAgICAgICAgY2FsbGJhY2soaSwgaiwgdGhpcy5tYXBbaV1bal0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgX3Byb3RvMzIuX2NhbGN1bGF0ZVJvb21TaXplID0gZnVuY3Rpb24gX2NhbGN1bGF0ZVJvb21TaXplKHNpemUsIGNlbGwpIHtcbiAgICAgIHZhciBtYXggPSBNYXRoLmZsb29yKHNpemUgLyBjZWxsICogMC44KTtcbiAgICAgIHZhciBtaW4gPSBNYXRoLmZsb29yKHNpemUgLyBjZWxsICogMC4yNSk7XG5cbiAgICAgIGlmIChtaW4gPCAyKSB7XG4gICAgICAgIG1pbiA9IDI7XG4gICAgICB9XG5cbiAgICAgIGlmIChtYXggPCAyKSB7XG4gICAgICAgIG1heCA9IDI7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbbWluLCBtYXhdO1xuICAgIH07XG5cbiAgICBfcHJvdG8zMi5faW5pdFJvb21zID0gZnVuY3Rpb24gX2luaXRSb29tcygpIHtcbiAgICAgIC8vIGNyZWF0ZSByb29tcyBhcnJheS4gVGhpcyBpcyB0aGUgXCJncmlkXCIgbGlzdCBmcm9tIHRoZSBhbGdvLlxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9vcHRpb25zLmNlbGxXaWR0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMucm9vbXMucHVzaChbXSk7XG5cbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLl9vcHRpb25zLmNlbGxIZWlnaHQ7IGorKykge1xuICAgICAgICAgIHRoaXMucm9vbXNbaV0ucHVzaCh7XG4gICAgICAgICAgICBcInhcIjogMCxcbiAgICAgICAgICAgIFwieVwiOiAwLFxuICAgICAgICAgICAgXCJ3aWR0aFwiOiAwLFxuICAgICAgICAgICAgXCJoZWlnaHRcIjogMCxcbiAgICAgICAgICAgIFwiY29ubmVjdGlvbnNcIjogW10sXG4gICAgICAgICAgICBcImNlbGx4XCI6IGksXG4gICAgICAgICAgICBcImNlbGx5XCI6IGpcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8zMi5fY29ubmVjdFJvb21zID0gZnVuY3Rpb24gX2Nvbm5lY3RSb29tcygpIHtcbiAgICAgIC8vcGljayByYW5kb20gc3RhcnRpbmcgZ3JpZFxuICAgICAgdmFyIGNneCA9IFJORyQxLmdldFVuaWZvcm1JbnQoMCwgdGhpcy5fb3B0aW9ucy5jZWxsV2lkdGggLSAxKTtcbiAgICAgIHZhciBjZ3kgPSBSTkckMS5nZXRVbmlmb3JtSW50KDAsIHRoaXMuX29wdGlvbnMuY2VsbEhlaWdodCAtIDEpO1xuICAgICAgdmFyIGlkeDtcbiAgICAgIHZhciBuY2d4O1xuICAgICAgdmFyIG5jZ3k7XG4gICAgICB2YXIgZm91bmQgPSBmYWxzZTtcbiAgICAgIHZhciByb29tO1xuICAgICAgdmFyIG90aGVyUm9vbTtcbiAgICAgIHZhciBkaXJUb0NoZWNrOyAvLyBmaW5kICB1bmNvbm5lY3RlZCBuZWlnaGJvdXIgY2VsbHNcblxuICAgICAgZG8ge1xuICAgICAgICAvL2RpclRvQ2hlY2sgPSBbMCwgMSwgMiwgMywgNCwgNSwgNiwgN107XG4gICAgICAgIGRpclRvQ2hlY2sgPSBbMCwgMiwgNCwgNl07XG4gICAgICAgIGRpclRvQ2hlY2sgPSBSTkckMS5zaHVmZmxlKGRpclRvQ2hlY2spO1xuXG4gICAgICAgIGRvIHtcbiAgICAgICAgICBmb3VuZCA9IGZhbHNlO1xuICAgICAgICAgIGlkeCA9IGRpclRvQ2hlY2sucG9wKCk7XG4gICAgICAgICAgbmNneCA9IGNneCArIERJUlNbOF1baWR4XVswXTtcbiAgICAgICAgICBuY2d5ID0gY2d5ICsgRElSU1s4XVtpZHhdWzFdO1xuXG4gICAgICAgICAgaWYgKG5jZ3ggPCAwIHx8IG5jZ3ggPj0gdGhpcy5fb3B0aW9ucy5jZWxsV2lkdGgpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChuY2d5IDwgMCB8fCBuY2d5ID49IHRoaXMuX29wdGlvbnMuY2VsbEhlaWdodCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcm9vbSA9IHRoaXMucm9vbXNbY2d4XVtjZ3ldO1xuXG4gICAgICAgICAgaWYgKHJvb21bXCJjb25uZWN0aW9uc1wiXS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBhcyBsb25nIGFzIHRoaXMgcm9vbSBkb2Vzbid0IGFscmVhZHkgY29vbmVjdCB0byBtZSwgd2UgYXJlIG9rIHdpdGggaXQuXG4gICAgICAgICAgICBpZiAocm9vbVtcImNvbm5lY3Rpb25zXCJdWzBdWzBdID09IG5jZ3ggJiYgcm9vbVtcImNvbm5lY3Rpb25zXCJdWzBdWzFdID09IG5jZ3kpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgb3RoZXJSb29tID0gdGhpcy5yb29tc1tuY2d4XVtuY2d5XTtcblxuICAgICAgICAgIGlmIChvdGhlclJvb21bXCJjb25uZWN0aW9uc1wiXS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgb3RoZXJSb29tW1wiY29ubmVjdGlvbnNcIl0ucHVzaChbY2d4LCBjZ3ldKTtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGVkQ2VsbHMucHVzaChbbmNneCwgbmNneV0pO1xuICAgICAgICAgICAgY2d4ID0gbmNneDtcbiAgICAgICAgICAgIGNneSA9IG5jZ3k7XG4gICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChkaXJUb0NoZWNrLmxlbmd0aCA+IDAgJiYgZm91bmQgPT0gZmFsc2UpO1xuICAgICAgfSB3aGlsZSAoZGlyVG9DaGVjay5sZW5ndGggPiAwKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvMzIuX2Nvbm5lY3RVbmNvbm5lY3RlZFJvb21zID0gZnVuY3Rpb24gX2Nvbm5lY3RVbmNvbm5lY3RlZFJvb21zKCkge1xuICAgICAgLy9XaGlsZSB0aGVyZSBhcmUgdW5jb25uZWN0ZWQgcm9vbXMsIHRyeSB0byBjb25uZWN0IHRoZW0gdG8gYSByYW5kb20gY29ubmVjdGVkIG5laWdoYm9yXG4gICAgICAvLyhpZiBhIHJvb20gaGFzIG5vIGNvbm5lY3RlZCBuZWlnaGJvcnMgeWV0LCBqdXN0IGtlZXAgY3ljbGluZywgeW91J2xsIGZpbGwgb3V0IHRvIGl0IGV2ZW50dWFsbHkpLlxuICAgICAgdmFyIGN3ID0gdGhpcy5fb3B0aW9ucy5jZWxsV2lkdGg7XG4gICAgICB2YXIgY2ggPSB0aGlzLl9vcHRpb25zLmNlbGxIZWlnaHQ7XG4gICAgICB0aGlzLmNvbm5lY3RlZENlbGxzID0gUk5HJDEuc2h1ZmZsZSh0aGlzLmNvbm5lY3RlZENlbGxzKTtcbiAgICAgIHZhciByb29tO1xuICAgICAgdmFyIG90aGVyUm9vbTtcbiAgICAgIHZhciB2YWxpZFJvb207XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fb3B0aW9ucy5jZWxsV2lkdGg7IGkrKykge1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuX29wdGlvbnMuY2VsbEhlaWdodDsgaisrKSB7XG4gICAgICAgICAgcm9vbSA9IHRoaXMucm9vbXNbaV1bal07XG5cbiAgICAgICAgICBpZiAocm9vbVtcImNvbm5lY3Rpb25zXCJdLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICB2YXIgZGlyZWN0aW9ucyA9IFswLCAyLCA0LCA2XTtcbiAgICAgICAgICAgIGRpcmVjdGlvbnMgPSBSTkckMS5zaHVmZmxlKGRpcmVjdGlvbnMpO1xuICAgICAgICAgICAgdmFsaWRSb29tID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgdmFyIGRpcklkeCA9IGRpcmVjdGlvbnMucG9wKCk7XG4gICAgICAgICAgICAgIHZhciBuZXdJID0gaSArIERJUlNbOF1bZGlySWR4XVswXTtcbiAgICAgICAgICAgICAgdmFyIG5ld0ogPSBqICsgRElSU1s4XVtkaXJJZHhdWzFdO1xuXG4gICAgICAgICAgICAgIGlmIChuZXdJIDwgMCB8fCBuZXdJID49IGN3IHx8IG5ld0ogPCAwIHx8IG5ld0ogPj0gY2gpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIG90aGVyUm9vbSA9IHRoaXMucm9vbXNbbmV3SV1bbmV3Sl07XG4gICAgICAgICAgICAgIHZhbGlkUm9vbSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgaWYgKG90aGVyUm9vbVtcImNvbm5lY3Rpb25zXCJdLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG90aGVyUm9vbVtcImNvbm5lY3Rpb25zXCJdLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAgICAgaWYgKG90aGVyUm9vbVtcImNvbm5lY3Rpb25zXCJdW2tdWzBdID09IGkgJiYgb3RoZXJSb29tW1wiY29ubmVjdGlvbnNcIl1ba11bMV0gPT0gaikge1xuICAgICAgICAgICAgICAgICAgdmFsaWRSb29tID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAodmFsaWRSb29tKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUgKGRpcmVjdGlvbnMubGVuZ3RoKTtcblxuICAgICAgICAgICAgaWYgKHZhbGlkUm9vbSkge1xuICAgICAgICAgICAgICByb29tW1wiY29ubmVjdGlvbnNcIl0ucHVzaChbb3RoZXJSb29tW1wiY2VsbHhcIl0sIG90aGVyUm9vbVtcImNlbGx5XCJdXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIi0tIFVuYWJsZSB0byBjb25uZWN0IHJvb20uXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8zMi5fY3JlYXRlUmFuZG9tUm9vbUNvbm5lY3Rpb25zID0gZnVuY3Rpb24gX2NyZWF0ZVJhbmRvbVJvb21Db25uZWN0aW9ucygpIHsvLyBFbXB0eSBmb3Igbm93LlxuICAgIH07XG5cbiAgICBfcHJvdG8zMi5fY3JlYXRlUm9vbXMgPSBmdW5jdGlvbiBfY3JlYXRlUm9vbXMoKSB7XG4gICAgICB2YXIgdyA9IHRoaXMuX3dpZHRoO1xuICAgICAgdmFyIGggPSB0aGlzLl9oZWlnaHQ7XG4gICAgICB2YXIgY3cgPSB0aGlzLl9vcHRpb25zLmNlbGxXaWR0aDtcbiAgICAgIHZhciBjaCA9IHRoaXMuX29wdGlvbnMuY2VsbEhlaWdodDtcbiAgICAgIHZhciBjd3AgPSBNYXRoLmZsb29yKHRoaXMuX3dpZHRoIC8gY3cpO1xuICAgICAgdmFyIGNocCA9IE1hdGguZmxvb3IodGhpcy5faGVpZ2h0IC8gY2gpO1xuICAgICAgdmFyIHJvb213O1xuICAgICAgdmFyIHJvb21oO1xuICAgICAgdmFyIHJvb21XaWR0aCA9IHRoaXMuX29wdGlvbnNbXCJyb29tV2lkdGhcIl07XG4gICAgICB2YXIgcm9vbUhlaWdodCA9IHRoaXMuX29wdGlvbnNbXCJyb29tSGVpZ2h0XCJdO1xuICAgICAgdmFyIHN4O1xuICAgICAgdmFyIHN5O1xuICAgICAgdmFyIG90aGVyUm9vbTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdzsgaSsrKSB7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY2g7IGorKykge1xuICAgICAgICAgIHN4ID0gY3dwICogaTtcbiAgICAgICAgICBzeSA9IGNocCAqIGo7XG5cbiAgICAgICAgICBpZiAoc3ggPT0gMCkge1xuICAgICAgICAgICAgc3ggPSAxO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzeSA9PSAwKSB7XG4gICAgICAgICAgICBzeSA9IDE7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcm9vbXcgPSBSTkckMS5nZXRVbmlmb3JtSW50KHJvb21XaWR0aFswXSwgcm9vbVdpZHRoWzFdKTtcbiAgICAgICAgICByb29taCA9IFJORyQxLmdldFVuaWZvcm1JbnQocm9vbUhlaWdodFswXSwgcm9vbUhlaWdodFsxXSk7XG5cbiAgICAgICAgICBpZiAoaiA+IDApIHtcbiAgICAgICAgICAgIG90aGVyUm9vbSA9IHRoaXMucm9vbXNbaV1baiAtIDFdO1xuXG4gICAgICAgICAgICB3aGlsZSAoc3kgLSAob3RoZXJSb29tW1wieVwiXSArIG90aGVyUm9vbVtcImhlaWdodFwiXSkgPCAzKSB7XG4gICAgICAgICAgICAgIHN5Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGkgPiAwKSB7XG4gICAgICAgICAgICBvdGhlclJvb20gPSB0aGlzLnJvb21zW2kgLSAxXVtqXTtcblxuICAgICAgICAgICAgd2hpbGUgKHN4IC0gKG90aGVyUm9vbVtcInhcIl0gKyBvdGhlclJvb21bXCJ3aWR0aFwiXSkgPCAzKSB7XG4gICAgICAgICAgICAgIHN4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIHN4T2Zmc2V0ID0gTWF0aC5yb3VuZChSTkckMS5nZXRVbmlmb3JtSW50KDAsIGN3cCAtIHJvb213KSAvIDIpO1xuICAgICAgICAgIHZhciBzeU9mZnNldCA9IE1hdGgucm91bmQoUk5HJDEuZ2V0VW5pZm9ybUludCgwLCBjaHAgLSByb29taCkgLyAyKTtcblxuICAgICAgICAgIHdoaWxlIChzeCArIHN4T2Zmc2V0ICsgcm9vbXcgPj0gdykge1xuICAgICAgICAgICAgaWYgKHN4T2Zmc2V0KSB7XG4gICAgICAgICAgICAgIHN4T2Zmc2V0LS07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByb29tdy0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHdoaWxlIChzeSArIHN5T2Zmc2V0ICsgcm9vbWggPj0gaCkge1xuICAgICAgICAgICAgaWYgKHN5T2Zmc2V0KSB7XG4gICAgICAgICAgICAgIHN5T2Zmc2V0LS07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByb29taC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHN4ID0gc3ggKyBzeE9mZnNldDtcbiAgICAgICAgICBzeSA9IHN5ICsgc3lPZmZzZXQ7XG4gICAgICAgICAgdGhpcy5yb29tc1tpXVtqXVtcInhcIl0gPSBzeDtcbiAgICAgICAgICB0aGlzLnJvb21zW2ldW2pdW1wieVwiXSA9IHN5O1xuICAgICAgICAgIHRoaXMucm9vbXNbaV1bal1bXCJ3aWR0aFwiXSA9IHJvb213O1xuICAgICAgICAgIHRoaXMucm9vbXNbaV1bal1bXCJoZWlnaHRcIl0gPSByb29taDtcblxuICAgICAgICAgIGZvciAodmFyIGlpID0gc3g7IGlpIDwgc3ggKyByb29tdzsgaWkrKykge1xuICAgICAgICAgICAgZm9yICh2YXIgamogPSBzeTsgamogPCBzeSArIHJvb21oOyBqaisrKSB7XG4gICAgICAgICAgICAgIHRoaXMubWFwW2lpXVtqal0gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8zMi5fZ2V0V2FsbFBvc2l0aW9uID0gZnVuY3Rpb24gX2dldFdhbGxQb3NpdGlvbihhUm9vbSwgYURpcmVjdGlvbikge1xuICAgICAgdmFyIHJ4O1xuICAgICAgdmFyIHJ5O1xuICAgICAgdmFyIGRvb3I7XG5cbiAgICAgIGlmIChhRGlyZWN0aW9uID09IDEgfHwgYURpcmVjdGlvbiA9PSAzKSB7XG4gICAgICAgIHJ4ID0gUk5HJDEuZ2V0VW5pZm9ybUludChhUm9vbVtcInhcIl0gKyAxLCBhUm9vbVtcInhcIl0gKyBhUm9vbVtcIndpZHRoXCJdIC0gMik7XG5cbiAgICAgICAgaWYgKGFEaXJlY3Rpb24gPT0gMSkge1xuICAgICAgICAgIHJ5ID0gYVJvb21bXCJ5XCJdIC0gMjtcbiAgICAgICAgICBkb29yID0gcnkgKyAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJ5ID0gYVJvb21bXCJ5XCJdICsgYVJvb21bXCJoZWlnaHRcIl0gKyAxO1xuICAgICAgICAgIGRvb3IgPSByeSAtIDE7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm1hcFtyeF1bZG9vcl0gPSAwOyAvLyBpJ20gbm90IHNldHRpbmcgYSBzcGVjaWZpYyAnZG9vcicgdGlsZSB2YWx1ZSByaWdodCBub3csIGp1c3QgZW1wdHkgc3BhY2UuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByeSA9IFJORyQxLmdldFVuaWZvcm1JbnQoYVJvb21bXCJ5XCJdICsgMSwgYVJvb21bXCJ5XCJdICsgYVJvb21bXCJoZWlnaHRcIl0gLSAyKTtcblxuICAgICAgICBpZiAoYURpcmVjdGlvbiA9PSAyKSB7XG4gICAgICAgICAgcnggPSBhUm9vbVtcInhcIl0gKyBhUm9vbVtcIndpZHRoXCJdICsgMTtcbiAgICAgICAgICBkb29yID0gcnggLSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJ4ID0gYVJvb21bXCJ4XCJdIC0gMjtcbiAgICAgICAgICBkb29yID0gcnggKyAxO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5tYXBbZG9vcl1bcnldID0gMDsgLy8gaSdtIG5vdCBzZXR0aW5nIGEgc3BlY2lmaWMgJ2Rvb3InIHRpbGUgdmFsdWUgcmlnaHQgbm93LCBqdXN0IGVtcHR5IHNwYWNlLlxuICAgICAgfVxuXG4gICAgICByZXR1cm4gW3J4LCByeV07XG4gICAgfTtcblxuICAgIF9wcm90bzMyLl9kcmF3Q29ycmlkb3IgPSBmdW5jdGlvbiBfZHJhd0NvcnJpZG9yKHN0YXJ0UG9zaXRpb24sIGVuZFBvc2l0aW9uKSB7XG4gICAgICB2YXIgeE9mZnNldCA9IGVuZFBvc2l0aW9uWzBdIC0gc3RhcnRQb3NpdGlvblswXTtcbiAgICAgIHZhciB5T2Zmc2V0ID0gZW5kUG9zaXRpb25bMV0gLSBzdGFydFBvc2l0aW9uWzFdO1xuICAgICAgdmFyIHhwb3MgPSBzdGFydFBvc2l0aW9uWzBdO1xuICAgICAgdmFyIHlwb3MgPSBzdGFydFBvc2l0aW9uWzFdO1xuICAgICAgdmFyIHRlbXBEaXN0O1xuICAgICAgdmFyIHhEaXI7XG4gICAgICB2YXIgeURpcjtcbiAgICAgIHZhciBtb3ZlOyAvLyAyIGVsZW1lbnQgYXJyYXksIGVsZW1lbnQgMCBpcyB0aGUgZGlyZWN0aW9uLCBlbGVtZW50IDEgaXMgdGhlIHRvdGFsIHZhbHVlIHRvIG1vdmUuXG5cbiAgICAgIHZhciBtb3ZlcyA9IFtdOyAvLyBhIGxpc3Qgb2YgMiBlbGVtZW50IGFycmF5c1xuXG4gICAgICB2YXIgeEFicyA9IE1hdGguYWJzKHhPZmZzZXQpO1xuICAgICAgdmFyIHlBYnMgPSBNYXRoLmFicyh5T2Zmc2V0KTtcbiAgICAgIHZhciBwZXJjZW50ID0gUk5HJDEuZ2V0VW5pZm9ybSgpOyAvLyB1c2VkIHRvIHNwbGl0IHRoZSBtb3ZlIGF0IGRpZmZlcmVudCBwbGFjZXMgYWxvbmcgdGhlIGxvbmcgYXhpc1xuXG4gICAgICB2YXIgZmlyc3RIYWxmID0gcGVyY2VudDtcbiAgICAgIHZhciBzZWNvbmRIYWxmID0gMSAtIHBlcmNlbnQ7XG4gICAgICB4RGlyID0geE9mZnNldCA+IDAgPyAyIDogNjtcbiAgICAgIHlEaXIgPSB5T2Zmc2V0ID4gMCA/IDQgOiAwO1xuXG4gICAgICBpZiAoeEFicyA8IHlBYnMpIHtcbiAgICAgICAgLy8gbW92ZSBmaXJzdEhhbGYgb2YgdGhlIHkgb2Zmc2V0XG4gICAgICAgIHRlbXBEaXN0ID0gTWF0aC5jZWlsKHlBYnMgKiBmaXJzdEhhbGYpO1xuICAgICAgICBtb3Zlcy5wdXNoKFt5RGlyLCB0ZW1wRGlzdF0pOyAvLyBtb3ZlIGFsbCB0aGUgeCBvZmZzZXRcblxuICAgICAgICBtb3Zlcy5wdXNoKFt4RGlyLCB4QWJzXSk7IC8vIG1vdmUgc2VuZEhhbGYgb2YgdGhlICB5IG9mZnNldFxuXG4gICAgICAgIHRlbXBEaXN0ID0gTWF0aC5mbG9vcih5QWJzICogc2Vjb25kSGFsZik7XG4gICAgICAgIG1vdmVzLnB1c2goW3lEaXIsIHRlbXBEaXN0XSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyAgbW92ZSBmaXJzdEhhbGYgb2YgdGhlIHggb2Zmc2V0XG4gICAgICAgIHRlbXBEaXN0ID0gTWF0aC5jZWlsKHhBYnMgKiBmaXJzdEhhbGYpO1xuICAgICAgICBtb3Zlcy5wdXNoKFt4RGlyLCB0ZW1wRGlzdF0pOyAvLyBtb3ZlIGFsbCB0aGUgeSBvZmZzZXRcblxuICAgICAgICBtb3Zlcy5wdXNoKFt5RGlyLCB5QWJzXSk7IC8vIG1vdmUgc2Vjb25kSGFsZiBvZiB0aGUgeCBvZmZzZXQuXG5cbiAgICAgICAgdGVtcERpc3QgPSBNYXRoLmZsb29yKHhBYnMgKiBzZWNvbmRIYWxmKTtcbiAgICAgICAgbW92ZXMucHVzaChbeERpciwgdGVtcERpc3RdKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5tYXBbeHBvc11beXBvc10gPSAwO1xuXG4gICAgICB3aGlsZSAobW92ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBtb3ZlID0gbW92ZXMucG9wKCk7XG5cbiAgICAgICAgd2hpbGUgKG1vdmVbMV0gPiAwKSB7XG4gICAgICAgICAgeHBvcyArPSBESVJTWzhdW21vdmVbMF1dWzBdO1xuICAgICAgICAgIHlwb3MgKz0gRElSU1s4XVttb3ZlWzBdXVsxXTtcbiAgICAgICAgICB0aGlzLm1hcFt4cG9zXVt5cG9zXSA9IDA7XG4gICAgICAgICAgbW92ZVsxXSA9IG1vdmVbMV0gLSAxO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90bzMyLl9jcmVhdGVDb3JyaWRvcnMgPSBmdW5jdGlvbiBfY3JlYXRlQ29ycmlkb3JzKCkge1xuICAgICAgLy8gRHJhdyBDb3JyaWRvcnMgYmV0d2VlbiBjb25uZWN0ZWQgcm9vbXNcbiAgICAgIHZhciBjdyA9IHRoaXMuX29wdGlvbnMuY2VsbFdpZHRoO1xuICAgICAgdmFyIGNoID0gdGhpcy5fb3B0aW9ucy5jZWxsSGVpZ2h0O1xuICAgICAgdmFyIHJvb207XG4gICAgICB2YXIgY29ubmVjdGlvbjtcbiAgICAgIHZhciBvdGhlclJvb207XG4gICAgICB2YXIgd2FsbDtcbiAgICAgIHZhciBvdGhlcldhbGw7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY3c7IGkrKykge1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNoOyBqKyspIHtcbiAgICAgICAgICByb29tID0gdGhpcy5yb29tc1tpXVtqXTtcblxuICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgcm9vbVtcImNvbm5lY3Rpb25zXCJdLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICBjb25uZWN0aW9uID0gcm9vbVtcImNvbm5lY3Rpb25zXCJdW2tdO1xuICAgICAgICAgICAgb3RoZXJSb29tID0gdGhpcy5yb29tc1tjb25uZWN0aW9uWzBdXVtjb25uZWN0aW9uWzFdXTsgLy8gZmlndXJlIG91dCB3aGF0IHdhbGwgb3VyIGNvcnJpZG9yIHdpbGwgc3RhcnQgb25lLlxuICAgICAgICAgICAgLy8gZmlndXJlIG91dCB3aGF0IHdhbGwgb3VyIGNvcnJpZG9yIHdpbGwgZW5kIG9uLlxuXG4gICAgICAgICAgICBpZiAob3RoZXJSb29tW1wiY2VsbHhcIl0gPiByb29tW1wiY2VsbHhcIl0pIHtcbiAgICAgICAgICAgICAgd2FsbCA9IDI7XG4gICAgICAgICAgICAgIG90aGVyV2FsbCA9IDQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG90aGVyUm9vbVtcImNlbGx4XCJdIDwgcm9vbVtcImNlbGx4XCJdKSB7XG4gICAgICAgICAgICAgIHdhbGwgPSA0O1xuICAgICAgICAgICAgICBvdGhlcldhbGwgPSAyO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChvdGhlclJvb21bXCJjZWxseVwiXSA+IHJvb21bXCJjZWxseVwiXSkge1xuICAgICAgICAgICAgICB3YWxsID0gMztcbiAgICAgICAgICAgICAgb3RoZXJXYWxsID0gMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHdhbGwgPSAxO1xuICAgICAgICAgICAgICBvdGhlcldhbGwgPSAzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9kcmF3Q29ycmlkb3IodGhpcy5fZ2V0V2FsbFBvc2l0aW9uKHJvb20sIHdhbGwpLCB0aGlzLl9nZXRXYWxsUG9zaXRpb24ob3RoZXJSb29tLCBvdGhlcldhbGwpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIFJvZ3VlO1xuICB9KE1hcCk7XG5cbiAgdmFyIGluZGV4JDIgPSB7XG4gICAgQXJlbmE6IEFyZW5hLFxuICAgIFVuaWZvcm06IFVuaWZvcm0sXG4gICAgQ2VsbHVsYXI6IENlbGx1bGFyLFxuICAgIERpZ2dlcjogRGlnZ2VyLFxuICAgIEVsbGVyTWF6ZTogRWxsZXJNYXplLFxuICAgIERpdmlkZWRNYXplOiBEaXZpZGVkTWF6ZSxcbiAgICBJY2V5TWF6ZTogSWNleU1hemUsXG4gICAgUm9ndWU6IFJvZ3VlXG4gIH07XG4gIC8qKlxuICAgKiBCYXNlIG5vaXNlIGdlbmVyYXRvclxuICAgKi9cblxuICB2YXIgTm9pc2UgPSBmdW5jdGlvbiBOb2lzZSgpIHt9O1xuXG4gIHZhciBGMiA9IDAuNSAqIChNYXRoLnNxcnQoMykgLSAxKTtcbiAgdmFyIEcyID0gKDMgLSBNYXRoLnNxcnQoMykpIC8gNjtcbiAgLyoqXG4gICAqIEEgc2ltcGxlIDJkIGltcGxlbWVudGF0aW9uIG9mIHNpbXBsZXggbm9pc2UgYnkgT25kcmVqIFphcmFcbiAgICpcbiAgICogQmFzZWQgb24gYSBzcGVlZC1pbXByb3ZlZCBzaW1wbGV4IG5vaXNlIGFsZ29yaXRobSBmb3IgMkQsIDNEIGFuZCA0RCBpbiBKYXZhLlxuICAgKiBXaGljaCBpcyBiYXNlZCBvbiBleGFtcGxlIGNvZGUgYnkgU3RlZmFuIEd1c3RhdnNvbiAoc3RlZ3VAaXRuLmxpdS5zZSkuXG4gICAqIFdpdGggT3B0aW1pc2F0aW9ucyBieSBQZXRlciBFYXN0bWFuIChwZWFzdG1hbkBkcml6emxlLnN0YW5mb3JkLmVkdSkuXG4gICAqIEJldHRlciByYW5rIG9yZGVyaW5nIG1ldGhvZCBieSBTdGVmYW4gR3VzdGF2c29uIGluIDIwMTIuXG4gICAqL1xuXG4gIHZhciBTaW1wbGV4ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfTm9pc2UpIHtcbiAgICBfaW5oZXJpdHNMb29zZShTaW1wbGV4LCBfTm9pc2UpO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGdyYWRpZW50cyBSYW5kb20gZ3JhZGllbnRzXG4gICAgICovXG4gICAgZnVuY3Rpb24gU2ltcGxleChncmFkaWVudHMpIHtcbiAgICAgIHZhciBfdGhpczE5O1xuXG4gICAgICBpZiAoZ3JhZGllbnRzID09PSB2b2lkIDApIHtcbiAgICAgICAgZ3JhZGllbnRzID0gMjU2O1xuICAgICAgfVxuXG4gICAgICBfdGhpczE5ID0gX05vaXNlLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgIF90aGlzMTkuX2dyYWRpZW50cyA9IFtbMCwgLTFdLCBbMSwgLTFdLCBbMSwgMF0sIFsxLCAxXSwgWzAsIDFdLCBbLTEsIDFdLCBbLTEsIDBdLCBbLTEsIC0xXV07XG4gICAgICB2YXIgcGVybXV0YXRpb25zID0gW107XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JhZGllbnRzOyBpKyspIHtcbiAgICAgICAgcGVybXV0YXRpb25zLnB1c2goaSk7XG4gICAgICB9XG5cbiAgICAgIHBlcm11dGF0aW9ucyA9IFJORyQxLnNodWZmbGUocGVybXV0YXRpb25zKTtcbiAgICAgIF90aGlzMTkuX3Blcm1zID0gW107XG4gICAgICBfdGhpczE5Ll9pbmRleGVzID0gW107XG5cbiAgICAgIGZvciAodmFyIF9pMTIgPSAwOyBfaTEyIDwgMiAqIGdyYWRpZW50czsgX2kxMisrKSB7XG4gICAgICAgIF90aGlzMTkuX3Blcm1zLnB1c2gocGVybXV0YXRpb25zW19pMTIgJSBncmFkaWVudHNdKTtcblxuICAgICAgICBfdGhpczE5Ll9pbmRleGVzLnB1c2goX3RoaXMxOS5fcGVybXNbX2kxMl0gJSBfdGhpczE5Ll9ncmFkaWVudHMubGVuZ3RoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF90aGlzMTk7XG4gICAgfVxuXG4gICAgdmFyIF9wcm90bzMzID0gU2ltcGxleC5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8zMy5nZXQgPSBmdW5jdGlvbiBnZXQoeGluLCB5aW4pIHtcbiAgICAgIHZhciBwZXJtcyA9IHRoaXMuX3Blcm1zO1xuICAgICAgdmFyIGluZGV4ZXMgPSB0aGlzLl9pbmRleGVzO1xuICAgICAgdmFyIGNvdW50ID0gcGVybXMubGVuZ3RoIC8gMjtcbiAgICAgIHZhciBuMCA9IDAsXG4gICAgICAgICAgbjEgPSAwLFxuICAgICAgICAgIG4yID0gMCxcbiAgICAgICAgICBnaTsgLy8gTm9pc2UgY29udHJpYnV0aW9ucyBmcm9tIHRoZSB0aHJlZSBjb3JuZXJzXG4gICAgICAvLyBTa2V3IHRoZSBpbnB1dCBzcGFjZSB0byBkZXRlcm1pbmUgd2hpY2ggc2ltcGxleCBjZWxsIHdlJ3JlIGluXG5cbiAgICAgIHZhciBzID0gKHhpbiArIHlpbikgKiBGMjsgLy8gSGFpcnkgZmFjdG9yIGZvciAyRFxuXG4gICAgICB2YXIgaSA9IE1hdGguZmxvb3IoeGluICsgcyk7XG4gICAgICB2YXIgaiA9IE1hdGguZmxvb3IoeWluICsgcyk7XG4gICAgICB2YXIgdCA9IChpICsgaikgKiBHMjtcbiAgICAgIHZhciBYMCA9IGkgLSB0OyAvLyBVbnNrZXcgdGhlIGNlbGwgb3JpZ2luIGJhY2sgdG8gKHgseSkgc3BhY2VcblxuICAgICAgdmFyIFkwID0gaiAtIHQ7XG4gICAgICB2YXIgeDAgPSB4aW4gLSBYMDsgLy8gVGhlIHgseSBkaXN0YW5jZXMgZnJvbSB0aGUgY2VsbCBvcmlnaW5cblxuICAgICAgdmFyIHkwID0geWluIC0gWTA7IC8vIEZvciB0aGUgMkQgY2FzZSwgdGhlIHNpbXBsZXggc2hhcGUgaXMgYW4gZXF1aWxhdGVyYWwgdHJpYW5nbGUuXG4gICAgICAvLyBEZXRlcm1pbmUgd2hpY2ggc2ltcGxleCB3ZSBhcmUgaW4uXG5cbiAgICAgIHZhciBpMSwgajE7IC8vIE9mZnNldHMgZm9yIHNlY29uZCAobWlkZGxlKSBjb3JuZXIgb2Ygc2ltcGxleCBpbiAoaSxqKSBjb29yZHNcblxuICAgICAgaWYgKHgwID4geTApIHtcbiAgICAgICAgaTEgPSAxO1xuICAgICAgICBqMSA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBsb3dlciB0cmlhbmdsZSwgWFkgb3JkZXI6ICgwLDApLT4oMSwwKS0+KDEsMSlcbiAgICAgICAgaTEgPSAwO1xuICAgICAgICBqMSA9IDE7XG4gICAgICB9IC8vIHVwcGVyIHRyaWFuZ2xlLCBZWCBvcmRlcjogKDAsMCktPigwLDEpLT4oMSwxKVxuICAgICAgLy8gQSBzdGVwIG9mICgxLDApIGluIChpLGopIG1lYW5zIGEgc3RlcCBvZiAoMS1jLC1jKSBpbiAoeCx5KSwgYW5kXG4gICAgICAvLyBhIHN0ZXAgb2YgKDAsMSkgaW4gKGksaikgbWVhbnMgYSBzdGVwIG9mICgtYywxLWMpIGluICh4LHkpLCB3aGVyZVxuICAgICAgLy8gYyA9ICgzLXNxcnQoMykpLzZcblxuXG4gICAgICB2YXIgeDEgPSB4MCAtIGkxICsgRzI7IC8vIE9mZnNldHMgZm9yIG1pZGRsZSBjb3JuZXIgaW4gKHgseSkgdW5za2V3ZWQgY29vcmRzXG5cbiAgICAgIHZhciB5MSA9IHkwIC0gajEgKyBHMjtcbiAgICAgIHZhciB4MiA9IHgwIC0gMSArIDIgKiBHMjsgLy8gT2Zmc2V0cyBmb3IgbGFzdCBjb3JuZXIgaW4gKHgseSkgdW5za2V3ZWQgY29vcmRzXG5cbiAgICAgIHZhciB5MiA9IHkwIC0gMSArIDIgKiBHMjsgLy8gV29yayBvdXQgdGhlIGhhc2hlZCBncmFkaWVudCBpbmRpY2VzIG9mIHRoZSB0aHJlZSBzaW1wbGV4IGNvcm5lcnNcblxuICAgICAgdmFyIGlpID0gbW9kKGksIGNvdW50KTtcbiAgICAgIHZhciBqaiA9IG1vZChqLCBjb3VudCk7IC8vIENhbGN1bGF0ZSB0aGUgY29udHJpYnV0aW9uIGZyb20gdGhlIHRocmVlIGNvcm5lcnNcblxuICAgICAgdmFyIHQwID0gMC41IC0geDAgKiB4MCAtIHkwICogeTA7XG5cbiAgICAgIGlmICh0MCA+PSAwKSB7XG4gICAgICAgIHQwICo9IHQwO1xuICAgICAgICBnaSA9IGluZGV4ZXNbaWkgKyBwZXJtc1tqal1dO1xuICAgICAgICB2YXIgZ3JhZCA9IHRoaXMuX2dyYWRpZW50c1tnaV07XG4gICAgICAgIG4wID0gdDAgKiB0MCAqIChncmFkWzBdICogeDAgKyBncmFkWzFdICogeTApO1xuICAgICAgfVxuXG4gICAgICB2YXIgdDEgPSAwLjUgLSB4MSAqIHgxIC0geTEgKiB5MTtcblxuICAgICAgaWYgKHQxID49IDApIHtcbiAgICAgICAgdDEgKj0gdDE7XG4gICAgICAgIGdpID0gaW5kZXhlc1tpaSArIGkxICsgcGVybXNbamogKyBqMV1dO1xuICAgICAgICB2YXIgX2dyYWQgPSB0aGlzLl9ncmFkaWVudHNbZ2ldO1xuICAgICAgICBuMSA9IHQxICogdDEgKiAoX2dyYWRbMF0gKiB4MSArIF9ncmFkWzFdICogeTEpO1xuICAgICAgfVxuXG4gICAgICB2YXIgdDIgPSAwLjUgLSB4MiAqIHgyIC0geTIgKiB5MjtcblxuICAgICAgaWYgKHQyID49IDApIHtcbiAgICAgICAgdDIgKj0gdDI7XG4gICAgICAgIGdpID0gaW5kZXhlc1tpaSArIDEgKyBwZXJtc1tqaiArIDFdXTtcbiAgICAgICAgdmFyIF9ncmFkMiA9IHRoaXMuX2dyYWRpZW50c1tnaV07XG4gICAgICAgIG4yID0gdDIgKiB0MiAqIChfZ3JhZDJbMF0gKiB4MiArIF9ncmFkMlsxXSAqIHkyKTtcbiAgICAgIH0gLy8gQWRkIGNvbnRyaWJ1dGlvbnMgZnJvbSBlYWNoIGNvcm5lciB0byBnZXQgdGhlIGZpbmFsIG5vaXNlIHZhbHVlLlxuICAgICAgLy8gVGhlIHJlc3VsdCBpcyBzY2FsZWQgdG8gcmV0dXJuIHZhbHVlcyBpbiB0aGUgaW50ZXJ2YWwgWy0xLDFdLlxuXG5cbiAgICAgIHJldHVybiA3MCAqIChuMCArIG4xICsgbjIpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2ltcGxleDtcbiAgfShOb2lzZSk7XG5cbiAgdmFyIGluZGV4JDMgPSB7XG4gICAgU2ltcGxleDogU2ltcGxleFxuICB9O1xuICAvKipcbiAgICogQGNsYXNzIEFic3RyYWN0IHBhdGhmaW5kZXJcbiAgICogQHBhcmFtIHtpbnR9IHRvWCBUYXJnZXQgWCBjb29yZFxuICAgKiBAcGFyYW0ge2ludH0gdG9ZIFRhcmdldCBZIGNvb3JkXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IHBhc3NhYmxlQ2FsbGJhY2sgQ2FsbGJhY2sgdG8gZGV0ZXJtaW5lIG1hcCBwYXNzYWJpbGl0eVxuICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG4gICAqIEBwYXJhbSB7aW50fSBbb3B0aW9ucy50b3BvbG9neT04XVxuICAgKi9cblxuICB2YXIgUGF0aCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUGF0aCh0b1gsIHRvWSwgcGFzc2FibGVDYWxsYmFjaywgb3B0aW9ucykge1xuICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3RvWCA9IHRvWDtcbiAgICAgIHRoaXMuX3RvWSA9IHRvWTtcbiAgICAgIHRoaXMuX3Bhc3NhYmxlQ2FsbGJhY2sgPSBwYXNzYWJsZUNhbGxiYWNrO1xuICAgICAgdGhpcy5fb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICB0b3BvbG9neTogOFxuICAgICAgfSwgb3B0aW9ucyk7XG4gICAgICB0aGlzLl9kaXJzID0gRElSU1t0aGlzLl9vcHRpb25zLnRvcG9sb2d5XTtcblxuICAgICAgaWYgKHRoaXMuX29wdGlvbnMudG9wb2xvZ3kgPT0gOCkge1xuICAgICAgICAvKiByZW9yZGVyIGRpcnMgZm9yIG1vcmUgYWVzdGhldGljIHJlc3VsdCAodmVydGljYWwvaG9yaXpvbnRhbCBmaXJzdCkgKi9cbiAgICAgICAgdGhpcy5fZGlycyA9IFt0aGlzLl9kaXJzWzBdLCB0aGlzLl9kaXJzWzJdLCB0aGlzLl9kaXJzWzRdLCB0aGlzLl9kaXJzWzZdLCB0aGlzLl9kaXJzWzFdLCB0aGlzLl9kaXJzWzNdLCB0aGlzLl9kaXJzWzVdLCB0aGlzLl9kaXJzWzddXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgX3Byb3RvMzQgPSBQYXRoLnByb3RvdHlwZTtcblxuICAgIF9wcm90bzM0Ll9nZXROZWlnaGJvcnMgPSBmdW5jdGlvbiBfZ2V0TmVpZ2hib3JzKGN4LCBjeSkge1xuICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2RpcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGRpciA9IHRoaXMuX2RpcnNbaV07XG4gICAgICAgIHZhciB4ID0gY3ggKyBkaXJbMF07XG4gICAgICAgIHZhciB5ID0gY3kgKyBkaXJbMV07XG5cbiAgICAgICAgaWYgKCF0aGlzLl9wYXNzYWJsZUNhbGxiYWNrKHgsIHkpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXN1bHQucHVzaChbeCwgeV0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbiAgICByZXR1cm4gUGF0aDtcbiAgfSgpO1xuICAvKipcbiAgICogQGNsYXNzIFNpbXBsaWZpZWQgRGlqa3N0cmEncyBhbGdvcml0aG06IGFsbCBlZGdlcyBoYXZlIGEgdmFsdWUgb2YgMVxuICAgKiBAYXVnbWVudHMgUk9ULlBhdGhcbiAgICogQHNlZSBST1QuUGF0aFxuICAgKi9cblxuXG4gIHZhciBEaWprc3RyYSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1BhdGgpIHtcbiAgICBfaW5oZXJpdHNMb29zZShEaWprc3RyYSwgX1BhdGgpO1xuXG4gICAgZnVuY3Rpb24gRGlqa3N0cmEodG9YLCB0b1ksIHBhc3NhYmxlQ2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICAgIHZhciBfdGhpczIwO1xuXG4gICAgICBfdGhpczIwID0gX1BhdGguY2FsbCh0aGlzLCB0b1gsIHRvWSwgcGFzc2FibGVDYWxsYmFjaywgb3B0aW9ucykgfHwgdGhpcztcbiAgICAgIF90aGlzMjAuX2NvbXB1dGVkID0ge307XG4gICAgICBfdGhpczIwLl90b2RvID0gW107XG5cbiAgICAgIF90aGlzMjAuX2FkZCh0b1gsIHRvWSwgbnVsbCk7XG5cbiAgICAgIHJldHVybiBfdGhpczIwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlIGEgcGF0aCBmcm9tIGEgZ2l2ZW4gcG9pbnRcbiAgICAgKiBAc2VlIFJPVC5QYXRoI2NvbXB1dGVcbiAgICAgKi9cblxuXG4gICAgdmFyIF9wcm90bzM1ID0gRGlqa3N0cmEucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvMzUuY29tcHV0ZSA9IGZ1bmN0aW9uIGNvbXB1dGUoZnJvbVgsIGZyb21ZLCBjYWxsYmFjaykge1xuICAgICAgdmFyIGtleSA9IGZyb21YICsgXCIsXCIgKyBmcm9tWTtcblxuICAgICAgaWYgKCEoa2V5IGluIHRoaXMuX2NvbXB1dGVkKSkge1xuICAgICAgICB0aGlzLl9jb21wdXRlKGZyb21YLCBmcm9tWSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghKGtleSBpbiB0aGlzLl9jb21wdXRlZCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgaXRlbSA9IHRoaXMuX2NvbXB1dGVkW2tleV07XG5cbiAgICAgIHdoaWxlIChpdGVtKSB7XG4gICAgICAgIGNhbGxiYWNrKGl0ZW0ueCwgaXRlbS55KTtcbiAgICAgICAgaXRlbSA9IGl0ZW0ucHJldjtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcHV0ZSBhIG5vbi1jYWNoZWQgdmFsdWVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8zNS5fY29tcHV0ZSA9IGZ1bmN0aW9uIF9jb21wdXRlKGZyb21YLCBmcm9tWSkge1xuICAgICAgd2hpbGUgKHRoaXMuX3RvZG8ubGVuZ3RoKSB7XG4gICAgICAgIHZhciBpdGVtID0gdGhpcy5fdG9kby5zaGlmdCgpO1xuXG4gICAgICAgIGlmIChpdGVtLnggPT0gZnJvbVggJiYgaXRlbS55ID09IGZyb21ZKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG5laWdoYm9ycyA9IHRoaXMuX2dldE5laWdoYm9ycyhpdGVtLngsIGl0ZW0ueSk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZWlnaGJvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgbmVpZ2hib3IgPSBuZWlnaGJvcnNbaV07XG4gICAgICAgICAgdmFyIHggPSBuZWlnaGJvclswXTtcbiAgICAgICAgICB2YXIgeSA9IG5laWdoYm9yWzFdO1xuICAgICAgICAgIHZhciBpZCA9IHggKyBcIixcIiArIHk7XG5cbiAgICAgICAgICBpZiAoaWQgaW4gdGhpcy5fY29tcHV0ZWQpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvKiBhbHJlYWR5IGRvbmUgKi9cblxuXG4gICAgICAgICAgdGhpcy5fYWRkKHgsIHksIGl0ZW0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90bzM1Ll9hZGQgPSBmdW5jdGlvbiBfYWRkKHgsIHksIHByZXYpIHtcbiAgICAgIHZhciBvYmogPSB7XG4gICAgICAgIHg6IHgsXG4gICAgICAgIHk6IHksXG4gICAgICAgIHByZXY6IHByZXZcbiAgICAgIH07XG4gICAgICB0aGlzLl9jb21wdXRlZFt4ICsgXCIsXCIgKyB5XSA9IG9iajtcblxuICAgICAgdGhpcy5fdG9kby5wdXNoKG9iaik7XG4gICAgfTtcblxuICAgIHJldHVybiBEaWprc3RyYTtcbiAgfShQYXRoKTtcbiAgLyoqXG4gICAqIEBjbGFzcyBTaW1wbGlmaWVkIEEqIGFsZ29yaXRobTogYWxsIGVkZ2VzIGhhdmUgYSB2YWx1ZSBvZiAxXG4gICAqIEBhdWdtZW50cyBST1QuUGF0aFxuICAgKiBAc2VlIFJPVC5QYXRoXG4gICAqL1xuXG5cbiAgdmFyIEFTdGFyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUGF0aDIpIHtcbiAgICBfaW5oZXJpdHNMb29zZShBU3RhciwgX1BhdGgyKTtcblxuICAgIGZ1bmN0aW9uIEFTdGFyKHRvWCwgdG9ZLCBwYXNzYWJsZUNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICB2YXIgX3RoaXMyMTtcblxuICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG5cbiAgICAgIF90aGlzMjEgPSBfUGF0aDIuY2FsbCh0aGlzLCB0b1gsIHRvWSwgcGFzc2FibGVDYWxsYmFjaywgb3B0aW9ucykgfHwgdGhpcztcbiAgICAgIF90aGlzMjEuX3RvZG8gPSBbXTtcbiAgICAgIF90aGlzMjEuX2RvbmUgPSB7fTtcbiAgICAgIHJldHVybiBfdGhpczIxO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlIGEgcGF0aCBmcm9tIGEgZ2l2ZW4gcG9pbnRcbiAgICAgKiBAc2VlIFJPVC5QYXRoI2NvbXB1dGVcbiAgICAgKi9cblxuXG4gICAgdmFyIF9wcm90bzM2ID0gQVN0YXIucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvMzYuY29tcHV0ZSA9IGZ1bmN0aW9uIGNvbXB1dGUoZnJvbVgsIGZyb21ZLCBjYWxsYmFjaykge1xuICAgICAgdGhpcy5fdG9kbyA9IFtdO1xuICAgICAgdGhpcy5fZG9uZSA9IHt9O1xuICAgICAgdGhpcy5fZnJvbVggPSBmcm9tWDtcbiAgICAgIHRoaXMuX2Zyb21ZID0gZnJvbVk7XG5cbiAgICAgIHRoaXMuX2FkZCh0aGlzLl90b1gsIHRoaXMuX3RvWSwgbnVsbCk7XG5cbiAgICAgIHdoaWxlICh0aGlzLl90b2RvLmxlbmd0aCkge1xuICAgICAgICB2YXIgX2l0ZW0gPSB0aGlzLl90b2RvLnNoaWZ0KCk7XG5cbiAgICAgICAgdmFyIGlkID0gX2l0ZW0ueCArIFwiLFwiICsgX2l0ZW0ueTtcblxuICAgICAgICBpZiAoaWQgaW4gdGhpcy5fZG9uZSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZG9uZVtpZF0gPSBfaXRlbTtcblxuICAgICAgICBpZiAoX2l0ZW0ueCA9PSBmcm9tWCAmJiBfaXRlbS55ID09IGZyb21ZKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbmVpZ2hib3JzID0gdGhpcy5fZ2V0TmVpZ2hib3JzKF9pdGVtLngsIF9pdGVtLnkpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmVpZ2hib3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIG5laWdoYm9yID0gbmVpZ2hib3JzW2ldO1xuICAgICAgICAgIHZhciB4ID0gbmVpZ2hib3JbMF07XG4gICAgICAgICAgdmFyIHkgPSBuZWlnaGJvclsxXTtcblxuICAgICAgICAgIHZhciBfaWQzID0geCArIFwiLFwiICsgeTtcblxuICAgICAgICAgIGlmIChfaWQzIGluIHRoaXMuX2RvbmUpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuX2FkZCh4LCB5LCBfaXRlbSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIGl0ZW0gPSB0aGlzLl9kb25lW2Zyb21YICsgXCIsXCIgKyBmcm9tWV07XG5cbiAgICAgIGlmICghaXRlbSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHdoaWxlIChpdGVtKSB7XG4gICAgICAgIGNhbGxiYWNrKGl0ZW0ueCwgaXRlbS55KTtcbiAgICAgICAgaXRlbSA9IGl0ZW0ucHJldjtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvMzYuX2FkZCA9IGZ1bmN0aW9uIF9hZGQoeCwgeSwgcHJldikge1xuICAgICAgdmFyIGggPSB0aGlzLl9kaXN0YW5jZSh4LCB5KTtcblxuICAgICAgdmFyIG9iaiA9IHtcbiAgICAgICAgeDogeCxcbiAgICAgICAgeTogeSxcbiAgICAgICAgcHJldjogcHJldixcbiAgICAgICAgZzogcHJldiA/IHByZXYuZyArIDEgOiAwLFxuICAgICAgICBoOiBoXG4gICAgICB9O1xuICAgICAgLyogaW5zZXJ0IGludG8gcHJpb3JpdHkgcXVldWUgKi9cblxuICAgICAgdmFyIGYgPSBvYmouZyArIG9iai5oO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3RvZG8ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLl90b2RvW2ldO1xuICAgICAgICB2YXIgaXRlbUYgPSBpdGVtLmcgKyBpdGVtLmg7XG5cbiAgICAgICAgaWYgKGYgPCBpdGVtRiB8fCBmID09IGl0ZW1GICYmIGggPCBpdGVtLmgpIHtcbiAgICAgICAgICB0aGlzLl90b2RvLnNwbGljZShpLCAwLCBvYmopO1xuXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3RvZG8ucHVzaChvYmopO1xuICAgIH07XG5cbiAgICBfcHJvdG8zNi5fZGlzdGFuY2UgPSBmdW5jdGlvbiBfZGlzdGFuY2UoeCwgeSkge1xuICAgICAgc3dpdGNoICh0aGlzLl9vcHRpb25zLnRvcG9sb2d5KSB7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICByZXR1cm4gTWF0aC5hYnMoeCAtIHRoaXMuX2Zyb21YKSArIE1hdGguYWJzKHkgLSB0aGlzLl9mcm9tWSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHZhciBkeCA9IE1hdGguYWJzKHggLSB0aGlzLl9mcm9tWCk7XG4gICAgICAgICAgdmFyIGR5ID0gTWF0aC5hYnMoeSAtIHRoaXMuX2Zyb21ZKTtcbiAgICAgICAgICByZXR1cm4gZHkgKyBNYXRoLm1heCgwLCAoZHggLSBkeSkgLyAyKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgcmV0dXJuIE1hdGgubWF4KE1hdGguYWJzKHggLSB0aGlzLl9mcm9tWCksIE1hdGguYWJzKHkgLSB0aGlzLl9mcm9tWSkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gQVN0YXI7XG4gIH0oUGF0aCk7XG5cbiAgdmFyIGluZGV4JDQgPSB7XG4gICAgRGlqa3N0cmE6IERpamtzdHJhLFxuICAgIEFTdGFyOiBBU3RhclxuICB9O1xuICAvKipcbiAgICogQGNsYXNzIEFzeW5jaHJvbm91cyBtYWluIGxvb3BcbiAgICogQHBhcmFtIHtST1QuU2NoZWR1bGVyfSBzY2hlZHVsZXJcbiAgICovXG5cbiAgdmFyIEVuZ2luZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRW5naW5lKHNjaGVkdWxlcikge1xuICAgICAgdGhpcy5fc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgdGhpcy5fbG9jayA9IDE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0IHRoZSBtYWluIGxvb3AuIFdoZW4gdGhpcyBjYWxsIHJldHVybnMsIHRoZSBsb29wIGlzIGxvY2tlZC5cbiAgICAgKi9cblxuXG4gICAgdmFyIF9wcm90bzM3ID0gRW5naW5lLnByb3RvdHlwZTtcblxuICAgIF9wcm90bzM3LnN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICByZXR1cm4gdGhpcy51bmxvY2soKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJydXB0IHRoZSBlbmdpbmUgYnkgYW4gYXN5bmNocm9ub3VzIGFjdGlvblxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90bzM3LmxvY2sgPSBmdW5jdGlvbiBsb2NrKCkge1xuICAgICAgdGhpcy5fbG9jaysrO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc3VtZSBleGVjdXRpb24gKHBhdXNlZCBieSBhIHByZXZpb3VzIGxvY2spXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvMzcudW5sb2NrID0gZnVuY3Rpb24gdW5sb2NrKCkge1xuICAgICAgaWYgKCF0aGlzLl9sb2NrKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCB1bmxvY2sgdW5sb2NrZWQgZW5naW5lXCIpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9sb2NrLS07XG5cbiAgICAgIHdoaWxlICghdGhpcy5fbG9jaykge1xuICAgICAgICB2YXIgYWN0b3IgPSB0aGlzLl9zY2hlZHVsZXIubmV4dCgpO1xuXG4gICAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5sb2NrKCk7XG4gICAgICAgIH1cbiAgICAgICAgLyogbm8gYWN0b3JzICovXG5cblxuICAgICAgICB2YXIgcmVzdWx0ID0gYWN0b3IuYWN0KCk7XG5cbiAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQudGhlbikge1xuICAgICAgICAgIC8qIGFjdG9yIHJldHVybmVkIGEgXCJ0aGVuYWJsZVwiLCBsb29rcyBsaWtlIGEgUHJvbWlzZSAqL1xuICAgICAgICAgIHRoaXMubG9jaygpO1xuICAgICAgICAgIHJlc3VsdC50aGVuKHRoaXMudW5sb2NrLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICByZXR1cm4gRW5naW5lO1xuICB9KCk7XG4gIC8qKlxuICAgKiBMaWdodGluZyBjb21wdXRhdGlvbiwgYmFzZWQgb24gYSB0cmFkaXRpb25hbCBGT1YgZm9yIG11bHRpcGxlIGxpZ2h0IHNvdXJjZXMgYW5kIG11bHRpcGxlIHBhc3Nlcy5cbiAgICovXG5cblxuICB2YXIgTGlnaHRpbmcgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIExpZ2h0aW5nKHJlZmxlY3Rpdml0eUNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fcmVmbGVjdGl2aXR5Q2FsbGJhY2sgPSByZWZsZWN0aXZpdHlDYWxsYmFjaztcbiAgICAgIHRoaXMuX29wdGlvbnMgPSB7fTtcbiAgICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgcGFzc2VzOiAxLFxuICAgICAgICBlbWlzc2lvblRocmVzaG9sZDogMTAwLFxuICAgICAgICByYW5nZTogMTBcbiAgICAgIH0sIG9wdGlvbnMpO1xuICAgICAgdGhpcy5fbGlnaHRzID0ge307XG4gICAgICB0aGlzLl9yZWZsZWN0aXZpdHlDYWNoZSA9IHt9O1xuICAgICAgdGhpcy5fZm92Q2FjaGUgPSB7fTtcbiAgICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRqdXN0IG9wdGlvbnMgYXQgcnVudGltZVxuICAgICAqL1xuXG5cbiAgICB2YXIgX3Byb3RvMzggPSBMaWdodGluZy5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8zOC5zZXRPcHRpb25zID0gZnVuY3Rpb24gc2V0T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgICBPYmplY3QuYXNzaWduKHRoaXMuX29wdGlvbnMsIG9wdGlvbnMpO1xuXG4gICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnJhbmdlKSB7XG4gICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdXNlZCBGaWVsZC1PZi1WaWV3IGFsZ29cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8zOC5zZXRGT1YgPSBmdW5jdGlvbiBzZXRGT1YoZm92KSB7XG4gICAgICB0aGlzLl9mb3YgPSBmb3Y7XG4gICAgICB0aGlzLl9mb3ZDYWNoZSA9IHt9O1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCAob3IgcmVtb3ZlKSBhIGxpZ2h0IHNvdXJjZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90bzM4LnNldExpZ2h0ID0gZnVuY3Rpb24gc2V0TGlnaHQoeCwgeSwgY29sb3IpIHtcbiAgICAgIHZhciBrZXkgPSB4ICsgXCIsXCIgKyB5O1xuXG4gICAgICBpZiAoY29sb3IpIHtcbiAgICAgICAgdGhpcy5fbGlnaHRzW2tleV0gPSB0eXBlb2YgY29sb3IgPT0gXCJzdHJpbmdcIiA/IGZyb21TdHJpbmcoY29sb3IpIDogY29sb3I7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWxldGUgdGhpcy5fbGlnaHRzW2tleV07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYWxsIGxpZ2h0IHNvdXJjZXNcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8zOC5jbGVhckxpZ2h0cyA9IGZ1bmN0aW9uIGNsZWFyTGlnaHRzKCkge1xuICAgICAgdGhpcy5fbGlnaHRzID0ge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSBwcmUtY29tcHV0ZWQgdG9wb2xvZ3kgdmFsdWVzLiBDYWxsIHdoZW5ldmVyIHRoZSB1bmRlcmx5aW5nIG1hcCBjaGFuZ2VzIGl0cyBsaWdodC1wYXNzYWJpbGl0eS5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8zOC5yZXNldCA9IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgdGhpcy5fcmVmbGVjdGl2aXR5Q2FjaGUgPSB7fTtcbiAgICAgIHRoaXMuX2ZvdkNhY2hlID0ge307XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcHV0ZSB0aGUgbGlnaHRpbmdcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8zOC5jb21wdXRlID0gZnVuY3Rpb24gY29tcHV0ZShsaWdodGluZ0NhbGxiYWNrKSB7XG4gICAgICB2YXIgZG9uZUNlbGxzID0ge307XG4gICAgICB2YXIgZW1pdHRpbmdDZWxscyA9IHt9O1xuICAgICAgdmFyIGxpdENlbGxzID0ge307XG5cbiAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLl9saWdodHMpIHtcbiAgICAgICAgLyogcHJlcGFyZSBlbWl0dGVycyBmb3IgZmlyc3QgcGFzcyAqL1xuICAgICAgICB2YXIgbGlnaHQgPSB0aGlzLl9saWdodHNba2V5XTtcbiAgICAgICAgZW1pdHRpbmdDZWxsc1trZXldID0gWzAsIDAsIDBdO1xuICAgICAgICBhZGRfKGVtaXR0aW5nQ2VsbHNba2V5XSwgbGlnaHQpO1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX29wdGlvbnMucGFzc2VzOyBpKyspIHtcbiAgICAgICAgLyogbWFpbiBsb29wICovXG4gICAgICAgIHRoaXMuX2VtaXRMaWdodChlbWl0dGluZ0NlbGxzLCBsaXRDZWxscywgZG9uZUNlbGxzKTtcblxuICAgICAgICBpZiAoaSArIDEgPT0gdGhpcy5fb3B0aW9ucy5wYXNzZXMpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvKiBub3QgZm9yIHRoZSBsYXN0IHBhc3MgKi9cblxuXG4gICAgICAgIGVtaXR0aW5nQ2VsbHMgPSB0aGlzLl9jb21wdXRlRW1pdHRlcnMobGl0Q2VsbHMsIGRvbmVDZWxscyk7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGxpdEtleSBpbiBsaXRDZWxscykge1xuICAgICAgICAvKiBsZXQgdGhlIHVzZXIga25vdyB3aGF0IGFuZCBob3cgaXMgbGl0ICovXG4gICAgICAgIHZhciBwYXJ0cyA9IGxpdEtleS5zcGxpdChcIixcIik7XG4gICAgICAgIHZhciB4ID0gcGFyc2VJbnQocGFydHNbMF0pO1xuICAgICAgICB2YXIgeSA9IHBhcnNlSW50KHBhcnRzWzFdKTtcbiAgICAgICAgbGlnaHRpbmdDYWxsYmFjayh4LCB5LCBsaXRDZWxsc1tsaXRLZXldKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGUgb25lIGl0ZXJhdGlvbiBmcm9tIGFsbCBlbWl0dGluZyBjZWxsc1xuICAgICAqIEBwYXJhbSBlbWl0dGluZ0NlbGxzIFRoZXNlIGVtaXQgbGlnaHRcbiAgICAgKiBAcGFyYW0gbGl0Q2VsbHMgQWRkIHByb2plY3RlZCBsaWdodCB0byB0aGVzZVxuICAgICAqIEBwYXJhbSBkb25lQ2VsbHMgVGhlc2UgYWxyZWFkeSBlbWl0dGVkLCBmb3JiaWQgdGhlbSBmcm9tIGZ1cnRoZXIgY2FsY3VsYXRpb25zXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvMzguX2VtaXRMaWdodCA9IGZ1bmN0aW9uIF9lbWl0TGlnaHQoZW1pdHRpbmdDZWxscywgbGl0Q2VsbHMsIGRvbmVDZWxscykge1xuICAgICAgZm9yICh2YXIga2V5IGluIGVtaXR0aW5nQ2VsbHMpIHtcbiAgICAgICAgdmFyIHBhcnRzID0ga2V5LnNwbGl0KFwiLFwiKTtcbiAgICAgICAgdmFyIHggPSBwYXJzZUludChwYXJ0c1swXSk7XG4gICAgICAgIHZhciB5ID0gcGFyc2VJbnQocGFydHNbMV0pO1xuXG4gICAgICAgIHRoaXMuX2VtaXRMaWdodEZyb21DZWxsKHgsIHksIGVtaXR0aW5nQ2VsbHNba2V5XSwgbGl0Q2VsbHMpO1xuXG4gICAgICAgIGRvbmVDZWxsc1trZXldID0gMTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByZXBhcmUgYSBsaXN0IG9mIGVtaXR0ZXJzIGZvciBuZXh0IHBhc3NcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8zOC5fY29tcHV0ZUVtaXR0ZXJzID0gZnVuY3Rpb24gX2NvbXB1dGVFbWl0dGVycyhsaXRDZWxscywgZG9uZUNlbGxzKSB7XG4gICAgICB2YXIgcmVzdWx0ID0ge307XG5cbiAgICAgIGZvciAodmFyIGtleSBpbiBsaXRDZWxscykge1xuICAgICAgICBpZiAoa2V5IGluIGRvbmVDZWxscykge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8qIGFscmVhZHkgZW1pdHRlZCAqL1xuXG5cbiAgICAgICAgdmFyIF9jb2xvciA9IGxpdENlbGxzW2tleV07XG4gICAgICAgIHZhciByZWZsZWN0aXZpdHkgPSB2b2lkIDA7XG5cbiAgICAgICAgaWYgKGtleSBpbiB0aGlzLl9yZWZsZWN0aXZpdHlDYWNoZSkge1xuICAgICAgICAgIHJlZmxlY3Rpdml0eSA9IHRoaXMuX3JlZmxlY3Rpdml0eUNhY2hlW2tleV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHBhcnRzID0ga2V5LnNwbGl0KFwiLFwiKTtcbiAgICAgICAgICB2YXIgeCA9IHBhcnNlSW50KHBhcnRzWzBdKTtcbiAgICAgICAgICB2YXIgeSA9IHBhcnNlSW50KHBhcnRzWzFdKTtcbiAgICAgICAgICByZWZsZWN0aXZpdHkgPSB0aGlzLl9yZWZsZWN0aXZpdHlDYWxsYmFjayh4LCB5KTtcbiAgICAgICAgICB0aGlzLl9yZWZsZWN0aXZpdHlDYWNoZVtrZXldID0gcmVmbGVjdGl2aXR5O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlZmxlY3Rpdml0eSA9PSAwKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgLyogd2lsbCBub3QgcmVmbGVjdCBhdCBhbGwgKi9cblxuICAgICAgICAvKiBjb21wdXRlIGVtaXNzaW9uIGNvbG9yICovXG5cblxuICAgICAgICB2YXIgZW1pc3Npb24gPSBbMCwgMCwgMF07XG4gICAgICAgIHZhciBpbnRlbnNpdHkgPSAwO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICAgICAgdmFyIHBhcnQgPSBNYXRoLnJvdW5kKF9jb2xvcltpXSAqIHJlZmxlY3Rpdml0eSk7XG4gICAgICAgICAgZW1pc3Npb25baV0gPSBwYXJ0O1xuICAgICAgICAgIGludGVuc2l0eSArPSBwYXJ0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGludGVuc2l0eSA+IHRoaXMuX29wdGlvbnMuZW1pc3Npb25UaHJlc2hvbGQpIHtcbiAgICAgICAgICByZXN1bHRba2V5XSA9IGVtaXNzaW9uO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGUgb25lIGl0ZXJhdGlvbiBmcm9tIG9uZSBjZWxsXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvMzguX2VtaXRMaWdodEZyb21DZWxsID0gZnVuY3Rpb24gX2VtaXRMaWdodEZyb21DZWxsKHgsIHksIGNvbG9yLCBsaXRDZWxscykge1xuICAgICAgdmFyIGtleSA9IHggKyBcIixcIiArIHk7XG4gICAgICB2YXIgZm92O1xuXG4gICAgICBpZiAoa2V5IGluIHRoaXMuX2ZvdkNhY2hlKSB7XG4gICAgICAgIGZvdiA9IHRoaXMuX2ZvdkNhY2hlW2tleV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3YgPSB0aGlzLl91cGRhdGVGT1YoeCwgeSk7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGZvdktleSBpbiBmb3YpIHtcbiAgICAgICAgdmFyIGZvcm1GYWN0b3IgPSBmb3ZbZm92S2V5XTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHZvaWQgMDtcblxuICAgICAgICBpZiAoZm92S2V5IGluIGxpdENlbGxzKSB7XG4gICAgICAgICAgLyogYWxyZWFkeSBsaXQgKi9cbiAgICAgICAgICByZXN1bHQgPSBsaXRDZWxsc1tmb3ZLZXldO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8qIG5ld2x5IGxpdCAqL1xuICAgICAgICAgIHJlc3VsdCA9IFswLCAwLCAwXTtcbiAgICAgICAgICBsaXRDZWxsc1tmb3ZLZXldID0gcmVzdWx0O1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICByZXN1bHRbaV0gKz0gTWF0aC5yb3VuZChjb2xvcltpXSAqIGZvcm1GYWN0b3IpO1xuICAgICAgICB9XG4gICAgICAgIC8qIGFkZCBsaWdodCBjb2xvciAqL1xuXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlIEZPViAoXCJmb3JtIGZhY3RvclwiKSBmb3IgYSBwb3RlbnRpYWwgbGlnaHQgc291cmNlIGF0IFt4LHldXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvMzguX3VwZGF0ZUZPViA9IGZ1bmN0aW9uIF91cGRhdGVGT1YoeCwgeSkge1xuICAgICAgdmFyIGtleTEgPSB4ICsgXCIsXCIgKyB5O1xuICAgICAgdmFyIGNhY2hlID0ge307XG4gICAgICB0aGlzLl9mb3ZDYWNoZVtrZXkxXSA9IGNhY2hlO1xuICAgICAgdmFyIHJhbmdlID0gdGhpcy5fb3B0aW9ucy5yYW5nZTtcblxuICAgICAgZnVuY3Rpb24gY2IoeCwgeSwgciwgdmlzKSB7XG4gICAgICAgIHZhciBrZXkyID0geCArIFwiLFwiICsgeTtcbiAgICAgICAgdmFyIGZvcm1GYWN0b3IgPSB2aXMgKiAoMSAtIHIgLyByYW5nZSk7XG5cbiAgICAgICAgaWYgKGZvcm1GYWN0b3IgPT0gMCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhY2hlW2tleTJdID0gZm9ybUZhY3RvcjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fZm92LmNvbXB1dGUoeCwgeSwgcmFuZ2UsIGNiLmJpbmQodGhpcykpO1xuXG4gICAgICByZXR1cm4gY2FjaGU7XG4gICAgfTtcblxuICAgIHJldHVybiBMaWdodGluZztcbiAgfSgpO1xuXG4gIHZhciBVdGlsID0gdXRpbDtcbiAgdmFyIENvbG9yID0gY29sb3I7XG4gIHZhciBUZXh0ID0gdGV4dDtcbiAgZXhwb3J0cy5VdGlsID0gVXRpbDtcbiAgZXhwb3J0cy5Db2xvciA9IENvbG9yO1xuICBleHBvcnRzLlRleHQgPSBUZXh0O1xuICBleHBvcnRzLlJORyA9IFJORyQxO1xuICBleHBvcnRzLkRpc3BsYXkgPSBEaXNwbGF5O1xuICBleHBvcnRzLlN0cmluZ0dlbmVyYXRvciA9IFN0cmluZ0dlbmVyYXRvcjtcbiAgZXhwb3J0cy5FdmVudFF1ZXVlID0gRXZlbnRRdWV1ZTtcbiAgZXhwb3J0cy5TY2hlZHVsZXIgPSBpbmRleDtcbiAgZXhwb3J0cy5GT1YgPSBpbmRleCQxO1xuICBleHBvcnRzLk1hcCA9IGluZGV4JDI7XG4gIGV4cG9ydHMuTm9pc2UgPSBpbmRleCQzO1xuICBleHBvcnRzLlBhdGggPSBpbmRleCQ0O1xuICBleHBvcnRzLkVuZ2luZSA9IEVuZ2luZTtcbiAgZXhwb3J0cy5MaWdodGluZyA9IExpZ2h0aW5nO1xuICBleHBvcnRzLkRFRkFVTFRfV0lEVEggPSBERUZBVUxUX1dJRFRIO1xuICBleHBvcnRzLkRFRkFVTFRfSEVJR0hUID0gREVGQVVMVF9IRUlHSFQ7XG4gIGV4cG9ydHMuRElSUyA9IERJUlM7XG4gIGV4cG9ydHMuS0VZUyA9IEtFWVM7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcbiAgICB2YWx1ZTogdHJ1ZVxuICB9KTtcbn0pO1xuXG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBub2RlL25vLWRlcHJlY2F0ZWQtYXBpICovXG52YXIgYnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJylcbnZhciBCdWZmZXIgPSBidWZmZXIuQnVmZmVyXG5cbi8vIGFsdGVybmF0aXZlIHRvIHVzaW5nIE9iamVjdC5rZXlzIGZvciBvbGQgYnJvd3NlcnNcbmZ1bmN0aW9uIGNvcHlQcm9wcyAoc3JjLCBkc3QpIHtcbiAgZm9yICh2YXIga2V5IGluIHNyYykge1xuICAgIGRzdFtrZXldID0gc3JjW2tleV1cbiAgfVxufVxuaWYgKEJ1ZmZlci5mcm9tICYmIEJ1ZmZlci5hbGxvYyAmJiBCdWZmZXIuYWxsb2NVbnNhZmUgJiYgQnVmZmVyLmFsbG9jVW5zYWZlU2xvdykge1xuICBtb2R1bGUuZXhwb3J0cyA9IGJ1ZmZlclxufSBlbHNlIHtcbiAgLy8gQ29weSBwcm9wZXJ0aWVzIGZyb20gcmVxdWlyZSgnYnVmZmVyJylcbiAgY29weVByb3BzKGJ1ZmZlciwgZXhwb3J0cylcbiAgZXhwb3J0cy5CdWZmZXIgPSBTYWZlQnVmZmVyXG59XG5cbmZ1bmN0aW9uIFNhZmVCdWZmZXIgKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBCdWZmZXIoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG59XG5cbi8vIENvcHkgc3RhdGljIG1ldGhvZHMgZnJvbSBCdWZmZXJcbmNvcHlQcm9wcyhCdWZmZXIsIFNhZmVCdWZmZXIpXG5cblNhZmVCdWZmZXIuZnJvbSA9IGZ1bmN0aW9uIChhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IG5vdCBiZSBhIG51bWJlcicpXG4gIH1cbiAgcmV0dXJuIEJ1ZmZlcihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbn1cblxuU2FmZUJ1ZmZlci5hbGxvYyA9IGZ1bmN0aW9uIChzaXplLCBmaWxsLCBlbmNvZGluZykge1xuICBpZiAodHlwZW9mIHNpemUgIT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpXG4gIH1cbiAgdmFyIGJ1ZiA9IEJ1ZmZlcihzaXplKVxuICBpZiAoZmlsbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGJ1Zi5maWxsKGZpbGwsIGVuY29kaW5nKVxuICAgIH0gZWxzZSB7XG4gICAgICBidWYuZmlsbChmaWxsKVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBidWYuZmlsbCgwKVxuICB9XG4gIHJldHVybiBidWZcbn1cblxuU2FmZUJ1ZmZlci5hbGxvY1Vuc2FmZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJylcbiAgfVxuICByZXR1cm4gQnVmZmVyKHNpemUpXG59XG5cblNhZmVCdWZmZXIuYWxsb2NVbnNhZmVTbG93ID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKVxuICB9XG4gIHJldHVybiBidWZmZXIuU2xvd0J1ZmZlcihzaXplKVxufVxuIiwiKGZ1bmN0aW9uIChnbG9iYWwsIHVuZGVmaW5lZCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgaWYgKGdsb2JhbC5zZXRJbW1lZGlhdGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBuZXh0SGFuZGxlID0gMTsgLy8gU3BlYyBzYXlzIGdyZWF0ZXIgdGhhbiB6ZXJvXG4gICAgdmFyIHRhc2tzQnlIYW5kbGUgPSB7fTtcbiAgICB2YXIgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgdmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcbiAgICB2YXIgcmVnaXN0ZXJJbW1lZGlhdGU7XG5cbiAgICBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoY2FsbGJhY2spIHtcbiAgICAgIC8vIENhbGxiYWNrIGNhbiBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhIHN0cmluZ1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNhbGxiYWNrID0gbmV3IEZ1bmN0aW9uKFwiXCIgKyBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgICAvLyBDb3B5IGZ1bmN0aW9uIGFyZ3VtZW50c1xuICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMV07XG4gICAgICB9XG4gICAgICAvLyBTdG9yZSBhbmQgcmVnaXN0ZXIgdGhlIHRhc2tcbiAgICAgIHZhciB0YXNrID0geyBjYWxsYmFjazogY2FsbGJhY2ssIGFyZ3M6IGFyZ3MgfTtcbiAgICAgIHRhc2tzQnlIYW5kbGVbbmV4dEhhbmRsZV0gPSB0YXNrO1xuICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUobmV4dEhhbmRsZSk7XG4gICAgICByZXR1cm4gbmV4dEhhbmRsZSsrO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGhhbmRsZSkge1xuICAgICAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bih0YXNrKSB7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IHRhc2suY2FsbGJhY2s7XG4gICAgICAgIHZhciBhcmdzID0gdGFzay5hcmdzO1xuICAgICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bklmUHJlc2VudChoYW5kbGUpIHtcbiAgICAgICAgLy8gRnJvbSB0aGUgc3BlYzogXCJXYWl0IHVudGlsIGFueSBpbnZvY2F0aW9ucyBvZiB0aGlzIGFsZ29yaXRobSBzdGFydGVkIGJlZm9yZSB0aGlzIG9uZSBoYXZlIGNvbXBsZXRlZC5cIlxuICAgICAgICAvLyBTbyBpZiB3ZSdyZSBjdXJyZW50bHkgcnVubmluZyBhIHRhc2ssIHdlJ2xsIG5lZWQgdG8gZGVsYXkgdGhpcyBpbnZvY2F0aW9uLlxuICAgICAgICBpZiAoY3VycmVudGx5UnVubmluZ0FUYXNrKSB7XG4gICAgICAgICAgICAvLyBEZWxheSBieSBkb2luZyBhIHNldFRpbWVvdXQuIHNldEltbWVkaWF0ZSB3YXMgdHJpZWQgaW5zdGVhZCwgYnV0IGluIEZpcmVmb3ggNyBpdCBnZW5lcmF0ZWQgYVxuICAgICAgICAgICAgLy8gXCJ0b28gbXVjaCByZWN1cnNpb25cIiBlcnJvci5cbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRhc2sgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcnVuKHRhc2spO1xuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW1tZWRpYXRlKGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7IHJ1bklmUHJlc2VudChoYW5kbGUpOyB9KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5Vc2VQb3N0TWVzc2FnZSgpIHtcbiAgICAgICAgLy8gVGhlIHRlc3QgYWdhaW5zdCBgaW1wb3J0U2NyaXB0c2AgcHJldmVudHMgdGhpcyBpbXBsZW1lbnRhdGlvbiBmcm9tIGJlaW5nIGluc3RhbGxlZCBpbnNpZGUgYSB3ZWIgd29ya2VyLFxuICAgICAgICAvLyB3aGVyZSBgZ2xvYmFsLnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS5cbiAgICAgICAgaWYgKGdsb2JhbC5wb3N0TWVzc2FnZSAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpIHtcbiAgICAgICAgICAgIHZhciBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBvbGRPbk1lc3NhZ2UgPSBnbG9iYWwub25tZXNzYWdlO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoXCJcIiwgXCIqXCIpO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IG9sZE9uTWVzc2FnZTtcbiAgICAgICAgICAgIHJldHVybiBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIC8vIEluc3RhbGxzIGFuIGV2ZW50IGhhbmRsZXIgb24gYGdsb2JhbGAgZm9yIHRoZSBgbWVzc2FnZWAgZXZlbnQ6IHNlZVxuICAgICAgICAvLyAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0RPTS93aW5kb3cucG9zdE1lc3NhZ2VcbiAgICAgICAgLy8gKiBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS9jb21tcy5odG1sI2Nyb3NzRG9jdW1lbnRNZXNzYWdlc1xuXG4gICAgICAgIHZhciBtZXNzYWdlUHJlZml4ID0gXCJzZXRJbW1lZGlhdGUkXCIgKyBNYXRoLnJhbmRvbSgpICsgXCIkXCI7XG4gICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gZ2xvYmFsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGV2ZW50LmRhdGEgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgICAgICBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoK2V2ZW50LmRhdGEuc2xpY2UobWVzc2FnZVByZWZpeC5sZW5ndGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdsb2JhbC5hdHRhY2hFdmVudChcIm9ubWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCBcIipcIik7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgaHRtbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSA8c2NyaXB0PiBlbGVtZW50OyBpdHMgcmVhZHlzdGF0ZWNoYW5nZSBldmVudCB3aWxsIGJlIGZpcmVkIGFzeW5jaHJvbm91c2x5IG9uY2UgaXQgaXMgaW5zZXJ0ZWRcbiAgICAgICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50LiBEbyBzbywgdGh1cyBxdWV1aW5nIHVwIHRoZSB0YXNrLiBSZW1lbWJlciB0byBjbGVhbiB1cCBvbmNlIGl0J3MgYmVlbiBjYWxsZWQuXG4gICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgICAgICAgICBzY3JpcHQgPSBudWxsO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gSWYgc3VwcG9ydGVkLCB3ZSBzaG91bGQgYXR0YWNoIHRvIHRoZSBwcm90b3R5cGUgb2YgZ2xvYmFsLCBzaW5jZSB0aGF0IGlzIHdoZXJlIHNldFRpbWVvdXQgZXQgYWwuIGxpdmUuXG4gICAgdmFyIGF0dGFjaFRvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihnbG9iYWwpO1xuICAgIGF0dGFjaFRvID0gYXR0YWNoVG8gJiYgYXR0YWNoVG8uc2V0VGltZW91dCA/IGF0dGFjaFRvIDogZ2xvYmFsO1xuXG4gICAgLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLlxuICAgIGlmICh7fS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gXCJbb2JqZWN0IHByb2Nlc3NdXCIpIHtcbiAgICAgICAgLy8gRm9yIE5vZGUuanMgYmVmb3JlIDAuOVxuICAgICAgICBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChjYW5Vc2VQb3N0TWVzc2FnZSgpKSB7XG4gICAgICAgIC8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZ2xvYmFsLk1lc3NhZ2VDaGFubmVsKSB7XG4gICAgICAgIC8vIEZvciB3ZWIgd29ya2Vycywgd2hlcmUgc3VwcG9ydGVkXG4gICAgICAgIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGRvYyAmJiBcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiIGluIGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpKSB7XG4gICAgICAgIC8vIEZvciBJRSA24oCTOFxuICAgICAgICBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGb3Igb2xkZXIgYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpO1xuICAgIH1cblxuICAgIGF0dGFjaFRvLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcbiAgICBhdHRhY2hUby5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xufSh0eXBlb2Ygc2VsZiA9PT0gXCJ1bmRlZmluZWRcIiA/IHR5cGVvZiBnbG9iYWwgPT09IFwidW5kZWZpbmVkXCIgPyB0aGlzIDogZ2xvYmFsIDogc2VsZikpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBQZWVyXG5cbnZhciBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ3NpbXBsZS1wZWVyJylcbnZhciBnZXRCcm93c2VyUlRDID0gcmVxdWlyZSgnZ2V0LWJyb3dzZXItcnRjJylcbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbnZhciByYW5kb21ieXRlcyA9IHJlcXVpcmUoJ3JhbmRvbWJ5dGVzJylcbnZhciBzdHJlYW0gPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0nKVxuXG52YXIgTUFYX0JVRkZFUkVEX0FNT1VOVCA9IDY0ICogMTAyNFxuXG5pbmhlcml0cyhQZWVyLCBzdHJlYW0uRHVwbGV4KVxuXG4vKipcbiAqIFdlYlJUQyBwZWVyIGNvbm5lY3Rpb24uIFNhbWUgQVBJIGFzIG5vZGUgY29yZSBgbmV0LlNvY2tldGAsIHBsdXMgYSBmZXcgZXh0cmEgbWV0aG9kcy5cbiAqIER1cGxleCBzdHJlYW0uXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0c1xuICovXG5mdW5jdGlvbiBQZWVyIChvcHRzKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuICBpZiAoIShzZWxmIGluc3RhbmNlb2YgUGVlcikpIHJldHVybiBuZXcgUGVlcihvcHRzKVxuXG4gIHNlbGYuX2lkID0gcmFuZG9tYnl0ZXMoNCkudG9TdHJpbmcoJ2hleCcpLnNsaWNlKDAsIDcpXG4gIHNlbGYuX2RlYnVnKCduZXcgcGVlciAlbycsIG9wdHMpXG5cbiAgb3B0cyA9IE9iamVjdC5hc3NpZ24oe1xuICAgIGFsbG93SGFsZk9wZW46IGZhbHNlXG4gIH0sIG9wdHMpXG5cbiAgc3RyZWFtLkR1cGxleC5jYWxsKHNlbGYsIG9wdHMpXG5cbiAgc2VsZi5jaGFubmVsTmFtZSA9IG9wdHMuaW5pdGlhdG9yXG4gICAgPyBvcHRzLmNoYW5uZWxOYW1lIHx8IHJhbmRvbWJ5dGVzKDIwKS50b1N0cmluZygnaGV4JylcbiAgICA6IG51bGxcblxuICAvLyBOZWVkZWQgYnkgX3RyYW5zZm9ybUNvbnN0cmFpbnRzLCBzbyBzZXQgdGhpcyBlYXJseVxuICBzZWxmLl9pc0Nocm9taXVtID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgISF3aW5kb3cud2Via2l0UlRDUGVlckNvbm5lY3Rpb25cblxuICBzZWxmLmluaXRpYXRvciA9IG9wdHMuaW5pdGlhdG9yIHx8IGZhbHNlXG4gIHNlbGYuY2hhbm5lbENvbmZpZyA9IG9wdHMuY2hhbm5lbENvbmZpZyB8fCBQZWVyLmNoYW5uZWxDb25maWdcbiAgc2VsZi5jb25maWcgPSBvcHRzLmNvbmZpZyB8fCBQZWVyLmNvbmZpZ1xuICBzZWxmLmNvbnN0cmFpbnRzID0gc2VsZi5fdHJhbnNmb3JtQ29uc3RyYWludHMob3B0cy5jb25zdHJhaW50cyB8fCBQZWVyLmNvbnN0cmFpbnRzKVxuICBzZWxmLm9mZmVyQ29uc3RyYWludHMgPSBzZWxmLl90cmFuc2Zvcm1Db25zdHJhaW50cyhvcHRzLm9mZmVyQ29uc3RyYWludHMgfHwge30pXG4gIHNlbGYuYW5zd2VyQ29uc3RyYWludHMgPSBzZWxmLl90cmFuc2Zvcm1Db25zdHJhaW50cyhvcHRzLmFuc3dlckNvbnN0cmFpbnRzIHx8IHt9KVxuICBzZWxmLnNkcFRyYW5zZm9ybSA9IG9wdHMuc2RwVHJhbnNmb3JtIHx8IGZ1bmN0aW9uIChzZHApIHsgcmV0dXJuIHNkcCB9XG4gIHNlbGYuc3RyZWFtcyA9IG9wdHMuc3RyZWFtcyB8fCAob3B0cy5zdHJlYW0gPyBbb3B0cy5zdHJlYW1dIDogW10pIC8vIHN1cHBvcnQgb2xkIFwic3RyZWFtXCIgb3B0aW9uXG4gIHNlbGYudHJpY2tsZSA9IG9wdHMudHJpY2tsZSAhPT0gdW5kZWZpbmVkID8gb3B0cy50cmlja2xlIDogdHJ1ZVxuXG4gIHNlbGYuZGVzdHJveWVkID0gZmFsc2VcbiAgc2VsZi5jb25uZWN0ZWQgPSBmYWxzZVxuXG4gIHNlbGYucmVtb3RlQWRkcmVzcyA9IHVuZGVmaW5lZFxuICBzZWxmLnJlbW90ZUZhbWlseSA9IHVuZGVmaW5lZFxuICBzZWxmLnJlbW90ZVBvcnQgPSB1bmRlZmluZWRcbiAgc2VsZi5sb2NhbEFkZHJlc3MgPSB1bmRlZmluZWRcbiAgc2VsZi5sb2NhbFBvcnQgPSB1bmRlZmluZWRcblxuICBzZWxmLl93cnRjID0gKG9wdHMud3J0YyAmJiB0eXBlb2Ygb3B0cy53cnRjID09PSAnb2JqZWN0JylcbiAgICA/IG9wdHMud3J0Y1xuICAgIDogZ2V0QnJvd3NlclJUQygpXG5cbiAgaWYgKCFzZWxmLl93cnRjKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aHJvdyBtYWtlRXJyb3IoJ05vIFdlYlJUQyBzdXBwb3J0OiBTcGVjaWZ5IGBvcHRzLndydGNgIG9wdGlvbiBpbiB0aGlzIGVudmlyb25tZW50JywgJ0VSUl9XRUJSVENfU1VQUE9SVCcpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG1ha2VFcnJvcignTm8gV2ViUlRDIHN1cHBvcnQ6IE5vdCBhIHN1cHBvcnRlZCBicm93c2VyJywgJ0VSUl9XRUJSVENfU1VQUE9SVCcpXG4gICAgfVxuICB9XG5cbiAgc2VsZi5fcGNSZWFkeSA9IGZhbHNlXG4gIHNlbGYuX2NoYW5uZWxSZWFkeSA9IGZhbHNlXG4gIHNlbGYuX2ljZUNvbXBsZXRlID0gZmFsc2UgLy8gaWNlIGNhbmRpZGF0ZSB0cmlja2xlIGRvbmUgKGdvdCBudWxsIGNhbmRpZGF0ZSlcbiAgc2VsZi5fY2hhbm5lbCA9IG51bGxcbiAgc2VsZi5fcGVuZGluZ0NhbmRpZGF0ZXMgPSBbXVxuXG4gIHNlbGYuX2lzTmVnb3RpYXRpbmcgPSBmYWxzZSAvLyBpcyB0aGlzIHBlZXIgd2FpdGluZyBmb3IgbmVnb3RpYXRpb24gdG8gY29tcGxldGU/XG4gIHNlbGYuX2JhdGNoZWROZWdvdGlhdGlvbiA9IGZhbHNlIC8vIGJhdGNoIHN5bmNocm9ub3VzIG5lZ290aWF0aW9uc1xuICBzZWxmLl9xdWV1ZWROZWdvdGlhdGlvbiA9IGZhbHNlIC8vIGlzIHRoZXJlIGEgcXVldWVkIG5lZ290aWF0aW9uIHJlcXVlc3Q/XG4gIHNlbGYuX3NlbmRlcnNBd2FpdGluZ1N0YWJsZSA9IFtdXG4gIHNlbGYuX3NlbmRlck1hcCA9IG5ldyBXZWFrTWFwKClcblxuICBzZWxmLl9yZW1vdGVUcmFja3MgPSBbXVxuICBzZWxmLl9yZW1vdGVTdHJlYW1zID0gW11cblxuICBzZWxmLl9jaHVuayA9IG51bGxcbiAgc2VsZi5fY2IgPSBudWxsXG4gIHNlbGYuX2ludGVydmFsID0gbnVsbFxuXG4gIHNlbGYuX3BjID0gbmV3IChzZWxmLl93cnRjLlJUQ1BlZXJDb25uZWN0aW9uKShzZWxmLmNvbmZpZywgc2VsZi5jb25zdHJhaW50cylcblxuICAvLyBXZSBwcmVmZXIgZmVhdHVyZSBkZXRlY3Rpb24gd2hlbmV2ZXIgcG9zc2libGUsIGJ1dCBzb21ldGltZXMgdGhhdCdzIG5vdFxuICAvLyBwb3NzaWJsZSBmb3IgY2VydGFpbiBpbXBsZW1lbnRhdGlvbnMuXG4gIHNlbGYuX2lzUmVhY3ROYXRpdmVXZWJydGMgPSB0eXBlb2Ygc2VsZi5fcGMuX3BlZXJDb25uZWN0aW9uSWQgPT09ICdudW1iZXInXG5cbiAgc2VsZi5fcGMub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgc2VsZi5fb25JY2VTdGF0ZUNoYW5nZSgpXG4gIH1cbiAgc2VsZi5fcGMub25pY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBzZWxmLl9vbkljZVN0YXRlQ2hhbmdlKClcbiAgfVxuICBzZWxmLl9wYy5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgIHNlbGYuX29uU2lnbmFsaW5nU3RhdGVDaGFuZ2UoKVxuICB9XG4gIHNlbGYuX3BjLm9uaWNlY2FuZGlkYXRlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgc2VsZi5fb25JY2VDYW5kaWRhdGUoZXZlbnQpXG4gIH1cblxuICAvLyBPdGhlciBzcGVjIGV2ZW50cywgdW51c2VkIGJ5IHRoaXMgaW1wbGVtZW50YXRpb246XG4gIC8vIC0gb25jb25uZWN0aW9uc3RhdGVjaGFuZ2VcbiAgLy8gLSBvbmljZWNhbmRpZGF0ZWVycm9yXG4gIC8vIC0gb25maW5nZXJwcmludGZhaWx1cmVcbiAgLy8gLSBvbm5lZ290aWF0aW9ubmVlZGVkXG5cbiAgaWYgKHNlbGYuaW5pdGlhdG9yKSB7XG4gICAgc2VsZi5fc2V0dXBEYXRhKHtcbiAgICAgIGNoYW5uZWw6IHNlbGYuX3BjLmNyZWF0ZURhdGFDaGFubmVsKHNlbGYuY2hhbm5lbE5hbWUsIHNlbGYuY2hhbm5lbENvbmZpZylcbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIHNlbGYuX3BjLm9uZGF0YWNoYW5uZWwgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHNlbGYuX3NldHVwRGF0YShldmVudClcbiAgICB9XG4gIH1cblxuICBpZiAoJ2FkZFRyYWNrJyBpbiBzZWxmLl9wYykge1xuICAgIGlmIChzZWxmLnN0cmVhbXMpIHtcbiAgICAgIHNlbGYuc3RyZWFtcy5mb3JFYWNoKGZ1bmN0aW9uIChzdHJlYW0pIHtcbiAgICAgICAgc2VsZi5hZGRTdHJlYW0oc3RyZWFtKVxuICAgICAgfSlcbiAgICB9XG4gICAgc2VsZi5fcGMub250cmFjayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgc2VsZi5fb25UcmFjayhldmVudClcbiAgICB9XG4gIH1cblxuICBpZiAoc2VsZi5pbml0aWF0b3IpIHtcbiAgICBzZWxmLl9uZWVkc05lZ290aWF0aW9uKClcbiAgfVxuXG4gIHNlbGYuX29uRmluaXNoQm91bmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgc2VsZi5fb25GaW5pc2goKVxuICB9XG4gIHNlbGYub25jZSgnZmluaXNoJywgc2VsZi5fb25GaW5pc2hCb3VuZClcbn1cblxuUGVlci5XRUJSVENfU1VQUE9SVCA9ICEhZ2V0QnJvd3NlclJUQygpXG5cbi8qKlxuICogRXhwb3NlIGNvbmZpZywgY29uc3RyYWludHMsIGFuZCBkYXRhIGNoYW5uZWwgY29uZmlnIGZvciBvdmVycmlkaW5nIGFsbCBQZWVyXG4gKiBpbnN0YW5jZXMuIE90aGVyd2lzZSwganVzdCBzZXQgb3B0cy5jb25maWcsIG9wdHMuY29uc3RyYWludHMsIG9yIG9wdHMuY2hhbm5lbENvbmZpZ1xuICogd2hlbiBjb25zdHJ1Y3RpbmcgYSBQZWVyLlxuICovXG5QZWVyLmNvbmZpZyA9IHtcbiAgaWNlU2VydmVyczogW1xuICAgIHtcbiAgICAgIHVybHM6ICdzdHVuOnN0dW4ubC5nb29nbGUuY29tOjE5MzAyJ1xuICAgIH0sXG4gICAge1xuICAgICAgdXJsczogJ3N0dW46Z2xvYmFsLnN0dW4udHdpbGlvLmNvbTozNDc4P3RyYW5zcG9ydD11ZHAnXG4gICAgfVxuICBdXG59XG5QZWVyLmNvbnN0cmFpbnRzID0ge31cblBlZXIuY2hhbm5lbENvbmZpZyA9IHt9XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQZWVyLnByb3RvdHlwZSwgJ2J1ZmZlclNpemUnLCB7XG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpc1xuICAgIHJldHVybiAoc2VsZi5fY2hhbm5lbCAmJiBzZWxmLl9jaGFubmVsLmJ1ZmZlcmVkQW1vdW50KSB8fCAwXG4gIH1cbn0pXG5cblBlZXIucHJvdG90eXBlLmFkZHJlc3MgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuICByZXR1cm4geyBwb3J0OiBzZWxmLmxvY2FsUG9ydCwgZmFtaWx5OiAnSVB2NCcsIGFkZHJlc3M6IHNlbGYubG9jYWxBZGRyZXNzIH1cbn1cblxuUGVlci5wcm90b3R5cGUuc2lnbmFsID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIGlmIChzZWxmLmRlc3Ryb3llZCkgdGhyb3cgbWFrZUVycm9yKCdjYW5ub3Qgc2lnbmFsIGFmdGVyIHBlZXIgaXMgZGVzdHJveWVkJywgJ0VSUl9TSUdOQUxJTkcnKVxuICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgdHJ5IHtcbiAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBkYXRhID0ge31cbiAgICB9XG4gIH1cbiAgc2VsZi5fZGVidWcoJ3NpZ25hbCgpJylcblxuICBpZiAoZGF0YS5yZW5lZ290aWF0ZSkge1xuICAgIHNlbGYuX2RlYnVnKCdnb3QgcmVxdWVzdCB0byByZW5lZ290aWF0ZScpXG4gICAgc2VsZi5fbmVlZHNOZWdvdGlhdGlvbigpXG4gIH1cbiAgaWYgKGRhdGEuY2FuZGlkYXRlKSB7XG4gICAgaWYgKHNlbGYuX3BjLnJlbW90ZURlc2NyaXB0aW9uICYmIHNlbGYuX3BjLnJlbW90ZURlc2NyaXB0aW9uLnR5cGUpIHNlbGYuX2FkZEljZUNhbmRpZGF0ZShkYXRhLmNhbmRpZGF0ZSlcbiAgICBlbHNlIHNlbGYuX3BlbmRpbmdDYW5kaWRhdGVzLnB1c2goZGF0YS5jYW5kaWRhdGUpXG4gIH1cbiAgaWYgKGRhdGEuc2RwKSB7XG4gICAgc2VsZi5fcGMuc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IChzZWxmLl93cnRjLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbikoZGF0YSksIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChzZWxmLmRlc3Ryb3llZCkgcmV0dXJuXG5cbiAgICAgIHNlbGYuX3BlbmRpbmdDYW5kaWRhdGVzLmZvckVhY2goZnVuY3Rpb24gKGNhbmRpZGF0ZSkge1xuICAgICAgICBzZWxmLl9hZGRJY2VDYW5kaWRhdGUoY2FuZGlkYXRlKVxuICAgICAgfSlcbiAgICAgIHNlbGYuX3BlbmRpbmdDYW5kaWRhdGVzID0gW11cblxuICAgICAgaWYgKHNlbGYuX3BjLnJlbW90ZURlc2NyaXB0aW9uLnR5cGUgPT09ICdvZmZlcicpIHNlbGYuX2NyZWF0ZUFuc3dlcigpXG4gICAgfSwgZnVuY3Rpb24gKGVycikgeyBzZWxmLmRlc3Ryb3kobWFrZUVycm9yKGVyciwgJ0VSUl9TRVRfUkVNT1RFX0RFU0NSSVBUSU9OJykpIH0pXG4gIH1cbiAgaWYgKCFkYXRhLnNkcCAmJiAhZGF0YS5jYW5kaWRhdGUgJiYgIWRhdGEucmVuZWdvdGlhdGUpIHtcbiAgICBzZWxmLmRlc3Ryb3kobWFrZUVycm9yKCdzaWduYWwoKSBjYWxsZWQgd2l0aCBpbnZhbGlkIHNpZ25hbCBkYXRhJywgJ0VSUl9TSUdOQUxJTkcnKSlcbiAgfVxufVxuXG5QZWVyLnByb3RvdHlwZS5fYWRkSWNlQ2FuZGlkYXRlID0gZnVuY3Rpb24gKGNhbmRpZGF0ZSkge1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgdHJ5IHtcbiAgICBzZWxmLl9wYy5hZGRJY2VDYW5kaWRhdGUoXG4gICAgICBuZXcgc2VsZi5fd3J0Yy5SVENJY2VDYW5kaWRhdGUoY2FuZGlkYXRlKSxcbiAgICAgIG5vb3AsXG4gICAgICBmdW5jdGlvbiAoZXJyKSB7IHNlbGYuZGVzdHJveShtYWtlRXJyb3IoZXJyLCAnRVJSX0FERF9JQ0VfQ0FORElEQVRFJykpIH1cbiAgICApXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHNlbGYuZGVzdHJveShtYWtlRXJyb3IoJ2Vycm9yIGFkZGluZyBjYW5kaWRhdGU6ICcgKyBlcnIubWVzc2FnZSwgJ0VSUl9BRERfSUNFX0NBTkRJREFURScpKVxuICB9XG59XG5cbi8qKlxuICogU2VuZCB0ZXh0L2JpbmFyeSBkYXRhIHRvIHRoZSByZW1vdGUgcGVlci5cbiAqIEBwYXJhbSB7QXJyYXlCdWZmZXJWaWV3fEFycmF5QnVmZmVyfEJ1ZmZlcnxzdHJpbmd8QmxvYn0gY2h1bmtcbiAqL1xuUGVlci5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uIChjaHVuaykge1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgc2VsZi5fY2hhbm5lbC5zZW5kKGNodW5rKVxufVxuXG4vKipcbiAqIEFkZCBhIE1lZGlhU3RyZWFtIHRvIHRoZSBjb25uZWN0aW9uLlxuICogQHBhcmFtIHtNZWRpYVN0cmVhbX0gc3RyZWFtXG4gKi9cblBlZXIucHJvdG90eXBlLmFkZFN0cmVhbSA9IGZ1bmN0aW9uIChzdHJlYW0pIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG5cbiAgc2VsZi5fZGVidWcoJ2FkZFN0cmVhbSgpJylcblxuICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbiAodHJhY2spIHtcbiAgICBzZWxmLmFkZFRyYWNrKHRyYWNrLCBzdHJlYW0pXG4gIH0pXG59XG5cbi8qKlxuICogQWRkIGEgTWVkaWFTdHJlYW1UcmFjayB0byB0aGUgY29ubmVjdGlvbi5cbiAqIEBwYXJhbSB7TWVkaWFTdHJlYW1UcmFja30gdHJhY2tcbiAqIEBwYXJhbSB7TWVkaWFTdHJlYW19IHN0cmVhbVxuICovXG5QZWVyLnByb3RvdHlwZS5hZGRUcmFjayA9IGZ1bmN0aW9uICh0cmFjaywgc3RyZWFtKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuXG4gIHNlbGYuX2RlYnVnKCdhZGRUcmFjaygpJylcblxuICB2YXIgc2VuZGVyID0gc2VsZi5fcGMuYWRkVHJhY2sodHJhY2ssIHN0cmVhbSlcbiAgdmFyIHN1Ym1hcCA9IHNlbGYuX3NlbmRlck1hcC5nZXQodHJhY2spIHx8IG5ldyBXZWFrTWFwKCkgLy8gbmVzdGVkIFdlYWtNYXBzIG1hcCBbdHJhY2ssIHN0cmVhbV0gdG8gc2VuZGVyXG4gIHN1Ym1hcC5zZXQoc3RyZWFtLCBzZW5kZXIpXG4gIHNlbGYuX3NlbmRlck1hcC5zZXQodHJhY2ssIHN1Ym1hcClcbiAgc2VsZi5fbmVlZHNOZWdvdGlhdGlvbigpXG59XG5cbi8qKlxuICogUmVtb3ZlIGEgTWVkaWFTdHJlYW1UcmFjayBmcm9tIHRoZSBjb25uZWN0aW9uLlxuICogQHBhcmFtIHtNZWRpYVN0cmVhbVRyYWNrfSB0cmFja1xuICogQHBhcmFtIHtNZWRpYVN0cmVhbX0gc3RyZWFtXG4gKi9cblBlZXIucHJvdG90eXBlLnJlbW92ZVRyYWNrID0gZnVuY3Rpb24gKHRyYWNrLCBzdHJlYW0pIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG5cbiAgc2VsZi5fZGVidWcoJ3JlbW92ZVNlbmRlcigpJylcblxuICB2YXIgc3VibWFwID0gc2VsZi5fc2VuZGVyTWFwLmdldCh0cmFjaylcbiAgdmFyIHNlbmRlciA9IHN1Ym1hcCA/IHN1Ym1hcC5nZXQoc3RyZWFtKSA6IG51bGxcbiAgaWYgKCFzZW5kZXIpIHtcbiAgICBzZWxmLmRlc3Ryb3kobmV3IEVycm9yKCdDYW5ub3QgcmVtb3ZlIHRyYWNrIHRoYXQgd2FzIG5ldmVyIGFkZGVkLicpKVxuICB9XG4gIHRyeSB7XG4gICAgc2VsZi5fcGMucmVtb3ZlVHJhY2soc2VuZGVyKVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAoZXJyLm5hbWUgPT09ICdOU19FUlJPUl9VTkVYUEVDVEVEJykge1xuICAgICAgc2VsZi5fc2VuZGVyc0F3YWl0aW5nU3RhYmxlLnB1c2goc2VuZGVyKSAvLyBIQUNLOiBGaXJlZm94IG11c3Qgd2FpdCB1bnRpbCAoc2lnbmFsaW5nU3RhdGUgPT09IHN0YWJsZSkgaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTEzMzg3NFxuICAgIH0gZWxzZSB7XG4gICAgICBzZWxmLmRlc3Ryb3koZXJyKVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZSBhIE1lZGlhU3RyZWFtIGZyb20gdGhlIGNvbm5lY3Rpb24uXG4gKiBAcGFyYW0ge01lZGlhU3RyZWFtfSBzdHJlYW1cbiAqL1xuUGVlci5wcm90b3R5cGUucmVtb3ZlU3RyZWFtID0gZnVuY3Rpb24gKHN0cmVhbSkge1xuICB2YXIgc2VsZiA9IHRoaXNcblxuICBzZWxmLl9kZWJ1ZygncmVtb3ZlU2VuZGVycygpJylcblxuICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbiAodHJhY2spIHtcbiAgICBzZWxmLnJlbW92ZVRyYWNrKHRyYWNrLCBzdHJlYW0pXG4gIH0pXG59XG5cblBlZXIucHJvdG90eXBlLl9uZWVkc05lZ290aWF0aW9uID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc2VsZiA9IHRoaXNcblxuICBzZWxmLl9kZWJ1ZygnX25lZWRzTmVnb3RpYXRpb24nKVxuICBpZiAoc2VsZi5fYmF0Y2hlZE5lZ290aWF0aW9uKSByZXR1cm4gLy8gYmF0Y2ggc3luY2hyb25vdXMgcmVuZWdvdGlhdGlvbnNcbiAgc2VsZi5fYmF0Y2hlZE5lZ290aWF0aW9uID0gdHJ1ZVxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICBzZWxmLl9iYXRjaGVkTmVnb3RpYXRpb24gPSBmYWxzZVxuICAgIHNlbGYuX2RlYnVnKCdzdGFydGluZyBiYXRjaGVkIG5lZ290aWF0aW9uJylcbiAgICBzZWxmLm5lZ290aWF0ZSgpXG4gIH0sIDApXG59XG5cblBlZXIucHJvdG90eXBlLm5lZ290aWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG5cbiAgaWYgKHNlbGYuaW5pdGlhdG9yKSB7XG4gICAgaWYgKHNlbGYuX2lzTmVnb3RpYXRpbmcpIHtcbiAgICAgIHNlbGYuX3F1ZXVlZE5lZ290aWF0aW9uID0gdHJ1ZVxuICAgICAgc2VsZi5fZGVidWcoJ2FscmVhZHkgbmVnb3RpYXRpbmcsIHF1ZXVlaW5nJylcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZi5fZGVidWcoJ3N0YXJ0IG5lZ290aWF0aW9uJylcbiAgICAgIHNlbGYuX2NyZWF0ZU9mZmVyKClcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgc2VsZi5fZGVidWcoJ3JlcXVlc3RpbmcgbmVnb3RpYXRpb24gZnJvbSBpbml0aWF0b3InKVxuICAgIHNlbGYuZW1pdCgnc2lnbmFsJywgeyAvLyByZXF1ZXN0IGluaXRpYXRvciB0byByZW5lZ290aWF0ZVxuICAgICAgcmVuZWdvdGlhdGU6IHRydWVcbiAgICB9KVxuICB9XG4gIHNlbGYuX2lzTmVnb3RpYXRpbmcgPSB0cnVlXG59XG5cbi8vIFRPRE86IERlbGV0ZSB0aGlzIG1ldGhvZCBvbmNlIHJlYWRhYmxlLXN0cmVhbSBpcyB1cGRhdGVkIHRvIGNvbnRhaW4gYSBkZWZhdWx0XG4vLyBpbXBsZW1lbnRhdGlvbiBvZiBkZXN0cm95KCkgdGhhdCBhdXRvbWF0aWNhbGx5IGNhbGxzIF9kZXN0cm95KClcbi8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9yZWFkYWJsZS1zdHJlYW0vaXNzdWVzLzI4M1xuUGVlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIHNlbGYuX2Rlc3Ryb3koZXJyLCBmdW5jdGlvbiAoKSB7fSlcbn1cblxuUGVlci5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoZXJyLCBjYikge1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgaWYgKHNlbGYuZGVzdHJveWVkKSByZXR1cm5cblxuICBzZWxmLl9kZWJ1ZygnZGVzdHJveSAoZXJyb3I6ICVzKScsIGVyciAmJiAoZXJyLm1lc3NhZ2UgfHwgZXJyKSlcblxuICBzZWxmLnJlYWRhYmxlID0gc2VsZi53cml0YWJsZSA9IGZhbHNlXG5cbiAgaWYgKCFzZWxmLl9yZWFkYWJsZVN0YXRlLmVuZGVkKSBzZWxmLnB1c2gobnVsbClcbiAgaWYgKCFzZWxmLl93cml0YWJsZVN0YXRlLmZpbmlzaGVkKSBzZWxmLmVuZCgpXG5cbiAgc2VsZi5kZXN0cm95ZWQgPSB0cnVlXG4gIHNlbGYuY29ubmVjdGVkID0gZmFsc2VcbiAgc2VsZi5fcGNSZWFkeSA9IGZhbHNlXG4gIHNlbGYuX2NoYW5uZWxSZWFkeSA9IGZhbHNlXG4gIHNlbGYuX3JlbW90ZVRyYWNrcyA9IG51bGxcbiAgc2VsZi5fcmVtb3RlU3RyZWFtcyA9IG51bGxcbiAgc2VsZi5fc2VuZGVyTWFwID0gbnVsbFxuXG4gIGNsZWFySW50ZXJ2YWwoc2VsZi5faW50ZXJ2YWwpXG4gIHNlbGYuX2ludGVydmFsID0gbnVsbFxuICBzZWxmLl9jaHVuayA9IG51bGxcbiAgc2VsZi5fY2IgPSBudWxsXG5cbiAgaWYgKHNlbGYuX29uRmluaXNoQm91bmQpIHNlbGYucmVtb3ZlTGlzdGVuZXIoJ2ZpbmlzaCcsIHNlbGYuX29uRmluaXNoQm91bmQpXG4gIHNlbGYuX29uRmluaXNoQm91bmQgPSBudWxsXG5cbiAgaWYgKHNlbGYuX2NoYW5uZWwpIHtcbiAgICB0cnkge1xuICAgICAgc2VsZi5fY2hhbm5lbC5jbG9zZSgpXG4gICAgfSBjYXRjaCAoZXJyKSB7fVxuXG4gICAgc2VsZi5fY2hhbm5lbC5vbm1lc3NhZ2UgPSBudWxsXG4gICAgc2VsZi5fY2hhbm5lbC5vbm9wZW4gPSBudWxsXG4gICAgc2VsZi5fY2hhbm5lbC5vbmNsb3NlID0gbnVsbFxuICAgIHNlbGYuX2NoYW5uZWwub25lcnJvciA9IG51bGxcbiAgfVxuICBpZiAoc2VsZi5fcGMpIHtcbiAgICB0cnkge1xuICAgICAgc2VsZi5fcGMuY2xvc2UoKVxuICAgIH0gY2F0Y2ggKGVycikge31cblxuICAgIHNlbGYuX3BjLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlID0gbnVsbFxuICAgIHNlbGYuX3BjLm9uaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2UgPSBudWxsXG4gICAgc2VsZi5fcGMub25zaWduYWxpbmdzdGF0ZWNoYW5nZSA9IG51bGxcbiAgICBzZWxmLl9wYy5vbmljZWNhbmRpZGF0ZSA9IG51bGxcbiAgICBpZiAoJ2FkZFRyYWNrJyBpbiBzZWxmLl9wYykge1xuICAgICAgc2VsZi5fcGMub250cmFjayA9IG51bGxcbiAgICB9XG4gICAgc2VsZi5fcGMub25kYXRhY2hhbm5lbCA9IG51bGxcbiAgfVxuICBzZWxmLl9wYyA9IG51bGxcbiAgc2VsZi5fY2hhbm5lbCA9IG51bGxcblxuICBpZiAoZXJyKSBzZWxmLmVtaXQoJ2Vycm9yJywgZXJyKVxuICBzZWxmLmVtaXQoJ2Nsb3NlJylcbiAgY2IoKVxufVxuXG5QZWVyLnByb3RvdHlwZS5fc2V0dXBEYXRhID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gIHZhciBzZWxmID0gdGhpc1xuICBpZiAoIWV2ZW50LmNoYW5uZWwpIHtcbiAgICAvLyBJbiBzb21lIHNpdHVhdGlvbnMgYHBjLmNyZWF0ZURhdGFDaGFubmVsKClgIHJldHVybnMgYHVuZGVmaW5lZGAgKGluIHdydGMpLFxuICAgIC8vIHdoaWNoIGlzIGludmFsaWQgYmVoYXZpb3IuIEhhbmRsZSBpdCBncmFjZWZ1bGx5LlxuICAgIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9zaW1wbGUtcGVlci9pc3N1ZXMvMTYzXG4gICAgcmV0dXJuIHNlbGYuZGVzdHJveShtYWtlRXJyb3IoJ0RhdGEgY2hhbm5lbCBldmVudCBpcyBtaXNzaW5nIGBjaGFubmVsYCBwcm9wZXJ0eScsICdFUlJfREFUQV9DSEFOTkVMJykpXG4gIH1cblxuICBzZWxmLl9jaGFubmVsID0gZXZlbnQuY2hhbm5lbFxuICBzZWxmLl9jaGFubmVsLmJpbmFyeVR5cGUgPSAnYXJyYXlidWZmZXInXG5cbiAgaWYgKHR5cGVvZiBzZWxmLl9jaGFubmVsLmJ1ZmZlcmVkQW1vdW50TG93VGhyZXNob2xkID09PSAnbnVtYmVyJykge1xuICAgIHNlbGYuX2NoYW5uZWwuYnVmZmVyZWRBbW91bnRMb3dUaHJlc2hvbGQgPSBNQVhfQlVGRkVSRURfQU1PVU5UXG4gIH1cblxuICBzZWxmLmNoYW5uZWxOYW1lID0gc2VsZi5fY2hhbm5lbC5sYWJlbFxuXG4gIHNlbGYuX2NoYW5uZWwub25tZXNzYWdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgc2VsZi5fb25DaGFubmVsTWVzc2FnZShldmVudClcbiAgfVxuICBzZWxmLl9jaGFubmVsLm9uYnVmZmVyZWRhbW91bnRsb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgc2VsZi5fb25DaGFubmVsQnVmZmVyZWRBbW91bnRMb3coKVxuICB9XG4gIHNlbGYuX2NoYW5uZWwub25vcGVuID0gZnVuY3Rpb24gKCkge1xuICAgIHNlbGYuX29uQ2hhbm5lbE9wZW4oKVxuICB9XG4gIHNlbGYuX2NoYW5uZWwub25jbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBzZWxmLl9vbkNoYW5uZWxDbG9zZSgpXG4gIH1cbiAgc2VsZi5fY2hhbm5lbC5vbmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgIHNlbGYuZGVzdHJveShtYWtlRXJyb3IoZXJyLCAnRVJSX0RBVEFfQ0hBTk5FTCcpKVxuICB9XG59XG5cblBlZXIucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24gKCkge31cblxuUGVlci5wcm90b3R5cGUuX3dyaXRlID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIGlmIChzZWxmLmRlc3Ryb3llZCkgcmV0dXJuIGNiKG1ha2VFcnJvcignY2Fubm90IHdyaXRlIGFmdGVyIHBlZXIgaXMgZGVzdHJveWVkJywgJ0VSUl9EQVRBX0NIQU5ORUwnKSlcblxuICBpZiAoc2VsZi5jb25uZWN0ZWQpIHtcbiAgICB0cnkge1xuICAgICAgc2VsZi5zZW5kKGNodW5rKVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIHNlbGYuZGVzdHJveShtYWtlRXJyb3IoZXJyLCAnRVJSX0RBVEFfQ0hBTk5FTCcpKVxuICAgIH1cbiAgICBpZiAoc2VsZi5fY2hhbm5lbC5idWZmZXJlZEFtb3VudCA+IE1BWF9CVUZGRVJFRF9BTU9VTlQpIHtcbiAgICAgIHNlbGYuX2RlYnVnKCdzdGFydCBiYWNrcHJlc3N1cmU6IGJ1ZmZlcmVkQW1vdW50ICVkJywgc2VsZi5fY2hhbm5lbC5idWZmZXJlZEFtb3VudClcbiAgICAgIHNlbGYuX2NiID0gY2JcbiAgICB9IGVsc2Uge1xuICAgICAgY2IobnVsbClcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgc2VsZi5fZGVidWcoJ3dyaXRlIGJlZm9yZSBjb25uZWN0JylcbiAgICBzZWxmLl9jaHVuayA9IGNodW5rXG4gICAgc2VsZi5fY2IgPSBjYlxuICB9XG59XG5cbi8vIFdoZW4gc3RyZWFtIGZpbmlzaGVzIHdyaXRpbmcsIGNsb3NlIHNvY2tldC4gSGFsZiBvcGVuIGNvbm5lY3Rpb25zIGFyZSBub3Rcbi8vIHN1cHBvcnRlZC5cblBlZXIucHJvdG90eXBlLl9vbkZpbmlzaCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIGlmIChzZWxmLmRlc3Ryb3llZCkgcmV0dXJuXG5cbiAgaWYgKHNlbGYuY29ubmVjdGVkKSB7XG4gICAgZGVzdHJveVNvb24oKVxuICB9IGVsc2Uge1xuICAgIHNlbGYub25jZSgnY29ubmVjdCcsIGRlc3Ryb3lTb29uKVxuICB9XG5cbiAgLy8gV2FpdCBhIGJpdCBiZWZvcmUgZGVzdHJveWluZyBzbyB0aGUgc29ja2V0IGZsdXNoZXMuXG4gIC8vIFRPRE86IGlzIHRoZXJlIGEgbW9yZSByZWxpYWJsZSB3YXkgdG8gYWNjb21wbGlzaCB0aGlzP1xuICBmdW5jdGlvbiBkZXN0cm95U29vbiAoKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICBzZWxmLmRlc3Ryb3koKVxuICAgIH0sIDEwMDApXG4gIH1cbn1cblxuUGVlci5wcm90b3R5cGUuX2NyZWF0ZU9mZmVyID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgaWYgKHNlbGYuZGVzdHJveWVkKSByZXR1cm5cblxuICBzZWxmLl9wYy5jcmVhdGVPZmZlcihmdW5jdGlvbiAob2ZmZXIpIHtcbiAgICBpZiAoc2VsZi5kZXN0cm95ZWQpIHJldHVyblxuICAgIG9mZmVyLnNkcCA9IHNlbGYuc2RwVHJhbnNmb3JtKG9mZmVyLnNkcClcbiAgICBzZWxmLl9wYy5zZXRMb2NhbERlc2NyaXB0aW9uKG9mZmVyLCBvblN1Y2Nlc3MsIG9uRXJyb3IpXG5cbiAgICBmdW5jdGlvbiBvblN1Y2Nlc3MgKCkge1xuICAgICAgc2VsZi5fZGVidWcoJ2NyZWF0ZU9mZmVyIHN1Y2Nlc3MnKVxuICAgICAgaWYgKHNlbGYuZGVzdHJveWVkKSByZXR1cm5cbiAgICAgIGlmIChzZWxmLnRyaWNrbGUgfHwgc2VsZi5faWNlQ29tcGxldGUpIHNlbmRPZmZlcigpXG4gICAgICBlbHNlIHNlbGYub25jZSgnX2ljZUNvbXBsZXRlJywgc2VuZE9mZmVyKSAvLyB3YWl0IGZvciBjYW5kaWRhdGVzXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25FcnJvciAoZXJyKSB7XG4gICAgICBzZWxmLmRlc3Ryb3kobWFrZUVycm9yKGVyciwgJ0VSUl9TRVRfTE9DQUxfREVTQ1JJUFRJT04nKSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZW5kT2ZmZXIgKCkge1xuICAgICAgdmFyIHNpZ25hbCA9IHNlbGYuX3BjLmxvY2FsRGVzY3JpcHRpb24gfHwgb2ZmZXJcbiAgICAgIHNlbGYuX2RlYnVnKCdzaWduYWwnKVxuICAgICAgc2VsZi5lbWl0KCdzaWduYWwnLCB7XG4gICAgICAgIHR5cGU6IHNpZ25hbC50eXBlLFxuICAgICAgICBzZHA6IHNpZ25hbC5zZHBcbiAgICAgIH0pXG4gICAgfVxuICB9LCBmdW5jdGlvbiAoZXJyKSB7IHNlbGYuZGVzdHJveShtYWtlRXJyb3IoZXJyLCAnRVJSX0NSRUFURV9PRkZFUicpKSB9LCBzZWxmLm9mZmVyQ29uc3RyYWludHMpXG59XG5cblBlZXIucHJvdG90eXBlLl9jcmVhdGVBbnN3ZXIgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuICBpZiAoc2VsZi5kZXN0cm95ZWQpIHJldHVyblxuXG4gIHNlbGYuX3BjLmNyZWF0ZUFuc3dlcihmdW5jdGlvbiAoYW5zd2VyKSB7XG4gICAgaWYgKHNlbGYuZGVzdHJveWVkKSByZXR1cm5cbiAgICBhbnN3ZXIuc2RwID0gc2VsZi5zZHBUcmFuc2Zvcm0oYW5zd2VyLnNkcClcbiAgICBzZWxmLl9wYy5zZXRMb2NhbERlc2NyaXB0aW9uKGFuc3dlciwgb25TdWNjZXNzLCBvbkVycm9yKVxuXG4gICAgZnVuY3Rpb24gb25TdWNjZXNzICgpIHtcbiAgICAgIGlmIChzZWxmLmRlc3Ryb3llZCkgcmV0dXJuXG4gICAgICBpZiAoc2VsZi50cmlja2xlIHx8IHNlbGYuX2ljZUNvbXBsZXRlKSBzZW5kQW5zd2VyKClcbiAgICAgIGVsc2Ugc2VsZi5vbmNlKCdfaWNlQ29tcGxldGUnLCBzZW5kQW5zd2VyKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uRXJyb3IgKGVycikge1xuICAgICAgc2VsZi5kZXN0cm95KG1ha2VFcnJvcihlcnIsICdFUlJfU0VUX0xPQ0FMX0RFU0NSSVBUSU9OJykpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2VuZEFuc3dlciAoKSB7XG4gICAgICB2YXIgc2lnbmFsID0gc2VsZi5fcGMubG9jYWxEZXNjcmlwdGlvbiB8fCBhbnN3ZXJcbiAgICAgIHNlbGYuX2RlYnVnKCdzaWduYWwnKVxuICAgICAgc2VsZi5lbWl0KCdzaWduYWwnLCB7XG4gICAgICAgIHR5cGU6IHNpZ25hbC50eXBlLFxuICAgICAgICBzZHA6IHNpZ25hbC5zZHBcbiAgICAgIH0pXG4gICAgfVxuICB9LCBmdW5jdGlvbiAoZXJyKSB7IHNlbGYuZGVzdHJveShtYWtlRXJyb3IoZXJyLCAnRVJSX0NSRUFURV9BTlNXRVInKSkgfSwgc2VsZi5hbnN3ZXJDb25zdHJhaW50cylcbn1cblxuUGVlci5wcm90b3R5cGUuX29uSWNlU3RhdGVDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuICBpZiAoc2VsZi5kZXN0cm95ZWQpIHJldHVyblxuICB2YXIgaWNlQ29ubmVjdGlvblN0YXRlID0gc2VsZi5fcGMuaWNlQ29ubmVjdGlvblN0YXRlXG4gIHZhciBpY2VHYXRoZXJpbmdTdGF0ZSA9IHNlbGYuX3BjLmljZUdhdGhlcmluZ1N0YXRlXG5cbiAgc2VsZi5fZGVidWcoXG4gICAgJ2ljZVN0YXRlQ2hhbmdlIChjb25uZWN0aW9uOiAlcykgKGdhdGhlcmluZzogJXMpJyxcbiAgICBpY2VDb25uZWN0aW9uU3RhdGUsXG4gICAgaWNlR2F0aGVyaW5nU3RhdGVcbiAgKVxuICBzZWxmLmVtaXQoJ2ljZVN0YXRlQ2hhbmdlJywgaWNlQ29ubmVjdGlvblN0YXRlLCBpY2VHYXRoZXJpbmdTdGF0ZSlcblxuICBpZiAoaWNlQ29ubmVjdGlvblN0YXRlID09PSAnY29ubmVjdGVkJyB8fCBpY2VDb25uZWN0aW9uU3RhdGUgPT09ICdjb21wbGV0ZWQnKSB7XG4gICAgc2VsZi5fcGNSZWFkeSA9IHRydWVcbiAgICBzZWxmLl9tYXliZVJlYWR5KClcbiAgfVxuICBpZiAoaWNlQ29ubmVjdGlvblN0YXRlID09PSAnZmFpbGVkJykge1xuICAgIHNlbGYuZGVzdHJveShtYWtlRXJyb3IoJ0ljZSBjb25uZWN0aW9uIGZhaWxlZC4nLCAnRVJSX0lDRV9DT05ORUNUSU9OX0ZBSUxVUkUnKSlcbiAgfVxuICBpZiAoaWNlQ29ubmVjdGlvblN0YXRlID09PSAnY2xvc2VkJykge1xuICAgIHNlbGYuZGVzdHJveShuZXcgRXJyb3IoJ0ljZSBjb25uZWN0aW9uIGNsb3NlZC4nKSlcbiAgfVxufVxuXG5QZWVyLnByb3RvdHlwZS5nZXRTdGF0cyA9IGZ1bmN0aW9uIChjYikge1xuICB2YXIgc2VsZiA9IHRoaXNcblxuICAvLyBQcm9taXNlLWJhc2VkIGdldFN0YXRzKCkgKHN0YW5kYXJkKVxuICBpZiAoc2VsZi5fcGMuZ2V0U3RhdHMubGVuZ3RoID09PSAwKSB7XG4gICAgc2VsZi5fcGMuZ2V0U3RhdHMoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgIHZhciByZXBvcnRzID0gW11cbiAgICAgIHJlcy5mb3JFYWNoKGZ1bmN0aW9uIChyZXBvcnQpIHtcbiAgICAgICAgcmVwb3J0cy5wdXNoKHJlcG9ydClcbiAgICAgIH0pXG4gICAgICBjYihudWxsLCByZXBvcnRzKVxuICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsgY2IoZXJyKSB9KVxuXG4gIC8vIFR3by1wYXJhbWV0ZXIgY2FsbGJhY2stYmFzZWQgZ2V0U3RhdHMoKSAoZGVwcmVjYXRlZCwgZm9ybWVyIHN0YW5kYXJkKVxuICB9IGVsc2UgaWYgKHNlbGYuX2lzUmVhY3ROYXRpdmVXZWJydGMpIHtcbiAgICBzZWxmLl9wYy5nZXRTdGF0cyhudWxsLCBmdW5jdGlvbiAocmVzKSB7XG4gICAgICB2YXIgcmVwb3J0cyA9IFtdXG4gICAgICByZXMuZm9yRWFjaChmdW5jdGlvbiAocmVwb3J0KSB7XG4gICAgICAgIHJlcG9ydHMucHVzaChyZXBvcnQpXG4gICAgICB9KVxuICAgICAgY2IobnVsbCwgcmVwb3J0cylcbiAgICB9LCBmdW5jdGlvbiAoZXJyKSB7IGNiKGVycikgfSlcblxuICAvLyBTaW5nbGUtcGFyYW1ldGVyIGNhbGxiYWNrLWJhc2VkIGdldFN0YXRzKCkgKG5vbi1zdGFuZGFyZClcbiAgfSBlbHNlIGlmIChzZWxmLl9wYy5nZXRTdGF0cy5sZW5ndGggPiAwKSB7XG4gICAgc2VsZi5fcGMuZ2V0U3RhdHMoZnVuY3Rpb24gKHJlcykge1xuICAgICAgLy8gSWYgd2UgZGVzdHJveSBjb25uZWN0aW9uIGluIGBjb25uZWN0YCBjYWxsYmFjayB0aGlzIGNvZGUgbWlnaHQgaGFwcGVuIHRvIHJ1biB3aGVuIGFjdHVhbCBjb25uZWN0aW9uIGlzIGFscmVhZHkgY2xvc2VkXG4gICAgICBpZiAoc2VsZi5kZXN0cm95ZWQpIHJldHVyblxuXG4gICAgICB2YXIgcmVwb3J0cyA9IFtdXG4gICAgICByZXMucmVzdWx0KCkuZm9yRWFjaChmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgIHZhciByZXBvcnQgPSB7fVxuICAgICAgICByZXN1bHQubmFtZXMoKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgcmVwb3J0W25hbWVdID0gcmVzdWx0LnN0YXQobmFtZSlcbiAgICAgICAgfSlcbiAgICAgICAgcmVwb3J0LmlkID0gcmVzdWx0LmlkXG4gICAgICAgIHJlcG9ydC50eXBlID0gcmVzdWx0LnR5cGVcbiAgICAgICAgcmVwb3J0LnRpbWVzdGFtcCA9IHJlc3VsdC50aW1lc3RhbXBcbiAgICAgICAgcmVwb3J0cy5wdXNoKHJlcG9ydClcbiAgICAgIH0pXG4gICAgICBjYihudWxsLCByZXBvcnRzKVxuICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsgY2IoZXJyKSB9KVxuXG4gIC8vIFVua25vd24gYnJvd3Nlciwgc2tpcCBnZXRTdGF0cygpIHNpbmNlIGl0J3MgYW55b25lJ3MgZ3Vlc3Mgd2hpY2ggc3R5bGUgb2ZcbiAgLy8gZ2V0U3RhdHMoKSB0aGV5IGltcGxlbWVudC5cbiAgfSBlbHNlIHtcbiAgICBjYihudWxsLCBbXSlcbiAgfVxufVxuXG5QZWVyLnByb3RvdHlwZS5fbWF5YmVSZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIHNlbGYuX2RlYnVnKCdtYXliZVJlYWR5IHBjICVzIGNoYW5uZWwgJXMnLCBzZWxmLl9wY1JlYWR5LCBzZWxmLl9jaGFubmVsUmVhZHkpXG4gIGlmIChzZWxmLmNvbm5lY3RlZCB8fCBzZWxmLl9jb25uZWN0aW5nIHx8ICFzZWxmLl9wY1JlYWR5IHx8ICFzZWxmLl9jaGFubmVsUmVhZHkpIHJldHVyblxuXG4gIHNlbGYuX2Nvbm5lY3RpbmcgPSB0cnVlXG5cbiAgLy8gSEFDSzogV2UgY2FuJ3QgcmVseSBvbiBvcmRlciBoZXJlLCBmb3IgZGV0YWlscyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2pzLXBsYXRmb3JtL25vZGUtd2VicnRjL2lzc3Vlcy8zMzlcbiAgZnVuY3Rpb24gZmluZENhbmRpZGF0ZVBhaXIgKCkge1xuICAgIGlmIChzZWxmLmRlc3Ryb3llZCkgcmV0dXJuXG5cbiAgICBzZWxmLmdldFN0YXRzKGZ1bmN0aW9uIChlcnIsIGl0ZW1zKSB7XG4gICAgICBpZiAoc2VsZi5kZXN0cm95ZWQpIHJldHVyblxuXG4gICAgICAvLyBUcmVhdCBnZXRTdGF0cyBlcnJvciBhcyBub24tZmF0YWwuIEl0J3Mgbm90IGVzc2VudGlhbC5cbiAgICAgIGlmIChlcnIpIGl0ZW1zID0gW11cblxuICAgICAgdmFyIHJlbW90ZUNhbmRpZGF0ZXMgPSB7fVxuICAgICAgdmFyIGxvY2FsQ2FuZGlkYXRlcyA9IHt9XG4gICAgICB2YXIgY2FuZGlkYXRlUGFpcnMgPSB7fVxuICAgICAgdmFyIGZvdW5kU2VsZWN0ZWRDYW5kaWRhdGVQYWlyID0gZmFsc2VcblxuICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAvLyBUT0RPOiBPbmNlIGFsbCBicm93c2VycyBzdXBwb3J0IHRoZSBoeXBoZW5hdGVkIHN0YXRzIHJlcG9ydCB0eXBlcywgcmVtb3ZlXG4gICAgICAgIC8vIHRoZSBub24taHlwZW5hdGVkIG9uZXNcbiAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3JlbW90ZWNhbmRpZGF0ZScgfHwgaXRlbS50eXBlID09PSAncmVtb3RlLWNhbmRpZGF0ZScpIHtcbiAgICAgICAgICByZW1vdGVDYW5kaWRhdGVzW2l0ZW0uaWRdID0gaXRlbVxuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdsb2NhbGNhbmRpZGF0ZScgfHwgaXRlbS50eXBlID09PSAnbG9jYWwtY2FuZGlkYXRlJykge1xuICAgICAgICAgIGxvY2FsQ2FuZGlkYXRlc1tpdGVtLmlkXSA9IGl0ZW1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnY2FuZGlkYXRlcGFpcicgfHwgaXRlbS50eXBlID09PSAnY2FuZGlkYXRlLXBhaXInKSB7XG4gICAgICAgICAgY2FuZGlkYXRlUGFpcnNbaXRlbS5pZF0gPSBpdGVtXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgLy8gU3BlYy1jb21wbGlhbnRcbiAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3RyYW5zcG9ydCcgJiYgaXRlbS5zZWxlY3RlZENhbmRpZGF0ZVBhaXJJZCkge1xuICAgICAgICAgIHNldFNlbGVjdGVkQ2FuZGlkYXRlUGFpcihjYW5kaWRhdGVQYWlyc1tpdGVtLnNlbGVjdGVkQ2FuZGlkYXRlUGFpcklkXSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE9sZCBpbXBsZW1lbnRhdGlvbnNcbiAgICAgICAgaWYgKFxuICAgICAgICAgIChpdGVtLnR5cGUgPT09ICdnb29nQ2FuZGlkYXRlUGFpcicgJiYgaXRlbS5nb29nQWN0aXZlQ29ubmVjdGlvbiA9PT0gJ3RydWUnKSB8fFxuICAgICAgICAgICgoaXRlbS50eXBlID09PSAnY2FuZGlkYXRlcGFpcicgfHwgaXRlbS50eXBlID09PSAnY2FuZGlkYXRlLXBhaXInKSAmJiBpdGVtLnNlbGVjdGVkKVxuICAgICAgICApIHtcbiAgICAgICAgICBzZXRTZWxlY3RlZENhbmRpZGF0ZVBhaXIoaXRlbSlcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgZnVuY3Rpb24gc2V0U2VsZWN0ZWRDYW5kaWRhdGVQYWlyIChzZWxlY3RlZENhbmRpZGF0ZVBhaXIpIHtcbiAgICAgICAgZm91bmRTZWxlY3RlZENhbmRpZGF0ZVBhaXIgPSB0cnVlXG5cbiAgICAgICAgdmFyIGxvY2FsID0gbG9jYWxDYW5kaWRhdGVzW3NlbGVjdGVkQ2FuZGlkYXRlUGFpci5sb2NhbENhbmRpZGF0ZUlkXVxuXG4gICAgICAgIGlmIChsb2NhbCAmJiBsb2NhbC5pcCkge1xuICAgICAgICAgIC8vIFNwZWNcbiAgICAgICAgICBzZWxmLmxvY2FsQWRkcmVzcyA9IGxvY2FsLmlwXG4gICAgICAgICAgc2VsZi5sb2NhbFBvcnQgPSBOdW1iZXIobG9jYWwucG9ydClcbiAgICAgICAgfSBlbHNlIGlmIChsb2NhbCAmJiBsb2NhbC5pcEFkZHJlc3MpIHtcbiAgICAgICAgICAvLyBGaXJlZm94XG4gICAgICAgICAgc2VsZi5sb2NhbEFkZHJlc3MgPSBsb2NhbC5pcEFkZHJlc3NcbiAgICAgICAgICBzZWxmLmxvY2FsUG9ydCA9IE51bWJlcihsb2NhbC5wb3J0TnVtYmVyKVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxlY3RlZENhbmRpZGF0ZVBhaXIuZ29vZ0xvY2FsQWRkcmVzcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAvLyBUT0RPOiByZW1vdmUgdGhpcyBvbmNlIENocm9tZSA1OCBpcyByZWxlYXNlZFxuICAgICAgICAgIGxvY2FsID0gc2VsZWN0ZWRDYW5kaWRhdGVQYWlyLmdvb2dMb2NhbEFkZHJlc3Muc3BsaXQoJzonKVxuICAgICAgICAgIHNlbGYubG9jYWxBZGRyZXNzID0gbG9jYWxbMF1cbiAgICAgICAgICBzZWxmLmxvY2FsUG9ydCA9IE51bWJlcihsb2NhbFsxXSlcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZW1vdGUgPSByZW1vdGVDYW5kaWRhdGVzW3NlbGVjdGVkQ2FuZGlkYXRlUGFpci5yZW1vdGVDYW5kaWRhdGVJZF1cblxuICAgICAgICBpZiAocmVtb3RlICYmIHJlbW90ZS5pcCkge1xuICAgICAgICAgIC8vIFNwZWNcbiAgICAgICAgICBzZWxmLnJlbW90ZUFkZHJlc3MgPSByZW1vdGUuaXBcbiAgICAgICAgICBzZWxmLnJlbW90ZVBvcnQgPSBOdW1iZXIocmVtb3RlLnBvcnQpXG4gICAgICAgIH0gZWxzZSBpZiAocmVtb3RlICYmIHJlbW90ZS5pcEFkZHJlc3MpIHtcbiAgICAgICAgICAvLyBGaXJlZm94XG4gICAgICAgICAgc2VsZi5yZW1vdGVBZGRyZXNzID0gcmVtb3RlLmlwQWRkcmVzc1xuICAgICAgICAgIHNlbGYucmVtb3RlUG9ydCA9IE51bWJlcihyZW1vdGUucG9ydE51bWJlcilcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZWN0ZWRDYW5kaWRhdGVQYWlyLmdvb2dSZW1vdGVBZGRyZXNzID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIC8vIFRPRE86IHJlbW92ZSB0aGlzIG9uY2UgQ2hyb21lIDU4IGlzIHJlbGVhc2VkXG4gICAgICAgICAgcmVtb3RlID0gc2VsZWN0ZWRDYW5kaWRhdGVQYWlyLmdvb2dSZW1vdGVBZGRyZXNzLnNwbGl0KCc6JylcbiAgICAgICAgICBzZWxmLnJlbW90ZUFkZHJlc3MgPSByZW1vdGVbMF1cbiAgICAgICAgICBzZWxmLnJlbW90ZVBvcnQgPSBOdW1iZXIocmVtb3RlWzFdKVxuICAgICAgICB9XG4gICAgICAgIHNlbGYucmVtb3RlRmFtaWx5ID0gJ0lQdjQnXG5cbiAgICAgICAgc2VsZi5fZGVidWcoXG4gICAgICAgICAgJ2Nvbm5lY3QgbG9jYWw6ICVzOiVzIHJlbW90ZTogJXM6JXMnLFxuICAgICAgICAgIHNlbGYubG9jYWxBZGRyZXNzLCBzZWxmLmxvY2FsUG9ydCwgc2VsZi5yZW1vdGVBZGRyZXNzLCBzZWxmLnJlbW90ZVBvcnRcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICAvLyBJZ25vcmUgY2FuZGlkYXRlIHBhaXIgc2VsZWN0aW9uIGluIGJyb3dzZXJzIGxpa2UgU2FmYXJpIDExIHRoYXQgZG8gbm90IGhhdmUgYW55IGxvY2FsIG9yIHJlbW90ZSBjYW5kaWRhdGVzXG4gICAgICAvLyBCdXQgd2FpdCB1bnRpbCBhdCBsZWFzdCAxIGNhbmRpZGF0ZSBwYWlyIGlzIGF2YWlsYWJsZVxuICAgICAgaWYgKCFmb3VuZFNlbGVjdGVkQ2FuZGlkYXRlUGFpciAmJiAoIU9iamVjdC5rZXlzKGNhbmRpZGF0ZVBhaXJzKS5sZW5ndGggfHwgT2JqZWN0LmtleXMobG9jYWxDYW5kaWRhdGVzKS5sZW5ndGgpKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZmluZENhbmRpZGF0ZVBhaXIsIDEwMClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLl9jb25uZWN0aW5nID0gZmFsc2VcbiAgICAgICAgc2VsZi5jb25uZWN0ZWQgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChzZWxmLl9jaHVuaykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHNlbGYuc2VuZChzZWxmLl9jaHVuaylcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuZGVzdHJveShtYWtlRXJyb3IoZXJyLCAnRVJSX0RBVEFfQ0hBTk5FTCcpKVxuICAgICAgICB9XG4gICAgICAgIHNlbGYuX2NodW5rID0gbnVsbFxuICAgICAgICBzZWxmLl9kZWJ1Zygnc2VudCBjaHVuayBmcm9tIFwid3JpdGUgYmVmb3JlIGNvbm5lY3RcIicpXG5cbiAgICAgICAgdmFyIGNiID0gc2VsZi5fY2JcbiAgICAgICAgc2VsZi5fY2IgPSBudWxsXG4gICAgICAgIGNiKG51bGwpXG4gICAgICB9XG5cbiAgICAgIC8vIElmIGBidWZmZXJlZEFtb3VudExvd1RocmVzaG9sZGAgYW5kICdvbmJ1ZmZlcmVkYW1vdW50bG93JyBhcmUgdW5zdXBwb3J0ZWQsXG4gICAgICAvLyBmYWxsYmFjayB0byB1c2luZyBzZXRJbnRlcnZhbCB0byBpbXBsZW1lbnQgYmFja3ByZXNzdXJlLlxuICAgICAgaWYgKHR5cGVvZiBzZWxmLl9jaGFubmVsLmJ1ZmZlcmVkQW1vdW50TG93VGhyZXNob2xkICE9PSAnbnVtYmVyJykge1xuICAgICAgICBzZWxmLl9pbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsgc2VsZi5fb25JbnRlcnZhbCgpIH0sIDE1MClcbiAgICAgICAgaWYgKHNlbGYuX2ludGVydmFsLnVucmVmKSBzZWxmLl9pbnRlcnZhbC51bnJlZigpXG4gICAgICB9XG5cbiAgICAgIHNlbGYuX2RlYnVnKCdjb25uZWN0JylcbiAgICAgIHNlbGYuZW1pdCgnY29ubmVjdCcpXG4gICAgfSlcbiAgfVxuICBmaW5kQ2FuZGlkYXRlUGFpcigpXG59XG5cblBlZXIucHJvdG90eXBlLl9vbkludGVydmFsID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgaWYgKCFzZWxmLl9jYiB8fCAhc2VsZi5fY2hhbm5lbCB8fCBzZWxmLl9jaGFubmVsLmJ1ZmZlcmVkQW1vdW50ID4gTUFYX0JVRkZFUkVEX0FNT1VOVCkge1xuICAgIHJldHVyblxuICB9XG4gIHNlbGYuX29uQ2hhbm5lbEJ1ZmZlcmVkQW1vdW50TG93KClcbn1cblxuUGVlci5wcm90b3R5cGUuX29uU2lnbmFsaW5nU3RhdGVDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuICBpZiAoc2VsZi5kZXN0cm95ZWQpIHJldHVyblxuXG4gIGlmIChzZWxmLl9wYy5zaWduYWxpbmdTdGF0ZSA9PT0gJ3N0YWJsZScpIHtcbiAgICBzZWxmLl9pc05lZ290aWF0aW5nID0gZmFsc2VcblxuICAgIC8vIEhBQ0s6IEZpcmVmb3ggZG9lc24ndCB5ZXQgc3VwcG9ydCByZW1vdmluZyB0cmFja3Mgd2hlbiBzaWduYWxpbmdTdGF0ZSAhPT0gJ3N0YWJsZSdcbiAgICBzZWxmLl9kZWJ1ZygnZmx1c2hpbmcgc2VuZGVyIHF1ZXVlJywgc2VsZi5fc2VuZGVyc0F3YWl0aW5nU3RhYmxlKVxuICAgIHNlbGYuX3NlbmRlcnNBd2FpdGluZ1N0YWJsZS5mb3JFYWNoKGZ1bmN0aW9uIChzZW5kZXIpIHtcbiAgICAgIHNlbGYucmVtb3ZlVHJhY2soc2VuZGVyKVxuICAgICAgc2VsZi5fcXVldWVkTmVnb3RpYXRpb24gPSB0cnVlXG4gICAgfSlcbiAgICBzZWxmLl9zZW5kZXJzQXdhaXRpbmdTdGFibGUgPSBbXVxuXG4gICAgaWYgKHNlbGYuX3F1ZXVlZE5lZ290aWF0aW9uKSB7XG4gICAgICBzZWxmLl9kZWJ1ZygnZmx1c2hpbmcgbmVnb3RpYXRpb24gcXVldWUnKVxuICAgICAgc2VsZi5fcXVldWVkTmVnb3RpYXRpb24gPSBmYWxzZVxuICAgICAgc2VsZi5fbmVlZHNOZWdvdGlhdGlvbigpIC8vIG5lZ290aWF0ZSBhZ2FpblxuICAgIH1cblxuICAgIHNlbGYuX2RlYnVnKCduZWdvdGlhdGUnKVxuICAgIHNlbGYuZW1pdCgnbmVnb3RpYXRlJylcbiAgfVxuXG4gIHNlbGYuX2RlYnVnKCdzaWduYWxpbmdTdGF0ZUNoYW5nZSAlcycsIHNlbGYuX3BjLnNpZ25hbGluZ1N0YXRlKVxuICBzZWxmLmVtaXQoJ3NpZ25hbGluZ1N0YXRlQ2hhbmdlJywgc2VsZi5fcGMuc2lnbmFsaW5nU3RhdGUpXG59XG5cblBlZXIucHJvdG90eXBlLl9vbkljZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgaWYgKHNlbGYuZGVzdHJveWVkKSByZXR1cm5cbiAgaWYgKGV2ZW50LmNhbmRpZGF0ZSAmJiBzZWxmLnRyaWNrbGUpIHtcbiAgICBzZWxmLmVtaXQoJ3NpZ25hbCcsIHtcbiAgICAgIGNhbmRpZGF0ZToge1xuICAgICAgICBjYW5kaWRhdGU6IGV2ZW50LmNhbmRpZGF0ZS5jYW5kaWRhdGUsXG4gICAgICAgIHNkcE1MaW5lSW5kZXg6IGV2ZW50LmNhbmRpZGF0ZS5zZHBNTGluZUluZGV4LFxuICAgICAgICBzZHBNaWQ6IGV2ZW50LmNhbmRpZGF0ZS5zZHBNaWRcbiAgICAgIH1cbiAgICB9KVxuICB9IGVsc2UgaWYgKCFldmVudC5jYW5kaWRhdGUpIHtcbiAgICBzZWxmLl9pY2VDb21wbGV0ZSA9IHRydWVcbiAgICBzZWxmLmVtaXQoJ19pY2VDb21wbGV0ZScpXG4gIH1cbn1cblxuUGVlci5wcm90b3R5cGUuX29uQ2hhbm5lbE1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIGlmIChzZWxmLmRlc3Ryb3llZCkgcmV0dXJuXG4gIHZhciBkYXRhID0gZXZlbnQuZGF0YVxuICBpZiAoZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSBkYXRhID0gQnVmZmVyLmZyb20oZGF0YSlcbiAgc2VsZi5wdXNoKGRhdGEpXG59XG5cblBlZXIucHJvdG90eXBlLl9vbkNoYW5uZWxCdWZmZXJlZEFtb3VudExvdyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIGlmIChzZWxmLmRlc3Ryb3llZCB8fCAhc2VsZi5fY2IpIHJldHVyblxuICBzZWxmLl9kZWJ1ZygnZW5kaW5nIGJhY2twcmVzc3VyZTogYnVmZmVyZWRBbW91bnQgJWQnLCBzZWxmLl9jaGFubmVsLmJ1ZmZlcmVkQW1vdW50KVxuICB2YXIgY2IgPSBzZWxmLl9jYlxuICBzZWxmLl9jYiA9IG51bGxcbiAgY2IobnVsbClcbn1cblxuUGVlci5wcm90b3R5cGUuX29uQ2hhbm5lbE9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuICBpZiAoc2VsZi5jb25uZWN0ZWQgfHwgc2VsZi5kZXN0cm95ZWQpIHJldHVyblxuICBzZWxmLl9kZWJ1Zygnb24gY2hhbm5lbCBvcGVuJylcbiAgc2VsZi5fY2hhbm5lbFJlYWR5ID0gdHJ1ZVxuICBzZWxmLl9tYXliZVJlYWR5KClcbn1cblxuUGVlci5wcm90b3R5cGUuX29uQ2hhbm5lbENsb3NlID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgaWYgKHNlbGYuZGVzdHJveWVkKSByZXR1cm5cbiAgc2VsZi5fZGVidWcoJ29uIGNoYW5uZWwgY2xvc2UnKVxuICBzZWxmLmRlc3Ryb3koKVxufVxuXG5QZWVyLnByb3RvdHlwZS5fb25UcmFjayA9IGZ1bmN0aW9uIChldmVudCkge1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgaWYgKHNlbGYuZGVzdHJveWVkKSByZXR1cm5cblxuICBldmVudC5zdHJlYW1zLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50U3RyZWFtKSB7XG4gICAgc2VsZi5fZGVidWcoJ29uIHRyYWNrJylcbiAgICBzZWxmLmVtaXQoJ3RyYWNrJywgZXZlbnQudHJhY2ssIGV2ZW50U3RyZWFtKVxuXG4gICAgc2VsZi5fcmVtb3RlVHJhY2tzLnB1c2goe1xuICAgICAgdHJhY2s6IGV2ZW50LnRyYWNrLFxuICAgICAgc3RyZWFtOiBldmVudFN0cmVhbVxuICAgIH0pXG5cbiAgICBpZiAoc2VsZi5fcmVtb3RlU3RyZWFtcy5zb21lKGZ1bmN0aW9uIChyZW1vdGVTdHJlYW0pIHtcbiAgICAgIHJldHVybiByZW1vdGVTdHJlYW0uaWQgPT09IGV2ZW50U3RyZWFtLmlkXG4gICAgfSkpIHJldHVybiAvLyBPbmx5IGZpcmUgb25lICdzdHJlYW0nIGV2ZW50LCBldmVuIHRob3VnaCB0aGVyZSBtYXkgYmUgbXVsdGlwbGUgdHJhY2tzIHBlciBzdHJlYW1cblxuICAgIHNlbGYuX3JlbW90ZVN0cmVhbXMucHVzaChldmVudFN0cmVhbSlcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIHNlbGYuZW1pdCgnc3RyZWFtJywgZXZlbnRTdHJlYW0pIC8vIGVuc3VyZSBhbGwgdHJhY2tzIGhhdmUgYmVlbiBhZGRlZFxuICAgIH0sIDApXG4gIH0pXG59XG5cblBlZXIucHJvdG90eXBlLl9kZWJ1ZyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMpXG4gIGFyZ3NbMF0gPSAnWycgKyBzZWxmLl9pZCArICddICcgKyBhcmdzWzBdXG4gIGRlYnVnLmFwcGx5KG51bGwsIGFyZ3MpXG59XG5cbi8vIFRyYW5zZm9ybSBjb25zdHJhaW50cyBvYmplY3RzIGludG8gdGhlIG5ldyBmb3JtYXQgKHVubGVzcyBDaHJvbWl1bSlcbi8vIFRPRE86IFRoaXMgY2FuIGJlIHJlbW92ZWQgd2hlbiBDaHJvbWl1bSBzdXBwb3J0cyB0aGUgbmV3IGZvcm1hdFxuUGVlci5wcm90b3R5cGUuX3RyYW5zZm9ybUNvbnN0cmFpbnRzID0gZnVuY3Rpb24gKGNvbnN0cmFpbnRzKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuXG4gIGlmIChPYmplY3Qua2V5cyhjb25zdHJhaW50cykubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIGNvbnN0cmFpbnRzXG4gIH1cblxuICBpZiAoKGNvbnN0cmFpbnRzLm1hbmRhdG9yeSB8fCBjb25zdHJhaW50cy5vcHRpb25hbCkgJiYgIXNlbGYuX2lzQ2hyb21pdW0pIHtcbiAgICAvLyBjb252ZXJ0IHRvIG5ldyBmb3JtYXRcblxuICAgIC8vIE1lcmdlIG1hbmRhdG9yeSBhbmQgb3B0aW9uYWwgb2JqZWN0cywgcHJpb3JpdGl6aW5nIG1hbmRhdG9yeVxuICAgIHZhciBuZXdDb25zdHJhaW50cyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbnN0cmFpbnRzLm9wdGlvbmFsLCBjb25zdHJhaW50cy5tYW5kYXRvcnkpXG5cbiAgICAvLyBmaXggY2FzaW5nXG4gICAgaWYgKG5ld0NvbnN0cmFpbnRzLk9mZmVyVG9SZWNlaXZlVmlkZW8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgbmV3Q29uc3RyYWludHMub2ZmZXJUb1JlY2VpdmVWaWRlbyA9IG5ld0NvbnN0cmFpbnRzLk9mZmVyVG9SZWNlaXZlVmlkZW9cbiAgICAgIGRlbGV0ZSBuZXdDb25zdHJhaW50c1snT2ZmZXJUb1JlY2VpdmVWaWRlbyddXG4gICAgfVxuXG4gICAgaWYgKG5ld0NvbnN0cmFpbnRzLk9mZmVyVG9SZWNlaXZlQXVkaW8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgbmV3Q29uc3RyYWludHMub2ZmZXJUb1JlY2VpdmVBdWRpbyA9IG5ld0NvbnN0cmFpbnRzLk9mZmVyVG9SZWNlaXZlQXVkaW9cbiAgICAgIGRlbGV0ZSBuZXdDb25zdHJhaW50c1snT2ZmZXJUb1JlY2VpdmVBdWRpbyddXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ld0NvbnN0cmFpbnRzXG4gIH0gZWxzZSBpZiAoIWNvbnN0cmFpbnRzLm1hbmRhdG9yeSAmJiAhY29uc3RyYWludHMub3B0aW9uYWwgJiYgc2VsZi5faXNDaHJvbWl1bSkge1xuICAgIC8vIGNvbnZlcnQgdG8gb2xkIGZvcm1hdFxuXG4gICAgLy8gZml4IGNhc2luZ1xuICAgIGlmIChjb25zdHJhaW50cy5vZmZlclRvUmVjZWl2ZVZpZGVvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0cmFpbnRzLk9mZmVyVG9SZWNlaXZlVmlkZW8gPSBjb25zdHJhaW50cy5vZmZlclRvUmVjZWl2ZVZpZGVvXG4gICAgICBkZWxldGUgY29uc3RyYWludHNbJ29mZmVyVG9SZWNlaXZlVmlkZW8nXVxuICAgIH1cblxuICAgIGlmIChjb25zdHJhaW50cy5vZmZlclRvUmVjZWl2ZUF1ZGlvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0cmFpbnRzLk9mZmVyVG9SZWNlaXZlQXVkaW8gPSBjb25zdHJhaW50cy5vZmZlclRvUmVjZWl2ZUF1ZGlvXG4gICAgICBkZWxldGUgY29uc3RyYWludHNbJ29mZmVyVG9SZWNlaXZlQXVkaW8nXVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBtYW5kYXRvcnk6IGNvbnN0cmFpbnRzIC8vIE5PVEU6IEFsbCBjb25zdHJhaW50cyBhcmUgdXBncmFkZWQgdG8gbWFuZGF0b3J5XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGNvbnN0cmFpbnRzXG59XG5cbmZ1bmN0aW9uIG1ha2VFcnJvciAobWVzc2FnZSwgY29kZSkge1xuICB2YXIgZXJyID0gbmV3IEVycm9yKG1lc3NhZ2UpXG4gIGVyci5jb2RlID0gY29kZVxuICByZXR1cm4gZXJyXG59XG5cbmZ1bmN0aW9uIG5vb3AgKCkge31cbiIsIi8vIHN0YXRzLmpzIC0gaHR0cDovL2dpdGh1Yi5jb20vbXJkb29iL3N0YXRzLmpzXG52YXIgU3RhdHM9ZnVuY3Rpb24oKXt2YXIgbD1EYXRlLm5vdygpLG09bCxnPTAsbj1JbmZpbml0eSxvPTAsaD0wLHA9SW5maW5pdHkscT0wLHI9MCxzPTAsZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2YuaWQ9XCJzdGF0c1wiO2YuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLGZ1bmN0aW9uKGIpe2IucHJldmVudERlZmF1bHQoKTt0KCsrcyUyKX0sITEpO2Yuc3R5bGUuY3NzVGV4dD1cIndpZHRoOjgwcHg7b3BhY2l0eTowLjk7Y3Vyc29yOnBvaW50ZXJcIjt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2EuaWQ9XCJmcHNcIjthLnN0eWxlLmNzc1RleHQ9XCJwYWRkaW5nOjAgMCAzcHggM3B4O3RleHQtYWxpZ246bGVmdDtiYWNrZ3JvdW5kLWNvbG9yOiMwMDJcIjtmLmFwcGVuZENoaWxkKGEpO3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7aS5pZD1cImZwc1RleHRcIjtpLnN0eWxlLmNzc1RleHQ9XCJjb2xvcjojMGZmO2ZvbnQtZmFtaWx5OkhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO2ZvbnQtc2l6ZTo5cHg7Zm9udC13ZWlnaHQ6Ym9sZDtsaW5lLWhlaWdodDoxNXB4XCI7XG5pLmlubmVySFRNTD1cIkZQU1wiO2EuYXBwZW5kQ2hpbGQoaSk7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtjLmlkPVwiZnBzR3JhcGhcIjtjLnN0eWxlLmNzc1RleHQ9XCJwb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDo3NHB4O2hlaWdodDozMHB4O2JhY2tncm91bmQtY29sb3I6IzBmZlwiO2ZvcihhLmFwcGVuZENoaWxkKGMpOzc0PmMuY2hpbGRyZW4ubGVuZ3RoOyl7dmFyIGo9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7ai5zdHlsZS5jc3NUZXh0PVwid2lkdGg6MXB4O2hlaWdodDozMHB4O2Zsb2F0OmxlZnQ7YmFja2dyb3VuZC1jb2xvcjojMTEzXCI7Yy5hcHBlbmRDaGlsZChqKX12YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2QuaWQ9XCJtc1wiO2Quc3R5bGUuY3NzVGV4dD1cInBhZGRpbmc6MCAwIDNweCAzcHg7dGV4dC1hbGlnbjpsZWZ0O2JhY2tncm91bmQtY29sb3I6IzAyMDtkaXNwbGF5Om5vbmVcIjtmLmFwcGVuZENoaWxkKGQpO3ZhciBrPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5rLmlkPVwibXNUZXh0XCI7ay5zdHlsZS5jc3NUZXh0PVwiY29sb3I6IzBmMDtmb250LWZhbWlseTpIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjtmb250LXNpemU6OXB4O2ZvbnQtd2VpZ2h0OmJvbGQ7bGluZS1oZWlnaHQ6MTVweFwiO2suaW5uZXJIVE1MPVwiTVNcIjtkLmFwcGVuZENoaWxkKGspO3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5pZD1cIm1zR3JhcGhcIjtlLnN0eWxlLmNzc1RleHQ9XCJwb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDo3NHB4O2hlaWdodDozMHB4O2JhY2tncm91bmQtY29sb3I6IzBmMFwiO2ZvcihkLmFwcGVuZENoaWxkKGUpOzc0PmUuY2hpbGRyZW4ubGVuZ3RoOylqPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLGouc3R5bGUuY3NzVGV4dD1cIndpZHRoOjFweDtoZWlnaHQ6MzBweDtmbG9hdDpsZWZ0O2JhY2tncm91bmQtY29sb3I6IzEzMVwiLGUuYXBwZW5kQ2hpbGQoaik7dmFyIHQ9ZnVuY3Rpb24oYil7cz1iO3N3aXRjaChzKXtjYXNlIDA6YS5zdHlsZS5kaXNwbGF5PVxuXCJibG9ja1wiO2Quc3R5bGUuZGlzcGxheT1cIm5vbmVcIjticmVhaztjYXNlIDE6YS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGQuc3R5bGUuZGlzcGxheT1cImJsb2NrXCJ9fTtyZXR1cm57UkVWSVNJT046MTIsZG9tRWxlbWVudDpmLHNldE1vZGU6dCxiZWdpbjpmdW5jdGlvbigpe2w9RGF0ZS5ub3coKX0sZW5kOmZ1bmN0aW9uKCl7dmFyIGI9RGF0ZS5ub3coKTtnPWItbDtuPU1hdGgubWluKG4sZyk7bz1NYXRoLm1heChvLGcpO2sudGV4dENvbnRlbnQ9ZytcIiBNUyAoXCIrbitcIi1cIitvK1wiKVwiO3ZhciBhPU1hdGgubWluKDMwLDMwLTMwKihnLzIwMCkpO2UuYXBwZW5kQ2hpbGQoZS5maXJzdENoaWxkKS5zdHlsZS5oZWlnaHQ9YStcInB4XCI7cisrO2I+bSsxRTMmJihoPU1hdGgucm91bmQoMUUzKnIvKGItbSkpLHA9TWF0aC5taW4ocCxoKSxxPU1hdGgubWF4KHEsaCksaS50ZXh0Q29udGVudD1oK1wiIEZQUyAoXCIrcCtcIi1cIitxK1wiKVwiLGE9TWF0aC5taW4oMzAsMzAtMzAqKGgvMTAwKSksYy5hcHBlbmRDaGlsZChjLmZpcnN0Q2hpbGQpLnN0eWxlLmhlaWdodD1cbmErXCJweFwiLG09YixyPTApO3JldHVybiBifSx1cGRhdGU6ZnVuY3Rpb24oKXtsPXRoaXMuZW5kKCl9fX07XCJvYmplY3RcIj09PXR5cGVvZiBtb2R1bGUmJihtb2R1bGUuZXhwb3J0cz1TdGF0cyk7XG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xuXG52YXIgQnVmZmVyID0gcmVxdWlyZSgnc2FmZS1idWZmZXInKS5CdWZmZXI7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxudmFyIGlzRW5jb2RpbmcgPSBCdWZmZXIuaXNFbmNvZGluZyB8fCBmdW5jdGlvbiAoZW5jb2RpbmcpIHtcbiAgZW5jb2RpbmcgPSAnJyArIGVuY29kaW5nO1xuICBzd2l0Y2ggKGVuY29kaW5nICYmIGVuY29kaW5nLnRvTG93ZXJDYXNlKCkpIHtcbiAgICBjYXNlICdoZXgnOmNhc2UgJ3V0ZjgnOmNhc2UgJ3V0Zi04JzpjYXNlICdhc2NpaSc6Y2FzZSAnYmluYXJ5JzpjYXNlICdiYXNlNjQnOmNhc2UgJ3VjczInOmNhc2UgJ3Vjcy0yJzpjYXNlICd1dGYxNmxlJzpjYXNlICd1dGYtMTZsZSc6Y2FzZSAncmF3JzpcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIF9ub3JtYWxpemVFbmNvZGluZyhlbmMpIHtcbiAgaWYgKCFlbmMpIHJldHVybiAndXRmOCc7XG4gIHZhciByZXRyaWVkO1xuICB3aGlsZSAodHJ1ZSkge1xuICAgIHN3aXRjaCAoZW5jKSB7XG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuICd1dGY4JztcbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiAndXRmMTZsZSc7XG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuICdsYXRpbjEnO1xuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBlbmM7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAocmV0cmllZCkgcmV0dXJuOyAvLyB1bmRlZmluZWRcbiAgICAgICAgZW5jID0gKCcnICsgZW5jKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICByZXRyaWVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIERvIG5vdCBjYWNoZSBgQnVmZmVyLmlzRW5jb2RpbmdgIHdoZW4gY2hlY2tpbmcgZW5jb2RpbmcgbmFtZXMgYXMgc29tZVxuLy8gbW9kdWxlcyBtb25rZXktcGF0Y2ggaXQgdG8gc3VwcG9ydCBhZGRpdGlvbmFsIGVuY29kaW5nc1xuZnVuY3Rpb24gbm9ybWFsaXplRW5jb2RpbmcoZW5jKSB7XG4gIHZhciBuZW5jID0gX25vcm1hbGl6ZUVuY29kaW5nKGVuYyk7XG4gIGlmICh0eXBlb2YgbmVuYyAhPT0gJ3N0cmluZycgJiYgKEJ1ZmZlci5pc0VuY29kaW5nID09PSBpc0VuY29kaW5nIHx8ICFpc0VuY29kaW5nKGVuYykpKSB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmMpO1xuICByZXR1cm4gbmVuYyB8fCBlbmM7XG59XG5cbi8vIFN0cmluZ0RlY29kZXIgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIGZvciBlZmZpY2llbnRseSBzcGxpdHRpbmcgYSBzZXJpZXMgb2Zcbi8vIGJ1ZmZlcnMgaW50byBhIHNlcmllcyBvZiBKUyBzdHJpbmdzIHdpdGhvdXQgYnJlYWtpbmcgYXBhcnQgbXVsdGktYnl0ZVxuLy8gY2hhcmFjdGVycy5cbmV4cG9ydHMuU3RyaW5nRGVjb2RlciA9IFN0cmluZ0RlY29kZXI7XG5mdW5jdGlvbiBTdHJpbmdEZWNvZGVyKGVuY29kaW5nKSB7XG4gIHRoaXMuZW5jb2RpbmcgPSBub3JtYWxpemVFbmNvZGluZyhlbmNvZGluZyk7XG4gIHZhciBuYjtcbiAgc3dpdGNoICh0aGlzLmVuY29kaW5nKSB7XG4gICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICB0aGlzLnRleHQgPSB1dGYxNlRleHQ7XG4gICAgICB0aGlzLmVuZCA9IHV0ZjE2RW5kO1xuICAgICAgbmIgPSA0O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAndXRmOCc6XG4gICAgICB0aGlzLmZpbGxMYXN0ID0gdXRmOEZpbGxMYXN0O1xuICAgICAgbmIgPSA0O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgIHRoaXMudGV4dCA9IGJhc2U2NFRleHQ7XG4gICAgICB0aGlzLmVuZCA9IGJhc2U2NEVuZDtcbiAgICAgIG5iID0gMztcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aGlzLndyaXRlID0gc2ltcGxlV3JpdGU7XG4gICAgICB0aGlzLmVuZCA9IHNpbXBsZUVuZDtcbiAgICAgIHJldHVybjtcbiAgfVxuICB0aGlzLmxhc3ROZWVkID0gMDtcbiAgdGhpcy5sYXN0VG90YWwgPSAwO1xuICB0aGlzLmxhc3RDaGFyID0gQnVmZmVyLmFsbG9jVW5zYWZlKG5iKTtcbn1cblxuU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoYnVmKSB7XG4gIGlmIChidWYubGVuZ3RoID09PSAwKSByZXR1cm4gJyc7XG4gIHZhciByO1xuICB2YXIgaTtcbiAgaWYgKHRoaXMubGFzdE5lZWQpIHtcbiAgICByID0gdGhpcy5maWxsTGFzdChidWYpO1xuICAgIGlmIChyID09PSB1bmRlZmluZWQpIHJldHVybiAnJztcbiAgICBpID0gdGhpcy5sYXN0TmVlZDtcbiAgICB0aGlzLmxhc3ROZWVkID0gMDtcbiAgfSBlbHNlIHtcbiAgICBpID0gMDtcbiAgfVxuICBpZiAoaSA8IGJ1Zi5sZW5ndGgpIHJldHVybiByID8gciArIHRoaXMudGV4dChidWYsIGkpIDogdGhpcy50ZXh0KGJ1ZiwgaSk7XG4gIHJldHVybiByIHx8ICcnO1xufTtcblxuU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUuZW5kID0gdXRmOEVuZDtcblxuLy8gUmV0dXJucyBvbmx5IGNvbXBsZXRlIGNoYXJhY3RlcnMgaW4gYSBCdWZmZXJcblN0cmluZ0RlY29kZXIucHJvdG90eXBlLnRleHQgPSB1dGY4VGV4dDtcblxuLy8gQXR0ZW1wdHMgdG8gY29tcGxldGUgYSBwYXJ0aWFsIG5vbi1VVEYtOCBjaGFyYWN0ZXIgdXNpbmcgYnl0ZXMgZnJvbSBhIEJ1ZmZlclxuU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUuZmlsbExhc3QgPSBmdW5jdGlvbiAoYnVmKSB7XG4gIGlmICh0aGlzLmxhc3ROZWVkIDw9IGJ1Zi5sZW5ndGgpIHtcbiAgICBidWYuY29weSh0aGlzLmxhc3RDaGFyLCB0aGlzLmxhc3RUb3RhbCAtIHRoaXMubGFzdE5lZWQsIDAsIHRoaXMubGFzdE5lZWQpO1xuICAgIHJldHVybiB0aGlzLmxhc3RDaGFyLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcsIDAsIHRoaXMubGFzdFRvdGFsKTtcbiAgfVxuICBidWYuY29weSh0aGlzLmxhc3RDaGFyLCB0aGlzLmxhc3RUb3RhbCAtIHRoaXMubGFzdE5lZWQsIDAsIGJ1Zi5sZW5ndGgpO1xuICB0aGlzLmxhc3ROZWVkIC09IGJ1Zi5sZW5ndGg7XG59O1xuXG4vLyBDaGVja3MgdGhlIHR5cGUgb2YgYSBVVEYtOCBieXRlLCB3aGV0aGVyIGl0J3MgQVNDSUksIGEgbGVhZGluZyBieXRlLCBvciBhXG4vLyBjb250aW51YXRpb24gYnl0ZS4gSWYgYW4gaW52YWxpZCBieXRlIGlzIGRldGVjdGVkLCAtMiBpcyByZXR1cm5lZC5cbmZ1bmN0aW9uIHV0ZjhDaGVja0J5dGUoYnl0ZSkge1xuICBpZiAoYnl0ZSA8PSAweDdGKSByZXR1cm4gMDtlbHNlIGlmIChieXRlID4+IDUgPT09IDB4MDYpIHJldHVybiAyO2Vsc2UgaWYgKGJ5dGUgPj4gNCA9PT0gMHgwRSkgcmV0dXJuIDM7ZWxzZSBpZiAoYnl0ZSA+PiAzID09PSAweDFFKSByZXR1cm4gNDtcbiAgcmV0dXJuIGJ5dGUgPj4gNiA9PT0gMHgwMiA/IC0xIDogLTI7XG59XG5cbi8vIENoZWNrcyBhdCBtb3N0IDMgYnl0ZXMgYXQgdGhlIGVuZCBvZiBhIEJ1ZmZlciBpbiBvcmRlciB0byBkZXRlY3QgYW5cbi8vIGluY29tcGxldGUgbXVsdGktYnl0ZSBVVEYtOCBjaGFyYWN0ZXIuIFRoZSB0b3RhbCBudW1iZXIgb2YgYnl0ZXMgKDIsIDMsIG9yIDQpXG4vLyBuZWVkZWQgdG8gY29tcGxldGUgdGhlIFVURi04IGNoYXJhY3RlciAoaWYgYXBwbGljYWJsZSkgYXJlIHJldHVybmVkLlxuZnVuY3Rpb24gdXRmOENoZWNrSW5jb21wbGV0ZShzZWxmLCBidWYsIGkpIHtcbiAgdmFyIGogPSBidWYubGVuZ3RoIC0gMTtcbiAgaWYgKGogPCBpKSByZXR1cm4gMDtcbiAgdmFyIG5iID0gdXRmOENoZWNrQnl0ZShidWZbal0pO1xuICBpZiAobmIgPj0gMCkge1xuICAgIGlmIChuYiA+IDApIHNlbGYubGFzdE5lZWQgPSBuYiAtIDE7XG4gICAgcmV0dXJuIG5iO1xuICB9XG4gIGlmICgtLWogPCBpIHx8IG5iID09PSAtMikgcmV0dXJuIDA7XG4gIG5iID0gdXRmOENoZWNrQnl0ZShidWZbal0pO1xuICBpZiAobmIgPj0gMCkge1xuICAgIGlmIChuYiA+IDApIHNlbGYubGFzdE5lZWQgPSBuYiAtIDI7XG4gICAgcmV0dXJuIG5iO1xuICB9XG4gIGlmICgtLWogPCBpIHx8IG5iID09PSAtMikgcmV0dXJuIDA7XG4gIG5iID0gdXRmOENoZWNrQnl0ZShidWZbal0pO1xuICBpZiAobmIgPj0gMCkge1xuICAgIGlmIChuYiA+IDApIHtcbiAgICAgIGlmIChuYiA9PT0gMikgbmIgPSAwO2Vsc2Ugc2VsZi5sYXN0TmVlZCA9IG5iIC0gMztcbiAgICB9XG4gICAgcmV0dXJuIG5iO1xuICB9XG4gIHJldHVybiAwO1xufVxuXG4vLyBWYWxpZGF0ZXMgYXMgbWFueSBjb250aW51YXRpb24gYnl0ZXMgZm9yIGEgbXVsdGktYnl0ZSBVVEYtOCBjaGFyYWN0ZXIgYXNcbi8vIG5lZWRlZCBvciBhcmUgYXZhaWxhYmxlLiBJZiB3ZSBzZWUgYSBub24tY29udGludWF0aW9uIGJ5dGUgd2hlcmUgd2UgZXhwZWN0XG4vLyBvbmUsIHdlIFwicmVwbGFjZVwiIHRoZSB2YWxpZGF0ZWQgY29udGludWF0aW9uIGJ5dGVzIHdlJ3ZlIHNlZW4gc28gZmFyIHdpdGhcbi8vIGEgc2luZ2xlIFVURi04IHJlcGxhY2VtZW50IGNoYXJhY3RlciAoJ1xcdWZmZmQnKSwgdG8gbWF0Y2ggdjgncyBVVEYtOCBkZWNvZGluZ1xuLy8gYmVoYXZpb3IuIFRoZSBjb250aW51YXRpb24gYnl0ZSBjaGVjayBpcyBpbmNsdWRlZCB0aHJlZSB0aW1lcyBpbiB0aGUgY2FzZVxuLy8gd2hlcmUgYWxsIG9mIHRoZSBjb250aW51YXRpb24gYnl0ZXMgZm9yIGEgY2hhcmFjdGVyIGV4aXN0IGluIHRoZSBzYW1lIGJ1ZmZlci5cbi8vIEl0IGlzIGFsc28gZG9uZSB0aGlzIHdheSBhcyBhIHNsaWdodCBwZXJmb3JtYW5jZSBpbmNyZWFzZSBpbnN0ZWFkIG9mIHVzaW5nIGFcbi8vIGxvb3AuXG5mdW5jdGlvbiB1dGY4Q2hlY2tFeHRyYUJ5dGVzKHNlbGYsIGJ1ZiwgcCkge1xuICBpZiAoKGJ1ZlswXSAmIDB4QzApICE9PSAweDgwKSB7XG4gICAgc2VsZi5sYXN0TmVlZCA9IDA7XG4gICAgcmV0dXJuICdcXHVmZmZkJztcbiAgfVxuICBpZiAoc2VsZi5sYXN0TmVlZCA+IDEgJiYgYnVmLmxlbmd0aCA+IDEpIHtcbiAgICBpZiAoKGJ1ZlsxXSAmIDB4QzApICE9PSAweDgwKSB7XG4gICAgICBzZWxmLmxhc3ROZWVkID0gMTtcbiAgICAgIHJldHVybiAnXFx1ZmZmZCc7XG4gICAgfVxuICAgIGlmIChzZWxmLmxhc3ROZWVkID4gMiAmJiBidWYubGVuZ3RoID4gMikge1xuICAgICAgaWYgKChidWZbMl0gJiAweEMwKSAhPT0gMHg4MCkge1xuICAgICAgICBzZWxmLmxhc3ROZWVkID0gMjtcbiAgICAgICAgcmV0dXJuICdcXHVmZmZkJztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLy8gQXR0ZW1wdHMgdG8gY29tcGxldGUgYSBtdWx0aS1ieXRlIFVURi04IGNoYXJhY3RlciB1c2luZyBieXRlcyBmcm9tIGEgQnVmZmVyLlxuZnVuY3Rpb24gdXRmOEZpbGxMYXN0KGJ1Zikge1xuICB2YXIgcCA9IHRoaXMubGFzdFRvdGFsIC0gdGhpcy5sYXN0TmVlZDtcbiAgdmFyIHIgPSB1dGY4Q2hlY2tFeHRyYUJ5dGVzKHRoaXMsIGJ1ZiwgcCk7XG4gIGlmIChyICE9PSB1bmRlZmluZWQpIHJldHVybiByO1xuICBpZiAodGhpcy5sYXN0TmVlZCA8PSBidWYubGVuZ3RoKSB7XG4gICAgYnVmLmNvcHkodGhpcy5sYXN0Q2hhciwgcCwgMCwgdGhpcy5sYXN0TmVlZCk7XG4gICAgcmV0dXJuIHRoaXMubGFzdENoYXIudG9TdHJpbmcodGhpcy5lbmNvZGluZywgMCwgdGhpcy5sYXN0VG90YWwpO1xuICB9XG4gIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIHAsIDAsIGJ1Zi5sZW5ndGgpO1xuICB0aGlzLmxhc3ROZWVkIC09IGJ1Zi5sZW5ndGg7XG59XG5cbi8vIFJldHVybnMgYWxsIGNvbXBsZXRlIFVURi04IGNoYXJhY3RlcnMgaW4gYSBCdWZmZXIuIElmIHRoZSBCdWZmZXIgZW5kZWQgb24gYVxuLy8gcGFydGlhbCBjaGFyYWN0ZXIsIHRoZSBjaGFyYWN0ZXIncyBieXRlcyBhcmUgYnVmZmVyZWQgdW50aWwgdGhlIHJlcXVpcmVkXG4vLyBudW1iZXIgb2YgYnl0ZXMgYXJlIGF2YWlsYWJsZS5cbmZ1bmN0aW9uIHV0ZjhUZXh0KGJ1ZiwgaSkge1xuICB2YXIgdG90YWwgPSB1dGY4Q2hlY2tJbmNvbXBsZXRlKHRoaXMsIGJ1ZiwgaSk7XG4gIGlmICghdGhpcy5sYXN0TmVlZCkgcmV0dXJuIGJ1Zi50b1N0cmluZygndXRmOCcsIGkpO1xuICB0aGlzLmxhc3RUb3RhbCA9IHRvdGFsO1xuICB2YXIgZW5kID0gYnVmLmxlbmd0aCAtICh0b3RhbCAtIHRoaXMubGFzdE5lZWQpO1xuICBidWYuY29weSh0aGlzLmxhc3RDaGFyLCAwLCBlbmQpO1xuICByZXR1cm4gYnVmLnRvU3RyaW5nKCd1dGY4JywgaSwgZW5kKTtcbn1cblxuLy8gRm9yIFVURi04LCBhIHJlcGxhY2VtZW50IGNoYXJhY3RlciBpcyBhZGRlZCB3aGVuIGVuZGluZyBvbiBhIHBhcnRpYWxcbi8vIGNoYXJhY3Rlci5cbmZ1bmN0aW9uIHV0ZjhFbmQoYnVmKSB7XG4gIHZhciByID0gYnVmICYmIGJ1Zi5sZW5ndGggPyB0aGlzLndyaXRlKGJ1ZikgOiAnJztcbiAgaWYgKHRoaXMubGFzdE5lZWQpIHJldHVybiByICsgJ1xcdWZmZmQnO1xuICByZXR1cm4gcjtcbn1cblxuLy8gVVRGLTE2TEUgdHlwaWNhbGx5IG5lZWRzIHR3byBieXRlcyBwZXIgY2hhcmFjdGVyLCBidXQgZXZlbiBpZiB3ZSBoYXZlIGFuIGV2ZW5cbi8vIG51bWJlciBvZiBieXRlcyBhdmFpbGFibGUsIHdlIG5lZWQgdG8gY2hlY2sgaWYgd2UgZW5kIG9uIGEgbGVhZGluZy9oaWdoXG4vLyBzdXJyb2dhdGUuIEluIHRoYXQgY2FzZSwgd2UgbmVlZCB0byB3YWl0IGZvciB0aGUgbmV4dCB0d28gYnl0ZXMgaW4gb3JkZXIgdG9cbi8vIGRlY29kZSB0aGUgbGFzdCBjaGFyYWN0ZXIgcHJvcGVybHkuXG5mdW5jdGlvbiB1dGYxNlRleHQoYnVmLCBpKSB7XG4gIGlmICgoYnVmLmxlbmd0aCAtIGkpICUgMiA9PT0gMCkge1xuICAgIHZhciByID0gYnVmLnRvU3RyaW5nKCd1dGYxNmxlJywgaSk7XG4gICAgaWYgKHIpIHtcbiAgICAgIHZhciBjID0gci5jaGFyQ29kZUF0KHIubGVuZ3RoIC0gMSk7XG4gICAgICBpZiAoYyA+PSAweEQ4MDAgJiYgYyA8PSAweERCRkYpIHtcbiAgICAgICAgdGhpcy5sYXN0TmVlZCA9IDI7XG4gICAgICAgIHRoaXMubGFzdFRvdGFsID0gNDtcbiAgICAgICAgdGhpcy5sYXN0Q2hhclswXSA9IGJ1ZltidWYubGVuZ3RoIC0gMl07XG4gICAgICAgIHRoaXMubGFzdENoYXJbMV0gPSBidWZbYnVmLmxlbmd0aCAtIDFdO1xuICAgICAgICByZXR1cm4gci5zbGljZSgwLCAtMSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByO1xuICB9XG4gIHRoaXMubGFzdE5lZWQgPSAxO1xuICB0aGlzLmxhc3RUb3RhbCA9IDI7XG4gIHRoaXMubGFzdENoYXJbMF0gPSBidWZbYnVmLmxlbmd0aCAtIDFdO1xuICByZXR1cm4gYnVmLnRvU3RyaW5nKCd1dGYxNmxlJywgaSwgYnVmLmxlbmd0aCAtIDEpO1xufVxuXG4vLyBGb3IgVVRGLTE2TEUgd2UgZG8gbm90IGV4cGxpY2l0bHkgYXBwZW5kIHNwZWNpYWwgcmVwbGFjZW1lbnQgY2hhcmFjdGVycyBpZiB3ZVxuLy8gZW5kIG9uIGEgcGFydGlhbCBjaGFyYWN0ZXIsIHdlIHNpbXBseSBsZXQgdjggaGFuZGxlIHRoYXQuXG5mdW5jdGlvbiB1dGYxNkVuZChidWYpIHtcbiAgdmFyIHIgPSBidWYgJiYgYnVmLmxlbmd0aCA/IHRoaXMud3JpdGUoYnVmKSA6ICcnO1xuICBpZiAodGhpcy5sYXN0TmVlZCkge1xuICAgIHZhciBlbmQgPSB0aGlzLmxhc3RUb3RhbCAtIHRoaXMubGFzdE5lZWQ7XG4gICAgcmV0dXJuIHIgKyB0aGlzLmxhc3RDaGFyLnRvU3RyaW5nKCd1dGYxNmxlJywgMCwgZW5kKTtcbiAgfVxuICByZXR1cm4gcjtcbn1cblxuZnVuY3Rpb24gYmFzZTY0VGV4dChidWYsIGkpIHtcbiAgdmFyIG4gPSAoYnVmLmxlbmd0aCAtIGkpICUgMztcbiAgaWYgKG4gPT09IDApIHJldHVybiBidWYudG9TdHJpbmcoJ2Jhc2U2NCcsIGkpO1xuICB0aGlzLmxhc3ROZWVkID0gMyAtIG47XG4gIHRoaXMubGFzdFRvdGFsID0gMztcbiAgaWYgKG4gPT09IDEpIHtcbiAgICB0aGlzLmxhc3RDaGFyWzBdID0gYnVmW2J1Zi5sZW5ndGggLSAxXTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmxhc3RDaGFyWzBdID0gYnVmW2J1Zi5sZW5ndGggLSAyXTtcbiAgICB0aGlzLmxhc3RDaGFyWzFdID0gYnVmW2J1Zi5sZW5ndGggLSAxXTtcbiAgfVxuICByZXR1cm4gYnVmLnRvU3RyaW5nKCdiYXNlNjQnLCBpLCBidWYubGVuZ3RoIC0gbik7XG59XG5cbmZ1bmN0aW9uIGJhc2U2NEVuZChidWYpIHtcbiAgdmFyIHIgPSBidWYgJiYgYnVmLmxlbmd0aCA/IHRoaXMud3JpdGUoYnVmKSA6ICcnO1xuICBpZiAodGhpcy5sYXN0TmVlZCkgcmV0dXJuIHIgKyB0aGlzLmxhc3RDaGFyLnRvU3RyaW5nKCdiYXNlNjQnLCAwLCAzIC0gdGhpcy5sYXN0TmVlZCk7XG4gIHJldHVybiByO1xufVxuXG4vLyBQYXNzIGJ5dGVzIG9uIHRocm91Z2ggZm9yIHNpbmdsZS1ieXRlIGVuY29kaW5ncyAoZS5nLiBhc2NpaSwgbGF0aW4xLCBoZXgpXG5mdW5jdGlvbiBzaW1wbGVXcml0ZShidWYpIHtcbiAgcmV0dXJuIGJ1Zi50b1N0cmluZyh0aGlzLmVuY29kaW5nKTtcbn1cblxuZnVuY3Rpb24gc2ltcGxlRW5kKGJ1Zikge1xuICByZXR1cm4gYnVmICYmIGJ1Zi5sZW5ndGggPyB0aGlzLndyaXRlKGJ1ZikgOiAnJztcbn0iLCJ2YXIgc2NvcGUgPSAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwpIHx8XG4gICAgICAgICAgICAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZikgfHxcbiAgICAgICAgICAgIHdpbmRvdztcbnZhciBhcHBseSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTtcblxuLy8gRE9NIEFQSXMsIGZvciBjb21wbGV0ZW5lc3NcblxuZXhwb3J0cy5zZXRUaW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldFRpbWVvdXQsIHNjb3BlLCBhcmd1bWVudHMpLCBjbGVhclRpbWVvdXQpO1xufTtcbmV4cG9ydHMuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0SW50ZXJ2YWwsIHNjb3BlLCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcbn07XG5leHBvcnRzLmNsZWFyVGltZW91dCA9XG5leHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbih0aW1lb3V0KSB7XG4gIGlmICh0aW1lb3V0KSB7XG4gICAgdGltZW91dC5jbG9zZSgpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBUaW1lb3V0KGlkLCBjbGVhckZuKSB7XG4gIHRoaXMuX2lkID0gaWQ7XG4gIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xufVxuVGltZW91dC5wcm90b3R5cGUudW5yZWYgPSBUaW1lb3V0LnByb3RvdHlwZS5yZWYgPSBmdW5jdGlvbigpIHt9O1xuVGltZW91dC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5fY2xlYXJGbi5jYWxsKHNjb3BlLCB0aGlzLl9pZCk7XG59O1xuXG4vLyBEb2VzIG5vdCBzdGFydCB0aGUgdGltZSwganVzdCBzZXRzIHVwIHRoZSBtZW1iZXJzIG5lZWRlZC5cbmV4cG9ydHMuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSwgbXNlY3MpIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xufTtcblxuZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IC0xO1xufTtcblxuZXhwb3J0cy5fdW5yZWZBY3RpdmUgPSBleHBvcnRzLmFjdGl2ZSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXG4gIHZhciBtc2VjcyA9IGl0ZW0uX2lkbGVUaW1lb3V0O1xuICBpZiAobXNlY3MgPj0gMCkge1xuICAgIGl0ZW0uX2lkbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcbiAgICAgIGlmIChpdGVtLl9vblRpbWVvdXQpXG4gICAgICAgIGl0ZW0uX29uVGltZW91dCgpO1xuICAgIH0sIG1zZWNzKTtcbiAgfVxufTtcblxuLy8gc2V0aW1tZWRpYXRlIGF0dGFjaGVzIGl0c2VsZiB0byB0aGUgZ2xvYmFsIG9iamVjdFxucmVxdWlyZShcInNldGltbWVkaWF0ZVwiKTtcbi8vIE9uIHNvbWUgZXhvdGljIGVudmlyb25tZW50cywgaXQncyBub3QgY2xlYXIgd2hpY2ggb2JqZWN0IGBzZXRpbW1lZGlhdGVgIHdhc1xuLy8gYWJsZSB0byBpbnN0YWxsIG9udG8uICBTZWFyY2ggZWFjaCBwb3NzaWJpbGl0eSBpbiB0aGUgc2FtZSBvcmRlciBhcyB0aGVcbi8vIGBzZXRpbW1lZGlhdGVgIGxpYnJhcnkuXG5leHBvcnRzLnNldEltbWVkaWF0ZSA9ICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmLnNldEltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsLnNldEltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMgJiYgdGhpcy5zZXRJbW1lZGlhdGUpO1xuZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9ICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmLmNsZWFySW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbC5jbGVhckltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcyAmJiB0aGlzLmNsZWFySW1tZWRpYXRlKTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZXhwb3J0cy5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlcHJlY2F0ZTtcblxuLyoqXG4gKiBNYXJrIHRoYXQgYSBtZXRob2Qgc2hvdWxkIG5vdCBiZSB1c2VkLlxuICogUmV0dXJucyBhIG1vZGlmaWVkIGZ1bmN0aW9uIHdoaWNoIHdhcm5zIG9uY2UgYnkgZGVmYXVsdC5cbiAqXG4gKiBJZiBgbG9jYWxTdG9yYWdlLm5vRGVwcmVjYXRpb24gPSB0cnVlYCBpcyBzZXQsIHRoZW4gaXQgaXMgYSBuby1vcC5cbiAqXG4gKiBJZiBgbG9jYWxTdG9yYWdlLnRocm93RGVwcmVjYXRpb24gPSB0cnVlYCBpcyBzZXQsIHRoZW4gZGVwcmVjYXRlZCBmdW5jdGlvbnNcbiAqIHdpbGwgdGhyb3cgYW4gRXJyb3Igd2hlbiBpbnZva2VkLlxuICpcbiAqIElmIGBsb2NhbFN0b3JhZ2UudHJhY2VEZXByZWNhdGlvbiA9IHRydWVgIGlzIHNldCwgdGhlbiBkZXByZWNhdGVkIGZ1bmN0aW9uc1xuICogd2lsbCBpbnZva2UgYGNvbnNvbGUudHJhY2UoKWAgaW5zdGVhZCBvZiBgY29uc29sZS5lcnJvcigpYC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAtIHRoZSBmdW5jdGlvbiB0byBkZXByZWNhdGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBtc2cgLSB0aGUgc3RyaW5nIHRvIHByaW50IHRvIHRoZSBjb25zb2xlIHdoZW4gYGZuYCBpcyBpbnZva2VkXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IGEgbmV3IFwiZGVwcmVjYXRlZFwiIHZlcnNpb24gb2YgYGZuYFxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBkZXByZWNhdGUgKGZuLCBtc2cpIHtcbiAgaWYgKGNvbmZpZygnbm9EZXByZWNhdGlvbicpKSB7XG4gICAgcmV0dXJuIGZuO1xuICB9XG5cbiAgdmFyIHdhcm5lZCA9IGZhbHNlO1xuICBmdW5jdGlvbiBkZXByZWNhdGVkKCkge1xuICAgIGlmICghd2FybmVkKSB7XG4gICAgICBpZiAoY29uZmlnKCd0aHJvd0RlcHJlY2F0aW9uJykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgICB9IGVsc2UgaWYgKGNvbmZpZygndHJhY2VEZXByZWNhdGlvbicpKSB7XG4gICAgICAgIGNvbnNvbGUudHJhY2UobXNnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUud2Fybihtc2cpO1xuICAgICAgfVxuICAgICAgd2FybmVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICByZXR1cm4gZGVwcmVjYXRlZDtcbn1cblxuLyoqXG4gKiBDaGVja3MgYGxvY2FsU3RvcmFnZWAgZm9yIGJvb2xlYW4gdmFsdWVzIGZvciB0aGUgZ2l2ZW4gYG5hbWVgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGNvbmZpZyAobmFtZSkge1xuICAvLyBhY2Nlc3NpbmcgZ2xvYmFsLmxvY2FsU3RvcmFnZSBjYW4gdHJpZ2dlciBhIERPTUV4Y2VwdGlvbiBpbiBzYW5kYm94ZWQgaWZyYW1lc1xuICB0cnkge1xuICAgIGlmICghZ2xvYmFsLmxvY2FsU3RvcmFnZSkgcmV0dXJuIGZhbHNlO1xuICB9IGNhdGNoIChfKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciB2YWwgPSBnbG9iYWwubG9jYWxTdG9yYWdlW25hbWVdO1xuICBpZiAobnVsbCA9PSB2YWwpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIFN0cmluZyh2YWwpLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJztcbn1cbiIsInZhciBnO1xuXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxuZyA9IChmdW5jdGlvbigpIHtcblx0cmV0dXJuIHRoaXM7XG59KSgpO1xuXG50cnkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcblx0ZyA9IGcgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpIHx8ICgxLCBldmFsKShcInRoaXNcIik7XG59IGNhdGNoIChlKSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG4iXSwic291cmNlUm9vdCI6IiJ9